var _W=Object.defineProperty,z2=Object.getOwnPropertySymbols,yW=Object.prototype.hasOwnProperty,wW=Object.prototype.propertyIsEnumerable,j2=(Se,ke,Y)=>ke in Se?_W(Se,ke,{enumerable:!0,configurable:!0,writable:!0,value:Y}):Se[ke]=Y,ia=(Se,ke)=>{for(var Y in ke||(ke={}))yW.call(ke,Y)&&j2(Se,Y,ke[Y]);if(z2)for(var Y of z2(ke))wW.call(ke,Y)&&j2(Se,Y,ke[Y]);return Se};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{3276:(Se,ke,Y)=>{"use strict";function Q(t){return"function"==typeof t}function z(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const te=z(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function le(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class ve{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(Q(i))try{i()}catch(a){n=a instanceof te?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{V(a)}catch(o){n=null!=n?n:[],o instanceof te?n=[...n,...o.errors]:n.push(o)}}if(n)throw new te(n)}}add(n){var e;if(n&&n!==this)if(this.closed)V(n);else{if(n instanceof ve){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&le(e,n)}remove(n){const{_teardowns:e}=this;e&&le(e,n),n instanceof ve&&n._removeParent(this)}}ve.EMPTY=(()=>{const t=new ve;return t.closed=!0,t})();const J=ve.EMPTY;function re(t){return t instanceof ve||t&&"closed"in t&&Q(t.remove)&&Q(t.add)&&Q(t.unsubscribe)}function V(t){Q(t)?t():t.unsubscribe()}const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},F={setTimeout(...t){const{delegate:n}=F;return((null==n?void 0:n.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:n}=F;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function I(t){F.setTimeout(()=>{const{onUnhandledError:n}=M;if(!n)throw t;n(t)})}function O(){}const P=ce("C",void 0,void 0);function ce(t,n,e){return{kind:t,value:n,error:e}}let se=null;function G(t){if(M.useDeprecatedSynchronousErrorHandling){const n=!se;if(n&&(se={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=se;if(se=null,e)throw i}}else t()}class pe extends ve{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,re(n)&&n.add(this)):this.destination=me}static create(n,e,i){return new Re(n,e,i)}next(n){this.isStopped?He(function $(t){return ce("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?He(function B(t){return ce("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?He(P,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ne=Function.prototype.bind;function ue(t,n){return ne.call(t,n)}class fe{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){Ce(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){Ce(i)}else Ce(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Ce(e)}}}class Re extends pe{constructor(n,e,i){let r;if(super(),Q(n)||!n)r={next:null!=n?n:void 0,error:null!=e?e:void 0,complete:null!=i?i:void 0};else{let a;this&&M.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&ue(n.next,a),error:n.error&&ue(n.error,a),complete:n.complete&&ue(n.complete,a)}):r=n}this.destination=new fe(r)}}function Ce(t){M.useDeprecatedSynchronousErrorHandling?function q(t){M.useDeprecatedSynchronousErrorHandling&&se&&(se.errorThrown=!0,se.error=t)}(t):I(t)}function He(t,n){const{onStoppedNotification:e}=M;e&&F.setTimeout(()=>e(t,n))}const me={closed:!0,next:O,error:function Ne(t){throw t},complete:O},Pe="function"==typeof Symbol&&Symbol.observable||"@@observable";function Be(t){return t}let Le=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const a=function Te(t){return t&&t instanceof pe||function ui(t){return t&&Q(t.next)&&Q(t.error)&&Q(t.complete)}(t)&&re(t)}(e)?e:new Re(e,i,r);return G(()=>{const{operator:o,source:s}=this;a.add(o?o.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=qt(i))((r,a)=>{const o=new Re({next:s=>{try{e(s)}catch(l){a(l),o.unsubscribe()}},error:a,complete:r});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Pe](){return this}pipe(...e){return function vt(t){return 0===t.length?Be:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=qt(e))((i,r)=>{let a;this.subscribe(o=>a=o,o=>r(o),()=>i(a))})}}return t.create=n=>new t(n),t})();function qt(t){var n;return null!==(n=null!=t?t:M.Promise)&&void 0!==n?n:Promise}const Oe=z(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ye=(()=>{class t extends Le{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new Ae(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new Oe}next(e){G(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(e)}})}error(e){G(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){G(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:a}=this;return i||r?J:(a.push(e),new ve(()=>le(a,e)))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:a}=this;i?e.error(r):a&&e.complete()}asObservable(){const e=new Le;return e.source=this,e}}return t.create=(n,e)=>new Ae(n,e),t})();class Ae extends ye{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:J}}function zi(t){return Q(null==t?void 0:t.lift)}function kt(t){return n=>{if(zi(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Zt(t,n,e,i,r){return new Jt(t,n,e,i,r)}class Jt extends pe{constructor(n,e,i,r,a,o){super(n),this.onFinalize=a,this.shouldUnsubscribe=o,this._next=e?function(s){try{e(s)}catch(l){n.error(l)}}:super._next,this._error=r?function(s){try{r(s)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ht(t,n){return kt((e,i)=>{let r=0;e.subscribe(Zt(i,a=>{i.next(t.call(n,a,r++))}))})}function je(t,n,e,i){var o,r=arguments.length,a=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(n,e,a):o(n,e))||a);return r>3&&a&&Object.defineProperty(n,e,a),a}function Je(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}function Mr(t){return this instanceof Mr?(this.v=t,this):new Mr(t)}function cs(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(v){i[v]&&(r[v]=function(m){return new Promise(function(_,w){a.push([v,m,_,w])>1||s(v,m)})})}function s(v,m){try{!function l(v){v.value instanceof Mr?Promise.resolve(v.value.v).then(c,u):d(a[0][2],v)}(i[v](m))}catch(_){d(a[0][3],_)}}function c(v){s("next",v)}function u(v){s("throw",v)}function d(v,m){v(m),a.shift(),a.length&&s(a[0][0],a[0][1])}}function ad(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function xr(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=t[a]&&function(o){return new Promise(function(s,l){!function r(a,o,s,l){Promise.resolve(l).then(function(c){a({value:c,done:s})},o)}(s,l,(o=t[a](o)).done,o.value)})}}}const cc=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function od(t){return Q(null==t?void 0:t.then)}function uc(t){return Q(t[Pe])}function sd(t){return Symbol.asyncIterator&&Q(null==t?void 0:t[Symbol.asyncIterator])}function dc(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const hc=function np(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ld(t){return Q(null==t?void 0:t[hc])}function cd(t){return cs(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield Mr(e.read());if(r)return yield Mr(void 0);yield yield Mr(i)}}finally{e.releaseLock()}})}function ud(t){return Q(null==t?void 0:t.getReader)}function Hn(t){if(t instanceof Le)return t;if(null!=t){if(uc(t))return function rp(t){return new Le(n=>{const e=t[Pe]();if(Q(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(cc(t))return function ap(t){return new Le(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(od(t))return function dd(t){return new Le(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,I)})}(t);if(sd(t))return fc(t);if(ld(t))return function op(t){return new Le(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(ud(t))return function pr(t){return fc(cd(t))}(t)}throw dc(t)}function fc(t){return new Le(n=>{(function za(t,n){var e,i,r,a;return function Us(t,n,e,i){return new(e||(e=Promise))(function(a,o){function s(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):function r(a){return a instanceof e?a:new e(function(o){o(a)})}(u.value).then(s,l)}c((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=ad(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function ra(t,n,e,i=0,r=!1){const a=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function Rn(t,n,e=1/0){return Q(n)?Rn((i,r)=>Ht((a,o)=>n(i,a,r,o))(Hn(t(i,r))),e):("number"==typeof n&&(e=n),kt((i,r)=>function sp(t,n,e,i,r,a,o,s){const l=[];let c=0,u=0,d=!1;const v=()=>{d&&!l.length&&!c&&n.complete()},m=w=>c<i?_(w):l.push(w),_=w=>{a&&n.next(w),c++;let S=!1;Hn(e(w,u++)).subscribe(Zt(n,k=>{null==r||r(k),a?m(k):n.next(k)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<i;){const k=l.shift();o?ra(n,o,()=>_(k)):_(k)}v()}catch(k){n.error(k)}}))};return t.subscribe(Zt(n,m,()=>{d=!0,v()})),()=>{null==s||s()}}(i,r,t,e)))}function pc(t=1/0){return Rn(Be,t)}const wa=new Le(t=>t.complete());function fb(t){return t&&Q(t.schedule)}function lp(t){return t[t.length-1]}function hd(t){return Q(lp(t))?t.pop():void 0}function gc(t){return fb(lp(t))?t.pop():void 0}function pb(t,n=0){return kt((e,i)=>{e.subscribe(Zt(i,r=>ra(i,t,()=>i.next(r),n),()=>ra(i,t,()=>i.complete(),n),r=>ra(i,t,()=>i.error(r),n)))})}function gb(t,n=0){return kt((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function vb(t,n){if(!t)throw new Error("Iterable cannot be null");return new Le(e=>{ra(e,n,()=>{const i=t[Symbol.asyncIterator]();ra(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Kn(t,n){return n?function Z2(t,n){if(null!=t){if(uc(t))return function q2(t,n){return Hn(t).pipe(gb(n),pb(n))}(t,n);if(cc(t))return function Y2(t,n){return new Le(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(od(t))return function X2(t,n){return Hn(t).pipe(gb(n),pb(n))}(t,n);if(sd(t))return vb(t,n);if(ld(t))return function Q2(t,n){return new Le(e=>{let i;return ra(e,n,()=>{i=t[hc](),ra(e,n,()=>{let r,a;try{({value:r,done:a}=i.next())}catch(o){return void e.error(o)}a?e.complete():e.next(r)},0,!0)}),()=>Q(null==i?void 0:i.return)&&i.return()})}(t,n);if(ud(t))return function K2(t,n){return vb(cd(t),n)}(t,n)}throw dc(t)}(t,n):Hn(t)}function mb(...t){const n=gc(t),e=function W2(t,n){return"number"==typeof lp(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?Hn(i[0]):pc(e)(Kn(i,n)):wa}function Zn(t){return t<=0?()=>wa:kt((n,e)=>{let i=0;n.subscribe(Zt(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function bb(t={}){const{connector:n=(()=>new ye),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return a=>{let o=null,s=null,l=null,c=0,u=!1,d=!1;const v=()=>{null==s||s.unsubscribe(),s=null},m=()=>{v(),o=l=null,u=d=!1},_=()=>{const w=o;m(),null==w||w.unsubscribe()};return kt((w,S)=>{c++,!d&&!u&&v();const k=l=null!=l?l:n();S.add(()=>{c--,0===c&&!d&&!u&&(s=cp(_,r))}),k.subscribe(S),o||(o=new Re({next:T=>k.next(T),error:T=>{d=!0,v(),s=cp(m,e,T),k.error(T)},complete:()=>{u=!0,v(),s=cp(m,i),k.complete()}}),Kn(w).subscribe(o))})(a)}}function cp(t,n,...e){return!0===n?(t(),null):!1===n?null:n(...e).pipe(Zn(1)).subscribe(()=>t())}function ji(t){for(let n in t)if(t[n]===ji)return n;throw Error("Could not find renamed property on target object.")}function up(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Ni(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ni).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function dp(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const J2=ji({__forward_ref__:ji});function Ci(t){return t.__forward_ref__=Ci,t.toString=function(){return Ni(this())},t}function Xt(t){return _b(t)?t():t}function _b(t){return"function"==typeof t&&t.hasOwnProperty(J2)&&t.__forward_ref__===Ci}class _i extends Error{constructor(n,e){super(function hp(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function Ft(t){return"string"==typeof t?t:null==t?"":String(t)}function gr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ft(t)}function fd(t,n){const e=n?` in ${n}`:"";throw new _i(-201,`No provider for ${gr(t)} found${e}`)}function nn(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function ct(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ai(t){return{providers:t.providers||[],imports:t.imports||[]}}function fp(t){return yb(t,pd)||yb(t,Cb)}function yb(t,n){return t.hasOwnProperty(n)?t[n]:null}function wb(t){return t&&(t.hasOwnProperty(pp)||t.hasOwnProperty(ox))?t[pp]:null}const pd=ji({\u0275prov:ji}),pp=ji({\u0275inj:ji}),Cb=ji({ngInjectableDef:ji}),ox=ji({ngInjectorDef:ji});var Gt=(()=>((Gt=Gt||{})[Gt.Default=0]="Default",Gt[Gt.Host=1]="Host",Gt[Gt.Self=2]="Self",Gt[Gt.SkipSelf=4]="SkipSelf",Gt[Gt.Optional=8]="Optional",Gt))();let gp;function Uo(t){const n=gp;return gp=t,n}function Sb(t,n,e){const i=fp(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Gt.Optional?null:void 0!==n?n:void fd(Ni(t),"Injector")}function Ho(t){return{toString:t}.toString()}var Ca=(()=>((Ca=Ca||{})[Ca.OnPush=0]="OnPush",Ca[Ca.Default=1]="Default",Ca))(),ja=(()=>{return(t=ja||(ja={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",ja;var t})();const lx="undefined"!=typeof globalThis&&globalThis,cx="undefined"!=typeof window&&window,ux="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Li=lx||"undefined"!=typeof global&&global||cx||ux,$s={},$i=[],gd=ji({\u0275cmp:ji}),vp=ji({\u0275dir:ji}),mp=ji({\u0275pipe:ji}),Tb=ji({\u0275mod:ji}),_o=ji({\u0275fac:ji}),vc=ji({__NG_ELEMENT_ID__:ji});let dx=0;function bt(t){return Ho(()=>{const e={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ca.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||$i,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ja.Emulated,id:"c",styles:t.styles||$i,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,o=t.pipes;return i.id+=dx++,i.inputs=kb(t.inputs,e),i.outputs=kb(t.outputs),a&&a.forEach(s=>s(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(Db):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Rb):null,i})}function Db(t){return rr(t)||function Go(t){return t[vp]||null}(t)}function Rb(t){return function us(t){return t[mp]||null}(t)}const xb={};function Fi(t){return Ho(()=>{const n={type:t.type,bootstrap:t.bootstrap||$i,declarations:t.declarations||$i,imports:t.imports||$i,exports:t.exports||$i,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(xb[t.id]=t.type),n})}function kb(t,n){if(null==t)return $s;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=i,n&&(n[r]=a)}return e}const We=bt;function Ar(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function rr(t){return t[gd]||null}function aa(t,n){const e=t[Tb]||null;if(!e&&!0===n)throw new Error(`Type ${Ni(t)} does not have '\u0275mod' property.`);return e}function $a(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ta(t){return Array.isArray(t)&&!0===t[1]}function yp(t){return 0!=(8&t.flags)}function _d(t){return 2==(2&t.flags)}function yd(t){return 1==(1&t.flags)}function Da(t){return null!==t.template}function mx(t){return 0!=(512&t[2])}function ps(t,n){return t.hasOwnProperty(_o)?t[_o]:null}class yx{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function Gn(){return Ab}function Ab(t){return t.type.prototype.ngOnChanges&&(t.setInput=Cx),wx}function wx(){const t=Eb(this),n=null==t?void 0:t.current;if(n){const e=t.previous;if(e===$s)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function Cx(t,n,e,i){const r=Eb(t)||function Sx(t,n){return t[Pb]=n}(t,{previous:$s,current:null}),a=r.current||(r.current={}),o=r.previous,s=this.declaredInputs[e],l=o[s];a[s]=new yx(l&&l.currentValue,n,o===$s),t[i]=n}Gn.ngInherit=!0;const Pb="__ngSimpleChanges__";function Eb(t){return t[Pb]||null}let Dp;function Rp(){return void 0!==Dp?Dp:"undefined"!=typeof document?document:void 0}function wn(t){return!!t.listen}const Ib={createRenderer:(t,n)=>Rp()};function In(t){for(;Array.isArray(t);)t=t[0];return t}function wd(t,n){return In(n[t])}function la(t,n){return In(n[t.index])}function xp(t,n){return t.data[n]}function Qs(t,n){return t[n]}function Hr(t,n){const e=n[t];return $a(e)?e:e[0]}function Vb(t){return 4==(4&t[2])}function kp(t){return 128==(128&t[2])}function zo(t,n){return null==n?null:t[n]}function Ob(t){t[18]=0}function Mp(t,n){t[5]+=n;let e=t,i=t[3];for(;null!==i&&(1===n&&1===e[5]||-1===n&&0===e[5]);)i[5]+=n,e=i,i=i[3]}const Vt={lFrame:zb(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Nb(){return Vt.bindingsEnabled}function Me(){return Vt.lFrame.lView}function yi(){return Vt.lFrame.tView}function N(t){return Vt.lFrame.contextLView=t,t[8]}function zn(){let t=Fb();for(;null!==t&&64===t.type;)t=t.parent;return t}function Fb(){return Vt.lFrame.currentTNode}function yc(){const t=Vt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function Wa(t,n){const e=Vt.lFrame;e.currentTNode=t,e.isParent=n}function Ap(){return Vt.lFrame.isParent}function Pp(){Vt.lFrame.isParent=!1}function Cd(){return Vt.isInCheckNoChangesMode}function Sd(t){Vt.isInCheckNoChangesMode=t}function vr(){const t=Vt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function yo(){return Vt.lFrame.bindingIndex}function Ks(){return Vt.lFrame.bindingIndex++}function wo(t){const n=Vt.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Lb(t){Vt.lFrame.inI18n=t}function Ux(t,n){const e=Vt.lFrame;e.bindingIndex=e.bindingRootIndex=t,Ep(n)}function Ep(t){Vt.lFrame.currentDirectiveIndex=t}function Ub(){return Vt.lFrame.currentQueryIndex}function Vp(t){Vt.lFrame.currentQueryIndex=t}function Gx(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Hb(t,n,e){if(e&Gt.SkipSelf){let r=n,a=t;for(;!(r=r.parent,null!==r||e&Gt.Host||(r=Gx(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;n=r,t=a}const i=Vt.lFrame=Gb();return i.currentTNode=n,i.lView=t,!0}function Td(t){const n=Gb(),e=t[1];Vt.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Gb(){const t=Vt.lFrame,n=null===t?null:t.child;return null===n?zb(t):n}function zb(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function jb(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const $b=jb;function Dd(){const t=jb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function mr(){return Vt.lFrame.selectedIndex}function jo(t){Vt.lFrame.selectedIndex=t}function Cn(){const t=Vt.lFrame;return xp(t.tView,t.selectedIndex)}function Rd(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;o&&(t.contentHooks||(t.contentHooks=[])).push(-e,o),s&&((t.contentHooks||(t.contentHooks=[])).push(e,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,s)),l&&(t.viewHooks||(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks||(t.viewHooks=[])).push(e,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks||(t.destroyHooks=[])).push(e,u)}}function xd(t,n,e){Wb(t,n,3,e)}function kd(t,n,e,i){(3&t[2])===e&&Wb(t,n,e,i)}function Op(t,n){let e=t[2];(3&e)===n&&(e&=2047,e+=1,t[2]=e)}function Wb(t,n,e,i){const a=null!=i?i:-1,o=n.length-1;let s=0;for(let l=void 0!==i?65535&t[18]:0;l<o;l++)if("number"==typeof n[l+1]){if(s=n[l],null!=i&&s>=i)break}else n[l]<0&&(t[18]+=65536),(s<a||-1==a)&&(Kx(t,e,n,l),t[18]=(4294901760&t[18])+l+2),l++}function Kx(t,n,e,i){const r=e[i]<0,a=e[i+1],s=t[r?-e[i]:e[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{a.call(s)}finally{}}}else try{a.call(s)}finally{}}class wc{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Md(t,n,e){const i=wn(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const o=e[r++],s=e[r++],l=e[r++];i?t.setAttribute(n,s,l,o):n.setAttributeNS(o,s,l)}else{const o=a,s=e[++r];Fp(o)?i&&t.setProperty(n,o,s):i?t.setAttribute(n,o,s):n.setAttribute(o,s),r++}}return r}function qb(t){return 3===t||4===t||6===t}function Fp(t){return 64===t.charCodeAt(0)}function Ad(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||Xb(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function Xb(t,n,e,i,r){let a=0,o=t.length;if(-1===n)o=-1;else for(;a<t.length;){const s=t[a++];if("number"==typeof s){if(s===n){o=-1;break}if(s>n){o=a-1;break}}}for(;a<t.length;){const s=t[a];if("number"==typeof s)break;if(s===e){if(null===i)return void(null!==r&&(t[a+1]=r));if(i===t[a+1])return void(t[a+2]=r)}a++,null!==i&&a++,null!==r&&a++}-1!==o&&(t.splice(o,0,n),a=o+1),t.splice(a++,0,e),null!==i&&t.splice(a++,0,i),null!==r&&t.splice(a++,0,r)}function Yb(t){return-1!==t}function Zs(t){return 32767&t}function Js(t,n){let e=function ik(t){return t>>16}(t),i=n;for(;e>0;)i=i[15],e--;return i}let Bp=!0;function Pd(t){const n=Bp;return Bp=t,n}let nk=0;function Sc(t,n){const e=Up(t,n);if(-1!==e)return e;const i=n[1];i.firstCreatePass&&(t.injectorIndex=n.length,Lp(i.data,t),Lp(n,null),Lp(i.blueprint,null));const r=Ed(t,n),a=t.injectorIndex;if(Yb(r)){const o=Zs(r),s=Js(r,n),l=s[1].data;for(let c=0;c<8;c++)n[a+c]=s[o+c]|l[o+c]}return n[a+8]=r,a}function Lp(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Up(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Ed(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){const a=r[1],o=a.type;if(i=2===o?a.declTNode:1===o?r[6]:null,null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function Id(t,n,e){!function rk(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(vc)&&(i=e[vc]),null==i&&(i=e[vc]=nk++);const r=255&i;n.data[t+(r>>5)]|=1<<r}(t,n,e)}function Zb(t,n,e){if(e&Gt.Optional)return t;fd(n,"NodeInjector")}function Jb(t,n,e,i){if(e&Gt.Optional&&void 0===i&&(i=null),0==(e&(Gt.Self|Gt.Host))){const r=t[9],a=Uo(void 0);try{return r?r.get(n,i,e&Gt.Optional):Sb(n,i,e&Gt.Optional)}finally{Uo(a)}}return Zb(i,n,e)}function e1(t,n,e,i=Gt.Default,r){if(null!==t){const a=function lk(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(vc)?t[vc]:void 0;return"number"==typeof n?n>=0?255&n:ok:n}(e);if("function"==typeof a){if(!Hb(n,t,i))return i&Gt.Host?Zb(r,e,i):Jb(n,e,i,r);try{const o=a(i);if(null!=o||i&Gt.Optional)return o;fd(e)}finally{$b()}}else if("number"==typeof a){let o=null,s=Up(t,n),l=-1,c=i&Gt.Host?n[16][6]:null;for((-1===s||i&Gt.SkipSelf)&&(l=-1===s?Ed(t,n):n[s+8],-1!==l&&n1(i,!1)?(o=n[1],s=Zs(l),n=Js(l,n)):s=-1);-1!==s;){const u=n[1];if(i1(a,s,u.data)){const d=sk(s,n,e,o,i,c);if(d!==t1)return d}l=n[s+8],-1!==l&&n1(i,n[1].data[s+8]===c)&&i1(a,s,n)?(o=u,s=Zs(l),n=Js(l,n)):s=-1}}}return Jb(n,e,i,r)}const t1={};function ok(){return new el(zn(),Me())}function sk(t,n,e,i,r,a){const o=n[1],s=o.data[t+8],u=Vd(s,o,e,null==i?_d(s)&&Bp:i!=o&&0!=(3&s.type),r&Gt.Host&&a===s);return null!==u?Tc(n,o,u,s):t1}function Vd(t,n,e,i,r){const a=t.providerIndexes,o=n.data,s=1048575&a,l=t.directiveStart,u=a>>20,v=r?s+u:t.directiveEnd;for(let m=i?s:s+u;m<v;m++){const _=o[m];if(m<l&&e===_||m>=l&&_.type===e)return m}if(r){const m=o[l];if(m&&Da(m)&&m.type===e)return l}return null}function Tc(t,n,e,i){let r=t[e];const a=n.data;if(function Zx(t){return t instanceof wc}(r)){const o=r;o.resolving&&function ex(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new _i(-200,`Circular dependency in DI detected for ${t}${e}`)}(gr(a[e]));const s=Pd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Uo(o.injectImpl):null;Hb(t,i,Gt.Default);try{r=t[e]=o.factory(void 0,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&function Qx(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:a}=n.type.prototype;if(i){const o=Ab(n);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],n)}finally{null!==l&&Uo(l),Pd(s),o.resolving=!1,$b()}}return r}function i1(t,n,e){return!!(e[n+(t>>5)]&1<<t)}function n1(t,n){return!(t&Gt.Self||t&Gt.Host&&n)}class el{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return e1(this._tNode,this._lView,n,i,e)}}function or(t){return Ho(()=>{const n=t.prototype.constructor,e=n[_o]||Hp(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const a=r[_o]||Hp(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function Hp(t){return _b(t)?()=>{const n=Hp(Xt(t));return n&&n()}:ps(t)}const il="__parameters__";function rl(t,n,e){return Ho(()=>{const i=function Gp(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...a){if(this instanceof r)return i.apply(this,a),this;const o=new r(...a);return s.annotation=o,s;function s(l,c,u){const d=l.hasOwnProperty(il)?l[il]:Object.defineProperty(l,il,{value:[]})[il];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class ti{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ct({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const uk=new ti("AnalyzeForEntryComponents");function ca(t,n){void 0===n&&(n=t);for(let e=0;e<t.length;e++){let i=t[e];Array.isArray(i)?(n===t&&(n=t.slice(0,e)),ca(i,n)):n!==t&&n.push(i)}return n}function qa(t,n){t.forEach(e=>Array.isArray(e)?qa(e,n):n(e))}function a1(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Od(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function xc(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function Gr(t,n,e){let i=al(t,n);return i>=0?t[1|i]=e:(i=~i,function fk(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function jp(t,n){const e=al(t,n);if(e>=0)return t[1|e]}function al(t,n){return function l1(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const a=i+(r-i>>1),o=t[a<<e];if(n===o)return a<<e;o>n?r=a:i=a+1}return~(r<<e)}(t,n,1)}const kc={},Wp="__NG_DI_FLAG__",Fd="ngTempTokenPath",yk=/\n/gm,u1="__source",Ck=ji({provide:String,useValue:ji});let Mc;function d1(t){const n=Mc;return Mc=t,n}function Sk(t,n=Gt.Default){if(void 0===Mc)throw new _i(203,"");return null===Mc?Sb(t,void 0,n):Mc.get(t,n&Gt.Optional?null:void 0,n)}function Ue(t,n=Gt.Default){return(function sx(){return gp}()||Sk)(Xt(t),n)}function qp(t){const n=[];for(let e=0;e<t.length;e++){const i=Xt(t[e]);if(Array.isArray(i)){if(0===i.length)throw new _i(900,"");let r,a=Gt.Default;for(let o=0;o<i.length;o++){const s=i[o],l=Tk(s);"number"==typeof l?-1===l?r=s.token:a|=l:r=s}n.push(Ue(r,a))}else n.push(Ue(i))}return n}function Ac(t,n){return t[Wp]=n,t.prototype[Wp]=n,t}function Tk(t){return t[Wp]}const Pc=Ac(rl("Inject",t=>({token:t})),-1),Xa=Ac(rl("Optional"),8),ol=Ac(rl("SkipSelf"),4);let Ld,Ud;function ll(t){var n;return(null===(n=function Yp(){if(void 0===Ld&&(Ld=null,Li.trustedTypes))try{Ld=Li.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Ld}())||void 0===n?void 0:n.createHTML(t))||t}function m1(t){var n;return(null===(n=function Qp(){if(void 0===Ud&&(Ud=null,Li.trustedTypes))try{Ud=Li.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Ud}())||void 0===n?void 0:n.createHTML(t))||t}class vs{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fk extends vs{getTypeName(){return"HTML"}}class Bk extends vs{getTypeName(){return"Style"}}class Lk extends vs{getTypeName(){return"Script"}}class Uk extends vs{getTypeName(){return"URL"}}class Hk extends vs{getTypeName(){return"ResourceURL"}}function zr(t){return t instanceof vs?t.changingThisBreaksApplicationSecurity:t}function Ya(t,n){const e=y1(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===n}function y1(t){return t instanceof vs&&t.getTypeName()||null}function w1(t){const n=new Xk(t);return function Yk(){try{return!!(new window.DOMParser).parseFromString(ll(""),"text/html")}catch(t){return!1}}()?new qk(n):n}class qk{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(ll(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Xk{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(n){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=ll(n),e;const i=this.inertDocument.createElement("body");return i.innerHTML=ll(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(n){const e=n.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&n.removeAttribute(o)}let i=n.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const Qk=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Kk=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ic(t){return(t=String(t)).match(Qk)||t.match(Kk)?t:"unsafe:"+t}function C1(t){return(t=String(t)).split(",").map(n=>Ic(n.trim())).join(", ")}function Qa(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Vc(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const S1=Qa("area,br,col,hr,img,wbr"),T1=Qa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),D1=Qa("rp,rt"),Kp=Vc(S1,Vc(T1,Qa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vc(D1,Qa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vc(D1,T1)),Zp=Qa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jp=Qa("srcset"),R1=Vc(Zp,Jp,Qa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zk=Qa("script,style,template");class Jk{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!Kp.hasOwnProperty(e))return this.sanitizedSomething=!0,!Zk.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const a=i.item(r),o=a.name,s=o.toLowerCase();if(!R1.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=a.value;Zp[s]&&(l=Ic(l)),Jp[s]&&(l=C1(l)),this.buf.push(" ",o,'="',x1(l),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();Kp.hasOwnProperty(e)&&!S1.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(x1(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const eM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tM=/([^\#-~ |!])/g;function x1(t){return t.replace(/&/g,"&amp;").replace(eM,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(tM,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Hd;function k1(t,n){let e=null;try{Hd=Hd||w1(t);let i=n?String(n):"";e=Hd.getInertBodyElement(i);let r=5,a=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=a,a=e.innerHTML,e=Hd.getInertBodyElement(i)}while(i!==a);return ll((new Jk).sanitizeChildren(eg(e)||e))}finally{if(e){const i=eg(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function eg(t){return"content"in t&&function iM(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var pi=(()=>((pi=pi||{})[pi.NONE=0]="NONE",pi[pi.HTML=1]="HTML",pi[pi.STYLE=2]="STYLE",pi[pi.SCRIPT=3]="SCRIPT",pi[pi.URL=4]="URL",pi[pi.RESOURCE_URL=5]="RESOURCE_URL",pi))();function zt(t){const n=function Oc(){const t=Me();return t&&t[12]}();return n?m1(n.sanitize(pi.HTML,t)||""):Ya(t,"HTML")?m1(zr(t)):k1(Rp(),Ft(t))}const P1="__ngContext__";function sr(t,n){t[P1]=n}function ng(t){const n=function Nc(t){return t[P1]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function ag(t){return t.ngOriginalError}function bM(t,...n){t.error(...n)}class cl{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n),i=function mM(t){return t&&t.ngErrorLogger||bM}(n);i(this._console,"ERROR",n),e&&i(this._console,"ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&ag(n);for(;e&&ag(e);)e=ag(e);return e||null}}const wM=/^>|^->|<!--|-->|--!>|<!-$/g,CM=/(<|>)/;const N1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Li))();function Co(t){return t.ownerDocument.defaultView}function Ka(t){return t instanceof Function?t():t}var jr=(()=>((jr=jr||{})[jr.Important=1]="Important",jr[jr.DashCase=2]="DashCase",jr))();let og;function sg(t,n){return og(t,n)}function Fc(t){const n=t[3];return Ta(n)?n[3]:n}function lg(t){return H1(t[13])}function cg(t){return H1(t[4])}function H1(t){for(;null!==t&&!Ta(t);)t=t[4];return t}function dl(t,n,e,i,r){if(null!=i){let a,o=!1;Ta(i)?a=i:$a(i)&&(o=!0,i=i[0]);const s=In(i);0===t&&null!==e?null==r?q1(n,e,s):ms(n,e,s,r||null,!0):1===t&&null!==e?ms(n,e,s,r||null,!0):2===t?e_(n,s,o):3===t&&n.destroyNode(s),null!=a&&function zM(t,n,e,i,r){const a=e[7];a!==In(e)&&dl(n,t,i,a,r);for(let s=10;s<e.length;s++){const l=e[s];Bc(l[1],l,t,n,i,a)}}(n,t,a,e,r)}}function ug(t,n){return wn(t)?t.createText(n):t.createTextNode(n)}function G1(t,n,e){wn(t)?t.setValue(n,e):n.textContent=e}function PM(t,n){return t.createComment(function O1(t){return t.replace(wM,n=>n.replace(CM,"\u200b$1\u200b"))}(n))}function dg(t,n,e){if(wn(t))return t.createElement(n,e);{const i=null!==e?function xx(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(e):null;return null===i?t.createElement(n):t.createElementNS(i,n)}}function z1(t,n){const e=t[9],i=e.indexOf(n),r=n[3];1024&n[2]&&(n[2]&=-1025,Mp(r,-1)),e.splice(i,1)}function hg(t,n){if(t.length<=10)return;const e=10+n,i=t[e];if(i){const r=i[17];null!==r&&r!==t&&z1(r,i),n>0&&(t[e-1][4]=i[4]);const a=Od(t,10+n);!function EM(t,n){Bc(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(i[1],i);const o=a[19];null!==o&&o.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function j1(t,n){if(!(256&n[2])){const e=n[11];wn(e)&&e.destroyNode&&Bc(t,n,e,3,null,null),function OM(t){let n=t[13];if(!n)return fg(t[1],t);for(;n;){let e=null;if($a(n))e=n[13];else{const i=n[10];i&&(e=i)}if(!e){for(;n&&!n[4]&&n!==t;)$a(n)&&fg(n[1],n),n=n[3];null===n&&(n=t),$a(n)&&fg(n[1],n),e=n&&n[4]}n=e}}(n)}}function fg(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function LM(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof wc)){const a=e[i+1];if(Array.isArray(a))for(let o=0;o<a.length;o+=2){const s=r[a[o]],l=a[o+1];try{l.call(s)}finally{}}else try{a.call(r)}finally{}}}}(t,n),function BM(t,n){const e=t.cleanup,i=n[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const o=e[a+1],s="function"==typeof o?o(n):In(n[o]),l=i[r=e[a+2]],c=e[a+3];"boolean"==typeof c?s.removeEventListener(e[a],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),a+=2}else{const o=i[r=e[a+1]];e[a].call(o)}if(null!==i){for(let a=r+1;a<i.length;a++)i[a]();n[7]=null}}(t,n),1===n[1].type&&wn(n[11])&&n[11].destroy();const e=n[17];if(null!==e&&Ta(n[3])){e!==n[3]&&z1(e,n);const i=n[19];null!==i&&i.detachView(t)}}}function $1(t,n,e){return W1(t,n.parent,e)}function W1(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[0];if(2&i.flags){const r=t.data[i.directiveStart].encapsulation;if(r===ja.None||r===ja.Emulated)return null}return la(i,e)}function ms(t,n,e,i,r){wn(t)?t.insertBefore(n,e,i,r):n.insertBefore(e,i,r)}function q1(t,n,e){wn(t)?t.appendChild(n,e):n.appendChild(e)}function X1(t,n,e,i,r){null!==i?ms(t,n,e,i,r):q1(t,n,e)}function Gd(t,n){return wn(t)?t.parentNode(n):n.parentNode}function Y1(t,n,e){return K1(t,n,e)}function Q1(t,n,e){return 40&t.type?la(t,e):null}let pg,K1=Q1;function Z1(t,n){K1=t,pg=n}function zd(t,n,e,i){const r=$1(t,i,n),a=n[11],s=Y1(i.parent||n[6],i,n);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)X1(a,r,e[l],s,!1);else X1(a,r,e,s,!1);void 0!==pg&&pg(a,i,n,e,r)}function jd(t,n){if(null!==n){const e=n.type;if(3&e)return la(n,t);if(4&e)return gg(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return jd(t,i);{const r=t[n.index];return Ta(r)?gg(-1,r):In(r)}}if(32&e)return sg(n,t)()||In(t[n.index]);{const i=J1(t,n);return null!==i?Array.isArray(i)?i[0]:jd(Fc(t[16]),i):jd(t,n.next)}}return null}function J1(t,n){return null!==n?t[16][6].projection[n.projection]:null}function gg(t,n){const e=10+t+1;if(e<n.length){const i=n[e],r=i[1].firstChild;if(null!==r)return jd(i,r)}return n[7]}function e_(t,n,e){const i=Gd(t,n);i&&function UM(t,n,e,i){wn(t)?t.removeChild(n,e,i):n.removeChild(e)}(t,i,n,e)}function vg(t,n,e,i,r,a,o){for(;null!=e;){const s=i[e.index],l=e.type;if(o&&0===n&&(s&&sr(In(s),i),e.flags|=4),64!=(64&e.flags))if(8&l)vg(t,n,e.child,i,r,a,!1),dl(n,t,r,s,a);else if(32&l){const c=sg(e,i);let u;for(;u=c();)dl(n,t,r,u,a);dl(n,t,r,s,a)}else 16&l?t_(t,n,i,e,r,a):dl(n,t,r,s,a);e=o?e.projectionNext:e.next}}function Bc(t,n,e,i,r,a){vg(e,i,t.firstChild,n,r,a,!1)}function t_(t,n,e,i,r,a){const o=e[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)dl(n,t,r,l[c],a);else vg(t,n,l,o[3],r,a,!0)}function i_(t,n,e){wn(t)?t.setAttribute(n,"style",e):n.style.cssText=e}function mg(t,n,e){wn(t)?""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e):n.className=e}function n_(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=n.length;if(r+a===i||t.charCodeAt(r+a)<=32)return r}e=r+1}}const r_="ng-template";function $M(t,n,e){let i=0;for(;i<t.length;){let r=t[i++];if(e&&"class"===r){if(r=t[i],-1!==n_(r.toLowerCase(),n,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===n)return!0;return!1}}return!1}function a_(t){return 4===t.type&&t.value!==r_}function WM(t,n,e){return n===(4!==t.type||e?t.value:r_)}function qM(t,n,e){let i=4;const r=t.attrs||[],a=function QM(t){for(let n=0;n<t.length;n++)if(qb(t[n]))return n;return t.length}(r);let o=!1;for(let s=0;s<n.length;s++){const l=n[s];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!WM(t,l,e)||""===l&&1===n.length){if(Ra(i))return!1;o=!0}}else{const c=8&i?l:n[++s];if(8&i&&null!==t.attrs){if(!$M(t.attrs,c,e)){if(Ra(i))return!1;o=!0}continue}const d=XM(8&i?"class":l,r,a_(t),e);if(-1===d){if(Ra(i))return!1;o=!0;continue}if(""!==c){let v;v=d>a?"":r[d+1].toLowerCase();const m=8&i?v:null;if(m&&-1!==n_(m,c,0)||2&i&&c!==v){if(Ra(i))return!1;o=!0}}}}else{if(!o&&!Ra(i)&&!Ra(l))return!1;if(o&&Ra(l))continue;o=!1,i=l|1&i}}return Ra(i)||o}function Ra(t){return 0==(1&t)}function XM(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let a=!1;for(;r<n.length;){const o=n[r];if(o===t)return r;if(3===o||6===o)a=!0;else{if(1===o||2===o){let s=n[++r];for(;"string"==typeof s;)s=n[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=a?1:2}return-1}return function KM(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function o_(t,n,e=!1){for(let i=0;i<n.length;i++)if(qM(t,n[i],e))return!0;return!1}function ZM(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function s_(t,n){return t?":not("+n.trim()+")":n}function JM(t){let n=t[0],e=1,i=2,r="",a=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&i){const s=t[++e];r+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ra(o)&&(n+=s_(a,r),r=""),i=o,a=a||!Ra(i);e++}return""!==r&&(n+=s_(a,r)),n}const Bt={};function p(t){l_(yi(),Me(),mr()+t,Cd())}function l_(t,n,e,i){if(!i)if(3==(3&n[2])){const a=t.preOrderCheckHooks;null!==a&&xd(n,a,e)}else{const a=t.preOrderHooks;null!==a&&kd(n,a,0,e)}jo(e)}function $d(t,n){return t<<17|n<<2}function xa(t){return t>>17&32767}function bg(t){return 2|t}function So(t){return(131068&t)>>2}function _g(t,n){return-131069&t|n<<2}function yg(t){return 1|t}function __(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],a=e[i+1];if(-1!==a){const o=t.data[a];Vp(r),o.contentQueries(2,n[a],a)}}}function Lc(t,n,e,i,r,a,o,s,l,c){const u=n.blueprint.slice();return u[0]=r,u[2]=140|i,Ob(u),u[3]=u[15]=t,u[8]=e,u[10]=o||t&&t[10],u[11]=s||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==n.type?t[16]:u,u}function hl(t,n,e,i,r){let a=t.data[n];if(null===a)a=Mg(t,n,e,i,r),function Lx(){return Vt.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=i,a.attrs=r;const o=yc();a.injectorIndex=null===o?-1:o.injectorIndex}return Wa(a,!0),a}function Mg(t,n,e,i,r){const a=Fb(),o=Ap(),l=t.data[n]=function mA(t,n,e,i,r,a){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=l),null!==a&&(o?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}function fl(t,n,e,i){if(0===e)return-1;const r=n.length;for(let a=0;a<e;a++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function Uc(t,n,e){Td(n);try{const i=t.viewQuery;null!==i&&Bg(1,i,e);const r=t.template;null!==r&&y_(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&__(t,n),t.staticViewQueries&&Bg(2,t.viewQuery,e);const a=t.components;null!==a&&function pA(t,n){for(let e=0;e<n.length;e++)OA(t,n[e])}(n,a)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[2]&=-5,Dd()}}function pl(t,n,e,i){const r=n[2];if(256==(256&r))return;Td(n);const a=Cd();try{Ob(n),function Bb(t){return Vt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&y_(t,n,e,2,i);const o=3==(3&r);if(!a)if(o){const c=t.preOrderCheckHooks;null!==c&&xd(n,c,null)}else{const c=t.preOrderHooks;null!==c&&kd(n,c,0,null),Op(n,0)}if(function IA(t){for(let n=lg(t);null!==n;n=cg(n)){if(!n[2])continue;const e=n[9];for(let i=0;i<e.length;i++){const r=e[i],a=r[3];0==(1024&r[2])&&Mp(a,1),r[2]|=1024}}}(n),function EA(t){for(let n=lg(t);null!==n;n=cg(n))for(let e=10;e<n.length;e++){const i=n[e],r=i[1];kp(i)&&pl(r,i,r.template,i[8])}}(n),null!==t.contentQueries&&__(t,n),!a)if(o){const c=t.contentCheckHooks;null!==c&&xd(n,c)}else{const c=t.contentHooks;null!==c&&kd(n,c,1),Op(n,1)}!function hA(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)jo(~r);else{const a=r,o=e[++i],s=e[++i];Ux(o,a),s(2,n[a])}}}finally{jo(-1)}}(t,n);const s=t.components;null!==s&&function fA(t,n){for(let e=0;e<n.length;e++)VA(t,n[e])}(n,s);const l=t.viewQuery;if(null!==l&&Bg(2,l,i),!a)if(o){const c=t.viewCheckHooks;null!==c&&xd(n,c)}else{const c=t.viewHooks;null!==c&&kd(n,c,2),Op(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Mp(n[3],-1))}finally{Dd()}}function gA(t,n,e,i){const r=n[10],a=!Cd(),o=Vb(n);try{a&&!o&&r.begin&&r.begin(),o&&Uc(t,n,i),pl(t,n,e,i)}finally{a&&!o&&r.end&&r.end()}}function y_(t,n,e,i,r){const a=mr(),o=2&i;try{jo(-1),o&&n.length>20&&l_(t,n,20,Cd()),e(i,r)}finally{jo(a)}}function Ag(t,n,e){!Nb()||(function TA(t,n,e,i){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||Sc(e,n),sr(i,n);const o=e.initialInputs;for(let s=r;s<a;s++){const l=t.data[s],c=Da(l);c&&MA(n,e,l);const u=Tc(n,t,s,e);sr(u,n),null!==o&&AA(0,s-r,u,l,0,o),c&&(Hr(e.index,n)[8]=u)}}(t,n,e,la(e,n)),128==(128&e.flags)&&function DA(t,n,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,s=function Hx(){return Vt.lFrame.currentDirectiveIndex}();try{jo(o);for(let l=i;l<r;l++){const c=t.data[l],u=n[l];Ep(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&M_(c,u)}}finally{jo(-1),Ep(s)}}(t,n,e))}function Pg(t,n,e=la){const i=n.localNames;if(null!==i){let r=n.index+1;for(let a=0;a<i.length;a+=2){const o=i[a+1],s=-1===o?e(n,t):t[o];t[r++]=s}}}function C_(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Xd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Xd(t,n,e,i,r,a,o,s,l,c){const u=20+i,d=u+r,v=function vA(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:Bt);return e}(u,d),m="function"==typeof c?c():c;return v[1]={type:t,blueprint:v,template:e,queries:null,viewQuery:s,declTNode:n,data:v.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1}}function D_(t,n,e,i){const r=O_(n);null===e?r.push(i):(r.push(e),t.firstCreatePass&&N_(t).push(i,r.length-1))}function R_(t,n,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(n,r):e[i]=[n,r]}return e}function $r(t,n,e,i,r,a,o,s){const l=la(n,e);let u,c=n.inputs;!s&&null!=c&&(u=c[i])?(L_(t,e,u,i,r),_d(n)&&function yA(t,n){const e=Hr(n,t);16&e[2]||(e[2]|=64)}(e,n.index)):3&n.type&&(i=function _A(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,n.value||"",i):r,wn(a)?a.setProperty(l,i,r):Fp(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Eg(t,n,e,i){let r=!1;if(Nb()){const a=function RA(t,n,e){const i=t.directiveRegistry;let r=null;if(i)for(let a=0;a<i.length;a++){const o=i[a];o_(e,o.selectors,!1)&&(r||(r=[]),Id(Sc(e,n),t,o.type),Da(o)?(A_(t,e),r.unshift(o)):r.push(o))}return r}(t,n,e),o=null===i?null:{"":-1};if(null!==a){r=!0,P_(e,t.data.length,a.length);for(let u=0;u<a.length;u++){const d=a[u];d.providersResolver&&d.providersResolver(d)}let s=!1,l=!1,c=fl(t,n,a.length,null);for(let u=0;u<a.length;u++){const d=a[u];e.mergedAttrs=Ad(e.mergedAttrs,d.hostAttrs),E_(t,e,n,c,d),kA(c,d,o),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const v=d.type.prototype;!s&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),s=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function bA(t,n){const i=n.directiveEnd,r=t.data,a=n.attrs,o=[];let s=null,l=null;for(let c=n.directiveStart;c<i;c++){const u=r[c],d=u.inputs,v=null===a||a_(n)?null:PA(d,a);o.push(v),s=R_(d,c,s),l=R_(u.outputs,c,l)}null!==s&&(s.hasOwnProperty("class")&&(n.flags|=16),s.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=o,n.inputs=s,n.outputs=l}(t,e)}o&&function xA(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const a=e[n[r+1]];if(null==a)throw new _i(-301,!1);i.push(n[r],a)}}}(e,i,o)}return e.mergedAttrs=Ad(e.mergedAttrs,e.attrs),r}function k_(t,n,e,i,r,a){const o=a.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const l=~n.index;(function SA(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=l&&s.push(l),s.push(i,r,o)}}function M_(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function A_(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function kA(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;Da(n)&&(e[""]=t)}}function P_(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function E_(t,n,e,i,r){t.data[i]=r;const a=r.factory||(r.factory=ps(r.type)),o=new wc(a,Da(r),null);t.blueprint[i]=o,e[i]=o,k_(t,n,0,i,fl(t,e,r.hostVars,Bt),r)}function MA(t,n,e){const i=la(n,t),r=C_(e),a=t[10],o=Yd(t,Lc(t,r,null,e.onPush?64:16,i,n,a,a.createRenderer(i,e),null,null));t[n.index]=o}function Ig(t,n,e,i,r,a,o){if(null==a)wn(t)?t.removeAttribute(n,r,e):n.removeAttribute(r);else{const s=null==o?Ft(a):o(a,i||"",r);wn(t)?t.setAttribute(n,r,s,e):e?n.setAttributeNS(e,r,s):n.setAttribute(r,s)}}function AA(t,n,e,i,r,a){const o=a[n];if(null!==o){const s=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==s?i.setInput(e,d,c,u):e[u]=d}}}function PA(t,n){let e=null,i=0;for(;i<n.length;){const r=n[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],n[i+1])),i+=2}else i+=2;else i+=4}return e}function I_(t,n,e,i){return new Array(t,!0,!1,n,null,0,i,e,null,null)}function VA(t,n){const e=Hr(n,t);if(kp(e)){const i=e[1];80&e[2]?pl(i,e,i.template,e[8]):e[5]>0&&Vg(e)}}function Vg(t){for(let i=lg(t);null!==i;i=cg(i))for(let r=10;r<i.length;r++){const a=i[r];if(1024&a[2]){const o=a[1];pl(o,a,o.template,a[8])}else a[5]>0&&Vg(a)}const e=t[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=Hr(e[i],t);kp(r)&&r[5]>0&&Vg(r)}}function OA(t,n){const e=Hr(n,t),i=e[1];(function NA(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),Uc(i,e,e[8])}function Yd(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Og(t){for(;t;){t[2]|=64;const n=Fc(t);if(mx(t)&&!n)return t;t=n}return null}function Fg(t,n,e){const i=n[10];i.begin&&i.begin();try{pl(t,n,t.template,e)}catch(r){throw B_(n,r),r}finally{i.end&&i.end()}}function V_(t){!function Ng(t){for(let n=0;n<t.components.length;n++){const e=t.components[n],i=ng(e),r=i[1];gA(r,i,r.template,e)}}(t[8])}function Bg(t,n,e){Vp(0),n(t,e)}const UA=(()=>Promise.resolve(null))();function O_(t){return t[7]||(t[7]=[])}function N_(t){return t.cleanup||(t.cleanup=[])}function B_(t,n){const e=t[9],i=e?e.get(cl,null):null;i&&i.handleError(n)}function L_(t,n,e,i,r){for(let a=0;a<e.length;){const o=e[a++],s=e[a++],l=n[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,i,s):l[s]=r}}function To(t,n,e){const i=wd(n,t);G1(t[11],i,e)}function Qd(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?a=s:1==a?r=dp(r,s):2==a&&(i=dp(i,s+": "+n[++o]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}const Lg=new ti("INJECTOR",-1);class U_{get(n,e=kc){if(e===kc){const i=new Error(`NullInjectorError: No provider for ${Ni(n)}!`);throw i.name="NullInjectorError",i}return e}}const Ug=new ti("Set Injector scope."),Hc={},zA={};let Hg;function H_(){return void 0===Hg&&(Hg=new U_),Hg}function G_(t,n=null,e=null,i){const r=z_(t,n,e,i);return r._resolveInjectorDefTypes(),r}function z_(t,n=null,e=null,i){return new jA(t,e,n||H_(),i)}class jA{constructor(n,e,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&qa(e,s=>this.processProvider(s,n,e)),qa([n],s=>this.processInjectorType(s,[],a)),this.records.set(Lg,gl(void 0,this));const o=this.records.get(Ug);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof n?null:Ni(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,e=kc,i=Gt.Default){this.assertNotDestroyed();const r=d1(this),a=Uo(void 0);try{if(!(i&Gt.SkipSelf)){let s=this.records.get(n);if(void 0===s){const l=function ZA(t){return"function"==typeof t||"object"==typeof t&&t instanceof ti}(n)&&fp(n);s=l&&this.injectableDefInScope(l)?gl(Gg(n),Hc):null,this.records.set(n,s)}if(null!=s)return this.hydrate(n,s)}return(i&Gt.Self?H_():this.parent).get(n,e=i&Gt.Optional&&e===kc?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Fd]=o[Fd]||[]).unshift(Ni(n)),r)throw o;return function Dk(t,n,e,i){const r=t[Fd];throw n[u1]&&r.unshift(n[u1]),t.message=function Rk(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=Ni(n);if(Array.isArray(n))r=n.map(Ni).join(" -> ");else if("object"==typeof n){let a=[];for(let o in n)if(n.hasOwnProperty(o)){let s=n[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):Ni(s)))}r=`{${a.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(yk,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[Fd]=null,t}(o,n,"R3InjectorError",this.source)}throw o}finally{Uo(a),d1(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((i,r)=>n.push(Ni(r))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _i(205,!1)}processInjectorType(n,e,i){if(!(n=Xt(n)))return!1;let r=wb(n);const a=null==r&&n.ngModule||void 0,o=void 0===a?n:a,s=-1!==i.indexOf(o);if(void 0!==a&&(r=wb(a)),null==r)return!1;if(null!=r.imports&&!s){let u;i.push(o);try{qa(r.imports,d=>{this.processInjectorType(d,e,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:v,providers:m}=u[d];qa(m,_=>this.processProvider(_,v,m||$i))}}this.injectorDefTypes.add(o);const l=ps(o)||(()=>new o);this.records.set(o,gl(l,Hc));const c=r.providers;if(null!=c&&!s){const u=n;qa(c,d=>this.processProvider(d,u,c))}return void 0!==a&&void 0!==n.providers}processProvider(n,e,i){let r=vl(n=Xt(n))?n:Xt(n&&n.provide);const a=function WA(t,n,e){return $_(t)?gl(void 0,t.useValue):gl(j_(t),Hc)}(n);if(vl(n)||!0!==n.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=gl(void 0,Hc,!0),o.factory=()=>qp(o.multi),this.records.set(r,o)),r=n,o.multi.push(n)}this.records.set(r,a)}hydrate(n,e){return e.value===Hc&&(e.value=zA,e.value=e.factory()),"object"==typeof e.value&&e.value&&function KA(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Xt(n.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Gg(t){const n=fp(t),e=null!==n?n.factory:ps(t);if(null!==e)return e;if(t instanceof ti)throw new _i(204,!1);if(t instanceof Function)return function $A(t){const n=t.length;if(n>0)throw xc(n,"?"),new _i(204,!1);const e=function rx(t){const n=t&&(t[pd]||t[Cb]);if(n){const e=function ax(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),n}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new _i(204,!1)}function j_(t,n,e){let i;if(vl(t)){const r=Xt(t);return ps(r)||Gg(r)}if($_(t))i=()=>Xt(t.useValue);else if(function XA(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...qp(t.deps||[]));else if(function qA(t){return!(!t||!t.useExisting)}(t))i=()=>Ue(Xt(t.useExisting));else{const r=Xt(t&&(t.useClass||t.provide));if(!function QA(t){return!!t.deps}(t))return ps(r)||Gg(r);i=()=>new r(...qp(t.deps))}return i}function gl(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function $_(t){return null!==t&&"object"==typeof t&&Ck in t}function vl(t){return"function"==typeof t}let kn=(()=>{class t{static create(e,i){var r;if(Array.isArray(e))return G_({name:""},i,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return G_({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=kc,t.NULL=new U_,t.\u0275prov=ct({token:t,providedIn:"any",factory:()=>Ue(Lg)}),t.__NG_ELEMENT_ID__=-1,t})();function oP(t,n){Rd(ng(t)[1],zn())}function Pi(t){let n=function ny(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(Da(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new _i(903,"");r=n.\u0275dir}if(r){if(e){i.push(r);const o=t;o.inputs=$g(t.inputs),o.declaredInputs=$g(t.declaredInputs),o.outputs=$g(t.outputs);const s=r.hostBindings;s&&uP(t,s);const l=r.viewQuery,c=r.contentQueries;if(l&&lP(t,l),c&&cP(t,c),up(t.inputs,r.inputs),up(t.declaredInputs,r.declaredInputs),up(t.outputs,r.outputs),Da(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let o=0;o<a.length;o++){const s=a[o];s&&s.ngInherit&&s(t),s===Pi&&(e=!1)}}n=Object.getPrototypeOf(n)}!function sP(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Ad(r.hostAttrs,e=Ad(e,r.hostAttrs))}}(i)}function $g(t){return t===$s?{}:t===$i?[]:t}function lP(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function cP(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,a)=>{n(i,r,a),e(i,r,a)}:n}function uP(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}let Kd=null;function ml(){if(!Kd){const t=Li.Symbol;if(t&&t.iterator)Kd=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<n.length;++e){const i=n[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Kd=i)}}}return Kd}function Gc(t){return!!Wg(t)&&(Array.isArray(t)||!(t instanceof Map)&&ml()in t)}function Wg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ja(t,n,e){return t[n]=e}function zc(t,n){return t[n]}function lr(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function bs(t,n,e,i){const r=lr(t,n,e);return lr(t,n+1,i)||r}function Zd(t,n,e,i,r){const a=bs(t,n,e,i);return lr(t,n+2,r)||a}function ua(t,n,e,i,r,a){const o=bs(t,n,e,i);return bs(t,n+2,r,a)||o}function Bi(t,n,e,i){const r=Me();return lr(r,Ks(),n)&&(yi(),function Za(t,n,e,i,r,a){const o=la(t,n);Ig(n[11],o,a,t.value,e,i,r)}(Cn(),r,t,n,e,i)),Bi}function _l(t,n,e,i){return lr(t,Ks(),e)?n+Ft(e)+i:Bt}function Cl(t,n,e,i,r,a,o,s,l,c){const d=ua(t,yo(),e,r,o,l);return wo(4),d?n+Ft(e)+i+Ft(r)+a+Ft(o)+s+Ft(l)+c:Bt}function x(t,n,e,i,r,a,o,s){const l=Me(),c=yi(),u=t+20,d=c.firstCreatePass?function mP(t,n,e,i,r,a,o,s,l){const c=n.consts,u=hl(n,t,4,o||null,zo(c,s));Eg(n,e,u,zo(c,l)),Rd(n,u);const d=u.tViews=Xd(2,u,i,r,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,e,i,r,a,o):c.data[u];Wa(d,!1);const v=l[11].createComment("");zd(c,l,v,d),sr(v,l),Yd(l,l[u]=I_(v,l,v,d)),yd(d)&&Ag(c,l,d),null!=o&&Pg(l,d,s)}function at(t){return Qs(function Bx(){return Vt.lFrame.contextLView}(),20+t)}function E(t,n=Gt.Default){const e=Me();return null===e?Ue(t,n):e1(zn(),e,Xt(t),n)}function Kg(){throw new Error("invalid")}function b(t,n,e){const i=Me();return lr(i,Ks(),n)&&$r(yi(),Cn(),i,t,n,i[11],e,!1),b}function Zg(t,n,e,i,r){const o=r?"class":"style";L_(t,e,n.inputs[o],o,i)}function f(t,n,e,i){const r=Me(),a=yi(),o=20+t,s=r[11],l=r[o]=dg(s,n,function Yx(){return Vt.lFrame.currentNamespace}()),c=a.firstCreatePass?function BP(t,n,e,i,r,a,o){const s=n.consts,c=hl(n,t,2,r,zo(s,a));return Eg(n,e,c,zo(s,o)),null!==c.attrs&&Qd(c,c.attrs,!1),null!==c.mergedAttrs&&Qd(c,c.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,c),c}(o,a,r,0,n,e,i):a.data[o];Wa(c,!0);const u=c.mergedAttrs;null!==u&&Md(s,l,u);const d=c.classes;null!==d&&mg(s,l,d);const v=c.styles;return null!==v&&i_(s,l,v),64!=(64&c.flags)&&zd(a,r,l,c),0===function Ix(){return Vt.lFrame.elementDepthCount}()&&sr(l,r),function Vx(){Vt.lFrame.elementDepthCount++}(),yd(c)&&(Ag(a,r,c),function w_(t,n,e){if(yp(n)){const r=n.directiveEnd;for(let a=n.directiveStart;a<r;a++){const o=t.data[a];o.contentQueries&&o.contentQueries(1,e[a],a)}}}(a,c,r)),null!==i&&Pg(r,c),f}function h(){let t=zn();Ap()?Pp():(t=t.parent,Wa(t,!1));const n=t;!function Ox(){Vt.lFrame.elementDepthCount--}();const e=yi();return e.firstCreatePass&&(Rd(e,t),yp(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function ek(t){return 0!=(16&t.flags)}(n)&&Zg(e,n,Me(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function tk(t){return 0!=(32&t.flags)}(n)&&Zg(e,n,Me(),n.stylesWithoutHost,!1),h}function D(t,n,e,i){return f(t,n,e,i),h(),D}function de(){return Me()}function jc(t){return!!t&&"function"==typeof t.then}const tv=function Ty(t){return!!t&&"function"==typeof t.subscribe};function A(t,n,e,i){const r=Me(),a=yi(),o=zn();return function Ry(t,n,e,i,r,a,o,s){const l=yd(i),u=t.firstCreatePass&&N_(t),d=n[8],v=O_(n);let m=!0;if(3&i.type||s){const S=la(i,n),k=s?s(S):S,T=v.length,R=s?L=>s(In(L[i.index])):i.index;if(wn(e)){let L=null;if(!s&&l&&(L=function UP(t,n,e,i){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const o=r[a];if(o===e&&r[a+1]===i){const s=n[7],l=r[a+2];return s.length>l?s[l]:null}"string"==typeof o&&(a+=2)}return null}(t,n,r,i.index)),null!==L)(L.__ngLastListenerFn__||L).__ngNextListenerFn__=a,L.__ngLastListenerFn__=a,m=!1;else{a=iv(i,n,d,a,!1);const W=e.listen(k,r,a);v.push(a,W),u&&u.push(r,R,T,T+1)}}else a=iv(i,n,d,a,!0),k.addEventListener(r,a,o),v.push(a),u&&u.push(r,R,T,o)}else a=iv(i,n,d,a,!1);const _=i.outputs;let w;if(m&&null!==_&&(w=_[r])){const S=w.length;if(S)for(let k=0;k<S;k+=2){const ae=n[w[k]][w[k+1]].subscribe(a),ee=v.length;v.push(a,ae),u&&u.push(r,i.index,ee,-(ee+1))}}}(a,r,r[11],o,t,n,!!e,i),A}function xy(t,n,e,i){try{return!1!==e(i)}catch(r){return B_(t,r),!1}}function iv(t,n,e,i,r){return function a(o){if(o===Function)return i;const s=2&t.flags?Hr(t.index,n):n;0==(32&n[2])&&Og(s);let l=xy(n,0,i,o),c=a.__ngNextListenerFn__;for(;c;)l=xy(n,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function y(t=1){return function zx(t){return(Vt.lFrame.contextLView=function jx(t,n){for(;t>0;)n=n[15],t--;return n}(t,Vt.lFrame.contextLView))[8]}(t)}function HP(t,n){let e=null;const i=function YM(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(0==(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const a=n[r];if("*"!==a){if(null===i?o_(t,a,!0):ZM(i,a))return r}else e=r}return e}function eh(t){const n=Me()[16][6];if(!n.projection){const i=n.projection=xc(t?t.length:1,null),r=i.slice();let a=n.child;for(;null!==a;){const o=t?HP(a,t):0;null!==o&&(r[o]?r[o].projectionNext=a:i[o]=a,r[o]=a),a=a.next}}}function th(t,n=0,e){const i=Me(),r=yi(),a=hl(r,20+t,16,null,e||null);null===a.projection&&(a.projection=n),Pp(),64!=(64&a.flags)&&function GM(t,n,e){t_(n[11],0,n,e,$1(t,e,n),Y1(e.parent||n[6],e,n))}(r,i,a)}function cr(t,n,e){return ih(t,"",n,"",e),cr}function ih(t,n,e,i,r){const a=Me(),o=_l(a,n,e,i);return o!==Bt&&$r(yi(),Cn(),a,t,o,a[11],r,!1),ih}function Ny(t,n,e,i,r){const a=t[e+1],o=null===n;let s=i?xa(a):So(a),l=!1;for(;0!==s&&(!1===l||o);){const u=t[s+1];jP(t[s],n)&&(l=!0,t[s+1]=i?yg(u):bg(u)),s=i?xa(u):So(u)}l&&(t[e+1]=i?bg(a):yg(a))}function jP(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&al(t,n)>=0}const $n={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Fy(t){return t.substring($n.key,$n.keyEnd)}function By(t,n){const e=$n.textEnd;return e===n?-1:(n=$n.keyEnd=function XP(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,$n.key=n,e),kl(t,n,e))}function kl(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function $c(t,n,e){return Ma(t,n,e,!1),$c}function Mt(t,n){return Ma(t,n,null,!0),Mt}function Xo(t){Aa(Gr,to,t,!0)}function to(t,n){for(let e=function WP(t){return function Uy(t){$n.key=0,$n.keyEnd=0,$n.value=0,$n.valueEnd=0,$n.textEnd=t.length}(t),By(t,kl(t,0,$n.textEnd))}(n);e>=0;e=By(n,e))Gr(t,Fy(n),!0)}function Ma(t,n,e,i){const r=Me(),a=yi(),o=wo(2);a.firstUpdatePass&&jy(a,t,o,i),n!==Bt&&lr(r,o,n)&&Wy(a,a.data[mr()],r,r[11],t,r[o+1]=function rE(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Ni(zr(t)))),t}(n,e),i,o)}function Aa(t,n,e,i){const r=yi(),a=wo(2);r.firstUpdatePass&&jy(r,null,a,i);const o=Me();if(e!==Bt&&lr(o,a,e)){const s=r.data[mr()];if(Xy(s,i)&&!zy(r,a)){let l=i?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(e=dp(l,e||"")),Zg(r,s,o,e,i)}else!function nE(t,n,e,i,r,a,o,s){r===Bt&&(r=$i);let l=0,c=0,u=0<r.length?r[0]:null,d=0<a.length?a[0]:null;for(;null!==u||null!==d;){const v=l<r.length?r[l+1]:void 0,m=c<a.length?a[c+1]:void 0;let w,_=null;u===d?(l+=2,c+=2,v!==m&&(_=d,w=m)):null===d||null!==u&&u<d?(l+=2,_=u):(c+=2,_=d,w=m),null!==_&&Wy(t,n,e,i,_,w,o,s),u=l<r.length?r[l]:null,d=c<a.length?a[c]:null}}(r,s,o,o[11],o[a+1],o[a+1]=function iE(t,n,e){if(null==e||""===e)return $i;const i=[],r=zr(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(i,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(i,a,r[a]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,a)}}function zy(t,n){return n>=t.expandoStartIndex}function jy(t,n,e,i){const r=t.data;if(null===r[e+1]){const a=r[mr()],o=zy(t,e);Xy(a,i)&&null===n&&!o&&(n=!1),n=function ZP(t,n,e,i){const r=function Ip(t){const n=Vt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let a=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=Wc(e=nv(null,t,n,e,i),n.attrs,i),a=null);else{const o=n.directiveStylingLast;if(-1===o||t[o]!==r)if(e=nv(r,t,n,e,i),null===a){let l=function JP(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==So(i))return t[xa(i)]}(t,n,i);void 0!==l&&Array.isArray(l)&&(l=nv(null,t,n,l[1],i),l=Wc(l,n.attrs,i),function eE(t,n,e,i){t[xa(e?n.classBindings:n.styleBindings)]=i}(t,n,i,l))}else a=function tE(t,n,e){let i;const r=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<r;a++)i=Wc(i,t[a].hostAttrs,e);return Wc(i,n.attrs,e)}(t,n,i)}return void 0!==a&&(i?n.residualClasses=a:n.residualStyles=a),e}(r,a,n,i),function GP(t,n,e,i,r,a){let o=a?n.classBindings:n.styleBindings,s=xa(o),l=So(o);t[i]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||al(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const v=xa(t[s+1]);t[i+1]=$d(v,s),0!==v&&(t[v+1]=_g(t[v+1],i)),t[s+1]=function iA(t,n){return 131071&t|n<<17}(t[s+1],i)}else t[i+1]=$d(s,0),0!==s&&(t[s+1]=_g(t[s+1],i)),s=i;else t[i+1]=$d(l,0),0===s?s=i:t[l+1]=_g(t[l+1],i),l=i;c&&(t[i+1]=bg(t[i+1])),Ny(t,u,i,!0),Ny(t,u,i,!1),function zP(t,n,e,i,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof n&&al(a,n)>=0&&(e[i+1]=yg(e[i+1]))}(n,u,t,i,a),o=$d(s,l),a?n.classBindings=o:n.styleBindings=o}(r,a,n,e,o,i)}}function nv(t,n,e,i,r){let a=null;const o=e.directiveEnd;let s=e.directiveStylingLast;for(-1===s?s=e.directiveStart:s++;s<o&&(a=n[s],i=Wc(i,a.hostAttrs,r),a!==t);)s++;return null!==t&&(e.directiveStylingLast=s),i}function Wc(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let a=0;a<n.length;a++){const o=n[a];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Gr(t,o,!!e||n[++a]))}return void 0===t?null:t}function Wy(t,n,e,i,r,a,o,s){if(!(3&n.type))return;const l=t.data,c=l[s+1];nh(function d_(t){return 1==(1&t)}(c)?qy(l,n,e,r,So(c),o):void 0)||(nh(a)||function u_(t){return 2==(2&t)}(c)&&(a=qy(l,null,e,r,s,o)),function jM(t,n,e,i,r){const a=wn(t);if(n)r?a?t.addClass(e,i):e.classList.add(i):a?t.removeClass(e,i):e.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:jr.DashCase;if(null==r)a?t.removeStyle(e,i,o):e.style.removeProperty(i);else{const s="string"==typeof r&&r.endsWith("!important");s&&(r=r.slice(0,-10),o|=jr.Important),a?t.setStyle(e,i,r,o):e.style.setProperty(i,r,s?"important":"")}}}(i,o,wd(mr(),e),r,a))}function qy(t,n,e,i,r,a){const o=null===n;let s;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let v=e[r+1];v===Bt&&(v=d?$i:void 0);let m=d?jp(v,i):u===i?v:void 0;if(c&&!nh(m)&&(m=jp(l,i)),nh(m)&&(s=m,o))return s;const _=t[r+1];r=o?xa(_):So(_)}if(null!==n){let l=a?n.residualClasses:n.residualStyles;null!=l&&(s=jp(l,i))}return s}function nh(t){return void 0!==t}function Xy(t,n){return 0!=(t.flags&(n?16:32))}function g(t,n=""){const e=Me(),i=yi(),r=t+20,a=i.firstCreatePass?hl(i,r,1,n,null):i.data[r],o=e[r]=ug(e[11],n);zd(i,e,o,a),Wa(a,!1)}function et(t){return K("",t,""),et}function K(t,n,e){const i=Me(),r=_l(i,t,n,e);return r!==Bt&&To(i,mr(),r),K}function Wi(t,n,e,i,r){const a=Me(),o=function yl(t,n,e,i,r,a){const s=bs(t,yo(),e,r);return wo(2),s?n+Ft(e)+i+Ft(r)+a:Bt}(a,t,n,e,i,r);return o!==Bt&&To(a,mr(),o),Wi}function rh(t,n,e,i,r,a,o){const s=Me(),l=function wl(t,n,e,i,r,a,o,s){const c=Zd(t,yo(),e,r,o);return wo(3),c?n+Ft(e)+i+Ft(r)+a+Ft(o)+s:Bt}(s,t,n,e,i,r,a,o);return l!==Bt&&To(s,mr(),l),rh}function rv(t,n,e,i,r,a,o,s,l){const c=Me(),u=Cl(c,t,n,e,i,r,a,o,s,l);return u!==Bt&&To(c,mr(),u),rv}function av(t,n,e){Aa(Gr,to,_l(Me(),t,n,e),!0)}function Yo(t,n,e){const i=Me();return lr(i,Ks(),n)&&$r(yi(),Cn(),i,t,n,i[11],e,!0),Yo}const _s=void 0;var CE=["en",[["a","p"],["AM","PM"],_s],[["AM","PM"],_s,_s],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_s,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_s,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_s,"{1} 'at' {0}",_s],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wE(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let Ml={};function _r(t){const n=function SE(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=hw(n);if(e)return e;const i=n.split("-")[0];if(e=hw(i),e)return e;if("en"===i)return CE;throw new Error(`Missing locale data for the locale "${t}".`)}function dw(t){return _r(t)[Ke.PluralCase]}function hw(t){return t in Ml||(Ml[t]=Li.ng&&Li.ng.common&&Li.ng.common.locales&&Li.ng.common.locales[t]),Ml[t]}var Ke=(()=>((Ke=Ke||{})[Ke.LocaleId=0]="LocaleId",Ke[Ke.DayPeriodsFormat=1]="DayPeriodsFormat",Ke[Ke.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ke[Ke.DaysFormat=3]="DaysFormat",Ke[Ke.DaysStandalone=4]="DaysStandalone",Ke[Ke.MonthsFormat=5]="MonthsFormat",Ke[Ke.MonthsStandalone=6]="MonthsStandalone",Ke[Ke.Eras=7]="Eras",Ke[Ke.FirstDayOfWeek=8]="FirstDayOfWeek",Ke[Ke.WeekendRange=9]="WeekendRange",Ke[Ke.DateFormat=10]="DateFormat",Ke[Ke.TimeFormat=11]="TimeFormat",Ke[Ke.DateTimeFormat=12]="DateTimeFormat",Ke[Ke.NumberSymbols=13]="NumberSymbols",Ke[Ke.NumberFormats=14]="NumberFormats",Ke[Ke.CurrencyCode=15]="CurrencyCode",Ke[Ke.CurrencySymbol=16]="CurrencySymbol",Ke[Ke.CurrencyName=17]="CurrencyName",Ke[Ke.Currencies=18]="Currencies",Ke[Ke.Directionality=19]="Directionality",Ke[Ke.PluralCase=20]="PluralCase",Ke[Ke.ExtraData=21]="ExtraData",Ke))();const TE=["zero","one","two","few","many"],ah="en-US",oh={marker:"element"},sh={marker:"ICU"};var Sn=(()=>((Sn=Sn||{})[Sn.SHIFT=2]="SHIFT",Sn[Sn.APPEND_EAGERLY=1]="APPEND_EAGERLY",Sn[Sn.COMMENT=2]="COMMENT",Sn))();let fw=ah;function pw(t,n,e){const i=n.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return null===r?Q1(t,0,e):In(e[r])}function gw(t,n,e,i,r){const a=n.insertBeforeIndex;if(Array.isArray(a)){let o=i,s=null;if(3&n.type||(s=o,o=r),null!==o&&0==(2&n.flags))for(let l=1;l<a.length;l++)ms(t,o,e[a[l]],s,!1)}}function vw(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];mw(i)||ME(i,n)&&null===AE(i)&&PE(i,n.index)}}function mw(t){return!(64&t.type)}function ME(t,n){return mw(n)||t.index>n.index}function AE(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function PE(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:(Z1(pw,gw),t.insertBeforeIndex=n)}function qc(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function VE(t,n,e){const i=Mg(t,e,64,null,null);return vw(n,i),i}function lh(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function bw(t){return t>>>17}function _w(t){return(131070&t)>>>1}let Xc=0,Yc=0;function ww(t,n,e,i){const r=e[11];let o,a=null;for(let s=0;s<n.length;s++){const l=n[s];if("string"==typeof l){const c=n[++s];null===e[c]&&(e[c]=ug(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=bw(l);let u,d;if(null===a&&(a=c,o=Gd(r,i)),c===a?(u=i,d=o):(u=null,d=In(e[c])),null!==d){const w=_w(l);ms(r,d,e[w],u,!1);const k=qc(t,w);if(null!==k&&"object"==typeof k){const T=lh(k,e);null!==T&&ww(t,k.create[T],e,e[k.anchorIdx])}}break;case 1:const m=n[++s],_=n[++s];Ig(r,wd(l>>>1,e),null,null,m,_,null)}else switch(l){case sh:const c=n[++s],u=n[++s];null===e[u]&&sr(e[u]=PM(r,c),e);break;case oh:const d=n[++s],v=n[++s];null===e[v]&&sr(e[v]=dg(r,d,null),e)}}}function Cw(t,n,e,i,r){for(let a=0;a<e.length;a++){const o=e[a],s=e[++a];if(o&r){let l="";for(let c=a+1;c<=a+s;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=Ft(n[i-u]);else{const d=u>>>2;switch(3&u){case 1:const v=e[++c],m=e[++c],_=t.data[d];"string"==typeof _?Ig(n[11],n[d],null,_,v,l,m):$r(t,_,n,v,l,n[11],m,!1);break;case 0:const w=n[d];null!==w&&G1(n[11],w,l);break;case 2:LE(t,qc(t,d),n,l);break;case 3:Sw(t,qc(t,d),i,n)}}}}else{const l=e[a+1];if(l>0&&3==(3&l)){const u=qc(t,l>>>2);n[u.currentCaseLViewIndex]<0&&Sw(t,u,i,n)}}a+=s}}function Sw(t,n,e,i){let r=i[n.currentCaseLViewIndex];if(null!==r){let a=Xc;r<0&&(r=i[n.currentCaseLViewIndex]=~r,a=-1),Cw(t,i,n.update[r],e,a)}}function LE(t,n,e,i){const r=function UE(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function DE(t,n){const e=dw(n)(parseInt(t,10)),i=TE[e];return void 0!==i?i:"other"}(n,function kE(){return fw}());e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(lh(n,e)!==r&&(Tw(t,n,e),e[n.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const o=e[n.anchorIdx];o&&ww(t,n.create[r],e,o)}}function Tw(t,n,e){let i=lh(n,e);if(null!==i){const r=n.remove[i];for(let a=0;a<r.length;a++){const o=r[a];if(o>0){const s=wd(o,e);null!==s&&e_(e[11],s)}else Tw(t,qc(t,~o),e)}}}function HE(){const t=[];let e,i,n=-1;function a(s,l){n=0;const c=lh(s,l);i=null!==c?s.remove[c]:$i}function o(){if(n<i.length){const s=i[n++];return s>0?e[s]:(t.push(n,i),a(e[1].data[~s],e),o())}return 0===t.length?null:(i=t.pop(),n=t.pop(),o())}return function r(s,l){for(e=l;t.length;)t.pop();return a(s.value,l),o}}const ch=/\ufffd(\d+):?\d*\ufffd/gi,zE=/\ufffd(\d+)\ufffd/,Rw=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,jE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,$E=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,WE=/\uE500/g;function xw(t,n,e,i,r,a,o){const s=fl(t,i,1,null);let l=s<<Sn.SHIFT,c=yc();n===c&&(c=null),null===c&&(l|=Sn.APPEND_EAGERLY),o&&(l|=Sn.COMMENT,function AM(t){void 0===og&&(og=t())}(HE)),r.push(l,null===a?"":a);const u=Mg(t,s,o?32:1,null===a?"":a,null);vw(e,u);const d=u.index;return Wa(u,!1),null!==c&&n!==c&&function IE(t,n){let e=t.insertBeforeIndex;null===e?(Z1(pw,gw),e=t.insertBeforeIndex=[null,n]):(function bo(t,n,e){t!=n&&nn(e,t,n,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(c,d),u}function YE(t,n,e,i,r,a,o){const s=o.match(ch),l=xw(t,n,e,a,i,s?null:o,!1);s&&Al(r,o,l.index,null,0,null)}function Al(t,n,e,i,r,a){const o=t.length,s=o+1;t.push(null,null);const l=o+2,c=n.split(ch);let u=0;for(let d=0;d<c.length;d++){const v=c[d];if(1&d){const m=r+parseInt(v,10);t.push(-1-m),u|=kw(m)}else""!==v&&t.push(v)}return t.push(e<<2|(i?1:0)),i&&t.push(i,a),t[o]=u,t[s]=t.length-l,u}function kw(t){return 1<<Math.min(t,31)}function Mw(t){let n,a,e="",i=0,r=!1;for(;null!==(n=jE.exec(t));)r?n[0]===`\ufffd/*${a}\ufffd`&&(i=n.index,r=!1):(e+=t.substring(i,n.index+n[0].length),a=n[1],r=!0);return e+=t.substr(i),e}function Aw(t,n,e,i,r,a){let o=0;const s={type:r.type,currentCaseLViewIndex:fl(t,n,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function nI(t,n,e){t.push(kw(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(e,r,a),function EE(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(t,a,s);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],d=[];for(let v=0;v<u.length;v++){const m=u[v];if("string"!=typeof m){const _=d.push(m)-1;u[v]=`\x3c!--\ufffd${_}\ufffd--\x3e`}}o=tI(t,s,n,e,i,r.cases[c],u.join(""),d)|o}o&&function rI(t,n,e){t.push(n,1,e<<2|3)}(e,o,a)}function eI(t){const n=[],e=[];let i=1,r=0;const a=ov(t=t.replace(Rw,function(o,s,l){return i="select"===l?0:1,r=parseInt(s.substr(1),10),""}));for(let o=0;o<a.length;){let s=a[o++].trim();1===i&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&n.push(s);const l=ov(a[o++]);n.length>e.length&&e.push(l)}return{type:i,mainBinding:r,cases:n,values:e}}function ov(t){if(!t)return[];let n=0;const e=[],i=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const s=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const l=t.substring(n,s);Rw.test(l)?i.push(eI(l)):i.push(l),n=s+1}}else{if(0==e.length){const l=t.substring(n,s);i.push(l),n=s+1}e.push("{")}}const o=t.substring(n);return i.push(o),i}function tI(t,n,e,i,r,a,o,s){const l=[],c=[],u=[];n.cases.push(a),n.create.push(l),n.remove.push(c),n.update.push(u);const v=w1(Rp()).getInertBodyElement(o),m=eg(v)||v;return m?Pw(t,n,e,i,l,c,u,m,r,s,0):0}function Pw(t,n,e,i,r,a,o,s,l,c,u){let d=0,v=s.firstChild;for(;v;){const m=fl(t,e,1,null);switch(v.nodeType){case Node.ELEMENT_NODE:const _=v,w=_.tagName.toLowerCase();if(Kp.hasOwnProperty(w)){sv(r,oh,w,l,m),t.data[m]=w;const R=_.attributes;for(let L=0;L<R.length;L++){const W=R.item(L),ae=W.name.toLowerCase();W.value.match(ch)?R1.hasOwnProperty(ae)&&Al(o,W.value,m,W.name,0,Zp[ae]?Ic:Jp[ae]?C1:null):aI(r,m,W)}d=Pw(t,n,e,i,r,a,o,v,m,c,u+1)|d,Ew(a,m,u)}break;case Node.TEXT_NODE:const S=v.textContent||"",k=S.match(ch);sv(r,null,k?"":S,l,m),Ew(a,m,u),k&&(d=Al(o,S,m,null,0,null)|d);break;case Node.COMMENT_NODE:const T=zE.exec(v.textContent||"");if(T){const L=c[parseInt(T[1],10)];sv(r,sh,"",l,m),Aw(t,e,i,l,L,m),iI(a,m,u)}}v=v.nextSibling}return d}function Ew(t,n,e){0===e&&t.push(n)}function iI(t,n,e){0===e&&(t.push(~n),t.push(n))}function sv(t,n,e,i,r){null!==n&&t.push(n),t.push(e,r,function OE(t,n,e){return t|n<<17|e<<1}(0,i,r))}function aI(t,n,e){t.push(n<<1|1,e.name,e.value)}function Vw(t,n,e=-1){const i=yi(),r=Me(),a=20+t,o=zo(i.consts,n),s=yc();i.firstCreatePass&&function XE(t,n,e,i,r,a){const o=yc(),s=[],l=[],c=[[]];r=function JE(t,n){if(function ZE(t){return-1===t}(n))return Mw(t);{const e=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,i=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return Mw(t.substring(e,i))}}(r,a);const u=function qE(t){return t.replace(WE," ")}(r).split($E);for(let d=0;d<u.length;d++){let v=u[d];if(0==(1&d)){const m=ov(v);for(let _=0;_<m.length;_++){let w=m[_];if(0==(1&_)){const S=w;""!==S&&YE(t,o,c[0],s,l,e,S)}else{const S=w;if("object"!=typeof S)throw new Error(`Unable to parse ICU expression in "${r}" message.`);Aw(t,e,l,n,S,xw(t,o,c[0],e,s,"",!0).index)}}}else{const m=47===v.charCodeAt(0),w=(v.charCodeAt(m?1:0),20+Number.parseInt(v.substring(m?2:1)));if(m)c.shift(),Wa(yc(),!1);else{const S=VE(t,c[0],w);c.unshift([]),Wa(S,!0)}}}t.data[i]={create:s,update:l}}(i,null===s?0:s.index,r,a,o,e);const l=i.data[a],u=W1(i,s===r[6]?null:s,r);(function BE(t,n,e,i){const r=t[11];for(let a=0;a<n.length;a++){const o=n[a++],s=n[a],l=(o&Sn.COMMENT)===Sn.COMMENT,c=(o&Sn.APPEND_EAGERLY)===Sn.APPEND_EAGERLY,u=o>>>Sn.SHIFT;let d=t[u];null===d&&(d=t[u]=l?r.createComment(s):ug(r,s)),c&&null!==e&&ms(r,e,d,i,!1)}})(r,l.create,u,s&&8&s.type?r[s.index]:null),Lb(!0)}function Do(t,n,e){Vw(t,n,e),function Ow(){Lb(!1)}()}function uh(t){return function NE(t){t&&(Xc|=1<<Math.min(Yc,31)),Yc++}(lr(Me(),Ks(),t)),uh}function cv(t,n,e,i,r){if(t=Xt(t),Array.isArray(t))for(let a=0;a<t.length;a++)cv(t[a],n,e,i,r);else{const a=yi(),o=Me();let s=vl(t)?t:Xt(t.provide),l=j_(t);const c=zn(),u=1048575&c.providerIndexes,d=c.directiveStart,v=c.providerIndexes>>20;if(vl(t)||!t.multi){const m=new wc(l,r,E),_=dv(s,n,r?u:u+v,d);-1===_?(Id(Sc(c,o),a,s),uv(a,t,n.length),n.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(m),o.push(m)):(e[_]=m,o[_]=m)}else{const m=dv(s,n,u+v,d),_=dv(s,n,u,u+v),w=m>=0&&e[m],S=_>=0&&e[_];if(r&&!S||!r&&!w){Id(Sc(c,o),a,s);const k=function _I(t,n,e,i,r){const a=new wc(t,e,E);return a.multi=[],a.index=n,a.componentProviders=0,Nw(a,r,i&&!e),a}(r?bI:mI,e.length,r,i,l);!r&&S&&(e[_].providerFactory=k),uv(a,t,n.length,0),n.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(k),o.push(k)}else uv(a,t,m>-1?m:_,Nw(e[r?_:m],l,!r&&i));!r&&i&&S&&e[_].componentProviders++}}}function uv(t,n,e,i){const r=vl(n),a=function YA(t){return!!t.useClass}(n);if(r||a){const l=(a?Xt(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function Nw(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function dv(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function mI(t,n,e,i){return hv(this.multi,[])}function bI(t,n,e,i){const r=this.multi;let a;if(this.providerFactory){const o=this.providerFactory.componentProviders,s=Tc(e,e[1],this.providerFactory.index,i);a=s.slice(0,o),hv(r,a);for(let l=o;l<s.length;l++)a.push(s[l])}else a=[],hv(r,a);return a}function hv(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function qi(t,n=[]){return e=>{e.providersResolver=(i,r)=>function vI(t,n,e){const i=yi();if(i.firstCreatePass){const r=Da(t);cv(e,i.data,i.blueprint,r,!0),cv(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class Fw{}class CI{resolveComponentFactory(n){throw function wI(t){const n=Error(`No component factory found for ${Ni(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let ys=(()=>{class t{}return t.NULL=new CI,t})();function SI(){return Pl(zn(),Me())}function Pl(t,n){return new Ei(la(t,n))}let Ei=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=SI,t})();function TI(t){return t instanceof Ei?t.nativeElement:t}class fv{}let da=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function RI(){const t=Me(),e=Hr(zn().index,t);return function DI(t){return t[11]}($a(e)?e:t)}(),t})(),xI=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>null}),t})();class Kc{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const kI=new Kc("13.2.3"),pv={};function dh(t,n,e,i,r=!1){for(;null!==e;){const a=n[e.index];if(null!==a&&i.push(In(a)),Ta(a))for(let s=10;s<a.length;s++){const l=a[s],c=l[1].firstChild;null!==c&&dh(l[1],l,c,i)}const o=e.type;if(8&o)dh(t,n,e.child,i);else if(32&o){const s=sg(e,n);let l;for(;l=s();)i.push(l)}else if(16&o){const s=J1(n,e);if(Array.isArray(s))i.push(...s);else{const l=Fc(n[16]);dh(l[1],l,s,i,!0)}}e=r?e.projectionNext:e.next}return i}class Zc{constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,e=n[1];return dh(e,n,e.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Ta(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(hg(n,i),Od(e,i))}this._attachedToViewContainer=!1}j1(this._lView[1],this._lView)}onDestroy(n){D_(this._lView[1],this._lView,null,n)}markForCheck(){Og(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function BA(t,n,e){Sd(!0);try{Fg(t,n,e)}finally{Sd(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new _i(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function VM(t,n){Bc(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new _i(902,"");this._appRef=n}}class MI extends Zc{constructor(n){super(n),this._view=n}detectChanges(){V_(this._view)}checkNoChanges(){!function LA(t){Sd(!0);try{V_(t)}finally{Sd(!1)}}(this._view)}get context(){return null}}class Lw extends ys{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=rr(n);return new gv(e,this.ngModule)}}function Uw(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}const PI=new ti("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>N1});class gv extends Fw{constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function eA(t){return t.map(JM).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Uw(this.componentDef.inputs)}get outputs(){return Uw(this.componentDef.outputs)}create(n,e,i,r){const a=(r=r||this.ngModule)?function EI(t,n){return{get:(e,i,r)=>{const a=t.get(e,pv,r);return a!==pv||i===pv?a:n.get(e,i,r)}}}(n,r.injector):n,o=a.get(fv,Ib),s=a.get(xI,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function T_(t,n,e){if(wn(t))return t.selectRootElement(n,e===ja.ShadowDom);let i="string"==typeof n?t.querySelector(n):n;return i.textContent="",i}(l,i,this.componentDef.encapsulation):dg(o.createRenderer(null,this.componentDef),c,function AI(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(c)),d=this.componentDef.onPush?576:528,v=function iy(t,n){return{components:[],scheduler:t||N1,clean:UA,playerHandler:n||null,flags:0}}(),m=Xd(0,null,null,1,0,null,null,null,null,null),_=Lc(null,m,v,d,null,null,o,l,s,a);let w,S;Td(_);try{const k=function ey(t,n,e,i,r,a){const o=e[1];e[20]=t;const l=hl(o,20,2,"#host",null),c=l.mergedAttrs=n.hostAttrs;null!==c&&(Qd(l,c,!0),null!==t&&(Md(r,t,c),null!==l.classes&&mg(r,t,l.classes),null!==l.styles&&i_(r,t,l.styles)));const u=i.createRenderer(t,n),d=Lc(e,C_(n),null,n.onPush?64:16,e[20],l,i,u,a||null,null);return o.firstCreatePass&&(Id(Sc(l,e),o,n.type),A_(o,l),P_(l,e.length,1)),Yd(e,d),e[20]=d}(u,this.componentDef,_,o,l);if(u)if(i)Md(l,u,["ng-version",kI.full]);else{const{attrs:T,classes:R}=function tA(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let a=t[i];if("string"==typeof a)2===r?""!==a&&n.push(a,t[++i]):8===r&&e.push(a);else{if(!Ra(r))break;r=a}i++}return{attrs:n,classes:e}}(this.componentDef.selectors[0]);T&&Md(l,u,T),R&&R.length>0&&mg(l,u,R.join(" "))}if(S=xp(m,20),void 0!==e){const T=S.projection=[];for(let R=0;R<this.ngContentSelectors.length;R++){const L=e[R];T.push(null!=L?Array.from(L):null)}}w=function ty(t,n,e,i,r){const a=e[1],o=function CA(t,n,e){const i=zn();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),E_(t,i,n,fl(t,n,1,null),e));const r=Tc(n,t,i.directiveStart,i);sr(r,n);const a=la(i,n);return a&&sr(a,n),r}(a,e,n);if(i.components.push(o),t[8]=o,r&&r.forEach(l=>l(o,n)),n.contentQueries){const l=zn();n.contentQueries(1,o,l.directiveStart)}const s=zn();return!a.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(jo(s.index),k_(e[1],s,0,s.directiveStart,s.directiveEnd,n),M_(n,o)),o}(k,this.componentDef,_,v,[oP]),Uc(m,_,null)}finally{Dd()}return new VI(this.componentType,w,Pl(S,_),_,S)}}class VI extends class yI{}{constructor(n,e,i,r,a){super(),this.location=i,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new MI(r),this.componentType=n}get injector(){return new el(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class Ro{}class Hw{}const El=new Map;class jw extends Ro{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Lw(this);const i=aa(n);this._bootstrapComponents=Ka(i.bootstrap),this._r3Injector=z_(n,e,[{provide:Ro,useValue:this},{provide:ys,useValue:this.componentFactoryResolver}],Ni(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,e=kn.THROW_IF_NOT_FOUND,i=Gt.Default){return n===kn||n===Ro||n===Lg?this:this._r3Injector.get(n,e,i)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class vv extends Hw{constructor(n){super(),this.moduleType=n,null!==aa(n)&&function NI(t){const n=new Set;!function e(i){const r=aa(i,!0),a=r.id;null!==a&&(function Gw(t,n,e){if(n&&n!==e)throw new Error(`Duplicate module registered for ${t} - ${Ni(n)} vs ${Ni(n.name)}`)}(a,El.get(a),i),El.set(a,i));const o=Ka(r.imports);for(const s of o)n.has(s)||(n.add(s),e(s))}(t)}(n)}create(n){return new jw(this.moduleType,n)}}function Jc(t,n,e){const i=vr()+t,r=Me();return r[i]===Bt?Ja(r,i,e?n.call(e):n()):zc(r,i)}function hn(t,n,e,i){return Ww(Me(),vr(),t,n,e,i)}function Qo(t,n,e,i,r){return qw(Me(),vr(),t,n,e,i,r)}function eu(t,n){const e=t[n];return e===Bt?void 0:e}function Ww(t,n,e,i,r,a){const o=n+e;return lr(t,o,r)?Ja(t,o+1,a?i.call(a,r):i(r)):eu(t,o+1)}function qw(t,n,e,i,r,a,o){const s=n+e;return bs(t,s,r,a)?Ja(t,s+2,o?i.call(o,r,a):i(r,a)):eu(t,s+2)}function Ot(t,n){const e=yi();let i;const r=t+20;e.firstCreatePass?(i=function GI(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const a=i.factory||(i.factory=ps(i.type)),o=Uo(E);try{const s=Pd(!1),l=a();return Pd(s),function bP(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,Me(),r,l),l}finally{Uo(o)}}function hh(t,n,e){const i=t+20,r=Me(),a=Qs(r,i);return iu(r,i)?Ww(r,vr(),n,a.transform,e,a):a.transform(e)}function oi(t,n,e,i){const r=t+20,a=Me(),o=Qs(a,r);return iu(a,r)?qw(a,vr(),n,o.transform,e,i,o):o.transform(e,i)}function tu(t,n,e,i,r){const a=t+20,o=Me(),s=Qs(o,a);return iu(o,a)?function Xw(t,n,e,i,r,a,o,s){const l=n+e;return Zd(t,l,r,a,o)?Ja(t,l+3,s?i.call(s,r,a,o):i(r,a,o)):eu(t,l+3)}(o,vr(),n,s.transform,e,i,r,s):s.transform(e,i,r)}function iu(t,n){return t[1].data[n].pure}function bv(t){return n=>{setTimeout(t,void 0,n)}}const ut=class $I extends ye{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){var r,a,o;let s=n,l=e||(()=>null),c=i;if(n&&"object"==typeof n){const d=n;s=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(a=d.error)||void 0===a?void 0:a.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=bv(l),s&&(s=bv(s)),c&&(c=bv(c)));const u=super.subscribe({next:s,error:l,complete:c});return n instanceof ve&&n.add(u),u}};function WI(){return this._results[ml()]()}class _v{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=ml(),i=_v.prototype;i[e]||(i[e]=WI)}get changes(){return this._changes||(this._changes=new ut)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=ca(n);(this._changesDetected=!function dk(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],a=n[i];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ln=(()=>{class t{}return t.__NG_ELEMENT_ID__=YI,t})();const qI=ln,XI=class extends qI{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n){const e=this._declarationTContainer.tViews,i=Lc(this._declarationLView,e,n,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(e)),Uc(e,i,n),new Zc(i)}};function YI(){return fh(zn(),Me())}function fh(t,n){return 4&t.type?new XI(n,t,Pl(t,n)):null}let ha=(()=>{class t{}return t.__NG_ELEMENT_ID__=QI,t})();function QI(){return Jw(zn(),Me())}const KI=ha,Kw=class extends KI{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return Pl(this._hostTNode,this._hostLView)}get injector(){return new el(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ed(this._hostTNode,this._hostLView);if(Yb(n)){const e=Js(n,this._hostLView),i=Zs(n);return new el(e[1].data[i+8],e)}return new el(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=Zw(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,e,i){const r=n.createEmbeddedView(e||{});return this.insert(r,i),r}createComponent(n,e,i,r,a){const o=n&&!function Rc(t){return"function"==typeof t}(n);let s;if(o)s=e;else{const d=e||{};s=d.index,i=d.injector,r=d.projectableNodes,a=d.ngModuleRef}const l=o?n:new gv(rr(n)),c=i||this.parentInjector;if(!a&&null==l.ngModule){const v=(o?c:this.parentInjector).get(Ro,null);v&&(a=v)}const u=l.create(c,r,void 0,a);return this.insert(u.hostView,s),u}insert(n,e){const i=n._lView,r=i[1];if(function Ex(t){return Ta(t[3])}(i)){const u=this.indexOf(n);if(-1!==u)this.detach(u);else{const d=i[3],v=new Kw(d,d[6],d[3]);v.detach(v.indexOf(n))}}const a=this._adjustIndex(e),o=this._lContainer;!function NM(t,n,e,i){const r=10+i,a=e.length;i>0&&(e[r-1][4]=n),i<a-10?(n[4]=e[r],a1(e,10+i,n)):(e.push(n),n[4]=null),n[3]=e;const o=n[17];null!==o&&e!==o&&function FM(t,n){const e=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===e?t[9]=[n]:e.push(n)}(o,n);const s=n[19];null!==s&&s.insertView(t),n[2]|=128}(r,i,o,a);const s=gg(a,o),l=i[11],c=Gd(l,o[7]);return null!==c&&function IM(t,n,e,i,r,a){i[0]=r,i[6]=n,Bc(t,i,e,1,r,a)}(r,o[6],l,i,c,s),n.attachToViewContainerRef(),a1(yv(o),a,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=Zw(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=hg(this._lContainer,e);i&&(Od(yv(this._lContainer),e),j1(i[1],i))}detach(n){const e=this._adjustIndex(n,-1),i=hg(this._lContainer,e);return i&&null!=Od(yv(this._lContainer),e)?new Zc(i):null}_adjustIndex(n,e=0){return null==n?this.length+e:n}};function Zw(t){return t[8]}function yv(t){return t[8]||(t[8]=[])}function Jw(t,n){let e;const i=n[t.index];if(Ta(i))e=i;else{let r;if(8&t.type)r=In(i);else{const a=n[11];r=a.createComment("");const o=la(t,n);ms(a,Gd(a,o),r,function HM(t,n){return wn(t)?t.nextSibling(n):n.nextSibling}(a,o),!1)}n[t.index]=e=I_(i,n,r,t),Yd(n,e)}return new Kw(e,t,n)}class wv{constructor(n){this.queryList=n,this.matches=null}clone(){return new wv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let a=0;a<i;a++){const o=e.getByIndex(a);r.push(this.queries[o.indexInDeclarationView].clone())}return new Cv(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==rC(n,e).matches&&this.queries[e].setDirty()}}class eC{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class Sv{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,a=this.getByIndex(i).embeddedTView(n,r);a&&(a.indexInDeclarationView=i,null!==e?e.push(a):e=[a])}return null!==e?new Sv(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Tv{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new Tv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];this.matchTNodeWithReadOption(n,e,eV(e,a)),this.matchTNodeWithReadOption(n,e,Vd(e,n,a,!1,!1))}else i===ln?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Vd(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ei||r===ha||r===ln&&4&e.type)this.addMatch(e.index,-2);else{const a=Vd(e,n,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function eV(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function iV(t,n,e,i){return-1===e?function tV(t,n){return 11&t.type?Pl(t,n):4&t.type?fh(t,n):null}(n,t):-2===e?function nV(t,n,e){return e===Ei?Pl(n,t):e===ln?fh(n,t):e===ha?Jw(n,t):void 0}(t,n,i):Tc(t,t[1],e,n)}function tC(t,n,e,i){const r=n[19].queries[i];if(null===r.matches){const a=t.data,o=e.matches,s=[];for(let l=0;l<o.length;l+=2){const c=o[l];s.push(c<0?null:iV(n,a[c],o[l+1],e.metadata.read))}r.matches=s}return r.matches}function Dv(t,n,e,i){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const o=tC(t,n,r,e);for(let s=0;s<a.length;s+=2){const l=a[s];if(l>0)i.push(o[s/2]);else{const c=a[s+1],u=n[-l];for(let d=10;d<u.length;d++){const v=u[d];v[17]===v[3]&&Dv(v[1],v,c,i)}if(null!==u[9]){const d=u[9];for(let v=0;v<d.length;v++){const m=d[v];Dv(m[1],m,c,i)}}}}}return i}function xi(t){const n=Me(),e=yi(),i=Ub();Vp(i+1);const r=rC(e,i);if(t.dirty&&Vb(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?Dv(e,n,i,[]):tC(e,n,r,i);t.reset(a,TI),t.notifyOnChanges()}return!0}return!1}function Pa(t,n,e){const i=yi();i.firstCreatePass&&(nC(i,new eC(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),iC(i,Me(),n)}function Mn(t,n,e,i){const r=yi();if(r.firstCreatePass){const a=zn();nC(r,new eC(n,e,i),a.index),function aV(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}iC(r,Me(),e)}function ki(){return function rV(t,n){return t[19].queries[n].queryList}(Me(),Ub())}function iC(t,n,e){const i=new _v(4==(4&e));D_(t,n,i,i.destroy),null===n[19]&&(n[19]=new Cv),n[19].queries.push(new wv(i))}function nC(t,n,e){null===t.queries&&(t.queries=new Sv),t.queries.track(new Tv(n,e))}function rC(t,n){return t.queries.getByIndex(n)}function ht(t,n){return fh(t,n)}function vh(...t){}const mh=new ti("Application Initializer");let Vl=(()=>{class t{constructor(e){this.appInits=e,this.resolve=vh,this.reject=vh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(jc(a))e.push(a);else if(tv(a)){const o=new Promise((s,l)=>{a.subscribe({complete:s,error:l})});e.push(o)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Ue(mh,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const ru=new ti("AppId"),SV={provide:ru,useFactory:function CV(){return`${Pv()}${Pv()}${Pv()}`},deps:[]};function Pv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wC=new ti("Platform Initializer"),bh=new ti("Platform ID"),CC=new ti("appBootstrapListener");let SC=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Ko=new ti("LocaleId"),TC=new ti("DefaultCurrencyCode");class TV{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let _h=(()=>{class t{compileModuleSync(e){return new vv(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),a=Ka(aa(e).declarations).reduce((o,s)=>{const l=rr(s);return l&&o.push(new gv(l)),o},[]);return new TV(i,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const RV=(()=>Promise.resolve(0))();function Ev(t){"undefined"==typeof Zone?RV.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Xi{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ut(!1),this.onMicrotaskEmpty=new ut(!1),this.onStable=new ut(!1),this.onError=new ut(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function xV(){let t=Li.requestAnimationFrame,n=Li.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function AV(t){const n=()=>{!function MV(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Li,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Vv(t),t.isCheckStableRunning=!0,Iv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Vv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,a,o,s)=>{try{return DC(t),e.invokeTask(r,a,o,s)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&n(),RC(t)}},onInvoke:(e,i,r,a,o,s,l)=>{try{return DC(t),e.invoke(r,a,o,s,l)}finally{t.shouldCoalesceRunChangeDetection&&n(),RC(t)}},onHasTask:(e,i,r,a)=>{e.hasTask(r,a),i===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,Vv(t),Iv(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,i,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const a=this._inner,o=a.scheduleEventTask("NgZoneEvent: "+r,n,kV,vh,vh);try{return a.runTask(o,e,i)}finally{a.cancelTask(o)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const kV={};function Iv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Vv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function DC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function RC(t){t._nesting--,Iv(t)}class PV{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ut,this.onMicrotaskEmpty=new ut,this.onStable=new ut,this.onError=new ut}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}let Ov=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xi.assertNotInAngularZone(),Ev(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ev(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Ue(Xi))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),xC=(()=>{class t{constructor(){this._applications=new Map,Nv.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Nv.findTestabilityInTree(this,e,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class EV{addToWindow(n){}findTestabilityInTree(n,e,i){return null}}let Ea,Nv=new EV;const kC=new ti("AllowMultipleToken");class MC{constructor(n,e){this.name=n,this.token=e}}function AC(t,n,e=[]){const i=`Platform: ${n}`,r=new ti(i);return(a=[])=>{let o=PC();if(!o||o.injector.get(kC,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const s=e.concat(a).concat({provide:r,useValue:!0},{provide:Ug,useValue:"platform"});!function NV(t){if(Ea&&!Ea.destroyed&&!Ea.injector.get(kC,!1))throw new _i(400,"");Ea=t.get(EC);const n=t.get(wC,null);n&&n.forEach(e=>e())}(kn.create({providers:s,name:i}))}return function FV(t){const n=PC();if(!n)throw new _i(401,"");return n}()}}function PC(){return Ea&&!Ea.destroyed?Ea:null}let EC=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const s=function BV(t,n){let e;return e="noop"===t?new PV:("zone.js"===t?void 0:t)||new Xi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:Xi,useValue:s}];return s.run(()=>{const c=kn.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get(cl,null);if(!d)throw new _i(402,"");return s.runOutsideAngular(()=>{const v=s.onError.subscribe({next:m=>{d.handleError(m)}});u.onDestroy(()=>{Fv(this._modules,u),v.unsubscribe()})}),function LV(t,n,e){try{const i=e();return jc(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(d,s,()=>{const v=u.injector.get(Vl);return v.runInitializers(),v.donePromise.then(()=>(function xE(t){(function Lr(t,n){null==t&&nn(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(fw=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Ko,ah)||ah),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,i=[]){const r=IC({},i);return function VV(t,n,e){const i=new vv(e);return Promise.resolve(i)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const i=e.injector.get(ws);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new _i(403,"");e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _i(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Ue(kn))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function IC(t,n){return Array.isArray(n)?n.reduce(IC,t):Object.assign(Object.assign({},t),n)}let ws=(()=>{class t{constructor(e,i,r,a,o){this._zone=e,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Le(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Le(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Xi.assertNotInAngularZone(),Ev(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Xi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=mb(s,l.pipe(bb()))}bootstrap(e,i){if(!this._initStatus.done)throw new _i(405,"");let r;r=e instanceof Fw?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function OV(t){return t.isBoundToModule}(r)?void 0:this._injector.get(Ro),s=r.create(kn.NULL,[],i||r.selector,a),l=s.location.nativeElement,c=s.injector.get(Ov,null),u=c&&s.injector.get(xC);return c&&u&&u.registerApplication(l,c),s.onDestroy(()=>{this.detachView(s.hostView),Fv(this.components,s),u&&u.unregisterApplication(l)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new _i(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Fv(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(CC,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Ue(Xi),Ue(kn),Ue(cl),Ue(ys),Ue(Vl))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Fv(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let OC=!0,Wr=(()=>{class t{}return t.__NG_ELEMENT_ID__=GV,t})();function GV(t){return function zV(t,n,e){if(_d(t)&&!e){const i=Hr(t.index,n);return new Zc(i,i)}return 47&t.type?new Zc(n[16],n):null}(zn(),Me(),16==(16&t))}class UC{constructor(){}supports(n){return Gc(n)}create(n){return new YV(n)}}const XV=(t,n)=>n;class YV{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||XV}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,a=null;for(;e||i;){const o=!i||e&&e.currentIndex<GC(i,r,a)?e:i,s=GC(o,r,a),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{a||(a=[]);const c=s-r,u=l-r;if(c!=u){for(let v=0;v<c;v++){const m=v<a.length?a[v]:a[v]=0,_=m+v;u<=_&&_<c&&(a[v]=m+1)}a[o.previousIndex]=u-c}}s!==l&&n(o,s,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Gc(n))throw new _i(900,"");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,a,o,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let s=0;s<this.length;s++)a=n[s],o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),i=!0),e=e._next}else r=0,function vP(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[ml()]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,s=>{o=this._trackByFn(r,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,r)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,a,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,a,r)):n=this._addAfter(new QV(e,i),a,r),n}_verifyReinsertion(n,e,i,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?n=this._reinsertAfter(a,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,a=n._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new HC),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new HC),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class QV{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KV{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class HC{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new KV,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GC(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class zC{constructor(){}supports(n){return n instanceof Map||Wg(n)}create(){return new ZV}}class ZV{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||Wg(n)))throw new _i(900,"")}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const a=r._prev,o=r._next;return a&&(a._next=o),o&&(o._prev=a),r._next=null,r._prev=null,r}const i=new JV(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class JV{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function jC(){return new au([new UC])}let au=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||jC()),deps:[[t,new ol,new Xa]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new _i(901,"")}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:jC}),t})();function $C(){return new Ol([new zC])}let Ol=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||$C()),deps:[[t,new ol,new Xa]]}}find(e){const i=this.factories.find(a=>a.supports(e));if(i)return i;throw new _i(901,"")}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:$C}),t})();const eO=[new zC],iO=new au([new UC]),nO=new Ol(eO),rO=AC(null,"core",[{provide:bh,useValue:"unknown"},{provide:EC,deps:[kn]},{provide:xC,deps:[]},{provide:SC,deps:[]}]),cO=[{provide:ws,useClass:ws,deps:[Xi,kn,cl,ys,Vl]},{provide:PI,deps:[Xi],useFactory:function uO(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}},{provide:Vl,useClass:Vl,deps:[[new Xa,mh]]},{provide:_h,useClass:_h,deps:[]},SV,{provide:au,useFactory:function aO(){return iO},deps:[]},{provide:Ol,useFactory:function oO(){return nO},deps:[]},{provide:Ko,useFactory:function sO(t){return t||function lO(){return"undefined"!=typeof $localize&&$localize.locale||ah}()},deps:[[new Pc(Ko),new Xa,new ol]]},{provide:TC,useValue:"USD"}];let dO=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Ue(ws))},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({providers:cO}),t})(),Ch=null;function io(){return Ch}const Vn=new ti("DocumentToken");let Ss=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:function(){return function gO(){return Ue(WC)}()},providedIn:"platform"}),t})();const vO=new ti("Location Initialized");let WC=(()=>{class t extends Ss{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return io().getBaseHref(this._doc)}onPopState(e){const i=io().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=io().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){qC()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){qC()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Ue(Vn))},t.\u0275prov=ct({token:t,factory:function(){return function mO(){return new WC(Ue(Vn))}()},providedIn:"platform"}),t})();function qC(){return!!window.history.pushState}function Gv(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function XC(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function xo(t){return t&&"?"!==t[0]?"?"+t:t}let Nl=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:function(){return function bO(t){const n=Ue(Vn).location;return new YC(Ue(Ss),n&&n.origin||"")}()},providedIn:"root"}),t})();const zv=new ti("appBaseHref");let YC=(()=>{class t extends Nl{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Gv(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+xo(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){const o=this.prepareExternalUrl(r+xo(a));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,a){const o=this.prepareExternalUrl(r+xo(a));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Ue(Ss),Ue(zv,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),_O=(()=>{class t extends Nl{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Gv(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let o=this.prepareExternalUrl(r+xo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,a){let o=this.prepareExternalUrl(r+xo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Ue(Ss),Ue(zv,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),jv=(()=>{class t{constructor(e,i){this._subject=new ut,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=XC(QC(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+xo(i))}normalize(e){return t.stripTrailingSlash(function wO(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,QC(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xo(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xo(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return t.normalizeQueryParams=xo,t.joinWithSlash=Gv,t.stripTrailingSlash=XC,t.\u0275fac=function(e){return new(e||t)(Ue(Nl),Ue(Ss))},t.\u0275prov=ct({token:t,factory:function(){return function yO(){return new jv(Ue(Nl),Ue(Ss))}()},providedIn:"root"}),t})();function QC(t){return t.replace(/\/index.html$/,"")}var Er=(()=>((Er=Er||{})[Er.Decimal=0]="Decimal",Er[Er.Percent=1]="Percent",Er[Er.Currency=2]="Currency",Er[Er.Scientific=3]="Scientific",Er))(),On=(()=>((On=On||{})[On.Zero=0]="Zero",On[On.One=1]="One",On[On.Two=2]="Two",On[On.Few=3]="Few",On[On.Many=4]="Many",On[On.Other=5]="Other",On))(),St=(()=>((St=St||{})[St.Decimal=0]="Decimal",St[St.Group=1]="Group",St[St.List=2]="List",St[St.PercentSign=3]="PercentSign",St[St.PlusSign=4]="PlusSign",St[St.MinusSign=5]="MinusSign",St[St.Exponential=6]="Exponential",St[St.SuperscriptingExponent=7]="SuperscriptingExponent",St[St.PerMille=8]="PerMille",St[St.Infinity=9]="Infinity",St[St.NaN=10]="NaN",St[St.TimeSeparator=11]="TimeSeparator",St[St.CurrencyDecimal=12]="CurrencyDecimal",St[St.CurrencyGroup=13]="CurrencyGroup",St))();function fa(t,n){const e=_r(t),i=e[Ke.NumberSymbols][n];if(void 0===i){if(n===St.CurrencyDecimal)return e[Ke.NumberSymbols][St.Decimal];if(n===St.CurrencyGroup)return e[Ke.NumberSymbols][St.Group]}return i}function $v(t,n){return _r(t)[Ke.NumberFormats][n]}const kO=dw,qO=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Qv(t,n,e,i,r,a,o=!1){let s="",l=!1;if(isFinite(t)){let c=function tN(t){let i,r,a,o,s,n=Math.abs(t)+"",e=0;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(a=n.search(/e/i))>0?(r<0&&(r=a),r+=+n.slice(a+1),n=n.substring(0,a)):r<0&&(r=n.length),a=0;"0"===n.charAt(a);a++);if(a===(s=n.length))i=[0],r=1;else{for(s--;"0"===n.charAt(s);)s--;for(r-=a,i=[],o=0;a<=s;a++,o++)i[o]=Number(n.charAt(a))}return r>22&&(i=i.splice(0,21),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(t);o&&(c=function eN(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(c));let u=n.minInt,d=n.minFrac,v=n.maxFrac;if(a){const T=a.match(qO);if(null===T)throw new Error(`${a} is not a valid digit info`);const R=T[1],L=T[3],W=T[5];null!=R&&(u=Zv(R)),null!=L&&(d=Zv(L)),null!=W?v=Zv(W):null!=L&&d>v&&(v=d)}!function iN(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,r=i.length-t.integerLen;const a=Math.min(Math.max(n,r),e);let o=a+t.integerLen,s=i[o];if(o>0){i.splice(Math.max(t.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,o=a+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(s>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[o-1]++;for(;r<Math.max(0,a);r++)i.push(0);let l=0!==a;const c=n+t.integerLen,u=i.reduceRight(function(d,v,m,_){return _[m]=(v+=d)<10?v:v-10,l&&(0===_[m]&&m>=c?_.pop():l=!1),v>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}(c,d,v);let m=c.digits,_=c.integerLen;const w=c.exponent;let S=[];for(l=m.every(T=>!T);_<u;_++)m.unshift(0);for(;_<0;_++)m.unshift(0);_>0?S=m.splice(_,m.length):(S=m,m=[0]);const k=[];for(m.length>=n.lgSize&&k.unshift(m.splice(-n.lgSize,m.length).join(""));m.length>n.gSize;)k.unshift(m.splice(-n.gSize,m.length).join(""));m.length&&k.unshift(m.join("")),s=k.join(fa(e,i)),S.length&&(s+=fa(e,r)+S.join("")),w&&(s+=fa(e,St.Exponential)+"+"+w)}else s=fa(e,St.Infinity);return s=t<0&&!l?n.negPre+s+n.negSuf:n.posPre+s+n.posSuf,s}function Kv(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),r=i[0],a=i[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],s=o[0],l=o[1]||"";e.posPre=s.substr(0,s.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?e.minFrac=e.maxFrac=u+1:"#"===d?e.maxFrac=u+1:e.posSuf+=d}const c=s.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const u=r.length-e.posPre.length-e.posSuf.length,d=a.indexOf("#");e.negPre=a.substr(0,d).replace(/'/g,""),e.negSuf=a.substr(d+u).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function Zv(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}class Eh{}let nN=(()=>{class t extends Eh{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(kO(i||this.locale)(e)){case On.Zero:return"zero";case On.One:return"one";case On.Two:return"two";case On.Few:return"few";case On.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Ue(Ko))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),rn=(()=>{class t{constructor(e,i,r,a){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Gc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ni(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(E(au),E(Ol),E(Ei),E(da))},t.\u0275dir=We({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class oN{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cn=(()=>{class t{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,a,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new oN(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===a?void 0:a);else if(null!==a){const s=i.get(a);i.move(s,o),aS(s,r)}});for(let r=0,a=i.length;r<a;r++){const s=i.get(r).context;s.index=r,s.count=a,s.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{aS(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(E(ha),E(ln),E(au))},t.\u0275dir=We({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function aS(t,n){t.context.$implicit=n.item}let hi=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new sN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){oS("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){oS("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(E(ha),E(ln))},t.\u0275dir=We({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class sN{constructor(){this.$implicit=null,this.ngIf=null}}function oS(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ni(n)}'.`)}let Fl=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(E(ha))},t.\u0275dir=We({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Gn]}),t})();function Va(t,n){return new _i(2100,"")}let no=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!tm(e))return null;r=r||this._locale;try{return function JO(t,n,e){return Qv(t,Kv($v(n,Er.Decimal),fa(n,St.MinusSign)),n,St.Group,St.Decimal,e)}(im(e),r,i)}catch(a){throw Va()}}}return t.\u0275fac=function(e){return new(e||t)(E(Ko,16))},t.\u0275pipe=Ar({name:"number",type:t,pure:!0}),t})(),cS=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!tm(e))return null;r=r||this._locale;try{return function ZO(t,n,e){return Qv(t,Kv($v(n,Er.Percent),fa(n,St.MinusSign)),n,St.Group,St.Decimal,e,!0).replace(new RegExp("%","g"),fa(n,St.PercentSign))}(im(e),r,i)}catch(a){throw Va()}}}return t.\u0275fac=function(e){return new(e||t)(E(Ko,16))},t.\u0275pipe=Ar({name:"percent",type:t,pure:!0}),t})();function tm(t){return!(null==t||""===t||t!=t)}function im(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let Ir=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({providers:[{provide:Eh,useClass:nN}]}),t})();let ON=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new NN(Ue(Vn),window)}),t})();class NN{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function FN(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const o=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=dS(this.window.history)||dS(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function dS(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class nm extends class LN extends class pO{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fO(t){Ch||(Ch=t)}(new nm)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function UN(){return lu=lu||document.querySelector("base"),lu?lu.getAttribute("href"):null}();return null==e?null:function HN(t){Ih=Ih||document.createElement("a"),Ih.setAttribute("href",t);const n=Ih.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){lu=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function rN(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,a]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let Ih,lu=null;const hS=new ti("TRANSITION_ID"),zN=[{provide:mh,useFactory:function GN(t,n,e){return()=>{e.get(Vl).donePromise.then(()=>{const i=io(),r=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)i.remove(r[a])})}},deps:[hS,Vn,kn],multi:!0}];class rm{static init(){!function IV(t){Nv=t}(new rm)}addToWindow(n){Li.getAngularTestability=(i,r=!0)=>{const a=n.findTestabilityInTree(i,r);if(null==a)throw new Error("Could not find testability for element.");return a},Li.getAllAngularTestabilities=()=>n.getAllTestabilities(),Li.getAllAngularRootElements=()=>n.getAllRootElements(),Li.frameworkStabilizers||(Li.frameworkStabilizers=[]),Li.frameworkStabilizers.push(i=>{const r=Li.getAllAngularTestabilities();let a=r.length,o=!1;const s=function(l){o=o||l,a--,0==a&&i(o)};r.forEach(function(l){l.whenStable(s)})})}findTestabilityInTree(n,e,i){if(null==e)return null;const r=n.getTestability(e);return null!=r?r:i?io().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null}}let jN=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Vh=new ti("EventManagerPlugins");let Oh=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let a=0;a<r.length;a++){const o=r[a];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Ue(Vh),Ue(Xi))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class fS{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const r=io().getGlobalEventTarget(this._doc,n);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let pS=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),cu=(()=>{class t extends pS{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(a=>{const o=this._doc.createElement("style");o.textContent=a,r.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(gS),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(gS))}}return t.\u0275fac=function(e){return new(e||t)(Ue(Vn))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function gS(t){io().remove(t)}const am={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},om=/%COMP%/g;function Nh(t,n,e){for(let i=0;i<n.length;i++){let r=n[i];Array.isArray(r)?Nh(t,r,e):(r=r.replace(om,t),e.push(r))}return e}function bS(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let sm=(()=>{class t{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new lm(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case ja.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new QN(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case ja.ShadowDom:return new KN(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Nh(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Ue(Oh),Ue(cu),Ue(ru))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class lm{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(am[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){n.appendChild(e)}insertBefore(n,e,i){n&&n.insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const a=am[r];a?n.setAttributeNS(a,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=am[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(jr.DashCase|jr.Important)?n.style.setProperty(e,i,r&jr.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&jr.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,bS(i)):this.eventManager.addEventListener(n,e,bS(i))}}class QN extends lm{constructor(n,e,i,r){super(n),this.component=i;const a=Nh(r+"-"+i.id,i.styles,[]);e.addStyles(a),this.contentAttr=function qN(t){return"_ngcontent-%COMP%".replace(om,t)}(r+"-"+i.id),this.hostAttr=function XN(t){return"_nghost-%COMP%".replace(om,t)}(r+"-"+i.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}class KN extends lm{constructor(n,e,i,r){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Nh(r.id,r.styles,[]);for(let o=0;o<a.length;o++){const s=document.createElement("style");s.textContent=a[o],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let ZN=(()=>{class t extends fS{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return t.\u0275fac=function(e){return new(e||t)(Ue(Vn))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const yS=["alt","control","meta","shift"],eF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wS={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},tF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let iF=(()=>{class t extends fS{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const a=t.parseEventName(i),o=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>io().onAndCancel(e,a.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(i.pop());let o="";if(yS.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=a,0!=i.length||0===a.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let i="",r=function nF(t){let n=t.key;if(null==n){if(n=t.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===t.location&&wS.hasOwnProperty(n)&&(n=wS[n]))}return eF[n]||n}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),yS.forEach(a=>{a!=r&&tF[a](e)&&(i+=a+".")}),i+=r,i}static eventCallback(e,i,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Ue(Vn))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const sF=AC(rO,"browser",[{provide:bh,useValue:"browser"},{provide:wC,useValue:function rF(){nm.makeCurrent(),rm.init()},multi:!0},{provide:Vn,useFactory:function oF(){return function kx(t){Dp=t}(document),document},deps:[]}]),lF=[{provide:Ug,useValue:"root"},{provide:cl,useFactory:function aF(){return new cl},deps:[]},{provide:Vh,useClass:ZN,multi:!0,deps:[Vn,Xi,bh]},{provide:Vh,useClass:iF,multi:!0,deps:[Vn]},{provide:sm,useClass:sm,deps:[Oh,cu,ru]},{provide:fv,useExisting:sm},{provide:pS,useExisting:cu},{provide:cu,useClass:cu,deps:[Vn]},{provide:Ov,useClass:Ov,deps:[Xi]},{provide:Oh,useClass:Oh,deps:[Vh,Xi]},{provide:class BN{},useClass:jN,deps:[]}];let cF=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:ru,useValue:e.appId},{provide:hS,useExisting:ru},zN]}}}return t.\u0275fac=function(e){return new(e||t)(Ue(t,12))},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({providers:lF,imports:[Ir,dO]}),t})();"undefined"!=typeof window&&window;let Jo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:function(e){let i=null;return i=e?new(e||t):Ue(TS),i},providedIn:"root"}),t})(),TS=(()=>{class t extends Jo{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case pi.NONE:return i;case pi.HTML:return Ya(i,"HTML")?zr(i):k1(this._doc,String(i)).toString();case pi.STYLE:return Ya(i,"Style")?zr(i):i;case pi.SCRIPT:if(Ya(i,"Script"))return zr(i);throw new Error("unsafe value used in a script context");case pi.URL:return y1(i),Ya(i,"URL")?zr(i):Ic(String(i));case pi.RESOURCE_URL:if(Ya(i,"ResourceURL"))return zr(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function Gk(t){return new Fk(t)}(e)}bypassSecurityTrustStyle(e){return function zk(t){return new Bk(t)}(e)}bypassSecurityTrustScript(e){return function jk(t){return new Lk(t)}(e)}bypassSecurityTrustUrl(e){return function $k(t){return new Uk(t)}(e)}bypassSecurityTrustResourceUrl(e){return function Wk(t){return new Hk(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Ue(Vn))},t.\u0275prov=ct({token:t,factory:function(e){let i=null;return i=e?new e:function _F(t){return new TS(t.get(Vn))}(Ue(kn)),i},providedIn:"root"}),t})();const{isArray:yF}=Array,{getPrototypeOf:wF,prototype:CF,keys:SF}=Object;function DS(t){if(1===t.length){const n=t[0];if(yF(n))return{args:n,keys:null};if(function TF(t){return t&&"object"==typeof t&&wF(t)===CF}(n)){const e=SF(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:DF}=Array;function um(t){return Ht(n=>function RF(t,n){return DF(n)?t(...n):t(n)}(t,n))}function RS(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}let xS=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(E(da),E(Ei))},t.\u0275dir=We({type:t}),t})(),Ts=(()=>{class t extends xS{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=or(t)))(i||t)}}(),t.\u0275dir=We({type:t,features:[Pi]}),t})();const ga=new ti("NgValueAccessor"),kF={provide:ga,useExisting:Ci(()=>uu),multi:!0};let uu=(()=>{class t extends Ts{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=or(t)))(i||t)}}(),t.\u0275dir=We({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,i){1&e&&A("change",function(a){return i.onChange(a.target.checked)})("blur",function(){return i.onTouched()})},features:[qi([kF]),Pi]}),t})();const MF={provide:ga,useExisting:Ci(()=>es),multi:!0},PF=new ti("CompositionEventMode");let es=(()=>{class t extends xS{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function AF(){const t=io()?io().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(E(da),E(Ei),E(PF,8))},t.\u0275dir=We({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&A("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[qi([MF]),Pi]}),t})();function kS(t){return null!=t&&"number"==typeof t.length}const ur=new ti("NgValidators"),is=new ti("NgAsyncValidators");function Fh(t){return null}function FS(t){return null!=t}function BS(t){const n=jc(t)?Kn(t):t;return tv(n),n}function LS(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function US(t,n){return n.map(e=>e(t))}function HS(t){return t.map(n=>function IF(t){return!t.validate}(n)?n:e=>n.validate(e))}function dm(t){return null!=t?function GS(t){if(!t)return null;const n=t.filter(FS);return 0==n.length?null:function(e){return LS(US(e,n))}}(HS(t)):null}function hm(t){return null!=t?function zS(t){if(!t)return null;const n=t.filter(FS);return 0==n.length?null:function(e){return function xF(...t){const n=hd(t),{args:e,keys:i}=DS(t),r=new Le(a=>{const{length:o}=e;if(!o)return void a.complete();const s=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;Hn(e[u]).subscribe(Zt(a,v=>{d||(d=!0,c--),s[u]=v},()=>l--,void 0,()=>{(!l||!d)&&(c||a.next(i?RS(i,s):s),a.complete())}))}});return n?r.pipe(um(n)):r}(US(e,n).map(BS)).pipe(Ht(LS))}}(HS(t)):null}function jS(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function $S(t){return t._rawValidators}function WS(t){return t._rawAsyncValidators}function fm(t){return t?Array.isArray(t)?t:[t]:[]}function Bh(t,n){return Array.isArray(t)?t.includes(n):t===n}function qS(t,n){const e=fm(n);return fm(t).forEach(r=>{Bh(e,r)||e.push(r)}),e}function XS(t,n){return fm(n).filter(e=>!Bh(t,e))}class YS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=dm(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=hm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class ns extends YS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wr extends YS{get formDirective(){return null}get path(){return null}}class QS{constructor(n){this._cd=n}is(n){var e,i,r;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[n])}}let Ds=(()=>{class t extends QS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(E(ns,2))},t.\u0275dir=We({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&Mt("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[Pi]}),t})(),Lh=(()=>{class t extends QS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(E(wr,10))},t.\u0275dir=We({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&Mt("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[Pi]}),t})();function Hh(t,n){return[...n.path,t]}function du(t,n){vm(t,n),n.valueAccessor.writeValue(t.value),function HF(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ZS(t,n)})}(t,n),function zF(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function GF(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ZS(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function UF(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Gh(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),jh(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function zh(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function vm(t,n){const e=$S(t);null!==n.validator?t.setValidators(jS(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=WS(t);null!==n.asyncValidator?t.setAsyncValidators(jS(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();zh(n._rawValidators,r),zh(n._rawAsyncValidators,r)}function jh(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=$S(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==n.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==n.asyncValidator){const r=WS(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==n.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const i=()=>{};return zh(n._rawValidators,i),zh(n._rawAsyncValidators,i),e}function ZS(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function JS(t,n){vm(t,n)}function mm(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function eT(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function bm(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(a=>{a.constructor===es?e=a:function WF(t){return Object.getPrototypeOf(t.constructor)===Ts}(a)?i=a:r=a}),r||i||e||null}function _m(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const hu="VALID",$h="INVALID",Bl="PENDING",fu="DISABLED";function wm(t){return(Wh(t)?t.validators:t)||null}function tT(t){return Array.isArray(t)?dm(t):t||null}function Cm(t,n){return(Wh(n)?n.asyncValidators:t)||null}function iT(t){return Array.isArray(t)?hm(t):t||null}function Wh(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const nT=t=>t instanceof Dm,Sm=t=>t instanceof qh;function rT(t){return nT(t)?t.value:t.getRawValue()}function aT(t,n){const e=Sm(t),i=t.controls;if(!(e?Object.keys(i):i).length)throw new _i(1e3,"");if(!i[n])throw new _i(1001,"")}function oT(t,n){Sm(t),t._forEachChild((i,r)=>{if(void 0===n[r])throw new _i(1002,"")})}class Tm{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=tT(this._rawValidators),this._composedAsyncValidatorFn=iT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===hu}get invalid(){return this.status===$h}get pending(){return this.status==Bl}get disabled(){return this.status===fu}get enabled(){return this.status!==fu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=tT(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=iT(n)}addValidators(n){this.setValidators(qS(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(qS(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(XS(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(XS(n,this._rawAsyncValidators))}hasValidator(n){return Bh(this._rawValidators,n)}hasAsyncValidator(n){return Bh(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Bl,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=fu,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=hu,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hu||this.status===Bl)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fu:hu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Bl,this._hasOwnPendingAsyncValidator=!0;const e=BS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function qF(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(e)),Array.isArray(n)&&0===n.length))return null;let i=t;return n.forEach(r=>{i=Sm(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(t=>t instanceof YF)(i)&&i.at(r)||null}),i}(this,n,".")}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new ut,this.statusChanges=new ut}_calculateStatus(){return this._allControlsDisabled()?fu:this.errors?$h:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bl)?Bl:this._anyControlsHaveStatus($h)?$h:hu}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Wh(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Dm extends Tm{constructor(n=null,e,i){super(wm(e),Cm(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wh(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){_m(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){_m(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class qh extends Tm{constructor(n,e,i){super(wm(e),Cm(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){oT(this,n),Object.keys(n).forEach(i=>{aT(this,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=rT(e),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&n(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,i)=>((e.enabled||this.disabled)&&(n[i]=e.value),n))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,a)=>{i=e(i,r,a)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class YF extends Tm{constructor(n,e,i){super(wm(e),Cm(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){oT(this,n),n.forEach((i,r)=>{aT(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>rT(n))}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const QF={provide:wr,useExisting:Ci(()=>gu)},pu=(()=>Promise.resolve(null))();let gu=(()=>{class t extends wr{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new ut,this.form=new qh({},dm(e),hm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){pu.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),du(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){pu.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){pu.then(()=>{const i=this._findContainer(e.path),r=new qh({});JS(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){pu.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){pu.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,eT(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(E(ur,10),E(is,10))},t.\u0275dir=We({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&A("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[qi([QF]),Pi]}),t})();const ZF={provide:ns,useExisting:Ci(()=>Rs)},cT=(()=>Promise.resolve(null))();let Rs=(()=>{class t extends ns{constructor(e,i,r,a,o){super(),this._changeDetectorRef=o,this.control=new Dm,this._registered=!1,this.update=new ut,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=bm(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),mm(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){du(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){cT.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;cT.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?Hh(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(E(wr,9),E(ur,10),E(is,10),E(ga,10),E(Wr,8))},t.\u0275dir=We({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[qi([ZF]),Pi,Gn]}),t})(),Xh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=We({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const JF={provide:ga,useExisting:Ci(()=>Rm),multi:!0};let Rm=(()=>{class t extends Ts{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=or(t)))(i||t)}}(),t.\u0275dir=We({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&A("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[qi([JF]),Pi]}),t})(),uT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({}),t})();const xm=new ti("NgModelWithFormControlWarning"),a3={provide:wr,useExisting:Ci(()=>Yh)};let Yh=(()=>{class t extends wr{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ut,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return du(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Gh(e.control||null,e,!1),_m(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,eT(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Gh(i||null,e),nT(r)&&(du(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);JS(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function jF(t,n){return jh(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vm(this.form,this),this._oldForm&&jh(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(E(ur,10),E(is,10))},t.\u0275dir=We({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&A("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[qi([a3]),Pi,Gn]}),t})();const l3={provide:ns,useExisting:Ci(()=>Am)};let Am=(()=>{class t extends ns{constructor(e,i,r,a,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new ut,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=bm(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),mm(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Hh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(E(wr,13),E(ur,10),E(is,10),E(ga,10),E(xm,8))},t.\u0275dir=We({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[qi([l3]),Pi,Gn]}),t})();const c3={provide:ga,useExisting:Ci(()=>Qh),multi:!0};function gT(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Qh=(()=>{class t extends Ts{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=gT(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function u3(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=or(t)))(i||t)}}(),t.\u0275dir=We({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&A("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[qi([c3]),Pi]}),t})(),vT=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(gT(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(E(Ei),E(da),E(Qh,9))},t.\u0275dir=We({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const d3={provide:ga,useExisting:Ci(()=>Pm),multi:!0};function mT(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Pm=(()=>{class t extends Ts{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(a=>this._getOptionId(a));i=(a,o)=>{a._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],a=i.selectedOptions;if(void 0!==a){const o=a;for(let s=0;s<o.length;s++){const c=this._getOptionValue(o[s].value);r.push(c)}}else{const o=i.options;for(let s=0;s<o.length;s++){const l=o[s];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function h3(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=or(t)))(i||t)}}(),t.\u0275dir=We({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&A("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[qi([d3]),Pi]}),t})(),bT=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(mT(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(mT(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(E(Ei),E(da),E(Pm,9))},t.\u0275dir=We({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function _T(t){return"number"==typeof t?t:parseInt(t,10)}let xs=(()=>{class t{constructor(){this._validator=Fh}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Fh,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=We({type:t,features:[Gn]}),t})();const _3={provide:ur,useExisting:Ci(()=>Kh),multi:!0};let Kh=(()=>{class t extends xs{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>_T(e),this.createValidator=e=>function VS(t){return n=>function ts(t){return null==t||0===t.length}(n.value)||!kS(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=or(t)))(i||t)}}(),t.\u0275dir=We({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&Bi("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[qi([_3]),Pi]}),t})();const y3={provide:ur,useExisting:Ci(()=>Ll),multi:!0};let Ll=(()=>{class t extends xs{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>_T(e),this.createValidator=e=>function OS(t){return n=>kS(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=or(t)))(i||t)}}(),t.\u0275dir=We({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&Bi("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[qi([y3]),Pi]}),t})(),RT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[uT]]}),t})(),xT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[RT]}),t})(),C3=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:xm,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[RT]}),t})();function Nt(...t){return Kn(t,gc(t))}class pn extends ye{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function kT(t,n,e){t?ra(e,t,n):n()}const Zh=z(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function vu(...t){return function T3(){return pc(1)}()(Kn(t,gc(t)))}function MT(t){return new Le(n=>{Hn(t()).subscribe(n)})}function AT(){return kt((t,n)=>{let e=null;t._refCount++;const i=Zt(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class D3 extends Le{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,zi(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,null==n||n.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new ve;const e=this.getSubject();n.add(this.source.subscribe(Zt(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=ve.EMPTY)}return n}refCount(){return AT()(this)}}function Mo(t,n){return kt((e,i)=>{let r=null,a=0,o=!1;const s=()=>o&&!r&&i.complete();e.subscribe(Zt(i,l=>{null==r||r.unsubscribe();let c=0;const u=a++;Hn(t(l,u)).subscribe(r=Zt(i,d=>i.next(n?n(l,d,u,c++):d),()=>{r=null,s()}))},()=>{o=!0,s()}))})}function R3(t,n,e,i,r){return(a,o)=>{let s=e,l=n,c=0;a.subscribe(Zt(o,u=>{const d=c++;l=s?t(l,u,d):(s=!0,u),i&&o.next(l)},r&&(()=>{s&&o.next(l),o.complete()})))}}function PT(t,n){return kt(R3(t,n,arguments.length>=2,!0))}function tr(t,n){return kt((e,i)=>{let r=0;e.subscribe(Zt(i,a=>t.call(n,a,r++)&&i.next(a)))})}function rs(t){return kt((n,e)=>{let a,i=null,r=!1;i=n.subscribe(Zt(e,void 0,void 0,o=>{a=Hn(t(o,rs(t)(n))),i?(i.unsubscribe(),i=null,a.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(e))})}function mu(t,n){return Q(n)?Rn(t,n,1):Rn(t,1)}function Vm(t){return t<=0?()=>wa:kt((n,e)=>{let i=[];n.subscribe(Zt(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function ET(t=x3){return kt((n,e)=>{let i=!1;n.subscribe(Zt(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function x3(){return new Zh}function IT(t){return kt((n,e)=>{let i=!1;n.subscribe(Zt(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function Ul(t,n){const e=arguments.length>=2;return i=>i.pipe(t?tr((r,a)=>t(r,a,i)):Be,Zn(1),e?IT(n):ET(()=>new Zh))}function dr(t,n,e){const i=Q(t)||n||e?{next:t,error:n,complete:e}:t;return i?kt((r,a)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let s=!0;r.subscribe(Zt(a,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),a.next(l)},()=>{var l;s=!1,null===(l=i.complete)||void 0===l||l.call(i),a.complete()},l=>{var c;s=!1,null===(c=i.error)||void 0===c||c.call(i,l),a.error(l)},()=>{var l,c;s&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Be}class Ao{constructor(n,e){this.id=n,this.url=e}}class Om extends Ao{constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bu extends Ao{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class VT extends Ao{constructor(n,e,i){super(n,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class A3 extends Ao{constructor(n,e,i){super(n,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class P3 extends Ao{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E3 extends Ao{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I3 extends Ao{constructor(n,e,i,r,a){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class V3 extends Ao{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class O3 extends Ao{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OT{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class NT{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class N3{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class F3{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class B3{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class L3{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FT{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const si="primary";class U3{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Hl(t){return new U3(t)}const BT="ngNavigationCancelingError";function Nm(t){const n=Error("NavigationCancelingError: "+t);return n[BT]=!0,n}function G3(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let a=0;a<i.length;a++){const o=i[a],s=t[a];if(o.startsWith(":"))r[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function ro(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!LT(t[r],n[r]))return!1;return!0}function LT(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,a)=>i[a]===r)}return t===n}function UT(t){return Array.prototype.concat.apply([],t)}function HT(t){return t.length>0?t[t.length-1]:null}function ir(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function ao(t){return tv(t)?t:jc(t)?Kn(Promise.resolve(t)):Nt(t)}const $3={exact:function jT(t,n,e){if(!Ms(t.segments,n.segments)||!ef(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!jT(t.children[i],n.children[i],e))return!1;return!0},subset:$T},GT={exact:function W3(t,n){return ro(t,n)},subset:function q3(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>LT(t[e],n[e]))},ignored:()=>!0};function zT(t,n,e){return $3[e.paths](t.root,n.root,e.matrixParams)&&GT[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function $T(t,n,e){return WT(t,n,n.segments,e)}function WT(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!Ms(r,e)||n.hasChildren()||!ef(r,e,i))}if(t.segments.length===e.length){if(!Ms(t.segments,e)||!ef(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!$T(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(Ms(t.segments,r)&&ef(t.segments,r,i)&&t.children[si])&&WT(t.children[si],n,a,i)}}function ef(t,n,e){return n.every((i,r)=>GT[e](t[r].parameters,i.parameters))}class ks{constructor(n,e,i){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hl(this.queryParams)),this._queryParamMap}toString(){return Q3.serialize(this)}}class gi{constructor(n,e){this.segments=n,this.children=e,this.parent=null,ir(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tf(this)}}class _u{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Hl(this.parameters)),this._parameterMap}toString(){return KT(this)}}function Ms(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}class qT{}class XT{parse(n){const e=new aB(n);return new ks(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${yu(n.root,!0)}`,i=function J3(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${nf(e)}=${nf(r)}`).join("&"):`${nf(e)}=${nf(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function K3(t){return encodeURI(t)}(n.fragment)}`:""}`}}const Q3=new XT;function tf(t){return t.segments.map(n=>KT(n)).join("/")}function yu(t,n){if(!t.hasChildren())return tf(t);if(n){const e=t.children[si]?yu(t.children[si],!1):"",i=[];return ir(t.children,(r,a)=>{a!==si&&i.push(`${a}:${yu(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Y3(t,n){let e=[];return ir(t.children,(i,r)=>{r===si&&(e=e.concat(n(i,r)))}),ir(t.children,(i,r)=>{r!==si&&(e=e.concat(n(i,r)))}),e}(t,(i,r)=>r===si?[yu(t.children[si],!1)]:[`${r}:${yu(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[si]?`${tf(t)}/${e[0]}`:`${tf(t)}/(${e.join("//")})`}}function YT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nf(t){return YT(t).replace(/%3B/gi,";")}function Fm(t){return YT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rf(t){return decodeURIComponent(t)}function QT(t){return rf(t.replace(/\+/g,"%20"))}function KT(t){return`${Fm(t.path)}${function Z3(t){return Object.keys(t).map(n=>`;${Fm(n)}=${Fm(t[n])}`).join("")}(t.parameters)}`}const eB=/^[^\/()?;=#]+/;function af(t){const n=t.match(eB);return n?n[0]:""}const tB=/^[^=?&#]+/,nB=/^[^&#]+/;class aB{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gi([],{}):new gi([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[si]=new gi(n,e)),i}parseSegment(){const n=af(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new _u(rf(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=af(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=af(this.remaining);r&&(i=r,this.capture(i))}n[rf(e)]=rf(i)}parseQueryParam(n){const e=function iB(t){const n=t.match(tB);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function rB(t){const n=t.match(nB);return n?n[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=QT(e),a=QT(i);if(n.hasOwnProperty(r)){let o=n[r];Array.isArray(o)||(o=[o],n[r]=o),o.push(a)}else n[r]=a}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=af(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;i.indexOf(":")>-1?(a=i.substr(0,i.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=si);const o=this.parseChildren();e[a]=1===Object.keys(o).length?o[si]:new gi([],o),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class ZT{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Bm(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=Bm(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Lm(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return Lm(n,this._root).map(e=>e.value)}}function Bm(t,n){if(t===n.value)return n;for(const e of n.children){const i=Bm(t,e);if(i)return i}return null}function Lm(t,n){if(t===n.value)return[n];for(const e of n.children){const i=Lm(t,e);if(i.length)return i.unshift(n),i}return[]}class Po{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Gl(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class JT extends ZT{constructor(n,e){super(n),this.snapshot=e,Um(this,n)}toString(){return this.snapshot.toString()}}function eD(t,n){const e=function oB(t,n){const o=new sf([],{},{},"",{},si,n,null,t.root,-1,{});return new iD("",new Po(o,[]))}(t,n),i=new pn([new _u("",{})]),r=new pn({}),a=new pn({}),o=new pn({}),s=new pn(""),l=new zl(i,r,o,s,a,si,n,e.root);return l.snapshot=e.root,new JT(new Po(l,[]),e)}class zl{constructor(n,e,i,r,a,o,s,l){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ht(n=>Hl(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ht(n=>Hl(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tD(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],a=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function sB(t){return t.reduce((n,e)=>({params:Object.assign(Object.assign({},n.params),e.params),data:Object.assign(Object.assign({},n.data),e.data),resolve:Object.assign(Object.assign({},n.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class sf{constructor(n,e,i,r,a,o,s,l,c,u,d){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class iD extends ZT{constructor(n,e){super(e),this.url=n,Um(this,e)}toString(){return nD(this._root)}}function Um(t,n){n.value._routerState=t,n.children.forEach(e=>Um(t,e))}function nD(t){const n=t.children.length>0?` { ${t.children.map(nD).join(", ")} } `:"";return`${t.value}${n}`}function Hm(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,ro(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),ro(n.params,e.params)||t.params.next(e.params),function z3(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!ro(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),ro(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Gm(t,n){const e=ro(t.params,n.params)&&function X3(t,n){return Ms(t,n)&&t.every((e,i)=>ro(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Gm(t.parent,n.parent))}function wu(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function cB(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return wu(t,i,r);return wu(t,i)})}(t,n,e);return new Po(i,r)}{if(t.shouldAttach(n.value)){const a=t.retrieve(n.value);if(null!==a){const o=a.route;return o.value._futureSnapshot=n.value,o.children=n.children.map(s=>wu(t,s)),o}}const i=function uB(t){return new zl(new pn(t.url),new pn(t.params),new pn(t.queryParams),new pn(t.fragment),new pn(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(a=>wu(t,a));return new Po(i,r)}}function lf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Cu(t){return"object"==typeof t&&null!=t&&t.outlets}function zm(t,n,e,i,r){let a={};return i&&ir(i,(o,s)=>{a[s]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new ks(e.root===t?n:rD(e.root,t,n),a,r)}function rD(t,n,e){const i={};return ir(t.children,(r,a)=>{i[a]=r===n?e:rD(r,n,e)}),new gi(t.segments,i)}class aD{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&lf(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Cu);if(r&&r!==HT(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jm{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function oD(t,n,e){if(t||(t=new gi([],{})),0===t.segments.length&&t.hasChildren())return cf(t,n,e);const i=function vB(t,n,e){let i=0,r=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return a;const o=t.segments[r],s=e[i];if(Cu(s))break;const l=`${s}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!lD(l,c,o))return a;i+=2}else{if(!lD(l,{},o))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const a=new gi(t.segments.slice(0,i.pathIndex),{});return a.children[si]=new gi(t.segments.slice(i.pathIndex),t.children),cf(a,0,r)}return i.match&&0===r.length?new gi(t.segments,{}):i.match&&!t.hasChildren()?$m(t,n,e):i.match?cf(t,0,r):$m(t,n,e)}function cf(t,n,e){if(0===e.length)return new gi(t.segments,{});{const i=function gB(t){return Cu(t[0])?t[0].outlets:{[si]:t}}(e),r={};return ir(i,(a,o)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[o]=oD(t.children[o],n,a))}),ir(t.children,(a,o)=>{void 0===i[o]&&(r[o]=a)}),new gi(t.segments,r)}}function $m(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const a=e[r];if(Cu(a)){const l=mB(a.outlets);return new gi(i,l)}if(0===r&&lf(e[0])){i.push(new _u(t.segments[n].path,sD(e[0]))),r++;continue}const o=Cu(a)?a.outlets[si]:`${a}`,s=r<e.length-1?e[r+1]:null;o&&s&&lf(s)?(i.push(new _u(o,sD(s))),r+=2):(i.push(new _u(o,{})),r++)}return new gi(i,{})}function mB(t){const n={};return ir(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=$m(new gi([],{}),0,e))}),n}function sD(t){const n={};return ir(t,(e,i)=>n[i]=`${e}`),n}function lD(t,n,e){return t==e.path&&ro(n,e.parameters)}class _B{constructor(n,e,i,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Hm(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=Gl(e);n.children.forEach(a=>{const o=a.value.outlet;this.deactivateRoutes(a,r[o],i),delete r[o]}),ir(r,(a,o)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(r===a)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(n,e,o.children)}else this.deactivateChildRoutes(n,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=Gl(n);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);if(i&&i.outlet){const o=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=Gl(n);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const r=Gl(e);n.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new L3(a.value.snapshot))}),n.children.length&&this.forwardEvent(new F3(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(Hm(r),r===a)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,o.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Hm(s.route.value),this.activateChildRoutes(n,null,o.children)}else{const s=function yB(t){for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(n,null,o.children)}}else this.activateChildRoutes(n,null,i)}}class Wm{constructor(n,e){this.routes=n,this.module=e}}function as(t){return"function"==typeof t}function As(t){return t instanceof ks}const Su=Symbol("INITIAL_VALUE");function Tu(){return Mo(t=>function Im(...t){const n=gc(t),e=hd(t),{args:i,keys:r}=DS(t);if(0===i.length)return Kn([],n);const a=new Le(function S3(t,n,e=Be){return i=>{kT(n,()=>{const{length:r}=t,a=new Array(r);let o=r,s=r;for(let l=0;l<r;l++)kT(n,()=>{const c=Kn(t[l],n);let u=!1;c.subscribe(Zt(i,d=>{a[l]=d,u||(u=!0,s--),s||i.next(e(a.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,n,r?o=>RS(r,o):Be));return e?a.pipe(um(e)):a}(t.map(n=>n.pipe(Zn(1),function Jh(...t){const n=gc(t);return kt((e,i)=>{(n?vu(t,e,n):vu(t,e)).subscribe(i)})}(Su)))).pipe(PT((n,e)=>{let i=!1;return e.reduce((r,a,o)=>r!==Su?r:(a===Su&&(i=!0),i||!1!==a&&o!==e.length-1&&!As(a)?r:a),n)},Su),tr(n=>n!==Su),Ht(n=>As(n)?n:!0===n),Zn(1)))}class RB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Du,this.attachRef=null}}class Du{constructor(){this.contexts=new Map}onChildOutletCreated(n,e){const i=this.getOrCreateContext(n);i.outlet=e,this.contexts.set(n,i)}onChildOutletDestroyed(n){const e=this.getContext(n);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let e=this.getContext(n);return e||(e=new RB,this.contexts.set(n,e)),e}getContext(n){return this.contexts.get(n)||null}}let qm=(()=>{class t{constructor(e,i,r,a,o){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ut,this.deactivateEvents=new ut,this.attachEvents=new ut,this.detachEvents=new ut,this.name=a||si,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,l=new xB(e,s,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(E(Du),E(ha),E(ys),function gs(t){return function ak(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const a=e[r];if(qb(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(a===n)return e[r+1];r+=2}}}return null}(zn(),t)}("name"),E(Wr))},t.\u0275dir=We({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class xB{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===zl?this.route:n===Du?this.childContexts:this.parent.get(n,e)}}let cD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=bt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&D(0,"router-outlet")},directives:[qm],encapsulation:2}),t})();function uD(t,n=""){for(let e=0;e<t.length;e++){const i=t[e];kB(i,MB(n,i))}}function kB(t,n){t.children&&uD(t.children,n)}function MB(t,n){return n?t||n.path?t&&!n.path?`${t}/`:!t&&n.path?n.path:`${t}/${n.path}`:"":t}function Xm(t){const n=t.children&&t.children.map(Xm),e=n?Object.assign(Object.assign({},t),{children:n}):Object.assign({},t);return!e.component&&(n||e.loadChildren)&&e.outlet&&e.outlet!==si&&(e.component=cD),e}function va(t){return t.outlet||si}function dD(t,n){const e=t.filter(i=>va(i)===n);return e.push(...t.filter(i=>va(i)!==n)),e}const hD={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function uf(t,n,e){var i;if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},hD):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(n.matcher||G3)(e,t,n);if(!a)return Object.assign({},hD);const o={};ir(a.posParams,(l,c)=>{o[c]=l.path});const s=a.consumed.length>0?Object.assign(Object.assign({},o),a.consumed[a.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:s,positionalParamSegments:null!==(i=a.posParams)&&void 0!==i?i:{}}}function df(t,n,e,i,r="corrected"){if(e.length>0&&function EB(t,n,e){return e.some(i=>hf(t,n,i)&&va(i)!==si)}(t,e,i)){const o=new gi(n,function PB(t,n,e,i){const r={};r[si]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const a of e)if(""===a.path&&va(a)!==si){const o=new gi([],{});o._sourceSegment=t,o._segmentIndexShift=n.length,r[va(a)]=o}return r}(t,n,i,new gi(e,t.children)));return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function IB(t,n,e){return e.some(i=>hf(t,n,i))}(t,e,i)){const o=new gi(t.segments,function AB(t,n,e,i,r,a){const o={};for(const s of i)if(hf(t,e,s)&&!r[va(s)]){const l=new gi([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===a?t.segments.length:n.length,o[va(s)]=l}return Object.assign(Object.assign({},r),o)}(t,n,e,i,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:e}}const a=new gi(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:e}}function hf(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function fD(t,n,e,i){return!!(va(t)===i||i!==si&&hf(n,e,t))&&("**"===t.path||uf(n,t,e).matched)}function pD(t,n,e){return 0===n.length&&!t.children[e]}class Ru{constructor(n){this.segmentGroup=n||null}}class gD{constructor(n){this.urlTree=n}}function ff(t){return new Le(n=>n.error(new Ru(t)))}function vD(t){return new Le(n=>n.error(new gD(t)))}function VB(t){return new Le(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class FB{constructor(n,e,i,r,a){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=n.get(Ro)}apply(){const n=df(this.urlTree.root,[],[],this.config).segmentGroup,e=new gi(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,e,si).pipe(Ht(a=>this.createUrlTree(Ym(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rs(a=>{if(a instanceof gD)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Ru?this.noMatchError(a):a}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,si).pipe(Ht(r=>this.createUrlTree(Ym(r),n.queryParams,n.fragment))).pipe(rs(r=>{throw r instanceof Ru?this.noMatchError(r):r}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,e,i){const r=n.segments.length>0?new gi([],{[si]:n}):n;return new ks(r,e,i)}expandSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(Ht(a=>new gi([],a))):this.expandSegment(n,i,e,i.segments,r,!0)}expandChildren(n,e,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return Kn(r).pipe(mu(a=>{const o=i.children[a],s=dD(e,a);return this.expandSegmentGroup(n,s,o,a).pipe(Ht(l=>({segment:l,outlet:a})))}),PT((a,o)=>(a[o.outlet]=o.segment,a),{}),function k3(t,n){const e=arguments.length>=2;return i=>i.pipe(t?tr((r,a)=>t(r,a,i)):Be,Vm(1),e?IT(n):ET(()=>new Zh))}())}expandSegment(n,e,i,r,a,o){return Kn(i).pipe(mu(s=>this.expandSegmentAgainstRoute(n,e,i,s,r,a,o).pipe(rs(c=>{if(c instanceof Ru)return Nt(null);throw c}))),Ul(s=>!!s),rs((s,l)=>{if(s instanceof Zh||"EmptyError"===s.name){if(pD(e,r,a))return Nt(new gi([],{}));throw new Ru(e)}throw s}))}expandSegmentAgainstRoute(n,e,i,r,a,o,s){return fD(r,e,a,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,e,r,a,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o):ff(e):ff(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?vD(a):this.lineralizeSegments(i,a).pipe(Rn(o=>{const s=new gi(o,{});return this.expandSegment(n,s,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o){const{matched:s,consumedSegments:l,lastChild:c,positionalParamSegments:u}=uf(e,r,a);if(!s)return ff(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?vD(d):this.lineralizeSegments(r,d).pipe(Rn(v=>this.expandSegment(n,e,i,v.concat(a.slice(c)),o,!1)))}matchSegmentAgainstRoute(n,e,i,r,a){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Nt(i._loadedConfig):this.configLoader.load(n.injector,i)).pipe(Ht(v=>(i._loadedConfig=v,new gi(r,{})))):Nt(new gi(r,{}));const{matched:o,consumedSegments:s,lastChild:l}=uf(e,i,r);if(!o)return ff(e);const c=r.slice(l);return this.getChildConfig(n,i,r).pipe(Rn(d=>{const v=d.module,m=d.routes,{segmentGroup:_,slicedSegments:w}=df(e,s,c,m),S=new gi(_.segments,_.children);if(0===w.length&&S.hasChildren())return this.expandChildren(v,m,S).pipe(Ht(L=>new gi(s,L)));if(0===m.length&&0===w.length)return Nt(new gi(s,{}));const k=va(i)===a;return this.expandSegment(v,S,m,w,k?si:a,!0).pipe(Ht(R=>new gi(s.concat(R.segments),R.children)))}))}getChildConfig(n,e,i){return e.children?Nt(new Wm(e.children,n)):e.loadChildren?void 0!==e._loadedConfig?Nt(e._loadedConfig):this.runCanLoadGuards(n.injector,e,i).pipe(Rn(r=>r?this.configLoader.load(n.injector,e).pipe(Ht(a=>(e._loadedConfig=a,a))):function OB(t){return new Le(n=>n.error(Nm(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Nt(new Wm([],n))}runCanLoadGuards(n,e,i){const r=e.canLoad;return r&&0!==r.length?Nt(r.map(o=>{const s=n.get(o);let l;if(function CB(t){return t&&as(t.canLoad)}(s))l=s.canLoad(e,i);else{if(!as(s))throw new Error("Invalid CanLoad guard");l=s(e,i)}return ao(l)})).pipe(Tu(),dr(o=>{if(!As(o))return;const s=Nm(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw s.url=o,s}),Ht(o=>!0===o)):Nt(!0)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Nt(i);if(r.numberOfChildren>1||!r.children[si])return VB(n.redirectTo);r=r.children[si]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreatreUrlTree(n,e,i,r){const a=this.createSegmentGroup(n,e.root,i,r);return new ks(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return ir(n,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const s=r.substring(1);i[a]=e[s]}else i[a]=r}),i}createSegmentGroup(n,e,i,r){const a=this.createSegments(n,e.segments,i,r);let o={};return ir(e.children,(s,l)=>{o[l]=this.createSegmentGroup(n,s,i,r)}),new gi(a,o)}createSegments(n,e,i,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(n,a,r):this.findOrReturn(a,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${n}'. Cannot find '${e.path}'.`);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}function Ym(t){const n={};for(const i of Object.keys(t.children)){const a=Ym(t.children[i]);(a.segments.length>0||a.hasChildren())&&(n[i]=a)}return function BB(t){if(1===t.numberOfChildren&&t.children[si]){const n=t.children[si];return new gi(t.segments.concat(n.segments),n.children)}return t}(new gi(t.segments,n))}class mD{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class pf{constructor(n,e){this.component=n,this.route=e}}function UB(t,n,e){const i=t._root;return xu(i,n?n._root:null,e,[i.value])}function gf(t,n,e){const i=function GB(t){if(!t)return null;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(i?i.module.injector:e).get(t)}function xu(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=Gl(n);return t.children.forEach(o=>{(function zB(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,o=n?n.value:null,s=e?e.getContext(t.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){const l=function jB(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Ms(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Ms(t.url,n.url)||!ro(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gm(t,n)||!ro(t.queryParams,n.queryParams);default:return!Gm(t,n)}}(o,a,a.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new mD(i)):(a.data=o.data,a._resolvedData=o._resolvedData),xu(t,n,a.component?s?s.children:null:e,i,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new pf(s.outlet.component,o))}else o&&ku(n,s,r),r.canActivateChecks.push(new mD(i)),xu(t,null,a.component?s?s.children:null:e,i,r)})(o,a[o.value.outlet],e,i.concat([o.value]),r),delete a[o.value.outlet]}),ir(a,(o,s)=>ku(o,e.getContext(s),r)),r}function ku(t,n,e){const i=Gl(t),r=t.value;ir(i,(a,o)=>{ku(a,r.component?n?n.children.getContext(o):null:n,e)}),e.canDeactivateChecks.push(new pf(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}class JB{}function bD(t){return new Le(n=>n.error(t))}class t5{constructor(n,e,i,r,a,o){this.rootComponentType=n,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}recognize(){const n=df(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,n,si);if(null===e)return null;const i=new sf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},si,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Po(i,e),a=new iD(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(n){const e=n.value,i=tD(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(n,e):this.processSegment(n,e,e.segments,i)}processChildren(n,e){const i=[];for(const a of Object.keys(e.children)){const o=e.children[a],s=dD(n,a),l=this.processSegmentGroup(s,o,a);if(null===l)return null;i.push(...l)}const r=_D(i);return function i5(t){t.sort((n,e)=>n.value.outlet===si?-1:e.value.outlet===si?1:n.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(n,e,i,r){for(const a of n){const o=this.processSegmentAgainstRoute(a,e,i,r);if(null!==o)return o}return pD(e,i,r)?[]:null}processSegmentAgainstRoute(n,e,i,r){if(n.redirectTo||!fD(n,e,i,r))return null;let a,o=[],s=[];if("**"===n.path){const m=i.length>0?HT(i).parameters:{};a=new sf(i,m,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,CD(n),va(n),n.component,n,yD(e),wD(e)+i.length,SD(n))}else{const m=uf(e,n,i);if(!m.matched)return null;o=m.consumedSegments,s=i.slice(m.lastChild),a=new sf(o,m.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,CD(n),va(n),n.component,n,yD(e),wD(e)+o.length,SD(n))}const l=function n5(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(n),{segmentGroup:c,slicedSegments:u}=df(e,o,s,l.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const m=this.processChildren(l,c);return null===m?null:[new Po(a,m)]}if(0===l.length&&0===u.length)return[new Po(a,[])];const d=va(n)===r,v=this.processSegment(l,c,u,d?si:r);return null===v?null:[new Po(a,v)]}}function r5(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function _D(t){const n=[],e=new Set;for(const i of t){if(!r5(i)){n.push(i);continue}const r=n.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=_D(i.children);n.push(new Po(i.value,r))}return n.filter(i=>!e.has(i))}function yD(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function wD(t){let n=t,e=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift?n._segmentIndexShift:0;return e-1}function CD(t){return t.data||{}}function SD(t){return t.resolve||{}}function TD(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Qm(t){return Mo(n=>{const e=t(n);return e?Kn(e).pipe(Ht(()=>n)):Nt(n)})}class h5 extends class d5{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}{}const Km=new ti("ROUTES");class DD{constructor(n,e,i,r){this.injector=n,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(n,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(Ht(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=a.create(n);return new Wm(UT(o.injector.get(Km,void 0,Gt.Self|Gt.Optional)).map(Xm),o)}),rs(a=>{throw e._loader$=void 0,a}));return e._loader$=new D3(r,()=>new ye).pipe(AT()),e._loader$}loadModuleFactory(n){return ao(n()).pipe(Rn(e=>e instanceof Hw?Nt(e):Kn(this.compiler.compileModuleAsync(e))))}}class p5{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,e){return n}}function g5(t){throw t}function v5(t,n,e){return n.parse("/")}function RD(t,n){return Nt(null)}const m5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},b5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qr=(()=>{class t{constructor(e,i,r,a,o,s,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=a,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ye,this.errorHandler=g5,this.malformedUriErrorHandler=v5,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:RD,afterPreactivation:RD},this.urlHandlingStrategy=new p5,this.routeReuseStrategy=new h5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Ro),this.console=o.get(SC);const d=o.get(Xi);this.isNgZoneEnabled=d instanceof Xi&&Xi.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function j3(){return new ks(new gi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new DD(o,s,v=>this.triggerEvent(new OT(v)),v=>this.triggerEvent(new NT(v))),this.routerState=eD(this.currentUrlTree,this.rootComponentType),this.transitions=new pn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(tr(r=>0!==r.id),Ht(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Mo(r=>{let a=!1,o=!1;return Nt(r).pipe(dr(s=>{this.currentNavigation={id:s.id,initialUrl:s.currentRawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Mo(s=>{const l=this.browserUrlTree.toString(),c=!this.navigated||s.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return vf(s.source)&&(this.browserUrlTree=s.extractedUrl),Nt(s).pipe(Mo(d=>{const v=this.transitions.getValue();return i.next(new Om(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),v!==this.transitions.getValue()?wa:Promise.resolve(d)}),function LB(t,n,e,i){return Mo(r=>function NB(t,n,e,i,r){return new FB(t,n,e,i,r).apply()}(t,n,e,r.extractedUrl,i).pipe(Ht(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),dr(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function a5(t,n,e,i,r){return Rn(a=>function e5(t,n,e,i,r="emptyOnly",a="legacy"){try{const o=new t5(t,n,e,i,r,a).recognize();return null===o?bD(new JB):Nt(o)}catch(o){return bD(o)}}(t,n,a.urlAfterRedirects,e(a.urlAfterRedirects),i,r).pipe(Ht(o=>Object.assign(Object.assign({},a),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),dr(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const m=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(m,d)}this.browserUrlTree=d.urlAfterRedirects}const v=new P3(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(v)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:v,extractedUrl:m,source:_,restoredState:w,extras:S}=s,k=new Om(v,this.serializeUrl(m),_,w);i.next(k);const T=eD(m,this.rootComponentType).snapshot;return Nt(Object.assign(Object.assign({},s),{targetSnapshot:T,urlAfterRedirects:m,extras:Object.assign(Object.assign({},S),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=s.rawUrl,s.resolve(null),wa}),Qm(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:v,replaceUrl:m}}=s;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!v,replaceUrl:!!m})}),dr(s=>{const l=new E3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(l)}),Ht(s=>Object.assign(Object.assign({},s),{guards:UB(s.targetSnapshot,s.currentSnapshot,this.rootContexts)})),function $B(t,n){return Rn(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:o}}=e;return 0===o.length&&0===a.length?Nt(Object.assign(Object.assign({},e),{guardsResult:!0})):function WB(t,n,e,i){return Kn(t).pipe(Rn(r=>function ZB(t,n,e,i,r){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?Nt(a.map(s=>{const l=gf(s,n,r);let c;if(function DB(t){return t&&as(t.canDeactivate)}(l))c=ao(l.canDeactivate(t,n,e,i));else{if(!as(l))throw new Error("Invalid CanDeactivate guard");c=ao(l(t,n,e,i))}return c.pipe(Ul())})).pipe(Tu()):Nt(!0)}(r.component,r.route,e,n,i)),Ul(r=>!0!==r,!0))}(o,i,r,t).pipe(Rn(s=>s&&function wB(t){return"boolean"==typeof t}(s)?function qB(t,n,e,i){return Kn(n).pipe(mu(r=>vu(function YB(t,n){return null!==t&&n&&n(new N3(t)),Nt(!0)}(r.route.parent,i),function XB(t,n){return null!==t&&n&&n(new B3(t)),Nt(!0)}(r.route,i),function KB(t,n,e){const i=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(o=>function HB(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(o)).filter(o=>null!==o).map(o=>MT(()=>Nt(o.guards.map(l=>{const c=gf(l,o.node,e);let u;if(function TB(t){return t&&as(t.canActivateChild)}(c))u=ao(c.canActivateChild(i,t));else{if(!as(c))throw new Error("Invalid CanActivateChild guard");u=ao(c(i,t))}return u.pipe(Ul())})).pipe(Tu())));return Nt(a).pipe(Tu())}(t,r.path,e),function QB(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return Nt(!0);const r=i.map(a=>MT(()=>{const o=gf(a,n,e);let s;if(function SB(t){return t&&as(t.canActivate)}(o))s=ao(o.canActivate(n,t));else{if(!as(o))throw new Error("Invalid CanActivate guard");s=ao(o(n,t))}return s.pipe(Ul())}));return Nt(r).pipe(Tu())}(t,r.route,e))),Ul(r=>!0!==r,!0))}(i,a,t,n):Nt(s)),Ht(s=>Object.assign(Object.assign({},e),{guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),dr(s=>{if(As(s.guardsResult)){const c=Nm(`Redirecting to "${this.serializeUrl(s.guardsResult)}"`);throw c.url=s.guardsResult,c}const l=new I3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(l)}),tr(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,""),!1)),Qm(s=>{if(s.guards.canActivateChecks.length)return Nt(s).pipe(dr(l=>{const c=new V3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Mo(l=>{let c=!1;return Nt(l).pipe(function o5(t,n){return Rn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Nt(e);let a=0;return Kn(r).pipe(mu(o=>function s5(t,n,e,i){return function l5(t,n,e,i){const r=TD(t);if(0===r.length)return Nt({});const a={};return Kn(r).pipe(Rn(o=>function c5(t,n,e,i){const r=gf(t,n,i);return ao(r.resolve?r.resolve(n,e):r(n,e))}(t[o],n,e,i).pipe(dr(s=>{a[o]=s}))),Vm(1),Rn(()=>TD(a).length===r.length?Nt(a):wa))}(t._resolve,t,n,i).pipe(Ht(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),tD(t,e).resolve),null)))}(o.route,i,t,n)),dr(()=>a++),Vm(1),Rn(o=>a===r.length?Nt(e):wa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),dr({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),dr(l=>{const c=new O3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Qm(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:v,replaceUrl:m}}=s;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!v,replaceUrl:!!m})}),Ht(s=>{const l=function lB(t,n,e){const i=wu(t,n._root,e?e._root:void 0);return new JT(i,n)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return Object.assign(Object.assign({},s),{targetRouterState:l})}),dr(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((t,n,e)=>Ht(i=>(new _B(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),dr({next(){a=!0},complete(){a=!0}}),function M3(t){return kt((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}(()=>{var s;a||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(s=this.currentNavigation)||void 0===s?void 0:s.id)===r.id&&(this.currentNavigation=null)}),rs(s=>{if(o=!0,function H3(t){return t&&t[BT]}(s)){const l=As(s.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new VT(r.id,this.serializeUrl(r.extractedUrl),s.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vf(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new A3(r.id,this.serializeUrl(r.extractedUrl),s);i.next(l);try{r.resolve(this.errorHandler(s))}catch(c){r.reject(c)}}return wa}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const a={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const s=this.parseUrl(e.url);this.scheduleNavigation(s,i,o,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){uD(e),this.config=e.map(Xm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:a,fragment:o,queryParamsHandling:s,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(s){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}return null!==d&&(d=this.removeEmptyProps(d)),function dB(t,n,e,i,r){if(0===e.length)return zm(n.root,n.root,n,i,r);const a=function hB(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new aD(!0,0,t);let n=0,e=!1;const i=t.reduce((r,a,o)=>{if("object"==typeof a&&null!=a){if(a.outlets){const s={};return ir(a.outlets,(l,c)=>{s[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:s}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===o?(a.split("/").forEach((s,l)=>{0==l&&"."===s||(0==l&&""===s?e=!0:".."===s?n++:""!=s&&r.push(s))}),r):[...r,a]},[]);return new aD(e,n,i)}(e);if(a.toRoot())return zm(n.root,new gi([],{}),n,i,r);const o=function fB(t,n,e){if(t.isAbsolute)return new jm(n.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new jm(a,a===n.root,0)}const i=lf(t.commands[0])?0:1;return function pB(t,n,e){let i=t,r=n,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new jm(i,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,n,t),s=o.processChildren?cf(o.segmentGroup,o.index,a.commands):oD(o.segmentGroup,o.index,a.commands);return zm(o.segmentGroup,s,n,i,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=As(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function _5(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},m5):!1===i?Object.assign({},b5):i,As(e))return zT(this.currentUrlTree,e,r);const a=this.parseUrl(e);return zT(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const a=e[r];return null!=a&&(i[r]=a),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new bu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,a,o){var s,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=vf(i)&&u&&!vf(u.source),v=u.rawUrl.toString()===e.toString(),m=u.id===(null===(s=this.currentNavigation)||void 0===s?void 0:s.id);if(d&&v&&m)return Promise.resolve(!0);let w,S,k;o?(w=o.resolve,S=o.reject,k=o.promise):k=new Promise((L,W)=>{w=L,S=W});const T=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),R=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):R=0,this.setTransition({id:T,targetPageId:R,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:w,reject:S,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(L=>Promise.reject(L))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,i=!1){var r,a;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new VT(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){Kg()},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function vf(t){return"imperative"!==t}class xD{}class kD{preload(n,e){return Nt(null)}}let MD=(()=>{class t{constructor(e,i,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new DD(r,i,l=>e.triggerEvent(new OT(l)),l=>e.triggerEvent(new NT(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(tr(e=>e instanceof bu),mu(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Ro);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const a of i)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return Kn(r).pipe(pc(),Ht(a=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Nt(i._loadedConfig):this.loader.load(e.injector,i)).pipe(Rn(a=>(i._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Ue(qr),Ue(_h),Ue(kn),Ue(xD))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),e0=(()=>{class t{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Om?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof bu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof FT&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new FT(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){Kg()},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Ps=new ti("ROUTER_CONFIGURATION"),AD=new ti("ROUTER_FORROOT_GUARD"),S5=[jv,{provide:qT,useClass:XT},{provide:qr,useFactory:function k5(t,n,e,i,r,a,o={},s,l){const c=new qr(null,t,n,e,i,r,UT(a));return s&&(c.urlHandlingStrategy=s),l&&(c.routeReuseStrategy=l),function M5(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(n.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(n.canceledNavigationResolution=t.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,v;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(v=console.groupEnd)||void 0===v||v.call(console)}),c},deps:[qT,Du,jv,kn,_h,Km,Ps,[class f5{},new Xa],[class u5{},new Xa]]},Du,{provide:zl,useFactory:function A5(t){return t.routerState.root},deps:[qr]},MD,kD,class C5{preload(n,e){return e().pipe(rs(()=>Nt(null)))}},{provide:Ps,useValue:{enableTracing:!1}}];function T5(){return new MC("Router",qr)}let PD=(()=>{class t{constructor(e,i){}static forRoot(e,i){return{ngModule:t,providers:[S5,ED(e),{provide:AD,useFactory:x5,deps:[[qr,new Xa,new ol]]},{provide:Ps,useValue:i||{}},{provide:Nl,useFactory:R5,deps:[Ss,[new Pc(zv),new Xa],Ps]},{provide:e0,useFactory:D5,deps:[qr,ON,Ps]},{provide:xD,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:kD},{provide:MC,multi:!0,useFactory:T5},[t0,{provide:mh,multi:!0,useFactory:P5,deps:[t0]},{provide:ID,useFactory:E5,deps:[t0]},{provide:CC,multi:!0,useExisting:ID}]]}}static forChild(e){return{ngModule:t,providers:[ED(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Ue(AD,8),Ue(qr,8))},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({}),t})();function D5(t,n,e){return e.scrollOffset&&n.setOffset(e.scrollOffset),new e0(t,n,e)}function R5(t,n,e={}){return e.useHash?new _O(t,n):new YC(t,n)}function x5(t){return"guarded"}function ED(t){return[{provide:uk,multi:!0,useValue:t},{provide:Km,multi:!0,useValue:t}]}let t0=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ye}appInitializer(){return this.injector.get(vO,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(s=>i=s),a=this.injector.get(qr),o=this.injector.get(Ps);return"disabled"===o.initialNavigation?(a.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Nt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),a.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(Ps),r=this.injector.get(MD),a=this.injector.get(e0),o=this.injector.get(qr),s=this.injector.get(ws);e===s.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),a.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(Ue(kn))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function P5(t){return t.appInitializer.bind(t)}function E5(t){return t.bootstrapListener.bind(t)}const ID=new ti("Router Initializer"),V5=[];let O5=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[PD.forRoot(V5)],PD]}),t})();function VD(t,n,e,i,r,a,o){try{var s=t[a](o),l=s.value}catch(c){return void e(c)}s.done?n(l):Promise.resolve(l).then(i,r)}function Vr(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var a=t.apply(n,e);function o(l){VD(a,i,r,o,s,"next",l)}function s(l){VD(a,i,r,o,s,"throw",l)}o(void 0)})}}var ii=(()=>{return(t=ii||(ii={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",ii;var t})();const Cr=new class N5{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(n){this._typeMetadatas.has(n.target)||this._typeMetadatas.set(n.target,new Map),this._typeMetadatas.get(n.target).set(n.propertyName,n)}addTransformMetadata(n){this._transformMetadatas.has(n.target)||this._transformMetadatas.set(n.target,new Map),this._transformMetadatas.get(n.target).has(n.propertyName)||this._transformMetadatas.get(n.target).set(n.propertyName,[]),this._transformMetadatas.get(n.target).get(n.propertyName).push(n)}addExposeMetadata(n){this._exposeMetadatas.has(n.target)||this._exposeMetadatas.set(n.target,new Map),this._exposeMetadatas.get(n.target).set(n.propertyName,n)}addExcludeMetadata(n){this._excludeMetadatas.has(n.target)||this._excludeMetadatas.set(n.target,new Map),this._excludeMetadatas.get(n.target).set(n.propertyName,n)}findTransformMetadatas(n,e,i){return this.findMetadatas(this._transformMetadatas,n,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?i===ii.CLASS_TO_CLASS||i===ii.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||i===ii.CLASS_TO_PLAIN))}findExcludeMetadata(n,e){return this.findMetadata(this._excludeMetadatas,n,e)}findExposeMetadata(n,e){return this.findMetadata(this._exposeMetadatas,n,e)}findExposeMetadataByCustomName(n,e){return this.getExposedMetadatas(n).find(i=>i.options&&i.options.name===e)}findTypeMetadata(n,e){return this.findMetadata(this._typeMetadatas,n,e)}getStrategy(n){const e=this._excludeMetadatas.get(n),i=e&&e.get(void 0),r=this._exposeMetadatas.get(n),a=r&&r.get(void 0);return i&&a||!i&&!a?"none":i?"excludeAll":"exposeAll"}getExposedMetadatas(n){return this.getMetadata(this._exposeMetadatas,n)}getExcludedMetadatas(n){return this.getMetadata(this._excludeMetadatas,n)}getExposedProperties(n,e){return this.getExposedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===ii.CLASS_TO_CLASS||e===ii.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===ii.CLASS_TO_PLAIN)).map(i=>i.propertyName)}getExcludedProperties(n,e){return this.getExcludedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===ii.CLASS_TO_CLASS||e===ii.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===ii.CLASS_TO_PLAIN)).map(i=>i.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(n,e){const i=n.get(e);let r;i&&(r=Array.from(i.values()).filter(o=>void 0!==o.propertyName));const a=[];for(const o of this.getAncestors(e)){const s=n.get(o);if(s){const l=Array.from(s.values()).filter(c=>void 0!==c.propertyName);a.push(...l)}}return a.concat(r||[])}findMetadata(n,e,i){const r=n.get(e);if(r){const a=r.get(i);if(a)return a}for(const a of this.getAncestors(e)){const o=n.get(a);if(o){const s=o.get(i);if(s)return s}}}findMetadatas(n,e,i){const r=n.get(e);let a;r&&(a=r.get(i));const o=[];for(const s of this.getAncestors(e)){const l=n.get(s);l&&l.has(i)&&o.push(...l.get(i))}return o.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(n){if(!n)return[];if(!this._ancestorsMap.has(n)){const e=[];for(let i=Object.getPrototypeOf(n.prototype.constructor);void 0!==i.prototype;i=Object.getPrototypeOf(i.prototype.constructor))e.push(i);this._ancestorsMap.set(n,e)}return this._ancestorsMap.get(n)}};function st(t,n={}){return function(e,i){const r=Reflect.getMetadata("design:type",e,i);Cr.addTypeMetadata({target:e.constructor,propertyName:i,reflectedType:r,typeFunction:t,options:n})}}var H=(()=>{return(t=H||(H={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",t[t.Warthog=13]="Warthog",t[t.Whale=14]="Whale",H;var t})(),j=(()=>{return(t=j||(j={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",j;var t})();class ie{constructor(n,e,i){this.name=n,this.amount=e,void 0!==i&&(this.itemType=i)}makeCopy(n){var e=new ie("",0);return e.name=JSON.parse(JSON.stringify(n.name)),e.amount=JSON.parse(JSON.stringify(n.amount)),e.itemType=JSON.parse(JSON.stringify(n.itemType)),e}}var U=(()=>{return(t=U||(U={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",t[t.Other=8]="Other",t[t.Consumable=9]="Consumable",U;var t})();class oo{constructor(){this.totalRewards=0,this.rewardsObtained=0,this.rewards=[]}}je([st(()=>ie),Je("design:type",Array)],oo.prototype,"rewards",void 0);class $l{constructor(){this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.noviceTrack=new oo,this.noviceTrack.totalRewards=12;var n=50;this.noviceTrack.rewards.push(new ie("Coins",n,U.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",1,U.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,U.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",1,U.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,U.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",1,U.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,U.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",1,U.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,U.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",1,U.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,U.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",1,U.Other)),this.intermediateTrack=new oo,this.intermediateTrack.totalRewards=12,this.intermediateTrack.rewards.push(new ie("Coins",200,U.Resources)),this.intermediateTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",2,U.Other)),this.intermediateTrack.rewards.push(new ie("Medals",1,U.Resources)),this.intermediateTrack.rewards.push(new ie("Diminishing Returns per Facility Level",2,U.Other)),this.intermediateTrack.rewards.push(new ie("Training Time Reduction",1,U.Other)),this.intermediateTrack.rewards.push(new ie("Bonus Breed XP Gain From Circuit Races",5,U.Other)),this.intermediateTrack.rewards.push(new ie("Coins",200,U.Resources)),this.intermediateTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",1,U.Other)),this.intermediateTrack.rewards.push(new ie("Medals",1,U.Resources)),this.intermediateTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",2,U.Other)),this.intermediateTrack.rewards.push(new ie("Training Time Reduction",1,U.Other)),this.intermediateTrack.rewards.push(new ie("Diminishing Returns per Facility Level",3,U.Other)),this.masterTrack=new oo,this.masterTrack.totalRewards=12,this.masterTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",5,U.Other)),this.masterTrack.rewards.push(new ie("Diminishing Returns per Facility Level",2,U.Other)),this.masterTrack.rewards.push(new ie("Training Time Reduction",1,U.Other)),this.masterTrack.rewards.push(new ie("Coins",1e3,U.Resources)),this.masterTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",3,U.Other)),this.masterTrack.rewards.push(new ie("Bonus Talents",2,U.Other)),this.masterTrack.rewards.push(new ie("Training Time Reduction",1,U.Other)),this.masterTrack.rewards.push(new ie("Coins",1e3,U.Resources)),this.masterTrack.rewards.push(new ie("Orb Pendant",1,U.Other)),this.masterTrack.rewards.push(new ie("Diminishing Returns per Facility Level",3,U.Other)),this.masterTrack.rewards.push(new ie("Training Time Reduction",1,U.Other)),this.masterTrack.rewards.push(new ie("Bonus Talents",3,U.Other))}getTotalRewardCount(){return this.noviceTrack.totalRewards+this.intermediateTrack.totalRewards+this.masterTrack.totalRewards}getTotalRewardsObtained(){return this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalRewardsRemaining(){return this.getTotalRewardCount()-this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalTrainingTrackBonusBreedXpFromFreeRaces(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=4&&(n+=this.noviceTrack.rewards[3].amount),this.noviceTrack.rewardsObtained>=8&&(n+=this.noviceTrack.rewards[7].amount),this.noviceTrack.rewardsObtained>=12&&(n+=this.noviceTrack.rewards[11].amount),this.intermediateTrack.rewardsObtained>=8&&(n+=this.intermediateTrack.rewards[7].amount),this.masterTrack.rewardsObtained>=1&&(n+=this.masterTrack.rewards[0].amount),n)}getTotalTrainingTrackBonusBreedXpFromCircuitRaces(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=6&&(n+=this.intermediateTrack.rewards[5].amount),n)}getTotalTrainingTrackBonusBreedXpFromTraining(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=2&&(n+=this.noviceTrack.rewards[1].amount),this.noviceTrack.rewardsObtained>=6&&(n+=this.noviceTrack.rewards[5].amount),this.noviceTrack.rewardsObtained>=10&&(n+=this.noviceTrack.rewards[9].amount),this.intermediateTrack.rewardsObtained>=2&&(n+=this.intermediateTrack.rewards[1].amount),this.intermediateTrack.rewardsObtained>=10&&(n+=this.intermediateTrack.rewards[9].amount),this.masterTrack.rewardsObtained>=5&&(n+=this.masterTrack.rewards[4].amount),n)}getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=4&&(n+=this.intermediateTrack.rewards[3].amount),this.intermediateTrack.rewardsObtained>=12&&(n+=this.intermediateTrack.rewards[11].amount),this.masterTrack.rewardsObtained>=2&&(n+=this.masterTrack.rewards[1].amount),this.masterTrack.rewardsObtained>=10&&(n+=this.masterTrack.rewards[9].amount),n)}getTotalTrainingTrackBonusTrainingTimeReduction(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=5&&(n+=this.intermediateTrack.rewards[4].amount),this.intermediateTrack.rewardsObtained>=11&&(n+=this.intermediateTrack.rewards[10].amount),this.masterTrack.rewardsObtained>=3&&(n+=this.masterTrack.rewards[2].amount),this.masterTrack.rewardsObtained>=7&&(n+=this.masterTrack.rewards[6].amount),this.masterTrack.rewardsObtained>=11&&(n+=this.masterTrack.rewards[10].amount),n)}getTotalTrainingTrackBonusTalents(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.masterTrack.rewardsObtained>=6&&(n+=this.masterTrack.rewards[5].amount),this.masterTrack.rewardsObtained>=12&&(n+=this.masterTrack.rewards[11].amount),n)}}je([st(()=>oo),Je("design:type",oo)],$l.prototype,"noviceTrack",void 0),je([st(()=>oo),Je("design:type",oo)],$l.prototype,"intermediateTrack",void 0),je([st(()=>oo),Je("design:type",oo)],$l.prototype,"masterTrack",void 0);class Ve{constructor(n,e,i,r,a,o){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=1,this.diminishingReturnsDefaultStatThreshold=20,void 0!==n&&(this.topSpeed=n),void 0!==e&&(this.acceleration=e),void 0!==i&&(this.endurance=i),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==o&&(this.adaptability=o)}makeCopy(n){var e=new Ve;return e.topSpeed=n.topSpeed,e.acceleration=n.acceleration,e.endurance=n.endurance,e.power=n.power,e.focus=n.focus,e.adaptability=n.adaptability,e.stamina=n.stamina,e.maxSpeedMs=n.maxSpeedMs,e.accelerationMs=n.accelerationMs,e.powerMs=n.powerMs,e.focusMs=n.focusMs,e.adaptabilityMs=n.adaptabilityMs,e.burstChance=n.burstChance,e.burstDistance=n.burstDistance,e}calculateStamina(n,e,i){return null==n&&(n=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.endurance<=e?this.endurance*n*i:(e*n+(this.endurance-e)*(n*this.calculateDiminishingReturns(this.endurance-e)))*i}calculateMaxSpeed(n,e,i){return null==n&&(n=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.topSpeed<=e?this.topSpeed*n*i:(e*n+(this.topSpeed-e)*(n*this.calculateDiminishingReturns(this.topSpeed-e)))*i}calculateTrueAcceleration(n,e,i){return null==n&&(n=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.acceleration<=e?this.acceleration*n*i:(e*n+(this.acceleration-e)*(n*this.calculateDiminishingReturns(this.acceleration-e)))*i}calculateTruePower(n,e,i){return null==n&&(n=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.power<=e?this.power*n*i:(e*n+(this.power-e)*(n*this.calculateDiminishingReturns(this.power-e)))*i}calculateTrueFocus(n,e,i){return null==n&&(n=this.defaultFocusModifier),null==i&&(i=1),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*n*i:(e*n+(this.focus-e)*(n*this.calculateDiminishingReturns(this.focus-e)))*i}calculateTrueAdaptability(n,e,i){return null==n&&(n=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.adaptability<=e?this.adaptability*n*i:(e*n+(this.adaptability-e)*(n*this.calculateDiminishingReturns(this.adaptability-e)))*i}calculateBurstChance(n,e,i){var r=this.focus,a=this.adaptability;return null!=e&&(r*=e/this.focusMs),null!=i&&(a*=i/this.adaptabilityMs),(a+r)*(1+n/4)/1e3*100}calculateBurstDistance(n,e,i){null==e&&(e=this.defaultBurstDistanceModifier);var r=this.power;return null!=i&&(r*=i/this.powerMs),r*(1+n/4)*e}topSpeedPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}accelerationPopover(n){return"Every stat point increases acceleration by "+n.toFixed(3)+"m/s up to diminishing returns."}endurancePopover(n){return"Every stat point increases stamina by "+n.toFixed(3)+" up to diminishing returns."}powerPopover(n){return"Every stat point increases ability efficiency by "+n.toFixed(3)+"% up to diminishing returns."}focusPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}adaptabilityPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(n){return 1/n**.6}addCurrentRacingStats(n){this.maxSpeedMs+=n.topSpeed,this.accelerationMs+=n.acceleration,this.stamina+=n.endurance,this.powerMs+=n.power,this.focusMs+=n.focus,this.adaptabilityMs+=n.adaptability}subtractCurrentRacingStats(n){this.maxSpeedMs-=n.topSpeed,this.accelerationMs-=n.acceleration,this.stamina-=n.endurance,this.powerMs-=n.power,this.focusMs-=n.focus,this.adaptabilityMs-=n.adaptability}multiplyCurrentRacingStats(n){this.maxSpeedMs*=n.topSpeed,this.accelerationMs*=n.acceleration,this.stamina*=n.endurance,this.powerMs*=n.power,this.focusMs*=n.focus,this.adaptabilityMs*=n.adaptability}divideCurrentRacingStats(n){this.maxSpeedMs/=n.topSpeed,this.accelerationMs/=n.acceleration,this.stamina/=n.endurance,this.powerMs/=n.power,this.focusMs/=n.focus,this.adaptabilityMs/=n.adaptability}}var _t=(()=>{return(t=_t||(_t={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",_t;var t})();class os{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(n){var e=new os;return e.affectedStatRatios=JSON.parse(JSON.stringify(n.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(n.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(n.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(n.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(n.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(n.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(n.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(n.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(n.trainingName)),e.trainingType=JSON.parse(JSON.stringify(n.trainingType)),e}getFacilitySize(){return _t[this.facilitySize]}getStatGainDescription(){var n="";return this.affectedStatRatios.topSpeed>0&&(n+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Speed\n"),this.affectedStatRatios.acceleration>0&&(n+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(n+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(n+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(n+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(n+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),n}}je([st(()=>Ve),Je("design:type",Ve)],os.prototype,"affectedStatRatios",void 0);class At{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}}var we=(()=>{return(t=we||(we={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",we;var t})();class Si{constructor(n,e,i,r,a){void 0!==n&&(this.traitName=n),void 0!==e&&(this.requiredLevel=e),void 0!==i&&(this.researchLevel=i),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(n){var e="",i="";return this.positiveStatGain===we.acceleration&&(e="Acceleration"),this.positiveStatGain===we.adaptability&&(e="Adaptability"),this.positiveStatGain===we.endurance&&(e="Endurance"),this.positiveStatGain===we.focus&&(e="Focus"),this.positiveStatGain===we.power&&(e="Power"),this.positiveStatGain===we.topSpeed&&(e="Speed"),this.negativeStatGain===we.acceleration&&(i="Acceleration"),this.negativeStatGain===we.adaptability&&(i="Adaptability"),this.negativeStatGain===we.endurance&&(i="Endurance"),this.negativeStatGain===we.focus&&(i="Focus"),this.negativeStatGain===we.power&&(i="Power"),this.negativeStatGain===we.topSpeed&&(i="Speed"),"+"+this.researchLevel+"% "+e+", -"+(this.researchLevel>n?n:this.researchLevel)+"% "+i}}class mf{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class Mu{constructor(){this.bonusBreedXpGainFromLocalRaces=0,this.bonusBreedXpGainFromCircuitRaces=0,this.bonusBreedXpGainFromTraining=0,this.trainingTimeReduction=0,this.diminishingReturnsBonus=0,this.bonusTalents=0,this.bonusTrainingBreedXpCertificateCount=0,this.bonusCircuitBreedXpCertificateCount=0,this.bonusLocalBreedXpCertificateCount=0,this.bonusDiminishingReturnsCertificateCount=0,this.certificateUseCap=30}makeCopy(n){var e=new Mu;return e.bonusBreedXpGainFromCircuitRaces=n.bonusBreedXpGainFromCircuitRaces,e.bonusBreedXpGainFromLocalRaces=n.bonusBreedXpGainFromLocalRaces,e.bonusBreedXpGainFromTraining=n.bonusBreedXpGainFromTraining,e.bonusCircuitBreedXpCertificateCount=n.bonusCircuitBreedXpCertificateCount,e.bonusDiminishingReturnsCertificateCount=n.bonusDiminishingReturnsCertificateCount,e.bonusLocalBreedXpCertificateCount=n.bonusLocalBreedXpCertificateCount,e.bonusTalents=n.bonusTalents,e.bonusTrainingBreedXpCertificateCount=n.bonusTrainingBreedXpCertificateCount,e.certificateUseCap=n.certificateUseCap,e.diminishingReturnsBonus=n.diminishingReturnsBonus,e.trainingTimeReduction=n.trainingTimeReduction,e}}class Eo{constructor(){this.remainingBurstMeters=0,this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.hasLostFocusDuringRace=!1,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0,this.scaryMaskEffectOccurred=!1,this.firstAbilityUseEffectApplied=!1,this.velocityExceedsMaxSpeedDuringBurst=!1,this.velocityReachesMaxSpeedCount=0}makeCopy(){var n=new Eo;return n.remainingBurstMeters=this.remainingBurstMeters,n.metersSinceLostFocus=this.metersSinceLostFocus,n.recoveringStamina=this.recoveringStamina,n.defaultRecoveringStaminaLength=this.defaultRecoveringStaminaLength,n.currentRecoveringStaminaLength=this.currentRecoveringStaminaLength,n.ranOutOfStamina=this.ranOutOfStamina,n.lostFocus=this.lostFocus,n.defaultLostFocusLength=this.defaultLostFocusLength,n.currentLostFocusLength=this.currentLostFocusLength,n.hasLostFocusDuringRace=this.hasLostFocusDuringRace,n.stumbled=this.stumbled,n.defaultStumbledLength=this.defaultStumbledLength,n.currentStumbledLength=this.currentStumbledLength,n.burstCount=this.burstCount,n.icyCurrentYAmount=this.icyCurrentYAmount,n.icyCurrentDirectionUp=this.icyCurrentDirectionUp,n.headbandStumblePreventionCount=this.headbandStumblePreventionCount,n.scaryMaskEffectOccurred=this.scaryMaskEffectOccurred,n.firstAbilityUseEffectApplied=this.firstAbilityUseEffectApplied,n.velocityExceedsMaxSpeedDuringBurst=this.velocityExceedsMaxSpeedDuringBurst,n.velocityReachesMaxSpeedCount=this.velocityReachesMaxSpeedCount,this.relayEffects=[],n}}var pt=(()=>{return(t=pt||(pt={}))[t.none=0]="none",t[t.sprint=1]="sprint",t[t.support=2]="support",t[t.longDistance=3]="longDistance",pt;var t})();class Au{constructor(){this.talentTreeType=pt.none,this.row2RequiredPoints=5,this.row3RequiredPoints=10,this.row4RequiredPoints=15,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}makeCopy(n){var e=new Au;return e.talentTreeType=n.talentTreeType,e.column1Row1Points=n.column1Row1Points,e.column1Row2Points=n.column1Row2Points,e.column1Row3Points=n.column1Row3Points,e.column1Row4Points=n.column1Row4Points,e.column2Row1Points=n.column2Row1Points,e.column2Row2Points=n.column2Row2Points,e.column2Row3Points=n.column2Row3Points,e.column2Row4Points=n.column2Row4Points,e.column3Row1Points=n.column3Row1Points,e.column3Row2Points=n.column3Row2Points,e.column3Row3Points=n.column3Row3Points,e.column3Row4Points=n.column3Row4Points,e}getTalentPointsByColumn(n){return 0===n?this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points:1===n?this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points:2===n?this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points:0}getTalentPointsByRowColumn(n,e){return 0===n&&0===e?this.column1Row1Points:1===n&&0===e?this.column1Row2Points:2===n&&0===e?this.column1Row3Points:3===n&&0===e?this.column1Row4Points:0===n&&1===e?this.column2Row1Points:1===n&&1===e?this.column2Row2Points:2===n&&1===e?this.column2Row3Points:3===n&&1===e?this.column2Row4Points:0===n&&2===e?this.column3Row1Points:1===n&&2===e?this.column3Row2Points:2===n&&2===e?this.column3Row3Points:3===n&&2===e?this.column3Row4Points:0}getTotalSpentPoints(){return this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points+this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points+this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points}spendTalentPoint(n,e){0===n&&0===e&&(this.column1Row1Points+=1),1===n&&0===e&&(this.column1Row2Points+=1),2===n&&0===e&&(this.column1Row3Points+=1),3===n&&0===e&&(this.column1Row4Points+=1),0===n&&1===e&&(this.column2Row1Points+=1),1===n&&1===e&&(this.column2Row2Points+=1),2===n&&1===e&&(this.column2Row3Points+=1),3===n&&1===e&&(this.column2Row4Points+=1),0===n&&2===e&&(this.column3Row1Points+=1),1===n&&2===e&&(this.column3Row2Points+=1),2===n&&2===e&&(this.column3Row3Points+=1),3===n&&2===e&&(this.column3Row4Points+=1)}}class n0{constructor(){this.successfulCoachingAttempts=0}}class Pt{constructor(){this.mangoesUsed=0,this.incubatorStatUpgrades=new mf,this.allTrainingTracks=new $l,this.miscStats=new Mu,this.trackedAnimalStats=new n0,this.talentTree=new Au,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=200,this.previousBreedLevel=1,this.totalRacesRun=0,this.equippedOrb=null,this.canEquipOrb=!1,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}makeCopy(n){var e=new Pt;return e.name=n.name,e.type=n.type,e.raceCourseType=n.raceCourseType,e.currentStats=n.currentStats.makeCopy(n.currentStats),e.baseStats=n.baseStats.makeCopy(n.baseStats),e.talentTree=n.talentTree.makeCopy(n.talentTree),e.isAvailable=n.isAvailable,e.ability=n.ability,e.raceVariables=new Eo,e.equippedItem=n.equippedItem,e.equippedOrb=n.equippedOrb,e.incubatorStatUpgrades=n.incubatorStatUpgrades,e.breedLevel=n.breedLevel,e.trackedAnimalStats=n.trackedAnimalStats,e.trait=n.trait,e.miscStats=n.miscStats.makeCopy(n.miscStats),e}viewAbility(){return this.ability.name}getAbilityUseUpdateText(n,e=""){return n+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return H[this.type]}getRaceCourseType(){return j[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}getCourseTypeClass(){return this.raceCourseType===j.Flatland?"flatlandColor":this.raceCourseType===j.Mountain?"mountainColor":this.raceCourseType===j.Ocean?"waterColor":this.raceCourseType===j.Tundra?"tundraColor":this.raceCourseType===j.Volcanic?"volcanicColor":""}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(n){null==n||null==this.currentStats||(this.currentStats.topSpeed+=Number(n.topSpeed),this.currentStats.acceleration+=Number(n.acceleration),this.currentStats.stamina+=Number(n.stamina),this.currentStats.endurance+=Number(n.endurance),this.currentStats.power+=Number(n.power),this.currentStats.focus+=Number(n.focus),this.currentStats.adaptability+=Number(n.adaptability))}}je([st(()=>Ve),Je("design:type",Ve)],Pt.prototype,"currentStats",void 0),je([st(()=>Ve),Je("design:type",Ve)],Pt.prototype,"baseStats",void 0),je([st(()=>os),Je("design:type",Object)],Pt.prototype,"currentTraining",void 0),je([st(()=>os),Je("design:type",Object)],Pt.prototype,"queuedTraining",void 0),je([st(()=>At),Je("design:type",At)],Pt.prototype,"ability",void 0),je([st(()=>Eo),Je("design:type",Eo)],Pt.prototype,"raceVariables",void 0),je([st(()=>ie),Je("design:type",Object)],Pt.prototype,"equippedItem",void 0),je([st(()=>ie),Je("design:type",Object)],Pt.prototype,"equippedOrb",void 0),je([st(()=>mf),Je("design:type",mf)],Pt.prototype,"incubatorStatUpgrades",void 0),je([st(()=>$l),Je("design:type",$l)],Pt.prototype,"allTrainingTracks",void 0),je([st(()=>Mu),Je("design:type",Mu)],Pt.prototype,"miscStats",void 0),je([st(()=>n0),Je("design:type",n0)],Pt.prototype,"trackedAnimalStats",void 0),je([st(()=>At),Je("design:type",Array)],Pt.prototype,"availableAbilities",void 0),je([st(()=>Si),Je("design:type",Si)],Pt.prototype,"trait",void 0),je([st(()=>Au),Je("design:type",Au)],Pt.prototype,"talentTree",void 0);class F5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Horse,this.raceCourseType=j.Flatland,this.ability=new At,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=60,n.oneTimeEffect=!0,n.name="Inspiration",n.description="Inspiration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.cooldown=5,e.efficiency=27,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class B5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Cheetah,this.raceCourseType=j.Flatland,this.ability=new At,this.ability.cooldown=6,this.ability.efficiency=35,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=.5,n.oneTimeEffect=!1,n.name="Giving Chase",n.description="Giving Chase",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=.1,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class L5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Hare,this.raceCourseType=j.Flatland,this.ability=new At,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.cooldown=5,n.efficiency=40,n.oneTimeEffect=!1,n.name="Awareness",n.description="Awareness",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class OD extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Warthog,this.raceCourseType=j.Flatland,this.ability=new At,this.ability.cooldown=5,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Graze",this.ability.description="Graze",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=80,n.oneTimeEffect=!1,n.name="Mud Pit",n.description="Mud Pit",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=30,e.oneTimeEffect=!0,e.name="Time To Tussle",e.description="Time To Tussle",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class U5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Monkey,this.raceCourseType=j.Mountain,this.ability=new At,this.ability.cooldown=11,this.ability.efficiency=6,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=60,n.oneTimeEffect=!0,n.name="Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class H5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Goat,this.raceCourseType=j.Mountain,this.ability=new At,this.ability.efficiency=.5,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=.25,n.oneTimeEffect=!1,n.name="Deep Breathing",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=.1,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class G5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Gecko,this.raceCourseType=j.Mountain,this.ability=new At,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=.2,n.oneTimeEffect=!1,n.name="Night Vision",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=38,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class z5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Dolphin,this.raceCourseType=j.Ocean,this.ability=new At,this.ability.cooldown=6,this.ability.efficiency=84,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=50,n.oneTimeEffect=!0,n.name="Navigator",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class j5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Shark,this.raceCourseType=j.Ocean,this.ability=new At,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=35,n.oneTimeEffect=!0,n.name="Feeding Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=.1,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class $5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Octopus,this.raceCourseType=j.Ocean,this.ability=new At,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=100,n.oneTimeEffect=!1,n.name="Buried Treasure",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=2,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class ND extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Whale,this.raceCourseType=j.Ocean,this.ability=new At,this.ability.cooldown=9,this.ability.efficiency=75,this.ability.oneTimeEffect=!1,this.ability.name="Storing Power",this.ability.description="Storing Power",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=80,n.oneTimeEffect=!1,n.name="Unparalleled Focus",n.description="Mud Pit",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=45,e.cooldown=8,e.oneTimeEffect=!1,e.name="Whalesong",e.description="Whalesong",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class W5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Penguin,this.raceCourseType=j.Tundra,this.ability=new At,this.ability.efficiency=65,this.ability.cooldown=8,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=4,n.oneTimeEffect=!1,n.name="Wild Toboggan",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=.1,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class q5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Caribou,this.raceCourseType=j.Tundra,this.ability=new At,this.ability.efficiency=.5,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=50,n.cooldown=7,n.oneTimeEffect=!1,n.name="Great Migration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=.05,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class X5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Salamander,this.raceCourseType=j.Volcanic,this.ability=new At,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.cooldown=6,n.efficiency=50,n.oneTimeEffect=!1,n.name="Burrow",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.cooldown=10,e.efficiency=25,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class Y5 extends Pt{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=H.Fox,this.raceCourseType=j.Volcanic,this.ability=new At,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new At;n.efficiency=1.5,n.oneTimeEffect=!1,n.name="Fleeting Speed",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new At;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class bf{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1,this.isEventDeck=!1}}je([st(()=>Pt),Je("design:type",Array)],bf.prototype,"selectedAnimals",void 0);var tt=(()=>{return(t=tt||(tt={}))[t.ruby=0]="ruby",t[t.amber=1]="amber",t[t.topaz=2]="topaz",t[t.amethyst=3]="amethyst",t[t.sapphire=4]="sapphire",t[t.emerald=5]="emerald",tt;var t})();class Wl{constructor(n){this.type=n,this.level=1,this.maxLevel=1,this.xp=0,this.xpNeededForLevel=1e4}}class _f{constructor(){this.defaultIncrease=1.2,this.increasePerLevel=.2,this.allOrbs=[];var n=new Wl(tt.amber);this.allOrbs.push(n);var e=new Wl(tt.amethyst);this.allOrbs.push(e);var i=new Wl(tt.ruby);this.allOrbs.push(i);var r=new Wl(tt.sapphire);this.allOrbs.push(r);var a=new Wl(tt.topaz);this.allOrbs.push(a);var o=new Wl(tt.emerald);this.allOrbs.push(o)}getMaxSpeedIncrease(){var n=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===tt.ruby);void 0!==i&&(n=this.defaultIncrease+(i.level-1)*this.increasePerLevel)}return n}getAccelerationIncrease(){var n=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===tt.amber);void 0!==i&&(n=this.defaultIncrease+(i.level-1)*this.increasePerLevel)}return n}getEnduranceIncrease(){var n=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===tt.topaz);void 0!==i&&(n=this.defaultIncrease+(i.level-1)*this.increasePerLevel)}return n}getPowerIncrease(){var n=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===tt.amethyst);void 0!==i&&(n=this.defaultIncrease+(i.level-1)*this.increasePerLevel)}return n}getAdaptabilityIncrease(){var n=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===tt.emerald);void 0!==i&&(n=this.defaultIncrease+(i.level-1)*this.increasePerLevel)}return n}getFocusIncrease(){var n=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===tt.sapphire);void 0!==i&&(n=this.defaultIncrease+(i.level-1)*this.increasePerLevel)}return n}}class Q5{constructor(){this.upgradePrice=[],this.upgradedStatGain=new Ve(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0}}class r0{constructor(){this.barnUpgrades=new Q5}getSize(){return _t[this.size]}}class Pu{constructor(){this.timeTrained=0,this.timeToComplete=120}}je([st(()=>Pt),Je("design:type",Object)],Pu.prototype,"assignedAnimal",void 0),je([st(()=>Si),Je("design:type",Object)],Pu.prototype,"assignedTrait",void 0);class FD{constructor(n){this.exhaustionStatReduction=1,this.morale=1,this.associatedAnimalType=n,this.isCurrentlyRacing=!1,this.isSetToRelay=!1}}class a0{constructor(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.deepBreathingUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.bigBrainUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.specialDeliveryUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.onTheHuntUseCap=25,this.sureFootedUseCap=25,this.deepBreathingUseCap=25,this.nightVisionUseCap=25,this.bigBrainUseCap=5,this.quickTobogganUseCap=25,this.herdMentalityUseCap=1,this.specialDeliveryUseCap=25}resetUseCounts(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0}}class yf{constructor(){this.nineTailsBuffs=[],this.grazeBuffs=[],this.relayEffects=[],this.mountainEndingY=0,this.deepBreathingStaminaGain=0,this.longDistanceTalentIncreaseAccelerationWithLowVelocity=!1,this.maxSpeedFloor=0,this.whalePowerStored=0,this.pathsClearedWithoutLosingFocus=0,this.raceVariables=new Eo}}je([st(()=>Eo),Je("design:type",Eo)],yf.prototype,"raceVariables",void 0);class X{constructor(n,e){void 0!==n&&(this.value=n),void 0!==e&&(this.text=e)}}class wf{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1,this.distanceCovered=0}addRaceUpdate(n,e){var i=new X;i.text=e,i.value=n,this.raceUpdates.push(i)}}class BD{constructor(n,e){void 0!==n&&(this.objectType=n),void 0!==e&&(this.xDistance=e)}}var Lt=(()=>{return(t=Lt||(Lt={}))[t.threeHundredSecondRace=0]="threeHundredSecondRace",t[t.twoRacersOnly=1]="twoRacersOnly",t[t.threeRacersOnly=2]="threeRacersOnly",t[t.noRelayEffects=3]="noRelayEffects",t[t.steamy=4]="steamy",Lt;var t})(),li=(()=>{return(t=li||(li={}))[t.thirtySecondRace=0]="thirtySecondRace",t[t.fourRacersOnly=1]="fourRacersOnly",t[t.brokenFloorboards=2]="brokenFloorboards",t[t.sticky=3]="sticky",t[t.longCooldowns=4]="longCooldowns",li;var t})(),un=(()=>{return(t=un||(un={}))[t.noBurst=0]="noBurst",t[t.lowStaminaRelay=1]="lowStaminaRelay",t[t.exhaustionPenaltyIncreased=2]="exhaustionPenaltyIncreased",t[t.unfocusedRelay=3]="unfocusedRelay",t[t.reduceSpeedOnRelay=4]="reduceSpeedOnRelay",un;var t})();class o0{constructor(){this.easyConditions=[],this.mediumConditions=[],this.hardConditions=[]}containsCondition(n){var e=!1;return this.easyConditions.length>0&&this.easyConditions.some(i=>Lt[i]===n)&&(e=!0),this.mediumConditions.length>0&&this.mediumConditions.some(i=>li[i]===n)&&(e=!0),this.hardConditions.length>0&&this.hardConditions.some(i=>un[i]===n)&&(e=!0),e}}var qe=(()=>{return(t=qe||(qe={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",qe;var t})(),ze=(()=>{return(t=ze||(ze={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",ze;var t})(),Xr=(()=>{return(t=Xr||(Xr={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",Xr;var t})();class Or{constructor(n){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForMiniBurst=!1,this.checkedForNineTails=!1,null!=n&&this.setStumbleFields(),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){this.currentStumbleOpportunity=0,this.routeDesign===ze.Regular&&(this.stumbleSeverity=Xr.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===ze.S&&(this.isSpecialPath=!0,this.stumbleSeverity=Xr.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===ze.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=Xr.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===ze.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=Xr.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===ze.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=Xr.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===ze.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=Xr.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===ze.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=Xr.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===ze.Cavern&&(this.isSpecialPath=!0,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===ze.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=Xr.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===ze.FirstRegular||this.routeDesign===ze.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=Xr.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===ze.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=Xr.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10)}}class Tn{constructor(n){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==n&&(this.terrainType=n,n===qe.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),n===qe.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),n===qe.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),n===qe.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),n===qe.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),n===qe.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),n===qe.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),n===qe.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return qe[this.terrainType]}}class Yi{constructor(n,e){this.legComplete=!1,null!=n&&(this.courseType=n),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return j[this.courseType]}getCourseTypeClass(){return this.courseType===j.Flatland?"flatlandColor":this.courseType===j.Mountain?"mountainColor":this.courseType===j.Ocean?"waterColor":this.courseType===j.Tundra?"tundraColor":this.courseType===j.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":qe[this.terrain.terrainType]}}je([st(()=>Or),Je("design:type",Array)],Yi.prototype,"pathData",void 0),je([st(()=>Tn),Je("design:type",Tn)],Yi.prototype,"terrain",void 0);class Cf{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[],this.racePositionByFrame=[]}}class gn{constructor(n,e,i,r,a,o,s,l,c,u,d,v){this.raceLegs=n,this.requiredRank=e,this.isCircuitRace=i,this.raceId=r,this.length=a,this.timeToComplete=o,this.raceUI=new Cf,this.circuitIncreaseReward=["",""],null!=s&&(this.rewards=s),null!=l&&(this.localRaceType=l),null!=c&&(this.trackRaceType=c),null!=u&&(this.raceType=u),null!=d&&(this.eventRaceType=d),null!=v&&(this.drawnObjects=v)}makeCopy(n){var e=new gn(n.raceLegs,n.requiredRank,n.isCircuitRace,n.raceId,n.length,n.timeToComplete,n.rewards,n.localRaceType,n.trackRaceType,n.raceType,n.eventRaceType,n.drawnObjects);return n.raceUI.velocityByFrame.length>0&&n.raceUI.velocityByFrame.forEach(i=>{e.raceUI.velocityByFrame.push(i)}),n.raceUI.staminaPercentByFrame.length>0&&n.raceUI.staminaPercentByFrame.forEach(i=>{e.raceUI.staminaPercentByFrame.push(i)}),e}reduceExportSize(){this.raceUI=new Cf}}je([st(()=>Yi),Je("design:type",Array)],gn.prototype,"raceLegs",void 0),je([st(()=>ie),Je("design:type",Array)],gn.prototype,"rewards",void 0),je([st(()=>Cf),Je("design:type",Cf)],gn.prototype,"raceUI",void 0),je([st(()=>BD),Je("design:type",Array)],gn.prototype,"drawnObjects",void 0),je([st(()=>o0),Je("design:type",o0)],gn.prototype,"pinnacleConditions",void 0);class Sf{constructor(){this.affectsAllRacers=!1}makeCopy(){var n=new Sf;return n.isMultiplicative=this.isMultiplicative,n.remainingRelayMeters=this.remainingRelayMeters,n.relayAffectedStatRatios=new Ve(this.relayAffectedStatRatios.topSpeed,this.relayAffectedStatRatios.acceleration,this.relayAffectedStatRatios.endurance,this.relayAffectedStatRatios.power,this.relayAffectedStatRatios.focus,this.relayAffectedStatRatios.adaptability),n.effectType=this.effectType,n.additionalValue=this.additionalValue,n.affectsAllRacers=this.affectsAllRacers,n}}class qn{constructor(){this.rankDistanceMultiplier=1,this.isRunning=!1,this.initialSetupComplete=!1,this.animalAlreadyPrepped=!1,this.mountainEndingY=0,this.mountainClimbPercent=0,this.exhaustionMoraleUpdateCounter=0,this.weatherClusterUpdateCounter=0,this.triggerEnergyFloorRelay=!1,this.weekStartDay=2,this.weekStartHour=9,this.weekEndDay=4,this.weekEndHour=12,this.weekendStartDay=5,this.weekendStartHour=20,this.weekendEndDay=0,this.weekendEndHour=23,this.distanceCovered=0,this.grandPrixTimeLength=183600,this.segmentTime=120,this.segmentTimeCounter=0,this.overallTimeCounter=0,this.rank="Z",this.animalData=[],this.queuedRelayEffects=[],this.bonusTime=0,this.remainingRewards=0,this.totalRewards=0,this.foodRewardsObtained=0,this.coinRewardsObtained=0,this.renownRewardsObtained=0,this.tokenRewardsObtained=0,this.isGrandPrixCompleted=!1,this.remainingEventRaceTime=0,this.eventAbilityData=new a0,this.isCatchingUp=!1,this.isLoading=!1}}je([st(()=>a0),Je("design:type",a0)],qn.prototype,"eventAbilityData",void 0),je([st(()=>Tn),Je("design:type",Tn)],qn.prototype,"raceTerrain",void 0),je([st(()=>gn),Je("design:type",gn)],qn.prototype,"currentRaceSegment",void 0),je([st(()=>wf),Je("design:type",wf)],qn.prototype,"currentRaceSegmentResult",void 0),je([st(()=>gn),Je("design:type",gn)],qn.prototype,"nextRaceSegment",void 0),je([st(()=>gn),Je("design:type",gn)],qn.prototype,"previousRaceSegment",void 0),je([st(()=>yf),Je("design:type",yf)],qn.prototype,"previousRaceSegmentData",void 0),je([st(()=>FD),Je("design:type",Array)],qn.prototype,"animalData",void 0),je([st(()=>Sf),Je("design:type",Array)],qn.prototype,"queuedRelayEffects",void 0);class LD{}class Tf{constructor(){this.rewards=[]}}je([st(()=>Date),Je("design:type",Date)],Tf.prototype,"expirationDate",void 0),je([st(()=>os),Je("design:type",Array)],Tf.prototype,"rewards",void 0);class it{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.numberPurchasing=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class ma{}je([st(()=>it),Je("design:type",Array)],ma.prototype,"itemList",void 0);class Df{constructor(){this.tutorialCompleted=!1,this.currentTutorialId=1,this.showTutorial=!1,this.showTrainingTrackTutorial=!0,this.showCoachingTutorial=!0}}class Rf{constructor(){this.isNewSpecialRaceAvailable=!1,this.isEventRaceNowActive=!1}}class s0{constructor(){this.settings=[]}get(n){var e=this.settings.find(i=>i[0]===n);return null!=e?e[1]:""}set(n,e){var i=this.settings.find(r=>r[0]===n);null==i?this.settings.push([n,e]):i[1]=e}}class l0{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType="",this.highestMaxSpeed="",this.highestAccelerationRate="",this.highestStamina="",this.highestPowerEfficiency="",this.highestFocusDistance="",this.highestAdaptabilityDistance=""}}class c0{constructor(){this.unlockables=[]}get(n){var e=this.unlockables.find(i=>i[0]===n);return null!=e&&e[1]}set(n,e){var i=this.unlockables.find(r=>r[0]===n);null==i?this.unlockables.push([n,e]):i[1]=e}}class an{constructor(n){this.userIsRacing=!1,this.showBreedWarning=!0,null!=n&&(this.animals=n.animals,this.barns=n.barns,this.trainingOptions=n.trainingOptions,this.circuitRaces=n.circuitRaces,this.circuitRank=n.circuitRank,this.localRaces=n.localRaces,this.resources=n.resources,this.modifiers=n.modifiers,this.shop=n.shop,this.tokenShop=n.tokenShop,this.animalDecks=n.animalDecks,this.incubator=n.incubator,this.trackedStats=n.trackedStats,this.pinnacle=n.pinnacle,this.orbStats=n.orbStats,this.redeemedCodes=n.redeemedCodes,this.eventRaceData=n.eventRaceData,this.notifications=n.notifications,this.previousEventRewards=[],this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}je([st(()=>Pt),Je("design:type",Array)],an.prototype,"animals",void 0),je([st(()=>r0),Je("design:type",Array)],an.prototype,"barns",void 0),je([st(()=>os),Je("design:type",Array)],an.prototype,"trainingOptions",void 0),je([st(()=>gn),Je("design:type",Array)],an.prototype,"circuitRaces",void 0),je([st(()=>gn),Je("design:type",Array)],an.prototype,"localRaces",void 0),je([st(()=>LD),Je("design:type",LD)],an.prototype,"pinnacle",void 0),je([st(()=>ie),Je("design:type",Array)],an.prototype,"resources",void 0),je([st(()=>X),Je("design:type",Array)],an.prototype,"modifiers",void 0),je([st(()=>ma),Je("design:type",Array)],an.prototype,"shop",void 0),je([st(()=>ma),Je("design:type",Array)],an.prototype,"tokenShop",void 0),je([st(()=>bf),Je("design:type",Array)],an.prototype,"animalDecks",void 0),je([st(()=>s0),Je("design:type",s0)],an.prototype,"settings",void 0),je([st(()=>c0),Je("design:type",c0)],an.prototype,"unlockables",void 0),je([st(()=>Pu),Je("design:type",Pu)],an.prototype,"incubator",void 0),je([st(()=>l0),Je("design:type",l0)],an.prototype,"trackedStats",void 0),je([st(()=>_f),Je("design:type",_f)],an.prototype,"orbStats",void 0),je([st(()=>Df),Je("design:type",Df)],an.prototype,"tutorials",void 0),je([st(()=>Tf),Je("design:type",Array)],an.prototype,"redeemedCodes",void 0),je([st(()=>qn),Je("design:type",qn)],an.prototype,"eventRaceData",void 0),je([st(()=>ie),Je("design:type",Array)],an.prototype,"previousEventRewards",void 0),je([st(()=>Rf),Je("design:type",Rf)],an.prototype,"notifications",void 0);var Fe=(()=>{return(t=Fe||(Fe={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",Fe;var t})(),UD=Y(340);let Fn=(()=>{class t{constructor(e){this.sanitizer=e}getRandomSeededInteger(e,i,r="seeded"){var a=UD(r);return Math.round(a()*(i-e)+e)}getRandomInteger(e,i){return e-=.500000001,i+=.499999999,Math.round(Math.random()*(i-e)+e)}getRandomSeededNumber(e,i,r="seeded"){return UD(r)()*(i-e)+e}getRandomNumber(e,i){return Math.random()*(i-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var i=0;return e.length>1&&(i=26*(e.length-1)),i+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var i="";e>26;)i+="A",e-=26;return i+String.fromCharCode(91-e)}getHoursRemainingFromSeconds(e){return Math.floor(e/3600)}getMinutesLeftInHourRemainingFromSeconds(e){var i=Math.floor(e/3600);return Math.floor(e/60-60*i)}getSecondsLeftInMinuteRemainingFromSeconds(e){var i=Math.floor(e/3600);return e-60*i*60-60*Math.floor(e/60-60*i)}convertSecondsToHHMMSS(e){var i=Math.floor(e/3600),r=Math.floor(e/60-60*i),a=e-60*i*60-60*r,o=i.toString(),s=r.toString(),l=Math.floor(a).toString();return i<10&&(o=i<1||i>59?"00":String(o).padStart(2,"0")),r<10&&(s=r<1||r>59?"00":String(s).padStart(2,"0")),a<10&&(l=a<1||a>59?"00":String(l).padStart(2,"0")),o+":"+s+":"+l}getClosestWholeNumber(e,i){return i/Math.floor(i/e)}getDayOfWeekFromNumber(e){return e<=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].length-1?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]:""}getAmPmTimeFromHours(e){return 0===e?"12:00 AM":e<12?e+":00 AM":12===e?"12:00 PM":e-12+":00 PM"}get24HourFormat(e){return e<=9?"0"+e+":00":e+":00"}convertDegreesToRadians(e){return e*(Math.PI/180)}getSanitizedHtml(e){var i=this.sanitizer.sanitize(pi.HTML,this.sanitizer.bypassSecurityTrustHtml(e));return null===i?"":i}addDaysToDate(e,i){var r=new Date(e);return r.setDate(r.getDate()+i),r}shadeColor(e,i){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+i)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}condenseList(e){var i=[];return e.forEach(r=>{if(i.some(o=>o.name===r.name))i.find(o=>o.name===r.name).amount+=r.amount;else{var a=r.makeCopy(r);i.push(a)}}),i}ordinalSuffixOf(e){var i=e%10,r=e%100;return 1==i&&11!=r?e+"st":2==i&&12!=r?e+"nd":3==i&&13!=r?e+"rd":e+"th"}}return t.\u0275fac=function(e){return new(e||t)(Ue(Jo))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),u0=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,i,r){return new ie(e,i,r)}initializeTraining(e){var i=new os;return e===Fe.ShortTrackRunning&&(i.trainingName="Short Track Running",i.isAvailable=!0,i.facilitySize=_t.Small,i.timeToComplete=30,i.trainingType=Fe.ShortTrackRunning,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(1,0,0,0,0,0)),e===Fe.Sprints&&(i.trainingName="Sprints",i.isAvailable=!0,i.facilitySize=_t.Small,i.timeToComplete=20,i.trainingType=Fe.Sprints,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,1,0,0,0,0)),e===Fe.TrailRunning&&(i.trainingName="Trail Running",i.isAvailable=!0,i.facilitySize=_t.Small,i.timeToComplete=45,i.trainingType=Fe.TrailRunning,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(.5,0,1,0,0,0)),e===Fe.MoveLogs&&(i.trainingName="Move Logs",i.isAvailable=!1,i.facilitySize=_t.Small,i.timeToComplete=30,i.trainingType=Fe.MoveLogs,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,1,0,0)),e===Fe.Footwork&&(i.trainingName="Footwork",i.isAvailable=!1,i.facilitySize=_t.Small,i.timeToComplete=45,i.trainingType=Fe.Footwork,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,.25,0,0,0,1)),e===Fe.PracticeCommands&&(i.trainingName="Practice Commands",i.isAvailable=!1,i.facilitySize=_t.Small,i.timeToComplete=40,i.trainingType=Fe.PracticeCommands,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,0,1,.25)),e===Fe.ScentTraining&&(i.trainingName="Scent Training",i.isAvailable=!1,i.facilitySize=_t.Small,i.timeToComplete=45,i.trainingType=Fe.ScentTraining,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,.5,0,1,0)),e===Fe.SmallWagonTow&&(i.trainingName="Small Wagon Tow",i.isAvailable=!1,i.facilitySize=_t.Small,i.timeToComplete=45,i.trainingType=Fe.SmallWagonTow,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(.25,0,0,1.5,0,0)),e===Fe.Sidestep&&(i.trainingName="Sidestep",i.isAvailable=!1,i.facilitySize=_t.Small,i.timeToComplete=35,i.trainingType=Fe.Sidestep,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,2,0,0,0,0)),e===Fe.MediumTrackRunning&&(i.trainingName="Medium Track Running",i.isAvailable=!1,i.facilitySize=_t.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Fe.MediumTrackRunning,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(2,0,1,0,0,0)),e===Fe.UphillRun&&(i.trainingName="Uphill Run",i.isAvailable=!1,i.facilitySize=_t.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Fe.UphillRun,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,1,2,0,0,0)),e===Fe.Puzzles&&(i.trainingName="Puzzles",i.isAvailable=!1,i.facilitySize=_t.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Fe.Puzzles,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,0,2,1)),e===Fe.MoveRocks&&(i.trainingName="Move Rocks",i.isAvailable=!1,i.facilitySize=_t.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Fe.MoveRocks,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,1,0,2,0,0)),e===Fe.DodgeBall&&(i.trainingName="Dodge Ball",i.isAvailable=!1,i.facilitySize=_t.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Fe.DodgeBall,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,2.5,0,0,0,1)),e===Fe.LateralVerticalDrill&&(i.trainingName="Lateral Vertical Drill",i.isAvailable=!1,i.facilitySize=_t.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Fe.LateralVerticalDrill,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(1.5,0,0,0,2,0)),e===Fe.BurstPractice&&(i.trainingName="Burst Practice",i.isAvailable=!1,i.facilitySize=_t.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Fe.BurstPractice,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,1.5,1.5,1.5)),e===Fe.Acrobatics&&(i.trainingName="Acrobatics",i.isAvailable=!1,i.facilitySize=_t.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Fe.Acrobatics,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(.5,0,.5,3,0,0)),e===Fe.LongTrackRunning&&(i.trainingName="Long Track Running",i.isAvailable=!1,i.facilitySize=_t.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.LongTrackRunning,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(5,0,0,0,2,0)),e===Fe.VehicleTow&&(i.trainingName="Vehicle Tow",i.isAvailable=!1,i.facilitySize=_t.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.VehicleTow,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,2,5,0,0)),e===Fe.LogJump&&(i.trainingName="Log Jump",i.isAvailable=!1,i.facilitySize=_t.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.LogJump,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(1,1,0,0,0,5)),e===Fe.Meditation&&(i.trainingName="Meditation",i.isAvailable=!1,i.facilitySize=_t.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.Meditation,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,2,5,0)),e===Fe.WindSprints&&(i.trainingName="Wind Sprints",i.isAvailable=!1,i.facilitySize=_t.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.WindSprints,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(2,5,0,0,0,0)),e===Fe.GreenwayHike&&(i.trainingName="Greenway Hike",i.isAvailable=!1,i.facilitySize=_t.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.GreenwayHike,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,5,0,0,2)),e===Fe.Marathon&&(i.trainingName="Marathon",i.isAvailable=!1,i.facilitySize=_t.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=Fe.Marathon,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,2,3,0,3,0)),e===Fe.AgilityCourse&&(i.trainingName="Agility Course",i.isAvailable=!1,i.facilitySize=_t.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=Fe.AgilityCourse,i.trainingCourseType=j.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(3,0,0,2,0,3)),i}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ut=(()=>{return(t=Ut||(Ut={}))[t.Track=0]="Track",t[t.Free=1]="Free",t[t.Mono=2]="Mono",t[t.Duo=3]="Duo",t[t.Rainbow=4]="Rainbow",t[t.Pinnacle=5]="Pinnacle",Ut;var t})(),rt=(()=>{return(t=rt||(rt={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",t[t.scaryMask=12]="scaryMask",t[t.runningShoes=13]="runningShoes",t[t.incense=14]="incense",t[t.athleticTape=15]="athleticTape",rt;var t})();const d0={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#a6a49d","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#8105fc","--specialityKeywordColor":"#050efc","--equipmentKeywordColor":"#1B7F02","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},h0={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#BF6200","--mountainColor":"#228D0F","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#266A80","--volcanicColor":"#C70604","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#064064","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},f0={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#C05100","--foreground-tertiary":"#6A2D00","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#000000","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Eu={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#49647A","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#E18B07","--mountainColor":"#30b001","--waterColor":"#9289CF","--waterSubcolor":"#5044ab","--tundraColor":"#019DDE","--volcanicColor":"#E56C6E","--resourceKeywordColor":"#EAAD91","--progressionKeywordColor":"#ABB5DC","--specialityKeywordColor":"#5DBDF6","--equipmentKeywordColor":"#83C2A6","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let ql=(()=>{class t{constructor(){this.active=Eu,this.availableThemes=[d0,h0,f0,Eu]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){var e="";return e=this.active.name,this.active===Eu&&(e="night"),this.active===h0&&(e="light"),this.active===d0&&(e="white"),this.active===f0&&(e="twilight"),e}setNightTheme(){return this.setActiveTheme(Eu)}setLightTheme(){return this.setActiveTheme(h0)}setTwilightTheme(){return this.setActiveTheme(f0)}setWhiteTheme(){return this.setActiveTheme(d0)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(i=>{document.documentElement.style.setProperty(i,this.active.properties[i])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ba=(()=>{return(t=ba||(ba={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",ba;var t})(),vn=(()=>{return(t=vn||(vn={}))[t.practice=0]="practice",t[t.novice=1]="novice",t[t.intermediate=2]="intermediate",t[t.master=3]="master",vn;var t})(),Ie=(()=>{return(t=Ie||(Ie={}))[t.circuit=0]="circuit",t[t.special=1]="special",t[t.event=2]="event",t[t.trainingTrack=3]="trainingTrack",Ie;var t})(),Ge=(()=>{return(t=Ge||(Ge={}))[t.grandPrix=0]="grandPrix",Ge;var t})(),er=(()=>{return(t=er||(er={}))[t.clearSkies=0]="clearSkies",t[t.inclementWeather=1]="inclementWeather",t[t.coldSpell=2]="coldSpell",er;var t})(),ni=(()=>{return(t=ni||(ni={}))[t.rubyBrazier=0]="rubyBrazier",t[t.amberBrazier=1]="amberBrazier",t[t.topazBrazier=2]="topazBrazier",t[t.amethystBrazier=3]="amethystBrazier",t[t.sapphireBrazier=4]="sapphireBrazier",t[t.emeraldBrazier=5]="emeraldBrazier",ni;var t})();let It=(()=>{class t{constructor(e,i,r){this.utilityService=e,this.initializeService=i,this.themeService=r,this.globalVar=new an}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.redeemedCodes=[],this.globalVar.settings=new s0,this.globalVar.unlockables=new c0,this.globalVar.incubator=new Pu,this.globalVar.trackedStats=new l0,this.globalVar.orbStats=new _f,this.globalVar.tutorials=new Df,this.globalVar.previousEventRewards=[],this.globalVar.eventRaceData=new qn,this.globalVar.userIsRacing=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1.14,this.globalVar.startingVersion=1.14,this.globalVar.startDate=new Date,this.globalVar.notifications=new Rf,this.globalVar.relayEnergyFloor=50,this.globalVar.doNotRelayBelowEnergyFloor=!1,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeRelayTeams(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeTokenShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.globalVar.pinnacleFloor="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables()}InitializeModifiers(){this.globalVar.modifiers.push(new X(.2,"staminaModifier")),this.globalVar.modifiers.push(new X(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new X(.3,"exhaustionStatLossMinimumModifier")),this.globalVar.modifiers.push(new X(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new X(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new X(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new X(.5,"trainingTrackPaceModifier")),this.globalVar.modifiers.push(new X(.05,"breedLevelStatModifier")),this.globalVar.modifiers.push(new X(10,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new X(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new X(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new X(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new X(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new X(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new X(50,"freeRacesToMedalModifier")),this.globalVar.modifiers.push(new X(25,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new X(10,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new X(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new X(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new X(5,"whistleModifier")),this.globalVar.modifiers.push(new X(10,"goldenWhistleModifier")),this.globalVar.modifiers.push(new X(.1,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new X(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new X(20,"attractionAmountModifier")),this.globalVar.modifiers.push(new X(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new X(.45,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new X(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new X(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new X(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new X(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new X(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new X(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(2,"scaryMaskEquipmentModifier")),this.globalVar.modifiers.push(new X(1.2,"runningShoesEquipmentModifier")),this.globalVar.modifiers.push(new X(.9,"incenseEquipmentModifier")),this.globalVar.modifiers.push(new X(.5,"athleticTapeEquipmentModifier")),this.globalVar.modifiers.push(new X(14400,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new X(28800,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new X(43200,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new X(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new X(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new X(28800,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new X(25e5,"metersPerCoinsGrandPrixModifier")),this.globalVar.modifiers.push(new X(2e7,"metersPerRenownGrandPrixModifier")),this.globalVar.modifiers.push(new X(100,"grandPrixCoinRewardModifier")),this.globalVar.modifiers.push(new X(3,"grandPrixRenownRewardModifier")),this.globalVar.modifiers.push(new X(5e7,"grandPrixToken1MeterModifier")),this.globalVar.modifiers.push(new X(1e8,"grandPrixToken2MeterModifier")),this.globalVar.modifiers.push(new X(25e7,"grandPrixToken3MeterModifier")),this.globalVar.modifiers.push(new X(5e8,"grandPrixToken4MeterModifier")),this.globalVar.modifiers.push(new X(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new X(.02,"exhaustionGainGrandPrixModifier")),this.globalVar.modifiers.push(new X(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new X(25,"grandPrixBreedLevelRequiredModifier")),this.globalVar.modifiers.push(new X(.5,"weatherMoraleBoostModifier")),this.globalVar.modifiers.push(new X(.03,"focusMoraleLossModifier")),this.globalVar.modifiers.push(new X(.02,"burstMoraleBoostModifier")),this.globalVar.modifiers.push(new X(.01,"stumbleMoraleLossModifier")),this.globalVar.modifiers.push(new X(.1,"segmentCompleteMoraleBoostModifier")),this.globalVar.modifiers.push(new X(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new X(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new X(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new X(20,"maxDriftAmountModifier")),this.globalVar.modifiers.push(new X(4,"relayAbilityXpGainModifier")),this.globalVar.modifiers.push(new X(25,"maximumTraitNegativePercentModifier"));var e=.3,i=.1,l=1.025,c=1.05,d=.975,v=.95;this.globalVar.modifiers.push(new X(e*l,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*v,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*c,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(1.1*i,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*d,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*v,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*v,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*l,"warthogDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"warthogDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*c,"warthogDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"warthogDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*d,"warthogDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*v,"warthogDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*v,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*c,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*l,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*l,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*d,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*d,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*v,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*c,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*d,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*l,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*d,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*d,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*v,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*v,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*d,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*v,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*l,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(.27,"whaleDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"whaleDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*c,"whaleDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*c,"whaleDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5.5,"whaleDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*v,"whaleDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*v,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*c,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*d,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*v,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*c,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*l,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*v,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*c,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*c,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*d,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new X(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*c,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new F5;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var i=new U5;i.name="Monkey",this.calculateAnimalRacingStats(i);var r=new L5;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new OD;a.name="Warthog",this.calculateAnimalRacingStats(a);var o=new B5;o.name="Cheetah",this.calculateAnimalRacingStats(o);var s=new H5;s.name="Goat",this.calculateAnimalRacingStats(s);var l=new G5;l.name="Gecko",this.calculateAnimalRacingStats(l);var c=new z5;c.name="Dolphin",this.calculateAnimalRacingStats(c);var u=new j5;u.name="Shark",this.calculateAnimalRacingStats(u);var d=new $5;d.name="Octopus",this.calculateAnimalRacingStats(d);var v=new ND;v.name="Whale",this.calculateAnimalRacingStats(v);var m=new W5;m.name="Penguin",this.calculateAnimalRacingStats(m);var _=new q5;_.name="Caribou",this.calculateAnimalRacingStats(_);var w=new X5;w.name="Salamander",this.calculateAnimalRacingStats(w);var S=new Y5;S.name="Fox",this.calculateAnimalRacingStats(S),this.globalVar.animals.push(e),this.globalVar.animals.push(o),this.globalVar.animals.push(r),this.globalVar.animals.push(s),this.globalVar.animals.push(i),this.globalVar.animals.push(l),this.globalVar.animals.push(c),this.globalVar.animals.push(u),this.globalVar.animals.push(d),this.globalVar.animals.push(m),this.globalVar.animals.push(_),this.globalVar.animals.push(w),this.globalVar.animals.push(S),this.globalVar.animals.push(a),this.globalVar.animals.push(v)}InitializeRelayTeams(){var e=new bf;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Relay Team 1",e.deckNumber=1;var i=this.globalVar.animals.find(o=>"Horse"===o.getAnimalType());void 0!==i&&e.selectedAnimals.push(i),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new bf;a.isAvailable=!0,a.deckNumber=r+2,a.name="Relay Team "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeTokenShop(){this.globalVar.tokenShop=[];var e=new ma,i=[],r=10,a=new it;a.name="Apples",a.purchasePrice.push(this.getTokenResourceValue(1)),a.basePurchasePrice.push(this.getTokenResourceValue(1)),a.shortDescription="+1 Acceleration to a single animal",a.numberPurchasing=r,a.canHaveMultiples=!0,a.type=U.Food,a.infiniteAmount=!0,i.push(a);var o=new it;o.name="Bananas",o.shortDescription="+1 Speed to a single animal",o.purchasePrice.push(this.getTokenResourceValue(1)),o.basePurchasePrice.push(this.getTokenResourceValue(1)),o.canHaveMultiples=!0,o.numberPurchasing=r,o.type=U.Food,o.infiniteAmount=!0,i.push(o);var s=new it;s.name="Strawberries",s.shortDescription="+1 Endurance to a single animal",s.purchasePrice.push(this.getTokenResourceValue(1)),s.basePurchasePrice.push(this.getTokenResourceValue(1)),s.canHaveMultiples=!0,s.numberPurchasing=r,s.type=U.Food,s.infiniteAmount=!0,i.push(s);var l=new it;l.name="Carrots",l.shortDescription="+1 Power to a single animal",l.purchasePrice.push(this.getTokenResourceValue(1)),l.basePurchasePrice.push(this.getTokenResourceValue(1)),l.canHaveMultiples=!0,l.numberPurchasing=r,l.type=U.Food,l.infiniteAmount=!0,i.push(l);var c=new it;c.name="Turnips",c.shortDescription="+1 Focus to a single animal",c.purchasePrice.push(this.getTokenResourceValue(1)),c.basePurchasePrice.push(this.getTokenResourceValue(1)),c.canHaveMultiples=!0,c.numberPurchasing=r,c.type=U.Food,c.infiniteAmount=!0,i.push(c);var u=new it;u.name="Oranges",u.shortDescription="+1 Adaptability to a single animal",u.purchasePrice.push(this.getTokenResourceValue(1)),u.basePurchasePrice.push(this.getTokenResourceValue(1)),u.canHaveMultiples=!0,u.numberPurchasing=r,u.type=U.Food,u.infiniteAmount=!0,i.push(u);var d=new it;d.name="Circuit Race Breed XP Gain Certificate",d.shortDescription=this.getItemDescription(d.name),d.purchasePrice.push(this.getTokenResourceValue(1)),d.basePurchasePrice.push(this.getTokenResourceValue(1)),d.canHaveMultiples=!0,d.type=U.Consumable,d.infiniteAmount=!0,i.push(d);var v=new it;v.name="Free Race Breed XP Gain Certificate",v.shortDescription=this.getItemDescription(v.name),v.purchasePrice.push(this.getTokenResourceValue(1)),v.basePurchasePrice.push(this.getTokenResourceValue(1)),v.canHaveMultiples=!0,v.type=U.Consumable,v.infiniteAmount=!0,i.push(v),e.name="Tier 1",e.itemList=i,this.globalVar.tokenShop.push(e);var m=new ma,_=[],w=new it;w.name="Mangoes",w.shortDescription="+1 Breed Level to a single animal",w.purchasePrice.push(this.getTokenResourceValue(1)),w.basePurchasePrice.push(this.getTokenResourceValue(1)),w.canHaveMultiples=!0,w.numberPurchasing=2,w.type=U.Food,w.infiniteAmount=!0,_.push(w);var S=new it;S.name="Coins",S.shortDescription="",S.purchasePrice.push(this.getTokenResourceValue(1)),S.basePurchasePrice.push(this.getTokenResourceValue(1)),S.canHaveMultiples=!0,S.numberPurchasing=5e3,S.type=U.Resources,S.infiniteAmount=!0,_.push(S);var k=new it;k.name="Diminishing Returns Increase Certificate",k.shortDescription=this.getItemDescription(k.name),k.purchasePrice.push(this.getTokenResourceValue(4)),k.basePurchasePrice.push(this.getTokenResourceValue(4)),k.canHaveMultiples=!0,k.type=U.Consumable,k.infiniteAmount=!0,_.push(k);var T=new it;T.name="Training Breed XP Gain Certificate",T.shortDescription=this.getItemDescription(T.name),T.purchasePrice.push(this.getTokenResourceValue(2)),T.basePurchasePrice.push(this.getTokenResourceValue(2)),T.canHaveMultiples=!0,T.type=U.Consumable,T.infiniteAmount=!0,_.push(T),m.name="Tier 2",m.itemList=_,this.globalVar.tokenShop.push(m);var R=new ma,L=[],W=new it;W.name=this.getEquipmentName(rt.scaryMask),W.shortDescription=this.getEquipmentDescription(W.name),W.purchasePrice.push(this.getTokenResourceValue(7)),W.canHaveMultiples=!0,W.infiniteAmount=!0,W.type=U.Equipment,L.push(W);var ae=new it;ae.name=this.getEquipmentName(rt.runningShoes),ae.shortDescription=this.getEquipmentDescription(ae.name),ae.purchasePrice.push(this.getTokenResourceValue(7)),ae.canHaveMultiples=!0,ae.infiniteAmount=!0,ae.type=U.Equipment,L.push(ae);var ee=new it;ee.name=this.getEquipmentName(rt.incense),ee.shortDescription=this.getEquipmentDescription(ee.name),ee.purchasePrice.push(this.getTokenResourceValue(7)),ee.canHaveMultiples=!0,ee.infiniteAmount=!0,ee.type=U.Equipment,L.push(ee);var be=new it;be.name=this.getEquipmentName(rt.athleticTape),be.shortDescription=this.getEquipmentDescription(be.name),be.purchasePrice.push(this.getTokenResourceValue(7)),be.canHaveMultiples=!0,be.infiniteAmount=!0,be.type=U.Equipment,L.push(be),R.name="Tier 3",R.itemList=L,this.globalVar.tokenShop.push(R)}InitializeShop(){this.globalVar.shop=[];var e=new ma,i=[],u=new it;u.name="Cheetah",u.purchasePrice.push(new ie("Coins",1e3)),u.canHaveMultiples=!1,u.type=U.Animal,i.push(u);var d=new it;d.name="Warthog",d.purchasePrice.push(new ie("Coins",1e3)),d.canHaveMultiples=!1,d.type=U.Animal,i.push(d);var v=new it;v.name="Goat",v.purchasePrice.push(new ie("Coins",2500)),v.canHaveMultiples=!1,v.type=U.Animal,v.isAvailable=!1,i.push(v);var m=new it;m.name="Gecko",m.purchasePrice.push(new ie("Coins",2500)),m.canHaveMultiples=!1,m.type=U.Animal,m.isAvailable=!1,i.push(m);var _=new it;_.name="Shark",_.purchasePrice.push(new ie("Coins",5e3)),_.canHaveMultiples=!1,_.type=U.Animal,_.isAvailable=!1,i.push(_);var w=new it;w.name="Octopus",w.purchasePrice.push(new ie("Coins",5e3)),w.canHaveMultiples=!1,w.type=U.Animal,w.isAvailable=!1,i.push(w);var S=new it;S.name="Caribou",S.purchasePrice.push(new ie("Coins",1e4)),S.canHaveMultiples=!1,S.type=U.Animal,S.isAvailable=!1,i.push(S);var k=new it;k.name="Fox",k.purchasePrice.push(new ie("Coins",1e4)),k.canHaveMultiples=!1,k.type=U.Animal,k.isAvailable=!1,i.push(k),e.name="Animals",e.itemList=i,this.globalVar.shop.push(e);var T=new ma,R=[],L=10,W=new it;W.name="Apples",W.purchasePrice.push(new ie("Coins",L)),W.canHaveMultiples=!0,W.type=U.Food,W.infiniteAmount=!0,R.push(W);var ae=new it;ae.name="Bananas",ae.purchasePrice.push(new ie("Coins",L)),ae.canHaveMultiples=!0,ae.type=U.Food,ae.infiniteAmount=!0,R.push(ae);var ee=new it;ee.name="Strawberries",ee.purchasePrice.push(new ie("Coins",L)),ee.canHaveMultiples=!0,ee.type=U.Food,ee.infiniteAmount=!0,R.push(ee);var be=new it;be.name="Carrots",be.purchasePrice.push(new ie("Coins",L)),be.canHaveMultiples=!0,be.type=U.Food,be.infiniteAmount=!0,R.push(be);var oe=new it;oe.name="Turnips",oe.purchasePrice.push(new ie("Coins",L)),oe.canHaveMultiples=!0,oe.type=U.Food,oe.infiniteAmount=!0,R.push(oe);var _e=new it;_e.name="Oranges",_e.purchasePrice.push(new ie("Coins",L)),_e.canHaveMultiples=!0,_e.type=U.Food,_e.infiniteAmount=!0,R.push(_e);var ge=new it;ge.name="Mangoes",ge.purchasePrice.push(new ie("Coins",100)),ge.canHaveMultiples=!0,ge.type=U.Food,ge.infiniteAmount=!0,R.push(ge);var De=new it;De.name="Gingko Leaves",De.purchasePrice.push(new ie("Coins",3500)),De.canHaveMultiples=!0,De.type=U.Food,De.infiniteAmount=!0,De.isAvailable=!1,R.push(De),T.name="Food",T.itemList=R,this.globalVar.shop.push(T);var dt=new ma,nt=[];this.globalVar.trainingOptions.filter(mi=>!mi.isAvailable).forEach(mi=>{var ri=new it;ri.name=mi.trainingName,ri.shortDescription=mi.getStatGainDescription(),ri.purchasePrice.push(new ie("Coins",mi.purchasePrice)),ri.canHaveMultiples=!1,ri.type=U.Training,(mi.facilitySize===_t.Medium||mi.facilitySize===_t.Large)&&(ri.isAvailable=!1,ri.additionalIdentifier=mi.facilitySize.toString()),nt.push(ri)}),dt.name="Trainings",dt.itemList=nt,this.globalVar.shop.push(dt);var Dt=new ma,Qe=[];this.globalVar.animals.forEach(mi=>{mi.availableAbilities.forEach(ri=>{if(!ri.isAbilityPurchased){var Oi=new it;Oi.name=mi.getAnimalType()+" Ability: "+ri.name,Oi.purchasePrice.push(new ie("Coins",ri.purchasePrice)),Oi.canHaveMultiples=!1,Oi.type=U.Ability,Oi.additionalIdentifier=ri.name,Oi.isAvailable=mi.isAvailable,Qe.push(Oi)}})}),Dt.name="Abilities",Dt.itemList=Qe,this.globalVar.shop.push(Dt);var lt=new ma,Et=[],Ct=new it;Ct.name="Stopwatch",Ct.purchasePrice.push(this.getMedalResourceValue(10)),Ct.basePurchasePrice.push(this.getMedalResourceValue(10)),Ct.quantityMultiplier=2.5,Ct.totalShopQuantity=2,Ct.canHaveMultiples=!0,Ct.type=U.Specialty,Et.push(Ct);var Z=new it;Z.name="Animal Handler",Z.purchasePrice.push(this.getCoinsResourceValue(2e3)),Z.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),Z.quantityAdditive=2e3,Z.totalShopQuantity=20,Z.canHaveMultiples=!0,Z.type=U.Specialty,Et.push(Z);var C=new it;C.name="Course Maps",C.purchasePrice.push(this.getMedalResourceValue(2)),C.basePurchasePrice.push(this.getMedalResourceValue(2)),C.quantityMultiplier=2,C.totalShopQuantity=5,C.isAvailable=!1,C.canHaveMultiples=!0,C.type=U.Specialty,Et.push(C);var yt=new it;yt.name="Stockbreeder",yt.purchasePrice.push(this.getCoinsResourceValue(500)),yt.basePurchasePrice.push(this.getCoinsResourceValue(500)),yt.canHaveMultiples=!1,yt.type=U.Specialty,Et.push(yt);var xt=new it;xt.name="Team Manager",xt.purchasePrice.push(this.getMedalResourceValue(3)),xt.basePurchasePrice.push(this.getMedalResourceValue(3)),xt.canHaveMultiples=!0,xt.quantityMultiplier=2,xt.totalShopQuantity=19,xt.type=U.Specialty,Et.push(xt);var jt=new it;jt.name="Scouts",jt.purchasePrice.push(this.getCoinsResourceValue(1e4)),jt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),jt.canHaveMultiples=!1,jt.isAvailable=!1,jt.type=U.Specialty,Et.push(jt);var Kt=new it;Kt.name="Money Mark",Kt.purchasePrice.push(this.getCoinsResourceValue(500)),Kt.basePurchasePrice.push(this.getCoinsResourceValue(500)),Kt.canHaveMultiples=!1,Kt.type=U.Specialty,Et.push(Kt);var ot=new it;ot.name="National Races",ot.purchasePrice.push(this.getCoinsResourceValue(1e4)),ot.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),ot.canHaveMultiples=!1,ot.isAvailable=!1,ot.type=U.Specialty,Et.push(ot);var gt,Ri=new it;Ri.name="International Races",Ri.purchasePrice.push(this.getCoinsResourceValue(5e4)),Ri.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),Ri.canHaveMultiples=!1,Ri.isAvailable=!1,Ri.type=U.Specialty,Et.push(Ri),(gt=new it).name="Incubator Upgrade Lv1",gt.purchasePrice.push(this.getCoinsResourceValue(5e3)),gt.basePurchasePrice.push(this.getCoinsResourceValue(5e3)),gt.canHaveMultiples=!1,gt.isAvailable=!1,gt.type=U.Specialty,Et.push(gt),(gt=new it).name="Incubator Upgrade Lv2",gt.purchasePrice.push(this.getCoinsResourceValue(1e4)),gt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),gt.canHaveMultiples=!1,gt.isAvailable=!1,gt.type=U.Specialty,Et.push(gt),(gt=new it).name="Incubator Upgrade Lv3",gt.purchasePrice.push(this.getCoinsResourceValue(25e3)),gt.basePurchasePrice.push(this.getCoinsResourceValue(25e3)),gt.canHaveMultiples=!1,gt.isAvailable=!1,gt.type=U.Specialty,Et.push(gt),(gt=new it).name="Incubator Upgrade Lv4",gt.purchasePrice.push(this.getCoinsResourceValue(5e4)),gt.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),gt.canHaveMultiples=!1,gt.isAvailable=!1,gt.type=U.Specialty,Et.push(gt);var Ii=new it;Ii.name="Whistle",Ii.purchasePrice.push(this.getCoinsResourceValue(2500)),Ii.basePurchasePrice.push(this.getCoinsResourceValue(2500)),Ii.totalShopQuantity=1,Ii.canHaveMultiples=!1,Ii.isAvailable=!1,Ii.type=U.Specialty,Et.push(Ii);var on=new it;on.name="Golden Whistle",on.purchasePrice.push(this.getCoinsResourceValue(15e3)),on.basePurchasePrice.push(this.getCoinsResourceValue(15e3)),on.totalShopQuantity=1,on.canHaveMultiples=!1,on.isAvailable=!1,on.type=U.Specialty,Et.push(on);var Ui=new it;Ui.name="Talent Point Voucher",Ui.purchasePrice.push(this.getMedalResourceValue(25)),Ui.basePurchasePrice.push(this.getMedalResourceValue(25)),Ui.infiniteAmount=!0,Ui.canHaveMultiples=!0,Ui.quantityAdditive=25,Ui.isAvailable=!1,Ui.type=U.Specialty,Et.push(Ui),lt.name="Specialty",lt.itemList=Et,this.globalVar.shop.push(lt);var Mi=new ma,ci=[],Hi=new it;Hi.name=this.getEquipmentName(rt.headband),Hi.shortDescription=this.getEquipmentDescription(Hi.name),Hi.purchasePrice.push(this.getCoinsResourceValue(1e3)),Hi.canHaveMultiples=!0,Hi.infiniteAmount=!0,Hi.type=U.Equipment,ci.push(Hi);var Qi=new it;Qi.name=this.getEquipmentName(rt.pendant),Qi.shortDescription=this.getEquipmentDescription(Qi.name),Qi.purchasePrice.push(this.getCoinsResourceValue(1e3)),Qi.canHaveMultiples=!0,Qi.infiniteAmount=!0,Qi.type=U.Equipment,ci.push(Qi);var Gi=new it;Gi.name=this.getEquipmentName(rt.blinders),Gi.shortDescription=this.getEquipmentDescription(Gi.name),Gi.purchasePrice.push(this.getCoinsResourceValue(1e3)),Gi.canHaveMultiples=!0,Gi.infiniteAmount=!0,Gi.type=U.Equipment,ci.push(Gi);var Ki=new it;Ki.name=this.getEquipmentName(rt.quickSnack),Ki.shortDescription=this.getEquipmentDescription(Ki.name),Ki.purchasePrice.push(this.getCoinsResourceValue(1e3)),Ki.canHaveMultiples=!0,Ki.infiniteAmount=!0,Ki.type=U.Equipment,ci.push(Ki);var $t=new it;$t.name=this.getEquipmentName(rt.redBaton),$t.shortDescription=this.getEquipmentDescription($t.name),$t.purchasePrice.push(this.getCoinsResourceValue(2500)),$t.canHaveMultiples=!0,$t.infiniteAmount=!0,$t.isAvailable=!1,$t.type=U.Equipment,ci.push($t);var ei=new it;ei.name=this.getEquipmentName(rt.blueBaton),ei.shortDescription=this.getEquipmentDescription(ei.name),ei.purchasePrice.push(this.getCoinsResourceValue(2500)),ei.canHaveMultiples=!0,ei.infiniteAmount=!0,ei.isAvailable=!1,ei.type=U.Equipment,ci.push(ei);var ft=new it;ft.name=this.getEquipmentName(rt.violetBaton),ft.shortDescription=this.getEquipmentDescription(ft.name),ft.purchasePrice.push(this.getCoinsResourceValue(2500)),ft.canHaveMultiples=!0,ft.infiniteAmount=!0,ft.isAvailable=!1,ft.type=U.Equipment,ci.push(ft);var Vi=new it;Vi.name=this.getEquipmentName(rt.orangeBaton),Vi.shortDescription=this.getEquipmentDescription(Vi.name),Vi.purchasePrice.push(this.getCoinsResourceValue(2500)),Vi.canHaveMultiples=!0,Vi.infiniteAmount=!0,Vi.isAvailable=!1,Vi.type=U.Equipment,ci.push(Vi);var vi=new it;vi.name=this.getEquipmentName(rt.greenBaton),vi.shortDescription=this.getEquipmentDescription(vi.name),vi.purchasePrice.push(this.getCoinsResourceValue(2500)),vi.canHaveMultiples=!0,vi.infiniteAmount=!0,vi.isAvailable=!1,vi.type=U.Equipment,ci.push(vi);var wi=new it;wi.name=this.getEquipmentName(rt.yellowBaton),wi.shortDescription=this.getEquipmentDescription(wi.name),wi.purchasePrice.push(this.getCoinsResourceValue(2500)),wi.canHaveMultiples=!0,wi.infiniteAmount=!0,wi.isAvailable=!1,wi.type=U.Equipment,ci.push(wi),Mi.name="Equipment",Mi.itemList=ci,this.globalVar.shop.push(Mi)}getEquipmentName(e){return e===rt.headband?"Headband":e===rt.pendant?"Pendant":e===rt.blinders?"Blinders":e===rt.quickSnack?"Quick Snack":e===rt.carrotOnAStick?"Carrot on a Stick":e===rt.redBaton?"Red Baton":e===rt.blueBaton?"Blue Baton":e===rt.violetBaton?"Violet Baton":e===rt.yellowBaton?"Yellow Baton":e===rt.greenBaton?"Green Baton":e===rt.orangeBaton?"Orange Baton":e===rt.scaryMask?"Scary Mask":e===rt.runningShoes?"Running Shoes":e===rt.incense?"Incense":e===rt.athleticTape?"Athletic Tape":""}getEquipmentEnum(e){return"Headband"===e?rt.headband:"Pendant"===e?rt.pendant:"Blinders"===e?rt.blinders:"Quick Snack"===e?rt.quickSnack:"Carrot on a Stick"===e?rt.carrotOnAStick:"Red Baton"===e?rt.redBaton:"Blue Baton"===e?rt.blueBaton:"Violet Baton"===e?rt.violetBaton:"Yellow Baton"===e?rt.yellowBaton:"Green Baton"===e?rt.greenBaton:"Orange Baton"===e?rt.orangeBaton:"Scary Mask"===e?rt.scaryMask:"Running Shoes"===e?rt.runningShoes:"Incense"===e?rt.incense:"Athletic Tape"===e?rt.athleticTape:rt.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var i=new r0;if(i.barnNumber=1,i.isLocked=!1,i.size=_t.Small,i.purchasePrice=0,i.facilityUpgradePrice=500,i.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(s=>s.type===H.Horse);null!=r&&(r.associatedBarnNumber=i.barnNumber)}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.globalVar.barns.push(i);for(var a=2;a<=15;a++){var o=new r0;o.barnNumber=a,o.isLocked=!0,o.purchasePrice=500*(a-1),o.facilityUpgradePrice=500,o.size=_t.Small,this.globalVar.barns.push(o)}}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.AgilityCourse))}IncreaseCircuitRank(){var e=this.globalVar.circuitRank,i=e.replace(/([A-Z])[^A-Z]*$/,function(c){var u=c.charCodeAt(0);return 65===u?String.fromCharCode(u)+"Z":String.fromCharCode(--u)}),r=!1;this.utilityService.getNumericValueOfCircuitRank(this.globalVar.monoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.duoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.rainbowRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),r&&(this.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalVar.circuitRank=i;var l=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),l}IncreaseLocalRaceRank(e){var i="";e===Ut.Mono&&(i=this.globalVar.monoRank),e===Ut.Duo&&(i=this.globalVar.duoRank),e===Ut.Rainbow&&(i=this.globalVar.rainbowRank),e===Ut.Pinnacle&&(i=this.globalVar.pinnacleFloor);var r=i.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});e===Ut.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===Ut.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===Ut.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank)),e===Ut.Pinnacle&&(this.globalVar.pinnacleFloor=r,this.GenerateRainbowRaces(this.globalVar.pinnacleFloor))}increaseGrandPrixRaceRank(){if(null!=this.globalVar.eventRaceData){var i=this.globalVar.eventRaceData.rank.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});if(this.globalVar.eventRaceData.rank=i,this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank)%5==0)this.globalVar.eventRaceData.rankDistanceMultiplier*=2;else{var r=Math.ceil(this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank)/5);this.globalVar.eventRaceData.rankDistanceMultiplier+=r}this.initialGrandPrixSetup(this.globalVar.eventRaceData.rank,this.globalVar.eventRaceData.rankDistanceMultiplier),this.globalVar.eventRaceData.initialSetupComplete=!0,this.globalVar.notifications.isEventRaceNowActive=!0}}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e&&(this.globalVar.unlockables.set("monoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,i=["Mono Race",this.utilityService.getSanitizedHtml("A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, which means it's time to make some upgrades. Gain Facility Level points from winning these races that increase your Diminishing Returns max value. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu.</em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Monkey"),3===e){var r=this.globalVar.animals.find(oe=>oe.type===H.Monkey);if(null!=r&&(r.isAvailable=!0,this.unlockAnimalAbilities(r),this.unlockOtherRaceCourseTypeAnimals(r.raceCourseType),null!=(a=this.globalVar.animalDecks.find(oe=>oe.isPrimaryDeck)))){var o=!1;a.selectedAnimals.forEach(oe=>{oe.raceCourseType===(null==r?void 0:r.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(r)}i=["Monkey",this.getAnimalDescription("Monkey")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(4)+"Coaching"}else if(4===e){if(this.globalVar.unlockables.set("coaching",!0),null!=(s=this.globalVar.shop.find(oe=>"Specialty"===oe.name))){var l=s.itemList.find(oe=>"Whistle"===oe.name);null!=l&&(l.isAvailable=!0)}i=["Coaching","Take charge of your animal's training by giving them some coaching yourself. Visit a barn with an animal assigned and select 'Coach' to get started."];var c=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+c+" Coins"}else if(5===e)c=500,null==(u=this.globalVar.resources.find(_e=>"Coins"===_e.name))?this.globalVar.resources.push(new ie("Coins",c)):u.amount+=c,i=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(6)+"1 Team Manager";else if(6===e){c=1,null==(u=this.globalVar.resources.find(ge=>"Team Manager"===ge.name))?(this.globalVar.resources.push(new ie("Team Manager",c,U.Specialty)),null!=(d=this.globalVar.animalDecks.find(ge=>ge.isPrimaryDeck))&&(d.autoRunFreeRace=!0)):u.amount+=c,i=[c+" Team Manager","As your popularity has grown, you've attracted some new faces to your racing facility. Each Team Manager you receive will automatically run 1 free race per reset period. Buy more from the Shop."];var v=1e3;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations"}else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),i=["Barn Specializations","As your training facility grows, so should your barns. At barn upgrade level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e)c=1,null==(u=this.globalVar.resources.find(De=>"Headband"===De.name))?this.globalVar.resources.push(new ie("Headband",c,U.Equipment)):u.amount+=c,i=[c+" Headband","Equipment can be handled when viewing an animal from the Animals tab."],v=1e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(9)+v+" Coins";else if(9===e)c=1e3,null==(u=this.globalVar.resources.find(ge=>"Coins"===ge.name))?this.globalVar.resources.push(new ie("Coins",c)):u.amount+=c,i=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Hare";else if(10===e){var m=this.globalVar.animals.find(_e=>_e.type===H.Hare);null!=m&&(m.isAvailable=!0,this.unlockAnimalAbilities(m)),this.sortAnimalOrder(),i=["Hare",this.getAnimalDescription("Hare")],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+c+" Stat Increasing Food"}else if(12===e)this.increaseAllFood(c=20),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(13)+"Barn Row 2";else if(13===e){this.globalVar.unlockables.set("barnRow2",!0),i=["Barn Row 2",""];var _=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(14)+"Attraction Specialization"}else if(14===e)this.globalVar.unlockables.set("attractionSpecialization",!0),i=["Attraction Specialization",this.getSpecializationDescription("Attraction")+"<br/><br/><em>Barn Specializations are available to select once you upgrade a barn to level 10.</em>"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Dolphin";else if(15===e){var w=this.globalVar.animals.find(oe=>oe.type===H.Dolphin);null!=w&&(w.isAvailable=!0,this.unlockAnimalAbilities(w),this.unlockOtherRaceCourseTypeAnimals(w.raceCourseType),null!=(a=this.globalVar.animalDecks.find(_e=>_e.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(ge=>{ge.raceCourseType===(null==w?void 0:w.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(w))),this.sortAnimalOrder(),i=["Dolphin",this.getAnimalDescription("Dolphin")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+"1 Pendant"}else if(16===e)c=1,null==(u=this.globalVar.resources.find(ge=>"Pendant"===ge.name))?this.globalVar.resources.push(new ie("Pendant",c,U.Equipment)):u.amount+=c,i=[c+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],c=5,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+c+" Renown";else if(18===e)_=5,null==(S=this.globalVar.resources.find(_e=>"Renown"===_e.name))?this.globalVar.resources.push(new ie("Renown",_)):S.amount+=_,i=[_+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+"Grand Prix";else if(20===e){var d;this.globalVar.unlockables.set("grandPrix",!0),null!=(d=this.globalVar.animalDecks.find(ge=>ge.isPrimaryDeck))&&(d.isEventDeck=!0),i=["Grand Prix","Now that you've climbed the ranks and your racing team has turned some heads, you've received an invite to the Grand Prix invitational. Twice per week, a marathon style race runs over multiple days. Check the 'Event Races' tab to see more info."],c=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+c+" Stat Increasing Food"}else 22===e?(this.increaseAllFood(c=50),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],v=1500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(23)+v+" Coins"):23===e&&(c=1500,null==(u=this.globalVar.resources.find(ge=>"Coins"===ge.name))?this.globalVar.resources.push(new ie("Coins",c)):u.amount+=c,i=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Whale");if(25===e){var k=this.globalVar.animals.find(oe=>oe.type===H.Whale);null!=k&&(k.isAvailable=!0,this.unlockAnimalAbilities(k)),this.sortAnimalOrder(),i=["Whale",this.getAnimalDescription("Whale")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races"}else if(27===e)this.globalVar.unlockables.set("duoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,this.unlockTier2ShopItems(),i=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(29)+"Barn Row 3";else if(29===e){this.globalVar.unlockables.set("barnRow3",!0),i=["Barn Row 3",""];var T=2500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+T+" Coins"}else if(30===e){var R=2500;null==(u=this.globalVar.resources.find(ge=>"Coins"===ge.name))?this.globalVar.resources.push(new ie("Coins",R)):u.amount+=R,i=[R+" Coins",""],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(32)+c+" Mangoes"}else if(32===e)c=1,null==(u=this.globalVar.resources.find(ge=>"Blue Baton"===ge.name))?this.globalVar.resources.push(new ie("Blue Baton",c,U.Equipment)):u.amount+=c,i=[c+" Blue Baton","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+20+" Mangoes";else if(33===e)c=20,null==(u=this.globalVar.resources.find(ge=>"Mangoes"===ge.name))?this.globalVar.resources.push(new ie("Mangoes",c,U.Food)):u.amount+=c,i=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var W=this.globalVar.animals.find(_e=>_e.type===H.Penguin);null!=W&&(W.isAvailable=!0,this.unlockAnimalAbilities(W),this.unlockOtherRaceCourseTypeAnimals(W.raceCourseType),null!=(a=this.globalVar.animalDecks.find(ge=>ge.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(De=>{De.raceCourseType===(null==W?void 0:W.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(W))),this.sortAnimalOrder(),i=["Penguin",this.getAnimalDescription("Penguin")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getTundraDescription()+"</em>")],T=3500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(37)+T+" Coins"}else if(37===e)R=3500,null==(u=this.globalVar.resources.find(ge=>"Coins"===ge.name))?this.globalVar.resources.push(new ie("Coins",R)):u.amount+=R,i=[R+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals";else if(38===e)null==(u=this.globalVar.resources.find(_e=>"Medals"===_e.name))?this.globalVar.resources.push(new ie("Medals",5)):u.amount+=5,i=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 4";else if(40===e)this.globalVar.unlockables.set("barnRow4",!0),i=["Barn Row 4",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(41)+"Research Center Specialization";else if(41===e)this.globalVar.unlockables.set("researchCenterSpecialization",!0),i=["Research Center Specialization",this.getSpecializationDescription("Research Center")],c=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+c+" Stat Increasing Food";else if(43===e)this.increaseAllFood(c=250),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var a,ee=this.globalVar.animals.find(_e=>_e.type===H.Salamander);null!=ee&&(ee.isAvailable=!0,this.unlockAnimalAbilities(ee),this.unlockOtherRaceCourseTypeAnimals(ee.raceCourseType),null!=(a=this.globalVar.animalDecks.find(ge=>ge.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(De=>{De.raceCourseType===(null==ee?void 0:ee.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(ee))),this.sortAnimalOrder(),i=["Salamander",this.getAnimalDescription("Salamander")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getVolcanicDescription()+"</em>")],_=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+_+" Renown"}else if(47===e)_=10,null==(S=this.globalVar.resources.find(De=>"Renown"===De.name))?this.globalVar.resources.push(new ie("Renown",_)):S.amount+=_,i=[_+" Renown",""],R=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+R+" Coins";else if(50===e)T=15e3,null==(u=this.globalVar.resources.find(ge=>"Coins"===ge.name))?this.globalVar.resources.push(new ie("Coins",T)):u.amount+=T,i=[T+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e){var s;if(this.globalVar.unlockables.set("rainbowRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(s=this.globalVar.shop.find(_e=>"Specialty"===_e.name))){var be=s.itemList.find(_e=>"Talent Point Voucher"===_e.name);null!=be&&(be.isAvailable=!0)}i=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Amethyst Orb"}else if(55===e)this.globalVar.resources.push(new ie("Amethyst Orb",1,U.Equipment)),this.globalVar.unlockables.set("orbs",!0),i=["Amethyst Orb","You receive a glowing violet orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 5";else if(58===e)this.globalVar.unlockables.set("barnRow5",!0),i=["Barn Row 5",""],_=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(60)+"Sapphire Orb";else if(60===e)this.globalVar.resources.push(new ie("Sapphire Orb",1,U.Equipment)),i=["Sapphire Orb","You receive a glowing blue orb. What it does is a mystery."],c=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+c+" Mangoes";else if(62===e){var u;c=100,null==(u=this.globalVar.resources.find(ge=>"Mangoes"===ge.name))?this.globalVar.resources.push(new ie("Mangoes",c,U.Food)):u.amount+=c,i=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Amber Orb"}else if(65===e)this.globalVar.resources.push(new ie("Amber Orb",1,U.Equipment)),i=["Amber Orb","You receive a glowing orange orb. What it does is a mystery."],c=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+c+" Renown";else if(67===e){var S;_=25,null==(S=this.globalVar.resources.find(ge=>"Renown"===ge.name))?this.globalVar.resources.push(new ie("Renown",_)):S.amount+=_,i=[_+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Topaz Orb"}else 70===e?(this.globalVar.resources.push(new ie("Topaz Orb",1,U.Equipment)),i=["Topaz Orb","You receive a glowing yellow orb. What it does is a mystery."],c=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+c+" Stat Increasing Food Items"):73===e?(this.increaseAllFood(c=500),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Emerald Orb"):75===e?(this.globalVar.resources.push(new ie("Emerald Orb",1,U.Equipment)),i=["Emerald Orb","You receive a glowing green orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Ruby Orb"):78===e?(this.globalVar.resources.push(new ie("Ruby Orb",1,U.Equipment)),i=["Ruby Orb","You receive a glowing red orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(79)+"The Pinnacle"):79===e&&(this.globalVar.unlockables.set("thePinnacle",!1),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,i=["The Pinnacle",this.utilityService.getSanitizedHtml("A new race type has been unlocked! The Pinnacle is an old and mysterious fortress. Researchers have struggled to map out its interior due to the ever changing terrain and constantly shifting weather. Your team has been contracted out to help map the area out. <br/> As you race through each floor, you notice that you can insert the Orbs you have received into braziers to activate them. This increases your Orb level, allowing you to further power them up. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu. <b>This race is not implemented yet but will be soon!</b></em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(80)+"More Coming Soon!");return i}increaseAllFood(e){var i=this.globalVar.resources.find(c=>"Apples"===c.name);null==i?this.globalVar.resources.push(new ie("Apples",e,U.Food)):i.amount+=e;var r=this.globalVar.resources.find(c=>"Bananas"===c.name);null==r?this.globalVar.resources.push(new ie("Bananas",e,U.Food)):r.amount+=e;var a=this.globalVar.resources.find(c=>"Oranges"===c.name);null==a?this.globalVar.resources.push(new ie("Oranges",e,U.Food)):a.amount+=e;var o=this.globalVar.resources.find(c=>"Strawberries"===c.name);null==o?this.globalVar.resources.push(new ie("Strawberries",e,U.Food)):o.amount+=e;var s=this.globalVar.resources.find(c=>"Carrots"===c.name);null==s?this.globalVar.resources.push(new ie("Carrots",e,U.Food)):s.amount+=e;var l=this.globalVar.resources.find(c=>"Turnips"===c.name);null==l?this.globalVar.resources.push(new ie("Turnips",e,U.Food)):l.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var i=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,o=15,s=100,l=1.125,c=80*i,u=1.1,d=.9,_=3;"Z"===e?_=1:"Y"==e&&(_=2);for(var w=0;w<_;w++){var S=[],k="C"+i+w;if(i<=2){c=-37;var T=new Yi;T.courseType=j.Flatland,2===i?0===w?T.terrain=new Tn(qe.Sunny):1===w&&(T.terrain=new Tn(qe.Rainy)):T.terrain=new Tn(qe.Sunny),T.distance=Math.round(s*l**i+c),S.push(T)}else if(i<=14){c=3===i?5*i:35*i,(R=[]).push(j.Flatland),R.push(j.Mountain);var L=this.getCourseTypeInRandomOrderSeeded(R,k+"cl1"),W=this.utilityService.getRandomSeededNumber(20,80,k+"l1d"),_e=(ae=this.utilityService.getRandomSeededNumber(20,80,k+"l2d"))*(be=a/(W+ae));(oe=W*be)<o?(oe=0,_e=a):_e<o&&(_e=0,oe=a),oe>0&&((ge=new Yi).courseType=L[0],ge.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l1r")*(oe/a),ge.terrain=this.getRandomTerrain(ge.courseType,k+"lt1d"),S.push(ge)),_e>0&&((De=new Yi).courseType=L[1],De.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l2r")*(_e/a),De.terrain=this.getRandomTerrain(De.courseType,k+"lt2d"),S.push(De))}else{o=10,15===i?c=50*i:16===i&&(c=60*i);var R=[];i<=43?(R.push(j.Flatland),R.push(j.Mountain),R.push(j.Ocean)):i<=51?(R.push(j.Flatland),R.push(j.Mountain),R.push(j.Ocean),R.push(j.Tundra)):(R.push(j.Flatland),R.push(j.Mountain),R.push(j.Ocean),R.push(j.Tundra),R.push(j.Volcanic)),L=this.getCourseTypeInRandomOrderSeeded(R,k+"courses1"),W=this.utilityService.getRandomSeededNumber(20,80,k+"l1d");var be,oe,ge,De,ae=this.utilityService.getRandomSeededNumber(20,80,k+"l2d"),dt=this.utilityService.getRandomSeededNumber(20,80,k+"l3d"),nt=(_e=ae*(be=a/(W+ae+dt)),dt*be);if((oe=W*be)<o?(_e+=oe/2,nt+=oe/2,oe=0):_e<o?(oe+=_e/2,nt+=_e/2,_e=0):nt<o&&(oe+=nt/2,_e+=nt/2,nt=0),oe>0&&((ge=new Yi).courseType=L[0],ge.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l1r")*(oe/a),ge.terrain=this.getRandomTerrain(ge.courseType,k+"tl1d"),S.push(ge)),_e>0&&((De=new Yi).courseType=L[1],De.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l2r")*(_e/a),De.terrain=this.getRandomTerrain(De.courseType,k+"tl2d"),S.push(De)),nt>0){var Dt=new Yi;Dt.courseType=L[2],Dt.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l3r")*(nt/a),Dt.terrain=this.getRandomTerrain(Dt.courseType,k+"tl3d"),S.push(Dt)}}var Qe=0;S.forEach(lt=>{Qe+=lt.distance}),S.forEach(lt=>{lt.pathData=this.GenerateRaceLegPaths(lt,Qe)}),this.globalVar.circuitRaces.push(new gn(S,e,!0,r,Qe,a,this.GenerateCircuitRaceRewards(e),void 0,void 0,Ie.circuit)),r+=1}}reorganizeLegsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.courseType)-i.courseTypeOrder.indexOf(a.courseType)):e}reorganizeAnimalsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.raceCourseType)-i.courseTypeOrder.indexOf(a.raceCourseType)):e}getCourseTypeInRandomOrder(e){for(var i=[],r=e.length,a=0;a<r;a++){var o=this.utilityService.getRandomInteger(1,e.length);i.push(e[o-1]),e=e.filter(s=>s!==e[o-1])}return i}getCourseTypeInRandomOrderSeeded(e,i="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getRandomTerrain(e,i){var r=[];e===j.Flatland||e===j.Mountain?(r.push(qe.Sunny),r.push(qe.Rainy),r.push(qe.Stormy),r.push(qe.Torrid),r.push(qe.Snowfall)):e===j.Ocean?(r.push(qe.Sunny),r.push(qe.Maelstrom),r.push(qe.Stormy),r.push(qe.Snowfall)):e===j.Tundra?(r.push(qe.Sunny),r.push(qe.Hailstorm),r.push(qe.Stormy),r.push(qe.Snowfall)):e===j.Volcanic&&(r.push(qe.Sunny),r.push(qe.Ashfall),r.push(qe.Stormy),r.push(qe.Torrid));var a;return a=null!=i?this.utilityService.getRandomSeededInteger(1,r.length,i):this.utilityService.getRandomInteger(1,r.length),new Tn(r[a-1])}getRandomOrbListOrder(e,i="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getAnimalStatLossFromExhaustionEventRace(e){if(null==this.globalVar.eventRaceData.animalData||0===this.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:i.exhaustionStatReduction}getRandomGrandPrixWeatherCluster(e,i){var r=[];r.push(er.clearSkies),r.push(er.coldSpell),r.push(er.inclementWeather);var o=r[(null!=e?this.utilityService.getRandomSeededInteger(1,r.length,e):this.utilityService.getRandomInteger(1,r.length))-1];if(this.globalVar.eventRaceData.animalData.length>0){var s=.2,l=this.globalVar.modifiers.find(c=>"weatherMoraleBoostModifier"===c.text);void 0!==l&&(s=l.value),this.globalVar.eventRaceData.animalData.forEach(c=>{var u=this.globalVar.animals.find(d=>d.type===c.associatedAnimalType);void 0!==u&&(void 0!==i&&this.animalGainsMoraleBoostFromWeather(u.raceCourseType,i)&&this.changeGrandPrixMorale(u.type,-s),this.animalGainsMoraleBoostFromWeather(u.raceCourseType,o)&&this.changeGrandPrixMorale(u.type,s))})}return o}changeGrandPrixMorale(e,i){if(null!=this.globalVar.eventRaceData&&null!=this.globalVar.eventRaceData.animalData&&0!==this.globalVar.eventRaceData.animalData.length){var r=this.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e);null!=r&&(r.morale+=i,r.morale>=3&&(r.morale=3),r.morale<=.5&&(r.morale=.5))}}animalGainsMoraleBoostFromWeather(e,i){var r=!1;return(i===er.clearSkies&&(e===j.Volcanic||e===j.Flatland)||i===er.inclementWeather&&e===j.Ocean||i===er.coldSpell&&(e===j.Tundra||e===j.Mountain))&&(r=!0),r}getRandomGrandPrixTerrainFromWeatherCluster(e,i,r){var a=[];e===er.clearSkies?(a.push(qe.Sunny),a.push(qe.Torrid),a.push(qe.Ashfall)):e===er.coldSpell?(a.push(qe.Snowfall),a.push(qe.Hailstorm),a.push(qe.Sunny)):e===er.inclementWeather&&(a.push(qe.Rainy),a.push(qe.Stormy),a.push(qe.Maelstrom),a.push(qe.Hailstorm)),i===j.Flatland&&(a=a.filter(s=>s!==qe.Ashfall&&s!==qe.Hailstorm&&s!==qe.Maelstrom)),i===j.Mountain&&(a=a.filter(s=>s!==qe.Ashfall&&s!==qe.Hailstorm&&s!==qe.Maelstrom)),i===j.Ocean&&(a=a.filter(s=>s!==qe.Ashfall&&s!==qe.Hailstorm&&s!==qe.Rainy&&s!==qe.Torrid)),i===j.Tundra&&(a=a.filter(s=>s!==qe.Ashfall&&s!==qe.Rainy&&s!==qe.Maelstrom&&s!==qe.Torrid)),i===j.Volcanic&&(a=a.filter(s=>s!==qe.Snowfall&&s!==qe.Hailstorm&&s!==qe.Maelstrom));var o;return o=null!=r?this.utilityService.getRandomSeededInteger(1,a.length,r):this.utilityService.getRandomInteger(1,a.length),new Tn(a[o-1])}stopGrandPrixRace(){null!=this.globalVar.eventRaceData&&(this.globalVar.eventRaceData.animalData.forEach(e=>{e.isCurrentlyRacing=!1}),this.globalVar.eventRaceData.isLoading=!1,this.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalVar.eventRaceData.isRunning=!1,this.globalVar.eventRaceData.isCatchingUp=!1,this.globalVar.eventRaceData.overallTimeCounter-=this.globalVar.eventRaceData.segmentTimeCounter,this.globalVar.eventRaceData.segmentTimeCounter=0,void 0!==this.globalVar.eventRaceData.currentRaceSegment&&this.globalVar.eventRaceData.currentRaceSegment.reduceExportSize())}unlockTier2ShopItems(){var e=this.globalVar.shop.find(S=>"Specialty"===S.name);if(null!=e){var i=e.itemList.find(S=>"Incubator Upgrade Lv1"===S.name);null!=i&&(i.isAvailable=!0);var r=e.itemList.find(S=>"National Races"===S.name);null!=r&&(r.isAvailable=!0);var a=e.itemList.find(S=>"Scouts"===S.name);null!=a&&(a.isAvailable=!0);var o=e.itemList.find(S=>"Course Maps"===S.name);null!=o&&(o.isAvailable=!0)}var s=this.globalVar.shop.find(S=>"Equipment"===S.name);if(null!=s){var l=s.itemList.find(S=>"Red Baton"===S.name);null!=l&&(l.isAvailable=!0);var c=s.itemList.find(S=>"Orange Baton"===S.name);null!=c&&(c.isAvailable=!0);var u=s.itemList.find(S=>"Green Baton"===S.name);null!=u&&(u.isAvailable=!0);var d=s.itemList.find(S=>"Yellow Baton"===S.name);null!=d&&(d.isAvailable=!0);var v=s.itemList.find(S=>"Blue Baton"===S.name);null!=v&&(v.isAvailable=!0);var m=s.itemList.find(S=>"Violet Baton"===S.name);null!=m&&(m.isAvailable=!0)}var _=this.globalVar.shop.find(S=>"Food"===S.name);if(null!=_){var w=_.itemList.find(S=>"Gingko Leaves"===S.name);null!=w&&(w.isAvailable=!0)}}lockTier2ShopItems(){var e=this.globalVar.shop.find(_=>"Specialty"===_.name);if(null!=e){var i=e.itemList.find(_=>"Incubator Upgrade Lv1"===_.name);null!=i&&(i.isAvailable=!1);var r=e.itemList.find(_=>"National Races"===_.name);null!=r&&(r.isAvailable=!1);var a=e.itemList.find(_=>"Scouts"===_.name);null!=a&&(a.isAvailable=!1);var o=e.itemList.find(_=>"Course Maps"===_.name);null!=o&&(o.isAvailable=!1)}var s=this.globalVar.shop.find(_=>"Equipment"===_.name);if(null!=s){var l=s.itemList.find(_=>"Red Baton"===_.name);null!=l&&(l.isAvailable=!1);var c=s.itemList.find(_=>"Orange Baton"===_.name);null!=c&&(c.isAvailable=!1);var u=s.itemList.find(_=>"Green Baton"===_.name);null!=u&&(u.isAvailable=!1);var d=s.itemList.find(_=>"Yellow Baton"===_.name);null!=d&&(d.isAvailable=!1);var v=s.itemList.find(_=>"Blue Baton"===_.name);null!=v&&(v.isAvailable=!1);var m=s.itemList.find(_=>"Violet Baton"===_.name);null!=m&&(m.isAvailable=!1)}}GetCircuitRankValue(e){for(var i=1;e.length>1;){var r=e.length;i+=26,(e=e.substring(1)).length>=r&&(e="")}return i+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new ie("Coins",Math.round(50*1.0135**i))),l.push(new ie("Renown",parseFloat((1.03*1.03**i/100).toFixed(3)))),l}GenerateLocalRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new ie("Coins",Math.round(10*1.013**i))),l.push(new ie("Renown",parseFloat((1.01*1.015**i/100).toFixed(3)))),l}GenerateMonoRaceRewards(e){var i=[];i.push(new ie("Facility Level",1,U.Progression));var r=this.GetCircuitRankValue(e);return i.push(new ie("Coins",Math.round(60*1.0135**r))),i.push(new ie("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateDuoRaceRewards(e){var i=[];i.push(new ie("Research Level",1,U.Progression));var r=this.GetCircuitRankValue(e);return i.push(new ie("Coins",Math.round(125*1.0135**r))),i.push(new ie("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateRainbowRaceRewards(e){var i=[];i.push(new ie("Talent Points",1,U.Progression));var r=this.GetCircuitRankValue(e);return i.push(new ie("Coins",Math.round(250*1.012**r))),i.push(new ie("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank),this.GeneratePinnacleRaces(this.globalVar.pinnacleFloor)}GenerateMonoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(S=>S.localRaceType!==Ut.Mono),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=100*i,d=[],v=new Yi;if(1===i)v.courseType=j.Flatland;else{var m=[];i<14?(m.push(j.Flatland),m.push(j.Mountain)):i<40?(m.push(j.Flatland),m.push(j.Mountain),m.push(j.Ocean)):i<50?(m.push(j.Flatland),m.push(j.Mountain),m.push(j.Ocean),m.push(j.Tundra)):(m.push(j.Flatland),m.push(j.Mountain),m.push(j.Ocean),m.push(j.Tundra),m.push(j.Volcanic)),null!=this.globalVar.lastMonoRaceCourseType&&i>2&&(m=m.filter(S=>S!==this.globalVar.lastMonoRaceCourseType));var _=this.getCourseTypeInRandomOrderSeeded(m,"monoseed"+e+i);v.courseType=_[0]}v.terrain=this.getRandomTerrain(v.courseType,"monoseed"+e+i),v.distance=Math.round((155*1.155**i+l)*this.utilityService.getRandomSeededNumber(.9,1.1)),d.push(v);var w=v.distance;d.forEach(S=>{S.pathData=this.GenerateRaceLegPaths(S,w)}),this.globalVar.localRaces.push(new gn(d,e,!1,r,w,90,this.GenerateMonoRaceRewards(e),Ut.Mono,void 0,Ie.special)),r+=1}}GenerateDuoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(k=>k.localRaceType!==Ut.Duo),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,u=[],d=[];i<=10?(d.push(j.Flatland),d.push(j.Mountain),d.push(j.Ocean)):i<=20?(d.push(j.Flatland),d.push(j.Mountain),d.push(j.Ocean),d.push(j.Tundra)):(d.push(j.Flatland),d.push(j.Mountain),d.push(j.Ocean),d.push(j.Tundra),d.push(j.Volcanic));var v=this.getCourseTypeInRandomOrderSeeded(d,"duooseed"+e+i),m=this.utilityService.getRandomSeededNumber(.8,1.2),_=new Yi;_.courseType=v[0],_.distance=Math.round(6500*1.1**i*m*.5),_.terrain=this.getRandomTerrain(_.courseType,"duoseedl1"+e+i),u.push(_);var w=new Yi;w.courseType=v[1],w.distance=Math.round(6500*1.1**i*m*.5),w.terrain=this.getRandomTerrain(w.courseType,"duoseedl2"+e+i),u.push(w);var S=_.distance+w.distance;u.forEach(k=>{k.pathData=this.GenerateRaceLegPaths(k,S)}),this.globalVar.localRaces.push(new gn(u,e,!1,r,S,80,this.GenerateDuoRaceRewards(e),Ut.Duo,void 0,Ie.special)),r+=1}}GenerateRainbowRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(L=>L.localRaceType!==Ut.Rainbow),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,o=1e5,s=1.135,u=[],d=[];d.push(j.Flatland),d.push(j.Mountain),d.push(j.Ocean),d.push(j.Tundra),d.push(j.Volcanic);var v=this.getCourseTypeInRandomOrderSeeded(d,"rainbow"+e+i),m=this.utilityService.getRandomSeededNumber(.8,1.2),_=new Yi;_.courseType=v[0],_.distance=Math.round(o*s**i*m*.2),_.terrain=this.getRandomTerrain(_.courseType,"rainbowl1"+e+i),u.push(_);var w=new Yi;w.courseType=v[1],w.distance=Math.round(o*s**i*m*.2),w.terrain=this.getRandomTerrain(w.courseType,"rainbowl2"+e+i),u.push(w);var S=new Yi;S.courseType=v[2],S.distance=Math.round(o*s**i*m*.2),S.terrain=this.getRandomTerrain(S.courseType,"rainbowl3"+e+i),u.push(S);var k=new Yi;k.courseType=v[3],k.distance=Math.round(o*s**i*m*.2),k.terrain=this.getRandomTerrain(k.courseType,"rainbowl4"+e+i),u.push(k);var T=new Yi;T.courseType=v[4],T.distance=Math.round(o*s**i*m*.2),T.terrain=this.getRandomTerrain(T.courseType,"rainbowl5"+e+i),u.push(T);var R=_.distance+w.distance+S.distance+k.distance+T.distance;u.forEach(L=>{L.pathData=this.GenerateRaceLegPaths(L,R)}),this.globalVar.localRaces.push(new gn(u,e,!1,r,R,120,this.GenerateRainbowRaceRewards(e),Ut.Rainbow,void 0,Ie.special)),r+=1}}GeneratePinnacleRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(oe=>oe.localRaceType!==Ut.Pinnacle),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=1,c=this.getRandomPinnacleCondition(i,"pinnaclel1"+e+i);c.containsCondition(Lt[Lt.threeHundredSecondRace])&&(l=1.6667),c.containsCondition(li[li.thirtySecondRace])&&(l=.25);var v=[],m=this.utilityService.getRandomSeededNumber(.8,1.2),_=this.globalVar.animalDecks.find(oe=>oe.isPrimaryDeck);if(void 0!==_){var w=_.selectedAnimals.slice(0,4);c.containsCondition(Lt[Lt.twoRacersOnly])&&(w=_.selectedAnimals.slice(0,2)),c.containsCondition(Lt[Lt.threeRacersOnly])&&(w=_.selectedAnimals.slice(0,3));for(var S=Math.round(125e4*1.115**i*m*l),k=0;k<w.length;k++){var T=1/w.length,R=new Yi;R.courseType=w[k].raceCourseType,R.distance=T*S,R.terrain=this.getRandomTerrain(R.courseType,"pinnaclel"+e+i+k),v.push(R)}v.forEach(oe=>{oe.pathData=this.GenerateRaceLegPaths(oe,S)});var L=[];L.push(tt.amber),L.push(tt.amethyst),L.push(tt.ruby),L.push(tt.emerald),L.push(tt.sapphire),L.push(tt.topaz);var W=this.getRandomOrbListOrder(L,"pinnaclel1"+e+i),ae=0,ee=[];W.forEach(oe=>{ae+=1;var _e=new BD(this.getBrazierFromOrbType(oe),S*(ae/(W.length+1)));ee.push(_e)});var be=new gn(v,e,!1,r,S,180,[],Ut.Pinnacle,void 0,Ie.special,void 0,ee);be.pinnacleConditions=c,c.containsCondition(Lt[Lt.threeHundredSecondRace])&&(be.timeToComplete=300),c.containsCondition(li[li.thirtySecondRace])&&(be.timeToComplete=30),this.globalVar.localRaces.push(be),r+=1}}}getRandomPinnacleCondition(e,i="seeded"){var r=new o0;if(e<10)return 1===e&&r.easyConditions.push(Lt.threeRacersOnly),2===e&&r.easyConditions.push(Lt.threeHundredSecondRace),3===e&&r.mediumConditions.push(li.brokenFloorboards),4===e&&r.mediumConditions.push(li.longCooldowns),5===e&&r.hardConditions.push(un.noBurst),6===e&&r.easyConditions.push(Lt.noRelayEffects),7===e&&r.easyConditions.push(Lt.twoRacersOnly),8===e&&r.mediumConditions.push(li.thirtySecondRace),9===e&&r.mediumConditions.push(li.sticky),10===e&&r.hardConditions.push(un.exhaustionPenaltyIncreased),r;var a=e%5;if(1===a||2===a){var s=this.getAllEasyPinnacleConditions(),l=this.utilityService.getRandomSeededInteger(1,s.length-1,i);r.easyConditions.push(s[l])}else if(3===a||4===a){var c=this.getAllMediumPinnacleConditions();l=this.utilityService.getRandomSeededInteger(1,c.length-1,i),r.mediumConditions.push(c[l])}else if(0===a){var u=this.getAllHardPinnacleConditions();l=this.utilityService.getRandomSeededInteger(1,u.length-1,i),r.hardConditions.push(u[l])}return r}getAllEasyPinnacleConditions(){var e=[];return e.push(Lt.noRelayEffects),e.push(Lt.steamy),e.push(Lt.threeHundredSecondRace),e.push(Lt.threeRacersOnly),e.push(Lt.twoRacersOnly),e}getAllMediumPinnacleConditions(){var e=[];return e.push(li.brokenFloorboards),e.push(li.fourRacersOnly),e.push(li.longCooldowns),e.push(li.sticky),e.push(li.thirtySecondRace),e}getAllHardPinnacleConditions(){var e=[];return e.push(un.exhaustionPenaltyIncreased),e.push(un.lowStaminaRelay),e.push(un.noBurst),e.push(un.reduceSpeedOnRelay),e.push(un.unfocusedRelay),e}getPinnacleFloorConditionDescription(e){var i="";return e.easyConditions.length>0&&e.easyConditions.forEach(r=>{r===Lt.noRelayEffects&&(i="No Relay Effects"),r===Lt.steamy&&(i="Steamy"),r===Lt.threeHundredSecondRace&&(i="300 seconds"),r===Lt.threeRacersOnly&&(i="3 Racers"),r===Lt.twoRacersOnly&&(i="2 Racers")}),e.mediumConditions.length>0&&e.mediumConditions.forEach(r=>{r===li.fourRacersOnly&&(i="4 Racers"),r===li.brokenFloorboards&&(i="Broken Floorboards"),r===li.longCooldowns&&(i="Long Cooldowns"),r===li.sticky&&(i="Sticky"),r===li.thirtySecondRace&&(i="30 seconds")}),e.hardConditions.length>0&&e.hardConditions.forEach(r=>{r===un.exhaustionPenaltyIncreased&&(i="Exhaustion Penalty"),r===un.lowStaminaRelay&&(i="Low Stamina Relay"),r===un.noBurst&&(i="No Burst"),r===un.reduceSpeedOnRelay&&(i="Reduce Speed On Relay"),r===un.unfocusedRelay&&(i="Unfocused Relay")}),i}getBrazierFromOrbType(e){return e===tt.amber?ni.amberBrazier:e===tt.amethyst?ni.amethystBrazier:e===tt.ruby?ni.rubyBrazier:e===tt.topaz?ni.topazBrazier:e===tt.emerald?ni.emeraldBrazier:e===tt.sapphire?ni.sapphireBrazier:void 0}getOrbTypeFromBrazier(e){return e===ni.amberBrazier?tt.amber:e===ni.amethystBrazier?tt.amethyst:e===ni.rubyBrazier?tt.ruby:e===ni.topazBrazier?tt.topaz:e===ni.emeraldBrazier?tt.emerald:e===ni.sapphireBrazier?tt.sapphire:void 0}getOrbTypeFromResource(e){var i=tt.amber;return"Amethyst Orb"===e.name&&(i=tt.amethyst),"Emerald Orb"===e.name&&(i=tt.emerald),"Ruby Orb"===e.name&&(i=tt.ruby),"Sapphire Orb"===e.name&&(i=tt.sapphire),"Topaz Orb"===e.name&&(i=tt.topaz),i}getOrbDetailsFromType(e){return this.globalVar.orbStats.allOrbs.find(r=>r.type===e)}getOrbDescription(e){var i="";return e===tt.amber&&(i="Increase the Acceleration Rate of the user by "+(100*(this.globalVar.orbStats.getAccelerationIncrease()-1)).toFixed(0)+"%. Gain orb experience for every meter covered while below your max speed."),e===tt.amethyst&&(i="Increase the Power Efficiency of the user by "+(100*(this.globalVar.orbStats.getPowerIncrease()-1)).toFixed(0)+"%. Gain orb experience for every ability use."),e===tt.emerald&&(i="Increase the Adaptability Distance of the user by "+(100*(this.globalVar.orbStats.getAdaptabilityIncrease()-1)).toFixed(0)+"%. Gain orb experience for every meter covered during a special path without stumbling."),e===tt.ruby&&(i="Increase the Max Speed of the user by "+(100*(this.globalVar.orbStats.getMaxSpeedIncrease()-1)).toFixed(0)+"%.  Gain orb experience for every meter covered while at or above your max speed."),e===tt.sapphire&&(i="Increase the Focus Distance of the user by "+(100*(this.globalVar.orbStats.getFocusIncrease()-1)).toFixed(0)+"%.  Gain orb experience for every meter covered prior to losing focus."),e===tt.topaz&&(i="Increase the Stamina of the user by "+(100*(this.globalVar.orbStats.getEnduranceIncrease()-1)).toFixed(0)+"%.  Gain orb experience for every meter covered prior to running out of stamina."),i+" This increase is reduced proportionally for however many racers use the same orb during a single race."}getOrbNameFromType(e){return e===tt.amber?"Amber Orb":e===tt.amethyst?"Amethyst Orb":e===tt.ruby?"Ruby Orb":e===tt.topaz?"Topaz Orb":e===tt.emerald?"Emerald Orb":e===tt.sapphire?"Sapphire Orb":""}increaseOrbLevel(e){e.level+=1,e.xpNeededForLevel-=e.xp}increaseAmberOrbXp(e){var r=1e-4*e,a=this.getOrbDetailsFromType(tt.amber);void 0!==a&&(a.level<a.maxLevel?(a.xp+=r,a.xp>=a.xpNeededForLevel&&a.level<a.maxLevel&&this.increaseOrbLevel(a)):a.level===a.maxLevel&&(a.xp=0))}increaseAmethystOrbXp(){var r=this.getOrbDetailsFromType(tt.amethyst);void 0!==r&&(r.level<r.maxLevel?(r.xp+=3,r.xp>=r.xpNeededForLevel&&r.level<r.maxLevel&&this.increaseOrbLevel(r)):r.level===r.maxLevel&&(r.xp=0))}increaseEmeraldOrbXp(e){var r=75e-5*e;console.log("Emerald Meters: "+e+" XP Gain: "+r);var a=this.getOrbDetailsFromType(tt.emerald);void 0!==a&&(a.level<a.maxLevel?(a.xp+=r,a.xp>=a.xpNeededForLevel&&a.level<a.maxLevel&&this.increaseOrbLevel(a)):a.level===a.maxLevel&&(a.xp=0))}increaseRubyOrbXp(e){var r=1e-4*e,a=this.getOrbDetailsFromType(tt.ruby);void 0!==a&&(a.level<a.maxLevel?(a.xp+=r,a.xp>=a.xpNeededForLevel&&a.level<a.maxLevel&&this.increaseOrbLevel(a)):a.level===a.maxLevel&&(a.xp=0))}increaseSapphireOrbXp(e){var r=25e-5*e,a=this.getOrbDetailsFromType(tt.sapphire);void 0!==a&&(a.level<a.maxLevel?(a.xp+=r,a.xp>=a.xpNeededForLevel&&a.level<a.maxLevel&&this.increaseOrbLevel(a)):a.level===a.maxLevel&&(a.xp=0))}increaseTopazOrbXp(e){var r=5e-5*e,a=this.getOrbDetailsFromType(tt.topaz);void 0!==a&&(a.level<a.maxLevel?(a.xp+=r,a.xp>=a.xpNeededForLevel&&a.level<a.maxLevel&&this.increaseOrbLevel(a)):a.level===a.maxLevel&&(a.xp=0))}getAverageStumbleFrequencyForCourseType(e){var i=0;return e===j.Flatland&&(i=(new Or(ze.Bumps).frequencyOfStumble+new Or(ze.S).frequencyOfStumble)/2),e===j.Mountain&&(i=(new Or(ze.Gaps).frequencyOfStumble+new Or(ze.Crevasse).frequencyOfStumble)/2),e===j.Ocean&&(i=(new Or(ze.Dive).frequencyOfStumble+new Or(ze.Waves).frequencyOfStumble)/2),e===j.Tundra&&(i=(new Or(ze.Cavern).frequencyOfStumble+new Or(ze.Hills).frequencyOfStumble)/2),e===j.Volcanic&&(i=(new Or(ze.FirstRegular).frequencyOfStumble+new Or(ze.SteppingStones).frequencyOfStumble)/2),i}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=60,r=15,a=90,o=1.125,s=12*e;e>=15&&(s=50*e);var l=1.05,c=.8,v=[];if(e<=2){var m=new Yi;m.courseType=j.Flatland,m.terrain=this.getRandomTerrain(m.courseType),m.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l)),v.push(m)}else if(e<=15){(_=[]).push(j.Flatland),_.push(j.Mountain);var w=this.getCourseTypeInRandomOrder(_),S=this.utilityService.getRandomNumber(10,90),W=(k=this.utilityService.getRandomNumber(10,90))*(R=i/(S+k));(L=S*R)<r?(L=0,W=i):W<r&&(W=0,L=i),L>0&&((ae=new Yi).courseType=w[0],ae.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(L/i),ae.terrain=this.getRandomTerrain(ae.courseType),v.push(ae)),W>0&&((ee=new Yi).courseType=w[1],ee.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(W/i),ee.terrain=this.getRandomTerrain(ee.courseType),v.push(ee))}else{r=10;var _=[];e<45?(_.push(j.Flatland),_.push(j.Mountain),_.push(j.Ocean)):e<53?(_.push(j.Flatland),_.push(j.Mountain),_.push(j.Ocean),_.push(j.Tundra)):(_.push(j.Flatland),_.push(j.Mountain),_.push(j.Ocean),_.push(j.Tundra),_.push(j.Volcanic)),w=this.getCourseTypeInRandomOrder(_),S=this.utilityService.getRandomNumber(10,90);var R,L,ae,ee,k=this.utilityService.getRandomNumber(10,90),be=this.utilityService.getRandomNumber(10,90),oe=(W=k*(R=i/(S+k+be)),be*R);if((L=S*R)<r?(W+=L/2,oe+=L/2,L=0):W<r?(L+=W/2,oe+=W/2,W=0):oe<r&&(L+=oe/2,W+=oe/2,oe=0),L>0&&((ae=new Yi).courseType=w[0],ae.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(L/i),ae.terrain=this.getRandomTerrain(ae.courseType),v.push(ae)),W>0&&((ee=new Yi).courseType=w[1],ee.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(W/i),ee.terrain=this.getRandomTerrain(ee.courseType),v.push(ee)),oe>0){var _e=new Yi;_e.courseType=w[2],_e.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(oe/i),_e.terrain=this.getRandomTerrain(_e.courseType),v.push(_e)}}var ge=0,De=this.globalVar.animalDecks.find(dt=>dt.isPrimaryDeck);return void 0!==De&&(v=this.reorganizeLegsByDeckOrder(v,De)),v.forEach(dt=>{ge+=dt.distance}),v.forEach(dt=>{dt.pathData=this.GenerateRaceLegPaths(dt,ge)}),new gn(v,this.globalVar.circuitRank,!1,1,ge,i,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),Ut.Free,void 0,Ie.circuit,void 0)}getTotalSegments(e){return(null==this.globalVar.circuitRaces||0===this.globalVar.circuitRaces.length)&&this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),Math.ceil(this.globalVar.eventRaceData.grandPrixTimeLength/this.globalVar.eventRaceData.segmentTime),e/this.utilityService.getClosestWholeNumber(this.globalVar.circuitRaces[0].length*(this.globalVar.eventRaceData.segmentTime/this.globalVar.circuitRaces[0].timeToComplete),e)}initialGrandPrixSetup(e,i){this.globalVar.eventRaceData=new qn,this.globalVar.eventRaceData.rank=e,this.utilityService.getNumericValueOfCircuitRank(e),this.globalVar.eventRaceData.rankDistanceMultiplier=i,this.globalVar.eventRaceData.totalDistance=5e8*this.globalVar.eventRaceData.rankDistanceMultiplier,this.globalVar.eventRaceData.currentRaceSegmentCount=0,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.totalSegments=this.getTotalSegments(this.globalVar.eventRaceData.totalDistance),this.globalVar.eventRaceData.remainingRewards=this.globalVar.eventRaceData.totalRewards=this.getGrandPrixRewardCount(),this.globalVar.eventRaceData.animalData=[],this.globalVar.animals.forEach(a=>{this.globalVar.eventRaceData.animalData.push(new FD(a.type))}),this.globalVar.eventRaceData.weatherCluster=this.getRandomGrandPrixWeatherCluster(),this.globalVar.previousEventRewards=[]}animalCanRaceGrandPrix(e){var i=!0,r=this.getBreedLevelRequiredForGrandPrix();e.breedLevel<r&&(i=!1);var a=this.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);return null!=a&&a.exhaustionStatReduction<.5&&(i=!1),i}getGrandPrixRacingAnimal(){var e=new Pt,i=this.globalVar.animalDecks.find(l=>l.isEventDeck);if(void 0!==i){var r=[];if(i.isCourseOrderActive){for(var a=0;a<i.selectedAnimals.length;a++)if(i.courseTypeOrder.length>a){var o=i.courseTypeOrder[a],s=i.selectedAnimals.find(l=>l.raceCourseType===o);void 0!==s&&r.push(s)}}else i.selectedAnimals.forEach(l=>{r.push(l)});r=r.filter(l=>this.animalCanRaceGrandPrix(l)),this.globalVar.eventRaceData.isCatchingUp&&(r=r.filter(l=>!this.shouldShowSlowSegmentWarning(l))),r.length>0&&(e=r[0])}return this.globalVar.eventRaceData.animalData.forEach(l=>{if(l.isCurrentlyRacing){var c=this.globalVar.animals.find(u=>u.type===l.associatedAnimalType);void 0!==c&&(e=c.makeCopy(c))}}),e}getCurrentlyActiveGrandPrixRacingAnimal(){var e=new Pt;return this.globalVar.eventRaceData.isRunning&&this.globalVar.eventRaceData.animalData.forEach(i=>{if(i.isCurrentlyRacing){var r=this.globalVar.animals.find(a=>a.type===i.associatedAnimalType);void 0!==r&&(e=r.makeCopy(r))}}),e}getExhaustionOfAnimal(e){var i;return null===(i=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===i?void 0:i.exhaustionStatReduction}getMoraleOfAnimal(e){var i;return null===(i=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===i?void 0:i.morale}generateGrandPrixSegment(e,i){var r=this.globalVar.eventRaceData,a=this.getRemainingEventRaceTime();void 0!==i&&(0===a||null==a)&&(a=i);var o=r.totalDistance/r.totalSegments,s=[],l=new Yi;return l.courseType=e.raceCourseType,l.terrain=this.getRandomGrandPrixTerrainFromWeatherCluster(this.globalVar.eventRaceData.weatherCluster,l.courseType,this.getEventStartDateTime().toString()+this.getEventTimePer5Min().toString()),l.distance=o,s.push(l),s.forEach(c=>{c.pathData=this.GenerateRaceLegPaths(c,o)}),new gn(s,this.globalVar.circuitRank,!1,1,o,a,void 0,void 0,void 0,Ie.event,Ge.grandPrix)}getGrandPrixRewardCount(){var e=this.globalVar.eventRaceData.rankDistanceMultiplier,i=5,r=this.globalVar.modifiers.find(d=>"metersPerCoinsGrandPrixModifier"===d.text);void 0!==r&&(i=r.value);var a=5,o=this.globalVar.modifiers.find(d=>"metersPerRenownGrandPrixModifier"===d.text);void 0!==o&&(a=o.value);var u=8;return e>1&&(u=0),this.globalVar.eventRaceData.totalDistance/(i*e)+this.globalVar.eventRaceData.totalDistance/(a*e)+4+u}getEventStartDateTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?l:o}getCurrentEventStartEndDateTime(e){var i=new Date,r=i.getDay(),a=i.getHours(),o=this.globalVar.eventRaceData,s=new Date,l=new Date,c=new Date,u=new Date;return(s=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+o.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-r+o.weekStartDay))).setHours(s.getHours()-a+o.weekStartHour),s.setMinutes(0,0,0),(l=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+o.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-r+o.weekEndDay))).setHours(l.getHours()-a+o.weekEndHour),l.setMinutes(0,0,0),(c=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+o.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-r+o.weekendStartDay))).setHours(c.getHours()-a+o.weekendStartHour),c.setMinutes(0,0,0),(u=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-r+o.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-r+o.weekendEndDay))).setHours(u.getHours()-a+o.weekendEndHour),u.setMinutes(0,0,0),i>=s&&i<=l?e?l:s:i>=c&&i<=u?e?u:c:0}getTimeToEventRace(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?(l.getTime()-e.getTime())/1e3:(o.getTime()-e.getTime())/1e3}getRemainingEventRaceTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?e>l?(c.getTime()-e.getTime())/1e3:(s.getTime()-e.getTime())/1e3:0}getEventTimePer5Min(){var e=this.getRemainingEventRaceTime();return Math.floor(e/60/5)}generateTrackRace(e,i){var r=60,a=[],o=new Yi;o.courseType=e.raceCourseType,i===vn.practice?(r=45,o.distance=100,o.terrain=new Tn(qe.Stormy)):i===vn.novice?(r=60,o.distance=1e3,o.terrain=new Tn(qe.Stormy)):i===vn.intermediate?(r=80,o.distance=1e4,o.terrain=new Tn(qe.Stormy)):i===vn.master&&(r=100,o.distance=1e5,o.terrain=new Tn(qe.Stormy)),a.push(o);var s=0;return a.forEach(l=>{s+=l.distance}),a.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,s,i)}),new gn(a,this.globalVar.circuitRank,!1,1,s,r,void 0,Ut.Track,i,Ie.trainingTrack)}GenerateRaceLegPaths(e,i,r){for(var o=[],s=e.distance,c=Math.round(s/(i/20)),u=!1,d=ze.Regular,v=s/c,m=0;m<c;m++){var _=new Or;0!==m?m!==c-1?(_.length=s>v?v:s,(s-=_.length)<0&&(s=0),u?_.routeDesign=ze.Regular:(_.routeDesign=this.GetSpecialRoute(e.courseType,m+2<c,d),e.specialPathCount+=1,_.isSpecialPath=!0),u=_.routeDesign!==ze.Regular,_.setStumbleFields(),o.push(_),d=_.routeDesign):(_.length=s,_.routeDesign=e.courseType===j.Volcanic?ze.LastRegular:ze.Regular,_.setStumbleFields(),o.push(_),d=_.routeDesign):(_.length=v,_.routeDesign=e.courseType===j.Volcanic?ze.FirstRegular:ze.Regular,_.setStumbleFields(),o.push(_),s-=_.length,d=_.routeDesign)}return o}GetSpecialRoute(e,i,r){var a=ze.Regular,s=this.utilityService.getRandomInteger(1,3);return 1===s||(2===s?e===j.Flatland?a=ze.S:e===j.Mountain?a=ze.Crevasse:e===j.Ocean?a=ze.Waves:e===j.Tundra?a=ze.Cavern:e===j.Volcanic&&(a=ze.Regular):3===s&&(e===j.Flatland?a=ze.Bumps:e===j.Mountain?a=ze.Gaps:e===j.Ocean?a=ze.Dive:e===j.Tundra?a=ze.Hills:e===j.Volcanic&&(a=ze.SteppingStones))),a}calculateAnimalRacingStats(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.currentStats.defaultAccelerationModifier,a=e.currentStats.defaultStaminaModifier,o=e.currentStats.defaultPowerModifier,s=e.currentStats.defaultFocusModifier,l=e.currentStats.defaultAdaptabilityModifier,c=.02,u=e.getAnimalType().toLowerCase(),d=this.globalVar.modifiers.find(C=>C.text===u+"DefaultMaxSpeedModifier"),v=this.globalVar.modifiers.find(C=>C.text===u+"DefaultAccelerationModifier"),m=this.globalVar.modifiers.find(C=>C.text===u+"DefaultStaminaModifier"),_=this.globalVar.modifiers.find(C=>C.text===u+"DefaultPowerModifier"),w=this.globalVar.modifiers.find(C=>C.text===u+"DefaultFocusModifier"),S=this.globalVar.modifiers.find(C=>C.text===u+"DefaultAdaptabilityModifier");null!=d&&(i=d.value),null!=v&&(r=v.value),null!=m&&(a=m.value),null!=_&&(o=_.value),null!=w&&(s=w.value),null!=S&&(l=S.value);var k=this.getTraitModifier(e,we.topSpeed),T=this.getTraitModifier(e,we.acceleration),R=this.getTraitModifier(e,we.endurance),L=this.getTraitModifier(e,we.power),W=this.getTraitModifier(e,we.focus),ae=this.getTraitModifier(e,we.adaptability),ee=null!==e.equippedOrb&&"Ruby Orb"===e.equippedOrb.name?this.globalVar.orbStats.getMaxSpeedIncrease():1,be=null!==e.equippedOrb&&"Amber Orb"===e.equippedOrb.name?this.globalVar.orbStats.getAccelerationIncrease():1,oe=null!==e.equippedOrb&&"Topaz Orb"===e.equippedOrb.name?this.globalVar.orbStats.getEnduranceIncrease():1,_e=null!==e.equippedOrb&&"Amethyst Orb"===e.equippedOrb.name?this.globalVar.orbStats.getPowerIncrease():1,ge=null!==e.equippedOrb&&"Sapphire Orb"===e.equippedOrb.name?this.globalVar.orbStats.getFocusIncrease():1,De=null!==e.equippedOrb&&"Emerald Orb"===e.equippedOrb.name?this.globalVar.orbStats.getAdaptabilityIncrease():1,dt=this.globalVar.modifiers.find(C=>"breedLevelStatModifier"===C.text);null!=dt&&(c=dt.value),c=1+c*(e.breedLevel-1);var nt=1,Dt=1,Qe=1,lt=1,Et=1,Ct=1;e.talentTree.talentTreeType===pt.sprint&&(Ct=1+e.talentTree.column1Row3Points/100,Dt=1+e.talentTree.column2Row3Points/100,lt=1+e.talentTree.column3Row3Points/100),e.talentTree.talentTreeType===pt.longDistance&&(Et=1+e.talentTree.column1Row3Points/100,nt=1+e.talentTree.column2Row3Points/100,Qe=1+e.talentTree.column3Row3Points/100);var Z=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(i*c*k*e.incubatorStatUpgrades.maxSpeedModifier*nt,Z,ee),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(r*c*T*e.incubatorStatUpgrades.accelerationModifier*Dt,Z,be),e.currentStats.stamina=e.currentStats.calculateStamina(a*c*R*e.incubatorStatUpgrades.staminaModifier*Qe,Z,oe),e.currentStats.powerMs=e.currentStats.calculateTruePower(o*c*L*e.incubatorStatUpgrades.powerModifier*lt,Z,_e),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(s*c*W*e.incubatorStatUpgrades.focusModifier*Et,Z,ge),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(l*c*ae*e.incubatorStatUpgrades.adaptabilityModifier*Ct,Z,De),e.currentStats.burstChance=e.currentStats.calculateBurstChance(c),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance(c),this.updateTrackedMaxStats(e)}getTraitModifier(e,i){var r=1;if(null!=e.trait){var a=e.trait.researchLevel,o=e.trait.researchLevel,s=this.globalVar.modifiers.find(l=>"maximumTraitNegativePercentModifier"===l.text);void 0!==s&&o>s.value&&(o=s.value),e.trait.positiveStatGain===i&&(r+=a/100),e.trait.negativeStatGain===i&&(r-=o/100)}return r}GetAnimalDiminishingReturns(e){var i=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.resources.find(s=>"Facility Level"===s.name);if(null==r)return i;var a=5,o=this.globalVar.modifiers.find(s=>"facilityLevelModifier"===s.text);return void 0!==o&&(a=o.value),i+r.amount*(a+e.miscStats.diminishingReturnsBonus)}IncreaseAnimalBreedGauge(e,i){e.breedGaugeXp+=i,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}getBreedLevelRequiredForGrandPrix(){var e=50,i=this.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var i=5,r=this.globalVar.modifiers.find(ae=>"breedGaugeMaxIncreaseModifier"===ae.text);if(null!=r&&(i=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=i,null!=this.globalVar.resources.find(ae=>ae.name.includes("Incubator Upgrade"))&&null!=e.trait){var o=.001,s=this.globalVar.modifiers.find(ae=>"incubatorUpgradeIncreaseModifier"===ae.text);null!=s&&(o=s.value);var l=e.trait.researchLevel*o,c=this.globalVar.resources.find(ae=>"Incubator Upgrade Lv1"===ae.name),u=this.globalVar.resources.find(ae=>"Incubator Upgrade Lv2"===ae.name),d=this.globalVar.resources.find(ae=>"Incubator Upgrade Lv3"===ae.name);null!=this.globalVar.resources.find(ae=>"Incubator Upgrade Lv4"===ae.name)?l>.1&&(l=.1):null!=d?l>.05&&(l=.05):null!=u?l>.025&&(l=.025):null!=c&&l>.01&&(l=.01),e.trait.positiveStatGain===we.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=l),e.trait.positiveStatGain===we.acceleration&&(e.incubatorStatUpgrades.accelerationModifier+=l),e.trait.positiveStatGain===we.endurance&&(e.incubatorStatUpgrades.staminaModifier+=l),e.trait.positiveStatGain===we.power&&(e.incubatorStatUpgrades.powerModifier+=l),e.trait.positiveStatGain===we.focus&&(e.incubatorStatUpgrades.focusModifier+=l),e.trait.positiveStatGain===we.adaptability&&(e.incubatorStatUpgrades.adaptabilityModifier+=l)}var m=this.globalVar.resources.find(ae=>"Animal Handler"===ae.name),_=this.globalVar.modifiers.find(ae=>"animalHandlerModifier"===ae.text);if(null!=m&&void 0!==_&&null!=_&&m.amount>0){var w=m.amount*_.value,S=Math.round((e.currentStats.topSpeed-e.baseStats.topSpeed)*w),k=Math.round((e.currentStats.acceleration-e.baseStats.acceleration)*w),T=Math.round((e.currentStats.endurance-e.baseStats.endurance)*w),R=Math.round((e.currentStats.power-e.baseStats.power)*w),L=Math.round((e.currentStats.focus-e.baseStats.focus)*w),W=Math.round((e.currentStats.adaptability-e.baseStats.adaptability)*w);e.currentStats=new Ve(e.baseStats.topSpeed+S,e.baseStats.acceleration+k,e.baseStats.endurance+T,e.baseStats.power+R,e.baseStats.focus+L,e.baseStats.adaptability+W)}else e.currentStats=new Ve(e.baseStats.topSpeed,e.baseStats.acceleration,e.baseStats.endurance,e.baseStats.power,e.baseStats.focus,e.baseStats.adaptability);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,i){null!=e.equippedOrb&&this.getOrbTypeFromResource(e.equippedOrb)===tt.amethyst&&this.increaseAmethystOrbXp();var r=25,a=this.globalVar.modifiers.find(l=>"abilityLevelCapModifier"===l.text);if(null!=a&&(r=a.value),!(e.ability.abilityLevel>e.breedLevel+r)){var o=1;null!=i&&i>1&&(o=i),e.ability.abilityXp+=o,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5));var s=e.availableAbilities.find(l=>l.name===e.ability.name);null!=s&&(s.abilityXp=e.ability.abilityXp,s.abilityLevel=e.ability.abilityLevel,s.abilityMaxXp=e.ability.abilityMaxXp)}}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,U.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,U.Progression))}InitializeSettings(){this.themeService.setLightTheme(),this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",ba.both),this.globalVar.settings.set("autoStartEventRace",!1),this.globalVar.settings.set("monoRaceToggled",!1),this.globalVar.settings.set("duoRaceToggled",!1),this.globalVar.settings.set("rainbowRaceToggled",!1),this.globalVar.settings.set("pinnacleRaceToggled",!1),this.globalVar.settings.set("noviceTrainingTrackToggled",!1),this.globalVar.settings.set("intermediateTrainingTrackToggled",!1),this.globalVar.settings.set("masterTrainingTrackToggled",!1)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("thePinnacle",!1),this.globalVar.unlockables.set("grandPrix",!1),this.globalVar.unlockables.set("orbs",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnRow4",!1),this.globalVar.unlockables.set("barnRow5",!1),this.globalVar.unlockables.set("coaching",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new ie("Coins",e)}getMedalResourceValue(e){return new ie("Medals",e)}getTokenResourceValue(e){return new ie("Tokens",e)}unlockAnimalAbilities(e){var i=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=i){var r=i.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var i=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=i){var r=[];i.itemList.forEach(a=>{var o=this.globalVar.animals.find(s=>s.getAnimalType()===a.name);null!=o&&o.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getAnimalDescription(e){var i="";return"Horse"===e?i="The Horse is a Flatland racing animal capable of running without losing stamina and increasing the max speed of relay racers.":"Cheetah"===e?i="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.":"Hare"===e?i="The Hare is a Flatland racing animal that can instantly enter Burst and increase adaptability and focus.":"Warthog"===e?i="The Warthog is a Flatland racing animal that can increase stats at random and increase Burst Chance after losing focus.":"Monkey"===e?i="The Monkey is a Mountain climbing animal capable of slowing its competitors and leaping to victory.":"Goat"===e?i="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.":"Gecko"===e?i="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' starting velocity.":"Dolphin"===e?i="The Dolphin is an Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay.":"Shark"===e?i="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.":"Octopus"===e?i="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.":"Whale"===e?i="The Whale is an Ocean swimming animal that can set a velocity floor and becomes increasingly faster as the race goes on.":"Penguin"===e?i="The Penguin is a Tundra racing animal that can slide carefully or recklessly.":"Caribou"===e?i="The Caribou is a Tundra racing animal that boosts other racers based on stamina.":"Salamander"===e?i="The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration.":"Fox"===e&&(i="The Fox is a Volcanic racing animal that can increase stats at random."),i}sortAnimalOrder(){this.globalVar.animals.sort((e,i)=>e.raceCourseType-i.raceCourseType)}getEquipmentDescription(e){var i="";return"Headband"===e&&(i="The first three stumbles you would have are ignored"),"Pendant"===e&&(i="Reduce your ability cooldown by 10%"),"Blinders"===e&&(i="Negative terrain effects are cut in half"),"Quick Snack"===e&&(i="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(i="Increase next racer's Speed by 10% on Relay"),"Blue Baton"===e&&(i="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(i="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(i="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(i="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(i="Increase next racer's Endurance by 10% on Relay"),"Amethyst Orb"===e&&(i="Increase your Power Efficiency by "+(100*(this.globalVar.orbStats.getPowerIncrease()-1)).toFixed(0)+"%."),"Sapphire Orb"===e&&(i="Increase your Focus Distance by "+(100*(this.globalVar.orbStats.getFocusIncrease()-1)).toFixed(0)+"%."),"Amber Orb"===e&&(i="Increase your Acceleration Rate by "+(100*(this.globalVar.orbStats.getAccelerationIncrease()-1)).toFixed(0)+"%."),"Topaz Orb"===e&&(i="Increase your Stamina by "+(100*(this.globalVar.orbStats.getEnduranceIncrease()-1)).toFixed(0)+"%."),"Emerald Orb"===e&&(i="Increase your Adaptability Distance by "+(100*(this.globalVar.orbStats.getAdaptabilityIncrease()-1)).toFixed(0)+"%."),"Ruby Orb"===e&&(i="Increase your Max Speed by "+(100*(this.globalVar.orbStats.getMaxSpeedIncrease()-1)).toFixed(0)+"%."),"Scary Mask"===e&&(i="Cause a distraction the first time you lose focus while ahead of competition, slowing competitors by 2 seconds."),"Running Shoes"===e&&(i="After each Burst during a race, increase subsequent Burst distance by 20%."),"Incense"===e&&(i="When your velocity is at least 90% of your Max Speed, immediately set velocity to 100% of your Max Speed."),"Athletic Tape"===e&&(i="While Bursting, decrease Acceleration Rate by 50% but increase Focus Distance and Adaptability Distance by 50%."),i}getItemDescription(e){var i="";return"Apples"===e&&(i="+1 Acceleration to a single animal"),"Bananas"===e&&(i="+1 Speed to a single animal"),"Strawberries"===e&&(i="+1 Endurance to a single animal"),"Carrots"===e&&(i="+1 Power to a single animal"),"Turnips"===e&&(i="+1 Focus to a single animal"),"Oranges"===e&&(i="+1 Adaptability to a single animal"),"Mangoes"===e&&(i="+1 Breed Level to a single animal"),"Gingko Leaves"===e&&(i="Reset Breed Level for a single animal back to 1 and remove all incubator upgrade gains. Increase Breed XP Gain by 900% until Breed Level returns to what it was."),"Circuit Race Breed XP Gain Certificate"===e&&(i="Give an animal +2 Bonus Breed XP Gain from Circuit Races. Can use up to 30 of these certificates on any individual animal."),"Free Race Breed XP Gain Certificate"===e&&(i="Give an animal +1 Bonus Breed XP Gain from Free Races. Can use up to 30 of these certificates on any individual animal."),"Training Breed XP Gain Certificate"===e&&(i="Give an animal +1 Bonus Breed XP Gain from Training. Can use up to 30 of these certificates on any individual animal."),"Diminishing Returns Increase Certificate"===e&&(i="Give an animal +1 Diminishing Returns per Facility Level. Can use up to 30 of these certificates on any individual animal."),i}getSpecializationDescription(e){var i="";return"Breeding Grounds"===e?i="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?i="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?i="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(i="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),i}getTundraDescription(){return"When racing in the Tundra, your racer will slide all over the race course as they move forward. The higher your Adaptability stat, the better control your racer will have and the less likely they will slide. You lose a percentage of max speed while sliding, and if you slide too much you may hit a wall and come to a complete stop!"}getVolcanicDescription(){return"Volcanic racers make their way while a Volcano ominously looms in the background. As you race, the Volcano will erupt making it impossible to proceed if you get stuck behind the lava flow. If you stay ahead of the average pace for the Volcanic leg of the race, you should have no problem speeding past the lava so make sure your Max Speed and Acceleration are up to the challenge."}updateTrackedMaxStats(e){if(e.isAvailable){if(""===this.globalVar.trackedStats.highestMaxSpeed)this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var i=parseFloat(this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").indexOf(" ")));e.currentStats.maxSpeedMs>i&&(this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAccelerationRate)this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var r=parseFloat(this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").indexOf(" ")));e.currentStats.accelerationMs>r&&(this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestStamina)this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")";else{var a=parseFloat(this.globalVar.trackedStats.highestStamina.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestStamina.replaceAll(",","").indexOf(" ")));e.currentStats.stamina>a&&(this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")")}if(""===this.globalVar.trackedStats.highestPowerEfficiency)this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")";else{var o=parseFloat(this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").indexOf(" ")));e.currentStats.powerMs>o&&(this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")")}if(""===this.globalVar.trackedStats.highestFocusDistance)this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")";else{var s=parseFloat(this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>s&&(this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAdaptabilityDistance)this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")";else{var l=parseFloat(this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>l&&(this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")")}}}shouldShowSlowSegmentWarning(e){var i=!1;if(void 0===e)return i;if((e.currentStats.acceleration<=10||e.currentStats.topSpeed<=10||e.currentStats.endurance<=10||e.currentStats.power<=10||e.currentStats.focus<=10||e.currentStats.adaptability<=10)&&(console.log("Stats too low: "+e.currentStats.acceleration+" "+e.currentStats.topSpeed+" "+e.currentStats.endurance+" "+e.currentStats.power+" "+e.currentStats.focus+" "+e.currentStats.adaptability),i=!0),null!=this.globalVar.eventRaceData){var a=this.globalVar.eventRaceData.totalDistance/this.globalVar.eventRaceData.totalSegments/this.globalVar.eventRaceData.segmentTime;a>3*e.currentStats.maxSpeedMs&&(console.log("Max Speed Too Low: "+a+" > "+3*e.currentStats.maxSpeedMs),i=!0),e.currentStats.focusMs<a/5&&(console.log("Not Focused Enough: "+e.currentStats.focusMs+" < "+a/30),i=!0)}return i}devModeInitialize(e,i){var r=this.globalVar.resources.find(m=>"Coins"===m.name);if(void 0!==r&&(r.amount=1e11),this.globalVar.resources.some(m=>"Medals"===m.name)){var a=this.globalVar.resources.find(m=>"Medals"===m.name);void 0!==a&&(a.amount+=e+1e7)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e+1e5,U.Resources));if(this.globalVar.resources.push(this.initializeService.initializeResource("Talent Points",1e3,U.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Tokens",1e3,U.Resources)),this.globalVar.resources.some(m=>"Renown"===m.name)){var o=this.globalVar.resources.find(m=>"Renown"===m.name);void 0!==o&&(o.amount+=5e4)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",5e4,U.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",1e3,U.Progression)),this.globalVar.resources.push(this.initializeService.initializeResource("Research Level",e,U.Progression));for(var s=1;s<=e;s++){var l=this.utilityService.getCircuitRankFromNumericValue(s);this.globalVar.circuitRank=l,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}var c=5,u=1,d=1;1===i?(c=50,u=50):2===i?(c=100,u=250,d=3):3===i?(c=500,u=500,d=7):4===i&&(c=1e4,u=1e4,d=12),this.globalVar.animals.forEach(m=>{m.currentStats.topSpeed=c,m.currentStats.acceleration=c,m.currentStats.endurance=c,m.currentStats.power=c,m.currentStats.focus=c,m.currentStats.adaptability=c,m.breedLevel=u,m.incubatorStatUpgrades.maxSpeedModifier=d,m.incubatorStatUpgrades.accelerationModifier=d,m.incubatorStatUpgrades.staminaModifier=d,m.incubatorStatUpgrades.powerModifier=d,m.incubatorStatUpgrades.focusModifier=d,m.incubatorStatUpgrades.adaptabilityModifier=d,m.ability.abilityLevel=m.breedLevel+25,m.availableAbilities.forEach(_=>{_.abilityLevel=m.breedLevel+25}),this.calculateAnimalRacingStats(m)})}}return t.\u0275fac=function(e){return new(e||t)(Ue(Fn),Ue(u0),Ue(ql))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Wt=(()=>{return(t=Wt||(Wt={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",Wt;var t})(),$e=(()=>{return(t=$e||($e={}))[t.inspiration=0]="inspiration",t[t.navigator=1]="navigator",t[t.flowingCurrent=2]="flowingCurrent",t[t.bigBrain=3]="bigBrain",t[t.camouflage=4]="camouflage",t[t.herdMentality=5]="herdMentality",t[t.specialDelivery=6]="specialDelivery",t[t.deepBreathing=7]="deepBreathing",t[t.redBaton=8]="redBaton",t[t.blueBaton=9]="blueBaton",t[t.violetBaton=10]="violetBaton",t[t.greenBaton=11]="greenBaton",t[t.orangeBaton=12]="orangeBaton",t[t.yellowBaton=13]="yellowBaton",t[t.supportMaxSpeedRelay=14]="supportMaxSpeedRelay",t[t.supportAccelerationRelay=15]="supportAccelerationRelay",t[t.supportStaminaRelay=16]="supportStaminaRelay",t[t.supportPowerRelay=17]="supportPowerRelay",t[t.supportFocusRelay=18]="supportFocusRelay",t[t.supportAdaptabilityRelay=19]="supportAdaptabilityRelay",t[t.supportBurstDistance=20]="supportBurstDistance",t[t.supportBurstChance=21]="supportBurstChance",t[t.supportAbilityCooldown=22]="supportAbilityCooldown",t[t.supportAbilityEfficiency=23]="supportAbilityEfficiency",$e;var t})();let Di=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.sanitizer=r}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var i=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(o=>o.type===r.type);void 0!==a&&i.push(a)}),i}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck)}getResourceByName(e){var i=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==i?i.amount:0}spendResourceByName(e,i){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=i)}gainResourceByName(e,i,r){var a=this.globalService.globalVar.resources.find(o=>o.name===e);void 0!==a?a.amount+=i:this.globalService.globalVar.resources.push(new ie(e,i,r))}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(i=>"Facility Level"===i.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(i=>"Research Level"===i.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(i=>"Coins"===i.name);return void 0!==e?e.amount:0}spendCoins(e){var i=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==i&&(i.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(i=>"Medals"===i.name);return void 0!==e?e.amount:0}spendMedals(e){var i=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==i&&(i.amount-=e)}getTokens(){var e=this.globalService.globalVar.resources.find(i=>"Tokens"===i.name);return void 0!==e?e.amount:0}spendTokens(e){var i=this.globalService.globalVar.resources.find(r=>"Tokens"===r.name);void 0!==i&&(i.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(i=>"Renown"===i.name);return void 0!==e?e.amount:0}addResourceToResourceList(e,i){if(void 0!==i)if(i.some(a=>a.name===e.name)){var r=i.find(a=>a.name===e.name);void 0!==r&&(r.amount+=e.amount)}else i.push(e)}getRenownCoinModifier(e,i){var r=1;return r=e<=50?e:500*Math.log10(.0035*(e-50)+1)+50,i||(r/=100,r+=1),r}getStockbreeder(){var e=this.globalService.globalVar.resources.find(i=>"Stockbreeder"===i.name);return void 0!==e?e.amount:0}getAnimalByType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i:null}getMaxSpeedModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===H[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,we.topSpeed),u=1;o.talentTree.talentTreeType===pt.longDistance&&(u=1+o.talentTree.column2Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.maxSpeedModifier*u}return i}getAccelerationModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===H[e].toLowerCase()+"DefaultAccelerationModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,we.acceleration),u=1;o.talentTree.talentTreeType===pt.sprint&&(u=1+o.talentTree.column2Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.accelerationModifier*u}return i}getStaminaModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===H[e].toLowerCase()+"DefaultStaminaModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,we.endurance),u=1;o.talentTree.talentTreeType===pt.longDistance&&(u=1+o.talentTree.column3Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.staminaModifier*u}return i}getPowerModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===H[e].toLowerCase()+"DefaultPowerModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,we.power),u=1;o.talentTree.talentTreeType===pt.sprint&&(u=1+o.talentTree.column3Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.powerModifier*u}return i}getFocusModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===H[e].toLowerCase()+"DefaultFocusModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,we.focus),u=1;o.talentTree.talentTreeType===pt.longDistance&&(u=1+o.talentTree.column1Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.focusModifier*u}return i}getAdaptabilityModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===H[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,we.adaptability),u=1;o.talentTree.talentTreeType===pt.sprint&&(u=1+o.talentTree.column1Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.adaptabilityModifier*u}return i}getTrainingBreedGaugeIncrease(e,i){var r=0,a=this.globalService.globalVar.modifiers.find(s=>"trainingBreedGaugeIncrease"===s.text);if(null!=a&&(r=a.value),void 0!==i&&null!=i.miscStats.bonusBreedXpGainFromTraining&&i.miscStats.bonusBreedXpGainFromTraining>0&&(r+=i.miscStats.bonusBreedXpGainFromTraining),e>0){var o=this.globalService.globalVar.modifiers.find(s=>"breedingGroundsSpecializationModifier"===s.text);null!=o&&(r*=1+e*o.value)}return void 0!==i&&i.previousBreedLevel>i.breedLevel&&(r*=10),r}getCircuitBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"circuitBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromCircuitRaces&&e.miscStats.bonusBreedXpGainFromCircuitRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromCircuitRaces),void 0!==e&&e.previousBreedLevel>e.breedLevel&&(i*=10),i}getLocalBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"localBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromLocalRaces&&e.miscStats.bonusBreedXpGainFromLocalRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromLocalRaces),void 0!==e&&e.previousBreedLevel>e.breedLevel&&(i*=10),i}getTotalRacersByRace(e){var i=2;return e.localRaceType===Ut.Track?i=13:this.getResourceByName("Money Mark")>0&&(i+=1),i}getDiminishingReturnsThreshold(e){var i=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(i+=this.getFacilityLevel()*r.value),i}getBreedLevelPopover(e){var i=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(i=r.value),"Increase racing stat gain from base stats by "+(i*(e-1)*100).toFixed(0)+"%"}getResourcePopover(e,i){if("Coins"===e)return"Good ol classic Coins. Gain from most races and buy items from the shop with this.";if("Medals"===e)return"Rare currency gained from improving your circuit rank.";if("Renown"===e){var r=this.getRenown();return"Increases Coins gained from races by "+this.getRenownCoinModifier(r,!0).toFixed(2)+"%. Increase total number of free races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or free races to get your name out there and raise your renown."}return"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Tokens"===e?"Currency used to purchase items from the Event Shop.":"Talent Points"===e?"Use to improve any of your racers' talents. Each of these applies to all racers.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):"Bonus Breed XP Gain From Training"===e?"Increase Breed XP gained from training by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Free Races"===e?"Increase Breed XP gained from completing free races by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Circuit Races"===e?"Increase Breed XP gained from completing circuit races by this amount. Only applies to this animal.":"Diminishing Returns per Facility Level"===e?"Increase Diminishing Returns value by this amount for every Facility Level you have. Only applies to this animal.":"Orb Pendant"===e?"This looks like the perfect size to fit an orb inside.":"Training Time Reduction"===e?"Reduce training times by this percent. Only applies to this animal.":"Bonus Talents"===e?"Increase talent point amount for this animal.":i===U.Specialty?this.getSpecialtyItemDescription(e):i===U.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let i in j)isNaN(Number(i))&&e.push(i);return e}getCourseTypeFromAnimalType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i.raceCourseType:-1}getTalentTreeNameByEnum(e){var i="";return e===pt.sprint&&(i="Sprint"),e===pt.support&&(i="Support"),e===pt.longDistance&&(i="Long Distance"),i}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}getTrackRaceRewards(e){var i=[];return e===vn.novice?(i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races")):e===vn.intermediate?(i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +5 Bonus Breed XP Gain From Circuit Races"),i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Bonus Breed XP Gain From Free Races"),i.push("- +1% Training Time Reduction"),i.push("- +3 Diminishing Returns per Facility Level")):e===vn.master&&(i.push("- +5 Bonus Breed XP Gain From Free Races"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- +3 Bonus Breed XP Gain From Training"),i.push("- +2 Talents"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- Orb Pendant"),i.push("- +3 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +3 Talents")),i}getGrandPrixTokenRewards(){var e=[],i=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,r=5e7,a=this.globalService.globalVar.modifiers.find(k=>"grandPrixToken1MeterModifier"===k.text);null!=a&&(r=a.value);var o=5e7,s=this.globalService.globalVar.modifiers.find(k=>"grandPrixToken2MeterModifier"===k.text);null!=s&&(o=s.value);var l=5e7,c=this.globalService.globalVar.modifiers.find(k=>"grandPrixToken3MeterModifier"===k.text);null!=c&&(l=c.value);var u=5e7,d=this.globalService.globalVar.modifiers.find(k=>"grandPrixToken4MeterModifier"===k.text);null!=d&&(u=d.value);var v=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),m=1*v,_=2*v,w=3*v,S=4*v;return e.push((r*i).toLocaleString()+" meters - +"+m+" Token"+(m>1?"s":"")),e.push((o*i).toLocaleString()+" meters - +"+_+" Tokens"),e.push((l*i).toLocaleString()+" meters - +"+w+" Tokens"),e.push((u*i).toLocaleString()+" meters - +"+S+" Tokens"),e}getRenownRequiredForEventShopTier(e){return 1===e?0:2===e?200:e>2?500*(e-2):-1}getHighestEventShopTierUnlocked(){var e=1,i=this.getRenown();return i>200&&(e=2),i>500&&(e=Math.floor(i/500)+2),e}isItemUnlocked(e){var i=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(i=r),i}getAnimalsByRaceCourseType(e){var i=[];return"Flatland"===e?(i.push(H[H.Horse]),i.push(H[H.Cheetah]),i.push(H[H.Hare]),i.push(H[H.Warthog])):"Mountain"===e?(i.push(H[H.Monkey]),i.push(H[H.Goat]),i.push(H[H.Gecko])):"Ocean"===e?(i.push(H[H.Dolphin]),i.push(H[H.Shark]),i.push(H[H.Octopus]),i.push(H[H.Whale])):"Tundra"===e?(i.push(H[H.Penguin]),i.push(H[H.Caribou])):"Volcanic"===e&&(i.push(H[H.Salamander]),i.push(H[H.Fox])),i}GetAbilityEffectiveAmount(e,i,r,a,o){if(null==e.ability||null==e.ability.name)return-1;null==i&&(i=1),null==r&&(r=1);var s=1;e.type===H.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===H.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5),e.type===H.Warthog&&"Graze"===e.ability.name&&void 0!==o&&(s*=1+.1*o.filter(_=>"Power"===_[0]).length),e.talentTree.talentTreeType===pt.sprint&&(s*=1+.05*e.talentTree.column3Row2Points);var l=e.ability;null!=a&&(l=a);var c=1;null!=e.talentTree&&null!=e.raceVariables&&e.talentTree.talentTreeType===pt.sprint&&!e.raceVariables.firstAbilityUseEffectApplied&&(c*=1+.05*e.talentTree.column3Row4Points,"Leap"!==e.ability.name&&(e.raceVariables.firstAbilityUseEffectApplied=!0));var u=1;if(null!=e.raceVariables&&null!=e.raceVariables.relayEffects){var d=this.getRelayEffectFromListByType(e.raceVariables.relayEffects,$e.supportAbilityEfficiency);void 0!==d&&void 0!==d.additionalValue&&(u=d.additionalValue)}return(l.efficiency*u*c+l.efficiency*(.01*(l.abilityLevel-1)))*(1+e.currentStats.powerMs*s*i*r/100)}getAnimalAbilityDescription(e,i,r){if(e){if("Second Wind"===i)return"Stamina does not go down for a short period";if("Inspiration"===i)return"Increase next racer's max speed on relay";if("Pacemaker"===i)return"Increase acceleration for a short period";if("Sprint"===i)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===i)return"Increase acceleration when behind competitors";if("On The Hunt"===i)return"Gain max speed after each burst";if("Awareness"===i)return"Increase adaptability, focus for a short period";if("Prey Instinct"===i)return"Start in extended burst mode";if("Nap"===i)return"Delay leg start, increase max speed and focus";if("Graze"===i)return"Increase stats at random";if("Mud Pit"===i)return"Focus loss is longer, gain acceleration and lose less stamina";if("Time To Tussle"===i)return"Delay competitors when you complete your leg faster than the average pace";if("Landslide"===i)return"Delay competitors";if("Frenzy"===i)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===i)return"Jump to the end of the leg";if("Echolocation"===i)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===i)return"Increase previous and next racer's adaptability";if("Flowing Current"===i)return"Increase next racer's acceleration on relay";if("Apex Predator"===i)return"Slow competitors if they pass you";if("Feeding Frenzy"===i)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===i)return"Increase max speed when ahead of competitors";if("Propulsion"===i)return"Dash a short distance";if("Buried Treasure"===i)return"Delay your start, increase coin gain for winning race";if("Big Brain"===i)return"Increase power of other racers after bursting a certain number of times";if("Storing Power"===i)return"Reduce max speed, gain increased max speed on burst";if("Unparalleled Focus"===i)return"Gain velocity floor after keeping focus for long enough";if("Whalesong"===i)return"Gain different stat boosts on use";if("Sure-footed"===i)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===i)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===i)return"Increase burst speed bonus";if("Sticky"===i)return"Cannot stumble for a short period";if("Night Vision"===i)return"Increase max speed by keeping focused";if("Camouflage"===i)return"Transfer velocity to next racer on relay";if("Herd Mentality"===i)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===i)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===i)return"Increase other racers' burst max speed bonus based on stamina";if("Careful Toboggan"===i)return"Increase adaptability for a short period";if("Wild Toboggan"===i)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===i)return"Increase max speed if you do not drift";if("Cold Blooded"===i)return"Reduce stamina loss and increase focus distance for a short period based on distance in leg";if("Burrow"===i)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===i)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===i)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===i)return"Increase max speed greatly, lose over time";if("Nine Tails"===i)return"Increase random stat for a short period, effect can stack"}else{var a="",o=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(u=>{u.availableAbilities.forEach(d=>{d.name===i&&(r=u,o=d,null!=d.cooldown&&(a=d.cooldown.toString()))})}),null!=r){var s=this.GetAbilityEffectiveAmount(r,void 0,void 0,o).toLocaleString(void 0,{minimumFractionDigits:2});""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString());var l="";return"Second Wind"===i?"Stamina does not decrease for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Inspiration"===i?"When the next racer starts, they gain 25% of your Max Speed for <span class='keyword'>"+s+"</span> meters. Passive.":"Pacemaker"===i?"Increase Acceleration Rate by 50% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Sprint"===i?" Gain 35% Max Speed and Acceleration Rate for <span class='keyword'>"+s+"</span> meters, but lose twice as much stamina as normal. "+a+" second cooldown.":"Giving Chase"===i?"While you are behind the average pace, increase Acceleration Rate by <span class='keyword'>"+s+"</span>%. Passive.":"On The Hunt"===i?"Every time you Burst, increase your Max Speed by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Awareness"===i?"Boosts Focus Distance and Adaptability Distance by 40% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Prey Instinct"===i?"Starts its leg in Burst mode that continues for an additional <span class='keyword'>"+s+"</span> meters. Passive.":"Nap"===i?"Sleep until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. Max Speed and Focus Distance are then doubled. Passive.":"Graze"===i?"Forage for food, gaining a 10% increase to a random stat for <span class='keyword'>"+s+"</span> meters. This effect can stack. "+a+" second cooldown.":"Mud Pit"===i?"Right after losing focus, roll in a mud pit for 1 second. Afterwards, reduce Stamina loss by 25% and increase Burst Chance by 25% for <span class='keyword'>"+s+"</span> meters. Passive.":"Time To Tussle"===i?"If you finish your leg before the average competition, tangle with them as they pass the end of your leg. Slow them by <span class='keyword'>"+s+"</span> meters. Passive.":"Landslide"===i?"Drop rocks on competitors, delaying them <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Frenzy"===i?"Increase Burst distance by <span class='keyword'>"+s+"</span> meters. You do not stumble or lose focus while bursting. Passive.":"Leap"===i?"When you are <span class='keyword'>"+s+"</span> meters from the end of the leg, leap straight to the end over .5 seconds. Passive.":"Sure-footed"===i?"When you make it through a special path without stumbling, increase your Adaptability Distance by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Deep Breathing"===i?"Every time you Burst, regain <span class='keyword'>"+s+"</span>% of your stamina, up to 100%. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"In The Rhythm"===i?"Increase your max speed bonus while Bursting by <span class='keyword'>"+s+"</span>%. Passive.":"Sticky"===i?"Cannot stumble for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Night Vision"===i?"Increase Max Speed by <span class='keyword'>"+s+"</span>% for every path you complete without losing focus. If you lose focus, reset this bonus back to 0%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Camouflage"===i?"The velocity you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over <span class='keyword'>"+s+"</span> meters. The following racer can break their max speed by up to 50% while this is active. Passive.":"Echolocation"===i?"Increase your Adaptability Distance by 75% for <span class='keyword'>"+s+"</span> meters and ignore any negative effects from the terrain. "+a+" second cooldown.":"Navigator"===i?"Assist the previous racer and next racer, boosting their Adaptability Distance by 25% of your max for the last and first <span class='keyword'>"+s+"</span> meters of their legs respectively. Passive.":"Flowing Current"===i?"When relaying, increase the Acceleration Rate of your next racer by 25% of your Acceleration Rate for <span class='keyword'>"+s+"</span> meters. Passive.":"Apex Predator"===i?"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for <span class='keyword'>"+s+"</span> meters. Can only occur once. Passive.":"Feeding Frenzy"===i?"Increase Max Speed and Acceleration Rate by 50% for the first and last <span class='keyword'>"+s+"</span> meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.":"Blood In The Water"===i?"While you are ahead of the average pace, increase Max Speed by <span class='keyword'>"+s+"</span>%. Passive.":"Propulsion"===i?"Dash <span class='keyword'>"+s+"</span> meters over .25 seconds. "+a+" second cooldown.":"Buried Treasure"===i?"Delay your start to search for treasure until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. If you still win the race, increase your Coin reward by 25%. Passive.":"Big Brain"===i?"After Bursting through one third of your race paths, increase Power Efficiency of all remaining racers by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 5 times. Effects remain for the duration of the race.":"Storing Power"===i?"On use, reduce Max Speed by 10% for <span class='keyword'>"+s+"</span> meters. If you burst while this is active, regain double the amount of Max Speed lost for the rest of the race. "+a+" second cooldown.":"Unparalleled Focus"===i?"Every time you complete 3 paths in a row without losing focus, gain a 20% velocity floor for <span class='keyword'>"+s+"</span> meters. While this is active, your velocity cannot drop below 20% of your Max Speed, and all calculations will consider that number to be 0% of your Max Speed. Passive.":"Whalesong"===i?"Gain 30% to a particular stat for <span class='keyword'>"+s+"</span> meters based on how many times you have used this ability, as follows:<br/>First Use - Gain 30% Adaptability Distance.<br/>Second Use - Gain 30% Burst Distance.<br/>Third Use - Gain 30% Acceleration Rate.<br/>Fourth Use - Gain 30% Focus Distance.<br/>Fifth Use - Gain 30% Max Speed.<br/>After 5 uses, every subsequent use will give 30% to all of these stats. "+ +a+" second cooldown.":"Herd Mentality"===i?"After completing your leg, <span class='keyword'>"+s+"</span>% of your remaining Stamina is given to the next racer and they start their leg in Burst mode. This does not occur if you run out of Stamina during your leg. Passive.":"Great Migration"===i?"Reduce stamina by 10%. For <span class='keyword'>"+s+"</span> meters, Acceleration Rate is increased by 25% of the amount of stamina lost. "+a+" second cooldown.":"Special Delivery"===i?"Increase all remaining racers' Burst Max Speed Bonus by <span class='keyword'>"+s+"</span>% of your remaining Stamina percentage, up to 100%, after completing your leg. This does not occur if you run out of Stamina during your leg. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. This does not occur if your energy is below 100% at the end of the segment. Effects remain for the duration of the race.":"Careful Toboggan"===i?"Increase Adaptability Distance by 60% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Wild Toboggan"===i?"Double the maximum amount of drift per path. Increase Acceleration Rate by up to <span class='keyword'>"+s+"</span>% based on how much you drift. Passive.":"Quick Toboggan"===i?"Every time you make it through a path without drifting, gain <span class='keyword'>"+s+"</span>% Max Speed. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Cold Blooded"===i?"Increase Focus Distance and reduce Stamina loss by up to 50% depending on how close to the center of the volcano you are. These bonuses last <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Burrow"===i?"Go underground for <span class='keyword'>"+s+"</span> meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.":"Heat Up"===i?"Increase Acceleration Rate by 15% for <span class='keyword'>"+s+"</span> meters. This increase doubles every subsequent use this race. "+a+" second cooldown.":"Trickster"===i?"When active, sacrifice 25% of one random stat for 50% of another random stat. Lasts <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Fleeting Speed"===i?"Increase Max Speed by <span class='keyword'>"+s+"</span>%. Decrease this bonus by 2% for every percent of the leg you complete, down to 0% after you reach the half way point. Passive.":"Nine Tails"===i?"At the start of each path, increase either Acceleration Rate, Max Speed, Focus Distance, or Adaptability Distance by 15% for <span class='keyword'>"+s+"</span> meters. This effect can stack. Passive.":(null===(l=this.sanitizer.sanitize(pi.HTML,this.sanitizer.bypassSecurityTrustHtml(l)))&&(l=""),l)}}return""}getBarnByBarnNumber(e){return this.globalService.globalVar.barns.find(i=>i.barnNumber===e)}getAvailableBarns(){var e=[];return e.push(this.getBarnByBarnNumber(1)),e.push(this.getBarnByBarnNumber(2)),e.push(this.getBarnByBarnNumber(3)),this.isItemUnlocked("barnRow2")&&(e.push(this.getBarnByBarnNumber(4)),e.push(this.getBarnByBarnNumber(5)),e.push(this.getBarnByBarnNumber(6))),this.isItemUnlocked("barnRow3")&&(e.push(this.getBarnByBarnNumber(7)),e.push(this.getBarnByBarnNumber(8)),e.push(this.getBarnByBarnNumber(9))),this.isItemUnlocked("barnRow4")&&(e.push(this.getBarnByBarnNumber(10)),e.push(this.getBarnByBarnNumber(11)),e.push(this.getBarnByBarnNumber(12))),this.isItemUnlocked("barnRow5")&&(e.push(this.getBarnByBarnNumber(13)),e.push(this.getBarnByBarnNumber(14)),e.push(this.getBarnByBarnNumber(15))),e}getResourcesForBarnUpgrade(e){var i=[],r=100;if(e<10)r=50;else if(r=100*(e-9),e>=100&&(r=9100+500*(e-99)),e>=200&&(r=59100+1e3*(e-199)),e>=300&&(r=159100+2500*(e-299)),e>=400){var l=Math.ceil((e-399)/100);r=409100;for(var u=1;u<=l;u++){var d=e-(400+100*(u-1)-1);d>100&&(d=100),r+=2500*(u+1)*d}}var v=new ie("Coins",r);if(i.push(v),e%10==9){var m;m=Math.ceil(e/100);var _=new ie("Medals",1*m);i.push(_)}return i}getBarnName(e){var i="",r=e.getSize();return(e.barnUpgrades.specialization===Wt.None||null==e.barnUpgrades.specialization)&&(i=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===Wt.Attraction&&(i=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===Wt.BreedingGrounds&&(i=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===Wt.TrainingFacility&&(i=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===Wt.ResearchCenter&&(i=r+" Research Center "+e.barnNumber),i}getTerrainPopoverText(e,i){var r="";void 0!==i&&(r="The terrain for the "+i.getCourseTypeName()+" leg is "+e.getTerrainType()+": <br/>"),null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss <br/>":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss <br/>"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed<br/>":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed<br/>"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration<br/>":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration<br/>"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency<br/>":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency<br/>"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus<br/>":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus<br/>"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling<br/>":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling<br/>");var a=this.utilityService.getSanitizedHtml(r);return null!=a&&(r=a),r}getInDepthSpecializationDescription(e){var i="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(T=>"breedingGroundsSpecializationModifier"===T.text);null!=a&&(r=a.value),i="For every 10 levels, gain "+100*r+"% additional breed XP when completing a training."}else if("Training Facility"===e)i="For every 10 levels up to level 200, gain 1% training time reduction. For every 10 levels after level 200, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var o=60,s=this.globalService.globalVar.modifiers.find(T=>"attractionTimeToCollectModifier"===T.text);null!=s&&(o=s.value);this.globalService.globalVar.modifiers.find(T=>"attractionAmountModifier"===T.text);i="Gain a certain amount of Coins every "+o+" seconds while an animal trains in this barn. At level 10, you gain 20 Coins and every subsequent 10 levels adds an additional 20 Coins * Specialization Level."}else if("Research Center"===e){var u=this.globalService.globalVar.modifiers.find(T=>"researchCenterIncrementsModifier"===T.text),d=this.globalService.globalVar.modifiers.find(T=>"researchCenterTrainingAnimalModifier"===T.text),v=this.globalService.globalVar.modifiers.find(T=>"researchCenterStudyingAnimalModifier"===T.text),m=this.globalService.globalVar.modifiers.find(T=>"researchCenterMaxStatGainModifier"===T.text),_=.05,w=.45,S=.25,k=.5;null!=u&&(_=u.value),null!=d&&(w=d.value),null!=v&&(S=v.value),null!=m&&(k=m.value),i="To start, the animal training at the Research Center only gains "+100*(w+_)+"% of the stat values from their training. Another animal at random will gain "+100*S+"% of the stat values from training, prioritizing animals of the same course type. For every 10 levels, "+100*_+"% additional stat gain will be distributed up to "+100*k+"% starting with the training animal and then the other animal. Additional animals will gain stats after maxing out the previous."}return i}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?Wt.BreedingGrounds:"Training Facility"===e?Wt.TrainingFacility:"Attraction"===e?Wt.Attraction:"Research Center"===e?Wt.ResearchCenter:Wt.None}convertTalentTreeNameToEnum(e){return"Sprint"===e?pt.sprint:"Support"===e?pt.support:"Long Distance"===e?pt.longDistance:pt.none}convertSpecializationEnumToName(e){return e===Wt.BreedingGrounds?"Breeding Grounds":e===Wt.TrainingFacility?"Training Facility":e===Wt.Attraction?"Attraction":e===Wt.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){if(e.specialization===Wt.TrainingFacility){var i=e.specializationLevel;return i>20&&(i=20),.01*i}return 0}getTrainingProgressionAnimationText(e){var i="";return e.affectedStatRatios.topSpeed>0&&(i+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(i+="+ACC\n"),e.affectedStatRatios.endurance>0&&(i+="+END\n"),e.affectedStatRatios.power>0&&(i+="+PWR\n"),e.affectedStatRatios.focus>0&&(i+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(i+="+ADP\n"),i}relayEffectTypeStacksEffectiveness(e){var i=!1;return(e===$e.bigBrain||e===$e.herdMentality||e===$e.deepBreathing||e===$e.specialDelivery)&&(i=!0),i}relayEffectPersistsEventSegments(e){var i=!1;return(e===$e.bigBrain||e===$e.redBaton||e===$e.blueBaton||e===$e.greenBaton||e===$e.orangeBaton||e===$e.violetBaton||e===$e.yellowBaton)&&(i=!0),i}getBreedLevelRequiredForGrandPrix(){var e=50,i=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}canAnimalTrain(e){var i=!0;this.globalService.globalVar.incubator.assignedAnimal===e&&(i=!1);var r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(i=!1),i}canAnimalRace(e){var i=!0,r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(i=!1),i}getTraitStatGainDescription(e){var i="",r="";return e.positiveStatGain===we.acceleration&&(i="Acceleration"),e.positiveStatGain===we.adaptability&&(i="Adaptability"),e.positiveStatGain===we.endurance&&(i="Endurance"),e.positiveStatGain===we.focus&&(i="Focus"),e.positiveStatGain===we.power&&(i="Power"),e.positiveStatGain===we.topSpeed&&(i="Speed"),e.negativeStatGain===we.acceleration&&(r="Acceleration"),e.negativeStatGain===we.adaptability&&(r="Adaptability"),e.negativeStatGain===we.endurance&&(r="Endurance"),e.negativeStatGain===we.focus&&(r="Focus"),e.negativeStatGain===we.power&&(r="Power"),e.negativeStatGain===we.topSpeed&&(r="Speed"),"+"+e.researchLevel+"% "+i+", -"+(e.researchLevel>25?25:e.researchLevel)+"% "+r}getSpecialtyItemDescription(e){var i="",r=5,a=this.globalService.globalVar.modifiers.find(m=>"internationalRacesToMedalModifier"===m.text);null!=a&&(r=a.value);var o=10,s=this.globalService.globalVar.modifiers.find(m=>"nationalRacesToMedalModifier"===m.text);null!=s&&(o=s.value);var l=5,c=this.globalService.globalVar.modifiers.find(m=>"whistleModifier"===m.text);null!=c&&(l=c.value);var u=5,d=this.globalService.globalVar.modifiers.find(m=>"goldenWhistleModifier"===m.text);null!=d&&(u=d.value),"Stopwatch"===e?i="Reduce training time by 5%":"Animal Handler"===e?i="Retain 2% of trained stats after breeding":"Course Maps"===e?i="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?i="Add option to auto breed when Breed XP is full":"Scouts"===e?i="You can choose the order of race legs for each relay team":"Money Mark"===e?i="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?i="Gain 1 medal for every "+o+" free races you complete":"International Races"===e?i="Gain 1 medal for every "+r+" free races you complete":"Team Manager"===e?i="Automatically run 1 additional free race per reset period <em>(banks 8 hours worth of races when away from the game)</em>":"Incubator Upgrade Lv1"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .01 per Breed. <em>(10% trait value)</em>":"Incubator Upgrade Lv2"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .025 per Breed. <em>(25% trait value)</em>":"Incubator Upgrade Lv3"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .05 per Breed. <em>(50% trait value)</em>":"Incubator Upgrade Lv4"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .1 per Breed. <em>(100% trait value)</em>":"Whistle"===e?i="Gain +"+l+" to a stat instead of +1 after a successful coaching attempt":"Golden Whistle"===e?i="Gain +"+u+" to a stat instead of +"+l+" after a successful coaching attempt":"Talent Point Voucher"===e&&(i="Increase Talent Points by 1");var v=this.sanitizer.sanitize(pi.HTML,this.sanitizer.bypassSecurityTrustHtml(i));return null!==v&&(i=v),i}getWeatherClusterFromEnum(e){var i="";return e===er.clearSkies?i="Clear Skies":e===er.inclementWeather?i="Inclement Weather":e===er.coldSpell&&(i="Cold Spell"),i}getWeatherClusterDescription(e){var i="";return e===er.clearSkies?i="Race terrain shifts between Sunny, Torrid, and Ashfall. \n Flatland and Volcanic Morale increased by 50%.":e===er.inclementWeather?i="Race terrain shifts between Rainy, Stormy, Maelstrom, and Hailstorm. \n Ocean Morale increased by 50%.":e===er.coldSpell&&(i="Race terrain shifts between Sunny, Snowfall, and Hailstorm. \n Tundra and Mountain Morale increased by 50%."),i}topSpeedPopover(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultMaxSpeedModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,we.topSpeed),c=1;e.talentTree.talentTreeType===pt.longDistance&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases max speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}accelerationPopover(e){var i=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAccelerationModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,we.acceleration),c=1;e.talentTree.talentTreeType===pt.sprint&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}endurancePopover(e){var i=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultStaminaModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,we.endurance),c=1;e.talentTree.talentTreeType===pt.longDistance&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}powerPopover(e){var i=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultPowerModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,we.power),c=1;e.talentTree.talentTreeType===pt.sprint&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}focusPopover(e){var i=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultFocusModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,we.focus),c=1;e.talentTree.talentTreeType===pt.longDistance&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}adaptabilityPopover(e){var i=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAdaptabilityModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,we.adaptability),c=1;e.talentTree.talentTreeType===pt.sprint&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}abilityPopover(){var e=25,i=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=i&&(e=i.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var i="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(i+="Level Efficiency Multiplier: "+(1+.01*(e.ability.abilityLevel-1))),i}bonusFreeRaceXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusLocalBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusLocalBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusLocalBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusCircuitRaceXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusCircuitBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+2*e.miscStats.bonusCircuitBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusCircuitBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusTrainingXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusTrainingBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusTrainingBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusTrainingBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusDiminishingReturnsPerFacilityLevelPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusDiminishingReturnsCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusDiminishingReturnsCertificateCount+" (Certificates Used: "+e.miscStats.bonusDiminishingReturnsCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusTrainingTimeReductionPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction();return r>0&&(i+="Track Race Rewards: "+r+"%\n"),i}bonusTalentsPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();return r>0&&(i+="Track Race Rewards: "+r+"\n"),i}isAmountMoreThanCertificateCap(e,i,r){var a=!1;return e=+e,"Free Race Breed XP Gain Certificate"===r&&i.miscStats.bonusLocalBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Circuit Race Breed XP Gain Certificate"===r&&i.miscStats.bonusCircuitBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Training Breed XP Gain Certificate"===r&&i.miscStats.bonusTrainingBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Diminishing Returns Increase Certificate"===r&&i.miscStats.bonusDiminishingReturnsCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),a}getAnimalMorale(e){if(null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e);return null==i?0:i.morale}slowSegmentWarning(e){return!e||confirm("The animal you have selected has low racing stats for this race. You may experience some loading time as they race. Continue?")}getWeekDayGrandPrixTimeSpan(){var e=new qn;return this.utilityService.getDayOfWeekFromNumber(e.weekStartDay)+" "+this.utilityService.get24HourFormat(e.weekStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekEndDay)+" "+this.utilityService.get24HourFormat(e.weekEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekEndHour)+")"}getWeekEndGrandPrixTimeSpan(){var e=new qn;return this.utilityService.getDayOfWeekFromNumber(e.weekendStartDay)+" "+this.utilityService.get24HourFormat(e.weekendStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekendEndDay)+" "+this.utilityService.get24HourFormat(e.weekendEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendEndHour)+")"}getRandomTip(){var e="",i=[];return this.globalService.globalVar.settings.get("hideTips")||(i.push("After upgrading training options, reselect them to gain their benefits!"),i.push("Don't forget to export your save regularly!"),i.push("Use the arrow keys to quickly navigate between barns or animals."),i.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),i.push("Small barns allow training for 4 hours, medium for 8 hours, and large for 12 hours. Your animals will train even when the game is not active."),i.push("Each animal gains more or less racing stats from a base stat than other animals. Hover over each base stat in the Animals tab to see its modifier."),i.push("Can't quite finish a close race? Burst Chance and Distance are not affected by Diminishing Returns, so continue to increase those stats to get ahead!"),i.push("Want to take a more hands on approach? Go to any barn that has an animal assigned and start coaching to raise stats manually!"),e=i[this.utilityService.getRandomInteger(0,i.length-1)]),e}getRandomFunFact(){var e,i,r,a,o,s,l="",c=[];return this.globalService.globalVar.settings.get("hideTips")||(c.push("Horses are prey animals. Their best method of defense? Run!"),(null===(e=this.globalService.globalVar.animals.find(d=>d.type===H.Monkey))||void 0===e?void 0:e.isAvailable)&&c.push("There are over 300 species of Monkey in the world. Roughly half are considered Old World Monkeys in Asia and Africa, and the others are New World Monkeys in Central and South America."),(null===(i=this.globalService.globalVar.animals.find(d=>d.type===H.Goat))||void 0===i?void 0:i.isAvailable)&&c.push("Mountain goats' wide toes, rough hooves, and sharp dewclaws give them incredible traction and the ability to climb steep slopes sometimes over 60 degrees."),(null===(r=this.globalService.globalVar.animals.find(d=>d.type===H.Octopus))||void 0===r?void 0:r.isAvailable)&&c.push("Octopi have the largest brain of any invertebrate and have been known to use tools, such as using coconut husks to defend themselves."),(null===(a=this.globalService.globalVar.animals.find(d=>d.type===H.Hare))||void 0===a?void 0:a.isAvailable)&&c.push("Hares' teeth never stop growing. They continually chew on grasses and twigs to keep their teeth from getting too large."),(null===(o=this.globalService.globalVar.animals.find(d=>d.type===H.Penguin))||void 0===o?void 0:o.isAvailable)&&c.push("Penguins' bodies are tapered on both ends meaning they can swim with very little resistance. They are considered one of the most streamlined animals in the world."),(null===(s=this.globalService.globalVar.animals.find(d=>d.type===H.Salamander))||void 0===s?void 0:s.isAvailable)&&c.push("Salamanders are capable of regenerating some organs and limbs. Their impressive regeneration is used as a model for scientific studies."),l=c[this.utilityService.getRandomInteger(0,c.length-1)]),l}getSettingDescriptions(e){var i="";return"Auto Skip Race Info"===e&&(i="Turn on to immediately skip to the end of any race."),"Finish Training Before Switching"===e&&(i="Turn on to wait until finishing your current training before switching to the next training you select."),"Hide Tips"===e&&(i="Turn on to stop displaying tips in the footer. (Tips never display in Mobile version presently)"),"Use Numbers For Circuit Rank"===e&&(i="Turn on to use numbers instead of letters when displaying ranks."),"Auto Start Event Race"===e&&(i="When event race begins, automatically start running with your current event relay team."),"Race Display Info"===e&&(i="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default."),i}getTotalFreeRacesPerPeriod(){var e=10,i=this.globalService.globalVar.modifiers.find(o=>"freeRacesPerTimePeriodModifier"===o.text);void 0!==i&&(e=i.value);var r=this.getRenown(),a=Math.floor(r/100);return a>15&&(a=15),e+a}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}getRelayEffectFromListByType(e,i){if(null!=e&&0!==e.length)return e.find(r=>r.effectType===i)}isEquipmentItemAnOrb(e){return"Amethyst Orb"===e||"Sapphire Orb"===e||"Amber Orb"===e||"Topaz Orb"===e||"Emerald Orb"===e||"Ruby Orb"===e}getRelayEffectNameByType(e){var i="";return e===$e.bigBrain?i="Big Brain":e===$e.blueBaton?i="Blue Baton":e===$e.camouflage?i="Camouflage":e===$e.deepBreathing?i="Deep Breathing":e===$e.flowingCurrent?i="Flowing Current":e===$e.greenBaton?i="Green Baton":e===$e.herdMentality?i="Herd Mentality":e===$e.inspiration?i="Inspiration":e===$e.navigator?i="Navigator":e===$e.orangeBaton?i="Orange Baton":e===$e.redBaton?i="Red Baton":e===$e.specialDelivery?i="Special Delivery":e===$e.supportAbilityCooldown?i="Cooldown Reduction Talent":e===$e.supportAbilityEfficiency?i="Ability Efficiency Talent":e===$e.supportAccelerationRelay?i="Acceleration Rate Talent":e===$e.supportAdaptabilityRelay?i="Adaptability Distance Talent":e===$e.supportBurstChance?i="Burst Chance Talent":e===$e.supportBurstDistance?i="Burst Distance Talent":e===$e.supportFocusRelay?i="Focus Distance Talent":e===$e.supportMaxSpeedRelay?i="Max Speed Talent":e===$e.supportPowerRelay?i="Power Efficiency Talent":e===$e.supportStaminaRelay?i="Stamina Talent":e===$e.violetBaton?i="Violet Baton":e===$e.yellowBaton&&(i="Yellow Baton"),i}getStatGainDescription(e,i){var r="";return e.topSpeed>0&&(r+="+"+i*e.topSpeed+" Speed\n"),e.acceleration>0&&(r+="+"+i*e.acceleration+" Acceleration\n"),e.endurance>0&&(r+="+"+i*e.endurance+" Endurance\n"),e.focus>0&&(r+="+"+i*e.focus+" Focus\n"),e.power>0&&(r+="+"+i*e.power+" Power\n"),e.adaptability>0&&(r+="+"+i*e.adaptability+" Adaptability\n"),r}getTalentTreeNames(){var e=[];return e.push("Sprint"),e.push("Support"),e.push("Long Distance"),e}getTalentTreeByStringName(e){return"Sprint"===e?pt.sprint:"Support"===e?pt.support:"Long Distance"===e?pt.longDistance:pt.none}getNameByTalentTree(e){var i="";return e===pt.sprint&&(i="Sprint"),e===pt.support&&(i="Support"),e===pt.longDistance&&(i="Long Distance"),i}getInDepthTalentTreeDescription(e){var i="";return"Sprint"===e?i="Sprinters excel at going short distances quickly. Whether it's through chaining together quick Bursts or powerful abilities, these racers will leave others in the dust at the starting line. Recommended for when you want to get the most out of Burst effects and high acceleration.":"Support"===e?i="Supporters excel when working alongside other animals. They have a special way of encouraging the racers after and sometimes before them to reach new limits. Recommended for when you want to get the most out of Relay effects.":"Long Distance"===e&&(i="Long Distance Racers excel when given time to ramp up and go the distance. These racers manage their stamina well and can reach incredible speeds over time. Recommended for racers with high max speed and that have abilities that improve over time."),i}getTalentDescription(e,i,r,a){var o="";return(null==a||a<=0)&&(a=1),r===pt.sprint&&(0===e&&0===i&&(o="Increase Adaptability stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(o="Increase Adaptability Distance by <span class='keyword'>"+5*a+"</span>% until you lose focus for the first time."),2===e&&0===i&&(o="Increase Adaptability Distance gain from Adaptability stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(o="Every time you make it through a special path without stumbling, enter a Burst that lasts <span class='keyword'>"+5*a+"</span>% as long as normal."),0===e&&1===i&&(o="Increase Acceleration stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(o="The first time velocity exceeds Max Speed while bursting, increase remaining burst distance by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(o="Increase Acceleration Rate gain from Acceleration stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(o="Each time your velocity reaches Max Speed, increase Max Speed by <span class='keyword'>"+.5*a+"</span>% and reduce Focus Distance by <span class='keyword'>"+.5*a+"</span>%. This effect can occur 10 times, up to <span class='keyword'>"+5*a+"</span>%."),0===e&&2===i&&(o="Increase Power stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(o="Increase Power Efficiency by <span class='keyword'>"+5*a+"</span>%, but consume stamina <span class='keyword'>"+5*a+"</span>% faster."),2===e&&2===i&&(o="Increase Power Efficiency gain from Power stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(o="The first time you use an ability every race, the efficiency is increased by <span class='keyword'>"+5*a+"</span>%.")),r===pt.support&&(0===e&&0===i&&(o="Increase Relay Animal's Adaptability Distance by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(o="Increase the effectiveness of your Relay effects by <span class='keyword'>"+2*a+"</span>%."),2===e&&0===i&&(o="Increase Relay Animal's Max Speed by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(o="The racer prior to you gains any relay effects you provide for <span class='keyword'>"+3*a+"</span>% of the normal length if possible."),0===e&&1===i&&(o="Increase Relay Animal's Acceleration Rate by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(o="Increase Burst Distance of next racer by <span class='keyword'>"+5*a+"</span>% of your Burst Distance on Relay."),2===e&&1===i&&(o="Increase Relay Animal's Stamina by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(o="Increase Burst Chance of next racer by <span class='keyword'>"+3*a+"</span>% of your Burst Chance on Relay."),0===e&&2===i&&(o="Increase Relay Animal's Power Efficiency by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(o="If Relay Animal ability has a cooldown, reduce it by <span class='keyword'>"+2*a+"</span>%."),2===e&&2===i&&(o="Increase Relay Animal's Focus Distance by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(o="Increase Relay Animal's Ability Efficiency by <span class='keyword'>"+2*a+"</span>%.")),r===pt.longDistance&&(0===e&&0===i&&(o="Increase Focus stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(o="Every burst increases Burst Velocity Bonus by <span class='keyword'>"+.5*a+"</span>%."),2===e&&0===i&&(o="Increase Focus Distance gain from Focus stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(o="Instead of reducing velocity to 10% when losing focus, reduce to <span class='keyword'>"+(10+2*a)+"</span>%."),0===e&&1===i&&(o="Increase Speed stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(o="While your velocity is 25% of your Max Speed or below, increase your Acceleration Rate by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(o="Increase Max Speed gain from Speed stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(o="After surpassing <span class='keyword'>"+.5*a+"</span>% of your Max Speed, your velocity can no longer drop below it. All calculations consider this to be 0% of your velocity."),0===e&&2===i&&(o="Increase Endurance stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(o="While stamina is below 35%, reduce stamina consumption by <span class='keyword'>"+5*a+"</span>%."),2===e&&2===i&&(o="Increase Stamina gain from Endurance stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(o="When running out of stamina, increase the percent regained by <span class='keyword'>"+2*a+"</span>%.")),o}getTalentUpgradeDescription(e,i,r,a){}getTotalPossiblePointsByRowColumn(e,i,r){var a=0;return r===pt.sprint&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===pt.support&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===pt.longDistance&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),a}getTalentPointsAvailableToAnimal(e){var i=0;return i=this.getResourceByName("Talent Points"),i+=e.miscStats.bonusTalents,(i-=e.talentTree.getTotalSpentPoints())<=0&&(i=0),i}gainMangoes(e){return new ie("Mangoes",e,U.Food)}gainApples(e){return new ie("Apples",e,U.Food)}gainBananas(e){return new ie("Bananas",e,U.Food)}gainOranges(e){return new ie("Oranges",e,U.Food)}gainStrawberries(e){return new ie("Strawberries",e,U.Food)}gainTurnips(e){return new ie("Turnips",e,U.Food)}gainCarrots(e){return new ie("Carrots",e,U.Food)}gainCoins(e){return new ie("Coins",e,U.Resources)}gainMedals(e){return new ie("Medals",e,U.Resources)}gainTokens(e){return new ie("Tokens",e,U.Resources)}}return t.\u0275fac=function(e){return new(e||t)(Ue(It),Ue(Fn),Ue(Jo))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bn=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.totalTime=0,this.gameUpdateEvent=new ut}Update(){var e=Date.now();const i=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=i,this.totalTime+=i;var r=performance.now();this.globalService.globalVar.lastTimeStamp=e,this.gameUpdateEvent.emit(i),this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(Ue(It),Ue(Di))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Xl{constructor(n,e){this.transformationType=n,this.options=e,this.recursionStack=new Set}transform(n,e,i,r,a,o=0){if(Array.isArray(e)||e instanceof Set){const s=r&&this.transformationType===ii.PLAIN_TO_CLASS?function J5(t){const n=new t;return n instanceof Set||"push"in n?n:[]}(r):[];return e.forEach((l,c)=>{const u=n?n[c]:void 0;if(this.options.enableCircularCheck&&this.isCircular(l))this.transformationType===ii.CLASS_TO_CLASS&&(s instanceof Set?s.add(l):s.push(l));else{let d;if("function"!=typeof i&&i&&i.options&&i.options.discriminator&&i.options.discriminator.property&&i.options.discriminator.subTypes){if(this.transformationType===ii.PLAIN_TO_CLASS){d=i.options.discriminator.subTypes.find(w=>w.name===l[i.options.discriminator.property]);const _=i.typeFunction({newObject:s,object:l,property:void 0});d=void 0===d?_:d.value,i.options.keepDiscriminatorProperty||delete l[i.options.discriminator.property]}this.transformationType===ii.CLASS_TO_CLASS&&(d=l.constructor),this.transformationType===ii.CLASS_TO_PLAIN&&(l[i.options.discriminator.property]=i.options.discriminator.subTypes.find(m=>m.value===l.constructor).name)}else d=i;const v=this.transform(u,l,d,void 0,l instanceof Map,o+1);s instanceof Set?s.add(v):s.push(v)}}),s}if(i===String&&!a)return null==e?e:String(e);if(i===Number&&!a)return null==e?e:Number(e);if(i===Boolean&&!a)return null==e?e:Boolean(e);if((i===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function K5(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(i===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function Z5(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((s,l)=>{e.then(c=>s(this.transform(void 0,c,i,void 0,void 0,o+1)),l)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!i&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(i=e.constructor)),!i&&n&&(i=n.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const s=this.getKeys(i,e,a);let l=n||{};!n&&(this.transformationType===ii.PLAIN_TO_CLASS||this.transformationType===ii.CLASS_TO_CLASS)&&(l=a?new Map:i?new i:{});for(const c of s){if("__proto__"===c||"constructor"===c)continue;const u=c;let m,d=c,v=c;if(!this.options.ignoreDecorators&&i)if(this.transformationType===ii.PLAIN_TO_CLASS){const T=Cr.findExposeMetadataByCustomName(i,c);T&&(v=T.propertyName,d=T.propertyName)}else if(this.transformationType===ii.CLASS_TO_PLAIN||this.transformationType===ii.CLASS_TO_CLASS){const T=Cr.findExposeMetadata(i,c);T&&T.options&&T.options.name&&(d=T.options.name)}m=this.transformationType===ii.PLAIN_TO_CLASS?e[u]:e instanceof Map?e.get(u):e[u]instanceof Function?e[u]():e[u];let _,w=m instanceof Map;if(i&&a)_=i;else if(i){const T=Cr.findTypeMetadata(i,v);if(T){const R={newObject:l,object:e,property:v},L=T.typeFunction?T.typeFunction(R):T.reflectedType;T.options&&T.options.discriminator&&T.options.discriminator.property&&T.options.discriminator.subTypes?e[u]instanceof Array?_=T:(this.transformationType===ii.PLAIN_TO_CLASS&&(_=T.options.discriminator.subTypes.find(W=>{if(m&&m instanceof Object&&T.options.discriminator.property in m)return W.name===m[T.options.discriminator.property]}),_=void 0===_?L:_.value,T.options.keepDiscriminatorProperty||m&&m instanceof Object&&T.options.discriminator.property in m&&delete m[T.options.discriminator.property]),this.transformationType===ii.CLASS_TO_CLASS&&(_=m.constructor),this.transformationType===ii.CLASS_TO_PLAIN&&m&&(m[T.options.discriminator.property]=T.options.discriminator.subTypes.find(W=>W.value===m.constructor).name)):_=L,w=w||T.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(R=>R.target===i&&!!R.properties[v]).forEach(R=>_=R.properties[v]);else if(this.options.enableImplicitConversion&&this.transformationType===ii.PLAIN_TO_CLASS){const R=Reflect.getMetadata("design:type",i.prototype,v);R&&(_=R)}}const S=Array.isArray(e[u])?this.getReflectedType(i,v):void 0,k=n?n[u]:void 0;if(l.constructor.prototype){const T=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if((this.transformationType===ii.PLAIN_TO_CLASS||this.transformationType===ii.CLASS_TO_CLASS)&&(T&&!T.set||l[d]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(m)){if(this.transformationType===ii.CLASS_TO_CLASS){let T=m;T=this.applyCustomTransformations(T,i,c,e,this.transformationType),(void 0!==T||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,T):l[d]=T)}}else{const T=this.transformationType===ii.PLAIN_TO_CLASS?d:c;let R;this.transformationType===ii.CLASS_TO_PLAIN?(R=e[T],R=this.applyCustomTransformations(R,i,T,e,this.transformationType),R=e[T]===R?m:R,R=this.transform(k,R,_,S,w,o+1)):void 0===m&&this.options.exposeDefaultValues?R=l[d]:(R=this.transform(k,m,_,S,w,o+1),R=this.applyCustomTransformations(R,i,T,e,this.transformationType)),(void 0!==R||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,R):l[d]=R)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}applyCustomTransformations(n,e,i,r,a){let o=Cr.findTransformMetadatas(e,i,this.transformationType);return void 0!==this.options.version&&(o=o.filter(s=>!s.options||this.checkVersion(s.options.since,s.options.until))),o=o.filter(this.options.groups&&this.options.groups.length?s=>!s.options||this.checkGroups(s.options.groups):s=>!s.options||!s.options.groups||!s.options.groups.length),o.forEach(s=>{n=s.transformFn({value:n,key:i,obj:r,type:a,options:this.options})}),n}isCircular(n){return this.recursionStack.has(n)}getReflectedType(n,e){if(!n)return;const i=Cr.findTypeMetadata(n,e);return i?i.reflectedType:void 0}getKeys(n,e,i){let r=Cr.getStrategy(n);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||i)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),i)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&n&&(a=[...Cr.getExposedProperties(n,this.transformationType),...Cr.getExcludedProperties(n,this.transformationType)]),!this.options.ignoreDecorators&&n){let o=Cr.getExposedProperties(n,this.transformationType);this.transformationType===ii.PLAIN_TO_CLASS&&(o=o.map(l=>{const c=Cr.findExposeMetadata(n,l);return c&&c.options&&c.options.name?c.options.name:l})),a=this.options.excludeExtraneousValues?o:a.concat(o);const s=Cr.getExcludedProperties(n,this.transformationType);s.length>0&&(a=a.filter(l=>!s.includes(l))),void 0!==this.options.version&&(a=a.filter(l=>{const c=Cr.findExposeMetadata(n,l);return!c||!c.options||this.checkVersion(c.options.since,c.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?l=>{const c=Cr.findExposeMetadata(n,l);return!c||!c.options||this.checkGroups(c.options.groups)}:l=>{const c=Cr.findExposeMetadata(n,l);return!(c&&c.options&&c.options.groups&&c.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(o=>this.options.excludePrefixes.every(s=>o.substr(0,s.length)!==s))),a=a.filter((o,s,l)=>l.indexOf(o)===s),a}checkVersion(n,e){let i=!0;return i&&n&&(i=this.options.version>=n),i&&e&&(i=this.options.version<e),i}checkGroups(n){return!n||this.options.groups.some(e=>n.includes(e))}}const Yl={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},Oa=new class e4{instanceToPlain(n,e){return new Xl(ii.CLASS_TO_PLAIN,ia(ia({},Yl),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToPlainFromExist(n,e,i){return new Xl(ii.CLASS_TO_PLAIN,ia(ia({},Yl),i)).transform(e,n,void 0,void 0,void 0,void 0)}plainToInstance(n,e,i){return new Xl(ii.PLAIN_TO_CLASS,ia(ia({},Yl),i)).transform(void 0,e,n,void 0,void 0,void 0)}plainToClassFromExist(n,e,i){return new Xl(ii.PLAIN_TO_CLASS,ia(ia({},Yl),i)).transform(n,e,void 0,void 0,void 0,void 0)}instanceToInstance(n,e){return new Xl(ii.CLASS_TO_CLASS,ia(ia({},Yl),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToClassFromExist(n,e,i){return new Xl(ii.CLASS_TO_CLASS,ia(ia({},Yl),i)).transform(e,n,void 0,void 0,void 0,void 0)}serialize(n,e){return JSON.stringify(this.instanceToPlain(n,e))}deserialize(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}deserializeArray(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}};function p0(t,n,e){return Oa.plainToInstance(t,n,e)}let g0=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.lookupService=r}getSpecializationPopoverText(e,i){var r="";if(e===Wt.TrainingFacility&&(r=i<=20?"Training Time Reduction: "+i+"%<br/>":"Training Time Reduction: 20%<br/> All Stat Multiplier: "+(i-20)/10+"<br/>"),e===Wt.BreedingGrounds){var a=this.globalService.globalVar.modifiers.find(W=>"breedingGroundsSpecializationModifier"===W.text);null!=a&&(r="Training Breed XP Multipler: "+i*(100*a.value)+"%<br/>")}if(e===Wt.Attraction){var o=60,s=this.globalService.globalVar.modifiers.find(W=>"attractionTimeToCollectModifier"===W.text);null!=s&&(o=s.value);var l=0;if(null!=this.globalService.globalVar.modifiers.find(W=>"attractionAmountModifier"===W.text))for(var u=1;u<=i;u++)l+=20*u;r="Amount Earned: "+l+" Coins / "+o+" seconds<br/>"}else if(e===Wt.ResearchCenter){var d=this.globalService.globalVar.modifiers.find(W=>"researchCenterIncrementsModifier"===W.text),v=this.globalService.globalVar.modifiers.find(W=>"researchCenterTrainingAnimalModifier"===W.text),m=this.globalService.globalVar.modifiers.find(W=>"researchCenterStudyingAnimalModifier"===W.text),_=this.globalService.globalVar.modifiers.find(W=>"researchCenterMaxStatGainModifier"===W.text);if(null==d||null==v||null==m||null==_)return"";var w=i*d.value,k="Training Animal Stat Gain: "+(100*(v.value+w<_.value?v.value+w:_.value)).toFixed(0)+"%<br />",T=(w-(_.value-v.value))/(_.value-m.value);T>0?(Math.floor(T)>0&&(k+="Additional Studying Animal Stat Gain (x"+Math.floor(T)+"): "+(100*_.value).toFixed(0)+"%<br />"),T>Math.floor(T)&&(k+="Additional Studying Animal Stat Gain: "+(100*((T-Math.floor(T))*(_.value-m.value)+m.value)).toFixed(0)+"%<br />")):k+="Additional Studying Animal Stat Gain: "+(100*m.value).toFixed(0)+"%<br />",r=k}var L=this.utilityService.getSanitizedHtml(r);return null!=L&&(r=L),r}handleResearchCenterStatIncrease(e,i){var r=this.globalService.globalVar.modifiers.find(W=>"researchCenterIncrementsModifier"===W.text),a=this.globalService.globalVar.modifiers.find(W=>"researchCenterTrainingAnimalModifier"===W.text),o=this.globalService.globalVar.modifiers.find(W=>"researchCenterStudyingAnimalModifier"===W.text),s=this.globalService.globalVar.modifiers.find(W=>"researchCenterMaxStatGainModifier"===W.text);if(null!=r&&null!=a&&null!=o&&null!=s&&null!=e.currentTraining){var S,c=i.barnUpgrades.specializationLevel*r.value,u=e.currentTraining.affectedStatRatios.topSpeed,d=e.currentTraining.affectedStatRatios.acceleration,v=e.currentTraining.affectedStatRatios.endurance,m=e.currentTraining.affectedStatRatios.power,_=e.currentTraining.affectedStatRatios.focus,w=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new Ve((S=a.value+c<s.value?a.value+c:s.value)*u,S*d,S*v,S*m,S*_,S*w)),this.globalService.calculateAnimalRacingStats(e);var k=(c-(s.value-a.value))/(s.value-o.value),T=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(k>0){T.length<k&&(k=T.length);for(var R=0;R<Math.floor(k);R++)T[R].increaseStats(new Ve(s.value*u,s.value*d,s.value*v,s.value*m,s.value*_,s.value*w)),this.globalService.calculateAnimalRacingStats(T[R]);if(k>Math.floor(k)&&T.length>R){var L=o.value+(k-Math.floor(k))*(s.value-o.value);T[R].increaseStats(new Ve(L*u,L*d,L*v,L*m,L*_,L*w)),this.globalService.calculateAnimalRacingStats(T[R])}}else T.length>=1&&(T[0].increaseStats(new Ve((L=o.value)*u,L*d,L*v,L*m,L*_,L*w)),this.globalService.calculateAnimalRacingStats(T[0]))}}getAnimalsInRandomOrder(e,i){for(var r=[],a=this.globalService.globalVar.animals.filter(u=>u.raceCourseType===e&&u.isAvailable&&u.type!==i.type),o=this.globalService.globalVar.animals.filter(u=>u.raceCourseType!==e&&u.isAvailable),s=a.length,l=0;l<s;l++){var c=this.utilityService.getRandomInteger(1,a.length);r.push(a[c-1]),a=a.filter(u=>u!==a[c-1])}for(s=o.length,l=0;l<s;l++)c=this.utilityService.getRandomInteger(1,o.length),r.push(o[c-1]),o=o.filter(v=>v!==o[c-1]);return r}handleAttractionRevenue(e,i){var r=this.globalService.globalVar.barns.find(v=>v.barnNumber===i.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===Wt.Attraction){var a=60,o=this.globalService.globalVar.modifiers.find(v=>"attractionTimeToCollectModifier"===v.text);null!=o&&(a=o.value);var s=0;if(null!=this.globalService.globalVar.modifiers.find(v=>"attractionAmountModifier"===v.text))for(var c=1;c<=r.barnUpgrades.specializationLevel;c++)s+=20*c;for(r.barnUpgrades.currentDeltaTime+=e,null!==i.currentTraining&&r.barnUpgrades.currentDeltaTime>=i.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=i.currentTraining.trainingTimeRemaining);r.barnUpgrades.currentDeltaTime>=a;){r.barnUpgrades.currentDeltaTime-=a;var d=this.globalService.globalVar.resources.find(v=>"Coins"===v.name);void 0!==d&&(d.amount+=s)}}}}return t.\u0275fac=function(e){return new(e||t)(Ue(It),Ue(Fn),Ue(Di))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Yr=(()=>{return(t=Yr||(Yr={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",Yr;var t})();let v0=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e,i,r){this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var a=new wf,o=0,s=0,l=0,c=0,u=0;e.raceLegs.forEach(Z=>o+=Z.distance);var d=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var v=o/e.timeToComplete,m=this.globalService.globalVar.animalDecks.find(Z=>Z.isPrimaryDeck);void 0!==i&&i&&(m=this.globalService.globalVar.animalDecks.find(Z=>Z.autoRunFreeRace));var _=0;this.timeToComplete=e.timeToComplete;var w=[],S=[],k=Yr.None,T=0,R=0,L=0,W=0,ae=0,ee=0,be=1,oe=0,_e=new Pt,ge=new Pt;if(void 0===m)return a.errorMessage="No relay team selected.",a;if(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(m),this.setupBraziers(),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],e.raceUI.racePositionByFrame=[],e.timeToComplete<=300)a.addRaceUpdate(d,Math.round(e.timeToComplete)+" seconds are on the race clock.");else{var De=this.globalService.getRemainingEventRaceTime()+this.globalService.globalVar.eventRaceData.bonusTime,dt=this.utilityService.getHoursRemainingFromSeconds(De),nt=this.utilityService.getMinutesLeftInHourRemainingFromSeconds(De),Dt=this.utilityService.getSecondsLeftInMinuteRemainingFromSeconds(De),Qe=Math.floor(Dt).toString(),lt=dt.toString(),Et=nt.toString();dt<10&&(lt=dt<1||dt>59?"00":String(lt).padStart(2,"0")),nt<10&&(Et=nt<1||nt>59?"00":String(Et).padStart(2,"0")),Dt<10&&(Qe=Dt<1||Dt>59?"00":String(Qe).padStart(2,"0")),a.addRaceUpdate(d,lt+":"+Et+":"+Qe+" is left on the race clock.")}return e.raceLegs.forEach(Z=>{var C=null;if(null==(C=this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(yt=>yt.raceCourseType===Z.courseType)))return console.log(this.selectedRace),void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||(C.raceVariables=new Eo,C.totalRacesRun+=1)}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(Z=>{var C=void 0;if(null==(C=this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(Xe=>Xe.raceCourseType===Z.courseType)))return console.log(this.selectedRace),void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.increasePersistentAbilityXp(C);var yt=void 0;this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&this.globalService.globalVar.eventRaceData.previousRaceSegmentData.racingAnimalType===C.type&&(yt=this.globalService.globalVar.eventRaceData.previousRaceSegmentData);var xt=void 0,jt=new Yi,ot="<span class='coloredText "+Z.getCourseTypeClass()+"'>"+C.name+"</span>",gt="",on="";if(R>0){var Ui=this.racingAnimals.find(Xe=>Xe.raceCourseType===e.raceLegs[R-1].courseType);null!=Ui&&(_e=Ui)}else _e=null;if(R<e.raceLegs.length-1){jt=e.raceLegs[R+1];var Mi=this.racingAnimals.find(Xe=>Xe.raceCourseType===jt.courseType);null!=Mi&&(ge=Mi,on="<span class='coloredText "+jt.getCourseTypeClass()+"'>"+(null==ge?void 0:ge.name)+"</span>")}else ge=null;this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&a.addRaceUpdate(d,ot+" clears "+Math.round(this.selectedRace.length).toLocaleString()+" meters of the Grand Prix and moves onto the next leg of the race.");var ci=Z.terrain.maxSpeedModifier,Hi=Z.terrain.accelerationModifier,Qi=Z.terrain.staminaModifier,Gi=Z.terrain.powerModifier,Ki=Z.terrain.focusModifier,$t=Z.terrain.adaptabilityModifier;d<this.timeToComplete*this.frameModifier&&(S.length>0&&void 0!==(xt=S[S.length-1])&&(gt="<span class='coloredText "+xt.getCourseTypeClass()+"'>"+(null==_e?void 0:_e.name)+"</span>"),this.getPrelayEffects(C,ge,null==jt?void 0:jt.terrain,1,a,d,gt,jt,Z),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.PrepareRacingAnimal(a,d,gt,C,w,Z,xt,void 0,void 0,l,u,c),this.prepareRacingLeg(Z,C),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix||a.addRaceUpdate(d,ot+" starts their leg of the race."));var ei=C.currentStats.stamina,ft=0,Vi=Z.distance,vi=new Or,wi=new Or,ri=!1,Oi=1,Ln={permanentAdaptabilityIncreaseMultiplier:1},Dn={permanentMaxSpeedIncreaseMultiplier:1},hr=1,Jr=1,Dr={coldBloodedIncreaseMultiplier:1},Qn=1,_n=[],Zi=[],mt=1,Ze=!1,wt=0,fr=[!1,!1,!1,!1,!1],ea=!1,ta=0,fo=!1,po=0,xe=0,he=0,fi=0,Pn=0,go=0;if(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var Vo=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime();Pn+=v*Vo,go=this.globalService.globalVar.eventRaceData.distanceCovered}s+go>v*(d/this.frameModifier)+Pn?(Ze||(td=!0),Ze=!0):(Ze&&(td=!0),Ze=!1),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(mt=this.globalService.getAnimalStatLossFromExhaustionEventRace(C))<1&&(C.raceVariables.ranOutOfStamina=!0),null!=yt&&(ft=yt.velocity,C.currentStats.stamina=yt.stamina,W=yt.deepBreathingStaminaGain,Oi=yt.permanentMaxSpeedIncreaseMultiplier,Ln.permanentAdaptabilityIncreaseMultiplier=yt.permanentAdaptabilityIncreaseMultiplier,Dn.permanentMaxSpeedIncreaseMultiplier=yt.permanentMaxSpeedIncreaseObjMultiplier,hr=yt.feedingFrenzyIncreaseMultiplier,Jr=yt.greatMigrationAccelerationIncreaseAdditive,Dr.coldBloodedIncreaseMultiplier=yt.coldBloodedIncreaseMultiplier,Qn=yt.fleetingSpeedIncreaseMultiplier,xe=yt.whalePowerStored,fi=yt.pathsClearedWithoutLosingFocus,C.raceVariables=yt.raceVariables.makeCopy(),yt.nineTailsBuffs.length>0&&yt.nineTailsBuffs.forEach(Xe=>{_n.push(Xe)}),yt.grazeBuffs.length>0&&yt.grazeBuffs.forEach(Xe=>{Zi.push(Xe)}),yt.relayEffects.length>0&&yt.relayEffects.forEach(Xe=>{null!=C&&(C.raceVariables.relayEffects.push(Xe),null!=C.raceVariables.relayEffects&&C.raceVariables.relayEffects.length>0&&C.raceVariables.relayEffects.forEach(nd=>{nd.effectType!==$e.supportStaminaRelay&&nd.effectType!==$e.yellowBaton&&(nd.isMultiplicative?C.currentStats.multiplyCurrentRacingStats(nd.relayAffectedStatRatios):C.currentStats.addCurrentRacingStats(nd.relayAffectedStatRatios))}))}),ea=yt.longDistanceTalentIncreaseAccelerationWithLowVelocity,ta=yt.maxSpeedFloor,mt=yt.statLossFromExhaustion);var No=this.lookupService.getRelayEffectFromListByType(C.raceVariables.relayEffects,$e.camouflage);void 0!==No&&void 0!==No.additionalValue&&(ae=No.additionalValue);var Fo=this.lookupService.getRelayEffectFromListByType(C.raceVariables.relayEffects,$e.herdMentality);void 0!==Fo&&void 0!==Fo.additionalValue&&(L=Fo.additionalValue);var tn,yn=this.lookupService.getRelayEffectFromListByType(C.raceVariables.relayEffects,$e.specialDelivery);void 0!==yn&&void 0!==yn.additionalValue&&(ee=yn.additionalValue),"Nap"===C.ability.name&&C.type===H.Hare&&((tn=Z.distance-this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt))<0&&(tn=0),C.ability.remainingLength=tn),"Buried Treasure"===C.ability.name&&C.type===H.Octopus&&((tn=Z.distance-this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt))<0&&(tn=0),C.ability.remainingLength=tn);var En=this.lookupService.getRelayEffectFromListByType(C.raceVariables.relayEffects,$e.deepBreathing);if(void 0!==En&&void 0!==En.additionalValue){var Ua=C.raceVariables.relayEffects.filter(Xe=>Xe.effectType===$e.deepBreathing);void 0!==Ua&&Ua.forEach(Xe=>{void 0!==Xe.additionalValue&&(W=Xe.additionalValue),W>0&&C.type!==H.Goat&&(C.currentStats.stamina+=W)})}void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(un[un.exhaustionPenaltyIncreased])&&(C.currentStats.stamina/=2);for(var vo=d;vo<=this.timeToComplete*this.frameModifier;vo++){wt+=1,k=Yr.None;var Ha=!1,Ti=0;if(_>0)for(var ac=0;ac<_;ac++)Ti+=e.raceLegs[ac].distance;v=this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime):o/this.timeToComplete;var Nr=s-Ti,W0=0,q0=!1,qu=0;if(Z.pathData.forEach(Xe=>{!q0&&Nr>=qu&&Nr<qu+Xe.length&&(q0=!0,vi=Xe,W0=Nr-qu),Xe.legStartingDistance=qu,qu+=Xe.length,q0||(wi=Xe)}),"Night Vision"===C.ability.name&&C.type===H.Gecko&&!C.ability.abilityInUse&&!wi.didAnimalLoseFocus&&wi.length>0&&(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCap||(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount+=1),Oi+=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100,this.globalService.increaseAbilityXp(C),C.ability.abilityInUse=!0)),"Feeding Frenzy"===C.ability.name&&C.type===H.Shark){var $f=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt);if(Nr<=$f||Nr>=Z.distance-$f){hr=1.5;var y2=this.globalService.globalVar.modifiers.find(Xe=>"feedingFrenzyPositiveModifier"===Xe.text);void 0!==y2&&(hr=y2.value)}else hr=1}L>0&&(C.raceVariables.isBursting=!0,Ha=!0,C.currentStats.stamina+=L,L=0,null!=_e&&(_e.ability.abilityUsed=!0)),"Navigator"===C.ability.name&&C.type===H.Dolphin&&(C.ability.abilityInUse=!1),C.type===H.Fox&&"Fleeting Speed"===C.ability.name&&!C.ability.abilityUsed&&(Qn+=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100,C.ability.abilityUsed=!0),C.type===H.Dolphin&&"Echolocation"===C.ability.name&&(C.ability.abilityInUse?(Z.terrain.maxSpeedModifier<1&&(Z.terrain.maxSpeedModifier=1),Z.terrain.accelerationModifier<1&&(Z.terrain.accelerationModifier=1),Z.terrain.staminaModifier<1&&(Z.terrain.staminaModifier=1),Z.terrain.powerModifier<1&&(Z.terrain.powerModifier=1),Z.terrain.focusModifier<1&&(Z.terrain.focusModifier=1),Z.terrain.adaptabilityModifier<1&&(Z.terrain.adaptabilityModifier=1)):(Z.terrain.maxSpeedModifier=ci,Z.terrain.accelerationModifier=Hi,Z.terrain.staminaModifier=Qi,Z.terrain.powerModifier=Gi,Z.terrain.focusModifier=Ki,Z.terrain.adaptabilityModifier=$t,this.checkForBlinders(Z,C))),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?(ri=!1,vi===Z.pathData[Z.pathData.length-1]&&this.globalService.globalVar.eventRaceData.animalData.some(Xe=>Xe.isSetToRelay)&&(ri=!0)):ri=vi===Z.pathData[Z.pathData.length-1];var Xu=this.getModifiedAdaptability(C,Ln,mt,_n,Zi,Z,Nr,ge,jt,a,d,ot,on),Wf=this.getModifiedFocus(C,mt,_n,Zi,Dr),eW=this.didAnimalStumble(C,vi,W0,Z.terrain,Ln,Xu,mt,d,ot,a),w2=this.didAnimalLoseFocus(C,this.timeToComplete,e.length,s,Z.terrain,mt,Dr,vi,Wf);if(w2){if(C.raceVariables.lostFocus=!0,C.raceVariables.hasLostFocusDuringRace=!0,C.raceVariables.currentLostFocusLength=C.raceVariables.defaultLostFocusLength,C.raceVariables.metersSinceLostFocus=0,T=ft,this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var C2=.02,X0=this.globalService.globalVar.modifiers.find(Xe=>"focusMoraleLossModifier"===Xe.text);null!=X0&&(C2=X0.value),this.globalService.changeGrandPrixMorale(C.type,-C2)}if("Night Vision"===C.ability.name&&C.type===H.Gecko&&(Oi=1),C.getEquippedItemName()===this.globalService.getEquipmentName(rt.scaryMask)&&Ze&&!C.raceVariables.scaryMaskEffectOccurred){C.raceVariables.scaryMaskEffectOccurred=!0;var Y0=2,S2=this.globalService.globalVar.modifiers.find(Xe=>"scaryMaskEquipmentModifier"===Xe.text);void 0!==S2&&(Y0=S2.value),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=Y0:this.timeToComplete+=Y0}a.addRaceUpdate(d,ot+" is distracted and lost focus!")}if(eW){if(C.raceVariables.stumbled=!0,C.raceVariables.currentStumbledLength=C.raceVariables.defaultStumbledLength,T=ft,this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var T2=.02,Q0=this.globalService.globalVar.modifiers.find(Xe=>"stumbleMoraleLossModifier"===Xe.text);null!=Q0&&(T2=Q0.value),this.globalService.changeGrandPrixMorale(C.type,-T2)}a.addRaceUpdate(d,ot+" stumbles!")}if(0===C.currentStats.stamina){var Yu=.9,D2=this.globalService.globalVar.modifiers.find(Xe=>"exhaustionStatLossModifier"===Xe.text);if(void 0!==D2&&(Yu=D2.value),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var K0=1-Yu;Yu=1-(K0*=1/this.lookupService.getAnimalMorale(C.type))}void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(un[un.exhaustionPenaltyIncreased])&&(Yu*=2),mt*=Yu;var Z0=.3,R2=this.globalService.globalVar.modifiers.find(Xe=>"exhaustionStatLossMinimumModifier"===Xe.text);void 0!==R2&&(Z0=R2.value),mt<Z0&&(mt=Z0),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.setStaminaLossForEventAnimal(mt,C.type);var qf=.5;if(C.talentTree.talentTreeType===pt.longDistance&&(qf+=.02*C.talentTree.column3Row4Points),C.getEquippedItemName()===this.globalService.getEquipmentName(rt.quickSnack)){qf=1;var x2=this.globalService.globalVar.modifiers.find(Xe=>"quickSnackEquipmentModifier"===Xe.text);void 0!==x2&&(qf=x2.value)}C.currentStats.stamina=ei*qf,a.addRaceUpdate(d,ot+" runs out of stamina and must slow down.")}if(C.raceVariables.lostFocus||C.raceVariables.stumbled||fo){if(C.raceVariables.lostFocus){k=Yr.LostFocus;var k2=.9;C.talentTree.talentTreeType===pt.longDistance&&(k2-=.02*C.talentTree.column1Row4Points);var J0=T*k2;ft>ta&&(ft-=J0/C.raceVariables.defaultLostFocusLength),C.raceVariables.currentLostFocusLength-=1,0===C.raceVariables.currentLostFocusLength&&(C.raceVariables.lostFocus=!1,C.type===H.Warthog&&"Mud Pit"===C.ability.name&&(a.addRaceUpdate(d,ot+" finds a mud pit and can't help but roll in it."),C.ability.abilityInUse=!0,fo=!0,T=ft,ft=0,C.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt),this.globalService.increaseAbilityXp(C)))}if(C.raceVariables.stumbled&&(k=Yr.Stumble,J0=T-T*vi.stumbleSeverity,ft>ta&&(ft-=J0/C.raceVariables.defaultStumbledLength),C.raceVariables.currentStumbledLength-=1,0===C.raceVariables.currentStumbledLength&&(C.raceVariables.stumbled=!1)),fo){var M2=e.length/this.timeToComplete;po<this.frameModifier/4||po>=3*this.frameModifier/4?ft+=M2/this.frameModifier:ft-=M2/this.frameModifier,(po+=1)===this.frameModifier&&(fo=!1,po=0,ft=T)}}else{var Un=C.currentStats.accelerationMs;if(Un*=Z.terrain.accelerationModifier,Un*=mt,void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(li[li.sticky])&&(Un*=1-s/this.selectedRace.length*.8),C.type===H.Horse&&"Pacemaker"===C.ability.name&&C.ability.abilityInUse&&(Un*=1.5),C.type===H.Cheetah&&"Sprint"===C.ability.name&&C.ability.abilityInUse&&(Un*=1.35),C.type===H.Cheetah&&"Giving Chase"===C.ability.name&&!Ze&&(Un*=1+this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100),"Feeding Frenzy"===C.ability.name&&C.type===H.Shark&&(Un*=hr),C.type===H.Caribou&&"Great Migration"===C.ability.name&&(Un+=Jr),"Wild Toboggan"===C.ability.name&&C.type===H.Penguin&&C.ability.abilityInUse){var rW=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100,Bs=20,A2=this.globalService.globalVar.modifiers.find(Xe=>"maxDriftAmountModifier"===Xe.text);void 0!==A2&&(Bs=A2.value),(oc=vi.driftAmount)>(Bs*=2)&&(oc=Bs),Un*=1+rW*(Math.abs(oc)/Bs),C.ability.abilityInUse=!0}"Nap"===C.ability.name&&C.type===H.Hare&&(C.ability.remainingLength-=v*(1/this.frameModifier),C.ability.remainingLength<=0&&(C.ability.remainingLength=0),C.ability.remainingLength>0&&(Un=0)),"Buried Treasure"===C.ability.name&&C.type===H.Octopus&&(C.ability.remainingLength-=v*(1/this.frameModifier),C.ability.remainingLength<=0&&(C.ability.remainingLength=0),C.ability.remainingLength>0&&(Un=0)),C.type===H.Salamander&&"Heat Up"===C.ability.name&&C.ability.abilityInUse&&(Un*=1+.15*C.ability.totalUseCount),C.type===H.Fox&&"Trickster"===C.ability.name&&"Acceleration"===C.ability.tricksterStatLoss&&C.ability.abilityInUse&&(Un*=.75),C.type===H.Fox&&"Trickster"===C.ability.name&&"Acceleration"===C.ability.tricksterStatGain&&C.ability.abilityInUse&&(Un*=1.5),C.type===H.Fox&&"Nine Tails"===C.ability.name&&(Un*=1+.15*this.getNineTailsBuffCount("Acceleration",_n)),C.type===H.Warthog&&"Graze"===C.ability.name&&(Un*=1+.1*this.getGrazeBuffCount("Acceleration",Zi)),C.type===H.Whale&&"Whalesong"===C.ability.name&&(3===C.ability.totalUseCount||C.ability.totalUseCount>5)&&C.ability.abilityInUse&&(Un*=1.3),C.getEquippedItemName()===this.globalService.getEquipmentName(rt.athleticTape)&&C.raceVariables.isBursting&&(Un*=.5),ea&&(Un*=1+.05*C.talentTree.column2Row2Points),ft+=Un/this.frameModifier}ft<0&&!fo&&(ft=0);var bi=C.currentStats.maxSpeedMs;if(bi*=Z.terrain.maxSpeedModifier,bi*=mt,void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(un[un.reduceSpeedOnRelay])&&(bi*=1-.2*this.racingAnimals.indexOf(C)),C.type===H.Cheetah&&"Sprint"===C.ability.name&&C.ability.abilityInUse&&(bi*=1.35),C.type===H.Cheetah&&"On The Hunt"===C.ability.name&&(bi*=Oi),"Nap"===C.ability.name&&C.type===H.Hare&&(bi*=2),Ze&&C.type===H.Shark&&"Blood In The Water"===C.ability.name&&(bi*=1+this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100),null!==ge&&ge.type===H.Shark&&"Feeding Frenzy"===ge.ability.name||null!==_e&&_e.type===H.Shark&&"Feeding Frenzy"===_e.ability.name){var P2=.9,E2=this.globalService.globalVar.modifiers.find(Xe=>"feedingFrenzyNegativeModifier"===Xe.text);void 0!==E2&&(P2=E2.value),bi*=P2}if("Feeding Frenzy"===C.ability.name&&C.type===H.Shark&&(bi*=hr),"Quick Toboggan"===C.ability.name&&C.type===H.Penguin&&(bi*=Dn.permanentMaxSpeedIncreaseMultiplier),C.type===H.Gecko&&"Night Vision"===C.ability.name&&(bi*=Oi),C.type===H.Fox&&"Trickster"===C.ability.name&&"Max Speed"===C.ability.tricksterStatLoss&&C.ability.abilityInUse&&(bi*=.75),C.type===H.Fox&&"Trickster"===C.ability.name&&"Max Speed"===C.ability.tricksterStatGain&&C.ability.abilityInUse&&(bi*=1.5),C.type===H.Fox&&"Fleeting Speed"===C.ability.name){var Qu=Qn;(Qu-=.02*Math.floor(Nr/Z.distance*100)*(Qu-1))<1&&(Qu=1),bi*=Qu}if(C.type===H.Fox&&"Nine Tails"===C.ability.name&&(bi*=1+.15*this.getNineTailsBuffCount("Max Speed",_n)),C.type===H.Warthog&&"Graze"===C.ability.name&&(bi*=1+.1*this.getGrazeBuffCount("Max Speed",Zi)),C.type===H.Whale&&"Whalesong"===C.ability.name&&C.ability.totalUseCount>=5&&C.ability.abilityInUse&&(bi*=1.3),C.type===H.Whale&&"Storing Power"===C.ability.name&&(C.ability.abilityInUse&&(he=.1*bi,bi*=.9),bi+=xe),C.talentTree.talentTreeType===pt.sprint&&(bi*=1+.005*C.talentTree.column2Row4Points*C.raceVariables.velocityReachesMaxSpeedCount),ta=0,C.talentTree.talentTreeType===pt.longDistance&&ft>bi*(.005*C.talentTree.column2Row4Points)&&(ta+=bi*(.005*C.talentTree.column2Row4Points)),C.type===H.Whale&&"Unparalleled Focus"===C.ability.name&&C.ability.abilityInUse&&(ta+=.2*bi),C.getEquippedItemName()===this.globalService.getEquipmentName(rt.incense)){var I2=.9,V2=this.globalService.globalVar.modifiers.find(Xe=>"incenseEquipmentModifier"===Xe.text);void 0!==V2&&(I2=V2.value),ft>=bi*I2&&(ft=bi)}ea=C.talentTree.talentTreeType===pt.longDistance&&ft<=.25*bi,ft>bi&&(ft=bi,C.talentTree.talentTreeType===pt.sprint&&C.raceVariables.velocityReachesMaxSpeedCount<10&&(C.raceVariables.velocityReachesMaxSpeedCount+=1)),vi.checkedForBurst||(wi.didAnimalLoseFocus?fi=0:fi+=1,fi>=3&&C.type===H.Whale&&"Unparalleled Focus"===C.ability.name&&(C.ability.abilityInUse=!0,C.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt),this.globalService.increaseAbilityXp(C),a.addRaceUpdate(d,ot+"'s immense focus prevents their velocity from dropping too low."),fi=0),void 0!==wi&&void 0!==wi.routeDesign&&wi.routeDesign!==ze.Regular&&!wi.didAnimalStumble&&(null!=C.equippedOrb&&this.globalService.getOrbTypeFromResource(C.equippedOrb)===tt.emerald&&this.globalService.increaseEmeraldOrbXp(wi.length),C.type===H.Goat&&"Sure-footed"===C.ability.name&&(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCap||(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount+=1),Ln.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100,this.globalService.increaseAbilityXp(C)))));var Xf=this.doesRacerMiniBurst(C,wi),Yf=this.doesRacerBurst(C,vi,this.timeToComplete,e.length,s,Xu,Wf);if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(un[un.noBurst])&&(Xf=!1,Yf=!1,Ha=!1),Yf||Xf||Ha){if(C.raceVariables.isBursting=!0,(Yf||Ha)&&(C.raceVariables.remainingBurstMeters+=this.getBurstDistance(C,Z.terrain.powerModifier,mt,Zi)),Xf&&(C.raceVariables.remainingBurstMeters+=this.getBurstDistance(C,Z.terrain.powerModifier,mt,Zi)*(.05*C.talentTree.column1Row4Points)),C.raceVariables.burstCount+=1,this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var O2=.02,tb=this.globalService.globalVar.modifiers.find(Xe=>"burstMoraleBoostModifier"===Xe.text);null!=tb&&(O2=tb.value),this.globalService.changeGrandPrixMorale(C.type,O2)}if(C.type===H.Monkey&&"Frenzy"===C.ability.name&&(C.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt),this.globalService.increaseAbilityXp(C)),C.type===H.Hare&&"Prey Instinct"===C.ability.name&&!C.ability.abilityUsed&&(C.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt),C.ability.abilityUsed=!0),C.type===H.Whale&&"Storing Power"===C.ability.name&&(xe+=he),C.type===H.Octopus&&"Big Brain"===C.ability.name&&!(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCap)){var sW=Math.round(Z.pathData.length/3);if(C.raceVariables.burstCount===sW){this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount+=1),a.addRaceUpdate(d,ot+" uses "+(null==C?void 0:C.ability.name)+".");var lW=1+this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100,cW=this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;this.AddRelayEffect(new Pt,C,cW,new Ve(1,1,1,lW,1,1),!0,$e.bigBrain,!0);var N2=4,F2=this.globalService.globalVar.modifiers.find(Xe=>"relayAbilityXpGainModifier"===Xe.text);void 0!==F2&&(N2=F2.value),this.globalService.increaseAbilityXp(C,N2)}}if((Yf||Ha)&&a.addRaceUpdate(d,"<strong>BURST!</strong> "+ot+" is breaking their limit!"),Xf&&a.addRaceUpdate(d,"<strong>MINI BURST!</strong> "+ot+" is breaking their limit!"),C.type!==H.Cheetah||"On The Hunt"!==C.ability.name||this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCap||(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount+=1),Oi+=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100,this.globalService.increaseAbilityXp(C)),C.type===H.Goat&&"Deep Breathing"===C.ability.name){var Qf=ei*(this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100);C.currentStats.stamina+=Qf,a.addRaceUpdate(d,ot+" uses "+C.ability.name+"."),C.currentStats.stamina>ei&&(Qf=C.currentStats.stamina-ei,$f=0,this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCap||(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(Qf*=.2,this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount+=1),this.AddRelayEffect(new Pt,C,$f,new Ve(0,0,0,0,0,0),!1,$e.deepBreathing,!0,Qf)),C.currentStats.stamina=ei),this.globalService.increaseAbilityXp(C)}}var Rr=ft;if(ae>0){var ib=this.lookupService.getRelayEffectFromListByType(C.raceVariables.relayEffects,$e.camouflage);if(void 0!==ib&&void 0!==ib.additionalValue){var nb=Nr/ib.remainingRelayMeters;nb>1&&(nb=1),(Rr+=(1-nb)*ae)>1.5*bi&&(Rr=1.5*bi)}}if(C.raceVariables.isBursting){k=Yr.Burst;var Ku=1.25;C.type===H.Goat&&"In The Rhythm"===C.ability.name&&(Ku+=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt)/100),Ku+=ee,C.talentTree.talentTreeType===pt.longDistance&&(Ku+=C.raceVariables.burstCount*(.005*C.talentTree.column1Row2Points)),C.raceVariables.remainingBurstMeters>=Rr/this.frameModifier?(C.raceVariables.remainingBurstMeters-=(Rr*=Ku)/this.frameModifier,C.raceVariables.remainingBurstMeters<0&&(Rr+=C.raceVariables.remainingBurstMeters,C.raceVariables.remainingBurstMeters=0)):(Rr-=C.raceVariables.remainingBurstMeters,Rr+=C.raceVariables.remainingBurstMeters*Ku,C.raceVariables.remainingBurstMeters=0,C.raceVariables.isBursting=!1,a.addRaceUpdate(d,ot+"'s burst ends.")),C.talentTree.talentTreeType===pt.sprint&&!C.raceVariables.velocityExceedsMaxSpeedDuringBurst&&Rr>bi&&C.raceVariables.isBursting&&(C.raceVariables.remainingBurstMeters+=C.raceVariables.remainingBurstMeters*(.05*C.talentTree.column2Row2Points),C.raceVariables.velocityExceedsMaxSpeedDuringBurst=!0)}var nr=Rr/this.frameModifier;if(C.ability.abilityInUse&&(C.type===H.Monkey&&"Leap"===C.ability.name||C.type===H.Octopus&&"Propulsion"===C.ability.name)){var dW=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt);nr+=dW/C.ability.totalFrames,C.ability.remainingFrames-=1,C.ability.remainingFrames<=0&&(C.ability.abilityInUse=!1)}if(Z.courseType===j.Tundra){var oc;if(this.handleTundraDrift(C,vi,wi,ri,Xu,Z.terrain,W0,nr,mt,Dn,a,ot,d))nr=0,ft=0,a.addRaceUpdate(d,ot+" slides into a wall and loses all momentum!");else if((oc=Math.abs(vi.driftAmount))<=(Bs=20)&&!ri){var B2=1-oc/100;nr*=B2,bi*=B2}this.tundraPreviousYAmount=C.raceVariables.icyCurrentYAmount}Z.courseType===j.Volcanic?this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.selectedRace.raceUI.lavaFallPercentByFrame.push([0,0,0,0,0]):this.handleLavaFall(C,wt,e.length/this.timeToComplete,Nr,Z.distance,a,d,fr)&&(this.timeToComplete=d/this.frameModifier):this.selectedRace.raceLegs.some(Xe=>Xe.courseType===j.Volcanic)&&this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),s+=nr>Vi?Vi:nr,Vi-=nr,this.giveOrbXpBasedOnMeters(nr,C,ft,bi);var Ls=1e5;this.timeToComplete*this.frameModifier>2e4&&(Ls=1e4);var rb=1e5;if(this.timeToComplete*this.frameModifier>2e4&&(rb=1e3),e.raceUI.distanceCoveredByFrame.push(Math.round(s*rb)/rb),e.raceUI.velocityByFrame.push(Math.round(nr*Ls)/Ls),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix||e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push(Math.round(bi*Ls)/Ls),e.raceUI.staminaPercentByFrame.push(Math.round(C.currentStats.stamina/ei*Ls)/Ls),e.raceUI.racerEffectByFrame.push(k),this.handleRacePositionByFrame(e,v,d,this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+s:s),this.handleStamina(C,a,nr,d,Z.terrain,ei,Nr,Z,Dr),null!=this.selectedRace.drawnObjects&&this.selectedRace.drawnObjects.length>0&&this.handleBrazierLighting(vo,s),w2||(C.raceVariables.metersSinceLostFocus+=nr),C.type===H.Fox&&"Nine Tails"===C.ability.name&&(this.checkForNineTailsBuff(vi,_n,C,Z,mt,a,d,ot),_n.length>0&&(_n.forEach(Xe=>{Xe[1]-=nr}),_n=_n.filter(Xe=>Xe[1]>0))),C.type===H.Warthog&&"Graze"===C.ability.name&&Zi.length>0&&(Zi.forEach(Xe=>{Xe[1]-=nr}),Zi=Zi.filter(Xe=>Xe[1]>0)),C.ability.abilityInUse&&C.ability.remainingLength>0&&(C.ability.remainingLength-=nr,C.type===H.Gecko&&"Camouflage"===C.ability.name&&(C.ability.remainingLength-=nr),C.ability.remainingLength<=0)){if(C.ability.abilityInUse=!1,C.ability.currentCooldown=C.ability.cooldown,C.getEquippedItemName()===this.globalService.getEquipmentName(rt.pendant)){var Ju=.9;void 0!==(ed=this.globalService.globalVar.modifiers.find(Xe=>"pendantEquipmentModifier"===Xe.text))&&(Ju=ed.value),C.ability.currentCooldown*=Ju}if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(li[li.longCooldowns])&&(C.ability.currentCooldown*=2),null!=C.raceVariables&&null!=C.raceVariables.relayEffects&&C.raceVariables.relayEffects.length>0){var ab=this.lookupService.getRelayEffectFromListByType(C.raceVariables.relayEffects,$e.supportAbilityCooldown);void 0!==ab&&void 0!==ab.additionalValue&&(C.ability.currentCooldown*=ab.additionalValue)}}if(null!=C.ability.currentCooldown&&C.ability.currentCooldown<=0&&this.abilityRedundancyCheck(C,ft,vi,Z,Vi,mt)){var ed;if(this.useAbility(C,e,Z,mt,ei,Nr,Dr,Zi,a,d,ot),(Fr=new X).value=d,C.type===H.Fox&&"Trickster"===C.ability.name?Fr.text=C.getAbilityUseUpdateText(ot,", gaining "+C.ability.tricksterStatGain+" but losing "+C.ability.tricksterStatLoss):C.type===H.Whale&&"Whalesong"===C.ability.name?1===C.ability.totalUseCount?Fr.text=C.getAbilityUseUpdateText(ot," (Adaptability)"):2===C.ability.totalUseCount?Fr.text=C.getAbilityUseUpdateText(ot," (Burst Distance)"):3===C.ability.totalUseCount?Fr.text=C.getAbilityUseUpdateText(ot," (Acceleration)"):4===C.ability.totalUseCount?Fr.text=C.getAbilityUseUpdateText(ot," (Focus)"):5===C.ability.totalUseCount?Fr.text=C.getAbilityUseUpdateText(ot," (Max Speed)"):C.ability.totalUseCount>5&&(Fr.text=C.getAbilityUseUpdateText(ot," (All)")):Fr.text=C.getAbilityUseUpdateText(ot),C.type===H.Warthog&&"Graze"===C.ability.name||a.raceUpdates.push(Fr),C.ability.currentCooldown=C.ability.cooldown,C.getEquippedItemName()===this.globalService.getEquipmentName(rt.pendant))Ju=.9,void 0!==(ed=this.globalService.globalVar.modifiers.find(bW=>"pendantEquipmentModifier"===bW.text))&&(Ju=ed.value),C.ability.currentCooldown*=Ju;if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(li[li.longCooldowns])&&(C.ability.currentCooldown*=2),C.type===H.Caribou&&"Great Migration"===C.ability.name){var ob=.1*ei;C.currentStats.stamina-=ob,Jr=ob>1?.25*ob:1}}null!=C.raceVariables.relayEffects&&C.raceVariables.relayEffects.length>0&&(C.raceVariables.relayEffects.forEach(Xe=>{Xe.remainingRelayMeters<=nr?(Xe.remainingRelayMeters=0,Xe.isMultiplicative?null==C||C.currentStats.divideCurrentRacingStats(Xe.relayAffectedStatRatios):null==C||C.currentStats.subtractCurrentRacingStats(Xe.relayAffectedStatRatios),Xe.effectType!==$e.deepBreathing&&Xe.effectType!==$e.bigBrain&&Xe.effectType!==$e.specialDelivery&&a.addRaceUpdate(d,ot+"'s relay effect "+this.lookupService.getRelayEffectNameByType(Xe.effectType)+" ends.")):Xe.remainingRelayMeters-=nr}),C.raceVariables.relayEffects=C.raceVariables.relayEffects.filter(Xe=>Xe.remainingRelayMeters>0));var Fr,U2=10;this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(U2=20),0!==d&&d!==this.timeToComplete&&d%(U2*this.frameModifier)==0&&((Fr=new X).value=d,Fr.text=this.getUpdateMessageByRelativeDistance(v,d,this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+s:s,ot),a.raceUpdates.push(Fr));var td=!1,Kf=0,sb=0;if(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(Vo=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime(),Kf+=v*Vo,sb=this.globalService.globalVar.eventRaceData.distanceCovered),s+sb>v*(d/this.frameModifier)+Kf?(Ze||(td=!0),Ze=!0):(Ze&&(td=!0),Ze=!1),td&&C.type===H.Shark&&"Apex Predator"===C.ability.name&&!C.ability.abilityUsed&&vo>1){a.addRaceUpdate(d,ot+" bites the other racers as they pass, slowing them down."),C.ability.abilityUsed=!0;var Zf=this.lookupService.GetAbilityEffectiveAmount(C,Z.terrain.powerModifier,mt),lb=this.timeToComplete*(Zf/this.selectedRace.length),H2=1.5*lb;this.timeToComplete+=H2-lb,this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.bonusTime+=H2-lb),this.globalService.increaseAbilityXp(C)}if(oe>0&&v*(d/this.frameModifier)+Kf>=oe&&v*((d-1)/this.frameModifier)+Kf<oe){var id=this.racingAnimals.find(Xe=>Xe.type===H.Warthog);if(void 0!==id){Zf=this.lookupService.GetAbilityEffectiveAmount(id,Z.terrain.powerModifier);var cb=e.length/this.timeToComplete;this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=Zf/(cb=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=Zf/cb,oe=0,a.addRaceUpdate(d,"<span class='coloredText flatlandColor'>"+(null==id?void 0:id.name)+"</span> tussles with the competition as they pass, slowing them down.")}}if(C.ability.currentCooldown-=1/this.frameModifier,d+=1,Vi<=0){a.addRaceUpdate(d,ot+" finishes their leg of the race."),Z.legComplete=!0,R+=1,C.type===H.Warthog&&"Time To Tussle"===C.ability.name&&Ze&&(oe=s+sb,this.globalService.increaseAbilityXp(C)),this.preRacerResetRelayEffectCheck(C,ge,a,d,ot,Z,Z,mt,Rr,ei),C.type===H.Octopus&&"Buried Treasure"===C.ability.name&&(be=1.25),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped?this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.endOfLegRelayEffectCheck(C,new Pt,a,d,gt,Z,Z,mt,Rr,Wf,Xu):this.PrepareRacingAnimal(a,d,gt,C,void 0,void 0,void 0,mt,void 0,Rr),Z.terrain.accelerationModifier=Hi,Z.terrain.maxSpeedModifier=ci,Z.terrain.staminaModifier=Qi,Z.terrain.powerModifier=Gi,Z.terrain.focusModifier=Ki,Z.terrain.adaptabilityModifier=$t,w.push(C),S.push(Z);break}d===this.timeToComplete*this.frameModifier&&(Z.terrain.accelerationModifier=Hi,Z.terrain.maxSpeedModifier=ci,Z.terrain.staminaModifier=Qi,Z.terrain.powerModifier=Gi,Z.terrain.focusModifier=Ki,Z.terrain.adaptabilityModifier=$t),l=Rr,c=Xu,u=Wf}if(_+=1,this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var G2=.05,ub=this.globalService.globalVar.modifiers.find(Xe=>"segmentCompleteMoraleBoostModifier"===Xe.text);null!=ub&&(G2=ub.value),this.globalService.changeGrandPrixMorale(C.type,G2),this.globalService.globalVar.eventRaceData.previousRaceSegmentData=this.carryOverEventRaceSegmentData(C,ft,Oi,Ln.permanentAdaptabilityIncreaseMultiplier,Dn.permanentMaxSpeedIncreaseMultiplier,hr,Jr,Dr.coldBloodedIncreaseMultiplier,Qn,_n,Zi,W,ea,ta,xe,fi)}}),e.raceLegs.some(Z=>!Z.legComplete)?(a.wasSuccessful=!1,a.totalFramesPassed=d,a.distanceCovered=e.raceUI.distanceCoveredByFrame[d-1],a.addRaceUpdate(d,"You lost the race...")):(e.isCompleted=!0,a.wasSuccessful=!0,a.totalFramesPassed=d,a.distanceCovered=e.raceUI.distanceCoveredByFrame[d-1],a.addRaceUpdate(d,"You won the race!")),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.racingAnimals.forEach(Z=>{this.PrepareRacingAnimal(a,d,"",Z,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=s,a.wasSuccessful&&this.raceWasSuccessfulUpdate(a,be),a}getStaminaModifier(e,i,r,a,o,s){var l,c=this.globalService.globalVar.modifiers.find(d=>"staminaModifier"===d.text);return l=void 0===c?.2:c.value,null!=e&&null!=e.staminaModifier&&(l*=e.staminaModifier),i.talentTree.talentTreeType===pt.sprint&&(l*=1+.05*i.talentTree.column3Row2Points),i.talentTree.talentTreeType===pt.longDistance&&i.currentStats.stamina/r<=.35&&(l*=1-.05*i.talentTree.column3Row2Points),i.type===H.Warthog&&"Mud Pit"===i.ability.name&&i.ability.abilityInUse&&(l*=.75),i.type===H.Salamander&&"Cold Blooded"===i.ability.name&&i.ability.abilityInUse&&(l*=1-s),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Lt[Lt.steamy])&&(l*=2),l}handleStamina(e,i,r,a,o,s,l,c,u){var d=this.getStaminaModifier(o,e,s,l,c,u.coldBloodedIncreaseMultiplier);e.type===H.Horse&&"Second Wind"===e.ability.name&&e.ability.abilityInUse||(e.currentStats.stamina-=e.type===H.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*d*2:r*d),e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}getBurstDistance(e,i,r,a){var o=0,s=this.globalService.globalVar.modifiers.find(S=>"breedLevelStatModifier"===S.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=1;e.type===H.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(l*=.75),e.type===H.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(l*=1.5),e.type===H.Warthog&&"Graze"===e.ability.name&&void 0!==a&&(l*=1+.1*this.getGrazeBuffCount("Power",a));var c=e.currentStats.powerMs*l*i*r,u=1;if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.runningShoes)){var d=1.2,v=this.globalService.globalVar.modifiers.find(S=>"runningShoesEquipmentModifier"===S.text);void 0!==v&&(d=v.value),u=1+e.raceVariables.burstCount*(d-1)}var m=0,_=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,$e.supportBurstDistance);void 0!==_&&void 0!==_.additionalValue&&(m=_.additionalValue);var w=1;return e.type===H.Whale&&"Whalesong"===e.ability.name&&(2===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(w*=1.3),e.currentStats.calculateBurstDistance(o,void 0,c)*u*w+m}doesRacerMiniBurst(e,i){var r=!1;return null!=i&&i.isSpecialPath&&(e.talentTree.talentTreeType===pt.sprint&&e.talentTree.column1Row4Points>0&&!i.didAnimalStumble&&!i.checkedForMiniBurst&&(r=!0),i.checkedForMiniBurst=!0),r}getBurstChance(e,i,r){var a=1e3/this.selectedRace.length,o=0,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value);var l=e.currentStats.calculateBurstChance(o=1+o*(e.breedLevel-1),i,r)*a;e.type===H.Warthog&&"Mud Pit"===e.ability.name&&e.ability.abilityInUse&&(l*=1.25);var c=0,u=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,$e.supportBurstChance);return void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue),l+c}doesRacerBurst(e,i,r,a,o,s,l){var c=this.getBurstChance(e,l,s);if(i.checkedForBurst)return!1;if(i.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===H.Gecko&&(e.ability.abilityInUse=!1),e.type===H.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(i.isSpecialPath){var u=this.lookupService.getResourceByName("Course Maps");if(null==u&&(u=0),u>0){var d=1,v=this.globalService.globalVar.modifiers.find(_=>"racerMapsModifier"===_.text);null!=v&&(d=1+u*v.value),c*=d}}return this.utilityService.getRandomNumber(1,100)<=c+1}raceWasSuccessfulUpdate(e,i){var s,r=this.globalService.globalVar.animals.find(R=>R.type===H.Octopus),a="<span class='coloredText waterColor'>"+(null==r?void 0:r.name)+"</span>",o=this.globalService.globalVar.circuitRank,l=0;if(this.selectedRace.isCircuitRace)s=this.globalService.globalVar.circuitRaces.find(R=>R.raceId===this.selectedRace.raceId),this.globalService.globalVar.circuitRaces.filter(R=>R.requiredRank===o).every(R=>R.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,U.Resources)));else if(s=this.globalService.globalVar.localRaces.find(R=>R.raceId===this.selectedRace.raceId&&R.localRaceType===this.selectedRace.localRaceType),this.selectedRace.localRaceType===Ut.Free){var u=this.globalService.globalVar.resources.find(R=>"International Races"===R.name),d=this.globalService.globalVar.resources.find(R=>"National Races"===R.name);if(null!=u&&u.amount>0){var v=5,m=this.globalService.globalVar.modifiers.find(R=>"internationalRacesToMedalModifier"===R.text);null!=m&&(v=m.value),this.globalService.globalVar.nationalRaceCountdown>=v&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,U.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else if(null!=d&&d.amount>0){var _=12,w=this.globalService.globalVar.modifiers.find(R=>"nationalRacesToMedalModifier"===R.text);null!=w&&(_=w.value),this.globalService.globalVar.nationalRaceCountdown>=_&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,U.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else{var S=50,k=this.globalService.globalVar.modifiers.find(R=>"freeRacesToMedalModifier"===R.text);null!=k&&(S=k.value),this.globalService.globalVar.nationalRaceCountdown>=S&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,U.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}}if(this.selectedRace.localRaceType!==Ut.Free&&this.selectedRace.localRaceType!==Ut.Track){if(void 0===s)return;this.selectedRace.localRaceType===Ut.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),s.isCompleted=!0}else this.selectedRace.localRaceType===Ut.Free&&(this.globalService.globalVar.nationalRaceCountdown+=1);this.racingAnimals.forEach(R=>{this.selectedRace.isCircuitRace?l=this.lookupService.getCircuitBreedGaugeIncrease(R):this.selectedRace.raceType!==Ie.trainingTrack&&(l=this.lookupService.getLocalBreedGaugeIncrease(R)),this.globalService.IncreaseAnimalBreedGauge(R,l)}),this.selectedRace.localRaceType!==Ut.Track?e.beatMoneyMark=this.checkMoneyMark(e):this.handleTrackRaceRewards(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(R=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(_e=>_e.name===R.name)){var L=this.globalService.globalVar.resources.find(_e=>_e.name===R.name);if(null!=L)if(this.selectedRace.localRaceType!==Ut.Track)if("Coins"===L.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var W=1.25,ae=this.globalService.globalVar.modifiers.find(_e=>"moneyMarkRewardModifier"===_e.text);null!=ae&&(W=ae.value),R.amount=Math.round(R.amount*W)}var ee=this.lookupService.getRenown();R.amount=Math.round(R.amount*this.lookupService.getRenownCoinModifier(ee,!1)),i>1&&e.addRaceUpdate(e.totalFramesPassed,a+" finds buried treasure at the bottom of the ocean!"),R.amount=Math.round(R.amount*i),L.amount+=R.amount}else"Facility Level"===L.name?(L.amount+=R.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===L.name?L.amount=parseFloat((L.amount+R.amount).toFixed(3)):L.amount+=R.amount;else L.amount+=R.amount}else if("Bonus Breed XP Gain From Training"===R.name&&R.itemType===U.Other){var be=this.selectedRace.raceLegs[0].courseType;null!=(oe=this.racingAnimals.find(_e=>_e.raceCourseType===be))&&(oe.miscStats.bonusBreedXpGainFromTraining+=R.amount)}else if("Bonus Breed XP Gain From Free Races"===R.name&&R.itemType===U.Other)be=this.selectedRace.raceLegs[0].courseType,null!=(oe=this.racingAnimals.find(De=>De.raceCourseType===be))&&(oe.miscStats.bonusBreedXpGainFromLocalRaces+=R.amount);else if("Bonus Breed XP Gain From Circuit Races"===R.name&&R.itemType===U.Other)be=this.selectedRace.raceLegs[0].courseType,null!=(oe=this.racingAnimals.find(De=>De.raceCourseType===be))&&(oe.miscStats.bonusBreedXpGainFromCircuitRaces+=R.amount);else if("Training Time Reduction"===R.name&&R.itemType===U.Other)be=this.selectedRace.raceLegs[0].courseType,null!=(oe=this.racingAnimals.find(De=>De.raceCourseType===be))&&(oe.miscStats.trainingTimeReduction+=R.amount);else if("Diminishing Returns per Facility Level"===R.name&&R.itemType===U.Other)be=this.selectedRace.raceLegs[0].courseType,null!=(oe=this.racingAnimals.find(De=>De.raceCourseType===be))&&(oe.miscStats.diminishingReturnsBonus+=R.amount);else if("Orb Pendant"===R.name&&R.itemType===U.Other)be=this.selectedRace.raceLegs[0].courseType,null!=(oe=this.racingAnimals.find(De=>De.raceCourseType===be))&&(oe.canEquipOrb=!0);else if("Bonus Talents"===R.name&&R.itemType===U.Other){var oe;be=this.selectedRace.raceLegs[0].courseType,null!=(oe=this.racingAnimals.find(De=>De.raceCourseType===be))&&(oe.miscStats.bonusTalents+=R.amount)}else this.globalService.globalVar.resources.push(new ie(R.name,R.amount,R.itemType))})}checkMoneyMark(e){var i=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return i;var a=this.globalService.globalVar.modifiers.find(s=>"moneyMarkPaceModifier"===s.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(i=!0),i}handleTrackRaceRewards(e){if(1===this.selectedRace.raceLegs.length){var i=this.selectedRace.raceLegs[0].courseType,r=this.racingAnimals.find(d=>d.raceCourseType===i);if(void 0!==r){var a=null;if(this.selectedRace.trackRaceType===vn.novice&&(a=r.allTrainingTracks.noviceTrack),this.selectedRace.trackRaceType===vn.intermediate&&(a=r.allTrainingTracks.intermediateTrack),this.selectedRace.trackRaceType===vn.master&&(a=r.allTrainingTracks.masterTrack),null!==a){var o=this.timeToComplete*this.frameModifier,s=.25,l=this.globalService.globalVar.modifiers.find(d=>"trainingTrackPaceModifier"===d.text);void 0!==l&&(s=l.value);for(var c=0;c<a.totalRewards;c++)c<a.rewardsObtained||e.totalFramesPassed<=o/(1+s*c)&&(a.rewardsObtained=c+1,a.rewardsObtained===a.totalRewards&&(this.selectedRace.trackRaceType===vn.novice&&(r.allTrainingTracks.intermediateTrackAvailable=!0),this.selectedRace.trackRaceType===vn.intermediate&&(r.allTrainingTracks.masterTrackAvailable=!0)),null==this.selectedRace.rewards&&(this.selectedRace.rewards=[]),this.selectedRace.rewards.push(a.rewards[c]));null!=this.selectedRace.rewards&&(this.selectedRace.rewards=this.utilityService.condenseList(this.selectedRace.rewards))}}}}getUpdateMessageByRelativeDistance(e,i,r,a){var o=a,s=e*(i/this.frameModifier);return this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(s+=e*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),r<.5*s?o="Is "+a+" <strong>even moving?!</strong>":r<.75*s?o=a+" is <strong>falling out of the race!</strong>":r<.9*s?o=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*s&&r<=1.1*s?o=a+" is <strong>right on pace!</strong>":r>=1.5*s?o=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*s?o=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*s&&(o=a+" is <strong>barely leading the pack!</strong>"),o}PrepareRacingAnimal(e,i,r,a,o,s,l,c,u,d,v,m){if(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!0),a.ability.currentCooldown=a.ability.cooldown,a.ability.remainingLength=0,a.ability.totalUseCount=0,a.getEquippedItemName()===this.globalService.getEquipmentName(rt.pendant)){var _=.9,w=this.globalService.globalVar.modifiers.find(R=>"pendantEquipmentModifier"===R.text);void 0!==w&&(_=w.value),a.ability.currentCooldown*=_}if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(li[li.longCooldowns])&&(a.ability.currentCooldown*=2),null!=a.raceVariables&&null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0){var k=this.lookupService.getRelayEffectFromListByType(a.raceVariables.relayEffects,$e.supportAbilityCooldown);void 0!==k&&void 0!==k.additionalValue&&(a.ability.currentCooldown*=k.additionalValue)}a.ability.abilityUsed=!1,a.ability.abilityInUse=!1,null!=a.raceVariables&&(a.raceVariables.ranOutOfStamina=!1,a.raceVariables.burstCount=0,a.raceVariables.metersSinceLostFocus=0,a.raceVariables.hasLostFocusDuringRace=!1,a.raceVariables.firstAbilityUseEffectApplied=!1,a.raceVariables.velocityExceedsMaxSpeedDuringBurst=!1,a.raceVariables.velocityReachesMaxSpeedCount=0),this.globalService.calculateAnimalRacingStats(a),!0!==u&&(null!=o&&o.length>0&&this.endOfLegRelayEffectCheck(o[o.length-1],a,e,i,r,s,l,c,d,v,m),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects.forEach(R=>{a.raceVariables.relayEffects.push(R.makeCopy())}),this.globalService.globalVar.eventRaceData.queuedRelayEffects.length>0&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects=this.globalService.globalVar.eventRaceData.queuedRelayEffects.filter(R=>R.affectsAllRacers))),null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0&&a.raceVariables.relayEffects.forEach(R=>{R.isMultiplicative?a.currentStats.multiplyCurrentRacingStats(R.relayAffectedStatRatios):a.currentStats.addCurrentRacingStats(R.relayAffectedStatRatios)}))}preRacerResetRelayEffectCheck(e,i,r,a,o,s,l,c,u,d){var v=4,m=this.globalService.globalVar.modifiers.find(T=>"relayAbilityXpGainModifier"===T.text);if(void 0!==m&&(v=m.value),null===i&&(i=new Pt),null!=l){if(e.type===H.Caribou&&"Herd Mentality"===e.ability.name&&!e.raceVariables.ranOutOfStamina){var _=e.currentStats.stamina*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100),w=0;this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCap||(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount+=1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.AddRelayEffect(i,e,w,new Ve(0,0,0,0,0,0),!1,$e.herdMentality,!1,_),this.globalService.increaseAbilityXp(e,v))}if(!(e.type!==H.Caribou||"Special Delivery"!==e.ability.name||e.raceVariables.ranOutOfStamina||(void 0===d&&(d=1),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCap))){this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount+=1),w=this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;var S=e.currentStats.stamina/d;S>1&&(S=1);var k=S*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100);this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(k*=.2),this.AddRelayEffect(e,e,w,new Ve(0,0,0,0,0,0),!1,$e.specialDelivery,!0,k),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,v)}}}endOfLegRelayEffectCheck(e,i,r,a,o,s,l,c,u,d,v,m=1){var _=4,w=this.globalService.globalVar.modifiers.find(W=>"relayAbilityXpGainModifier"===W.text);if(void 0!==w&&(_=w.value),"Inspiration"===e.ability.name&&e.type===H.Horse&&null!=l){var S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c);this.AddRelayEffect(i,e,S*m,new Ve(.25*e.currentStats.maxSpeedMs,0,0,0,0,0),!1,$e.inspiration,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.inspirationUseCount+=1)}if("Flowing Current"===e.ability.name&&e.type===H.Dolphin&&null!=l&&(S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(i,e,S*m,new Ve(0,.25*e.currentStats.accelerationMs,0,0,0,0),!1,$e.flowingCurrent,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.flowingCurrentUseCount+=1)),"Navigator"===e.ability.name&&e.type===H.Dolphin&&null!=l&&(S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(i,e,S*m,new Ve(0,0,0,0,0,.25*e.currentStats.adaptabilityMs),!1,$e.navigator,!1),r.addRaceUpdate(a,o+" uses "+(null==e?void 0:e.ability.name)+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.navigatorUseCount+=1)),e.type===H.Gecko&&"Camouflage"===e.ability.name&&null!=l){var T=u;S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(i,e,S*m,new Ve(0,0,0,0,0,0),!1,$e.camouflage,!1,T),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.camouflageUseCount+=1)}if(void 0!==s){var R=new Tn;void 0!==l&&(R=l.terrain),void 0===c&&(c=1),void 0===v&&(v=e.currentStats.adaptabilityMs),void 0===d&&(d=e.currentStats.focusMs),this.talentRelayCheck(e,i,s.distance*m,R,c,d,v),this.batonEquipmentCheck(e,i,s.distance*m)}}talentRelayCheck(e,i,r,a,o,s,l,c=1){if(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.talentTree.talentTreeType===pt.support){if(e.talentTree.column1Row1Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,1,1,u=1+.01*e.talentTree.column1Row1Points),!0,$e.supportAdaptabilityRelay,!1),e.talentTree.column1Row3Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(u=1+.01*e.talentTree.column1Row3Points,1,1,1,1,1),!0,$e.supportMaxSpeedRelay,!1),e.talentTree.column2Row1Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,u=1+.01*e.talentTree.column2Row1Points,1,1,1,1),!0,$e.supportAccelerationRelay,!1),e.talentTree.column2Row2Points>0){var u=this.getBurstDistance(e,a.powerModifier,o)*(.05*e.talentTree.column2Row2Points);this.AddRelayEffect(i,e,r*c,new Ve(0,0,0,0,0,0),!1,$e.supportBurstDistance,!1,u)}if(e.talentTree.column2Row3Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,u=1+.01*e.talentTree.column2Row3Points,1,1,1),!0,$e.supportStaminaRelay,!1),e.talentTree.column2Row4Points>0){u=this.getBurstChance(e,s,l)*(.03*e.talentTree.column2Row4Points);this.AddRelayEffect(i,e,r*c,new Ve(0,0,0,0,0,0),!1,$e.supportBurstChance,!1,u)}e.talentTree.column3Row1Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,u=1+.01*e.talentTree.column3Row1Points,1,1),!0,$e.supportPowerRelay,!1),e.talentTree.column3Row2Points>0&&(u=1-.02*e.talentTree.column3Row2Points,this.AddRelayEffect(i,e,r*c,new Ve(0,0,0,0,0,0),!1,$e.supportAbilityCooldown,!1,u)),e.talentTree.column3Row3Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,1,u=1+.01*e.talentTree.column3Row3Points,1),!0,$e.supportFocusRelay,!1),e.talentTree.column3Row4Points>0&&(u=1+.02*e.talentTree.column3Row4Points,this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,1,1,1),!0,$e.supportAbilityEfficiency,!1,u))}}batonEquipmentCheck(e,i,r,a=1){if(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.getEquippedItemName()===this.globalService.getEquipmentName(rt.redBaton)){var o=1.1,s=this.globalService.globalVar.modifiers.find(T=>"redBatonEquipmentModifier"===T.text);void 0!==s&&(o=s.value),this.AddRelayEffect(i,e,r*a,new Ve(o,1,1,1,1,1),!0,$e.redBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.blueBaton)){var l=1.1,c=this.globalService.globalVar.modifiers.find(T=>"blueBatonEquipmentModifier"===T.text);void 0!==c&&(l=c.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,1,1,l,1),!0,$e.blueBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.violetBaton)){var u=1.1,d=this.globalService.globalVar.modifiers.find(T=>"violetBatonEquipmentModifier"===T.text);void 0!==d&&(u=d.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,1,u,1,1),!0,$e.violetBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.greenBaton)){var v=1.1,m=this.globalService.globalVar.modifiers.find(T=>"greenBatonEquipmentModifier"===T.text);void 0!==m&&(v=m.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,1,1,1,v),!0,$e.greenBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.orangeBaton)){var _=1.1,w=this.globalService.globalVar.modifiers.find(T=>"orangeBatonEquipmentModifier"===T.text);void 0!==w&&(_=w.value),this.AddRelayEffect(i,e,r*a,new Ve(1,_,1,1,1,1),!0,$e.orangeBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.yellowBaton)){var S=1.1,k=this.globalService.globalVar.modifiers.find(T=>"yellowBatonEquipmentModifier"===T.text);void 0!==k&&(S=k.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,S,1,1,1),!0,$e.yellowBaton,!1)}}prepareRacingLeg(e,i){e.pathData.forEach(r=>{r.currentStumbleOpportunity=0,r.checkedForBurst=!1,r.checkedForNineTails=!1,r.driftAmount=0,r.didAnimalStumble=!1,r.checkedForDrift=!1}),this.checkForBlinders(e,i)}checkForBlinders(e,i){if(i.getEquippedItemName()===this.globalService.getEquipmentName(rt.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}getPrelayEffects(e,i,r,a,o,s,l,c,u){null!==i&&void 0!==c&&(void 0===this.selectedRace.pinnacleConditions||!this.selectedRace.pinnacleConditions.containsCondition(Lt[Lt.noRelayEffects]))&&i.talentTree.talentTreeType===pt.support&&i.talentTree.column1Row4Points>0&&this.endOfLegRelayEffectCheck(i,e,o,s,l,c,u,a,void 0,void 0,void 0,.03*i.talentTree.column1Row4Points)}AddRelayEffect(e,i,r,a,o,s,l,c,u=!1){if(void 0===this.selectedRace.pinnacleConditions||!this.selectedRace.pinnacleConditions.containsCondition(Lt[Lt.noRelayEffects])){var d=new Sf;if(d.remainingRelayMeters=r,d.relayAffectedStatRatios=a,d.isMultiplicative=o,d.effectType=s,d.additionalValue=c,d.affectsAllRacers=l,i.talentTree.talentTreeType===pt.support&&i.talentTree.column1Row2Points>0){var v=1+.02*i.talentTree.column1Row2Points;d.isMultiplicative?(d.relayAffectedStatRatios.topSpeed>1&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*v),d.relayAffectedStatRatios.acceleration>1&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*v),d.relayAffectedStatRatios.endurance>1&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*v),d.relayAffectedStatRatios.power>1&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*v),d.relayAffectedStatRatios.focus>1&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*v),d.relayAffectedStatRatios.adaptability>1&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*v),void 0!==d.additionalValue&&d.additionalValue>1&&(d.additionalValue*=v)):(d.relayAffectedStatRatios.topSpeed>0&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*v),d.relayAffectedStatRatios.acceleration>0&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*v),d.relayAffectedStatRatios.endurance>0&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*v),d.relayAffectedStatRatios.power>0&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*v),d.relayAffectedStatRatios.focus>0&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*v),d.relayAffectedStatRatios.adaptability>0&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*v),void 0!==d.additionalValue&&d.additionalValue>0&&(d.additionalValue*=v))}if(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix)if(this.globalService.globalVar.eventRaceData.queuedRelayEffects.some(w=>w.effectType===s))if(this.lookupService.relayEffectTypeStacksEffectiveness(s))null!=(m=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(w=>w.effectType===s))&&(m.relayAffectedStatRatios.addCurrentRacingStats(a),void 0!==m.additionalValue&&void 0!==d.additionalValue&&(m.additionalValue+=d.additionalValue));else{var m;null!=(m=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(S=>S.effectType===s))&&(m.remainingRelayMeters+=r)}else this.globalService.globalVar.eventRaceData.queuedRelayEffects.push(d);else if(l){var _=this.selectedRace.raceLegs.findIndex(w=>w.courseType===e.raceCourseType);this.selectedRace.raceLegs.length>_&&this.selectedRace.raceLegs.slice(_+1).forEach(w=>{var S=this.racingAnimals.find(k=>k.raceCourseType===w.courseType);null!=S&&null!=S.raceVariables&&null!=S.raceVariables.relayEffects&&S.raceVariables.relayEffects.push(d)})}else null!=e&&null!=e.raceVariables&&null!=e.raceVariables.relayEffects&&e.raceVariables.relayEffects.push(d)}}didAnimalStumble(e,i,r,a,o,s,l,c,u,d){if(e.raceVariables.stumbled)return!1;if(0===i.frequencyOfStumble){if(void 0===this.selectedRace.pinnacleConditions||!this.selectedRace.pinnacleConditions.containsCondition(li[li.brokenFloorboards]))return!1;i.frequencyOfStumble=this.globalService.getAverageStumbleFrequencyForCourseType(e.raceCourseType)}if(e.type===H.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===H.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===H.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(i.currentStumbleOpportunity*(i.length/i.stumbleOpportunities)<r){i.currentStumbleOpportunity+=1;var _=250;if(this.utilityService.getRandomNumber(1,100)<=i.frequencyOfStumble/(_+=s*a.adaptabilityModifier)*i.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.headband)){var k=3,T=this.globalService.globalVar.modifiers.find(R=>"headbandEquipmentModifier"===R.text);if(void 0!==T&&(k=T.value),e.raceVariables.headbandStumblePreventionCount<k)return e.raceVariables.headbandStumblePreventionCount+=1,d.addRaceUpdate(c,u+"'s headband prevents them from stumbling."),!1}return i.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,i,r,a,o,s,l,c,u){if(e.raceVariables.lostFocus||e.type===H.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/i)<a){this.currentLostFocusOpportunity+=1;var m=this.globalService.globalVar.modifiers.find(T=>"focusModifier"===T.text),_=u*o.focusModifier*(void 0===m?.75:m.value);if(e.raceVariables.metersSinceLostFocus<_)return!1;var S=(e.raceVariables.metersSinceLostFocus-_)/e.currentStats.focusMs*100;if(this.utilityService.getRandomNumber(1,100)<=S)return c.didAnimalLoseFocus=!0,!0}return!1}increasePersistentAbilityXp(e){(e.type===H.Cheetah&&"Giving Chase"===e.ability.name||e.type===H.Hare&&"Prey Instinct"===e.ability.name||e.type===H.Hare&&"Nap"===e.ability.name||e.type===H.Goat&&"In The Rhythm"===e.ability.name||e.type===H.Shark&&"Feeding Frenzy"===e.ability.name||e.type===H.Shark&&"Blood In The Water"===e.ability.name||e.type===H.Octopus&&"Buried Treasure"===e.ability.name||e.type===H.Penguin&&"Wild Toboggan"===e.ability.name||e.type===H.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,3)}giveOrbXpBasedOnMeters(e,i,r,a){null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===tt.ruby&&r>=a&&this.globalService.increaseRubyOrbXp(e),null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===tt.amber&&r>=a&&this.globalService.increaseAmberOrbXp(e),null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===tt.topaz&&!i.raceVariables.ranOutOfStamina&&this.globalService.increaseTopazOrbXp(e),null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===tt.sapphire&&!i.raceVariables.hasLostFocusDuringRace&&this.globalService.increaseSapphireOrbXp(e)}abilityRedundancyCheck(e,i,r,a,o,s){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===H.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===H.Horse&&i===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===H.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,a.terrain.powerModifier,s)<o)&&!("Sticky"===e.ability.name&&e.type===H.Gecko&&0===r.frequencyOfStumble))}useAbility(e,i,r,a,o,s,l,c,u,d,v){if(e.ability.abilityUsed=!0,e.type===H.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===H.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===H.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===H.Warthog&&"Graze"===e.ability.name&&(e.ability.abilityInUse=!0,this.checkForGrazeBuff(c,e,r,a,u,d,v),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===H.Monkey){if("Landslide"===e.ability.name){var m=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),_=i.length/this.timeToComplete;this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=m/(_=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=m/_,this.globalService.increaseAbilityXp(e)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e))}if(e.type===H.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===H.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===H.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e)),e.type===H.Whale&&("Storing Power"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Whalesong"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))),e.type===H.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===H.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===H.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);var w=s/r.distance;w>.5&&(w=.5-(w-.5)),l.coldBloodedIncreaseMultiplier=w}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))}if(e.type===H.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e);var S=this.utilityService.getRandomInteger(1,6);1===S&&(e.ability.tricksterStatLoss="Acceleration"),2===S&&(e.ability.tricksterStatLoss="Max Speed"),3===S&&(e.ability.tricksterStatLoss="Adaptability"),4===S&&(e.ability.tricksterStatLoss="Focus"),5===S&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.25*o,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===S&&(e.ability.tricksterStatLoss="Power");var k=this.utilityService.getRandomInteger(1,6);k===S&&(k+=1)>6&&(k=1),1===k&&(e.ability.tricksterStatGain="Acceleration"),2===k&&(e.ability.tricksterStatGain="Max Speed"),3===k&&(e.ability.tricksterStatGain="Adaptability"),4===k&&(e.ability.tricksterStatGain="Focus"),5===k&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.5*o,e.currentStats.stamina>o&&(e.currentStats.stamina=o)),6===k&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,i,r,a,o,s,l,c){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var u=this.utilityService.getRandomInteger(1,4),d=new X;d.value=l,1===u?(i.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Acceleration)"),s.raceUpdates.push(d)):2===u?(i.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Max Speed)"),s.raceUpdates.push(d)):3===u?(i.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Adaptability)"),s.raceUpdates.push(d)):4===u&&(i.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Focus)"),s.raceUpdates.push(d)),this.globalService.increaseAbilityXp(r)}}checkForGrazeBuff(e,i,r,a,o,s,l){var c=this.utilityService.getRandomInteger(1,5),u=new X;u.value=s,1===c?(e.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Acceleration)"),o.raceUpdates.push(u)):2===c?(e.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Max Speed)"),o.raceUpdates.push(u)):3===c?(e.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Adaptability)"),o.raceUpdates.push(u)):4===c?(e.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Focus)"),o.raceUpdates.push(u)):4===c&&(e.push(["Power",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Power)"),o.raceUpdates.push(u)),this.globalService.increaseAbilityXp(i)}getNineTailsBuffCount(e,i){return i.filter(r=>r[0]===e).length}getGrazeBuffCount(e,i){return i.filter(r=>r[0]===e).length}getModifiedAdaptability(e,i,r,a,o,s,l,c,u,d,v,m,_){var w=e.currentStats.adaptabilityMs*r;return e.type===H.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(w*=1.75),e.type===H.Goat&&"Sure-footed"===e.ability.name&&(w*=i.permanentAdaptabilityIncreaseMultiplier),e.type===H.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(w*=1.4),e.type===H.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(w*=1.6),e.type===H.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(w*=.75),e.type===H.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(w*=1.5),e.type===H.Fox&&"Nine Tails"===e.ability.name&&(w*=1+.15*this.getNineTailsBuffCount("Adaptability",a)),e.type===H.Warthog&&"Graze"===e.ability.name&&(w*=1+.1*this.getGrazeBuffCount("Adaptability",o)),null!==c&&void 0!==u&&"Navigator"===c.ability.name&&c.type===H.Dolphin&&s.distance-l<=this.lookupService.GetAbilityEffectiveAmount(c,u.terrain.powerModifier,r)&&(w+=.25*c.currentStats.adaptabilityMs,c.ability.abilityInUse||d.addRaceUpdate(v,m+" is shown the way by "+_+"'s "+(null==c?void 0:c.ability.name)+" ability."),c.ability.abilityInUse=!0),e.getEquippedItemName()===this.globalService.getEquipmentName(rt.athleticTape)&&e.raceVariables.isBursting&&(w*=1.5),e.talentTree.talentTreeType===pt.sprint&&!e.raceVariables.hasLostFocusDuringRace&&(w*=1+5*e.talentTree.column1Row2Points/100),w}getModifiedFocus(e,i,r,a,o){var s=e.currentStats.focusMs*i;return e.type===H.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(s*=1.4),e.type===H.Hare&&"Nap"===e.ability.name&&(s*=2),e.type===H.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===H.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5),e.type===H.Fox&&"Nine Tails"===e.ability.name&&(s*=1+.15*this.getNineTailsBuffCount("Focus",r)),e.type===H.Warthog&&"Graze"===e.ability.name&&(s*=1+.1*this.getGrazeBuffCount("Focus",a)),e.type===H.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(s*=1+o.coldBloodedIncreaseMultiplier),e.type===H.Whale&&"Whalesong"===e.ability.name&&(4===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(s*=1.3),e.getEquippedItemName()===this.globalService.getEquipmentName(rt.athleticTape)&&e.raceVariables.isBursting&&(s*=1.5),e.talentTree.talentTreeType===pt.sprint&&(s*=1-.005*e.talentTree.column2Row4Points*e.raceVariables.velocityReachesMaxSpeedCount),s}handleTundraDrift(e,i,r,a,o,s,l,c,u,d,v,m,_){var w=!1;if(!i.checkedForDrift){i.checkedForDrift=!0;var S=80,k=-80;if((i.routeDesign===ze.Cavern||r.routeDesign===ze.Cavern)&&(S=60,k=-60),e.raceVariables.icyCurrentYAmount>=S||e.raceVariables.icyCurrentYAmount<=k||a)return(e.raceVariables.icyCurrentYAmount>=S||e.raceVariables.icyCurrentYAmount<=k)&&(w=!0),i.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,w;var T=this.utilityService.getRandomNumber(1,100),R=1e3,W=i.frequencyOfDrift/(R+=o*s.adaptabilityModifier)*i.length;if(T<W){i.didAnimalStumble=!0,(W-=T)<=0&&(W=0);var ae=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===ae;var ee=100,be=20,oe=this.globalService.globalVar.modifiers.find(ge=>"maxDriftAmountModifier"===ge.text);void 0!==oe&&(be=oe.value),"Wild Toboggan"===e.ability.name&&e.type===H.Penguin&&(be*=2,ee*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===H.Penguin&&(e.ability.abilityInUse=!1);var _e=0;(_e=W>ee?be:W/ee*be)>be&&(_e=be),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=_e:e.raceVariables.icyCurrentYAmount+=_e,e.raceVariables.icyCurrentYAmount>=S&&(e.raceVariables.icyCurrentYAmount=S),e.raceVariables.icyCurrentYAmount<=k&&(e.raceVariables.icyCurrentYAmount=k),v.addRaceUpdate(_,m+" drifts to the side, losing "+_e.toFixed(2)+"% max speed."),i.driftAmount=e.raceVariables.icyCurrentDirectionUp?-_e:_e,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else i.driftAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===H.Penguin&&(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCap||(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount+=1),v.addRaceUpdate(_,m+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e),d.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,s.powerModifier,u)/100,e.ability.abilityInUse=!0));return w}}handleLavaFall(e,i,r,a,o,s,l,c){for(var u=!1,d=i/this.frameModifier,v=o/r,m=[.4,.45,.5,.55,.6],_=[],w=0;w<m.length;w++){var S=v*m[w],k=d/S;k>1&&(k=1),_.push(Math.round(1e5*k)/1e5);var T=a>m[w]*o,R=T!=c[w];c[w]=T,d>=S&&R&&(e.type===H.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(s.addRaceUpdate(l,"Lava spills out onto the course, forcing you to evacuate."),u=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(_),u}handleBrazierLighting(e,i){this.selectedRace.drawnObjects.forEach(r=>{if((void 0===r.changeOnFrame||0===r.changeOnFrame)&&i>r.xDistance){r.changeOnFrame=e;var o,a=this.globalService.getOrbTypeFromBrazier(r.objectType);void 0!==a&&(o=this.globalService.getOrbDetailsFromType(a)),void 0!==a&&void 0!==o&&(this.selectedRace.rewards.push(this.initializeService.initializeResource(this.globalService.getOrbNameFromType(a)+" Level Up",1,U.Other)),o.maxLevel+=1)}})}setupBraziers(){if(void 0!==this.selectedRace.drawnObjects&&this.selectedRace.drawnObjects.length>0){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.pinnacleFloor);this.selectedRace.drawnObjects.forEach(i=>{if(i.objectType===ni.amberBrazier||i.objectType===ni.rubyBrazier||i.objectType===ni.topazBrazier||i.objectType===ni.sapphireBrazier||i.objectType===ni.amethystBrazier||i.objectType===ni.emeraldBrazier){var a,r=this.globalService.getOrbTypeFromBrazier(i.objectType);void 0!==r&&(a=this.globalService.getOrbDetailsFromType(r)),void 0!==r&&void 0!==a&&a.maxLevel>e&&(i.changeOnFrame=1)}})}}handleRacePositionByFrame(e,i,r,a){var o=this.lookupService.getTotalRacersByRace(e),s=o,l=.25,c=this.globalService.globalVar.modifiers.find(R=>"trainingTrackPaceModifier"===R.text);if(void 0!==c&&(l=c.value),e.localRaceType===Ut.Track)for(var u=0;u<o-1;u++)a>e.length/(this.timeToComplete/(1+l*u))*(r/this.frameModifier)&&(s=o-(u+1));else{var m=i*(r/this.frameModifier),_=0;if(this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(m+=_=i*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),2===o)a>m&&(s=1);else if(3===o){a>m&&(s=2);var S=.75,k=this.globalService.globalVar.modifiers.find(R=>"moneyMarkPaceModifier"===R.text);null!=k&&(S=k.value),a>e.length/(this.timeToComplete*S)*(r/this.frameModifier)+_&&(s=1)}}e.raceUI.racePositionByFrame.push(s)}carryOverEventRaceSegmentData(e,i,r,a,o,s,l,c,u,d,v,m,_,w,S,k){var T=new yf;return T.velocity=i,T.stamina=e.currentStats.stamina,T.permanentMaxSpeedIncreaseMultiplier=r,T.permanentAdaptabilityIncreaseMultiplier=a,T.permanentMaxSpeedIncreaseObjMultiplier=o,T.feedingFrenzyIncreaseMultiplier=s,T.greatMigrationAccelerationIncreaseAdditive=l,T.coldBloodedIncreaseMultiplier=c,T.fleetingSpeedIncreaseMultiplier=u,T.racingAnimalType=e.type,T.deepBreathingStaminaGain=m,T.longDistanceTalentIncreaseAccelerationWithLowVelocity=_,T.maxSpeedFloor=w,T.whalePowerStored=S,T.pathsClearedWithoutLosingFocus=k,d.length>0&&d.forEach(R=>{T.nineTailsBuffs.push(R)}),v.length>0&&v.forEach(R=>{T.grazeBuffs.push(R)}),e.raceVariables.relayEffects.length>0&&e.raceVariables.relayEffects.forEach(R=>{T.relayEffects.push(R)}),this.globalService.globalVar.eventRaceData.animalData.forEach(R=>{R.associatedAnimalType===e.type&&(T.statLossFromExhaustion=R.exhaustionStatReduction)}),T.raceVariables=e.raceVariables.makeCopy(),T}setStaminaLossForEventAnimal(e,i){this.globalService.globalVar.eventRaceData.animalData.forEach(r=>{r.associatedAnimalType===i&&(r.exhaustionStatReduction=e,e<this.globalService.globalVar.relayEnergyFloor/100&&(this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay=!0))})}}return t.\u0275fac=function(e){return new(e||t)(Ue(It),Ue(Di),Ue(Fn),Ue(u0))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let m0=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.utilityService=r,this.gameVersions=[1.14,1.13,1.12,1.11,1.1,1.09,1.08,1.07,1.06,1.05,1.04,1.03,1.02,1.01,1]}getListAscended(){var e=[];return this.gameVersions.forEach(i=>{e.unshift(i)}),e}getLatestChanges(){return this.getVersionChanges(this.gameVersions[0])}getAllChanges(){var e=[];return this.gameVersions.forEach(i=>{e.push(this.getVersionChanges(i))}),e}getVersionChanges(e){var i="";return 1===e&&(i="Initial Launch!"),1.01===e&&(i="Improved UI by adding better notifications and refactoring some clickable text.\n\nBreeding Grounds specialization now grants a 10% bonus to Breeding XP from Training, up from 5%.\n\nRefactored Breed Progression:\n<ul><li>Breed Levels now grant a 5% bonus to racing stats as opposed to 2%. Breed Levels now require twice as much XP.</li><li>Animals have had their breed levels reduced by half to balance this change. Despite this, you should notice a small increase in stats.</li></ul>"),1.02===e&&(i="Event Races now active!\n<ul><li>Select an event deck (now relay team) and run the marathon-style Grand Prix.</li><li>Run a single race over the course of multiple days to unlock new rewards.</li><li>Mix and match powerful Relay abilities with strong long distance racers and see how far you can go!</li></ul>\nMore UI improvements. (better contrast in colors, differentiation of text through various means, etc)\n\nBug fixes."),1.03===e&&(i="Talents are now active!\n<ul><li>Complete Rainbow Races to start earning Talent Points for your animals.</li><li>Each animal can select a unique talent tree and start racing in its own unique way.</li></ul>\nMore UI improvements. (specifically around items/equipment)\n\nBug fixes."),1.04===e&&(i="Ability rebalancing (view Discord Change Log for full info).\n\nChanges to Event Races<ul><li>Leg length adjusts based on your game progress so that the race always feels smooth.</li><li>Certain abilities have different effects during events, viewable when changing abilities.</li><li>Abilities that can trigger multiple times or have a cap are now displayed on the Event Race Info page.</li></ul>\nBug fixes (view Discord Change Log for full info)."),1.05===e&&(i="Changed all references of 'Decks' to 'Relay Teams' for ease of understanding and better theming.\n\nBug fixes and UI improvements (view Discord Change Log for full info)."),1.06===e&&(i="Barns can now reset their specialization. By clicking or tapping your Barn Upgrade level, you'll see an overview of your barn's benefits and the option to reset your specialization at the cost of losing 20% of your Barn Upgrade level.\n\nCost for Mangoes now scale. 1 Mango from the shop costs an extra 50 per purchase and 2 Mangoes from the event shop costs an extra 1 token per purchase.\n\nThe impact that Renown has on coin gain from race is now logarithmic. After reaching 50 renown, the coin gain will start to slightly fall off. \n\nAttractions now give slightly more Coins per specialization level.\n\nAdded setting to automatically start the event race when the time period begins. This will also catch up on any time you were away between the start of the race and when you first return to the game.\n\nGrand Prix now requires breed level 25 instead of 50.\n\nIncubator now takes 2 minutes instead of 5 minutes.\n\nUI Improvements and Bug Fixes (view Discord Change Log for full info)."),1.07===e&&(i="Sectioned out FAQs, added calculators to make planning easier.\n\nVarious minor bug fixes and UI improvements."),1.08===e&&(i="Increased coin gain from Mono and Duo races. \n\nAdjusted free races so that new course types do not show up until you've completed a circuit rank with that type. \n\nAdded circuit rank up reward for 1000 coins at rank 9 and 1500 coins at rank 23.<ul><li>Those who have already passed these ranks will immediately receive these coins.</li></ul>\nMade Acceleration coaching slightly easier. \n\nAdded warning before first Breed to better explain what will happen.\n\nMinor UI improvements for mobile."),1.09===e&&(i="<em>Just to preface, this is the first set of changes of several intended to make the early game flow better, coin gain and progression feel less punishing, and doing a better job of putting players in the intended gameplay loops. Look forward to more changes soon.</em>\n\nMade changes to verbiage in Tutorial and FAQ section for clarity and better guiding on how to play. \n\nReadjusted certain trainings so that there was clear progression going up from small to medium barns.<ul><li><b>Footwork</b> now gives .25 Acceleration as opposed to .5 Acceleration.</li><li><b>Dodge Ball</b> now gives 1 Adaptability as opposed to .5 Adaptability and takes 60 seconds to complete as opposed to 75 seconds.</li></ul>Some adjustments were made to passive game time while the game is not active.<ul><li>Small barns now allow for 4 hours worth of training, up from 2 hours.</li><li>Medium barns now allow for 8 hours worth of training, up from 4 hours.</li><li>Large barns now allow for 12 hours worth of training, up from 8 hours.</li><li>Team Managers will now cover 8 hours of inactive time worth of free races, up from 2 hours.</li></ul>The base price for food has been reduced.<ul><li>All stat increasing food has been reduced to 10 Coins. The goal for these items is to give you a quick boost after breeding to cut down on wait time. This new price should make that a more viable option.</li><li>The base price for Mangoes has been reduced to 100 Coins. For those who have already purchased Mangoes and the price has begun to increase, your total cost will be reduced by 400 Coins to match up with this change.</li></ul>Attractions now provide significantly more income. The new formula is 20 Coins * Specialization Level added on top of the previous amount. Check the calculator in the FAQ section to see exactly how much it provides at any given level.\n\nFor the first 10 barn upgrade levels, the cost is now 50 coins instead of 100.\n\nCertain RNG elements were not evenly distributed (Coaching for example) and that issue has been resolved. \n\nThere have been bugs, balance issues, and some concerns about reward scaling with the Grand Prix. I have taken the Grand Prix down for now while I work on these issues. Look forward to it coming back up in a better state in the next couple of weeks.\n\nAdditional minor bug fixes."),1.1===e&&(i="Two new animals have been added to the game!<ul><li>The <span class='flatlandColor'>Warthog</span> is a new Flatland racer that you can purchase from the Shop.</li><li>The <span class='waterColor'>Whale</span> is a new Ocean racer that is rewarded for reaching Circuit Rank B (25).</li></ul>The <span class='flatlandColor'>Hare</span> is now rewarded for reaching Circuit Rank Q (10). It is no longer listed in the Shop and anyone who has already purchased it will receive 1000 Coins immediately.\n\nBuried Treasure (<span class='waterColor'>Octopus</span>) and Cold Blooded (<span class='volcanicColor'>Salamander</span>) have both been reworked.\n\nMany Circuit Rank rewards were moved around to make the early game flow better. Of note, the Dolphin is now a reward at Circuit Rank L (15) so that you have more time with only two race course types.\n\nCertain items in the shop have been locked behind reaching Circuit Rank AZ (27) before they appear to better guide new players to aim for items better suited for early game.\n\nBy default, free races now give 1 medal per 50 free race victories.\n\nEarly game circuit races and free races in general are now easier.\n\nAfter the Attraction change last patch, upgrading barns became a bit too easy at higher levels. Coin cost per upgrade level for barns has been adjusted higher starting at level 100 to keep the time between upgrades balanced.\n\nAdded option to 'Export to File'/'Import from File' to make saving and loading easier.\n\nRemoved 'Stats' navigation page. It was really bare bones and just added more to the length of the navigation bar. I will eventually re-implement this in a better fashion.\n\nVarious bug fixes and UI improvements."),1.11===e&&(i="The Grand Prix has returned!<ul><li>New items have been added as rewards up to the 1 million meter mark for the first rank of the Grand Prix.</li><li>There were some minor adjustments to Token cost of items from the Token shop.</li><li>You can now set the desired energy level of your animals before they relay.</li><li>Bug fixes related to Grand Prix.</li></ul>A new item has been added to the shop (Gingko Leaves) that allow you to reset your Breed level and incubator upgrades back to their default levels. In return, you gain 1000% Breed XP until you get back to the Breed Level you were originally at. This will allow those who felt like they want to redo their incubator upgrades to be able to do so quickly.\n\nPutting an animal in the incubator now pauses their current training instead of cancelling it.\n\nVarious bug fixes and UI improvements."),1.12===e&&(i="Added option to not relay to animals below entered energy amount during Grand Prix.\n\nBug fixes related to Grand Prix."),1.13===e&&(i="Changed energy floor from 10% to 30%.\n\nRefunded a team manager and tokens to those who started on earlier versions and did not correctly receive or had bugs related to them.\n\nMore bug fixes."),1.14===e&&(i="Added option to minimize special races/training tracks for better visibility.\n\nAdded trait % value under the animals when looking at the Incubator to easily see an animal's current status.\n\nYou can now preview a talent tree before selecting.\n\nRefunded a team manager and tokens to those who started on earlier versions and did not correctly receive or had bugs related to them.\n\nMore bug fixes. (view Discord Change Log for full info)"),i}getDateForVersion(e){var i=new Date;return 1===e&&(i=new Date("2022-07-08 12:00:00")),1.01===e&&(i=new Date("2022-07-10 12:00:00")),1.02===e&&(i=new Date("2022-07-18 12:00:00")),1.03===e&&(i=new Date("2022-07-24 12:00:00")),1.04===e&&(i=new Date("2022-07-27 12:00:00")),1.05===e&&(i=new Date("2022-07-29 12:00:00")),1.06===e&&(i=new Date("2022-08-04 12:00:00")),1.07===e&&(i=new Date("2022-08-06 12:00:00")),1.08===e&&(i=new Date("2022-08-07 12:00:00")),1.09===e&&(i=new Date("2022-08-11 12:00:00")),1.1===e&&(i=new Date("2022-08-16 12:00:00")),1.11===e&&(i=new Date("2022-08-21 12:00:00")),1.12===e&&(i=new Date("2022-08-22 12:00:00")),1.13===e&&(i=new Date("2022-08-25 12:00:00")),1.14===e&&(i=new Date("2022-08-28 12:00:00")),i.toDateString().replace(/^\S+\s/,"")}updatePlayerVersion(){var c=1.05;this.getListAscended().forEach(_=>{var w;if(this.globalService.globalVar.currentVersion<_){if(1.01===_){this.globalService.globalVar.notifications=new Rf;var S=this.globalService.globalVar.modifiers.find(xe=>"breedLevelStatModifier"===xe.text);void 0!==S&&(S.value=.05);var k=this.globalService.globalVar.modifiers.find(xe=>"breedGaugeMaxIncreaseModifier"===xe.text);void 0!==k&&(k.value=10);var T=this.globalService.globalVar.modifiers.find(xe=>"breedingGroundsSpecializationModifier"===xe.text);void 0!==T&&(T.value=.1),this.globalService.globalVar.animals.forEach(xe=>{xe.breedLevel=Math.round(xe.breedLevel/2),xe.breedGaugeXp=2*xe.breedGaugeXp}),null!=(R=this.globalService.globalVar.animalDecks.find(xe=>xe.isPrimaryDeck))&&(R.isEventDeck=!0)}else if(1.02===_){if(this.globalService.globalVar.eventRaceData=new qn,this.globalService.globalVar.modifiers.push(new X(.1,"exhaustionStatLossMinimumModifier")),this.globalService.globalVar.modifiers.push(new X(5e6,"metersPerCoinsGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(2e7,"metersPerRenownGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(100,"grandPrixCoinRewardModifier")),this.globalService.globalVar.modifiers.push(new X(5,"grandPrixRenownRewardModifier")),this.globalService.globalVar.modifiers.push(new X(5e7,"grandPrixToken1MeterModifier")),this.globalService.globalVar.modifiers.push(new X(1e8,"grandPrixToken2MeterModifier")),this.globalService.globalVar.modifiers.push(new X(25e7,"grandPrixToken3MeterModifier")),this.globalService.globalVar.modifiers.push(new X(5e8,"grandPrixToken4MeterModifier")),this.globalService.globalVar.modifiers.push(new X(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(.02,"exhaustionGainGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(75,"grandPrixBreedLevelRequiredModifier")),this.globalService.globalVar.modifiers.push(new X(2,"scaryMaskEquipmentModifier")),this.globalService.globalVar.modifiers.push(new X(1.2,"runningShoesEquipmentModifier")),this.globalService.globalVar.modifiers.push(new X(.9,"incenseEquipmentModifier")),this.globalService.globalVar.modifiers.push(new X(.5,"athleticTapeEquipmentModifier")),this.globalService.globalVar.modifiers.push(new X(.2,"weatherMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new X(.03,"focusMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new X(.01,"stumbleMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new X(.05,"segmentCompleteMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new X(5,"whistleModifier")),this.globalService.globalVar.modifiers.push(new X(10,"goldenWhistleModifier")),this.globalService.InitializeTokenShop(),null!=(L=this.globalService.globalVar.shop.find(xe=>"Specialty"===xe.name))){var W=new it;W.name="Whistle",W.purchasePrice.push(this.globalService.getCoinsResourceValue(2500)),W.basePurchasePrice.push(this.globalService.getCoinsResourceValue(2500)),W.totalShopQuantity=1,W.canHaveMultiples=!1,W.isAvailable=this.lookupService.isItemUnlocked("coaching"),W.type=U.Specialty,L.itemList.push(W);var ae=new it;ae.name="Golden Whistle",ae.purchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),ae.basePurchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),ae.totalShopQuantity=1,ae.canHaveMultiples=!1,ae.isAvailable=!1,ae.type=U.Specialty,L.itemList.push(ae)}this.globalService.globalVar.animals.forEach(xe=>{xe.allTrainingTracks.noviceTrack.rewards.filter(he=>"Bonus Breed XP Gain From Local Races"===he.name).forEach(he=>{he.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(xe=>{xe.allTrainingTracks.intermediateTrack.rewards.filter(he=>"Bonus Breed XP Gain From Local Races"===he.name).forEach(he=>{he.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(xe=>{xe.allTrainingTracks.masterTrack.rewards.filter(he=>"Bonus Breed XP Gain From Local Races"===he.name).forEach(he=>{he.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(xe=>{xe.breedGaugeMax=200+10*(xe.breedLevel-1)})}else if(1.03===_)this.globalService.globalVar.animals.forEach(xe=>{(isNaN(Number(xe.breedLevel))||null==xe.breedLevel)&&(xe.breedLevel=1)});else if(1.04===_)this.fixTrackRewardsBug(),this.globalService.globalVar.notifications.isEventRaceNowActive=!1,this.globalService.globalVar.animals.forEach(xe=>{if(xe.type===H.Cheetah){var he=xe.availableAbilities.find(Ti=>"Giving Chase"===Ti.name);void 0!==he&&(he.efficiency=.5),"Giving Chase"===xe.ability.name&&(xe.ability.efficiency=.5);var fi=xe.availableAbilities.find(Ti=>"On The Hunt"===Ti.name);void 0!==fi&&(fi.efficiency=.1),"On The Hunt"===xe.ability.name&&(xe.ability.efficiency=.1)}if(xe.type===H.Goat){var Pn=xe.availableAbilities.find(Ti=>"Deep Breathing"===Ti.name);void 0!==Pn&&(Pn.efficiency=.25),"Deep Breathing"===xe.ability.name&&(xe.ability.efficiency=.25);var go=xe.availableAbilities.find(Ti=>"In The Rhythm"===Ti.name);void 0!==go&&(go.efficiency=.1),"In The Rhythm"===xe.ability.name&&(xe.ability.efficiency=.1);var Vo=xe.availableAbilities.find(Ti=>"Sure-footed"===Ti.name);void 0!==Vo&&(Vo.efficiency=.5),"Sure-footed"===xe.ability.name&&(xe.ability.efficiency=.5)}if(xe.type===H.Gecko){var Oo=xe.availableAbilities.find(Ti=>"Night Vision"===Ti.name);void 0!==Oo&&(Oo.efficiency=.2),"Night Vision"===xe.ability.name&&(xe.ability.efficiency=.2)}if(xe.type===H.Shark){var No=xe.availableAbilities.find(Ti=>"Blood In The Water"===Ti.name);void 0!==No&&(No.efficiency=.1),"Blood In The Water"===xe.ability.name&&(xe.ability.efficiency=.1)}if(xe.type===H.Octopus){var Fo=xe.availableAbilities.find(Ti=>"Buried Treasure"===Ti.name);void 0!==Fo&&(Fo.efficiency=1),"Buried Treasure"===xe.ability.name&&(xe.ability.efficiency=1);var yn=xe.availableAbilities.find(Ti=>"Big Brain"===Ti.name);void 0!==yn&&(yn.efficiency=2),"Big Brain"===xe.ability.name&&(xe.ability.efficiency=2)}if(xe.type===H.Penguin){var tn=xe.availableAbilities.find(Ti=>"Wild Toboggan"===Ti.name);void 0!==tn&&(tn.efficiency=4),"Wild Toboggan"===xe.ability.name&&(xe.ability.efficiency=4);var En=xe.availableAbilities.find(Ti=>"Quick Toboggan"===Ti.name);void 0!==En&&(En.efficiency=.1),"Quick Toboggan"===xe.ability.name&&(xe.ability.efficiency=.1)}if(xe.type===H.Caribou){var Ua=xe.availableAbilities.find(Ti=>"Herd Mentality"===Ti.name);void 0!==Ua&&(Ua.efficiency=.5),"Herd Mentality"===xe.ability.name&&(xe.ability.efficiency=.5);var vo=xe.availableAbilities.find(Ti=>"Special Delivery"===Ti.name);void 0!==vo&&(vo.efficiency=.05),"Special Delivery"===xe.ability.name&&(xe.ability.efficiency=.05)}if(xe.type===H.Fox){var Ha=xe.availableAbilities.find(Ti=>"Fleeting Speed"===Ti.name);void 0!==Ha&&(Ha.efficiency=1.5),"Fleeting Speed"===xe.ability.name&&(xe.ability.efficiency=1.5)}}),void 0!==(ee=this.globalService.globalVar.modifiers.find(xe=>"autoFreeRacesMaxIdleTimePeriodModifier"===xe.text))&&(ee.value=7200);else if(1.05===_)null!=this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.isCatchingUp&&(this.globalService.globalVar.eventRaceData.isCatchingUp=!1),void 0!==(be=this.globalService.globalVar.modifiers.find(xe=>"grandPrixBreedLevelRequiredModifier"===xe.text))&&(be.value=50);else if(1.06===_){this.globalService.globalVar.previousEventRewards=[],this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(he=>"Bonus Breed XP Gain From Training"!==he.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(he=>"Bonus Breed XP Gain From Free Races"!==he.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(he=>"Diminishing Returns per Facility Level"!==he.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(he=>"Training Time Reduction"!==he.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(he=>"Bonus Breed XP Gain From Circuit Races"!==he.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(he=>"Bonus Talents"!==he.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(he=>"Orb Pendant"!==he.name),this.fixTrackRewardsBug(),this.globalService.globalVar.modifiers.push(new X(.02,"burstMoraleBoostModifier"));var be,oe=this.globalService.globalVar.modifiers.find(he=>"grandPrixRenownRewardModifier"===he.text);void 0!==oe&&(oe.value=3),void 0!==(be=this.globalService.globalVar.modifiers.find(he=>"grandPrixBreedLevelRequiredModifier"===he.text))&&(be.value=25),void 0!==this.globalService.globalVar.incubator&&(this.globalService.globalVar.incubator.timeToComplete=120),this.globalService.globalVar.settings.set("autoStartEventRace",!1)}else if(1.07===_){var _e=0,ge=0;if(this.globalService.globalVar.resources.forEach(xe=>{"Headband"===xe.name&&(_e+=1,ge+=xe.amount)}),_e>1){var De=this.globalService.globalVar.resources.findIndex(xe=>"Headband"===xe.name);this.globalService.globalVar.resources.splice(De,1),void 0!==(dt=this.globalService.globalVar.resources.find(xe=>"Headband"===xe.name))&&(dt.amount=ge)}var dt,nt=0,Dt=0;if(this.globalService.globalVar.resources.forEach(xe=>{"Blue Baton"===xe.name&&(nt+=1,Dt+=xe.amount)}),nt>1)De=this.globalService.globalVar.resources.findIndex(fi=>"Blue Baton"===fi.name),this.globalService.globalVar.resources.splice(De,1),void 0!==(dt=this.globalService.globalVar.resources.find(fi=>"Blue Baton"===fi.name))&&(dt.amount=Dt)}else if(1.08===_){if(this.globalService.globalVar.showBreedWarning=!1,void 0===this.globalService.globalVar.tutorials&&(this.globalService.globalVar.tutorials=new Df),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>9){var Qe=1e3;null==(lt=this.globalService.globalVar.resources.find(xe=>"Coins"===xe.name))?this.globalService.globalVar.resources.push(new ie("Coins",Qe)):lt.amount+=Qe}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>23&&(Qe=1500,null==(lt=this.globalService.globalVar.resources.find(fi=>"Coins"===fi.name))?this.globalService.globalVar.resources.push(new ie("Coins",Qe)):lt.amount+=Qe)}else if(1.09===_){var ee;void 0!==(ee=this.globalService.globalVar.modifiers.find(he=>"autoFreeRacesMaxIdleTimePeriodModifier"===he.text))&&(ee.value=28800);var Et=this.globalService.globalVar.modifiers.find(he=>"smallBarnTrainingTimeModifier"===he.text);void 0!==Et&&(Et.value=14400);var Ct=this.globalService.globalVar.modifiers.find(he=>"mediumBarnTrainingTimeModifier"===he.text);void 0!==Ct&&(Ct.value=28800);var Z=this.globalService.globalVar.modifiers.find(he=>"largeBarnTrainingTimeModifier"===he.text);void 0!==Z&&(Z.value=43200);var C=this.globalService.globalVar.trainingOptions.find(he=>he.trainingType===Fe.Footwork);void 0!==C&&(C.affectedStatRatios=new Ve(0,.25,0,0,0,1));var yt=this.globalService.globalVar.trainingOptions.find(he=>he.trainingType===Fe.DodgeBall);void 0!==yt&&(yt.affectedStatRatios=new Ve(0,2.5,0,0,0,1),yt.timeToComplete=60);var xt=this.globalService.globalVar.shop.find(he=>"Food"===he.name);if(void 0!==xt){var Kt=xt.itemList.find(he=>"Apples"===he.name);void 0!==Kt&&(Kt.purchasePrice=[],Kt.purchasePrice.push(new ie("Coins",10)));var ot=xt.itemList.find(he=>"Bananas"===he.name);void 0!==ot&&(ot.purchasePrice=[],ot.purchasePrice.push(new ie("Coins",10)));var Ri=xt.itemList.find(he=>"Strawberries"===he.name);void 0!==Ri&&(Ri.purchasePrice=[],Ri.purchasePrice.push(new ie("Coins",10)));var gt=xt.itemList.find(he=>"Carrots"===he.name);void 0!==gt&&(gt.purchasePrice=[],gt.purchasePrice.push(new ie("Coins",10)));var Ii=xt.itemList.find(he=>"Turnips"===he.name);void 0!==Ii&&(Ii.purchasePrice=[],Ii.purchasePrice.push(new ie("Coins",10)));var on=xt.itemList.find(he=>"Oranges"===he.name);void 0!==on&&(on.purchasePrice=[],on.purchasePrice.push(new ie("Coins",10)));var Ui=xt.itemList.find(he=>"Mangoes"===he.name);if(void 0!==Ui){var Mi=Ui.purchasePrice.find(he=>"Coins"===he.name);void 0!==Mi&&(Mi.amount-=400)}var ci=this.globalService.globalVar.modifiers.find(he=>"attractionAmountModifier"===he.text);void 0!==ci&&(ci.value=20),this.globalService.stopGrandPrixRace()}}else if(1.1===_){this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)<26?this.globalService.lockTier2ShopItems():this.globalService.unlockTier2ShopItems(),this.globalService.globalVar.modifiers.push(new X(.3*1.025,"warthogDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new X(.1,"warthogDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new X(5*c,"warthogDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new X(1.025,"warthogDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new X(4.875,"warthogDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new X(4.75,"warthogDefaultAdaptabilityModifier")),this.globalService.globalVar.modifiers.push(new X(.27,"whaleDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new X(.1,"whaleDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new X(5*c,"whaleDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new X(1*c,"whaleDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new X(5.5,"whaleDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new X(4.75,"whaleDefaultAdaptabilityModifier"));var Hi=new OD;Hi.name="Warthog",this.globalService.calculateAnimalRacingStats(Hi);var Qi=new ND;Qi.name="Whale",this.globalService.calculateAnimalRacingStats(Qi),this.globalService.globalVar.animals.push(Hi),this.globalService.globalVar.animals.push(Qi),this.globalService.sortAnimalOrder();var ft,Gi=this.globalService.globalVar.shop.find(he=>"Abilities"===he.name);if(Hi.availableAbilities.forEach(he=>{if(!he.isAbilityPurchased){var fi=new it;fi.name=Hi.getAnimalType()+" Ability: "+he.name,fi.purchasePrice.push(new ie("Coins",he.purchasePrice)),fi.canHaveMultiples=!1,fi.type=U.Ability,fi.additionalIdentifier=he.name,fi.isAvailable=Hi.isAvailable,null==Gi||Gi.itemList.push(fi)}}),Qi.availableAbilities.forEach(he=>{if(!he.isAbilityPurchased){var fi=new it;fi.name=Qi.getAnimalType()+" Ability: "+he.name,fi.purchasePrice.push(new ie("Coins",he.purchasePrice)),fi.canHaveMultiples=!1,fi.type=U.Ability,fi.additionalIdentifier=he.name,fi.isAvailable=Qi.isAvailable,null==Gi||Gi.itemList.push(fi)}}),null!=(ft=this.globalService.globalVar.shop.find(he=>"Animals"===he.name))){var Ki=new it;Ki.name="Warthog",Ki.purchasePrice.push(new ie("Coins",1e3)),Ki.canHaveMultiples=!1,Ki.type=U.Animal,ft.itemList.push(Ki)}if(this.globalService.globalVar.modifiers.push(new X(50,"freeRacesToMedalModifier")),null!=(L=this.globalService.globalVar.shop.find(he=>"Specialty"===he.name))){var $t=L.itemList.find(he=>"Team Manager"===he.name);null!=$t&&($t.totalShopQuantity=19);var ei=new it;ei.name="Talent Point Voucher",ei.purchasePrice.push(this.globalService.getMedalResourceValue(25)),ei.basePurchasePrice.push(this.globalService.getMedalResourceValue(25)),ei.infiniteAmount=!0,ei.canHaveMultiples=!0,ei.quantityAdditive=25,ei.isAvailable=!1,this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=53&&(ei.isAvailable=!0),ei.type=U.Specialty,L.itemList.push(ei)}if((null===(w=this.globalService.globalVar.animals.find(he=>he.type===H.Hare))||void 0===w?void 0:w.isAvailable)&&(Qe=1e3,null==(lt=this.globalService.globalVar.resources.find(Pn=>"Coins"===Pn.name))?this.globalService.globalVar.resources.push(new ie("Coins",Qe)):lt.amount+=Qe),null!=(ft=this.globalService.globalVar.shop.find(he=>"Animals"===he.name))){var Vi=ft.itemList.find(he=>"Hare"===he.name);null!=Vi&&(Vi.isAvailable=!1)}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10){var vi=this.globalService.globalVar.animals.find(he=>he.type===H.Hare);void 0!==vi&&(vi.isAvailable=!0,this.globalService.unlockAnimalAbilities(vi))}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=13&&this.globalService.globalVar.unlockables.set("barnRow2",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=14&&this.globalService.globalVar.unlockables.set("attractionSpecialization",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=25){var wi=this.globalService.globalVar.animals.find(he=>he.type===H.Whale);void 0!==wi&&(wi.isAvailable=!0,this.globalService.unlockAnimalAbilities(wi))}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=29&&this.globalService.globalVar.unlockables.set("barnRow3",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=40&&this.globalService.globalVar.unlockables.set("barnRow4",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=58&&this.globalService.globalVar.unlockables.set("barnRow5",!0);var mi=this.globalService.globalVar.animals.find(he=>he.type===H.Octopus);if(void 0!==mi){var ri=mi.availableAbilities.find(he=>"Buried Treasure"===he.name);void 0!==ri&&(ri.efficiency=100),"Buried Treasure"===mi.ability.name&&(mi.ability.efficiency=100)}var Oi=this.globalService.globalVar.animals.find(he=>he.type===H.Salamander);if(void 0!==Oi){var Ln=Oi.availableAbilities.find(he=>"Cold Blooded"===he.name);void 0!==Ln&&(Ln.efficiency=45),"Cold Blooded"===Oi.ability.name&&(Oi.ability.efficiency=45)}}else if(1.11===_){var L;if(void 0!==this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.currentEventEndDate&&(this.globalService.globalVar.eventRaceData=new qn,this.globalService.globalVar.eventRaceData.initialSetupComplete=!1),null!=(L=this.globalService.globalVar.shop.find(he=>"Food"===he.name))){var Dn=new it;Dn.name="Gingko Leaves",Dn.shortDescription="Reset Breed Level for a single animal back to 1 and remove all incubator upgrade gains. Increase Breed XP Gain by 900% until Breed Level returns to what it was.",Dn.purchasePrice.push(new ie("Coins",3500)),Dn.canHaveMultiples=!0,Dn.type=U.Food,Dn.infiniteAmount=!0,Dn.isAvailable=!0,L.itemList.push(Dn)}var hr=this.globalService.globalVar.modifiers.find(he=>"metersPerCoinsGrandPrixModifier"===he.text);void 0!==hr&&(hr.value=25e5);var Jr=this.globalService.globalVar.modifiers.find(he=>"segmentCompleteMoraleBoostModifier"===he.text);void 0!==Jr&&(Jr.value=.1);var Dr=this.globalService.globalVar.modifiers.find(he=>"weatherMoraleBoostModifier"===he.text);if(void 0!==Dr&&(Dr.value=.5),this.globalService.globalVar.relayEnergyFloor=50,this.globalService.globalVar.pinnacleFloor="Z",this.globalService.globalVar.unlockables.set("thePinnacle",!1),void 0!==(Qn=this.globalService.globalVar.tokenShop.find(he=>"Tier 2"===he.name))){var _n=Qn.itemList.find(he=>"Coins"===he.name),Zi=Qn.itemList.find(he=>"Training Breed XP Gain Certificate"===he.name),mt=Qn.itemList.find(he=>"Diminishing Returns Increase Certificate"===he.name);void 0!==_n&&(_n.purchasePrice=[],_n.purchasePrice.push(new ie("Tokens",1))),void 0!==Zi&&(Zi.purchasePrice=[],Zi.purchasePrice.push(new ie("Tokens",2))),void 0!==mt&&(mt.purchasePrice=[],mt.purchasePrice.push(new ie("Tokens",4)))}}else if(1.12===_)this.globalService.globalVar.doNotRelayBelowEnergyFloor=!1;else if(1.13===_){if(this.globalService.globalVar.startingVersion<=1.02){var Ze=this.globalService.globalVar.resources.find(he=>"Tokens"===he.name);null!=Ze&&(Ze.amount+=5)}var lt,R,wt=this.globalService.globalVar.resources.find(he=>"Mangoes"===he.name&&he.itemType===U.Resources);if(void 0!==wt){var fr=this.globalService.globalVar.resources.find(he=>"Mangoes"===he.name&&he.itemType===U.Food);null!=fr?fr.amount+=wt.amount:this.globalService.globalVar.resources.push(new ie("Mangoes",wt.amount,U.Food)),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(he=>!("Mangoes"===he.name&&he.itemType===U.Resources))}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=6&&this.globalService.globalVar.startingVersion<=1.09)Qe=1,null==(lt=this.globalService.globalVar.resources.find(Pn=>"Team Manager"===Pn.name))?(this.globalService.globalVar.resources.push(new ie("Team Manager",Qe,U.Specialty)),this.globalService.globalVar.animalDecks.some(Pn=>Pn.autoRunFreeRace)||null!=(R=this.globalService.globalVar.animalDecks.find(go=>go.isPrimaryDeck))&&(R.autoRunFreeRace=!0)):lt.amount+=Qe;this.globalService.globalVar.orbStats=new _f;var ea=this.globalService.globalVar.modifiers.find(he=>"exhaustionStatLossMinimumModifier"===he.text);void 0!==ea&&(ea.value=.3);var ta=this.globalService.globalVar.tokenShop.find(he=>"Tier 1"===he.name),Qn=this.globalService.globalVar.tokenShop.find(he=>"Tier 2"===he.name);if(void 0!==ta){var fo=ta.itemList.find(he=>"Free Race Breed XP Gain Certificate"===he.name),po=ta.itemList.find(he=>"Circuit Race Breed XP Gain Certificate"===he.name);void 0!==fo&&(fo.type=U.Consumable),void 0!==po&&(po.type=U.Consumable)}void 0!==Qn&&(Zi=Qn.itemList.find(Pn=>"Training Breed XP Gain Certificate"===Pn.name),mt=Qn.itemList.find(Pn=>"Diminishing Returns Increase Certificate"===Pn.name),void 0!==Zi&&(Zi.type=U.Consumable),void 0!==mt&&(mt.type=U.Consumable))}else 1.14===_&&(this.globalService.globalVar.settings.set("monoRaceToggled",!1),this.globalService.globalVar.settings.set("duoRaceToggled",!1),this.globalService.globalVar.settings.set("rainbowRaceToggled",!1),this.globalService.globalVar.settings.set("pinnacleRaceToggled",!1),this.globalService.globalVar.settings.set("noviceTrainingTrackToggled",!1),this.globalService.globalVar.settings.set("intermediateTrainingTrackToggled",!1),this.globalService.globalVar.settings.set("masterTrainingTrackToggled",!1));this.globalService.globalVar.currentVersion=_}})}fixTrackRewardsBug(){this.globalService.globalVar.animals.filter(e=>e.isAvailable).forEach(e=>{var i=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces(),r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces(),a=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(),o=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(),s=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction(),l=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();e.miscStats.bonusBreedXpGainFromLocalRaces=0===e.miscStats.bonusLocalBreedXpCertificateCount?i:i+e.miscStats.bonusLocalBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromCircuitRaces=0===e.miscStats.bonusCircuitBreedXpCertificateCount?r:r+2*e.miscStats.bonusCircuitBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromTraining=0===e.miscStats.bonusTrainingBreedXpCertificateCount?a:a+e.miscStats.bonusTrainingBreedXpCertificateCount,e.miscStats.diminishingReturnsBonus=0===e.miscStats.bonusDiminishingReturnsCertificateCount?o:o+e.miscStats.bonusDiminishingReturnsCertificateCount,e.miscStats.trainingTimeReduction=s,e.miscStats.bonusTalents=l})}}return t.\u0275fac=function(e){return new(e||t)(Ue(It),Ue(Di),Ue(Fn))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),HD=(()=>{class t{constructor(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setProductionMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setDevMode(){this.devModeActive=!0,this.forceStartNewGame=!0,this.codeCreationMode=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Tt=(()=>{return(t=Tt||(Tt={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.relayTeams=3]="relayTeams",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.trainingtrack=6]="trainingtrack",t[t.talents=7]="talents",t[t.resources=8]="resources",t[t.faqs=9]="faqs",t[t.stats=10]="stats",t[t.settings=11]="settings",Tt;var t})(),_a=(()=>{return(t=_a||(_a={}))[t.regular=0]="regular",t[t.token=1]="token",_a;var t})();let mn=(()=>{class t{constructor(){this.switchView=new pn(Tt.barn),this.selectAnimalView=new pn(new Pt),this.selectBarnView=new pn(0),this.selectShopView=new pn(_a.regular),this.selectRaceView=new pn(Ie.circuit)}setNewView(e){e!==this.switchView.value&&this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,i){i!==this.selectAnimalView.value&&this.selectAnimalView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setAnimal(e){e!==this.selectAnimalView.value&&this.selectAnimalView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,i){i!==this.selectBarnView.value&&this.selectBarnView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setBarnNumber(e){e!==this.selectBarnView.value&&this.selectBarnView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}setShopView(e,i){i!==this.selectShopView.value&&this.selectShopView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setShopType(e){e!==this.selectShopView.value&&this.selectShopView.next(e)}getShopView(){return this.selectShopView.asObservable()}setRaceView(e,i){i!==this.selectRaceView.value&&this.selectRaceView.next(i),e!==this.switchView.value&&this.switchView.next(e)}getRaceView(){return this.selectRaceView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class t4{}let GD=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.globalVar.tutorials.currentTutorialId=10}getTutorialState(e){var i=new t4;return i.id=e,1===e&&(i.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=Tt.barn),2===e&&(i.tutorialText="You'll have to train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following base stats:\n\n<b>Speed</b>: Increase the max speed your animal can run in a race.\n<b>Acceleration</b>: Increase how quickly your animal gains speed.\n<b>Endurance</b>: Increase the distance your animal can run before tiring out and slowing down.\n<b>Power</b>: Increase the efficiency of your unique ability.\n<b>Focus</b>: Increase the distance your animal can run before losing focus and stopping abruptly.\n<b>Adaptability</b>: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",i.associatedTab=Tt.barn),3===e&&(i.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. There are a few other stats here to be mindful of:\n\n<b>Diminishing Returns</b>: After a base stat reaches the Diminishing Returns value, any additional training of that stat gets progressively weaker. Typically, you want to try and keep all of your base stats around your Diminishing Returns value for best results. You'll find multiple ways to increase your Diminishing Returns value as you progress.\n<b>Burst Chance</b>: As you race, your racer may enter Burst mode. This increases their overall velocity and allows them to exceed their Max Speed. This stat is based on a combination of Focus and Adaptability and is not affected by Diminishing Returns.\n<b>Burst Distance</b>: This controls how long you stay in Burst mode. This stat is based on your Power and is not affected by Diminishing Returns.\n\nCheck back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right (or in the menu if on mobile) bordered in red.</b>",i.associatedTab=Tt.animals),4===e&&(i.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. Improving your Circuit Rank should be your number one goal in becoming a top tier racing facility!\n\nYou can also run some free races against local competition. Only a few races are available at a time, but it can be a great way to get some practice in and make some quick money.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over text usually gives you the information you need. Whenever you're ready, start the race. Your goal is to get to the finish line before your competition (represented as the little black dot). Good luck!\n\n<b>Click (or tap if you are on mobile) the race option outlined in red.</b>",i.associatedTab=Tt.raceselection),5===e&&(i.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. I'll check in with you again a little later. I look forward to seeing how far you can go!\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",i.associatedTab=Tt.raceselection),6===e&&(i.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=Tt.raceselection),7===e&&(i.tutorialText="Let's see if we can start training your new racing Monkey. From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your Monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",i.associatedTab=Tt.barn),8===e&&(i.tutorialText="Nicely done. Now you can set a training for your Monkey so it can start to get acclimated to racing. Once your Monkey has caught up to your Horse in stats, you'll be back to winning races in no time. Don't forget to train both your Horse and your Monkey, and to try to keep their stats balanced! I'll check back in with you after awhile.\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",i.associatedTab=Tt.barn),9===e&&(i.tutorialText="Looks like you've won a nice racing Hare. The Hare and Horse are both Flatland animals, meaning only one of them will be able to run the Flatland portion of a race at a time. Ideally, you'll want one getting faster while the other is winning races. Let's head over to your animals and talk about Breeding.\n\n<b>Click (or tap if you are on mobile) 'Animals' on the right bordered in red and select an animal.</b>",i.associatedTab=Tt.raceselection),10===e&&(i.tutorialText="Breeding is where your speed really starts to grow. Firstly, to Breed you need a sufficient amount of Breed XP. Training and racing both contribute to this. Once you're ready, you can breed your animal to increase its Breed Level. This gives it a 5% increase to how much the base stats affect the racing stats. There's a strategic element to this. <b>After breeding, your animal will have its stats reset back to their starting points, but the amount that the base stats contribute to the racing stats will increase.</b>\n\n Because you only need 1 Flatland animal to race at any given time, you can choose one to start Breeding and another to keep racing. For best results, you should keep Breeding the same animal multiple times so that you don't need to spend too much time training. 5% may not make a huge difference at first, but 50% will. Once your racing animal can no longer keep up with the competition, swap them! The animal you were breeding will surely torch the competition and the animal you were racing can start to catch up in speed.\n\nThere's an ebb and flow to it. Race as far as your animals can go, breed them many times in quick succession to get a large percentage upgrade to stats, and then get back in the race. <b>This game is intended to be a slow burn and skews towards idle play. If you play very actively, you may find yourself needing to wait at certain points early on. Breeding once, training to max, breeding one time again, and so on is not recommended. Cycle between breeding in batches and then racing with your much higher stat modifiers.\n\nThat's all I have for you. Good luck and have fun!",i.associatedTab=Tt.animals,this.globalService.globalVar.tutorials.tutorialCompleted=!0),i}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(Ue(It))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const i4=["addListener","removeListener"],n4=["addEventListener","removeEventListener"],r4=["on","off"];function Sr(t,n,e,i){if(Q(e)&&(i=e,e=void 0),i)return Sr(t,n,e).pipe(um(i));const[r,a]=function s4(t){return Q(t.addEventListener)&&Q(t.removeEventListener)}(t)?n4.map(o=>s=>t[o](n,s,e)):function a4(t){return Q(t.addListener)&&Q(t.removeListener)}(t)?i4.map(zD(t,n)):function o4(t){return Q(t.on)&&Q(t.off)}(t)?r4.map(zD(t,n)):[];if(!r&&cc(t))return Rn(o=>Sr(o,n,e))(Hn(t));if(!r)throw new TypeError("Invalid event target");return new Le(o=>{const s=(...l)=>o.next(1<l.length?l:l[0]);return r(s),()=>a(s)})}function zD(t,n){return e=>i=>t[e](n,i)}class l4 extends ve{constructor(n,e){super()}schedule(n,e=0){return this}}const kf={setInterval(...t){const{delegate:n}=kf;return((null==n?void 0:n.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:n}=kf;return((null==n?void 0:n.clearInterval)||clearInterval)(t)},delegate:void 0},jD={now:()=>(jD.delegate||Date).now(),delegate:void 0};class Iu{constructor(n,e=Iu.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}Iu.now=jD.now;const $D=new class u4 extends Iu{constructor(n,e=Iu.now){super(n,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class c4 extends l4{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(n,e,i=0){return kf.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;kf.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(a){i=!0,r=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,le(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),d4=$D;function b0(t=0,n,e=d4){let i=-1;return null!=n&&(fb(n)?e=n:i=n),new Le(r=>{let a=function h4(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},a)})}const{isArray:f4}=Array;function WD(t){return 1===t.length&&f4(t[0])?t[0]:t}function qD(...t){return 1===(t=WD(t)).length?Hn(t[0]):new Le(function p4(t){return n=>{let e=[];for(let i=0;e&&!n.closed&&i<t.length;i++)e.push(Hn(t[i]).subscribe(Zt(n,r=>{if(e){for(let a=0;a<e.length;a++)a!==i&&e[a].unsubscribe();e=null}n.next(r)})))}}(t))}function Mf(...t){const n=hd(t),e=WD(t);return e.length?new Le(i=>{let r=e.map(()=>[]),a=e.map(()=>!1);i.add(()=>{r=a=null});for(let o=0;!i.closed&&o<e.length;o++)Hn(e[o]).subscribe(Zt(i,s=>{if(r[o].push(s),r.every(l=>l.length)){const l=r.map(c=>c.shift());i.next(n?n(...l):l),r.some((c,u)=>!c.length&&a[u])&&i.complete()}},()=>{a[o]=!0,!r[o].length&&i.complete()}));return()=>{r=a=null}}):wa}function Xn(t){return kt((n,e)=>{Hn(t).subscribe(Zt(e,()=>e.complete(),O)),!e.closed&&n.subscribe(e)})}function y0(...t){const n=hd(t);return kt((e,i)=>{const r=t.length,a=new Array(r);let o=t.map(()=>!1),s=!1;for(let l=0;l<r;l++)Hn(t[l]).subscribe(Zt(i,c=>{a[l]=c,!s&&!o[l]&&(o[l]=!0,(s=o.every(Be))&&(o=null))},O));e.subscribe(Zt(i,l=>{if(s){const c=[l,...a];i.next(n?n(...c):c)}}))})}function YD(t,n){return n?e=>vu(n.pipe(Zn(1),function m4(){return kt((t,n)=>{t.subscribe(Zt(n,O))})}()),e.pipe(YD(t))):Rn((e,i)=>t(e,i).pipe(Zn(1),function b4(t){return Ht(()=>t)}(e)))}function QD(t,n=$D){const e=b0(t,n);return YD(()=>e)}new Le(O);var y4={left:"right",right:"left",bottom:"top",top:"bottom"};function Af(t){return t.replace(/left|right|bottom|top/g,function(n){return y4[n]})}function so(t){return t.split("-")[0]}var w4={start:"end",end:"start"};function KD(t){return t.replace(/start|end/g,function(n){return w4[n]})}var Qr="top",Na="bottom",Fa="right",Kr="left",w0="auto",Vu=[Qr,Na,Fa,Kr],Ql="start",Ou="end",ZD="viewport",Nu="popper",JD=Vu.reduce(function(t,n){return t.concat([n+"-"+Ql,n+"-"+Ou])},[]),eR=[].concat(Vu,[w0]).reduce(function(t,n){return t.concat([n,n+"-"+Ql,n+"-"+Ou])},[]),I4=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ba(t){if(null==t)return window;if("[object Window]"!==t.toString()){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function Kl(t){return t instanceof Ba(t).Element||t instanceof Element}function ya(t){return t instanceof Ba(t).HTMLElement||t instanceof HTMLElement}function tR(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Ba(t).ShadowRoot||t instanceof ShadowRoot)}function ss(t){return((Kl(t)?t.ownerDocument:t.document)||window.document).documentElement}var Es=Math.max,Pf=Math.min,Zl=Math.round;function Jl(t,n){void 0===n&&(n=!1);var e=t.getBoundingClientRect(),i=1,r=1;if(ya(t)&&n){var a=t.offsetHeight,o=t.offsetWidth;o>0&&(i=Zl(e.width)/o||1),a>0&&(r=Zl(e.height)/a||1)}return{width:e.width/i,height:e.height/r,top:e.top/r,right:e.right/i,bottom:e.bottom/r,left:e.left/i,x:e.left/i,y:e.top/r}}function C0(t){var n=Ba(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function S0(t){return Jl(ss(t)).left+C0(t).scrollLeft}function Io(t){return Ba(t).getComputedStyle(t)}function lo(t){return t?(t.nodeName||"").toLowerCase():null}function Ef(t){return"html"===lo(t)?t:t.assignedSlot||t.parentNode||(tR(t)?t.host:null)||ss(t)}function T0(t){var n=Io(t);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function iR(t){return["html","body","#document"].indexOf(lo(t))>=0?t.ownerDocument.body:ya(t)&&T0(t)?t:iR(Ef(t))}function Fu(t,n){var e;void 0===n&&(n=[]);var i=iR(t),r=i===(null==(e=t.ownerDocument)?void 0:e.body),a=Ba(i),o=r?[a].concat(a.visualViewport||[],T0(i)?i:[]):i,s=n.concat(o);return r?s:s.concat(Fu(Ef(o)))}function N4(t){return["table","td","th"].indexOf(lo(t))>=0}function nR(t){return ya(t)&&"fixed"!==Io(t).position?t.offsetParent:null}function Bu(t){for(var n=Ba(t),e=nR(t);e&&N4(e)&&"static"===Io(e).position;)e=nR(e);return e&&("html"===lo(e)||"body"===lo(e)&&"static"===Io(e).position)?n:e||function F4(t){var n=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&ya(t)&&"fixed"===Io(t).position)return null;for(var r=Ef(t);ya(r)&&["html","body"].indexOf(lo(r))<0;){var a=Io(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||n&&"filter"===a.willChange||n&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||n}function rR(t,n){var e=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(e&&tR(e)){var i=n;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function D0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function aR(t,n){return n===ZD?D0(function V4(t){var n=Ba(t),e=ss(t),i=n.visualViewport,r=e.clientWidth,a=e.clientHeight,o=0,s=0;return i&&(r=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,s=i.offsetTop)),{width:r,height:a,x:o+S0(t),y:s}}(t)):Kl(n)?function B4(t){var n=Jl(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(n):D0(function O4(t){var n,e=ss(t),i=C0(t),r=null==(n=t.ownerDocument)?void 0:n.body,a=Es(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Es(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+S0(t),l=-i.scrollTop;return"rtl"===Io(r||e).direction&&(s+=Es(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(ss(t)))}function ec(t){return t.split("-")[1]}function R0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function oR(t){var l,n=t.reference,e=t.element,i=t.placement,r=i?so(i):null,a=i?ec(i):null,o=n.x+n.width/2-e.width/2,s=n.y+n.height/2-e.height/2;switch(r){case Qr:l={x:o,y:n.y-e.height};break;case Na:l={x:o,y:n.y+n.height};break;case Fa:l={x:n.x+n.width,y:s};break;case Kr:l={x:n.x-e.width,y:s};break;default:l={x:n.x,y:n.y}}var c=r?R0(r):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case Ql:l[c]=l[c]-(n[u]/2-e[u]/2);break;case Ou:l[c]=l[c]+(n[u]/2-e[u]/2)}}return l}function lR(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function cR(t,n){return n.reduce(function(e,i){return e[i]=t,e},{})}function x0(t,n){void 0===n&&(n={});var i=n.placement,r=void 0===i?t.placement:i,a=n.boundary,o=void 0===a?"clippingParents":a,s=n.rootBoundary,l=void 0===s?ZD:s,c=n.elementContext,u=void 0===c?Nu:c,d=n.altBoundary,v=void 0!==d&&d,m=n.padding,_=void 0===m?0:m,w=lR("number"!=typeof _?_:cR(_,Vu)),k=t.rects.popper,T=t.elements[v?u===Nu?"reference":Nu:u],R=function U4(t,n,e){var i="clippingParents"===n?function L4(t){var n=Fu(Ef(t)),i=["absolute","fixed"].indexOf(Io(t).position)>=0&&ya(t)?Bu(t):t;return Kl(i)?n.filter(function(r){return Kl(r)&&rR(r,i)&&"body"!==lo(r)}):[]}(t):[].concat(n),r=[].concat(i,[e]),o=r.reduce(function(s,l){var c=aR(t,l);return s.top=Es(c.top,s.top),s.right=Pf(c.right,s.right),s.bottom=Pf(c.bottom,s.bottom),s.left=Es(c.left,s.left),s},aR(t,r[0]));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(Kl(T)?T:T.contextElement||ss(t.elements.popper),o,l),L=Jl(t.elements.reference),W=oR({reference:L,element:k,strategy:"absolute",placement:r}),ae=D0(Object.assign({},k,W)),ee=u===Nu?ae:L,be={top:R.top-ee.top+w.top,bottom:ee.bottom-R.bottom+w.bottom,left:R.left-ee.left+w.left,right:ee.right-R.right+w.right},oe=t.modifiersData.offset;if(u===Nu&&oe){var _e=oe[r];Object.keys(be).forEach(function(ge){var De=[Fa,Na].indexOf(ge)>=0?1:-1,dt=[Qr,Na].indexOf(ge)>=0?"y":"x";be[ge]+=_e[dt]*De})}return be}const j4={name:"flip",enabled:!0,phase:"main",fn:function z4(t){var n=t.state,e=t.options,i=t.name;if(!n.modifiersData[i]._skip){for(var r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0===o||o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,v=e.altBoundary,m=e.flipVariations,_=void 0===m||m,w=e.allowedAutoPlacements,S=n.options.placement,k=so(S),R=l||(k!==S&&_?function G4(t){if(so(t)===w0)return[];var n=Af(t);return[KD(t),n,KD(n)]}(S):[Af(S)]),L=[S].concat(R).reduce(function(jt,Kt){return jt.concat(so(Kt)===w0?function H4(t,n){void 0===n&&(n={});var r=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?eR:l,u=ec(n.placement),d=u?s?JD:JD.filter(function(_){return ec(_)===u}):Vu,v=d.filter(function(_){return c.indexOf(_)>=0});0===v.length&&(v=d);var m=v.reduce(function(_,w){return _[w]=x0(t,{placement:w,boundary:r,rootBoundary:a,padding:o})[so(w)],_},{});return Object.keys(m).sort(function(_,w){return m[_]-m[w]})}(n,{placement:Kt,boundary:u,rootBoundary:d,padding:c,flipVariations:_,allowedAutoPlacements:w}):Kt)},[]),W=n.rects.reference,ae=n.rects.popper,ee=new Map,be=!0,oe=L[0],_e=0;_e<L.length;_e++){var ge=L[_e],De=so(ge),dt=ec(ge)===Ql,nt=[Qr,Na].indexOf(De)>=0,Dt=nt?"width":"height",Qe=x0(n,{placement:ge,boundary:u,rootBoundary:d,altBoundary:v,padding:c}),lt=nt?dt?Fa:Kr:dt?Na:Qr;W[Dt]>ae[Dt]&&(lt=Af(lt));var Et=Af(lt),Ct=[];if(a&&Ct.push(Qe[De]<=0),s&&Ct.push(Qe[lt]<=0,Qe[Et]<=0),Ct.every(function(jt){return jt})){oe=ge,be=!1;break}ee.set(ge,Ct)}if(be)for(var C=function(Kt){var ot=L.find(function(Ri){var gt=ee.get(Ri);if(gt)return gt.slice(0,Kt).every(function(Ii){return Ii})});if(ot)return oe=ot,"break"},yt=_?3:1;yt>0&&"break"!==C(yt);yt--);n.placement!==oe&&(n.modifiersData[i]._skip=!0,n.placement=oe,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Lu(t,n,e){return Es(t,Pf(n,e))}function k0(t){var n=Jl(t),e=t.offsetWidth,i=t.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:i}}const X4={name:"preventOverflow",enabled:!0,phase:"main",fn:function q4(t){var n=t.state,e=t.options,i=t.name,r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0!==o&&o,v=e.tether,m=void 0===v||v,_=e.tetherOffset,w=void 0===_?0:_,S=x0(n,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),k=so(n.placement),T=ec(n.placement),R=!T,L=R0(k),W=function $4(t){return"x"===t?"y":"x"}(L),ae=n.modifiersData.popperOffsets,ee=n.rects.reference,be=n.rects.popper,oe="function"==typeof w?w(Object.assign({},n.rects,{placement:n.placement})):w,_e="number"==typeof oe?{mainAxis:oe,altAxis:oe}:Object.assign({mainAxis:0,altAxis:0},oe),ge=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,De={x:0,y:0};if(ae){if(a){var dt,nt="y"===L?Qr:Kr,Dt="y"===L?Na:Fa,Qe="y"===L?"height":"width",lt=ae[L],Et=lt+S[nt],Ct=lt-S[Dt],Z=m?-be[Qe]/2:0,C=T===Ql?ee[Qe]:be[Qe],yt=T===Ql?-be[Qe]:-ee[Qe],xt=n.elements.arrow,jt=m&&xt?k0(xt):{width:0,height:0},Kt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ot=Kt[nt],Ri=Kt[Dt],gt=Lu(0,ee[Qe],jt[Qe]),Ii=R?ee[Qe]/2-Z-gt-ot-_e.mainAxis:C-gt-ot-_e.mainAxis,on=R?-ee[Qe]/2+Z+gt+Ri+_e.mainAxis:yt+gt+Ri+_e.mainAxis,Ui=n.elements.arrow&&Bu(n.elements.arrow),ci=null!=(dt=null==ge?void 0:ge[L])?dt:0,Qi=lt+on-ci,Gi=Lu(m?Pf(Et,lt+Ii-ci-(Ui?"y"===L?Ui.clientTop||0:Ui.clientLeft||0:0)):Et,lt,m?Es(Ct,Qi):Ct);ae[L]=Gi,De[L]=Gi-lt}if(s){var Ki,ft=ae[W],Vi="y"===W?"height":"width",vi=ft+S["x"===L?Qr:Kr],wi=ft-S["x"===L?Na:Fa],mi=-1!==[Qr,Kr].indexOf(k),ri=null!=(Ki=null==ge?void 0:ge[W])?Ki:0,Oi=mi?vi:ft-ee[Vi]-be[Vi]-ri+_e.altAxis,Ln=mi?ft+ee[Vi]+be[Vi]-ri-_e.altAxis:wi,Dn=m&&mi?function W4(t,n,e){var i=Lu(t,n,e);return i>e?e:i}(Oi,ft,Ln):Lu(m?Oi:vi,ft,m?Ln:wi);ae[W]=Dn,De[W]=Dn-ft}n.modifiersData[i]=De}},requiresIfExists:["offset"]},Z4={name:"arrow",enabled:!0,phase:"main",fn:function Q4(t){var n,e=t.state,i=t.name,r=t.options,a=e.elements.arrow,o=e.modifiersData.popperOffsets,s=so(e.placement),l=R0(s),u=[Kr,Fa].indexOf(s)>=0?"height":"width";if(a&&o){var d=function(n,e){return lR("number"!=typeof(n="function"==typeof n?n(Object.assign({},e.rects,{placement:e.placement})):n)?n:cR(n,Vu))}(r.padding,e),v=k0(a),m="y"===l?Qr:Kr,_="y"===l?Na:Fa,w=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],S=o[l]-e.rects.reference[l],k=Bu(a),T=k?"y"===l?k.clientHeight||0:k.clientWidth||0:0,ae=T/2-v[u]/2+(w/2-S/2),ee=Lu(d[m],ae,T-v[u]-d[_]);e.modifiersData[i]=((n={})[l]=ee,n.centerOffset=ee-ae,n)}},effect:function K4(t){var n=t.state,i=t.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=n.elements.popper.querySelector(r))||!rR(n.elements.popper,r)||(n.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function iL(t,n,e){void 0===e&&(e=!1);var i=ya(n),r=ya(n)&&function tL(t){var n=t.getBoundingClientRect(),e=Zl(n.width)/t.offsetWidth||1,i=Zl(n.height)/t.offsetHeight||1;return 1!==e||1!==i}(n),a=ss(n),o=Jl(t,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&(("body"!==lo(n)||T0(a))&&(s=function eL(t){return t!==Ba(t)&&ya(t)?function J4(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):C0(t)}(n)),ya(n)?((l=Jl(n,!0)).x+=n.clientLeft,l.y+=n.clientTop):a&&(l.x=S0(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function nL(t){var n=new Map,e=new Set,i=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(s){if(!e.has(s)){var l=n.get(s);l&&r(l)}}),i.push(a)}return t.forEach(function(a){n.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),i}function aL(t){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(t())})})),n}}var uR={placement:"bottom",modifiers:[],strategy:"absolute"};function dR(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return!n.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function sL(t){void 0===t&&(t={});var e=t.defaultModifiers,i=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?uR:r;return function(s,l,c){void 0===c&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},uR,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],v=!1,m={state:u,setOptions:function(k){var T="function"==typeof k?k(u.options):k;w(),u.options=Object.assign({},a,u.options,T),u.scrollParents={reference:Kl(s)?Fu(s):s.contextElement?Fu(s.contextElement):[],popper:Fu(l)};var R=function rL(t){var n=nL(t);return I4.reduce(function(e,i){return e.concat(n.filter(function(r){return r.phase===i}))},[])}(function oL(t){var n=t.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(n).map(function(e){return n[e]})}([].concat(i,u.options.modifiers)));return u.orderedModifiers=R.filter(function(ge){return ge.enabled}),function _(){u.orderedModifiers.forEach(function(S){var T=S.options,L=S.effect;if("function"==typeof L){var W=L({state:u,name:S.name,instance:m,options:void 0===T?{}:T});d.push(W||function(){})}})}(),m.update()},forceUpdate:function(){if(!v){var k=u.elements,T=k.reference,R=k.popper;if(dR(T,R)){u.rects={reference:iL(T,Bu(R),"fixed"===u.options.strategy),popper:k0(R)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(ge){return u.modifiersData[ge.name]=Object.assign({},ge.data)});for(var W=0;W<u.orderedModifiers.length;W++)if(!0!==u.reset){var ae=u.orderedModifiers[W],ee=ae.fn,be=ae.options;"function"==typeof ee&&(u=ee({state:u,options:void 0===be?{}:be,name:ae.name,instance:m})||u)}else u.reset=!1,W=-1}}},update:aL(function(){return new Promise(function(S){m.forceUpdate(),S(u)})}),destroy:function(){w(),v=!0}};if(!dR(s,l))return m;function w(){d.forEach(function(S){return S()}),d=[]}return m.setOptions(c).then(function(S){!v&&c.onFirstUpdate&&c.onFirstUpdate(S)}),m}}var If={passive:!0},hL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hR(t){var n,e=t.popper,i=t.popperRect,r=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,v=o.x,m=void 0===v?0:v,_=o.y,w=void 0===_?0:_,S="function"==typeof u?u({x:m,y:w}):{x:m,y:w};m=S.x,w=S.y;var k=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),R=Kr,L=Qr,W=window;if(c){var ae=Bu(e),ee="clientHeight",be="clientWidth";ae===Ba(e)&&"static"!==Io(ae=ss(e)).position&&"absolute"===s&&(ee="scrollHeight",be="scrollWidth"),ae=ae,(r===Qr||(r===Kr||r===Fa)&&a===Ou)&&(L=Na,w-=(d&&W.visualViewport?W.visualViewport.height:ae[ee])-i.height,w*=l?1:-1),r!==Kr&&(r!==Qr&&r!==Na||a!==Ou)||(R=Fa,m-=(d&&W.visualViewport?W.visualViewport.width:ae[be])-i.width,m*=l?1:-1)}var dt,ge=Object.assign({position:s},c&&hL),De=!0===u?function fL(t){var e=t.y,r=window.devicePixelRatio||1;return{x:Zl(t.x*r)/r||0,y:Zl(e*r)/r||0}}({x:m,y:w}):{x:m,y:w};return m=De.x,w=De.y,Object.assign({},ge,l?((dt={})[L]=T?"0":"",dt[R]=k?"0":"",dt.transform=(W.devicePixelRatio||1)<=1?"translate("+m+"px, "+w+"px)":"translate3d("+m+"px, "+w+"px, 0)",dt):((n={})[L]=T?w+"px":"",n[R]=k?m+"px":"",n.transform="",n))}var _L=sL({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function lL(t){var n=t.state,e=t.instance,i=t.options,r=i.scroll,a=void 0===r||r,o=i.resize,s=void 0===o||o,l=Ba(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",e.update,If)}),s&&l.addEventListener("resize",e.update,If),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",e.update,If)}),s&&l.removeEventListener("resize",e.update,If)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function uL(t){var n=t.state;n.modifiersData[t.name]=oR({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function pL(t){var n=t.state,e=t.options,i=e.gpuAcceleration,r=void 0===i||i,a=e.adaptive,o=void 0===a||a,s=e.roundOffsets,l=void 0===s||s,u={placement:so(n.placement),variation:ec(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:r,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,hR(Object.assign({},u,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:o,roundOffsets:l})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,hR(Object.assign({},u,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function vL(t){var n=t.state;Object.keys(n.elements).forEach(function(e){var i=n.styles[e]||{},r=n.attributes[e]||{},a=n.elements[e];!ya(a)||!lo(a)||(Object.assign(a.style,i),Object.keys(r).forEach(function(o){var s=r[o];!1===s?a.removeAttribute(o):a.setAttribute(o,!0===s?"":s)}))})},effect:function mL(t){var n=t.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(i){var r=n.elements[i],a=n.attributes[i]||{},s=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:e[i]).reduce(function(l,c){return l[c]="",l},{});!ya(r)||!lo(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}]});const CL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function wL(t){var n=t.state,i=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,o=eR.reduce(function(u,d){return u[d]=function yL(t,n,e){var i=so(t),r=[Kr,Qr].indexOf(i)>=0?-1:1,a="function"==typeof e?e(Object.assign({},n,{placement:t})):e,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[Kr,Fa].indexOf(i)>=0?{x:s,y:o}:{x:o,y:s}}(d,n.rects,a),u},{}),s=o[n.placement],c=s.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=s.x,n.modifiersData.popperOffsets.y+=c),n.modifiersData[i]=o}},M0=["*"],qL=["dialog"];function D8(t,n){1&t&&g(0),2&t&&et(y(2).title)}function R8(t,n){}function x8(t,n){if(1&t&&(f(0,"h3",3),x(1,D8,1,1,"ng-template",null,4,ht),x(3,R8,0,0,"ng-template",5),h()),2&t){const e=at(2),i=y();p(3),b("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}function k8(t,n){if(1&t&&(f(0,"span"),Do(1,2),Ot(2,"percent"),h()),2&t){const e=y();p(2),uh(hh(2,1,e.getValue()/e.max)),function lv(t){!function FE(t,n,e){if(Yc>0){const i=t.data[e];Cw(t,n,Array.isArray(i)?i:i.update,yo()-Yc-1,Xc)}Xc=0,Yc=0}(yi(),Me(),t+20)}(1)}}function co(t){return!isNaN(function Vf(t){return parseInt(`${t}`,10)}(t))}function Is(t){return null!=t}function tc(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let n=this;if(!document.documentElement.contains(n))return null;do{if(n.matches(t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null});const gR={animation:!0,transitionTimerDelayMs:5},z8=()=>{},{transitionTimerDelayMs:j8}=gR,Uu=new Map,Tr=(t,n,e,i)=>{let r=i.context||{};const a=Uu.get(n);if(a)switch(i.runningTransition){case"continue":return wa;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),Uu.delete(n)}const o=e(n,i.animation,r)||z8;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>o()),Nt(void 0).pipe(function H8(t){return n=>new Le(e=>n.subscribe({next:o=>t.run(()=>e.next(o)),error:o=>t.run(()=>e.error(o)),complete:()=>t.run(()=>e.complete())}))}(t));const s=new ye,l=new ye,c=s.pipe(function g4(...t){return n=>vu(n,Nt(...t))}(!0));Uu.set(n,{transition$:s,complete:()=>{l.next(),l.complete()},context:r});const u=function G8(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const d=Sr(n,"transitionend").pipe(Xn(c),tr(({target:m})=>m===n));qD(b0(u+j8).pipe(Xn(c)),d,l).pipe(Xn(c)).subscribe(()=>{Uu.delete(n),t.run(()=>{o(),s.next(),s.complete()})})}),s.asObservable()};let Hu=(()=>{class t{constructor(){this.animation=gR.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})(),CR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})(),TR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({}),t})(),xR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})(),kR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({}),t})();var Yn=(()=>{return(t=Yn||(Yn={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",Yn;var t})();const Nf=(t,n)=>!!n&&n.some(e=>e.contains(t)),MR=(t,n)=>!n||null!=function U8(t,n){return n&&void 0!==t.closest?t.closest(n):null}(t,n),l6="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function AR(t,n,e,i,r,a,o,s){e&&t.runOutsideAngular((t=>l6?()=>setTimeout(()=>t(),100):t)(()=>{const c=Sr(n,"keydown").pipe(Xn(r),tr(v=>v.which===Yn.Escape),dr(v=>v.preventDefault())),u=Sr(n,"mousedown").pipe(Ht(v=>{const m=v.target;return 2!==v.button&&!Nf(m,o)&&("inside"===e?Nf(m,a)&&MR(m,s):"outside"===e?!Nf(m,a):MR(m,s)||!Nf(m,a))}),Xn(r)),d=Sr(n,"mouseup").pipe(y0(u),tr(([v,m])=>m),QD(0),Xn(r));qD([c.pipe(Ht(v=>0)),d.pipe(Ht(v=>1))]).subscribe(v=>t.run(()=>i(v)))}))}const PR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ER(t){const n=Array.from(t.querySelectorAll(PR)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}const d6=/\s+/,h6=/  +/gi,f6=/^start/,p6=/^end/,g6=/-(top|left)$/,v6=/-(bottom|right)$/,b6=/^left/,_6=/^right/,y6=/^start/,w6=/^end/;function IR({placement:t,baseClass:n}){let e=Array.isArray(t)?t:t.split(d6),r=e.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==e.find(c=>-1!==c.search("^"+l))&&e.splice(r++,1,l)});const a=e.map(l=>function m6(t){return t.replace(f6,"left").replace(p6,"right").replace(g6,"-start").replace(v6,"-end")}(l));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:l}){const c=new RegExp(n+"-[a-z]+","gi"),u=l.elements.popper,d=l.placement;let v=u.className;v=v.replace(c,""),v+=` ${function C6(t,n){let[e,i]=n.split("-");const r=e.replace(b6,"start").replace(_6,"end");let a=[r];if(i){let o=i;("left"===e||"right"===e)&&(o=o.replace(y6,"top").replace(w6,"bottom")),a.push(`${r}-${o}`)}return t&&(a=a.map(o=>`${t}-${o}`)),a.join(" ")}(n,d)}`,v=v.trim().replace(h6," "),u.className=v}},j4,X4,Z4,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function VR(t){return t}function OR(){let t=null;return{createPopper(n){if(!t){let i=(n.updatePopperOptions||VR)(IR(n));t=_L(n.hostElement,n.targetElement,i)}},update(){t&&t.update()},setOptions(n){if(t){let i=(n.updatePopperOptions||VR)(IR(n));t.setOptions(i)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let HR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir,xT]]}),t})(),P6=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),GR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=We({type:t,selectors:[["",8,"navbar"]]}),t})(),B0=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(E(Ei))},t.\u0275dir=We({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,i){2&e&&Mt("disabled",i.disabled)},inputs:{disabled:"disabled"}}),t})(),Uf=(()=>{class t{constructor(e,i){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(E(Ci(()=>nc)),E(Ei))},t.\u0275dir=We({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,i,r){if(1&e&&Mn(r,B0,4),2&e){let a;xi(a=ki())&&(i.menuItems=a)}},hostVars:5,hostBindings:function(e,i){1&e&&A("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return i.dropdown.onKeyDown(a)})("keydown.Space",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&(Bi("data-popper",i.placement),Mt("dropdown-menu",!0)("show",i.dropdown.isOpen()))}}),t})(),Hf=(()=>{class t{constructor(e,i){this.dropdown=e,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(E(Ci(()=>nc)),E(Ei))},t.\u0275dir=We({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){2&e&&Bi("aria-expanded",i.dropdown.isOpen())}}),t})(),L0=(()=>{class t extends Hf{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(E(Ci(()=>nc)),E(Ei))},t.\u0275dir=We({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){1&e&&A("click",function(){return i.dropdown.toggle()})("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&Bi("aria-expanded",i.dropdown.isOpen())},features:[qi([{provide:Hf,useExisting:Ci(()=>t)}]),Pi]}),t})(),nc=(()=>{class t{constructor(e,i,r,a,o,s,l){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=o,this._renderer=s,this._closed$=new ye,this._bodyContainer=null,this._positioning=OR(),this._open=!1,this.openChange=new ut,this.placement=i.placement,this.container=i.container,this.autoClose=i.autoClose,this.display=l?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(Zn(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:i,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(i,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(Zn(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){AR(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const i=e.which,r=this._getMenuElements();let a=-1,o=null;const s=this._isEventFromToggle(e);if(!s&&r.length&&r.forEach((l,c)=>{l.contains(e.target)&&(o=l),l===this._document.activeElement&&(a=c)}),i!==Yn.Space&&i!==Yn.Enter){if(i!==Yn.Tab){if(s||o){if(this.open(),r.length){switch(i){case Yn.ArrowDown:a=Math.min(a+1,r.length-1);break;case Yn.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case Yn.Home:a=0;break;case Yn.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const l=this._menu.nativeElement.querySelectorAll(PR);e.shiftKey&&e.target===l[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===l[l.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else Sr(e.target,"focusout").pipe(Zn(1)).subscribe(({relatedTarget:l})=>{this._elementRef.nativeElement.contains(l)||this.close()})}}else o&&(!0===this.autoClose||"inside"===this.autoClose)&&Sr(o,"click").pipe(Zn(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(i=>!i.disabled).map(i=>i.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const i=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||i.createElement("div");i.setStyle(a,"position","absolute"),i.setStyle(r,"position","static"),i.setStyle(a,"z-index","1050"),i.appendChild(a,r),i.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,i){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(i&&this._renderer.removeClass(r,i),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const i=this._menu;if(i){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:o}=i;"static"===this.display?(i.placement=null,r.setAttribute(o,"data-bs-popper","static")):(i.placement=e,r.removeAttribute(o,"data-bs-popper"));const s=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,s);const l=this._bodyContainer;l&&(r.removeClass(l,"dropup"),r.removeClass(l,"dropdown"),r.addClass(l,s))}}}return t.\u0275fac=function(e){return new(e||t)(E(Wr),E(P6),E(Vn),E(Xi),E(Ei),E(da),E(GR,8))},t.\u0275dir=We({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,i,r){if(1&e&&(Mn(r,Uf,5),Mn(r,Hf,5)),2&e){let a;xi(a=ki())&&(i._menu=a.first),xi(a=ki())&&(i._anchor=a.first)}},hostVars:2,hostBindings:function(e,i){2&e&&Mt("show",i.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[Gn]}),t})(),zR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({}),t})();class Fs{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}class E6{constructor(n,e,i,r,a,o){this._type=n,this._injector=e,this._viewContainerRef=i,this._renderer=r,this._ngZone=a,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(n,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(n,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(Zn(1),Rn(()=>Tr(this._ngZone,r,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(n=!1){return this._windowRef?Tr(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:n,runningTransition:"stop"}).pipe(dr(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Nt(void 0)}_getContentRef(n,e){if(n){if(n instanceof ln){const i=n.createEmbeddedView(e);return this._applicationRef.attachView(i),new Fs([i.rootNodes],i)}return new Fs([[this._renderer.createText(`${n}`)]])}return new Fs([])}}let I6=(()=>{class t{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Zn(1)).subscribe(()=>{Tr(this._zone,this._el.nativeElement,(e,i)=>{i&&tc(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Tr(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(E(Ei),E(Xi))},t.\u0275cmp=bt({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(Xo("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Mt("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})();class jR{close(n){}dismiss(n){}}class V6{constructor(n,e,i,r){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new ye,this._dismissed=new ye,this._hidden=new ye,n.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,o)=>{this._resolve=a,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Xn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Xn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function L8(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Nt(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Mf(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var $u=(()=>{return(t=$u||($u={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",$u;var t})();let O6=(()=>{class t{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new ye,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ut,this.shown=new ye,this.hidden=new ye}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Zn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=Mf(Tr(this._zone,e,()=>e.classList.remove("show"),i),Tr(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const e={animation:this.animation,runningTransition:"continue"};Mf(Tr(this._zone,this._elRef.nativeElement,(a,o)=>{o&&tc(a),a.classList.add("show")},e),Tr(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Sr(e,"keydown").pipe(Xn(this._closed$),tr(r=>r.which===Yn.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss($u.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Sr(this._dialogEl.nativeElement,"mousedown").pipe(Xn(this._closed$),dr(()=>i=!1),Mo(()=>Sr(e,"mouseup").pipe(Xn(this._closed$),Zn(1))),tr(({target:r})=>e===r)).subscribe(()=>{i=!0}),Sr(e,"click").pipe(Xn(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss($u.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=ER(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Tr(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(E(Vn),E(Ei),E(Xi))},t.\u0275cmp=bt({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&Pa(qL,7),2&e){let r;xi(r=ki())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(Bi("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Xo("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Mt("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:M0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(eh(),f(0,"div",0,1)(2,"div",2),th(3),h()()),2&e&&Xo("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),N6=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:a,paddingRight:o}=r;if(e>0){const s=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${s+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=o),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(Ue(Vn))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),F6=(()=>{class t{constructor(e,i,r,a,o,s){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=a,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new ye,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new ut,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((t,n,e,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=Sr(n,"focusin").pipe(Xn(e),Ht(a=>a.target));Sr(n,"keydown").pipe(Xn(e),tr(a=>a.which===Yn.Tab),y0(r)).subscribe(([a,o])=>{const[s,l]=ER(n);(o===s||o===n)&&a.shiftKey&&(l.focus(),a.preventDefault()),o===l&&!a.shiftKey&&(s.focus(),a.preventDefault())}),i&&Sr(n,"click").pipe(Xn(e),y0(r),Ht(a=>a[1])).subscribe(a=>a.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(e,i,r,a){const o=a.container instanceof HTMLElement?a.container:Is(a.container)?this._document.querySelector(a.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!o)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const u=new jR,d=this._getContentRef(e,a.injector||i,r,u,a);let v=!1!==a.backdrop?this._attachBackdrop(e,o):void 0,m=this._attachWindowComponent(e,o,d),_=new V6(m,d,v,a.beforeDismiss);return this._registerModalRef(_),this._registerWindowCmpt(m),_.result.then(l,l),_.result.then(c,c),u.close=w=>{_.close(w)},u.dismiss=w=>{_.dismiss(w)},this._applyWindowOptions(m.instance,a),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),v&&v.instance&&(this._applyBackdropOptions(v.instance,a),v.changeDetectorRef.detectChanges()),m.changeDetectorRef.detectChanges(),_}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,i){let a=e.resolveComponentFactory(I6).create(this._injector);return this._applicationRef.attachView(a.hostView),i.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,i,r){let o=e.resolveComponentFactory(O6).create(this._injector,r.nodes);return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{Is(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{Is(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,a,o){return r?r instanceof ln?this._createFromTemplateRef(r,a):function pR(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,i,r,a,o):new Fs([])}_createFromTemplateRef(e,i){const a=e.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(a),new Fs([a.rootNodes],a)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new Fs([[i]])}_createFromComponent(e,i,r,a,o){const s=e.resolveComponentFactory(r),l=kn.create({providers:[{provide:jR,useValue:a}],parent:i}),c=s.create(l),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new Fs([[u]],c.hostView,c)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Ue(ws),Ue(kn),Ue(Vn),Ue(N6),Ue(fv),Ue(Xi))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),B6=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ue(Hu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ho=(()=>{class t{constructor(e,i,r,a){this._moduleCFR=e,this._injector=i,this._modalStack=r,this._config=a}open(e,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Ue(ys),Ue(kn),Ue(F6),Ue(B6))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({providers:[ho]}),t})(),YR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})(),r2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})();class j6{constructor(n,e){this.open=n,this.close=e,e||(this.close=n)}isManual(){return"manual"===this.open||"manual"===this.close}}const $6={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},a2=t=>t>0?QD(t):n=>n;let Q6=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ue(Hu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),K6=0;function Z6(t){return t.modifiers.push(CL,{name:"offset",options:{offset:()=>[0,12]}}),t}let J6=(()=>{class t{isTitleTemplate(){return this.title instanceof ln}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=bt({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,i){2&e&&(Yo("id",i.id),Xo("popover"+(i.popoverClass?" "+i.popoverClass:"")),Mt("fade",i.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:M0,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(eh(),D(0,"div",0),x(1,x8,4,2,"h3",1),f(2,"div",2),th(3),h()),2&e&&(p(1),b("ngIf",i.title))},directives:[hi,Fl],encapsulation:2,changeDetection:0}),t})(),Zr=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u){this._elementRef=e,this._renderer=i,this._ngZone=s,this._document=l,this._changeDetector=c,this.shown=new ut,this.hidden=new ut,this._ngbPopoverWindowId="ngb-popover-"+K6++,this._windowRef=null,this._positioning=OR(),this.animation=o.animation,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new E6(J6,r,a,i,this._ngZone,u),this._zoneSubscription=s.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=i,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(Zn(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:Z6})}),AR(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function Y6(t,n,e,i,r,a,o=0,s=0){const l=function W6(t,n=$6){const e=(t||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let o=n[a[0]]||a;return new j6(o[0],o[1])}),r=i.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(e);if(1===l.length&&l[0].isManual())return()=>{};const c=function q6(t,n,e,i){return new Le(r=>{const a=[],o=()=>r.next(!0),s=()=>r.next(!1),l=()=>r.next(!i());return e.forEach(c=>{c.open===c.close?a.push(t.listen(n,c.open,l)):a.push(t.listen(n,c.open,o),t.listen(n,c.close,s))}),()=>{a.forEach(c=>c())}})}(t,n,l,i).pipe(function X6(t,n,e){return i=>{let r=null;const a=i.pipe(Ht(l=>({open:l})),tr(l=>{const c=e();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),bb());return mb(a.pipe(tr(l=>l.open),a2(t)),a.pipe(tr(l=>!l.open),a2(n))).pipe(tr(l=>l===r&&(r=null,l.open!==e())),Ht(l=>l.open))}}(o,s,i)).subscribe(u=>u?r():a());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(Ei),E(da),E(kn),E(ha),E(Q6),E(Xi),E(Vn),E(Wr),E(ws))},t.\u0275dir=We({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Gn]}),t})(),o2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})(),eU=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gf=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!co(e)||e<=0?100:e}get max(){return this._max}getValue(){return function fR(t,n,e=0){return Math.max(Math.min(t,n),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(E(eU))},t.\u0275cmp=bt({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,i){2&e&&$c("height",i.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:M0,decls:3,vars:11,consts:function(){let n;return n=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],n]},template:function(e,i){1&e&&(eh(),f(0,"div",0),x(1,k8,3,3,"span",1),th(2),h()),2&e&&(function ew(t,n,e,i,r,a,o,s,l){Aa(Gr,to,Cl(Me(),t,n,e,i,r,a,o,s,l),!0)}("progress-bar",i.type?" bg-"+i.type:"","",i.textType?" text-"+i.textType:"","\n    ",i.animated?" progress-bar-animated":"","",i.striped?" progress-bar-striped":"",""),$c("width",i.getPercentValue(),"%"),Bi("aria-valuenow",i.getValue())("aria-valuemax",i.max),p(1),b("ngIf",i.showValue))},directives:[hi],pipes:[cS],encapsulation:2,changeDetection:0}),t})(),s2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})(),l2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})(),c2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})(),u2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})(),d2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({}),t})();new ti("live announcer delay",{providedIn:"root",factory:function nU(){return 100}});let h2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[[Ir]]}),t})();const rU=[wR,CR,TR,xR,kR,HR,zR,$R,YR,r2,o2,s2,l2,c2,u2,d2,h2];let aU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t}),t.\u0275inj=Ai({imports:[rU,wR,CR,TR,xR,kR,HR,zR,$R,YR,r2,o2,s2,l2,c2,u2,d2,h2]}),t})();function oU(t,n){if(1&t){const e=de();f(0,"div",1),A("click",function(){N(e);const r=y();return r.switchView(r.navigationEnum.incubator)}),f(1,"button",2),g(2,"Incubator"),h(),D(3,"hr"),h()}if(2&t){const e=y();p(1),b("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}const z0=function(t,n){return{active:t,tutorialActive:n}};let f2=(()=>{class t{constructor(e,i,r,a){this.componentCommunicationService=e,this.lookupService=i,this.globalService=r,this.gameLoopService=a,this.viewChanged=new ut,this.navigationEnum=Tt,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1,this.tutorial9Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var i,r;this.tutorial3Active=!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||6!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(i=this.globalService.globalVar.animals.find(a=>a.type===H.Monkey))||void 0===i?void 0:i.isAvailable)),this.tutorial9Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||9!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(r=this.globalService.globalVar.animals.find(a=>a.type===H.Hare))||void 0===r?void 0:r.isAvailable)),this.globalService.globalVar.tutorials.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.selectedNavigation===Tt.shop&&this.componentCommunicationService.setShopView(Tt.shop,_a.regular),this.selectedNavigation===Tt.barn&&this.componentCommunicationService.setBarnView(Tt.barn,0),this.selectedNavigation===Tt.animals&&this.componentCommunicationService.setAnimalView(Tt.animals,new Pt),this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack")}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(E(mn),E(Di),E(It),E(Bn))},t.\u0275cmp=bt({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:29,vars:17,consts:[[1,"navigation"],[1,"navSpace","clickableText",3,"click"],[1,"buttonAsText",3,"ngClass"],["class","navSpace clickableText",3,"click",4,"ngIf"],[1,"navSpace","clickableText"],[1,"buttonAsText",3,"ngClass","click"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1),A("click",function(){return i.switchView(i.navigationEnum.barn)}),f(2,"button",2),g(3,"Barns"),h()(),D(4,"hr"),f(5,"div",1),A("click",function(){return i.switchView(i.navigationEnum.raceselection)}),f(6,"button",2),g(7,"Races"),h()(),D(8,"hr"),f(9,"div",1),A("click",function(){return i.switchView(i.navigationEnum.animals)}),f(10,"button",2),g(11,"Animals"),h()(),D(12,"hr"),f(13,"div",1),A("click",function(){return i.switchView(i.navigationEnum.relayTeams)}),f(14,"button",2),g(15,"Relay Teams"),h()(),D(16,"hr"),f(17,"div",1),A("click",function(){return i.switchView(i.navigationEnum.shop)}),f(18,"button",2),g(19,"Shop"),h()(),D(20,"hr"),x(21,oU,4,1,"div",3),f(22,"div",4)(23,"button",5),A("click",function(){return i.switchView(i.navigationEnum.resources)}),g(24,"Resources"),h()(),D(25,"hr"),f(26,"div",1),A("click",function(){return i.switchView(i.navigationEnum.settings)}),f(27,"button",2),g(28,"Settings"),h()()()),2&e&&(p(2),b("ngClass",Qo(8,z0,i.selectedNavigation===i.navigationEnum.barn,i.tutorial6Active)),p(4),b("ngClass",Qo(11,z0,i.selectedNavigation===i.navigationEnum.raceselection,i.tutorial3Active)),p(4),b("ngClass",Qo(14,z0,i.selectedNavigation===i.navigationEnum.animals,i.tutorial9Active)),p(4),b("ngClass",i.selectedNavigation===i.navigationEnum.relayTeams?"active":""),p(4),b("ngClass",i.selectedNavigation===i.navigationEnum.shop?"active":""),p(3),b("ngIf",i.incubatorAvailable),p(2),b("ngClass",i.selectedNavigation===i.navigationEnum.resources?"active":""),p(4),b("ngClass",i.selectedNavigation===i.navigationEnum.settings?"active":""))},directives:[rn,hi],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem;background-color:var(--background-secondary);color:var(--foreground-default)}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function sU(t,n){if(1&t&&D(0,"div",15),2&t){const e=y();b("innerHTML",e.getSanitizedHtml(e.latestVersionChanges),zt)}}function lU(t,n){if(1&t&&(f(0,"div")(1,"div",24)(2,"span",25),g(3),Ot(4,"number"),h(),f(5,"span"),g(6),h()(),D(7,"br")(8,"div",26),f(9,"span"),D(10,"hr"),h()()),2&t){const e=n.$implicit,i=n.index,r=y(3);p(3),K("Version ",oi(4,3,r.allVersions[i],"1.2-2"),""),p(3),K(" ",r.versionControlService.getDateForVersion(r.allVersions[i]),""),p(2),b("innerHTML",r.getSanitizedHtml(e),zt)}}function cU(t,n){if(1&t&&(f(0,"div")(1,"div",21)(2,"div",22),x(3,lU,11,6,"div",23),h()()()),2&t){const e=y(2);p(3),b("ngForOf",e.changeLog)}}function uU(t,n){if(1&t){const e=de();f(0,"div",16)(1,"div",17)(2,"h4",18),g(3,"Change Log"),h(),f(4,"button",19),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),x(6,cU,4,1,"div",20),h()}if(2&t){const e=y();p(6),b("ngIf",e.changeLog.length>0)}}let dU=(()=>{class t{constructor(e,i,r,a,o,s,l){this.lookupService=e,this.gameLoopService=i,this.globalService=r,this.componentCommunicationService=a,this.versionControlService=o,this.modalService=s,this.sanitizer=l}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.latestVersionChanges=this.versionControlService.getLatestChanges(),this.changeLog=this.versionControlService.getAllChanges(),this.allVersions=this.versionControlService.gameVersions,this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}getSanitizedHtml(e){return this.sanitizer.sanitize(pi.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}changeView(e){this.componentCommunicationService.setNewView(e)}openChangeLog(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(E(Di),E(Bn),E(It),E(mn),E(m0),E(ho),E(Jo))},t.\u0275cmp=bt({type:t,selectors:[["app-header"]],decls:26,vars:8,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"version","versionMargin","clickableText",3,"ngbPopover","click"],[1,"coins","keyword"],[1,"medals","keyword"],[1,"menu","keyword"],["ngbDropdown","",1,"d-inline-block","customDropdown"],["menuDropdown","ngbDropdown"],["type","button","id","menuDropdown","ngbDropdownToggle","",1,"btn","dropdown"],["ngbDropdownMenu","","aria-labelledby","menuDropdown",1,"dropdownItems"],[3,"viewChanged","click"],["latestVersionChangesContent",""],["content",""],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],[1,"flexDiv"],[1,"s4Heading"],[3,"innerHTML"]],template:function(e,i){if(1&e){const r=de();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),g(4," Cultura "),h(),f(5,"span",4),A("click",function(){N(r);const o=at(25);return i.openChangeLog(o)}),g(6),h()(),f(7,"div",5)(8,"span"),g(9),Ot(10,"number"),h()(),f(11,"div",6)(12,"span"),g(13),Ot(14,"number"),h()(),f(15,"div",7)(16,"div",8,9)(18,"button",10),g(19,"Menu"),h(),f(20,"div",11)(21,"app-navigation",12),A("viewChanged",function(o){return i.changeView(o)})("click",function(){return N(r),at(17).close()}),h()()()()(),x(22,sU,1,1,"ng-template",null,13,ht),x(24,uU,7,1,"ng-template",null,14,ht),h()}if(2&e){const r=at(23);p(5),b("ngbPopover",r),p(1),K(" v",i.version," "),p(3),K("Coins: ",hh(10,4,i.coinCount),""),p(4),K("Medals: ",hh(14,6,i.medalCount),"")}},directives:[Zr,nc,L0,Uf,f2,hi,cn],pipes:[no],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}.versionMargin[_ngcontent-%COMP%]{margin-left:.5rem}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}.dropdownItems[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--foreground-default)}.menu[_ngcontent-%COMP%]{display:none}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre-line}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.flexDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 15% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name coins menu ." ". name medals menu ."}.menu[_ngcontent-%COMP%]{display:block;grid-area:menu;justify-self:stretch}.customDropdown[_ngcontent-%COMP%]{width:100%;text-align:center}}']}),t})();function hU(t,n){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h(),D(3,"br"),f(4,"span"),g(5),h()()),2&t){const e=y(2);b("ngClass",e.colorConditional),p(2),et(e.associatedAnimalName),p(3),et(e.associatedAnimalType)}}function fU(t,n){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h()()),2&t){const e=y(2);b("ngClass",e.colorConditional),p(2),et(e.associatedAnimalType)}}function pU(t,n){1&t&&(f(0,"div")(1,"em"),g(2,"Auto Breed "),f(3,"strong"),g(4,"ON"),h()()())}function gU(t,n){1&t&&(f(0,"div")(1,"em"),g(2,"Ready to Breed"),h()())}const vU=function(t){return{floatingProgressTextAnimation:t}};function mU(t,n){if(1&t&&(f(0,"div",4)(1,"span"),g(2),h(),x(3,hU,6,3,"h6",5),x(4,fU,3,2,"h6",5),D(5,"br"),f(6,"p"),D(7,"ngb-progressbar",6),h(),f(8,"div",7),g(9),h(),D(10,"br"),x(11,pU,5,0,"div",8),x(12,gU,3,0,"div",8),h()),2&t){const e=y();p(2),et(e.barnName),p(1),b("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),b("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(3),b("value",e.trainingProgressBarPercent),p(1),b("ngClass",hn(8,vU,e.showTrainingAnimation)),p(1),K(" ",e.trainingCompleteText," "),p(2),b("ngIf",e.autoBreedActive),p(1),b("ngIf",!e.autoBreedActive&&e.readyToBreed)}}function bU(t,n){1&t&&(f(0,"h6",10)(1,"span"),g(2,"Unassigned"),h(),D(3,"br"),f(4,"em"),g(5,"Click to assign animal"),h()())}function _U(t,n){1&t&&(f(0,"h6",11)(1,"span"),g(2,"Locked"),h(),D(3,"br"),f(4,"em"),g(5,"Click to view status"),h()())}let yU=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.utilityService=a,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.selectedBarn=new ut}ngOnInit(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var i=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=i?(this.isOccupied=!0,this.associatedAnimalName=i.name,this.associatedAnimalType=H[i.type],this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()}):this.isOccupied=!1,this.isLocked=e.isLocked}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.isLocked||(this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.barnNumber);if(null!=a){if(null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax&&this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10,this.autoBreedActive=a.autoBreedActive,this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}))}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Bn),E(Di),E(Fn))},t.\u0275cmp=bt({type:t,selectors:[["app-barn"]],hostBindings:function(e,i){1&e&&A("click",function(){return i.onClick()})},inputs:{barnNumber:"barnNumber"},outputs:{selectedBarn:"selectedBarn"},decls:4,vars:3,consts:[[1,"barn","clickableText"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],["class","keyword",3,"ngClass",4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[4,"ngIf"],[1,"keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,mU,13,10,"div",1),x(2,bU,6,0,"h6",2),x(3,_U,6,0,"h6",3),h()),2&e&&(p(1),b("ngIf",i.isOccupied),p(1),b("ngIf",!i.isOccupied&&!i.isLocked),p(1),b("ngIf",i.isLocked))},directives:[hi,rn,Gf],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:45%;margin:auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}@media (max-width: 800px){.barn[_ngcontent-%COMP%]{width:75%}}"]}),t})(),wU=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=bt({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName","keyword"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,i){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h(),f(5,"p",3),g(6),h()()),2&e&&(p(2),et(i.trainingOption.trainingName),p(2),et(i.trainingOption.getStatGainDescription()),p(2),Wi("",i.trainingOption.getFacilitySize()," - ",i.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const CU=function(t){return{activeTrainingOption:t}};function SU(t,n){if(1&t){const e=de();f(0,"td",4)(1,"div",5),A("click",function(){const a=N(e).$implicit;return y(2).selectTrainingOption(a)}),D(2,"app-training-option",6),h()()}if(2&t){const e=n.$implicit;p(1),b("ngClass",hn(2,CU,e.isSelected)),p(1),b("trainingOption",e)}}function TU(t,n){if(1&t&&(f(0,"tr"),x(1,SU,3,4,"td",3),h()),2&t){const e=n.$implicit;p(1),b("ngForOf",e)}}let DU=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new ut}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTrainingOptions.length;i++)this.trainingsCells.push(this.availableTrainingOptions[i-1]),i%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(E(It))},t.\u0275cmp=bt({type:t,selectors:[["app-training-list"]],hostBindings:function(e,i){1&e&&A("resize",function(a){return i.onResize(a)},!1,Co)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[Gn],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,TU,2,1,"tr",2),h()()()),2&e&&(p(3),b("ngForOf",i.trainingsRows))},directives:[cn,rn,wU],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function RU(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y(2);p(1),et(e.selectedAnimal.name)}}function xU(t,n){if(1&t&&(f(0,"div"),g(1),h()),2&t){const e=y(2);p(1),K(" Breed Level ",e.breedLevel," ")}}function kU(t,n){if(1&t&&(f(0,"div"),g(1),h()),2&t){const e=y(2);p(1),K(" ",e.getTraitDetails()," ")}}function MU(t,n){if(1&t&&(f(0,"h6",3),x(1,RU,2,1,"span",2),D(2,"br"),f(3,"span"),g(4),h(),x(5,xU,2,1,"div",2),x(6,kU,2,1,"div",2),h()),2&t){const e=y();p(1),b("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),et(e.selectedAnimal.getAnimalType()),p(1),b("ngIf",e.isAnimalDetailView),p(1),b("ngIf",e.isIncubatorDetailView&&void 0!==e.trait)}}function AU(t,n){if(1&t&&(f(0,"div"),g(1),h()),2&t){const e=y(2);p(1),K(" Breed Level ",e.breedLevel," ")}}function PU(t,n){if(1&t&&(f(0,"div"),g(1),h()),2&t){const e=y(2);p(1),K(" ",e.getTraitDetails()," ")}}function EU(t,n){if(1&t&&(f(0,"h6",3)(1,"span"),g(2),h(),x(3,AU,2,1,"div",2),x(4,PU,2,1,"div",2),h()),2&t){const e=y();p(2),et(e.selectedAnimal.getAnimalType()),p(1),b("ngIf",e.isAnimalDetailView),p(1),b("ngIf",e.isIncubatorDetailView&&void 0!==e.trait)}}function IU(t,n){if(1&t&&(f(0,"div"),D(1,"br")(2,"br"),f(3,"h6",3)(4,"em"),g(5),h()()()),2&t){const e=y();p(5),Wi("",e.trainingTrackRewardsRemaining," / ",e.trainingTrackTotalRewards," rewards remaining")}}let VU=(()=>{class t{constructor(){this.isTrainingTrackView=!1,this.isAnimalDetailView=!1,this.isIncubatorDetailView=!1,this.trainingTrackRewardsRemaining=0,this.trainingTrackTotalRewards=0,this.breedLevel=0}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.isTrainingTrackView&&(this.trainingTrackRewardsRemaining=this.selectedAnimal.allTrainingTracks.getTotalRewardsRemaining(),this.trainingTrackTotalRewards=this.selectedAnimal.allTrainingTracks.getTotalRewardCount()),this.breedLevel=this.selectedAnimal.breedLevel,this.trait=this.selectedAnimal.trait}getTraitDetails(){return void 0!==this.trait?this.trait.traitName+" ("+this.trait.researchLevel+"%)":""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=bt({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal",isTrainingTrackView:"isTrainingTrackView",isAnimalDetailView:"isAnimalDetailView",isIncubatorDetailView:"isIncubatorDetailView"},decls:8,vars:5,consts:[[1,"keyword","animal",3,"ngClass"],["class","keyword",4,"ngIf"],[4,"ngIf"],[1,"keyword"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,MU,7,4,"h6",1),x(2,EU,5,3,"h6",1),D(3,"br")(4,"br"),f(5,"span"),g(6),h(),x(7,IU,6,2,"div",2),h()),2&e&&(b("ngClass",i.colorConditional),p(1),b("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),b("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(4),et(i.selectedAnimal.getRaceCourseType()),p(1),b("ngIf",i.isTrainingTrackView))},directives:[rn,hi],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function OU(t,n){if(1&t){const e=de();f(0,"td")(1,"div",3),A("click",function(){const a=N(e).$implicit;return y(2).selectAnimal(a)}),D(2,"app-animal",4),h()()}if(2&t){const e=n.$implicit,i=y(2);p(2),b("selectedAnimal",e)("isTrainingTrackView",i.isTrainingTrackView)("isIncubatorDetailView",i.isIncubatorDetailView)("isAnimalDetailView",i.isAnimalDetailView)}}function NU(t,n){if(1&t&&(f(0,"tr"),x(1,OU,3,4,"td",2),h()),2&t){const e=n.$implicit;p(1),b("ngForOf",e)}}let zf=(()=>{class t{constructor(e){this.globalService=e,this.isTrainingTrackView=!1,this.isAnimalDetailView=!1,this.isIncubatorDetailView=!1,this.selectedAnimal=new ut}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableAnimals.length;i++)this.animalCells.push(this.availableAnimals[i-1]),i%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(E(It))},t.\u0275cmp=bt({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,i){1&e&&A("resize",function(a){return i.onResize(a)},!1,Co)},inputs:{availableAnimals:"availableAnimals",isTrainingTrackView:"isTrainingTrackView",isAnimalDetailView:"isAnimalDetailView",isIncubatorDetailView:"isIncubatorDetailView"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal","isTrainingTrackView","isIncubatorDetailView","isAnimalDetailView"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,NU,2,1,"tr",2),h()()()),2&e&&(p(3),b("ngForOf",i.animalRows))},directives:[cn,VU],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const FU=["specializationModal"];function BU(t,n){if(1&t){const e=de();f(0,"div")(1,"span",38),A("click",function(){N(e);const r=y(2),a=at(16);return r.openBarnUpgradeModal(a)}),g(2),h(),D(3,"br")(4,"br"),f(5,"span",39)(6,"button",40),A("click",function(){return N(e),y(2).upgradeBarn()}),g(7),h()()()}if(2&t){const e=y(2),i=at(4),r=at(6);p(1),b("ngbPopover",i),p(1),K("Barn Level ",e.barn.barnUpgrades.barnLevel,""),p(3),b("ngbPopover",r),p(1),b("disabled",!e.canUpgrade),p(1),et(e.upgradeText)}}function LU(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y(3);p(1),et(e.associatedAnimal.name)}}function UU(t,n){if(1&t){const e=de();f(0,"button",41),A("click",function(){return N(e),y(2).goToAnimal()}),x(1,LU,2,1,"span",13),D(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=y(2);b("ngClass",e.colorConditional),p(1),b("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(3),et(e.associatedAnimal.getAnimalType())}}function HU(t,n){if(1&t){const e=de();f(0,"button",42),A("click",function(){return N(e),y(2).goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=y(2);b("ngClass",e.colorConditional),p(2),et(e.associatedAnimal.getAnimalType())}}function GU(t,n){if(1&t){const e=de();f(0,"span",39)(1,"button",43),A("click",function(){return N(e),y(2).upgradeBarnSize()}),g(2,"Build"),h()()}if(2&t){const e=y(2);b("ngbPopover",at(8)),p(1),b("disabled",!e.canBuild)}}function zU(t,n){if(1&t&&(f(0,"div",39)(1,"span",44),g(2),h(),D(3,"br"),f(4,"span")(5,"em"),g(6),Ot(7,"number"),h()()()),2&t){const e=y(2);b("ngbPopover",at(10)),p(2),K("",e.existingTraining.trainingName," "),p(4),K("(",oi(7,3,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function jU(t,n){1&t&&(f(0,"div",39)(1,"span"),g(2,"No Training Assigned"),h()()),2&t&&(y(2),b("ngbPopover",at(12)))}function $U(t,n){if(1&t){const e=de();f(0,"div")(1,"span")(2,"button",12),A("click",function(){return N(e),y(2).goToCoaching()}),g(3,"Coach"),h()()()}}function WU(t,n){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"p",45),D(3,"ngb-progressbar",46),f(4,"span",47),g(5),Ot(6,"number"),h()(),D(7,"br"),h()),2&t){const e=y(2);p(3),b("value",e.trainingProgressBarPercent),p(2),K("",oi(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function qU(t,n){if(1&t){const e=de();f(0,"app-training-list",48),A("selectedTrainingOption",function(r){return N(e),y(2).selectNewTraining(r)}),h()}2&t&&b("availableTrainingOptions",y(2).availableTrainings)}function XU(t,n){1&t&&(f(0,"div",49),g(1," This animal is currently busy and cannot train. "),h())}const YU=function(t){return{sizeSpacing:t}};function QU(t,n){if(1&t){const e=de();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"button",12),A("click",function(){return N(e),y().unassignAnimal()}),g(5,"Unassign"),h(),D(6,"br")(7,"br"),x(8,BU,8,5,"div",13),h(),f(9,"div",14)(10,"span"),g(11),h(),D(12,"br"),x(13,UU,5,3,"button",15),x(14,HU,3,2,"button",16),f(15,"div")(16,"span",17),g(17),h(),x(18,GU,3,2,"span",18),h(),D(19,"hr"),x(20,zU,8,6,"div",18),x(21,jU,3,1,"div",18),h(),f(22,"div",19)(23,"button",12),A("click",function(){return N(e),y().returnToBarnView()}),g(24,"Back"),h(),D(25,"br")(26,"br")(27,"br")(28,"br"),x(29,$U,4,0,"div",13),h()(),D(30,"hr"),x(31,WU,8,5,"div",13),D(32,"br"),f(33,"div",20)(34,"span",21),A("click",function(){return N(e),y().resetFilters()}),g(35,"Change Training"),h(),D(36,"br"),f(37,"span",22)(38,"em"),g(39,"Click an option below to start training."),h()()(),D(40,"br"),f(41,"div",23)(42,"div",24)(43,"button",25),A("click",function(){return N(e),y().toggleFacilityFilter("Small")}),g(44,"Small "),h(),f(45,"button",26),A("click",function(){return N(e),y().toggleFacilityFilter("Medium")}),g(46,"Medium "),h(),f(47,"button",27),A("click",function(){return N(e),y().toggleFacilityFilter("Large")}),g(48,"Large "),h()(),f(49,"button",28)(50,"span",12),A("click",function(){return N(e),y().resetFilters()}),g(51,"Reset Filters"),h()(),f(52,"div",29)(53,"button",30),A("click",function(){return N(e),y().toggleStatFilter("Speed")}),g(54,"SPD "),h(),f(55,"button",31),A("click",function(){return N(e),y().toggleStatFilter("Acceleration")}),g(56,"ACC "),h(),f(57,"button",32),A("click",function(){return N(e),y().toggleStatFilter("Endurance")}),g(58,"END "),h(),f(59,"button",33),A("click",function(){return N(e),y().toggleStatFilter("Power")}),g(60,"PWR "),h(),f(61,"button",34),A("click",function(){return N(e),y().toggleStatFilter("Focus")}),g(62,"FCS "),h(),f(63,"button",35),A("click",function(){return N(e),y().toggleStatFilter("Adaptability")}),g(64,"ADP"),h()()(),D(65,"br"),f(66,"div",17),x(67,qU,1,1,"app-training-list",36),x(68,XU,2,0,"div",37),h()()()}if(2&t){const e=y();p(8),b("ngIf",e.barnSpecializationsUnlocked),p(3),K(" ",e.barnName,""),p(2),b("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),b("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(2),b("ngClass",hn(32,YU,"Large"!==e.sizeValue)),p(1),K("",e.sizeValue," "),p(1),b("ngIf","Large"!==e.sizeValue),p(2),b("ngIf",null!=e.existingTraining),p(1),b("ngIf",null==e.existingTraining),p(8),b("ngIf",e.coachingUnlocked),p(2),b("ngIf",null!=e.existingTraining),p(12),Mt("filterActive",e.filterSmall),p(2),Mt("filterActive",e.filterMedium),p(2),Mt("filterActive",e.filterLarge),p(6),Mt("filterActive",e.filterSpeed),p(2),Mt("filterActive",e.filterAcceleration),p(2),Mt("filterActive",e.filterEndurance),p(2),Mt("filterActive",e.filterPower),p(2),Mt("filterActive",e.filterFocus),p(2),Mt("filterActive",e.filterAdaptability),p(3),b("ngClass",e.tutorialActive?"tutorialActive":""),p(1),b("ngIf",e.associatedAnimal.canTrain),p(1),b("ngIf",!e.associatedAnimal.canTrain)}}function KU(t,n){if(1&t){const e=de();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),D(6,"br"),f(7,"span"),g(8,"Unassigned"),h()(),f(9,"div",19)(10,"button",12),A("click",function(){return N(e),y().returnToBarnView()}),g(11,"Back"),h()()(),D(12,"hr")(13,"br"),f(14,"span"),g(15,"Assign Animal"),h(),D(16,"br")(17,"br"),f(18,"app-animal-list",50),A("selectedAnimal",function(r){return N(e),y().assignAnimal(r)}),h()()()}if(2&t){const e=y();p(5),K("Barn ",e.selectedBarnNumber,""),p(13),b("availableAnimals",e.availableAnimals)}}function ZU(t,n){if(1&t){const e=de();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),D(6,"br"),f(7,"span"),g(8,"Locked"),h()(),f(9,"div",19)(10,"button",12),A("click",function(){return N(e),y().returnToBarnView()}),g(11,"Back"),h()()(),D(12,"hr")(13,"br"),f(14,"div",51)(15,"span"),g(16,"Purchase Barn"),h(),D(17,"br")(18,"br"),f(19,"span",52),g(20),h(),D(21,"br"),f(22,"button",53),A("click",function(){return N(e),y().purchaseBarn()}),g(23,"Buy"),h()()()()}if(2&t){const e=y();p(5),K("Barn ",e.selectedBarnNumber,""),p(15),K("",e.barn.purchasePrice," Coins"),p(2),b("disabled",!e.canPurchaseBarn())}}function JU(t,n){if(1&t&&(f(0,"div",55),D(1,"div",56),h()),2&t){const e=y(2);p(1),b("innerHTML",e.totalBarnStatsPopover,zt)}}function e7(t,n){1&t&&x(0,JU,2,1,"div",54),2&t&&b("ngIf",""!==y().totalBarnStatsPopover)}function t7(t,n){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=y(2);p(1),K(" ",e.upgradeBarnPopover," ")}}function i7(t,n){1&t&&x(0,t7,2,1,"div",54),2&t&&b("ngIf",""!==y().upgradeBarnPopover)}function n7(t,n){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=y(2);p(1),K(" ",e.buildBiggerBarnPopover," ")}}function r7(t,n){1&t&&x(0,n7,2,1,"div",54),2&t&&b("ngIf",""!==y().buildBiggerBarnPopover)}function a7(t,n){1&t&&D(0,"div",58),2&t&&b("innerHTML",y(2).currentTrainingPopover,zt)}function o7(t,n){1&t&&x(0,a7,1,1,"div",57),2&t&&b("ngIf",""!==y().currentTrainingPopover)}function s7(t,n){1&t&&D(0,"div",58),2&t&&b("innerHTML",y(2).currentTrainingPopover,zt)}function l7(t,n){1&t&&x(0,s7,1,1,"div",57),2&t&&b("ngIf",""!==y().currentTrainingPopover)}const p2=function(t){return{selectedSpecialization:t}};function c7(t,n){if(1&t){const e=de();f(0,"span",69),A("click",function(){const a=N(e).$implicit;return y(3).filterSpecialization(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=y(3);b("ngClass",hn(2,p2,i.selectedSpecialization===e)),p(1),K(" ",e.trim()," ")}}function u7(t,n){if(1&t&&(f(0,"div",67),x(1,c7,2,4,"span",68),h()),2&t){const e=y(2);p(1),b("ngForOf",e.specializationOptions)}}function d7(t,n){if(1&t&&(f(0,"div"),g(1),D(2,"br")(3,"br"),f(4,"strong"),g(5),h()()),2&t){const e=y(2);p(1),K(" ",e.specializationDescription," "),p(4),K(" ",e.inDepthSpecializationDescription," ")}}function h7(t,n){if(1&t){const e=de();f(0,"div",59)(1,"form")(2,"div",60)(3,"h4",61),g(4,"Choose Barn Specialization"),h(),f(5,"button",62),A("click",function(){return N(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",63),x(8,u7,2,1,"div",64),D(9,"hr"),x(10,d7,6,2,"div",13),h(),f(11,"div",65)(12,"button",66),A("click",function(){return N(e),y().selectSpecialization()}),g(13,"Select"),h()()()()}if(2&t){const e=y();p(8),b("ngIf",e.specializationOptions.length>0),p(2),b("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}function f7(t,n){if(1&t){const e=de();f(0,"span",69),A("click",function(){const a=N(e).$implicit;return y(4).filterSpecialization(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=y(4);b("ngClass",hn(2,p2,i.selectedSpecialization===e)),p(1),K(" ",e.trim()," ")}}function p7(t,n){if(1&t&&(f(0,"div",67),x(1,f7,2,4,"span",68),h()),2&t){const e=y(3);p(1),b("ngForOf",e.specializationOptions)}}function g7(t,n){if(1&t&&(f(0,"div"),g(1),D(2,"br")(3,"br"),f(4,"strong"),g(5),h(),D(6,"br")(7,"br"),h()),2&t){const e=y(3);p(1),K(" ",e.specializationDescription," "),p(4),K(" ",e.inDepthSpecializationDescription," ")}}function v7(t,n){if(1&t){const e=de();f(0,"div",72)(1,"div",73)(2,"span",74),g(3,"Reset Barn Specialization"),h(),D(4,"br"),f(5,"em"),g(6," Tear down your barn to build up something new. Each barn can be reset as many times as you want, but "),f(7,"strong"),g(8,"it only retains 80% of its current Barn Level after being reset."),h()()(),D(9,"br"),f(10,"div")(11,"div",75),x(12,p7,2,1,"div",64),D(13,"hr"),x(14,g7,8,2,"div",13),h(),f(15,"div",76)(16,"span"),g(17),h(),f(18,"button",66),A("click",function(){return N(e),y(2).resetSpecialization()}),g(19,"Reset Specialization"),h()()()()}if(2&t){const e=y(2);p(12),b("ngIf",e.specializationOptions.length>0),p(2),b("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription),p(3),K("New Barn Level will be ",e.postResetBarnUpgradeLevel,"")}}function m7(t,n){if(1&t){const e=de();f(0,"div",59)(1,"div",60)(2,"h4",61),g(3,"Barn Upgrade Info"),h(),f(4,"button",62),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",63)(7,"div",70),D(8,"div",56)(9,"br"),g(10),D(11,"br")(12,"hr"),x(13,v7,20,3,"div",71),h()()()}if(2&t){const e=y();p(8),b("innerHTML",e.totalBarnStatsPopover,zt),p(2),K(" ",e.upgradeBarnPopover," "),p(3),b("ngIf",e.barn.barnUpgrades.specializationLevel>0)}}let b7=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.modalService=r,this.lookupService=a,this.componentCommunicationService=o,this.specializationService=s,this.tutorialService=l,this.utilityService=c,this.returnToBarnEmitter=new ut,this.isCoachingEmitter=new ut,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.coachingUnlocked=!1,this.tutorialActive=!1,this.postResetBarnUpgradeLevel=0,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}keyEvent(e){var i=this.lookupService.getAvailableBarns().filter(s=>void 0!==s),r=i.findIndex(s=>this.selectedBarnNumber===s.barnNumber);if("ArrowLeft"===e.key)r>-1&&(null!=this.subscription&&this.subscription.unsubscribe(),(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setBarnView(Tt.barn,(o=i[a]).barnNumber),this.resetSelectedBarnInfo(o));else if("ArrowRight"===e.key&&r>-1){var a,o;null!=this.subscription&&this.subscription.unsubscribe(),(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setBarnView(Tt.barn,(o=i[a]).barnNumber),this.resetSelectedBarnInfo(o)}}ngOnInit(){if(this.handleTutorial(),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedBarnNumber);null!=e&&this.resetSelectedBarnInfo(e)}}selectNewTraining(e){var i=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber===this.selectedBarnNumber);if(null!=i){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===_t.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===_t.Large&&(a="largeBarnTrainingTimeModifier");var o=this.globalService.globalVar.modifiers.find(s=>s.text===a);if(null!=o&&(r.trainingTimeRemaining=o.value),null!=i.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return void(i.queuedTraining=r);i.currentTraining.timeTrained=0}i.currentTraining=r,this.existingTraining=r,!this.globalService.globalVar.tutorials.tutorialCompleted&&2===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.componentCommunicationService.setAnimalView(Tt.animals,this.associatedAnimal)),!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1)}}GetAvailableTrainingOptions(e){var i=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return i;i=this.globalService.globalVar.trainingOptions.filter(o=>o.isAvailable&&(o.facilitySize===_t.Small||o.facilitySize===_t.Medium&&(this.barn.size===_t.Medium||this.barn.size===_t.Large)||o.facilitySize===_t.Large&&this.barn.size===_t.Large));var r=[];i.forEach(o=>{var s=o.makeCopy(o),l=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),c=this.lookupService.getResourceByName("Stopwatch");null==c&&(c=0),s.timeToComplete*=1-(.05*c+l+e.miscStats.trainingTimeReduction/100),s.timeToComplete=Math.round(100*(s.timeToComplete+Number.EPSILON))/100,e.raceCourseType===j.Mountain&&(s.trainingType===Fe.ShortTrackRunning&&(s.trainingName="Short Track Climbing"),s.trainingType===Fe.TrailRunning&&(s.trainingName="Trail Climbing"),s.trainingType===Fe.LongTrackRunning&&(s.trainingName="Long Track Climbing")),e.raceCourseType===j.Ocean&&(s.trainingType===Fe.ShortTrackRunning&&(s.trainingName="Short Track Swimming"),s.trainingType===Fe.TrailRunning&&(s.trainingName="Lane Swimming"),s.trainingType===Fe.SmallWagonTow&&(s.trainingName="Small Canoe Tow"),s.trainingType===Fe.UphillRun&&(s.trainingName="Upstream Swim"),s.trainingType===Fe.LongTrackRunning&&(s.trainingName="Long Track Swimming"),s.trainingType===Fe.VehicleTow&&(s.trainingName="Boat Tow"),s.trainingType===Fe.GreenwayHike&&(s.trainingName="Canal Adventure"));var u=0;this.barn.barnUpgrades.specialization===Wt.TrainingFacility&&(u=(this.barn.barnUpgrades.specializationLevel-20)/10),s.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed+u,s.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration+u,s.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance+u,s.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power+u,s.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus+u,s.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability+u;var d=1,v=1,m=1,_=1,w=1,S=1;e.talentTree.talentTreeType===pt.sprint&&(S=1+e.talentTree.column1Row1Points/100,v=1+e.talentTree.column2Row1Points/100,_=1+e.talentTree.column3Row1Points/100),e.talentTree.talentTreeType===pt.longDistance&&(w=1+e.talentTree.column1Row1Points/100,d=1+e.talentTree.column2Row1Points/100,m=1+e.talentTree.column3Row1Points/100),s.affectedStatRatios.topSpeed*=d,s.affectedStatRatios.acceleration*=v,s.affectedStatRatios.endurance*=m,s.affectedStatRatios.power*=_,s.affectedStatRatios.focus*=w,s.affectedStatRatios.adaptability*=S,s.affectedStatRatios.topSpeed=Math.round(100*(s.affectedStatRatios.topSpeed+Number.EPSILON))/100,s.affectedStatRatios.acceleration=Math.round(100*(s.affectedStatRatios.acceleration+Number.EPSILON))/100,s.affectedStatRatios.endurance=Math.round(100*(s.affectedStatRatios.endurance+Number.EPSILON))/100,s.affectedStatRatios.power=Math.round(100*(s.affectedStatRatios.power+Number.EPSILON))/100,s.affectedStatRatios.focus=Math.round(100*(s.affectedStatRatios.focus+Number.EPSILON))/100,s.affectedStatRatios.adaptability=Math.round(100*(s.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(s)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(o=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&o.affectedStatRatios.acceleration>0||this.filterAdaptability&&o.affectedStatRatios.adaptability>0||this.filterEndurance&&o.affectedStatRatios.endurance>0||this.filterFocus&&o.affectedStatRatios.focus>0||this.filterPower&&o.affectedStatRatios.power>0||this.filterSpeed&&o.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&o.facilitySize===_t.Small||this.filterMedium&&o.facilitySize===_t.Medium||this.filterLarge&&o.facilitySize===_t.Large)));var a=r.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(i=>i.isAvailable&&(void 0===i.associatedBarnNumber||i.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(i=>i.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var i=this.lookupService.getAnimalByType(e.type);null!==i&&(i.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()}),!this.globalService.globalVar.tutorials.tutorialCompleted&&7===this.globalService.globalVar.tutorials.currentTutorialId&&this.associatedAnimal.type===H.Monkey&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.tutorialActive=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===_t.Small)this.barn.size=_t.Medium,this.barn.facilityUpgradePrice=4e3,null!=(i=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&i.itemList.filter(r=>r.additionalIdentifier===_t.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===_t.Medium){var i;this.barn.size=_t.Large,null!=(i=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&i.itemList.filter(a=>a.additionalIdentifier===_t.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(o=>{this.lookupService.spendResourceByName(o.name,o.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}else alert("You don't have the required resources to upgrade your barn.")}canUpgradeBarn(e){var i=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(i=!1)}),i}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(e){var i="Upgrade to gain barn bonuses. ";return this.barn.barnUpgrades.barnLevel>=1&&(i=e?"<em>Click to view full information and to change Barn specialization.</em><br/><br/>":""),i+="Barn Upgrades: <br/>",this.barn.barnUpgrades.specialization===Wt.TrainingFacility?i+=this.specializationService.getSpecializationPopoverText(Wt.TrainingFacility,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===Wt.BreedingGrounds?i+=this.specializationService.getSpecializationPopoverText(Wt.BreedingGrounds,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===Wt.Attraction?i+=this.specializationService.getSpecializationPopoverText(Wt.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===Wt.ResearchCenter&&(i+=this.specializationService.getSpecializationPopoverText(Wt.ResearchCenter,this.barn.barnUpgrades.specializationLevel)),this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(i+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(i+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(i+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(i+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(i+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(i+="Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"<br/>"),null!==this.utilityService.getSanitizedHtml(i)&&(i=this.utilityService.getSanitizedHtml(i)),i}getUpgradeBarnPopover(){var e="Cost for next upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===_t.Small?e+="You will be able to do Medium trainings and increase idle training time to 8 hours.":this.barn.size===_t.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 12 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){""!==this.selectedSpecialization&&null!=this.selectedSpecialization?(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(i=>{this.lookupService.spendResourceByName(i.name,i.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===Wt.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="",this.modalService.dismissAll()):alert("You must select a specialization.")}resetSpecialization(){if(""!==this.selectedSpecialization&&null!=this.selectedSpecialization){this.barn.barnUpgrades.barnLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel),this.barn.barnUpgrades.specialization=this.barn.barnUpgrades.barnLevel<10?Wt.None:this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel=0,this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="";var e=.1;this.barn.barnUpgrades.upgradedStatGain=new Ve(1,1,1,1,1,1);for(var i=1;i<=this.barn.barnUpgrades.barnLevel;i++)if(i%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var r=i-this.barn.barnUpgrades.specializationLevel;r%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=e:r%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=e:r%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=e:r%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=e:r%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=e:r%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=e)}this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.modalService.dismissAll()}else alert("You must select a specialization.")}goToAnimal(){this.componentCommunicationService.setAnimalView(Tt.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===H.Monkey);this.globalService.globalVar.tutorials.tutorialCompleted||1!==this.globalService.globalVar.tutorials.currentTutorialId?!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0):this.globalService.globalVar.tutorials.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}resetSelectedBarnInfo(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.coachingUnlocked=this.lookupService.isItemUnlocked("coaching"),this.selectedBarnNumber=e.barnNumber,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var i=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedBarnNumber);if(void 0!==i){this.barn=i,this.barnName=this.lookupService.getBarnName(i),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var r=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.selectedBarnNumber);if(null!=r){if(this.animalAssigned=!0,this.associatedAnimal=r,this.associatedAnimalName=r.name,this.existingTraining=r.currentTraining,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(r),this.currentTrainingPopover=this.getCurrentTrainingPopover(r),null!=this.existingTraining){var a=this.availableTrainings.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});null!=a&&(a.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(Tt.barn,this.selectedBarnNumber),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(o=>{if(!this.barn.isLocked){var s=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.selectedBarnNumber);if(null!=s){if(null==s.currentTraining){if(null!==this.existingTraining){var l=this.availableTrainings.find(c=>{var u;return(null===(u=this.existingTraining)||void 0===u?void 0:u.trainingName)===c.trainingName});null!=l&&(l.isSelected=!1),this.existingTraining=null}return}s.currentTraining!==this.existingTraining&&(this.existingTraining=s.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=s.currentTraining.timeTrained/s.currentTraining.timeToComplete*100,this.currentTrainingPopover=this.getCurrentTrainingPopover(s)}}})}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}getCurrentTrainingPopover(e){var i="";null!=e.currentTraining&&(i+=e.currentTraining.trainingName+"\n"+this.lookupService.getStatGainDescription(e.currentTraining.affectedStatRatios,e.currentTraining.statGain)+"\n"),i+=e.name+" Current Stats:\n",i+="Speed: "+Math.round(e.currentStats.topSpeed).toLocaleString()+"\n",i+="Acceleration: "+Math.round(e.currentStats.acceleration).toLocaleString()+"\n",i+="Endurance: "+Math.round(e.currentStats.endurance).toLocaleString()+"\n",i+="Power: "+Math.round(e.currentStats.power).toLocaleString()+"\n",i+="Focus: "+Math.round(e.currentStats.focus).toLocaleString()+"\n",i+="Adaptability: "+Math.round(e.currentStats.adaptability).toLocaleString()+"\n",i+="Diminishing Returns: "+this.globalService.GetAnimalDiminishingReturns(e);var r=this.utilityService.getSanitizedHtml(i);return null!==r&&(i=r),i}goToCoaching(){this.isCoachingEmitter.emit(!0)}openBarnUpgradeModal(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!1),this.barn.barnUpgrades.specialization!==Wt.None){var i=this.lookupService.convertSpecializationEnumToName(this.barn.barnUpgrades.specialization);this.specializationOptions=this.specializationOptions.filter(r=>r!==i),this.postResetBarnUpgradeLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel)}this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.tutorialSubscription&&this.tutorialSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Bn),E(ho),E(Di),E(mn),E(g0),E(GD),E(Fn))},t.\u0275cmp=bt({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,i){if(1&e&&Pa(FU,7),2&e){let r;xi(r=ki())&&(i.specializationModal=r.first)}},hostBindings:function(e,i){1&e&&A("keyup",function(a){return i.keyEvent(a)},!1,Co)},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter",isCoachingEmitter:"isCoachingEmitter"},decls:17,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["noTrainingContent",""],["currentTrainingContent",""],["specializationModal",""],["barnUpgradeContent",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[3,"click"],[4,"ngIf"],[1,"info"],["class","keyword buttonAsTextKeepColor clickableText",3,"ngClass","click",4,"ngIf"],["class","clickableText keyword buttonAsTextKeepColor",3,"ngClass","click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"trainingDescription"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText","filterMargins"],["id","smallFilter",1,"buttonAsText",3,"click"],["id","mediumFilter",1,"buttonAsText",3,"click"],["id","largeFilter",1,"buttonAsText",3,"click"],[1,"resetFiltersHeader","buttonAsText","clickableText"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTrainingOptions","selectedTrainingOption",4,"ngIf"],["class","keyword",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"keyword","buttonAsTextKeepColor","clickableText",3,"ngClass","click"],[1,"clickableText","keyword","buttonAsTextKeepColor",3,"ngClass","click"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[3,"availableTrainingOptions","selectedTrainingOption"],[1,"keyword"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price","resourceKeyword"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],[3,"innerHTML"],["class","popoverClass",3,"innerHTML",4,"ngIf"],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"],[1,"upgradeBarnInfo"],["class","resetBarn",4,"ngIf"],[1,"resetBarn"],[1,"resetSpecializationInfo"],[1,"s4Heading"],[1,"resetSpecializationOptions"],[1,"modal-footer","spaceEvenly"]],template:function(e,i){1&e&&(x(0,QU,69,34,"div",0),x(1,KU,19,2,"div",0),x(2,ZU,24,3,"div",0),x(3,e7,1,1,"ng-template",null,1,ht),x(5,i7,1,1,"ng-template",null,2,ht),x(7,r7,1,1,"ng-template",null,3,ht),x(9,o7,1,1,"ng-template",null,4,ht),x(11,l7,1,1,"ng-template",null,5,ht),x(13,h7,14,2,"ng-template",null,6,ht),x(15,m7,14,3,"ng-template",null,7,ht)),2&e&&(b("ngIf",i.animalAssigned&&!i.barn.isLocked),p(1),b("ngIf",!i.animalAssigned&&!i.barn.isLocked),p(1),b("ngIf",i.barn.isLocked))},directives:[hi,Zr,rn,Gf,DU,zf,Xh,Lh,gu,cn],pipes:[no],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%]{text-align:center}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.trainingDescription[_ngcontent-%COMP%]{text-align:center}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.spaceEvenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}.resetSpecializationInfo[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:2fr 1fr 2fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}}']}),t})();var bn=(()=>{return(t=bn||(bn={}))[t.speed=0]="speed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",t[t.special=6]="special",bn;var t})();const _7=["coachingCanvas"],y7=["drawCoaching"];let w7=(()=>{class t{constructor(e,i,r,a){this.gameLoopService=e,this.globalService=i,this.themeService=r,this.utilityService=a,this.isCoachingEmitter=new ut,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1}ngOnInit(){if(this.successfulAttemptStreak=0,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=i){this.associatedAnimal=i;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out into an open area for practice.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.currentPathType=this.getRandomPathType(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayTrace(this.context,0)})}setupCanvas(){this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width}displayTrace(e,i){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.currentPathType===bn.speed&&(this.activePoints=this.drawSpeedTrace(e)),this.currentPathType===bn.acceleration&&(this.activePoints=this.drawAccelerationTrace(e)),this.currentPathType===bn.endurance&&(this.activePoints=this.drawEnduranceTrace(e)),this.currentPathType===bn.power&&(this.activePoints=this.drawPowerTrace(e)),this.currentPathType===bn.focus&&(this.activePoints=this.drawFocusTrace(e)),this.currentPathType===bn.adaptability&&(this.activePoints=this.drawAdaptabilityTrace(e)),this.currentPathType===bn.special&&(this.activePoints=this.drawSpecialTrace(e)),e.strokeStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.globalCompositeOperation="source-atop";for(var r=0;r<this.currentEndPoint;r++)if(r<this.currentEndPoint-1)this.currentPathType===bn.power&&0===r?(e.beginPath(),e.ellipse(this.activePoints[0][0],this.activePoints[0][1],this.activePoints[0][2],this.activePoints[0][3],this.activePoints[0][4],this.activePoints[0][5],this.activePoints[0][6],!0),e.stroke()):(e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.activePoints[r+1][0],this.activePoints[r+1][1]),e.stroke());else if(this.currentPathType!==bn.power||0!==r&&2!==r)e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.currentX,this.currentY),e.stroke(),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,this.currentY-5,10,10);else{var a=0;2===r&&(a=3),e.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.fillRect(this.activePoints[a][0]-this.activePoints[a][2]-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],this.currentX-(this.activePoints[a][0]-this.activePoints[a][2]),2*this.activePoints[a][3]+2),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],10,2*this.activePoints[a][3])}}pointerMove(e){if(this.isPointerDown&&null!=this.activePoints&&0!==this.activePoints.length){e.preventDefault(),e.stopPropagation();var i=e.clientX-this.canvasOffsetX,r=e.clientY-this.canvasOffsetY,a=.1*this.canvasWidth,o=.1*this.canvasHeight;0===this.currentEndPoint&&(this.currentX=this.activePoints[0][0],this.currentY=this.activePoints[0][1],this.currentPathType===bn.power&&(this.currentX=this.activePoints[0][0]-this.activePoints[0][2],this.currentY=this.activePoints[0][1]),this.currentEndPoint=1),this.currentPathType===bn.power&&(o=.25*this.canvasHeight);var s=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint-1][0]:this.activePoints[this.currentEndPoint][0],l=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint][0]:this.activePoints[this.currentEndPoint-1][0],c=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint-1][1]:this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint][1]:this.activePoints[this.currentEndPoint-1][1],d=s-a,v=l+a,m=c-o,_=u+o,w=!1,S=!1,k=!1,T=!1;if(this.activePoints[this.currentEndPoint-1][0]>this.activePoints[this.currentEndPoint][0]&&(w=!0),this.activePoints[this.currentEndPoint-1][1]>this.activePoints[this.currentEndPoint][1]&&(S=!0),this.activePoints[this.currentEndPoint-1][0]===this.activePoints[this.currentEndPoint][0]&&(k=!0),this.activePoints[this.currentEndPoint-1][1]===this.activePoints[this.currentEndPoint][1]&&(T=!0),this.currentPathType!==bn.power||1!==this.currentEndPoint&&3!==this.currentEndPoint?this.currentPathType===bn.power&&2===this.currentEndPoint&&(d=(s=this.activePoints[2][0])-a,v=(l=this.activePoints[1][0])+a,m=(c=this.activePoints[1][1])-o,_=(u=this.activePoints[2][1])+o,w=!0,S=!1,k=!1,T=!1):(1===this.currentEndPoint?(s=this.activePoints[this.currentEndPoint-1][0]-this.activePoints[this.currentEndPoint-1][2],l=this.activePoints[this.currentEndPoint-1][0]+this.activePoints[this.currentEndPoint-1][2],c=this.activePoints[this.currentEndPoint-1][1],u=this.activePoints[this.currentEndPoint-1][1]):(s=this.activePoints[this.currentEndPoint][0]-this.activePoints[this.currentEndPoint][2],l=this.activePoints[this.currentEndPoint][0]+this.activePoints[this.currentEndPoint][2],c=this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint][1]),d=s-a,v=l+a,m=c-o,_=u+o,w=!1,S=!1,k=!1,T=!0),i>=d&&i<=v&&r>=m&&r<=_){if(k||T)(!S&&r>this.currentY||S&&r<this.currentY)&&!T&&(this.currentY=r),(!w&&i>this.currentX||w&&i<this.currentX)&&!k&&(this.currentX=i);else if(!w&&i>this.currentX||w&&i<this.currentX){var R=(i-s)/(l-s);w&&(R=1-R),S&&(R=1-R);var L=(u-c)*R+c;this.currentX=i,this.currentY=L}var W=.005*this.canvasWidth,ae=.005*this.canvasHeight;(!w&&this.currentX>=l-W||w&&this.currentX<=s+W)&&(!S&&this.currentY>=u-ae||S&&this.currentY<=c+ae)&&(this.currentX=w?s:l,this.currentY=S?c:u,this.currentEndPoint+=1,this.currentEndPoint>this.activePoints.length-1&&this.completePath())}}}pointerUp(){this.isPointerDown=!1}pointerDown(){this.isPointerDown=!0}drawSpeedTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([i,r]),a.push([this.canvasWidth-i,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-i,this.canvasHeight-r]),a.push([i,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}drawAdaptabilityTrace(e){var i=.1*this.canvasWidth,o=(this.canvasWidth-2*i)/14,s=(this.canvasHeight-.1*this.canvasHeight*2)/7,l=[];l.push([i,this.canvasHeight/2]),l.push([i+o,this.canvasHeight/2-s]),l.push([i+2*o,this.canvasHeight/2+s]),l.push([i+3*o,this.canvasHeight/2-2*s]),l.push([i+4*o,this.canvasHeight/2+2*s]),l.push([i+5*o,this.canvasHeight/2-3*s]),l.push([i+6*o,this.canvasHeight/2+3*s]),l.push([i+7*o,this.canvasHeight/2-4*s]),l.push([i+8*o,this.canvasHeight/2+3*s]),l.push([i+9*o,this.canvasHeight/2-3*s]),l.push([i+10*o,this.canvasHeight/2+2*s]),l.push([i+11*o,this.canvasHeight/2-2*s]),l.push([i+12*o,this.canvasHeight/2+s]),l.push([i+13*o,this.canvasHeight/2-s]),l.push([i+14*o,this.canvasHeight/2]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawPowerTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([this.canvasWidth/2,this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),a.push([this.canvasWidth/2+(this.canvasWidth/2-i),this.canvasHeight/4]),a.push([this.canvasWidth/2-(this.canvasWidth/2-i),3*this.canvasHeight/4]),a.push([this.canvasWidth/2,3*this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),e.beginPath(),e.ellipse(a[0][0],a[0][1],a[0][2],a[0][3],a[0][4],a[0][5],a[0][6],!0),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.ellipse(a[3][0],a[3][1],a[3][2],a[3][3],a[3][4],a[3][5],a[3][6],!1),e.stroke(),a}drawEnduranceTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=.15*this.canvasWidth,o=.15*this.canvasHeight,s=[];s.push([i,r]),s.push([this.canvasWidth-i,r]),s.push([this.canvasWidth-i,this.canvasHeight-r]),s.push([i,this.canvasHeight-r]),s.push([i,r+o]),s.push([this.canvasWidth-(i+a),r+o]),s.push([this.canvasWidth-(i+a),this.canvasHeight-(r+o)]),s.push([i+a,this.canvasHeight-(r+o)]),s.push([i+a,r+2*o]),s.push([this.canvasWidth-(i+2*a),r+2*o]),s.push([this.canvasWidth-(i+2*a),this.canvasHeight-(r+2*o)]),s.push([i+2*a,this.canvasHeight-(r+2*o)]),s.push([i+2*a,this.canvasHeight/2]),s.push([this.canvasWidth/2,this.canvasHeight/2]);for(var l=1;l<s.length;l++)e.beginPath(),e.moveTo(s[l-1][0],s[l-1][1]),e.lineTo(s[l][0],s[l][1]),e.stroke();return s}drawFocusTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];a.push([this.canvasWidth/3,r]),a.push([this.canvasWidth/3,this.canvasHeight/6]),a.push([i,this.canvasHeight/6]),a.push([this.canvasWidth/2,this.canvasHeight-r]),a.push([this.canvasWidth-i,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,r]);for(var o=1;o<a.length;o++)e.beginPath(),e.moveTo(a[o-1][0],a[o-1][1]),e.lineTo(a[o][0],a[o][1]),e.stroke();return a}drawAccelerationTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,o=this.canvasWidth-2*i,s=this.canvasHeight-2*r,l=[];l.push([i,r]),l.push([o/9+i,r]),l.push([o/9+i,2*s/9+r]),l.push([2*o/9+i,2*s/9+r]),l.push([2*o/9+i,4*s/9+r]),l.push([3*o/9+i,4*s/9+r]),l.push([3*o/9+i,6*s/9+r]),l.push([4*o/9+i,6*s/9+r]),l.push([4*o/9+i,8*s/9+r]),l.push([5*o/9+i,8*s/9+r]),l.push([5*o/9+i,6*s/9+r]),l.push([6*o/9+i,6*s/9+r]),l.push([6*o/9+i,4*s/9+r]),l.push([7*o/9+i,4*s/9+r]),l.push([7*o/9+i,2*s/9+r]),l.push([8*o/9+i,2*s/9+r]),l.push([8*o/9+i,r]),l.push([9*o/9+i,r]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawSpecialTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([i,r]),a.push([this.canvasWidth-i,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-i,this.canvasHeight-r]),a.push([i,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}getAnimalDistanceColor(e){var i="";return e===j.Flatland&&(i="#7d3f00"),e===j.Mountain&&(i="#1b630d"),e===j.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===j.Tundra&&(i="#28809c"),e===j.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e){var i="";return e===j.Flatland&&("night"===this.themeService.getActiveThemeName()?i="#E18B07":(this.themeService.getActiveThemeName(),i="#c66900")),e===j.Mountain&&("night"===this.themeService.getActiveThemeName()?i="#30b001":(this.themeService.getActiveThemeName(),i="#279113")),e===j.Ocean&&("night"===this.themeService.getActiveThemeName()?i="#9289CF":(this.themeService.getActiveThemeName(),i="#0000FF")),e===j.Tundra&&("night"===this.themeService.getActiveThemeName()?i="#019DDE":(this.themeService.getActiveThemeName(),i="#1CA1C9")),e===j.Volcanic&&("night"===this.themeService.getActiveThemeName()?i="#E56C6E":(this.themeService.getActiveThemeName(),i="#D92525")),i}getRandomPathType(e){var i=Object.keys(bn),r=[];i.forEach((o,s)=>{!isNaN(Number(o))&&6!==Number(o)&&r.push(Number(o))});var a=this.utilityService.getRandomInteger(0,r.length-1);return r[a]}completePath(){this.getNewPath=!0,this.currentEndPoint=0,this.activePoints=[],this.currentX=0,this.currentY=0,this.isPointerDown=!1,this.successfulAttemptStreak+=1,this.getReward(this.currentPathType),this.associatedAnimal.trackedAnimalStats.successfulCoachingAttempts+=1,this.currentPathType=this.getRandomPathType(this.currentPathType)}getReward(e){var i=1,r=this.globalService.globalVar.resources.find(l=>"Whistle"===l.name);if(null!=r&&r.amount>0){var a=this.globalService.globalVar.modifiers.find(l=>"whistleModifier"===l.text);null!=a&&(i=a.value)}var o=this.globalService.globalVar.resources.find(l=>"Golden Whistle"===l.name);if(null!=o&&o.amount>0){var s=this.globalService.globalVar.modifiers.find(l=>"goldenWhistleModifier"===l.text);null!=s&&(i=s.value)}e===bn.speed&&(this.associatedAnimal.currentStats.topSpeed+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" speed. ("+this.associatedAnimal.currentStats.topSpeed.toFixed(2)+")\n"),e===bn.acceleration&&(this.associatedAnimal.currentStats.acceleration+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" acceleration. ("+this.associatedAnimal.currentStats.acceleration.toFixed(2)+")\n"),e===bn.endurance&&(this.associatedAnimal.currentStats.endurance+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" endurance. ("+this.associatedAnimal.currentStats.endurance.toFixed(2)+")\n"),e===bn.power&&(this.associatedAnimal.currentStats.power+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" power. ("+this.associatedAnimal.currentStats.power.toFixed(2)+")\n"),e===bn.focus&&(this.associatedAnimal.currentStats.focus+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" focus. ("+this.associatedAnimal.currentStats.focus.toFixed(2)+")\n"),e===bn.adaptability&&(this.associatedAnimal.currentStats.adaptability+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" adaptability. ("+this.associatedAnimal.currentStats.adaptability.toFixed(2)+")\n"),this.successfulAttemptStreak%5==0&&(this.globalService.increaseAbilityXp(this.associatedAnimal,i),this.incrementalCoachingUpdates+=this.animalDisplayName+" also gains "+i+" XP towards their ability "+this.associatedAnimal.ability.name+"!\n"),this.globalService.calculateAnimalRacingStats(this.associatedAnimal)}returnToSelectedBarnView(){this.isCoachingEmitter.emit(!1)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(Bn),E(It),E(ql),E(Fn))},t.\u0275cmp=bt({type:t,selectors:[["app-coaching"]],viewQuery:function(e,i){if(1&e&&(Pa(_7,5,Ei),Pa(y7,5,Ei)),2&e){let r;xi(r=ki())&&(i.coachingCanvas=r.first),xi(r=ki())&&(i.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{isCoachingEmitter:"isCoachingEmitter"},decls:22,vars:2,consts:[[1,"coachingView"],[1,"marginDiv"],["id","coachingInfo"],[1,"infoGridContainer"],[1,"info"],[1,"description"],[1,"back"],[3,"click"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],["id","coachingCanvas",1,"coachingCanvas",3,"pointermove","pointerdown","pointerup"],["coachingCanvas",""],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""]],template:function(e,i){if(1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),g(6,"Coaching"),h(),f(7,"div",5),g(8," Show your animals the way by tracing each path. Successfully making it through will reward your partner with a stat point. "),h()(),f(9,"div",6)(10,"button",7),A("click",function(){return i.returnToSelectedBarnView()}),g(11,"Back"),h()()(),D(12,"hr"),h(),f(13,"div",8)(14,"div",9)(15,"div",10,11)(17,"div",12)(18,"canvas",13,14),A("pointermove",function(a){return i.pointerMove(a)})("pointerdown",function(){return i.pointerDown()})("pointerup",function(){return i.pointerUp()}),h()()(),D(20,"div",15,16),h()()()()),2&e){const r=at(21);p(20),b("scrollTop",r.scrollHeight)("innerHTML",i.incrementalCoachingUpdates.trim(),zt)}},styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}']}),t})();function C7(t,n){if(1&t){const e=de();f(0,"div",12)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",4))}function S7(t,n){if(1&t){const e=de();f(0,"div",13)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",5))}function T7(t,n){if(1&t){const e=de();f(0,"div",14)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",6))}function D7(t,n){if(1&t&&(f(0,"div",3),x(1,C7,2,1,"div",9),x(2,S7,2,1,"div",10),x(3,T7,2,1,"div",11),h()),2&t){const e=y(2);p(1),b("ngIf",e.barnRow2IsUnlocked),p(1),b("ngIf",e.barnRow2IsUnlocked),p(1),b("ngIf",e.barnRow2IsUnlocked)}}function R7(t,n){if(1&t){const e=de();f(0,"div",18)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",7))}function x7(t,n){if(1&t){const e=de();f(0,"div",19)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",8))}function k7(t,n){if(1&t){const e=de();f(0,"div",20)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",9))}function M7(t,n){if(1&t&&(f(0,"div",3),x(1,R7,2,1,"div",15),x(2,x7,2,1,"div",16),x(3,k7,2,1,"div",17),h()),2&t){const e=y(2);p(1),b("ngIf",e.barnRow3IsUnlocked),p(1),b("ngIf",e.barnRow3IsUnlocked),p(1),b("ngIf",e.barnRow3IsUnlocked)}}function A7(t,n){if(1&t){const e=de();f(0,"div",24)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",10))}function P7(t,n){if(1&t){const e=de();f(0,"div",25)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",11))}function E7(t,n){if(1&t){const e=de();f(0,"div",26)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",12))}function I7(t,n){if(1&t&&(f(0,"div",3),x(1,A7,2,1,"div",21),x(2,P7,2,1,"div",22),x(3,E7,2,1,"div",23),h()),2&t){const e=y(2);p(1),b("ngIf",e.barnRow4IsUnlocked),p(1),b("ngIf",e.barnRow4IsUnlocked),p(1),b("ngIf",e.barnRow4IsUnlocked)}}function V7(t,n){if(1&t){const e=de();f(0,"div",30)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",13))}function O7(t,n){if(1&t){const e=de();f(0,"div",31)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",14))}function N7(t,n){if(1&t){const e=de();f(0,"div",32)(1,"app-barn",5),A("selectedBarn",function(r){return N(e),y(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",15))}function F7(t,n){if(1&t&&(f(0,"div",3),x(1,V7,2,1,"div",27),x(2,O7,2,1,"div",28),x(3,N7,2,1,"div",29),h()),2&t){const e=y(2);p(1),b("ngIf",e.barnRow5IsUnlocked),p(1),b("ngIf",e.barnRow5IsUnlocked),p(1),b("ngIf",e.barnRow5IsUnlocked)}}function B7(t,n){if(1&t){const e=de();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"app-barn",5),A("selectedBarn",function(r){return N(e),y().goToBarn(r)}),h()(),f(4,"div",6)(5,"app-barn",5),A("selectedBarn",function(r){return N(e),y().goToBarn(r)}),h()(),f(6,"div",7)(7,"app-barn",5),A("selectedBarn",function(r){return N(e),y().goToBarn(r)}),h()()(),x(8,D7,4,3,"div",8),x(9,M7,4,3,"div",8),x(10,I7,4,3,"div",8),x(11,F7,4,3,"div",8),h()}if(2&t){const e=y();p(2),b("ngClass",e.tutorialActive?"tutorialActive":""),p(1),b("barnNumber",1),p(2),b("barnNumber",2),p(2),b("barnNumber",3),p(1),b("ngIf",e.barnRow2IsUnlocked),p(1),b("ngIf",e.barnRow3IsUnlocked),p(1),b("ngIf",e.barnRow4IsUnlocked),p(1),b("ngIf",e.barnRow5IsUnlocked)}}function L7(t,n){if(1&t){const e=de();f(0,"app-selected-barn",36),A("returnToBarnEmitter",function(){return N(e),y(2).goToBarn(0)})("isCoachingEmitter",function(r){return N(e),y(2).goToCoaching(r)}),h()}2&t&&b("selectedBarnNumber",y(2).selectedBarn)}function U7(t,n){if(1&t){const e=de();f(0,"app-coaching",37),A("isCoachingEmitter",function(r){return N(e),y(2).goToCoaching(r)}),h()}2&t&&b("selectedBarnNumber",y(2).selectedBarn)}function H7(t,n){if(1&t&&(f(0,"div",33),x(1,L7,1,1,"app-selected-barn",34),x(2,U7,1,1,"app-coaching",35),h()),2&t){const e=y();p(1),b("ngIf",!e.isCoaching),p(1),b("ngIf",e.isCoaching)}}let G7=(()=>{class t{constructor(e,i,r){this.lookupService=e,this.componentCommunicationService=i,this.globalService=r,this.selectedBarn=0,this.isCoaching=!1,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1,this.barnRow5IsUnlocked=!1}ngOnInit(){var e;this.componentCommunicationService.setNewView(Tt.barn),this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),this.barnRow5IsUnlocked=this.lookupService.isItemUnlocked("barnRow5"),!this.globalService.globalVar.tutorials.tutorialCompleted&&1===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(i=>i.type===H.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(i=>{this.selectedBarn=i})}goToBarn(e){this.selectedBarn=e,this.componentCommunicationService.setBarnView(Tt.barn,e)}goToCoaching(e){this.isCoaching=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setBarnNumber(0)}}return t.\u0275fac=function(e){return new(e||t)(E(Di),E(mn),E(It))},t.\u0275cmp=bt({type:t,selectors:[["app-barn-view"]],decls:2,vars:2,consts:[["class","gridContainer","id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],["id","barnViewDiv",1,"gridContainer"],[1,"barnRow"],[1,"barn1","barnDefault",3,"ngClass"],[3,"barnNumber","selectedBarn"],[1,"barn2","barnDefault"],[1,"barn3","barnDefault"],["class","barnRow",4,"ngIf"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],[1,"barn5","barnDefault"],[1,"barn6","barnDefault"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn7","barnDefault"],[1,"barn8","barnDefault"],[1,"barn9","barnDefault"],["class","barn10 barnDefault",4,"ngIf"],["class","barn11 barnDefault",4,"ngIf"],["class","barn12 barnDefault",4,"ngIf"],[1,"barn10","barnDefault"],[1,"barn11","barnDefault"],[1,"barn12","barnDefault"],["class","barn13 barnDefault",4,"ngIf"],["class","barn14 barnDefault",4,"ngIf"],["class","barn15 barnDefault",4,"ngIf"],[1,"barn13","barnDefault"],[1,"barn14","barnDefault"],[1,"barn15","barnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter"],[3,"selectedBarnNumber","isCoachingEmitter"]],template:function(e,i){1&e&&(x(0,B7,12,8,"div",0),x(1,H7,3,2,"div",1)),2&e&&(b("ngIf",0===i.selectedBarn),p(1),b("ngIf",i.selectedBarn>0))},directives:[hi,rn,yU,b7,w7],styles:["#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.barnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;width:33.3333%;display:inline-block;vertical-align:middle;height:100%}.barnRow[_ngcontent-%COMP%]{height:25%;width:100%;display:inline-block}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}"]}),t})();function z7(t,n){1&t&&(f(0,"span",5),g(1," Primary "),h())}function j7(t,n){1&t&&(f(0,"span",5),g(1," Auto Run Free Race "),h())}function $7(t,n){1&t&&(f(0,"span",5),g(1," Event "),h())}function W7(t,n){1&t&&D(0,"br")}function q7(t,n){1&t&&(f(0,"span",8),g(1," / "),h())}function X7(t,n){if(1&t&&(f(0,"span",6),g(1),x(2,q7,2,0,"span",7),h()),2&t){const e=n.$implicit,i=n.index,r=y();b("ngClass",r.getColorClass(e)),p(1),K(" ",e.name,""),p(1),b("ngIf",i<r.deck.selectedAnimals.length-1)}}let j0=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var i=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=i&&(this.deck=i)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}goToDeckView(){this.componentCommunicationService.setNewView(Tt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:11,vars:6,consts:[[1,"relayTeam"],["class","primaryText keyword rightSpaced",4,"ngIf"],[4,"ngIf"],[1,"clickableText",3,"click"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div"),x(2,z7,2,0,"span",1),x(3,j7,2,0,"span",1),x(4,$7,2,0,"span",1),x(5,W7,1,0,"br",2),h(),f(6,"div")(7,"strong",3),A("click",function(){return i.goToDeckView()}),g(8),h(),g(9," - "),x(10,X7,3,3,"span",4),h()()),2&e&&(p(2),b("ngIf",i.deck.isPrimaryDeck&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),b("ngIf",i.deck.autoRunFreeRace&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),b("ngIf",i.deck.isEventDeck&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),b("ngIf",i.deckNumber>0),p(3),et(i.deck.name),p(2),b("ngForOf",i.deck.selectedAnimals))},directives:[hi,cn,rn],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.relayTeam[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%;margin-left:.5rem}"]}),t})();function Y7(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y(2);p(1),K("Race ",e.index+1," ")}}function Q7(t,n){1&t&&(f(0,"span",12),g(1," / "),h())}function K7(t,n){if(1&t&&(f(0,"span",9)(1,"span",10),g(2),x(3,Q7,2,0,"span",11),h()()),2&t){const e=n.$implicit,i=n.index,r=y(2);b("ngClass",r.getNoRacerClass(e)),p(1),b("ngClass",r.getColorClass(e)),p(1),K(" ",e.getCourseTypeName()," "),p(1),b("ngIf",i<r.race.raceLegs.length-1)}}function Z7(t,n){1&t&&(f(0,"h6",13)(1,"em"),g(2,"Completed!"),h()())}function J7(t,n){1&t&&(f(0,"h6",13)(1,"em"),g(2,"Cannot Run"),h()())}function eH(t,n){1&t&&(f(0,"h6",14),g(1,"Start"),h())}const g2=function(t){return{raceNotAllowed:t}};function tH(t,n){if(1&t&&(f(0,"div",2),x(1,Y7,2,1,"span",3),f(2,"div",4)(3,"div",5)(4,"div")(5,"span"),g(6),Ot(7,"number"),h(),x(8,K7,4,4,"span",6),h(),x(9,Z7,3,0,"h6",7),x(10,J7,3,0,"h6",7),x(11,eH,2,0,"h6",8),h()()()),2&t){const e=y(),i=at(3);p(1),b("ngIf",null!=e.index&&e.index>-1),p(1),b("ngClass",hn(12,g2,e.cannotRace))("ngbPopover",i)("disablePopover",""===e.popoverText),p(4),K(" ",oi(7,9,e.race.length,"1.2-2")," Total Meters "),p(2),b("ngForOf",e.race.raceLegs),p(1),b("ngIf",e.showStartText&&e.race.isCompleted),p(1),b("ngIf",e.showStartText&&!e.race.isCompleted&&e.cannotRace),p(1),b("ngIf",e.showStartText&&!e.race.isCompleted&&!e.cannotRace)}}function iH(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y(2);p(1),K("Race ",e.index+1," ")}}function nH(t,n){if(1&t&&(f(0,"p",9),g(1),Ot(2,"number"),f(3,"span",10),g(4),h()()),2&t){const e=n.$implicit,i=y(2);b("ngClass",i.getNoRacerClass(e)),p(1),Wi(" ",oi(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),p(2),b("ngClass",i.getColorClass(e)),p(1),et(e.getCourseTypeName())}}function rH(t,n){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function aH(t,n){1&t&&(f(0,"h6")(1,"em"),g(2,"Cannot Run"),h()())}function oH(t,n){1&t&&(f(0,"h6",16),g(1,"Start"),h())}function sH(t,n){if(1&t&&(f(0,"div",2),x(1,iH,2,1,"span",3),D(2,"br"),f(3,"div",4),x(4,nH,5,8,"p",6),x(5,rH,3,0,"h6",3),x(6,aH,3,0,"h6",3),x(7,oH,2,0,"h6",15),h()()),2&t){const e=y(),i=at(3);p(1),b("ngIf",null!=e.index&&e.index>-1),p(2),b("ngClass",hn(8,g2,e.cannotRace))("ngbPopover",i)("disablePopover",""===e.popoverText),p(1),b("ngForOf",e.race.raceLegs),p(1),b("ngIf",e.showStartText&&e.race.isCompleted),p(1),b("ngIf",e.showStartText&&!e.race.isCompleted&&e.cannotRace),p(1),b("ngIf",e.showStartText&&!e.race.isCompleted&&!e.cannotRace)}}function lH(t,n){1&t&&D(0,"div",17),2&t&&b("innerHTML",y().popoverText,zt)}let $0=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.condensedVersion=!1,this.missingRacers=[],this.busyRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(i=>{if(null==e||0===e.selectedAnimals.length&&this.race.raceType!==Ie.trainingTrack)this.cannotRace=!0,this.missingRacers.push(i.courseType);else if((null==e?void 0:e.selectedAnimals.some(a=>a.raceCourseType===i.courseType))||this.race.raceType===Ie.trainingTrack){var r=null==e?void 0:e.selectedAnimals.find(a=>a.raceCourseType===i.courseType);this.race.raceType===Ie.trainingTrack&&(r=this.selectedAnimal),void 0!==r&&!this.lookupService.canAnimalRace(r)&&(this.cannotRace=!0,this.busyRacers.push(r))}else this.cannotRace=!0,this.missingRacers.push(i.courseType)}),void 0!==this.race.pinnacleConditions&&void 0!==e&&(this.race.pinnacleConditions.containsCondition(Lt[Lt.twoRacersOnly])&&e.selectedAnimals.length<2&&(this.cannotRace=!0),this.race.pinnacleConditions.containsCondition(Lt[Lt.threeRacersOnly])&&e.selectedAnimals.length<3&&(this.cannotRace=!0),this.race.pinnacleConditions.containsCondition(li[li.fourRacersOnly])&&e.selectedAnimals.length<4&&(this.cannotRace=!0)),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===Ut.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var i=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||(r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(i=!0),this.busyRacers.some(a=>a.raceCourseType===e.courseType)&&(i=!1)),i}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";this.missingRacers.forEach(r=>{e+="-Missing "+j[r]+" racer\n"}),this.busyRacers.forEach(r=>{e+="-"+r.name+" is active in another race\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===Ut.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon.");var i=this.lookupService.getPrimaryDeck();return void 0!==this.race.pinnacleConditions&&void 0!==i&&(this.race.pinnacleConditions.containsCondition(Lt[Lt.twoRacersOnly])&&i.selectedAnimals.length<2&&(e+="-You do not meet the Pinnacle conditions.\n"),this.race.pinnacleConditions.containsCondition(Lt[Lt.threeRacersOnly])&&i.selectedAnimals.length<3&&(e+="-You do not meet the Pinnacle conditions.\n"),this.race.pinnacleConditions.containsCondition(li[li.fourRacersOnly])&&i.selectedAnimals.length<4&&(e+="-You do not meet the Pinnacle conditions.\n")),e}getSuccessfulPopoverText(){var e="",i=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),i<this.race.raceLegs.length&&(e+="\n"),i+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Di))},t.\u0275cmp=bt({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText",selectedAnimal:"selectedAnimal",condensedVersion:"condensedVersion"},decls:4,vars:2,consts:[["class","raceDescription",4,"ngIf"],["popContent",""],[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[1,"flex"],[3,"ngClass",4,"ngFor","ngForOf"],["class","inline",4,"ngIf"],["class","keyword inline",4,"ngIf"],[3,"ngClass"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"],[1,"inline"],[1,"keyword","inline"],["class","keyword",4,"ngIf"],[1,"keyword"],[1,"popoverClass",3,"innerHTML"]],template:function(e,i){1&e&&(x(0,tH,12,14,"div",0),x(1,sH,8,10,"div",0),x(2,lH,1,1,"ng-template",null,1,ht)),2&e&&(b("ngIf",i.condensedVersion),p(1),b("ngIf",!i.condensedVersion))},directives:[hi,rn,Zr,cn],pipes:[no],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.inline[_ngcontent-%COMP%]{display:inline-block}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),t})();function cH(t,n){if(1&t){const e=de();f(0,"div",10),A("click",function(){const a=N(e).$implicit;return y().selectCircuitRace(a)}),D(1,"app-race-description",11),h()}if(2&t){const e=n.$implicit,i=n.index,r=y();av("circuitRace",i+1,""),b("ngClass",r.tutorialActive?"tutorialActive":""),p(1),b("index",i)("race",e)("showStartText",!0)}}function uH(t,n){if(1&t){const e=de();f(0,"div",12),A("click",function(){const a=N(e).$implicit;return y().selectLocalRace(a)}),D(1,"app-race-description",11),h()}if(2&t){const e=n.$implicit,i=n.index;av("localRace",i+1,""),p(1),b("index",i)("race",e)("showStartText",!0)}}function dH(t,n){if(1&t&&(f(0,"div",13),g(1),h()),2&t){const e=y();p(1),K(" ",e.circuitRankUpDescription," ")}}let hH=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new ut,this.tutorialActive=!1,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.handleTutorial(),this.availableLocalRaces=[],this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace());var i=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(s=>s.requiredRank===i);var r=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);this.availableCircuitRaces.forEach(s=>{void 0!==r&&(s.raceLegs=this.globalService.reorganizeLegsByDeckOrder(s.raceLegs,r))}),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var a=900,o=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==o&&(a=o.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=Vr(function*(l){var c=a-e.globalService.globalVar.freeRaceTimePeriodCounter,u=Math.floor(c/60),d=c-60*u,v=Math.floor(d).toString();d<10&&(v=d<1||d>59?"00":String(v).padStart(2,"0")),e.getRacesRequiredForMedal(),e.freeRaceTimer=u+":"+v,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(l){return s.apply(this,arguments)}}())}selectCircuitRace(e){var i=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(s=>s.raceCourseType===a.courseType))||(i=!1);var o=null==r?void 0:r.selectedAnimals.find(s=>s.raceCourseType===a.courseType);void 0!==o&&!this.lookupService.canAnimalRace(o)&&(i=!1)}),e.isCompleted&&(i=!1),!this.globalService.globalVar.tutorials.tutorialCompleted&&4===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1),i&&this.raceSelected.emit(e)):i=!1}selectLocalRace(e){var i=!0,r=e.localRaceType===Ut.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(s=>s.raceCourseType===o.courseType))||(i=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(i=!1),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}getRacesRequiredForMedal(){var e=this.globalService.globalVar.resources.find(u=>"International Races"===u.name),i=this.globalService.globalVar.resources.find(u=>"National Races"===u.name);if(null!=e&&e.amount>0){var r=5,a=this.globalService.globalVar.modifiers.find(u=>"internationalRacesToMedalModifier"===u.text);null!=a&&(r=a.value),this.winsNeededUntilNextMedal=r-this.globalService.globalVar.nationalRaceCountdown}else if(null!=i&&i.amount>0){var o=12,s=this.globalService.globalVar.modifiers.find(u=>"nationalRacesToMedalModifier"===u.text);null!=s&&(o=s.value),this.winsNeededUntilNextMedal=o-this.globalService.globalVar.nationalRaceCountdown}else{var l=50,c=this.globalService.globalVar.modifiers.find(u=>"freeRacesToMedalModifier"===u.text);null!=c&&(l=c.value),this.winsNeededUntilNextMedal=l-this.globalService.globalVar.nationalRaceCountdown}}handleTutorial(){var e,i;!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&5===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(r=>r.type===H.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(i=this.globalService.globalVar.animals.find(r=>r.type===H.Hare))||void 0===i?void 0:i.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Fn),E(Di),E(Bn))},t.\u0275cmp=bt({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:28,vars:8,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[3,"click"],[1,"popoverClass"]],template:function(e,i){if(1&e&&(f(0,"div",0),D(1,"app-animal-deck")(2,"hr"),f(3,"div",1)(4,"span",2),g(5,"Circuit Rank "),f(6,"strong"),g(7),h()(),D(8,"br")(9,"br"),h(),f(10,"div",3),x(11,cH,2,7,"div",4),h(),D(12,"hr"),f(13,"div",5)(14,"span",6),g(15,"Free Races"),h(),D(16,"br"),f(17,"em"),g(18),h(),D(19,"br"),f(20,"em"),g(21),h(),D(22,"br")(23,"br"),f(24,"div",7),x(25,uH,2,6,"div",8),h()()(),x(26,dH,2,1,"ng-template",null,9,ht)),2&e){const r=at(27);p(4),b("ngbPopover",r),p(3),et(i.circuitRank),p(4),b("ngForOf",i.availableCircuitRaces),p(7),rh(" ",i.freeRacesRemaining," of ",i.totalFreeRaces," remaining -- resets in ",i.freeRaceTimer,""),p(3),K("Wins needed until next medal: ",i.winsNeededUntilNextMedal,""),p(4),b("ngForOf",i.availableLocalRaces)}},directives:[j0,Zr,cn,rn,$0],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}#localRaceSection[_ngcontent-%COMP%]{text-align:center}']}),t})();function fH(t,n){if(1&t){const e=de();f(0,"div",9)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return N(e),y(2).toggleRace("monoRaceToggled")}),g(4,"-"),h()(),f(5,"span",13),g(6,"Mono Race "),f(7,"strong"),g(8),h()(),D(9,"span",11),h(),f(10,"app-race-description",14),A("click",function(){N(e);const r=y(2);return r.selectLocalRace(r.availableMonoRace)}),h()()}if(2&t){const e=y(2);p(8),et(e.monoRaceRank),p(2),b("race",e.availableMonoRace)("showStartText",!0)}}function pH(t,n){1&t&&(f(0,"div",9),g(1," Next Mono Race Available After Circuit Rank Up "),h())}function gH(t,n){if(1&t&&(f(0,"div",7),x(1,fH,11,3,"div",8),x(2,pH,2,0,"div",8),D(3,"hr"),h()),2&t){const e=y();p(1),b("ngIf",null!=e.availableMonoRace),p(1),b("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function vH(t,n){if(1&t){const e=de();f(0,"div",16),A("click",function(){N(e);const r=y(2);return r.selectLocalRace(r.availableMonoRace)}),f(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return N(e),y(2).toggleRace("monoRaceToggled")}),g(4,"+"),h()(),f(5,"span",17),g(6,"Mono Race "),f(7,"strong"),g(8),h()(),f(9,"div",18)(10,"app-race-description",19),A("click",function(){N(e);const r=y(2);return r.selectLocalRace(r.availableMonoRace)}),h()()()()}if(2&t){const e=y(2);p(8),et(e.monoRaceRank),p(2),b("race",e.availableMonoRace)("showStartText",!0)("condensedVersion",!0)}}function mH(t,n){1&t&&(f(0,"div",9),g(1," Next Mono Race Available After Circuit Rank Up "),h())}function bH(t,n){if(1&t&&(f(0,"div",7),x(1,vH,11,4,"div",15),x(2,mH,2,0,"div",8),D(3,"hr"),h()),2&t){const e=y();p(1),b("ngIf",null!=e.availableMonoRace),p(1),b("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function _H(t,n){if(1&t){const e=de();f(0,"div",22)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return N(e),y(2).toggleRace("duoRaceToggled")}),g(4,"-"),h()(),f(5,"span",13),g(6,"Duo Race "),f(7,"strong"),g(8),h()(),D(9,"span",11),h(),f(10,"app-race-description",14),A("click",function(){N(e);const r=y(2);return r.selectLocalRace(r.availableDuoRace)}),h()()}if(2&t){const e=y(2);p(8),et(e.duoRaceRank),p(2),b("race",e.availableDuoRace)("showStartText",!0)}}function yH(t,n){1&t&&(f(0,"div",22),g(1," Next Duo Race Available After Circuit Rank Up "),h())}function wH(t,n){if(1&t&&(f(0,"div",20),x(1,_H,11,3,"div",21),x(2,yH,2,0,"div",21),D(3,"hr"),h()),2&t){const e=y();p(1),b("ngIf",null!=e.availableDuoRace),p(1),b("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function CH(t,n){if(1&t){const e=de();f(0,"div",22)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return N(e),y(2).toggleRace("duoRaceToggled")}),g(4,"+"),h()(),f(5,"span",17),g(6,"Duo Race "),f(7,"strong"),g(8),h()(),f(9,"div",18)(10,"app-race-description",19),A("click",function(){N(e);const r=y(2);return r.selectLocalRace(r.availableDuoRace)}),h()()()()}if(2&t){const e=y(2);p(8),et(e.duoRaceRank),p(2),b("race",e.availableDuoRace)("showStartText",!0)("condensedVersion",!0)}}function SH(t,n){1&t&&(f(0,"div",22),g(1," Next Duo Race Available After Circuit Rank Up "),h())}function TH(t,n){if(1&t&&(f(0,"div",20),x(1,CH,11,4,"div",21),x(2,SH,2,0,"div",21),D(3,"hr"),h()),2&t){const e=y();p(1),b("ngIf",null!=e.availableDuoRace),p(1),b("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function DH(t,n){if(1&t){const e=de();f(0,"div",25)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return N(e),y(2).toggleRace("rainbowRaceToggled")}),g(4,"-"),h()(),f(5,"span",13),g(6,"Rainbow Race "),f(7,"strong"),g(8),h()(),D(9,"span",11),h(),f(10,"app-race-description",14),A("click",function(){N(e);const r=y(2);return r.selectLocalRace(r.availableRainbowRace)}),h()()}if(2&t){const e=y(2);p(8),et(e.rainbowRaceRank),p(2),b("race",e.availableRainbowRace)("showStartText",!0)}}function RH(t,n){1&t&&(f(0,"div",25),g(1," Next Rainbow Race Available After Circuit Rank Up "),h())}function xH(t,n){if(1&t&&(f(0,"div",23),x(1,DH,11,3,"div",24),x(2,RH,2,0,"div",24),D(3,"hr"),h()),2&t){const e=y();p(1),b("ngIf",null!=e.availableRainbowRace),p(1),b("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}function kH(t,n){if(1&t){const e=de();f(0,"div",25)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return N(e),y(2).toggleRace("rainbowRaceToggled")}),g(4,"+"),h()(),f(5,"span",17),g(6,"Rainbow Race "),f(7,"strong"),g(8),h()(),f(9,"div",18)(10,"app-race-description",19),A("click",function(){N(e);const r=y(2);return r.selectLocalRace(r.availableRainbowRace)}),h()()()()}if(2&t){const e=y(2);p(8),et(e.rainbowRaceRank),p(2),b("race",e.availableRainbowRace)("showStartText",!0)("condensedVersion",!0)}}function MH(t,n){1&t&&(f(0,"div",25),g(1," Next Rainbow Race Available After Circuit Rank Up "),h())}function AH(t,n){if(1&t&&(f(0,"div",23),x(1,kH,11,4,"div",24),x(2,MH,2,0,"div",24),D(3,"hr"),h()),2&t){const e=y();p(1),b("ngIf",null!=e.availableRainbowRace),p(1),b("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}function PH(t,n){if(1&t){const e=de();f(0,"div",28)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return N(e),y(2).toggleRace("pinnacleRaceToggled")}),g(4,"-"),h()(),f(5,"span",13),g(6,"Pinnacle Floor "),f(7,"strong"),g(8),h()(),D(9,"span",11),h(),f(10,"span")(11,"em"),g(12,"Floor Conditions:"),h(),g(13),h(),D(14,"br"),f(15,"app-race-description",14),A("click",function(){N(e);const r=y(2);return r.selectLocalRace(r.availablePinnacleRace)}),h()()}if(2&t){const e=y(2);p(8),et(e.pinnacleRaceFloor),p(5),K(" ",e.globalService.getPinnacleFloorConditionDescription(e.availablePinnacleRace.pinnacleConditions)," "),p(2),b("race",e.availablePinnacleRace)("showStartText",!0)}}function EH(t,n){1&t&&(f(0,"div",28),g(1," Next Pinnacle Floor Available After Circuit Rank Up "),h())}function IH(t,n){if(1&t&&(f(0,"div",26),x(1,PH,16,4,"div",27),x(2,EH,2,0,"div",27),D(3,"hr"),h()),2&t){const e=y();p(1),b("ngIf",null!=e.availablePinnacleRace),p(1),b("ngIf",void 0===e.availablePinnacleRace||null==e.availablePinnacleRace)}}function VH(t,n){if(1&t){const e=de();f(0,"div",28)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return N(e),y(2).toggleRace("pinnacleRaceToggled")}),g(4,"+"),h()(),f(5,"span",17),g(6,"Pinnacle Floor "),f(7,"strong"),g(8),h()(),f(9,"div",18)(10,"app-race-description",19),A("click",function(){N(e);const r=y(2);return r.selectLocalRace(r.availablePinnacleRace)}),h()()(),f(11,"span")(12,"em"),g(13,"Floor Conditions:"),h(),g(14),h()()}if(2&t){const e=y(2);p(8),et(e.pinnacleRaceFloor),p(2),b("race",e.availablePinnacleRace)("showStartText",!0)("condensedVersion",!0),p(4),K(" ",e.globalService.getPinnacleFloorConditionDescription(e.availablePinnacleRace.pinnacleConditions)," ")}}function OH(t,n){1&t&&(f(0,"div",28),g(1," Next Pinnacle Floor Available After Circuit Rank Up "),h())}function NH(t,n){if(1&t&&(f(0,"div",26),x(1,VH,15,5,"div",27),x(2,OH,2,0,"div",27),D(3,"hr"),h()),2&t){const e=y();p(1),b("ngIf",null!=e.availablePinnacleRace),p(1),b("ngIf",void 0===e.availablePinnacleRace||null==e.availablePinnacleRace)}}let FH=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new ut,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10,this.isMonoRaceToggled=!1,this.isDuoRaceToggled=!1,this.isRainbowRaceToggled=!1,this.isPinnacleRaceToggled=!1}ngOnInit(){this.availableLocalRaces=[],this.isMonoRaceToggled=this.globalService.globalVar.settings.get("monoRaceToggled"),this.isDuoRaceToggled=this.globalService.globalVar.settings.get("duoRaceToggled"),this.isRainbowRaceToggled=this.globalService.globalVar.settings.get("rainbowRaceToggled"),this.isPinnacleRaceToggled=this.globalService.globalVar.settings.get("pinnacleRaceToggled");var e=this.getNextAvailableSpecialRace(Ut.Mono);void 0!==e&&(this.availableMonoRace=e);var i=this.getNextAvailableSpecialRace(Ut.Duo);void 0!==i&&(this.availableDuoRace=i);var r=this.getNextAvailableSpecialRace(Ut.Rainbow);void 0!==r&&(this.availableRainbowRace=r);var a=this.getNextAvailableSpecialRace(Ut.Pinnacle);void 0!==a&&(this.availablePinnacleRace=a);var o=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);null!=o&&(null!=this.availableDuoRace&&(this.availableDuoRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableDuoRace.raceLegs,o)),null!=this.availableRainbowRace&&(this.availableRainbowRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableRainbowRace.raceLegs,o))),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString()),null!=this.availablePinnacleRace&&(this.pinnacleRaceFloor=this.utilityService.getNumericValueOfCircuitRank(this.availablePinnacleRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank),null!=this.availablePinnacleRace&&(this.pinnacleRaceFloor=this.availablePinnacleRace.requiredRank)),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.arePinnacleRacesAvailable=this.lookupService.isItemUnlocked("thePinnacle")}getNextAvailableSpecialRace(e){return e===Ut.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===Ut.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===Ut.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),e===Ut.Pinnacle&&this.globalService.GeneratePinnacleRaces(this.globalService.globalVar.pinnacleFloor),this.globalService.globalVar.localRaces.find(i=>i.localRaceType===e)}sortByRankRequired(e,i){return e.requiredRank>i.requiredRank?1:i.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var i=!0,r=e.localRaceType===Ut.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(l=>l.raceCourseType===o.courseType))||(i=!1);var s=null==a?void 0:a.selectedAnimals.find(l=>l.raceCourseType===o.courseType);void 0!==s&&!this.lookupService.canAnimalRace(s)&&(i=!1)}),void 0!==e.pinnacleConditions&&(e.pinnacleConditions.containsCondition(Lt[Lt.twoRacersOnly])&&a.selectedAnimals.length<2&&(i=!1),e.pinnacleConditions.containsCondition(Lt[Lt.threeRacersOnly])&&a.selectedAnimals.length<3&&(i=!1),e.pinnacleConditions.containsCondition(li[li.fourRacersOnly])&&a.selectedAnimals.length<4&&(i=!1)),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}toggleRace(e){var i=this.globalService.globalVar.settings.get(e);this.globalService.globalVar.settings.set(e,!i),"monoRaceToggled"===e&&(this.isMonoRaceToggled=!this.isMonoRaceToggled),"duoRaceToggled"===e&&(this.isDuoRaceToggled=!this.isDuoRaceToggled),"rainbowRaceToggled"===e&&(this.isRainbowRaceToggled=!this.isRainbowRaceToggled),"pinnacleRaceToggled"===e&&(this.isPinnacleRaceToggled=!this.isPinnacleRaceToggled)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Fn),E(Di),E(Bn))},t.\u0275cmp=bt({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:13,vars:8,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","pinnacleRaceSection",4,"ngIf"],["id","monoRaceSection"],["class","monoRace",4,"ngIf"],[1,"monoRace"],[1,"minimizer"],[1,"minimizerSideSpacing"],[3,"click"],[1,"s4Heading"],[3,"race","showStartText","click"],["class","monoRace",3,"click",4,"ngIf"],[1,"monoRace",3,"click"],[1,"s4Heading","raceNameSpacing"],[1,"inlineDescription"],[3,"race","showStartText","condensedVersion","click"],["id","duoRaceSection"],["class","duoRace",4,"ngIf"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace"],["id","pinnacleRaceSection"],["class","pinnacleRace",4,"ngIf"],[1,"pinnacleRace"]],template:function(e,i){1&e&&(f(0,"div",0),D(1,"div",1)(2,"app-animal-deck")(3,"hr"),f(4,"div",2),x(5,gH,4,2,"div",3),x(6,bH,4,2,"div",3),x(7,wH,4,2,"div",4),x(8,TH,4,2,"div",4),x(9,xH,4,2,"div",5),x(10,AH,4,2,"div",5),x(11,IH,4,2,"div",6),x(12,NH,4,2,"div",6),h()()),2&e&&(p(5),b("ngIf",i.areMonoRacesAvailable&&!i.isMonoRaceToggled),p(1),b("ngIf",i.areMonoRacesAvailable&&i.isMonoRaceToggled),p(1),b("ngIf",i.areDuoRacesAvailable&&!i.isDuoRaceToggled),p(1),b("ngIf",i.areDuoRacesAvailable&&i.isDuoRaceToggled),p(1),b("ngIf",i.areRainbowRacesAvailable&&!i.isRainbowRaceToggled),p(1),b("ngIf",i.areRainbowRacesAvailable&&i.isRainbowRaceToggled),p(1),b("ngIf",i.arePinnacleRacesAvailable&&!i.isPinnacleRaceToggled),p(1),b("ngIf",i.arePinnacleRacesAvailable&&i.isPinnacleRaceToggled))},directives:[j0,hi,$0],styles:[".allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.minimizer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.minimizerSideSpacing[_ngcontent-%COMP%]{width:3rem}.inlineDescription[_ngcontent-%COMP%]{width:40%;margin-top:auto;margin-bottom:auto}.raceNameSpacing[_ngcontent-%COMP%]{width:20%}"]}),t})();function BH(t,n){1&t&&(f(0,"div"),D(1,"br"),h())}function LH(t,n){1&t&&(f(0,"span",8),g(1," Will Start Race "),h())}function UH(t,n){if(1&t){const e=de();f(0,"button",12),A("click",function(){N(e);const r=y(5).$implicit;return y().chooseToStartRace(r)}),g(1,"Choose To Start Race"),h()}}function HH(t,n){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=y(6);p(1),b("ngbPopover",e.getRestingPopover())}}function GH(t,n){if(1&t&&(f(0,"span"),x(1,UH,2,0,"button",11),x(2,HH,3,1,"span",6),h()),2&t){const e=y(4).$implicit,i=y();p(1),b("ngIf",!i.isSetToRelay(e)&&i.canRelay(e)),p(1),b("ngIf",!i.isSetToRelay(e)&&!i.canRelay(e))}}function zH(t,n){if(1&t&&(f(0,"div"),x(1,LH,2,0,"span",10),x(2,GH,3,2,"span",6),h()),2&t){const e=y(3).$implicit,i=y();p(1),b("ngIf",i.isCurrentlyRacing(e)),p(1),b("ngIf",!i.isCurrentlyRacing(e))}}function jH(t,n){1&t&&(f(0,"span",8),g(1," Currently Racing "),h())}function $H(t,n){if(1&t){const e=de();f(0,"button",14),A("click",function(){N(e);const r=y(4).$implicit;return y().pullFromRace(r)}),g(1," Pull From Race "),h()}}function WH(t,n){if(1&t){const e=de();f(0,"button",12),A("click",function(){N(e);const r=y(5).$implicit;return y().relayAnimal(r)}),g(1,"Relay"),h()}}function qH(t,n){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=y(6);p(1),b("ngbPopover",e.getRestingPopover())}}function XH(t,n){1&t&&(f(0,"span"),g(1,"Set To Relay"),h())}function YH(t,n){if(1&t&&(f(0,"span"),x(1,WH,2,0,"button",11),x(2,qH,3,1,"span",6),x(3,XH,2,0,"span",6),h()),2&t){const e=y(4).$implicit,i=y();p(1),b("ngIf",!i.isSetToRelay(e)&&i.canRelay(e)),p(1),b("ngIf",!i.isSetToRelay(e)&&!i.canRelay(e)),p(1),b("ngIf",i.isSetToRelay(e))}}function QH(t,n){if(1&t&&(f(0,"div"),x(1,jH,2,0,"span",10),x(2,$H,2,0,"button",13),x(3,YH,4,3,"span",6),h()),2&t){const e=y(3).$implicit,i=y();p(1),b("ngIf",i.isCurrentlyRacing(e)),p(1),b("ngIf",i.isCurrentlyRacing(e)),p(1),b("ngIf",!i.isCurrentlyRacing(e))}}function KH(t,n){if(1&t&&(f(0,"div"),x(1,zH,3,2,"div",6),x(2,QH,4,3,"div",6),h()),2&t){const e=y(3);p(1),b("ngIf",!e.enteredEvent()),p(1),b("ngIf",e.enteredEvent())}}function ZH(t,n){if(1&t&&(f(0,"div")(1,"em"),g(2),h()()),2&t){const e=y(3);p(2),K("Breed Level ",e.breedLevelRequired," Required")}}function JH(t,n){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"div")(3,"span",7)(4,"span",8),g(5,"Morale:"),h(),g(6),Ot(7,"number"),h(),D(8,"br"),f(9,"span",7)(10,"span",8),g(11,"Energy:"),h(),g(12),Ot(13,"number"),h(),D(14,"br"),x(15,BH,2,0,"div",6),D(16,"div",9),h(),D(17,"br")(18,"br"),x(19,KH,3,2,"div",6),x(20,ZH,3,1,"div",6),h()),2&t){const e=y().$implicit,i=y();p(3),b("ngbPopover",i.getMoralePopover(e)),p(3),K(" ",oi(7,8,i.getMorale(e),"1.2-2"),"%"),p(3),b("ngbPopover",i.getEnergyPopover(e)),p(3),K(" ",oi(13,11,i.getExhaustion(e),"1.2-2"),"%"),p(3),b("ngIf",""===i.getUseCountInformation(e)),p(1),b("innerHTML",i.getUseCountInformation(e),zt),p(3),b("ngIf",i.canEnterGrandPrix(e)),p(1),b("ngIf",!i.canEnterGrandPrix(e))}}function e9(t,n){if(1&t&&(f(0,"div",4)(1,"span",5),g(2),h(),x(3,JH,21,14,"div",6),h()),2&t){const e=n.$implicit,i=y();p(1),b("ngClass",i.getColorClass(e)),p(1),et(e.name),p(1),b("ngIf",i.hasEventStarted()&&!i.eventCompleted())}}let t9=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.componentCommunicationService=i,this.lookupService=r,this.utilityService=a,this.organizedAnimals=[]}ngOnInit(){var e=this.globalService.globalVar.animalDecks.find(o=>o.isEventDeck);if(void 0!==e&&(this.deck=e),null!=this.deck)if(this.deck.isCourseOrderActive){for(var i=0;i<this.deck.selectedAnimals.length;i++)if(this.deck.courseTypeOrder.length>i){var r=this.deck.courseTypeOrder[i],a=this.deck.selectedAnimals.find(o=>o.raceCourseType===r);void 0!==a&&this.organizedAnimals.push(a)}}else this.deck.selectedAnimals.forEach(o=>{this.organizedAnimals.push(o)});this.breedLevelRequired=this.getBreedLevelRequired()}getMorale(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:100*i.morale}getExhaustion(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:100*i.exhaustionStatReduction}eventCompleted(){return this.globalService.globalVar.eventRaceData.isGrandPrixCompleted}hasEventStarted(){return!(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime)}enteredEvent(){return this.globalService.globalVar.eventRaceData.isRunning}canEnterGrandPrix(e){var i=!1,r=this.getBreedLevelRequired(),a=this.globalService.globalVar.animals.find(o=>o.type===e.type);return void 0!==a&&a.breedLevel>=r&&(i=!0),i}getBreedLevelRequired(){var e=50,i=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}chooseToStartRace(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==i){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==i?void 0:i.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isCurrentlyRacing=!1}),i.isCurrentlyRacing=!0)}}}isCurrentlyRacing(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.isCurrentlyRacing}isSetToRelay(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.isSetToRelay}canRelay(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.exhaustionStatReduction>.5}relayAnimal(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==i){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==i?void 0:i.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isSetToRelay=!1}),i.isSetToRelay=!0)}}}pullFromRace(e){this.globalService.stopGrandPrixRace()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}getRestingPopover(){return"Racer must be above 50% energy to race"}getMoralePopover(e){var i="",r=this.getMorale(e);if(void 0!==r){var a=.9,o=this.globalService.globalVar.modifiers.find(l=>"exhaustionStatLossModifier"===l.text);void 0!==o&&(a=o.value);var s=1-a;a=1-(s*=1/(r/100)),i="Your current Morale is "+r.toFixed(2)+"%. Your energy will reduce by "+(100*(1-a)).toFixed(2)+"% every time you run out of stamina."}return i}getEnergyPopover(e){return""+"Your current Energy is "+this.getExhaustion(e).toFixed(2)+"%. Your stats are reduced to this amount while racing in the grand prix."}getUseCountInformation(e){var i="",r=this.globalService.globalVar.eventRaceData.eventAbilityData,a=this.globalService.globalVar.animals.find(o=>o.type===e.type);if(null!=a)return a.type===H.Horse&&"Inspiration"===a.ability.name&&(i+="Inspiration Relay Count: "+r.inspirationUseCount),a.type===H.Cheetah&&"On The Hunt"===a.ability.name&&(i+="On The Hunt Use Count: "+r.onTheHuntUseCount+" / "+r.onTheHuntUseCap),a.type===H.Goat&&("Sure-footed"===a.ability.name&&(i+="Sure-footed Use Count: "+r.sureFootedUseCount+" / "+r.sureFootedUseCap),"Deep Breathing"===a.ability.name&&(i+="Deep Breathing Relay Count: "+r.deepBreathingUseCount+" / "+r.deepBreathingUseCap)),a.type===H.Gecko&&"Night Vision"===a.ability.name&&(i+="Night Vision Use Count: "+r.nightVisionUseCount+" / "+r.nightVisionUseCap),a.type===H.Dolphin&&("Flowing Current"===a.ability.name&&(i+="Flowing Current Relay Count: "+r.flowingCurrentUseCount),"Navigator"===a.ability.name&&(i+="Navigator Relay Count: "+r.navigatorUseCount)),a.type===H.Octopus&&"Big Brain"===a.ability.name&&(i+="Big Brain Relay Count: "+r.bigBrainUseCount+" / "+r.bigBrainUseCap),a.type===H.Penguin&&"Quick Toboggan"===a.ability.name&&(i+="Quick Toboggan Use Count: "+r.quickTobogganUseCount+" / "+r.quickTobogganUseCap),a.type===H.Caribou&&("Herd Mentality"===a.ability.name&&(i+="Herd Mentality Relay Count: "+r.herdMentalityUseCount+" / "+r.herdMentalityUseCap),"Special Delivery"===a.ability.name&&(i+="Special Delivery Relay Count: "+r.specialDeliveryUseCount+" / "+r.specialDeliveryUseCap)),this.utilityService.getSanitizedHtml(i)}goToDeckView(){this.componentCommunicationService.setNewView(Tt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(mn),E(Di),E(Fn))},t.\u0275cmp=bt({type:t,selectors:[["app-event-animal-deck"]],decls:7,vars:2,consts:[[1,"deckName"],[1,"clickableText",3,"click"],[1,"flex"],["class","eventAnimal",4,"ngFor","ngForOf"],[1,"eventAnimal"],[1,"coloredText",3,"ngClass"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"keyword"],[3,"innerHTML"],["class","keyword",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","keyword",3,"click",4,"ngIf"],[1,"keyword",3,"click"]],template:function(e,i){1&e&&(f(0,"div")(1,"div",0)(2,"strong",1),A("click",function(){return i.goToDeckView()}),g(3),h()(),D(4,"br"),f(5,"div",2),x(6,e9,4,3,"div",3),h()()),2&e&&(p(3),et(i.deck.name),p(3),b("ngForOf",i.organizedAnimals))},directives:[cn,rn,hi,Zr],pipes:[no],styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.deckName[_ngcontent-%COMP%]{text-align:center}.eventAnimal[_ngcontent-%COMP%]{flex:1}"]}),t})();const i9=["loadingModal"];function n9(t,n){1&t&&(f(0,"p",6),g(1,"The Grand Prix is currently under construction. "),D(2,"br")(3,"br"),f(4,"em"),g(5,"I'm fixing a few bugs and making some improvements related to the Grand Prix but it will reopen soon!"),h()())}function r9(t,n){if(1&t){const e=de();f(0,"div",14),A("click",function(){N(e);const r=y(3),a=at(9);return r.selectEventRace(a)}),g(1),D(2,"br"),h()}if(2&t){const e=y(3);b("ngbPopover",at(7)),p(1),K("Bonus Time: ",e.bonusTime," ")}}function a9(t,n){1&t&&(f(0,"h6",20),g(1,"View Race"),h())}function o9(t,n){1&t&&(f(0,"h6",24)(1,"em"),g(2,"Please Wait -- Offline Time Is Calculating"),h()())}function s9(t,n){1&t&&(f(0,"h6",20),g(1,"Start"),h())}function l9(t,n){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function c9(t,n){if(1&t&&(f(0,"div",25),g(1),h()),2&t){const e=y(4);p(1),K(" ",e.popoverText," ")}}const u9=function(t){return{raceNotAllowed:t}};function d9(t,n){if(1&t){const e=de();f(0,"div",15)(1,"div")(2,"span",16),g(3,"Grand Prix "),f(4,"strong"),g(5),h()(),D(6,"br"),f(7,"span",17),A("click",function(){N(e);const r=y(3),a=at(3);return r.openRewardsModal(a)}),g(8),h(),D(9,"br")(10,"br"),f(11,"div",18)(12,"div",19),A("click",function(){N(e);const r=y(3),a=at(9);return r.selectEventRace(a)}),f(13,"span")(14,"span",20),g(15,"Forecast:"),h(),g(16),h(),D(17,"br"),g(18),Ot(19,"number"),D(20,"br"),x(21,a9,2,0,"h6",21),x(22,o9,3,0,"h6",22),x(23,s9,2,0,"h6",21),x(24,l9,3,0,"h6",9),h()(),x(25,c9,2,1,"ng-template",null,23,ht),h()()}if(2&t){const e=at(26),i=y(3);p(5),et(i.raceRank),p(3),Wi("",i.globalService.globalVar.eventRaceData.remainingRewards," / ",i.globalService.globalVar.eventRaceData.totalRewards," rewards remaining"),p(4),b("ngClass",hn(15,u9,i.grandPrixData.isCatchingUp))("ngbPopover",e)("disablePopover",""===i.popoverText),p(4),K(" ",void 0===i.grandPrixData.weatherCluster?"Unknown":i.lookupService.getWeatherClusterFromEnum(i.grandPrixData.weatherCluster),""),p(2),K(" ",oi(19,12,i.remainingMeters,"1.")," Meters Remaining "),p(3),b("ngIf",i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted&&!i.grandPrixData.isCatchingUp),p(1),b("ngIf",i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted&&i.grandPrixData.isCatchingUp),p(1),b("ngIf",!i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted),p(1),b("ngIf",!i.grandPrixData.isRunning&&i.grandPrixData.isGrandPrixCompleted)}}function h9(t,n){if(1&t){const e=de();f(0,"div")(1,"label",26),g(2,"Your animals will automatically relay the segment after they lose energy and it is below "),h(),f(3,"input",27),A("ngModelChange",function(r){return N(e),y(3).relayEnergy=r})("change",function(){return N(e),y(3).updateRelayEnergy()}),h(),g(4," %. "),f(5,"em"),g(6,"Must be between 50% and 99%."),h(),D(7,"br"),f(8,"span",28)(9,"label")(10,"input",29),A("ngModelChange",function(r){return N(e),y(3).doNotAutoRelayBelowEnergyFloor=r})("input",function(){return N(e),y(3).doNotAutoRelayBelowEnergyFloorToggle()}),h(),f(11,"span"),g(12,"Do not relay to animals below "),f(13,"strong"),g(14),h(),g(15,"% energy."),h()()()()}if(2&t){const e=y(3);p(3),b("ngModel",e.relayEnergy),p(7),b("ngModel",e.doNotAutoRelayBelowEnergyFloor),p(4),et(e.relayEnergy)}}function f9(t,n){1&t&&(f(0,"div",32),g(1," None "),h())}function p9(t,n){if(1&t&&(f(0,"td")(1,"span",20),g(2),h(),g(3),h()),2&t){const e=n.$implicit;p(2),et(e.name),p(1),K(": ",e.amount,"")}}function g9(t,n){if(1&t&&(f(0,"tr"),x(1,p9,4,2,"td",33),h()),2&t){const e=n.$implicit;p(1),b("ngForOf",e)}}function v9(t,n){if(1&t&&(f(0,"div",32)(1,"table"),x(2,g9,2,1,"tr",33),h()()),2&t){const e=y(4);p(2),b("ngForOf",e.rewardRows)}}function m9(t,n){if(1&t&&(f(0,"div"),D(1,"br")(2,"br"),f(3,"div",30)(4,"span",16),g(5,"Previous Grand Prix Rewards"),h(),x(6,f9,2,0,"div",31),x(7,v9,3,1,"div",31),h()()),2&t){const e=y(3);p(6),b("ngIf",0===e.previousRaceRewardList.length),p(1),b("ngIf",e.previousRaceRewardList.length>0)}}function b9(t,n){if(1&t){const e=de();f(0,"div")(1,"div"),g(2),D(3,"br"),x(4,r9,3,2,"div",10),f(5,"button",11),A("click",function(){N(e);const r=y(2),a=at(5);return r.openInfoModal(a)}),g(6,"Grand Prix Info"),h(),f(7,"button",12),A("click",function(){return N(e),y(2).goToTokenShop()}),g(8,"Token Shop"),h(),D(9,"br")(10,"br"),h(),D(11,"br"),x(12,d9,27,17,"div",13),D(13,"br"),f(14,"div"),D(15,"app-event-animal-deck"),h(),D(16,"br"),x(17,h9,16,3,"div",9),x(18,m9,8,2,"div",9),h()}if(2&t){const e=y(2);p(2),Wi(" ",e.eventRaceNotice," ",e.eventRaceTimer," "),p(2),b("ngIf",""!==e.bonusTime),p(8),b("ngIf",e.isEventRaceAvailable),p(5),b("ngIf",e.isEventRaceAvailable),p(1),b("ngIf",null!=e.previousRaceRewardList&&!e.isEventRaceAvailable)}}function _9(t,n){1&t&&(f(0,"div"),g(1," Nothing here yet, but maybe as you climb the circuit ranks you might be invited to a new type of race. "),h())}function y9(t,n){if(1&t&&(f(0,"div",7),D(1,"div",8),x(2,b9,19,6,"div",9),x(3,_9,2,0,"div",9),h()),2&t){const e=y();p(2),b("ngIf",e.grandPrixUnlocked),p(1),b("ngIf",!e.grandPrixUnlocked)}}function w9(t,n){if(1&t){const e=de();f(0,"div",34)(1,"div",35)(2,"h4",36),g(3,"Grand Prix Rewards"),h(),f(4,"button",37),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",38)(7,"div"),g(8),Ot(9,"number"),Ot(10,"number"),D(11,"br")(12,"br"),g(13),Ot(14,"number"),Ot(15,"number"),D(16,"br")(17,"br")(18,"div",39)(19,"div",39)(20,"br")(21,"div",39)(22,"div",39),h()(),f(23,"div",40)(24,"button",41),A("click",function(){return N(e).$implicit.dismiss()}),g(25,"Close"),h()()()}if(2&t){const e=y();p(8),rv(" The further you go in the Grand Prix invitational, the more rewards you'll receive. Every ",oi(9,10,e.coinRewardInterval,"1.")," meters, you'll receive ",e.coinRewardAmount," Coins. Every ",oi(10,13,e.renownRewardInterval,"1.")," meters, you'll receive ",e.renownRewardAmount," Renown. Also, you'll be able to obtain rare tokens that can be spent on unique upgrades. "),p(5),Wi(" Distance Covered: ",oi(14,16,(e.grandPrixData.totalDistance-e.remainingMeters).toFixed(0),"1.")," / ",oi(15,19,e.grandPrixData.totalDistance,"1.")," "),p(5),b("innerHTML",e.getGrandPrixCoinRewardsPopover(),zt),p(1),b("innerHTML",e.getGrandPrixRenownRewardsPopover(),zt),p(2),b("innerHTML",e.getGrandPrixFoodRewardsPopover(),zt),p(1),b("innerHTML",e.getGrandPrixTokenRewardsPopover(),zt)}}function C9(t,n){if(1&t){const e=de();f(0,"div",34)(1,"div",35)(2,"h4",36),g(3,"Grand Prix Info"),h(),f(4,"button",37),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",38)(7,"div"),g(8," You've been invited to the "),f(9,"span",20),g(10,"Grand Prix"),h(),g(11," invitational, which is a marathon style race that runs for 51 hours twice a week. You can start the race at any time during the start and stop point of the Grand Prix. "),f(12,"b"),g(13,"It will run on its own in the background -- you don't have to watch your animals race for it to run."),h(),g(14," You have the option to view the race as desired by clicking the race. The weekly start and end times are: "),D(15,"br")(16,"br"),f(17,"span",20),g(18,"Weekday Marathon"),h(),g(19),D(20,"br"),f(21,"span",20),g(22,"Weekend Marathon"),h(),g(23),D(24,"br")(25,"br"),g(26),D(27,"br")(28,"br"),f(29,"span",20),g(30,"Morale"),h(),g(31," - This affects how much your stats reduce when running out of stamina. By default, your stats will reduce by 10% while Morale is at 100%. Morale can range from 50% to 300%. Gain Morale by completing segments and Bursting. Lose Morale when you stumble or lose focus. "),D(32,"br"),f(33,"span",20),g(34,"Energy"),h(),g(35," - The percent your stats are currently at from their maximum. This is increased slightly over time while a racer is not racing. "),D(36,"br"),f(37,"span",20),g(38,"*Note that these values have no impact on any race other than the Grand Prix."),h(),D(39,"br")(40,"br"),g(41," Maintain your morale and energy to get the most out of your racing animals. You can Relay to another animal in your event deck at any point, although the Relay will only occur after the completion of the current race leg. "),D(42,"br")(43,"br"),g(44," Race as far as you can to gain "),f(45,"span",42),g(46,"Coins"),h(),g(47,", "),f(48,"span",43),g(49,"Renown"),h(),g(50,", and the unique resource "),f(51,"span",42),g(52,"Tokens"),h(),g(53,". Click '"),f(54,"em"),g(55,"Rewards"),h(),g(56,"' to track your progress on gaining rewards. "),h()(),f(57,"div",40)(58,"button",41),A("click",function(){return N(e).$implicit.dismiss()}),g(59,"Close"),h()()()}if(2&t){const e=y();p(19),K(" - ",e.weekDayGrandPrixTimeSpan," "),p(4),K(" - ",e.weekEndGrandPrixTimeSpan," "),p(3),K(" To run in the Grand Prix, animals must be at least Breed Level ",e.requiredBreedLevel,". The animals in your event deck will be shown below along with their current morale and energy. ")}}function S9(t,n){1&t&&(f(0,"div",25),g(1," Bonus Time is accrued from effects that delay competitors or extend the length of a race. Once the Grand Prix event time ends, any bonus time will continue to play out before your entry to the Grand Prix ends. "),h())}function T9(t,n){1&t&&(f(0,"div",25),g(1," Loading... "),h())}let D9=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.raceLogicService=a,this.sanitizer=o,this.modalService=s,this.componentCommunicationService=l,this.utilityService=c,this.raceSelected=new ut,this.popoverText="",this.cannotRace=!1,this.eventRaceReleased=!0,this.raceRank="",this.eventRaceNotice="",this.eventRaceTimer="",this.bonusTime="",this.grandPrixUnlocked=!1,this.relayEnergy=50,this.doNotAutoRelayBelowEnergyFloor=!1,this.doNotAutoRelayBelowEnergyFloorToggle=()=>{this.doNotAutoRelayBelowEnergyFloor=!this.doNotAutoRelayBelowEnergyFloor,this.globalService.globalVar.doNotRelayBelowEnergyFloor=this.doNotAutoRelayBelowEnergyFloor}}ngOnInit(){var e=this;this.grandPrixData=this.globalService.globalVar.eventRaceData,this.previousRaceRewardList=this.globalService.globalVar.previousEventRewards,this.relayEnergy=this.globalService.globalVar.relayEnergyFloor,this.doNotAutoRelayBelowEnergyFloor=this.globalService.globalVar.doNotRelayBelowEnergyFloor,this.grandPrixUnlocked=this.lookupService.isItemUnlocked("grandPrix"),this.weekDayGrandPrixTimeSpan=this.lookupService.getWeekDayGrandPrixTimeSpan(),this.weekEndGrandPrixTimeSpan=this.lookupService.getWeekEndGrandPrixTimeSpan(),this.requiredBreedLevel=this.lookupService.getBreedLevelRequiredForGrandPrix(),this.popoverText=this.getForecastPopoverText(),this.raceRank=this.grandPrixData.rank,this.globalService.globalVar.settings.get("useNumbersForCircuitRank")&&(this.raceRank=this.utilityService.getNumericValueOfCircuitRank(this.raceRank).toString());var i=this.globalService.getGrandPrixRacingAnimal();if(!this.globalService.globalVar.eventRaceData.animalData.some(u=>u.isCurrentlyRacing)){var r=this.globalService.globalVar.eventRaceData.animalData.find(u=>u.associatedAnimalType==i.type);void 0!==r&&(r.isCurrentlyRacing=!0)}var a=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,o=this.globalService.globalVar.modifiers.find(u=>"grandPrixCoinRewardModifier"===u.text);null!=o&&(this.coinRewardAmount=o.value);var s=this.globalService.globalVar.modifiers.find(u=>"grandPrixRenownRewardModifier"===u.text);null!=s&&(this.renownRewardAmount=s.value);var l=this.globalService.globalVar.modifiers.find(u=>"metersPerCoinsGrandPrixModifier"===u.text);null!=l&&(this.coinRewardInterval=l.value*a);var c=this.globalService.globalVar.modifiers.find(u=>"metersPerRenownGrandPrixModifier"===u.text);null!=c&&(this.renownRewardInterval=c.value*a),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Vr(function*(d){e.setupEventTime(),e.grandPrixData=e.globalService.globalVar.eventRaceData,e.previousRaceRewardList=e.globalService.globalVar.previousEventRewards,null!=l&&(e.coinRewardInterval=l.value*e.globalService.globalVar.eventRaceData.rankDistanceMultiplier),null!=c&&(e.renownRewardInterval=c.value*e.globalService.globalVar.eventRaceData.rankDistanceMultiplier),void 0!==e.grandPrixData&&(e.raceRank=e.grandPrixData.rank,e.globalService.globalVar.settings.get("useNumbersForCircuitRank")&&(e.raceRank=e.utilityService.getNumericValueOfCircuitRank(e.raceRank).toString())),e.previousRaceRewardList.length>0&&e.setupDisplayRewards(),e.remainingMeters=e.globalService.globalVar.eventRaceData.totalDistance-e.globalService.globalVar.eventRaceData.distanceCovered,null!=e.globalService.globalVar.eventRaceData&&null!=e.globalService.globalVar.eventRaceData.currentRaceSegment&&(e.grandPrixData.isCatchingUp=e.globalService.globalVar.eventRaceData.segmentTimeCounter>=e.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60*2)});return function(d){return u.apply(this,arguments)}}())}selectEventRace(e){if(!1===this.globalService.globalVar.eventRaceData.isRunning){var i=this.globalService.getGrandPrixRacingAnimal();if(null==i.type)return void alert("None of the animals in your event deck are capable of entering the Grand Prix. Swap to new animals or make adjustments to your existing animals to meet the criteria.");var r=this.globalService.shouldShowSlowSegmentWarning(i);if(!this.lookupService.slowSegmentWarning(r))return;this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(i),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(i),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}!this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&!this.globalService.globalVar.eventRaceData.isCatchingUp&&this.raceSelected.emit(this.globalService.globalVar.eventRaceData.currentRaceSegment)}setupEventTime(){var e=this.globalService.getTimeToEventRace();if(e>0){this.isEventRaceAvailable=this.globalService.globalVar.eventRaceData.bonusTime>0,this.eventRaceNotice="Next Grand Prix available in";var a=e-60*(i=Math.floor(e/3600))*60-60*(r=Math.floor(e/60-60*i)),o=Math.floor(a).toString(),s=i.toString(),l=r.toString();i<10&&(s=i<1||i>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}else{var i,r,c=this.globalService.getRemainingEventRaceTime();if(c>0)this.eventRaceNotice="Grand Prix ends in",this.isEventRaceAvailable=!0,a=c-60*(i=Math.floor(c/3600))*60-60*(r=Math.floor(c/60-60*i)),s=i.toString(),l=r.toString(),o=Math.floor(a).toString(),i<10&&(s=i<1||i>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}this.bonusTime=this.globalService.globalVar.eventRaceData.bonusTime>0?this.utilityService.convertSecondsToHHMMSS(this.globalService.globalVar.eventRaceData.bonusTime):""}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openInfoModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openLoadingModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}getGrandPrixFoodRewardsPopover(){var e="";if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank)>1)return e;var o=25e3,s=5e4,l=75e3,c=1e5,u=25e4,d=5e5,v=75e4,m=1e6,_=100;return e+=this.globalService.globalVar.eventRaceData.distanceCovered>=o?"<span class='crossed'>"+o.toLocaleString()+" meters - +"+_+" Strawberries</span><br/>":o.toLocaleString()+" meters - +"+_+" Strawberries<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=s?"<span class='crossed'>"+s.toLocaleString()+" meters - +"+_+" Apples</span><br/>":s.toLocaleString()+" meters - +"+_+" Apples<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=l?"<span class='crossed'>"+l.toLocaleString()+" meters - +"+_+" Oranges</span><br/>":l.toLocaleString()+" meters - +"+_+" Oranges<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=c?"<span class='crossed'>"+c.toLocaleString()+" meters - +5 Mangoes</span><br/>":c.toLocaleString()+" meters - +"+_+" Mangoes<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=u?"<span class='crossed'>"+u.toLocaleString()+" meters - +"+_+" Turnips</span><br/>":u.toLocaleString()+" meters - +"+_+" Turnips<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=d?"<span class='crossed'>"+d.toLocaleString()+" meters - +"+_+" Bananas</span><br/>":d.toLocaleString()+" meters - +"+_+" Bananas<br/>",(e+=this.globalService.globalVar.eventRaceData.distanceCovered>=v?"<span class='crossed'>"+v.toLocaleString()+" meters - +"+_+" Carrots</span><br/>":v.toLocaleString()+" meters - +"+_+" Carrots<br/>")+(this.globalService.globalVar.eventRaceData.distanceCovered>=m?"<span class='crossed'>"+m.toLocaleString()+" meters - +10 Mangoes</span><br/>":m.toLocaleString()+" meters - +10 Mangoes<br/>")}getGrandPrixRenownRewardsPopover(){var r;return r=this.globalService.globalVar.eventRaceData.totalDistance/this.renownRewardInterval,Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/this.renownRewardInterval)*this.renownRewardAmount+"/"+r*this.renownRewardAmount+" Renown obtained"}getGrandPrixCoinRewardsPopover(){var r;return r=this.globalService.globalVar.eventRaceData.totalDistance/this.coinRewardInterval,Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/this.coinRewardInterval)*this.coinRewardAmount+"/"+r*this.coinRewardAmount+" Coins obtained"}getGrandPrixTokenRewardsPopover(){var e="",i=this.lookupService.getGrandPrixTokenRewards(),r=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,a=5e7,o=this.globalService.globalVar.modifiers.find(T=>"grandPrixToken1MeterModifier"===T.text);null!=o&&(a=o.value);var s=i[0],l=5e7,c=this.globalService.globalVar.modifiers.find(T=>"grandPrixToken2MeterModifier"===T.text);null!=c&&(l=c.value);var u=i[1],d=5e7,v=this.globalService.globalVar.modifiers.find(T=>"grandPrixToken3MeterModifier"===T.text);null!=v&&(d=v.value);var m=i[2],_=5e7,w=this.globalService.globalVar.modifiers.find(T=>"grandPrixToken4MeterModifier"===T.text);null!=w&&(_=w.value);var S=i[3],k=this.globalService.globalVar.eventRaceData.distanceCovered;return e+=k>=a*r?"<span class='crossed'>"+s+"</span>\n":"<span>"+s+"</span>\n",e+=k>=l*r?"<span class='crossed'>"+u+"</span>\n":"<span>"+u+"</span>\n",e+=k>=d*r?"<span class='crossed'>"+m+"</span>\n":"<span>"+m+"</span>\n",this.sanitizer.sanitize(pi.HTML,this.sanitizer.bypassSecurityTrustHtml(e+=k>=_*r?"<span class='crossed'>"+S+"</span>\n":"<span>"+S+"</span>\n"))}getForecastPopoverText(){return this.lookupService.getWeatherClusterDescription(this.grandPrixData.weatherCluster)}goToTokenShop(){this.componentCommunicationService.setShopView(Tt.shop,_a.token)}setupDisplayRewards(){if(this.rewardCells=[],this.rewardRows=[],null!=this.previousRaceRewardList){for(var i=1;i<=this.previousRaceRewardList.length;i++)this.rewardCells.push({name:this.previousRaceRewardList[i-1].name,amount:this.previousRaceRewardList[i-1].amount}),i%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}updateRelayEnergy(){this.relayEnergy<50&&(this.relayEnergy=50),this.relayEnergy>99&&(this.relayEnergy=99),null!=this.globalService.globalVar.eventRaceData&&(this.globalService.globalVar.relayEnergyFloor=this.relayEnergy)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Bn),E(Di),E(v0),E(Jo),E(ho),E(mn),E(Fn))},t.\u0275cmp=bt({type:t,selectors:[["app-event-view"]],viewQuery:function(e,i){if(1&e&&Pa(i9,7),2&e){let r;xi(r=ki())&&(i.loadingContent=r.first)}},outputs:{raceSelected:"raceSelected"},decls:10,vars:2,consts:[["class","centered",4,"ngIf"],["class","eventViewDiv centered",4,"ngIf"],["grandPrixRewardModal",""],["grandPrixInfoModal",""],["bonusTimeContent",""],["loadingModal",""],[1,"centered"],[1,"eventViewDiv","centered"],[1,"eventRaceHeader"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass","class","clickableText",3,"ngbPopover","click",4,"ngIf"],["type","button",1,"rightSpaced",3,"click"],[3,"click"],["id","grandPrix",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngbPopover","click"],["id","grandPrix"],[1,"s4Heading"],[1,"helpText",3,"click"],[1,"raceDescription"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText","eventRaceDescription",3,"ngClass","ngbPopover","disablePopover","click"],[1,"keyword"],["class","keyword",4,"ngIf"],["class","raceCatchingUp",4,"ngIf"],["popContent",""],[1,"raceCatchingUp"],[1,"popoverClass"],["for","relay-energy"],["id","relay-energy","name","relay-energy","type","text","minlength","2","maxlength","2",1,"spaced","energyInput",3,"ngModel","ngModelChange","change"],["triggers","mouseenter:mouseleave",1,"checkboxOption"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],[1,"results"],["class","rewards",4,"ngIf"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"],[1,"resourceKeyword"],[1,"progressionKeyword"]],template:function(e,i){1&e&&(x(0,n9,6,0,"p",0),x(1,y9,4,2,"div",1),x(2,w9,26,22,"ng-template",null,2,ht),x(4,C9,60,3,"ng-template",null,3,ht),x(6,S9,2,0,"ng-template",null,4,ht),x(8,T9,2,0,"ng-template",null,5,ht)),2&e&&(b("ngIf",!i.eventRaceReleased),p(1),b("ngIf",i.eventRaceReleased))},directives:[hi,Zr,rn,t9,es,Kh,Ll,Ds,Rs,uu,cn],pipes:[no],styles:[".eventRace[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.centered[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.energyInput[_ngcontent-%COMP%]{width:2rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.eventRaceDescription[_ngcontent-%COMP%]{width:40%;margin:auto}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.raceCatchingUp[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}table[_ngcontent-%COMP%]{table-layout:fixed;width:60%;height:100%;text-align:center;margin-left:auto;margin-right:auto}"]}),t})();function R9(t,n){if(1&t){const e=de();f(0,"div",10)(1,"div",11)(2,"div",12)(3,"span",13)(4,"button",14),A("click",function(){return N(e),y(2).toggleRace("noviceRaceToggled")}),g(5,"-"),h()(),f(6,"span",15),g(7,"Novice Track"),h(),D(8,"span",13),h(),D(9,"br"),f(10,"h6",16),A("click",function(){N(e);const r=y(2),a=at(7);return r.openRewardsModal(a)}),g(11),h(),f(12,"app-race-description",17),A("click",function(){N(e);const r=y(2);return r.selectTrackRace(r.noviceTrackRace)}),h()(),D(13,"hr"),h()}if(2&t){const e=y(2);p(11),Wi(" ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),p(1),b("race",e.noviceTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function x9(t,n){if(1&t){const e=de();f(0,"div",10)(1,"div",11)(2,"div",12)(3,"span",13)(4,"button",14),A("click",function(){return N(e),y(2).toggleRace("noviceRaceToggled")}),g(5,"+"),h()(),f(6,"span",18),g(7,"Novice Track"),h(),f(8,"h6",16),A("click",function(){N(e);const r=y(2),a=at(7);return r.openRewardsModal(a)}),g(9),h(),f(10,"div",19)(11,"app-race-description",20),A("click",function(){N(e);const r=y(2);return r.selectTrackRace(r.noviceTrackRace)}),h()()()(),D(12,"hr"),h()}if(2&t){const e=y(2);p(9),Wi(" ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),p(2),b("race",e.noviceTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function k9(t,n){if(1&t){const e=de();f(0,"div",21)(1,"div",22)(2,"div",12)(3,"span",13)(4,"button",14),A("click",function(){return N(e),y(2).toggleRace("intermediateRaceToggled")}),g(5,"-"),h()(),f(6,"span",15),g(7,"Intermediate Track"),h(),D(8,"span",13),h(),D(9,"br"),f(10,"h6",16),A("click",function(){N(e);const r=y(2),a=at(9);return r.openRewardsModal(a)}),g(11),h(),f(12,"app-race-description",17),A("click",function(){N(e);const r=y(2);return r.selectTrackRace(r.intermediateTrackRace)}),h()(),D(13,"hr"),h()}if(2&t){const e=y(2);p(11),Wi(" ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),p(1),b("race",e.intermediateTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function M9(t,n){if(1&t){const e=de();f(0,"div",21)(1,"div",22)(2,"div",12)(3,"span",13)(4,"button",14),A("click",function(){return N(e),y(2).toggleRace("intermediateRaceToggled")}),g(5,"+"),h()(),f(6,"span",18),g(7,"Intermediate Track"),h(),f(8,"h6",16),A("click",function(){N(e);const r=y(2),a=at(9);return r.openRewardsModal(a)}),g(9),h(),f(10,"div",19)(11,"app-race-description",20),A("click",function(){N(e);const r=y(2);return r.selectTrackRace(r.intermediateTrackRace)}),h()()()(),D(12,"hr"),h()}if(2&t){const e=y(2);p(9),Wi(" ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),p(2),b("race",e.intermediateTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function A9(t,n){if(1&t){const e=de();f(0,"div",23)(1,"div",24)(2,"div",12)(3,"span",13)(4,"button",14),A("click",function(){return N(e),y(2).toggleRace("masterRaceToggled")}),g(5,"-"),h()(),f(6,"span",15),g(7,"Master Track"),h(),D(8,"span",13),h(),D(9,"br"),f(10,"h6",16),A("click",function(){N(e);const r=y(2),a=at(11);return r.openRewardsModal(a)}),g(11),h(),f(12,"app-race-description",17),A("click",function(){N(e);const r=y(2);return r.selectTrackRace(r.masterTrackRace)}),h()(),D(13,"hr"),h()}if(2&t){const e=y(2);p(11),Wi(" ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),p(1),b("race",e.masterTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function P9(t,n){if(1&t){const e=de();f(0,"div",23)(1,"div",24)(2,"div",12)(3,"span",13)(4,"button",14),A("click",function(){return N(e),y(2).toggleRace("masterRaceToggled")}),g(5,"+"),h()(),f(6,"span",18),g(7,"Master Track"),h(),f(8,"h6",16),A("click",function(){N(e);const r=y(2),a=at(11);return r.openRewardsModal(a)}),g(9),h(),f(10,"div",19)(11,"app-race-description",20),A("click",function(){N(e);const r=y(2);return r.selectTrackRace(r.masterTrackRace)}),h()()()(),D(12,"hr"),h()}if(2&t){const e=y(2);p(9),Wi(" ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),p(2),b("race",e.masterTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function E9(t,n){if(1&t&&(f(0,"div",6),x(1,R9,14,5,"div",7),x(2,x9,13,6,"div",7),x(3,k9,14,5,"div",8),x(4,M9,13,6,"div",8),x(5,A9,14,5,"div",9),x(6,P9,13,6,"div",9),h()),2&t){const e=y();p(1),b("ngIf",!e.isNoviceRaceToggled),p(1),b("ngIf",e.isNoviceRaceToggled),p(1),b("ngIf",e.intermediateTrackAvailable&&!e.isIntermediateRaceToggled),p(1),b("ngIf",e.intermediateTrackAvailable&&e.isIntermediateRaceToggled),p(1),b("ngIf",e.masterTrackAvailable&&!e.isMasterRaceToggled),p(1),b("ngIf",e.masterTrackAvailable&&e.isMasterRaceToggled)}}function I9(t,n){if(1&t){const e=de();f(0,"div",25)(1,"div",26)(2,"h4",27),g(3,"Novice Rewards"),h(),f(4,"button",28),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",29)(7,"div",30),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",31),h()(),f(12,"div",32)(13,"button",33),A("click",function(){return N(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=y();p(11),b("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.novice),zt)}}function V9(t,n){if(1&t){const e=de();f(0,"div",25)(1,"div",26)(2,"h4",27),g(3,"Intermediate Rewards"),h(),f(4,"button",28),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",29)(7,"div",30),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",31),h()(),f(12,"div",32)(13,"button",33),A("click",function(){return N(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=y();p(11),b("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.intermediate),zt)}}function O9(t,n){if(1&t){const e=de();f(0,"div",25)(1,"div",26)(2,"h4",27),g(3,"Master Rewards"),h(),f(4,"button",28),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",29)(7,"div",30),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",31),h()(),f(12,"div",32)(13,"button",33),A("click",function(){return N(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=y();p(11),b("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.master),zt)}}let N9=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.lookupService=i,this.sanitizer=r,this.modalService=a,this.componentCommunicationService=o,this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.raceSelected=new ut,this.showRace=!1,this.isNoviceRaceToggled=!1,this.isIntermediateRaceToggled=!1,this.isMasterRaceToggled=!1,this.trackRaceTypeEnum=vn}ngOnInit(){this.practiceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,vn.practice),this.noviceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,vn.novice),this.intermediateTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,vn.intermediate),this.masterTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,vn.master),this.intermediateTrackAvailable=this.selectedAnimal.allTrainingTracks.intermediateTrackAvailable,this.masterTrackAvailable=this.selectedAnimal.allTrainingTracks.masterTrackAvailable,this.isNoviceRaceToggled=this.globalService.globalVar.settings.get("noviceRaceToggled"),this.isIntermediateRaceToggled=this.globalService.globalVar.settings.get("intermediateRaceToggled"),this.isMasterRaceToggled=this.globalService.globalVar.settings.get("masterRaceToggled"),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}selectTrackRace(e){if(this.lookupService.canAnimalRace(this.selectedAnimal)){var i=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=i&&(i.selectedAnimals=i.selectedAnimals.filter(r=>r.raceCourseType!==this.selectedAnimal.raceCourseType),i.selectedAnimals.push(this.selectedAnimal)),this.raceSelected.emit(e)}}getTrackRewardsPopover(e){var i="",r=this.lookupService.getTrackRaceRewards(e),a=.25,o=this.globalService.globalVar.modifiers.find(u=>"trainingTrackPaceModifier"===u.text);void 0!==o&&(a=o.value);for(var s=0;s<r.length;s++){var l=r[s],c=0;e===vn.novice?c=this.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained:e===vn.intermediate?c=this.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained:e===vn.master&&(c=this.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained),i+=s<c?"<span class='crossed'>("+s*a*100+"% average pace) "+l+"</span>\n":"<span>("+s*a*100+"% average pace) "+l+"</span>\n"}return this.sanitizer.sanitize(pi.HTML,this.sanitizer.bypassSecurityTrustHtml(i))}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}toggleRace(e){var i=this.globalService.globalVar.settings.get(e);this.globalService.globalVar.settings.set(e,!i),"noviceRaceToggled"===e&&(this.isNoviceRaceToggled=!this.isNoviceRaceToggled),"intermediateRaceToggled"===e&&(this.isIntermediateRaceToggled=!this.isIntermediateRaceToggled),"masterRaceToggled"===e&&(this.isMasterRaceToggled=!this.isMasterRaceToggled)}goToAnimal(){this.componentCommunicationService.setAnimalView(Tt.animals,this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Di),E(Jo),E(ho),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-training-track-race-view"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{raceSelected:"raceSelected"},decls:12,vars:3,consts:[[1,"trainingTrackView"],[1,"keyword","clickableText",3,"ngClass","click"],["class","trainingTracks",4,"ngIf"],["noviceRewardModal",""],["intermediateRewardModal",""],["masterRewardModal",""],[1,"trainingTracks"],["id","trainingTrack1",4,"ngIf"],["id","trainingTrack2",4,"ngIf"],["id","trainingTrack3",4,"ngIf"],["id","trainingTrack1"],[1,"noviceTrackRace"],[1,"minimizer"],[1,"minimizerSideSpacing"],[3,"click"],[1,"s4Heading"],[1,"clickableText","keyword",3,"click"],[3,"race","selectedAnimal","showStartText","click"],[1,"s4Heading","raceNameSpacing"],[1,"inlineDescription"],[3,"race","selectedAnimal","showStartText","condensedVersion","click"],["id","trainingTrack2"],[1,"intermediateTrackRace"],["id","trainingTrack3"],[1,"masterTrackRace"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(f(0,"div",0),g(1," Selected Animal: "),f(2,"span",1),A("click",function(){return i.goToAnimal()}),g(3),h(),D(4,"hr"),x(5,E9,7,6,"div",2),h(),x(6,I9,15,1,"ng-template",null,3,ht),x(8,V9,15,1,"ng-template",null,4,ht),x(10,O9,15,1,"ng-template",null,5,ht)),2&e&&(p(2),b("ngClass",i.colorConditional),p(1),et(i.selectedAnimal.name),p(2),b("ngIf",!i.showRace))},directives:[rn,hi,$0],styles:[".trainingTrackView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.minimizer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.minimizerSideSpacing[_ngcontent-%COMP%]{width:3rem}.inlineDescription[_ngcontent-%COMP%]{width:40%;margin-top:auto;margin-bottom:auto}.raceNameSpacing[_ngcontent-%COMP%]{width:20%}"]}),t})();const F9=["raceCanvas"];let B9=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.themeService=o,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.currentRaceFrame=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5,this.eventViewStartFrame=0,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,this.newSegment=!1}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix&&(this.eventViewStartFrame=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier)),this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var i=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7),this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix&&(0===this.globalService.globalVar.eventRaceData.mountainClimbPercent?this.globalService.globalVar.eventRaceData.mountainClimbPercent=this.mountainClimbPercent:this.mountainClimbPercent=this.globalService.globalVar.eventRaceData.mountainClimbPercent);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{performance.now(),e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(i+=a,this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount>this.lastEventSegment?(this.eventViewStartFrame=0,this.currentRaceFrame=0,this.race=this.globalService.globalVar.eventRaceData.currentRaceSegment,this.newSegment=!0):this.newSegment=!1,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount),this.currentRaceFrame+=1);var s=!1;this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix&&this.globalService.getRemainingEventRaceTime()>0&&(s=!0),(this.currentRaceFrame>=r*this.frameModifier||this.isRaceFinished||this.skipRace)&&!s?this.displayOverview(e,!0):this.displayRace(e,i),performance.now()})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,l=0;if(this.race.raceLegs.forEach(T=>{void 0!==T.pathData&&0!==T.pathData.length&&(l=0,T.pathData.forEach(R=>{if(T.courseType===j.Flatland)e.lineCap="round",R.routeDesign===ze.Regular&&this.drawRegularFlatlandOverview(e,R,1,1),R.routeDesign===ze.S&&this.drawSFlatlandOverview(e,R,1,1),R.routeDesign===ze.Bumps&&this.drawBumpsFlatlandOverview(e,R,1,1);else if(T.courseType===j.Mountain){e.lineCap="round";var L=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==j.Mountain||r<T.distance*this.mountainClimbPercent;R.routeDesign===ze.Regular&&this.drawRegularMountainOverview(e,R,1,this.overviewYOffsetModifier,L),R.routeDesign===ze.Crevasse&&this.drawCrevasseMountainOverview(e,R,1,this.overviewYOffsetModifier,L),R.routeDesign===ze.Gaps&&this.drawGapsMountainOverview(e,R,1,this.overviewYOffsetModifier,L),r+=R.length}else T.courseType===j.Ocean&&(e.lineCap="round",R.routeDesign===ze.Regular&&this.drawRegularWaterOverview(e,R,1,1,a),R.routeDesign===ze.Waves&&this.drawWavesWaterOverview(e,R,1,1,a),R.routeDesign===ze.Dive&&this.drawDiveWaterOverview(e,R,1,1,a),a=!a);T.courseType===j.Tundra&&(e.lineCap="round",R.routeDesign===ze.Regular&&this.drawRegularTundraOverview(e,R,1,1),R.routeDesign===ze.Cavern&&this.drawCavernTundraOverview(e,R,1,1),R.routeDesign===ze.Hills&&this.drawHillsTundraOverview(e,R,1,1)),T.courseType===j.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(R.routeDesign===ze.Regular||R.routeDesign===ze.FirstRegular||R.routeDesign===ze.LastRegular)&&this.drawRegularVolcanoOverview(e,0,l,R,T.pathData.length,1,1),R.routeDesign===ze.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,l,R,T.pathData.length,1,1)),this.lengthCompleted+=R.length,l+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),i){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var u=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,d=0,v=0,m=!1;this.race.raceLegs.forEach(T=>{if(!m){var R=(d+=T.distance)/this.race.length;R>u&&(R=u,m=!0);var L=(R-v)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(T.courseType),e.fillRect(v*this.canvasWidth,0,L,this.canvasHeight),v=R}})}if(null!=this.race.drawnObjects&&this.race.drawnObjects.length>0){var _=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",this.race.drawnObjects.forEach(T=>{(T.objectType===ni.amberBrazier||T.objectType===ni.rubyBrazier||T.objectType===ni.topazBrazier||T.objectType===ni.sapphireBrazier||T.objectType===ni.amethystBrazier||T.objectType===ni.emeraldBrazier)&&this.drawBrazier(T,j.Flatland,T.xDistance,e,5,1,1,this.race.raceUI.distanceCoveredByFrame.length)}),e.globalCompositeOperation=_}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(T=>{"Hills"===T[0]?this.drawHillsBackgroundTundraOverview(e,T):this.drawIcyPatchBackgroundTundraOverview(e,T)}),this.race.raceLegs.some(T=>T.courseType===j.Volcanic)){var k,w=0,S=!1;this.race.raceLegs.forEach(R=>{this.race.raceLegs.some(L=>L.courseType===j.Volcanic)&&(R.courseType!==j.Volcanic&&!S&&(w+=R.distance),R.courseType===j.Volcanic&&(S=!0))}),k=this.race.raceLegs.find(R=>R.courseType===j.Volcanic).distance,_=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,w,w+k,1,1),e.globalCompositeOperation=_}}}displayRace(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var o=!1,s=0,l=[];this.race.raceLegs.forEach(Ze=>{l.push(Ze)});var c=!1;this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix?(c=!0,s=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier),l.push(this.globalService.globalVar.eventRaceData.nextRaceSegment.raceLegs[0])):s=this.currentRaceFrame;var u=this.race.raceUI.distanceCoveredByFrame[s],d=0;c&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment&&(l.unshift(this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0]),u+=l[0].distance),this.averageDistancePerSecond=this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/this.globalService.globalVar.eventRaceData.grandPrixTimeLength:this.race.length/this.race.raceUI.timeToCompleteByFrame[s];var v=0,m=0,_=!1,w=0;l.forEach(Ze=>{_||(u>=v&&u<v+Ze.distance&&(_=!0,this.currentLeg=Ze),_||(m+=Ze.distance,w+=1)),v+=Ze.distance});var S=u-m,k=0;if(this.currentLeg.courseType===j.Mountain){var T=this.currentLeg.distance*this.mountainClimbPercent,R=0,L=!1,W=0;this.currentLeg.pathData.forEach(Ze=>{L||(T>=W&&T<W+Ze.length&&(L=!0,R=W+Ze.length-T),W+=Ze.length)}),L=!1;var ae=0,ee=0;this.currentLeg.pathData.forEach(Ze=>{if(!L){if(S>=ae&&S<ae+Ze.length&&(L=!0,ee=S-ae,Ze.routeDesign===ze.Crevasse)){var wt=Ze.length/2*3,fr=3*ee;k-=ee<Ze.length/2?fr:wt-(fr-wt)}ae+=Ze.length}});var be=T+R;S<be?(d=S+k,o=!0):(d=be-(S-be)+k,o=!1),this.mountainEndingY=d,this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix&&s===this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed-2&&(this.globalService.globalVar.eventRaceData.mountainEndingY=d)}if(this.race.raceLegs.some(Ze=>Ze.courseType===j.Mountain)||(this.mountainEndingY=0),d=this.mountainEndingY,this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix&&(d+=this.globalService.globalVar.eventRaceData.mountainEndingY,null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&this.currentLeg.courseType!==j.Mountain&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType!==j.Mountain&&(d=0)),this.currentLeg.courseType===j.Volcanic&&!this.pauseRace){var oe=this.currentLeg.pathData[0].length/r;if(S>oe){var _e=this.currentLeg.distance/this.volcanoRadiusXModifier,ge=oe/this.currentLeg.distance,De=S/this.currentLeg.distance,dt=(this.currentLeg.distance-2*oe)/this.currentLeg.distance/2;if(De>ge&&De<1-ge){var nt=100/(100-2*ge),Et=-_e,Ct=_e*Math.pow(1.05,-100*(De>.5?2*(dt-((De-ge)*nt-dt)):(De-ge)*nt*2))+Et;this.volcanoYOffset=Ct}}}var Z=u*this.canvasXDistanceScale*r-this.canvasWidth/2,C=(d+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=Z,this.visibleDistanceXRight=Z+this.canvasWidth,this.currentLeg.courseType===j.Ocean){L=!1,W=0;var Kt=0;this.currentLeg.pathData.forEach(ea=>{L||(S>=W&&S<W+ea.length?L=!0:Kt+=1,W+=ea.length)}),o=Kt%2==0}if(e.globalCompositeOperation="source-over",(u>=this.race.length||s>this.race.raceUI.distanceCoveredByFrame.length)&&!c)return void(this.isRaceFinished=!0);var yt=0,xt=!0;Kt=0,l.forEach(Ze=>{void 0!==Ze.pathData&&0!==Ze.pathData.length&&(Kt=0,this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix&&(yt=0),Ze.pathData.forEach(wt=>{if(Ze.courseType===j.Flatland)wt.routeDesign===ze.Regular&&this.drawRegularFlatlandOverview(e,wt,r,a,Z,C),wt.routeDesign===ze.S&&this.drawSFlatlandOverview(e,wt,r,a,Z,C),wt.routeDesign===ze.Bumps&&this.drawBumpsFlatlandOverview(e,wt,r,a,Z,C);else if(Ze.courseType===j.Mountain){var fr=yt<Ze.distance*this.mountainClimbPercent;wt.routeDesign===ze.Regular&&this.drawRegularMountainOverview(e,wt,r,a,fr,Z,C),wt.routeDesign===ze.Crevasse&&this.drawCrevasseMountainOverview(e,wt,r,a,fr,Z,C),wt.routeDesign===ze.Gaps&&this.drawGapsMountainOverview(e,wt,r,a,fr,Z,C),yt+=wt.length,this.grandPrixMountainYReset(w)}else Ze.courseType===j.Ocean&&(wt.routeDesign===ze.Regular&&this.drawRegularWaterOverview(e,wt,r,a,xt,Z,C),wt.routeDesign===ze.Waves&&this.drawWavesWaterOverview(e,wt,r,a,xt,Z,C),wt.routeDesign===ze.Dive&&this.drawDiveWaterOverview(e,wt,r,a,xt,Z,C),xt=!xt);Ze.courseType===j.Tundra&&(wt.routeDesign===ze.Regular&&this.drawRegularTundraOverview(e,wt,r,a,Z,C),wt.routeDesign===ze.Cavern&&this.drawCavernTundraOverview(e,wt,r,a,Z,C),wt.routeDesign===ze.Hills&&this.drawHillsTundraOverview(e,wt,r,a,Z,C)),Ze.courseType===j.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(wt.routeDesign===ze.Regular||wt.routeDesign===ze.FirstRegular||wt.routeDesign===ze.LastRegular)&&this.drawRegularVolcanoOverview(e,0,Kt,wt,Ze.pathData.length,r,a,Z,C),wt.routeDesign===ze.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,Kt,wt,Ze.pathData.length,r,a,Z,C)),Kt+=1,this.lengthCompleted+=wt.length})),w+=1}),e.globalCompositeOperation="source-atop";var ot=0,Ri=m*this.canvasXDistanceScale*r,gt=l.indexOf(this.currentLeg),Ii=null;gt>0&&(Ii=l[gt-1]),null!=Ii&&Ri>=this.visibleDistanceXLeft&&Ri<=this.visibleDistanceXRight?(ot=(Ri-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(Ii.courseType),e.fillRect(0,0,this.canvasWidth*ot,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*ot,0,this.canvasWidth/2-this.canvasWidth*ot,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(u,l),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var Mi=this.getAnimalRacerColor(u,l);if((this.race.raceUI.racerEffectByFrame[s]===Yr.LostFocus||this.race.raceUI.racerEffectByFrame[s]===Yr.LostStamina||this.race.raceUI.racerEffectByFrame[s]===Yr.Stumble)&&(Mi=this.utilityService.shadeColor(Mi,-90)),this.race.raceUI.racerEffectByFrame[s]===Yr.Burst&&(Mi=this.utilityService.shadeColor(Mi,90)),e.fillStyle=Mi,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),null!=this.race.drawnObjects&&this.race.drawnObjects.length>0){var ci=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",this.race.drawnObjects.forEach(Ze=>{(Ze.objectType===ni.amberBrazier||Ze.objectType===ni.rubyBrazier||Ze.objectType===ni.topazBrazier||Ze.objectType===ni.sapphireBrazier||Ze.objectType===ni.amethystBrazier||Ze.objectType===ni.emeraldBrazier)&&this.drawBrazier(Ze,this.currentLeg.courseType,Ze.xDistance,e,r,r,a,s,Z,C,o)}),e.globalCompositeOperation=ci}this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(Ze=>{"Hills"===Ze[0]?this.drawHillsBackgroundTundraOverview(e,Ze):this.drawIcyPatchBackgroundTundraOverview(e,Ze)}),e.globalCompositeOperation="source-atop";var Hi=this.averageDistancePerSecond/this.frameModifier*s;if(this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix){var Qi=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();Hi+=this.averageDistancePerSecond*Qi}if(this.drawRacer(e,Hi*this.canvasXDistanceScale*r,"black"),this.race.localRaceType!==Ut.Track){if(this.lookupService.getResourceByName("Money Mark")>0){var ei=.75,ft=this.globalService.globalVar.modifiers.find(Ze=>"moneyMarkPaceModifier"===Ze.text);null!=ft&&(ei=ft.value),this.drawRacer(e,this.race.length/(this.race.raceUI.timeToCompleteByFrame[s]*ei)/this.frameModifier*s*this.canvasXDistanceScale*r,"gold")}}else{var ri=.25,Oi=this.globalService.globalVar.modifiers.find(Ze=>"trainingTrackPaceModifier"===Ze.text);void 0!==Oi&&(ri=Oi.value);for(var Ln=0;Ln<11;Ln++){var Dr=this.race.length/(this.race.raceUI.timeToCompleteByFrame[s]/(1+ri*(Ln+1)))/this.frameModifier*s*this.canvasXDistanceScale*r,Qn=this.getTrackRacerColor(Ln);this.drawRacer(e,Dr,Qn)}}if(this.drawBreakpoints(e,r,l),l.some(Ze=>Ze.courseType===j.Volcanic)){var mt,_n=0,Zi=!1;l.forEach(wt=>{l.some(fr=>fr.courseType===j.Volcanic)&&(wt.courseType!==j.Volcanic&&!Zi&&(_n+=wt.distance),wt.courseType===j.Volcanic&&(Zi=!0))}),mt=l.find(wt=>wt.courseType===j.Volcanic).distance,ci=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,s,_n,_n+mt,r,a,Z,C),e.globalCompositeOperation=ci}}}getAnimalDistanceColor(e,i){var r="",a=0;return null==i&&(i=this.race.raceLegs),i.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===j.Flatland&&(r="#7d3f00"),o.courseType===j.Mountain&&(r="#1b630d"),o.courseType===j.Ocean&&(r="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),o.courseType===j.Tundra&&(r="#28809c"),o.courseType===j.Volcanic&&(r="#8f1a1a")),a+=o.distance}),r}getAnimalDistanceColorByType(e){var i="";return e===j.Flatland&&(i="#7d3f00"),e===j.Mountain&&(i="#1b630d"),e===j.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===j.Tundra&&(i="#28809c"),e===j.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e,i){var r="",a=0;return null==i&&(i=this.race.raceLegs),i.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===j.Flatland&&("night"===this.themeService.getActiveThemeName()?r="#E18B07":(this.themeService.getActiveThemeName(),r="#c66900")),o.courseType===j.Mountain&&("night"===this.themeService.getActiveThemeName()?r="#30b001":(this.themeService.getActiveThemeName(),r="#279113")),o.courseType===j.Ocean&&("night"===this.themeService.getActiveThemeName()?r="#9289CF":(this.themeService.getActiveThemeName(),r="#0000FF")),o.courseType===j.Tundra&&("night"===this.themeService.getActiveThemeName()?r="#019DDE":(this.themeService.getActiveThemeName(),r="#1CA1C9")),o.courseType===j.Volcanic&&("night"===this.themeService.getActiveThemeName()?r="#E56C6E":(this.themeService.getActiveThemeName(),r="#D92525"))),a+=o.distance}),r}getTrackRacerColor(e){var i="";return 0===e&&(i="#cfc800"),1===e&&(i="#00cf68"),2===e&&(i="#cf00c5"),3===e&&(i="#cfb8e6"),4===e&&(i="#4a1d1d"),5===e&&(i="#1b5054"),6===e&&(i="#541b3c"),7===e&&(i="#aeb85a"),8===e&&(i="#ffffff"),9===e&&(i="#01253b"),10===e&&(i="#790dde"),i}getCurrentAnimalRacingCourse(e){var i;i=j.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(i=a.courseType),r+=a.distance}),i}getNextAnimalRacingCourse(e){var i;i=j.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(i=this.race.raceLegs[r+1].courseType),i}drawRacer(e,i,r){var a=0;i>=this.visibleDistanceXLeft&&i<=this.visibleDistanceXRight&&(a=(i-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,i,r){var a=0;null==r&&(r=this.race.raceLegs);for(var o=0;o<r.length;o++){var s=r[o],l=null;o<r.length-1&&(l=r[o+1]);var c=0,u=(a+s.distance)*this.canvasXDistanceScale*i;u>=this.visibleDistanceXLeft&&u<=this.visibleDistanceXRight&&(c=(u-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==l?this.getAnimalDistanceColorByType(l.courseType):"pink",e.fillRect(this.canvasWidth*c-5,0,5,this.canvasHeight)),a+=s.distance}}drawRegularFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0),e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+s),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawSFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,v=.23*l,m=1.2173*v,_=.04*l,w=m,S=_+v,k=m,T=S+v,R=m,L=T,ae=T,ee=m,be=ae+v,oe=m,_e=be+v,ge=m,De=_e;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.bezierCurveTo(c+d,u,c+_,u+w,c+S,u+k),e.bezierCurveTo(c+S,u+k,c+T,u+R,c+L,u),e.stroke(),e.beginPath(),e.moveTo(c+L,u),e.bezierCurveTo(c+L,u,c+ae,u-ee,c+be,u-oe),e.bezierCurveTo(c+be,u-oe,c+_e,u-ge,c+_e,u),e.stroke(),e.beginPath(),e.moveTo(c+_e,u),e.lineTo(c+De+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+De+d}drawBumpsFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,v=.115*l,m=v/3;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.lineTo(c+d+v/2,u-m),e.lineTo(c+d+v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+v,u),e.lineTo(c+d+v+v/2,u-m),e.lineTo(c+d+2*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+2*v,u),e.lineTo(c+d+2*v+v/2,u-m),e.lineTo(c+d+3*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+3*v,u),e.lineTo(c+d+3*v+v/2,u-m),e.lineTo(c+d+4*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+4*v,u),e.lineTo(c+d+4*v+v/2,u-m),e.lineTo(c+d+5*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+5*v,u),e.lineTo(c+d+5*v+v/2,u-m),e.lineTo(c+d+6*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+6*v,u),e.lineTo(c+d+6*v+v/2,u-m),e.lineTo(c+d+7*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+7*v,u),e.lineTo(c+d+7*v+v/2,u-m),e.lineTo(c+d+8*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+8*v,u),e.lineTo(c+d+8*v+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawRegularMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0),e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),e.lineTo(this.lastPathEndingX+c-s,o?this.lastPathEndingY-u+l:this.lastPathEndingY+u+l),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawCrevasseMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,v=this.lastPathEndingY+l,_=c,w=u,S=2*w;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),o?(S=2*w-(w-0),e.lineTo(d+0,v-0),e.lineTo(d+0+_/2,v+S-0),e.lineTo(d+0+_,v-w-0),e.lineTo(d+0+_,v-w-0)):(e.lineTo(d+0,v+0),e.lineTo(d+0+_/2,v+S+0),e.lineTo(d+0+_,v+w+0),e.lineTo(d+0+_,v+w+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawGapsMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,v=this.lastPathEndingY+l,m=.04*c,_=.115*c,w=.115*u,S=.04*u;e.beginPath(),e.moveTo(d,v),o?(e.lineTo(d+m,v-S),e.moveTo(d+_+m,v-w-S),e.lineTo(d+2*_+m,v-2*w-S),e.moveTo(d+3*_+m,v-3*w-S),e.lineTo(d+4*_+m,v-4*w-S),e.moveTo(d+5*_+m,v-5*w-S),e.lineTo(d+6*_+m,v-6*w-S),e.moveTo(d+7*_+m,v-7*w-S),e.lineTo(d+8*_+m,v-8*w-S),e.lineTo(d+8*_+2*m,v-8*w-2*S)):(e.lineTo(d+m,v+S),e.moveTo(d+_+m,v+w+S),e.lineTo(d+2*_+m,v+2*w+S),e.moveTo(d+3*_+m,v+3*w+S),e.lineTo(d+4*_+m,v+4*w+S),e.moveTo(d+5*_+m,v+5*w+S),e.lineTo(d+6*_+m,v+6*w+S),e.moveTo(d+7*_+m,v+7*w+S),e.lineTo(d+8*_+m,v+8*w+S),e.lineTo(d+8*_+2*m,v+8*w+2*S)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawRegularWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,v=c/3,m=c/6,_=u+v,w=o?d+m:d-m,S=u+2*v,k=o?d+m:d-m,T=u+3*v,R=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(_,w,S,k,T,R),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawWavesWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,v=c/3,m=c/3,_=u+v/3,w=d,S=u+v/3,k=d-m,T=u+v,R=d-.6*m;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(_,w,S,k,T,R),e.stroke();var L=T-v/3,W=R-m/10,ae=T-v/3,ee=R+.6*m,be=T,oe=d;e.beginPath(),e.moveTo(T,R),e.bezierCurveTo(L,W,ae,ee,be,oe),e.stroke();var _e=be+v/3,ge=oe,De=be+v/3,dt=oe-m,nt=be+v,Dt=oe-.6*m;e.beginPath(),e.moveTo(be,oe),e.bezierCurveTo(_e,ge,De,dt,nt,Dt),e.stroke();var Qe=nt-v/3,lt=Dt-m/10,Et=nt-v/3,Ct=Dt+.6*m,Z=nt,C=d;e.beginPath(),e.moveTo(nt,Dt),e.bezierCurveTo(Qe,lt,Et,Ct,Z,C),e.stroke();var yt=Z+v/3,xt=C,jt=Z+v/3,Kt=C-m,ot=Z+v,Ri=C-.6*m;e.beginPath(),e.moveTo(Z,C),e.bezierCurveTo(yt,xt,jt,Kt,ot,Ri),e.stroke();var gt=ot-v/3,Ii=Ri-m/10,on=ot-v/3,Ui=Ri+.6*m,Mi=ot,ci=d;e.beginPath(),e.moveTo(ot,Ri),e.bezierCurveTo(gt,Ii,on,Ui,Mi,ci),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawDiveWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,v=c/3,m=c/2,_=u,w=o?d+2*m:d-2*m,S=u+2*v,k=o?d+m/4:d-m/4,T=u+3*v,R=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(_,w,S,k,T,R),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawRegularTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=i.driftAmount/80*u,v=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+v+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+v+d+s),e.stroke();var m=[];m.push("Regular"),m.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),m.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),m.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),m.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),m.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]),this.icyPatchBackgroundLines.push(m),this.lastPathEndingX=this.lastPathEndingX+l}drawCavernTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var v=l/4*.97,m=i.driftAmount/80*v,_=(i.totalTundraYAmount-i.driftAmount)/80*v;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+_+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+_+m+s),e.stroke();var S=l/4*.75,k=[];k.push("Cavern"),k.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),k.push([this.lastPathEndingX-o,this.lastPathEndingY+S+s]),k.push([this.lastPathEndingX+l-o,this.lastPathEndingY+S+s]),k.push([this.lastPathEndingX+l-o,this.lastPathEndingY-S+s]),k.push([this.lastPathEndingX-o,this.lastPathEndingY-S+s]),this.icyPatchBackgroundLines.push(k),this.lastPathEndingX=this.lastPathEndingX+l}drawHillsTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=i.driftAmount/80*u,v=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+v+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+v+d+s),e.stroke();var m=[];m.push("Hills"),m.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),m.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),m.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),m.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),m.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]);var _=l/12,w=l/4,S=c/2,k=c*(3/4),T=c/4;m.push([this.lastPathEndingX+w-_/2-o,this.lastPathEndingY-S+T/2+s]),m.push([this.lastPathEndingX+w-_/2-o,this.lastPathEndingY-S-T+s,this.lastPathEndingX+w+_/2-o,this.lastPathEndingY-S-T+s,this.lastPathEndingX+w+_/2-o,this.lastPathEndingY-S+T/2+s]),m.push([this.lastPathEndingX+w-_/2-o,this.lastPathEndingY+S+T/2+s]),m.push([this.lastPathEndingX+w-_/2-o,this.lastPathEndingY+S-T+s,this.lastPathEndingX+w+_/2-o,this.lastPathEndingY+S-T+s,this.lastPathEndingX+w+_/2-o,this.lastPathEndingY+S+T/2+s]),m.push([this.lastPathEndingX+2*w-_/2-o,this.lastPathEndingY-k+T/2+s]),m.push([this.lastPathEndingX+2*w-_/2-o,this.lastPathEndingY-k-T+s,this.lastPathEndingX+2*w+_/2-o,this.lastPathEndingY-k-T+s,this.lastPathEndingX+2*w+_/2-o,this.lastPathEndingY-k+T/2+s]),m.push([this.lastPathEndingX+2*w-_/2-o,this.lastPathEndingY+k+T/2+s]),m.push([this.lastPathEndingX+2*w-_/2-o,this.lastPathEndingY+k-T+s,this.lastPathEndingX+2*w+_/2-o,this.lastPathEndingY+k-T+s,this.lastPathEndingX+2*w+_/2-o,this.lastPathEndingY+k+T/2+s]),m.push([this.lastPathEndingX+3*w-_/2-o,this.lastPathEndingY-S+T/2+s]),m.push([this.lastPathEndingX+3*w-_/2-o,this.lastPathEndingY-S-T+s,this.lastPathEndingX+3*w+_/2-o,this.lastPathEndingY-S-T+s,this.lastPathEndingX+3*w+_/2-o,this.lastPathEndingY-S+T/2+s]),m.push([this.lastPathEndingX+3*w-_/2-o,this.lastPathEndingY+S+T/2+s]),m.push([this.lastPathEndingX+3*w-_/2-o,this.lastPathEndingY+S-T+s,this.lastPathEndingX+3*w+_/2-o,this.lastPathEndingY+S-T+s,this.lastPathEndingX+3*w+_/2-o,this.lastPathEndingY+S+T/2+s]),this.icyPatchBackgroundLines.push(m),this.lastPathEndingX=this.lastPathEndingX+l}drawIcyPatchBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.strokeStyle="dimgray",e.globalCompositeOperation="source-atop",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.globalCompositeOperation="destination-over",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,i,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);var k=this.lastPathEndingX-c-d*r+d*o/2,T=this.lastPathEndingY+0+u,R=d*o/this.volcanoRadiusXModifier,L=d*o/2-d/s,W=Math.PI/2,be=180/o,oe=0;a.routeDesign===ze.FirstRegular?(this.volcanoStartingAngle=oe=90,e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d/s-c,this.lastPathEndingY+0+u),e.stroke()):a.routeDesign===ze.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(d-d/s)-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d-c,this.lastPathEndingY+0+u),e.stroke()),(oe=this.volcanoStartingAngle-be)<0&&(oe=360-Math.abs(oe)),e.beginPath(),e.ellipse(k,T,R,L,W,this.volcanoStartingAngle*(Math.PI/180),oe*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=oe}drawSteppingStonesVolcanoOverview(e,i,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);for(var k=this.lastPathEndingX-c-d*r+d*o/2,T=this.lastPathEndingY+0+u,R=d*o/this.volcanoRadiusXModifier,L=d*o/2-d/s,W=Math.PI/2,be=180/o,De=0,oe=be/20,_e=0;_e<10;_e++){var ge=this.volcanoStartingAngle-oe*(2*_e);ge<0&&(ge=360-Math.abs(ge)),(De=ge-oe)<0&&(De=360-Math.abs(De)),e.beginPath(),e.ellipse(k,T,R,L,W,ge*(Math.PI/180),De*(Math.PI/180),!0),e.stroke()}(De=this.volcanoStartingAngle-be)<0&&(De=360-Math.abs(De)),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=De}drawBackgroundVolcano(e,i,r,a,o,s,l,c){null==l&&(l=0),null==c&&(c=0);var u=.1*(a-r),d=(r+u)*this.canvasXDistanceScale*o-l,v=(a-u)*this.canvasXDistanceScale*o-l,m=v-d,_=(a-r)*this.canvasXDistanceScale*o/this.volcanoRadiusXModifier,w=this.canvasHeight*o,S=this.backgroundVolcanoYStart-.75*_+c,k=d+.15*m,T=w-10*s,R=d+.35*m,L=S+20*s,W=d+.4*m,ae=S,ee=v-.15*m,be=w-10*s,oe=v-.35*m,_e=S+20*s,ge=v-.4*m,De=S,dt=e.fillStyle,nt=e.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);nt.addColorStop(0,"red"),nt.addColorStop(1,"orange"),e.fillStyle=nt;var Dt=W+(ge-W)/3,Qe=S+_/4,lt=W+2*(ge-W)/3,Et=S+_/4,xt=W-.075*m,jt=ae+_/2,Kt=ge+.075*m,ot=De+_/2,Ri=xt+1.7*(Kt-xt)/5,gt=jt+.5*_,Ii=xt+1.4*(Kt-xt)/5,on=jt+_/2,Ui=xt+2.5*(Kt-xt)/5,Mi=jt,ci=xt+3.6*(Kt-xt)/5,Hi=jt+_,Qi=xt+3.3*(Kt-xt)/5,Gi=jt-.25*_;e.beginPath(),e.moveTo(W,ae),e.bezierCurveTo(Dt,Qe,lt,Et,ge,De),e.lineTo(Kt,ot),e.moveTo(Kt,ot),e.bezierCurveTo(ci,Hi,Qi,Gi,Ui,Mi),e.bezierCurveTo(Ri,gt,Ii,on,xt,jt),e.lineTo(W,ae),e.fill(),e.beginPath(),e.moveTo(d,w),e.bezierCurveTo(k,T,R,L,W,ae),e.stroke(),e.beginPath(),e.moveTo(v,w),e.bezierCurveTo(ee,be,oe,_e,ge,De),e.stroke();var Ki=e.lineWidth;e.lineWidth=2;var $t=.175,ei=d+m*($t+.025),ft=w-_/4,Vi=d+m*($t+.2),vi=S+_/3,wi=d+m*($t+.25),mi=S+_/4;e.beginPath(),e.moveTo(d+m*$t,.95*w),e.bezierCurveTo(ei,ft,Vi,vi,wi,mi),e.stroke();var ri=d+m*(.025+($t=.35)),Oi=w-_/4,Ln=d+m*($t+.075),Dn=S+_/2,hr=d+m*($t+.1),Jr=S+_/3;e.beginPath(),e.moveTo(d+m*$t,.95*w),e.bezierCurveTo(ri,Oi,Ln,Dn,hr,Jr),e.stroke();var Dr=v-m*(.025+($t=.35)),Qn=w-_/4,_n=v-m*($t+.075),Zi=S+_/2,mt=v-m*($t+.1),Ze=S+_/3;e.beginPath(),e.moveTo(v-m*$t,.95*w),e.bezierCurveTo(Dr,Qn,_n,Zi,mt,Ze),e.stroke();var wt=v-m*(.025+($t=.175)),fr=w-_/4,ea=v-m*($t+.2),ta=S+_/3,fo=v-m*($t+.25),po=S+_/4;if(e.beginPath(),e.moveTo(v-m*$t,.95*w),e.bezierCurveTo(wt,fr,ea,ta,fo,po),e.stroke(),e.lineWidth=Ki,void 0!==this.race.raceUI.lavaFallPercentByFrame[i]&&0!==this.race.raceUI.lavaFallPercentByFrame[i].length&&void 0!==this.race.raceUI.lavaFallPercentByFrame[i][0]){1===o&&(i=this.race.raceUI.lavaFallPercentByFrame.length-1);var he=this.race.raceUI.lavaFallPercentByFrame[i],fi=(a-r)*this.canvasXDistanceScale*o,Pn=r*this.canvasXDistanceScale*o,go=Pn+.4*fi-l+0,Vo=Pn+.45*fi-l+0,Oo=Pn+.5*fi-l+0,No=Pn+.55*fi-l+0,Fo=Pn+.6*fi-l+0,yn=.01*(a-r)*this.canvasXDistanceScale*o,tn=yn/2,En=S+_/4,Ua=this.backgroundVolcanoYStart+_+c,vo=(Ua-En)*he[0];e.beginPath(),e.ellipse(go,En+vo-tn,yn,tn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(go-yn,En,2*yn,vo-(tn-1));var Ha=(Ua-En)*he[1];e.beginPath(),e.ellipse(Vo,En+Ha-tn,yn,tn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Vo-yn,En,2*yn,Ha-(tn-1));var Ti=(Ua-En)*he[2];e.beginPath(),e.ellipse(Oo,En+Ti-tn,yn,tn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Oo-yn,En,2*yn,Ti-(tn-1));var ac=(Ua-En)*he[3];e.beginPath(),e.ellipse(No,En+ac-tn,yn,tn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(No-yn,En,2*yn,ac-(tn-1));var Nr=(Ua-En)*he[4];e.beginPath(),e.ellipse(Fo,En+Nr-tn,yn,tn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Fo-yn,En,2*yn,Nr-(tn-1)),e.fillStyle=dt}else e.fillStyle=dt}drawBrazier(e,i,r,a,o,s,l,c,u,d,v){var m=.01*this.race.length*this.canvasXDistanceScale*o;null==u&&(u=0),null==d&&(d=0),null==v&&(v=!1);var _=r*this.canvasXDistanceScale*s-u,w=this.canvasHeight/2,S=.166667*m,k=.333333*m,T=.666667*m;if(i===j.Flatland)w-=T;else if(i===j.Ocean)v?w-=T:w+=T;else if(i===j.Tundra)w-=this.canvasHeight/15;else if(i===j.Mountain){if(w=-w,_>-m&&_<this.canvasWidth){var W=(this.canvasWidth-_)/this.canvasWidth;w=W*this.canvasHeight,console.log(_),v?(_=.5*this.canvasWidth-this.canvasHeight/this.canvasWidth*(this.canvasWidth-_),w=W*this.canvasHeight):(_=.5*this.canvasWidth+this.canvasHeight/this.canvasWidth*_,w=(1-W)*this.canvasHeight)}}else i===j.Volcanic&&(w-=d);a.fillStyle="brown",a.strokeStyle="black",a.lineWidth="2";var ee=_,be=w-(De=T/6);this.drawRoundedRectangle(a,ee+(ge=m/6+a.lineWidth/8),be,oe=m/6-a.lineWidth/2,De,3),this.drawRoundedRectangle(a,ee+2*ge,be,oe,De,3),this.drawRoundedRectangle(a,ee+3*ge,be,oe,De,3),this.drawRoundedRectangle(a,ee+4*ge,be,oe,De,3);var oe,ge,De,_e=_,dt=w-T-(De=T/6);if(this.drawRoundedRectangle(a,_e+(ge=m/6+a.lineWidth/8),dt,oe=m/6-a.lineWidth/2,De,3),this.drawRoundedRectangle(a,_e+2*ge,dt,oe,De,3),this.drawRoundedRectangle(a,_e+3*ge,dt,oe,De,3),this.drawRoundedRectangle(a,_e+4*ge,dt,oe,De,3),a.strokeStyle="black",a.fillStyle="gray",a.beginPath(),a.moveTo(_+S,w),a.lineTo(_+S+k,w),a.lineTo(_+S+k,w-T),a.lineTo(_+S,w-T),a.lineTo(_+S,w),a.stroke(),a.fill(),a.beginPath(),a.moveTo(_+S+k,w),a.lineTo(_+S+2*k,w),a.lineTo(_+S+2*k,w-T),a.lineTo(_+S+k,w-T),a.lineTo(_+S+k,w),a.stroke(),a.fill(),c>=e.changeOnFrame){var nt=.66667*m/3,Dt=_+.166*m,Qe=1.5*T,lt=w-T-1.15*De,Et=nt/3;e.objectType===ni.amberBrazier&&(a.fillStyle="#ed8207"),e.objectType===ni.sapphireBrazier&&(a.fillStyle="#2554C7"),e.objectType===ni.topazBrazier&&(a.fillStyle="#f5e342"),e.objectType===ni.amethystBrazier&&(a.fillStyle="#7b2bcc"),e.objectType===ni.emeraldBrazier&&(a.fillStyle="#50C878"),e.objectType===ni.rubyBrazier&&(a.fillStyle="#9b111e");var Ct=.5*Qe,Z=Qe,C=.5*Qe,yt=Dt+nt/2,xt=lt-Ct/8,jt=Dt+nt/2,Kt=lt-Ct/2,ot=Dt+nt/1.75,Ri=lt-Ct/2;a.beginPath(),a.moveTo(Dt,lt),a.bezierCurveTo(yt,xt,jt,Kt,ot,Ri);var Mi=Dt+nt,ci=lt;a.bezierCurveTo(Dt+nt/1.75,lt-Ct/8,Dt+nt,lt,Mi+Et,ci);var Hi=Mi+nt/2,Qi=ci-Z/8,Gi=Mi+nt/2,Ki=ci-Z/2,$t=Mi+nt/1.75,ei=ci-Z/2;a.moveTo(Mi-Et,ci),a.bezierCurveTo(Hi,Qi,Gi,Ki,$t,ei);var mi=Mi+nt,ri=ci;a.bezierCurveTo(Mi+nt/1.75,ci-Z/8,Mi+nt,ci,mi+Et,ri);var Oi=mi+nt/2,Ln=ri-C/8,Dn=mi+nt/2,hr=ri-C/2,Jr=mi+nt/1.75,Dr=ri-C/2;a.moveTo(mi-Et,ri),a.bezierCurveTo(Oi,Ln,Dn,hr,Jr,Dr);var Ze=mi+nt,wt=ri;a.bezierCurveTo(mi+nt/1.75,ri-C/8,mi+nt,ri,Ze,wt),a.moveTo(Ze,wt),a.lineTo(_,lt),a.fill()}}grandPrixMountainYReset(e){this.race.raceType===Ie.event&&this.race.eventRaceType===Ge.grandPrix&&0===this.globalService.globalVar.eventRaceData.mountainEndingY&&null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType===j.Mountain&&1===e&&(this.lastPathEndingY=this.canvasHeight/2)}drawRoundedRectangle(e,i,r,a,o,s){var l=i+a,c=r+o;e.beginPath(),e.moveTo(i+s,r),e.lineTo(l-s,r),e.quadraticCurveTo(l,r,l,r+s),e.lineTo(l,r+o-s),e.quadraticCurveTo(l,c,l-s,c),e.lineTo(i+s,c),e.quadraticCurveTo(i,c,i,c-s),e.lineTo(i,r+s),e.quadraticCurveTo(i,r,i+s,r),e.stroke(),e.fill()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceType!==Ie.event&&(this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[],this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[])}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Bn),E(Fn),E(Di),E(ql))},t.\u0275cmp=bt({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,i){if(1&e&&Pa(F9,5,Ei),2&e){let r;xi(r=ki())&&(i.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,i){1&e&&(f(0,"div",0),D(1,"canvas",1,2),h())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const L9=["circuitRewardModal"];function U9(t,n){if(1&t){const e=de();f(0,"button",6),A("click",function(){return N(e),y(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function H9(t,n){1&t&&(f(0,"span"),g(1,"BURST!"),h())}function G9(t,n){if(1&t){const e=de();f(0,"button",6),A("click",function(){return N(e),y(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function z9(t,n){if(1&t&&(f(0,"div",8)(1,"div",9)(2,"div"),x(3,U9,2,0,"button",10),h(),f(4,"div")(5,"span",11),g(6,"Vel:"),h(),f(7,"span",12),g(8,"Velocity:"),h(),g(9),x(10,H9,2,0,"span",3),h(),f(11,"div")(12,"span",11),g(13,"Stam:"),h(),f(14,"span",12),g(15,"Stamina:"),h(),g(16),h(),f(17,"div")(18,"span",11),g(19,"Pos:"),h(),f(20,"span",12),g(21,"Position:"),h(),g(22),h(),f(23,"div"),x(24,G9,2,0,"button",10),h()(),f(25,"div",13)(26,"div",14),D(27,"app-draw-race",15),h(),D(28,"div",16,17),h()()),2&t){const e=at(29),i=y();p(3),b("ngIf",!i.grandPrixRace),p(6),Wi(" ",i.velocityAtCurrentFrame," / ",i.maxSpeedAtCurrentFrame,"m/s "),p(1),b("ngIf",i.racerEffectAtCurrentFrame===i.burstEffect),p(6),K(" ",i.staminaAtCurrentFrame,"%"),p(6),Wi(" ",i.positionAtCurrentFrame," / ",i.totalRacers,""),p(2),b("ngIf",!i.grandPrixRace),p(3),b("race",i.selectedRace)("skip",i.skipRace.asObservable())("pause",i.pauseRace.asObservable()),p(1),b("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),zt)}}function j9(t,n){if(1&t){const e=de();f(0,"button",6),A("click",function(){return N(e),y(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function $9(t,n){if(1&t){const e=de();f(0,"button",6),A("click",function(){return N(e),y(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function W9(t,n){if(1&t&&(f(0,"div",18)(1,"div",19)(2,"div"),x(3,j9,2,0,"button",10),h(),f(4,"div"),x(5,$9,2,0,"button",10),h()(),D(6,"div",20,17),h()),2&t){const e=at(7),i=y();p(3),b("ngIf",!i.grandPrixRace),p(2),b("ngIf",!i.grandPrixRace),p(1),b("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),zt)}}function q9(t,n){if(1&t){const e=de();f(0,"button",6),A("click",function(){return N(e),y(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function X9(t,n){1&t&&(f(0,"span"),g(1,"BURST!"),h())}function Y9(t,n){if(1&t){const e=de();f(0,"button",6),A("click",function(){return N(e),y(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function Q9(t,n){if(1&t&&(f(0,"div",18)(1,"div",19)(2,"div"),x(3,q9,2,0,"button",10),h(),f(4,"div")(5,"span",11),g(6,"Vel:"),h(),f(7,"span",12),g(8,"Velocity:"),h(),g(9),x(10,X9,2,0,"span",3),h(),f(11,"div")(12,"span",11),g(13,"Stam:"),h(),f(14,"span",12),g(15,"Stamina:"),h(),g(16),h(),f(17,"div")(18,"span",11),g(19,"Pos:"),h(),f(20,"span",12),g(21,"Position:"),h(),g(22),h(),f(23,"div"),x(24,Y9,2,0,"button",10),h()(),f(25,"div",21),D(26,"app-draw-race",15)(27,"br"),h()()),2&t){const e=y();p(3),b("ngIf",!e.grandPrixRace),p(6),Wi(" ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),p(1),b("ngIf",e.racerEffectAtCurrentFrame===e.burstEffect),p(6),K(" ",e.staminaAtCurrentFrame,"%"),p(6),Wi(" ",e.positionAtCurrentFrame," / ",e.totalRacers,""),p(2),b("ngIf",!e.grandPrixRace),p(2),b("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function K9(t,n){1&t&&D(0,"br")}function Z9(t,n){if(1&t&&(f(0,"div",28),g(1),h()),2&t){const e=y().$implicit,i=y(3);p(1),K(" ",i.lookupService.getResourcePopover(e.name,e.shopItemTypeEnum)," ")}}function J9(t,n){if(1&t&&(f(0,"td")(1,"span",26),g(2),h(),g(3),x(4,Z9,2,1,"ng-template",null,27,ht),h()),2&t){const e=n.$implicit,i=at(5);p(1),b("ngbPopover",i),p(1),et(e.name),p(1),K(": ",e.amount," ")}}function eG(t,n){if(1&t&&(f(0,"tr"),x(1,J9,6,3,"td",25),h()),2&t){const e=n.$implicit;p(1),b("ngForOf",e)}}function tG(t,n){if(1&t&&(f(0,"div",22)(1,"span",23),g(2,"Rewards"),h(),f(3,"div",24)(4,"table"),x(5,eG,2,1,"tr",25),h()()()),2&t){const e=y();p(5),b("ngForOf",e.rewardRows)}}function iG(t,n){if(1&t){const e=de();f(0,"div",29)(1,"div",30)(2,"h4",31),g(3,"Circuit Rank Reward!"),h(),f(4,"button",32),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",33)(7,"div",34),g(8," After ranking up, you receive: "),D(9,"br"),f(10,"div",23),g(11),h()(),D(12,"br")(13,"br")(14,"div",35),h(),f(15,"div",36)(16,"button",37),A("click",function(){return N(e).$implicit.dismiss()}),g(17,"Continue"),h()()()}if(2&t){const e=y();p(11),et(e.selectedRace.circuitIncreaseReward[0]),p(3),b("innerHTML",e.selectedRace.circuitIncreaseReward[1],zt)}}let v2=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.initializeService=o,this.modalService=s,this.sanitizer=l,this.raceLogicService=c,this.incrementalRaceUpdates="",this.raceFinished=new ut,this.skipRace=new ye,this.pauseRace=new ye,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=Yr.Burst,this.grandPrixRace=!1}ngOnInit(){var e=this,i=this.globalService.globalVar.settings.get("raceDisplayInfo");i===ba.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):i===ba.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):i===ba.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0),this.selectedRace.raceType===Ie.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.grandPrixRace=!0);var r=new wf;r=this.grandPrixRace?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult:this.raceLogicService.runRace(this.selectedRace),this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(r),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0),this.grandPrixRace&&(this.eventRaceSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Vr(function*(){e.globalService.getTimeToEventRace()>0&&0===e.globalService.globalVar.eventRaceData.bonusTime&&e.raceFinished.emit(!0),e.globalService.globalVar.eventRaceData.isRunning||e.raceFinished.emit(!0)})))}ngOnDestroy(){null!=this.frameByFrameSubscription&&this.frameByFrameSubscription.unsubscribe(),null!=this.updateSubscription&&this.updateSubscription.unsubscribe(),null!=this.eventRaceSubscription&&this.eventRaceSubscription.unsubscribe(),this.raceFinished.emit(!0)}displayRaceUpdates(e){var i=this,r=e.raceUpdates;this.incrementalRaceUpdates="";var o=0,l=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,c=this.updateSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Vr(function*(d){if(i.racePaused||(i.selectedRace.raceType===Ie.event&&i.selectedRace.eventRaceType===Ge.grandPrix&&(i.globalService.globalVar.eventRaceData.currentRaceSegmentCount>l&&(o=0,i.selectedRace=i.globalService.globalVar.eventRaceData.currentRaceSegment,r=i.globalService.globalVar.eventRaceData.currentRaceSegmentResult.raceUpdates),l=i.globalService.globalVar.eventRaceData.currentRaceSegmentCount),o+=1),(i.selectedRace.raceType!==Ie.event||i.selectedRace.eventRaceType!==Ge.grandPrix)&&(0===r.length||i.raceSkipped))return i.raceSkipped&&r.forEach(v=>{i.incrementalRaceUpdates+=i.sanitizer.sanitize(pi.HTML,i.sanitizer.bypassSecurityTrustHtml(v.text+"\n"))}),e.wasSuccessful&&(i.displayResults=!0,null!=i.selectedRace.circuitIncreaseReward&&""!==i.selectedRace.circuitIncreaseReward[0]&&i.modalService.open(i.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void c.unsubscribe();i.selectedRace.raceType===Ie.event&&i.selectedRace.eventRaceType===Ge.grandPrix?i.globalService.globalVar.eventRaceData.segmentTimeCounter*i.frameModifier>=r[0].value&&(i.incrementalRaceUpdates+=i.sanitizer.sanitize(pi.HTML,i.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift()):o>=r[0].value&&(i.incrementalRaceUpdates+=i.sanitizer.sanitize(pi.HTML,i.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift())});return function(d){return u.apply(this,arguments)}}())}setupDisplayRewards(e){this.rewardCells=[],this.rewardRows=[];var i=4;if(window.matchMedia("only screen and (max-width: 760px)").matches&&(i=2),null!=e.rewards){for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%i==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=this;this.totalRacers=this.lookupService.getTotalRacersByRace(this.selectedRace);var r=0,o=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=Vr(function*(l){e.racePaused||(e.selectedRace.raceType===Ie.event&&e.selectedRace.eventRaceType===Ge.grandPrix&&(e.globalService.globalVar.eventRaceData.currentRaceSegmentCount>o&&(e.selectedRace=e.globalService.globalVar.eventRaceData.currentRaceSegment),o=e.globalService.globalVar.eventRaceData.currentRaceSegmentCount),r+=1);var c;c=e.selectedRace.raceType===Ie.event&&e.selectedRace.eventRaceType===Ge.grandPrix?Math.round(e.globalService.globalVar.eventRaceData.segmentTimeCounter*e.frameModifier):r;try{if(e.selectedRace.raceUI.velocityByFrame.length<=c||(e.selectedRace.raceType!==Ie.event||e.selectedRace.eventRaceType!==Ge.grandPrix)&&e.raceSkipped){var u=e.selectedRace.raceUI.velocityByFrame.length-1;e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[u]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[u]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[u].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[u],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[u])}else e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[c]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[c]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[c].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[c],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[c])}catch(d){console.log("error")}});return function(l){return s.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Bn),E(Fn),E(Di),E(u0),E(ho),E(Jo),E(v0))},t.\u0275cmp=bt({type:t,selectors:[["app-race"]],viewQuery:function(e,i){if(1&e&&Pa(L9,7),2&e){let r;xi(r=ki())&&(i.circuitRewardModal=r.first)}},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:11,vars:5,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[3,"click",4,"ngIf"],[1,"mobileVersion"],[1,"webVersion"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"oneDisplayValue"],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],["popContent",""],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,z9,30,13,"div",1),x(2,W9,8,4,"div",2),x(3,Q9,28,11,"div",2),x(4,K9,1,0,"br",3),x(5,tG,6,1,"div",4),f(6,"div",5)(7,"button",6),A("click",function(){return i.goToRaceSelection()}),g(8,"Back"),h()()(),x(9,iG,18,2,"ng-template",null,7,ht)),2&e&&(p(1),b("ngIf",i.displayVisualRace&&i.displayTextUpdates),p(1),b("ngIf",!i.displayVisualRace&&i.displayTextUpdates),p(1),b("ngIf",i.displayVisualRace&&!i.displayTextUpdates),p(1),b("ngIf",i.displayVisualRace&&!i.displayTextUpdates),p(1),b("ngIf",i.displayResults))},directives:[hi,B9,cn,Zr],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;margin-left:.5rem;margin-right:.5rem;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%], .onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}.mobileVersion[_ngcontent-%COMP%]{display:none}.webVersion[_ngcontent-%COMP%]{display:inline-block}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}.results[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawRace" "raceUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.raceUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();function nG(t,n){if(1&t){const e=de();f(0,"div",9)(1,"button",10),A("click",function(){return N(e),y(2).returnToAnimalView()}),g(2,"Back"),h()()}}function rG(t,n){if(1&t){const e=de();f(0,"div",11)(1,"div")(2,"app-animal-list",12),A("selectedAnimal",function(r){return N(e),y(2).selectedAnimal(r)}),h()()()}if(2&t){const e=y(2);p(2),b("availableAnimals",e.availableAnimals)("isTrainingTrackView",!0)}}function aG(t,n){if(1&t){const e=de();f(0,"div",13)(1,"app-training-track-race-view",14),A("raceSelected",function(r){return N(e),y(2).raceSelected(r)})("returnEmitter",function(){return N(e),y(2).returnToAnimalView()}),h()()}if(2&t){const e=y(2);p(1),b("selectedAnimal",e.animal)}}function oG(t,n){if(1&t&&(f(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),g(4,"Training Track"),h(),f(5,"div",5),g(6," Each animal can run their own training track to gain rewards and unique bonuses. To get each reward, you will have to beat each track at a progressively faster pace. "),h()(),x(7,nG,3,0,"div",6),h(),D(8,"hr"),x(9,rG,3,2,"div",7),x(10,aG,2,1,"div",8),h()),2&t){const e=y();p(7),b("ngIf",e.animalSelected),p(2),b("ngIf",!e.animalSelected),p(1),b("ngIf",e.animalSelected)}}function sG(t,n){if(1&t){const e=de();f(0,"div",15)(1,"app-race",16),A("raceFinished",function(){return N(e),y().raceFinished()}),h()()}if(2&t){const e=y();p(1),b("selectedRace",e.selectedRace)}}const lG=function(t){return{fullHeight:t}};let m2=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1,this.raceSelectedEmitter=new ut}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(this.existingPrimaryDeckAnimals=[],e.selectedAnimals.forEach(i=>{this.existingPrimaryDeckAnimals.push(i)}))}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(){this.animalSelected=!1}raceSelected(e){this.selectedRace=e,this.showRace=!0,this.raceSelectedEmitter.emit(!0)}ngOnDestroy(){this.raceSelectedEmitter.emit(!1)}raceFinished(){this.showRace=!1,this.raceSelectedEmitter.emit(!1);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(e.selectedAnimals=this.existingPrimaryDeckAnimals)}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-training-track-view"]],outputs:{raceSelectedEmitter:"raceSelectedEmitter"},decls:3,vars:5,consts:[[1,"trainingTrackView",3,"ngClass"],[4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"infoGridContainer"],[1,"info"],[1,"description"],["class","back",4,"ngIf"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"back"],[3,"click"],[1,"selectAnimalView"],[3,"availableAnimals","isTrainingTrackView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","raceSelected","returnEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,oG,11,3,"div",1),x(2,sG,2,1,"div",2),h()),2&e&&(b("ngClass",hn(3,lG,i.showRace)),p(1),b("ngIf",!i.showRace),p(1),b("ngIf",i.showRace))},directives:[rn,hi,zf,N9,v2],styles:['.trainingTrackView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.fullHeight[_ngcontent-%COMP%]{height:100%}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}']}),t})();function cG(t,n){1&t&&(f(0,"span",13),g(1,"!"),h())}function uG(t,n){1&t&&(f(0,"span",13),g(1,"!"),h())}function dG(t,n){if(1&t){const e=de();f(0,"div",6)(1,"div",7)(2,"button",8),A("click",function(){N(e);const r=y(2);return r.changeDisplayRaceView(r.raceTypeEnum.circuit)}),g(3,"Circuit Races"),h(),f(4,"button",9),A("click",function(){N(e);const r=y(2);return r.changeDisplayRaceView(r.raceTypeEnum.special)}),x(5,cG,2,0,"span",10),g(6,"Special Races"),h(),f(7,"button",11),A("click",function(){N(e);const r=y(2);return r.changeDisplayRaceView(r.raceTypeEnum.event)}),x(8,uG,2,0,"span",10),g(9,"Event Races"),h(),f(10,"button",12),A("click",function(){N(e);const r=y(2);return r.changeDisplayRaceView(r.raceTypeEnum.trainingTrack)}),g(11,"Training Track"),h()(),D(12,"hr"),h()}if(2&t){const e=y(2);p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.circuit?"filterActive":""),p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.special?"filterActive":""),p(1),b("ngIf",e.newSpecialRaceAvailable),p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.event?"filterActive":""),p(1),b("ngIf",e.eventRaceNowAvailable),p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.trainingTrack?"filterActive":"")}}function hG(t,n){if(1&t){const e=de();f(0,"app-circuit-view",14),A("raceSelected",function(r){return N(e),y(2).raceSelected(r)}),h()}}function fG(t,n){if(1&t){const e=de();f(0,"app-local-view",14),A("raceSelected",function(r){return N(e),y(2).raceSelected(r)}),h()}}function pG(t,n){if(1&t){const e=de();f(0,"app-event-view",14),A("raceSelected",function(r){return N(e),y(2).raceSelected(r)}),h()}}function gG(t,n){if(1&t){const e=de();f(0,"app-training-track-view",15),A("raceSelectedEmitter",function(r){return N(e),y(2).trainingTrackRaceSelected(r)}),h()}}function vG(t,n){if(1&t&&(f(0,"div",2),x(1,dG,13,6,"div",3),x(2,hG,1,0,"app-circuit-view",4),x(3,fG,1,0,"app-local-view",4),x(4,pG,1,0,"app-event-view",4),x(5,gG,1,0,"app-training-track-view",5),h()),2&t){const e=y();p(1),b("ngIf",!e.trainingTrackRace),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.circuit),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.special),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.event),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.trainingTrack)}}function mG(t,n){if(1&t){const e=de();f(0,"div",16)(1,"app-race",17),A("raceFinished",function(){return N(e),y().raceFinished()}),h()()}if(2&t){const e=y();p(1),b("selectedRace",e.selectedRace)}}let bG=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.componentCommunicationService=i,this.gameLoopService=r,this.lookupService=a,this.displayRaceView=Ie.circuit,this.showRace=!1,this.trainingTrackRace=!1,this.raceTypeEnum=Ie,this.newSpecialRaceAvailable=!1,this.eventRaceNowAvailable=!1}ngOnInit(){var e=this;this.componentCommunicationService.setNewView(Tt.raceselection),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=Vr(function*(r){e.newSpecialRaceAvailable=e.globalService.globalVar.notifications.isNewSpecialRaceAvailable&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9),e.eventRaceNowAvailable=e.globalService.globalVar.notifications.isEventRaceNowActive&&e.lookupService.isItemUnlocked("grandPrix")&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9)});return function(r){return i.apply(this,arguments)}}()),this.communicationSubscription=this.componentCommunicationService.getRaceView().subscribe(i=>{this.displayRaceView=i})}changeDisplayRaceView(e){this.displayRaceView=e,e===Ie.special&&(this.newSpecialRaceAvailable=this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!1),e===Ie.event&&(this.eventRaceNowAvailable=this.globalService.globalVar.notifications.isEventRaceNowActive=!1)}raceSelected(e){this.selectedRace=e,this.showRace=!0}raceFinished(){this.showRace=!1}trainingTrackRaceSelected(e){this.trainingTrackRace=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.communicationSubscription&&this.communicationSubscription.unsubscribe(),this.globalService.globalVar.localRaces=[]}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(mn),E(Bn),E(Di))},t.\u0275cmp=bt({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],["class","info",4,"ngIf"],[3,"raceSelected",4,"ngIf"],[3,"raceSelectedEmitter",4,"ngIf"],[1,"info"],[1,"raceGridContainer"],[1,"buttonAsText","circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","local","s5Heading","clickableText",3,"ngClass","click"],["class","availableIcon",4,"ngIf"],[1,"buttonAsText","event","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","trainingTrack","s5Heading","clickableText",3,"ngClass","click"],[1,"availableIcon"],[3,"raceSelected"],[3,"raceSelectedEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(x(0,vG,6,5,"div",0),x(1,mG,2,1,"div",1)),2&e&&(b("ngIf",!i.showRace),p(1),b("ngIf",i.showRace))},directives:[hi,rn,hH,FH,D9,m2,v2],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local event trainingTrack"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.trainingTrack[_ngcontent-%COMP%]{grid-area:trainingTrack;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}@media (max-width: 800px){.raceGridContainer[_ngcontent-%COMP%]{grid-template-columns:.9fr 1.1fr 1fr 1fr}}']}),t})(),_G=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(E(Fn))},t.\u0275cmp=bt({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"span",1)(2,"input",2),A("ngModelChange",function(a){return i.model=a})("input",function(){return i.toggle()}),h(),f(3,"label",3),g(4),h()()()),2&e&&(p(1),b("ngbPopover",i.popoverText),p(1),b("id",i.getId())("ngModel",i.model),p(1),b("for",i.getId()),p(1),et(i.label))},directives:[Zr,uu,Ds,Rs],styles:[""]}),t})();function yG(t,n){if(1&t&&(f(0,"div",7)(1,"em"),g(2),h(),D(3,"br")(4,"br"),h()),2&t){const e=y();p(2),K("",e.pointsNeededInColumn," points needed in this column to unlock")}}function wG(t,n){1&t&&(f(0,"div",7)(1,"em"),g(2," Click Upgrade to unlock this talent. "),D(3,"br")(4,"br"),h()())}function CG(t,n){1&t&&(f(0,"div"),D(1,"br")(2,"br"),h())}function SG(t,n){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"em")(3,"div",7),g(4,"Next Upgrade: "),h()(),D(5,"div",8),h()),2&t){const e=y();p(5),b("innerHTML",e.upgradedTalentDescription,zt)}}function TG(t,n){if(1&t){const e=de();f(0,"div",9),g(1),f(2,"button",10),A("click",function(){return N(e),y().spendTalentPoint()}),g(3,"Upgrade"),h()()}if(2&t){const e=y();p(1),Wi(" ",e.pointsInTalent," / ",e.totalPossiblePoints," Points "),p(1),b("disabled",!e.hasTalentPoint||!e.hasEnoughPointsInColumn||e.isTalentMaxed())}}const DG=function(t){return{talentInactive:t}};let RG=(()=>{class t{constructor(e,i,r){this.lookupService=e,this.gameLoopService=i,this.globalService=r,this.isPreview=!1,this.previewType="",this.spentTalent=new ut}ngOnInit(){this.talentTreeType=this.selectedAnimal.talentTree.talentTreeType,this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.totalPossiblePoints=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.talentTreeType),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0;var e=0;1===this.row&&(e=this.selectedAnimal.talentTree.row2RequiredPoints),2===this.row&&(e=this.selectedAnimal.talentTree.row3RequiredPoints),3===this.row&&(e=this.selectedAnimal.talentTree.row4RequiredPoints),this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0,this.isPreview&&""!==this.previewType&&(this.talentTreeType=this.lookupService.getTalentTreeByStringName(this.previewType)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0})}isTalentMaxed(){var e=!1;return this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column)>=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.selectedAnimal.talentTree.talentTreeType)&&(e=!0),e}spendTalentPoint(){this.isTalentMaxed()||(this.selectedAnimal.talentTree.spendTalentPoint(this.row,this.column),this.spentTalent.emit(!0),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.globalService.calculateAnimalRacingStats(this.selectedAnimal))}ngOnChanges(e){void 0!==e.previewType&&this.isPreview&&(this.previewType=e.previewType.currentValue,this.talentTreeType=this.lookupService.getTalentTreeByStringName(this.previewType))}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(Di),E(Bn),E(It))},t.\u0275cmp=bt({type:t,selectors:[["app-talent"]],inputs:{selectedAnimal:"selectedAnimal",row:"row",column:"column",isPreview:"isPreview",previewType:"previewType"},outputs:{spentTalent:"spentTalent"},features:[Gn],decls:12,vars:12,consts:[[1,"talent"],[1,"header","keyword"],[1,"content"],["class","centeredText",4,"ngIf"],[4,"ngIf"],[1,"description",3,"ngClass","innerHTML"],["class","footer",4,"ngIf"],[1,"centeredText"],[1,"talentInactive",3,"innerHTML"],[1,"footer"],[3,"disabled","click"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"span"),g(3),h()(),f(4,"div",2),x(5,yG,5,1,"div",3),x(6,wG,5,0,"div",3),x(7,CG,3,0,"div",4),D(8,"div",5),x(9,SG,6,1,"div",4),D(10,"br"),x(11,TG,4,3,"div",6),h()()),2&e&&(p(3),rh("",i.lookupService.getNameByTalentTree(i.talentTreeType)," Column ",i.column+1," Row ",i.row+1,""),p(2),b("ngIf",i.pointsNeededInColumn>0),p(1),b("ngIf",i.pointsNeededInColumn<=0&&0===i.pointsInTalent&&!i.isPreview),p(1),b("ngIf",i.pointsInTalent===i.totalPossiblePoints),p(1),b("ngClass",hn(10,DG,0===i.pointsInTalent))("innerHTML",i.talentDescription,zt),p(1),b("ngIf",i.pointsInTalent>0&&i.pointsInTalent<i.totalPossiblePoints&&!i.isPreview),p(2),b("ngIf",!i.isPreview))},directives:[hi,rn],styles:['.talent[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr;justify-content:stretch;grid-template-areas:"header" "content"}.header[_ngcontent-%COMP%]{grid-area:header;background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary)}.content[_ngcontent-%COMP%]{grid-area:content;margin:1rem;display:flex;flex-direction:column;justify-content:space-between}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.talentInactive[_ngcontent-%COMP%]{opacity:.6}']}),t})();function xG(t,n){if(1&t&&(f(0,"div",14),g(1,"Equipped: "),f(2,"span",52),g(3),h(),D(4,"br")(5,"br"),g(6),h()),2&t){const e=y();b("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),p(3),et(e.selectedAnimal.equippedItem.name),p(3),K(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function kG(t,n){1&t&&(f(0,"div"),g(1," Equipped: None "),h())}function MG(t,n){if(1&t){const e=de();f(0,"button",8),A("click",function(){return N(e),y().unequipItem()}),g(1,"Unequip Item"),h()}}function AG(t,n){if(1&t&&(f(0,"span",12),g(1),h()),2&t){const e=y(2);p(1),K(" ",e.getTalentTreeName(),"")}}function PG(t,n){if(1&t){const e=de();f(0,"div",53)(1,"div"),x(2,AG,2,1,"span",54),h(),f(3,"button",8),A("click",function(){N(e);const r=y(),a=at(217);return r.openTalentsModal(a)}),g(4,"View Talents"),h()()}if(2&t){const e=y();p(2),b("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function EG(t,n){if(1&t){const e=de();f(0,"div")(1,"span",56),g(2),h(),f(3,"span")(4,"button",57),A("click",function(){N(e);const r=y(2);return r.editingName=!r.editingName}),g(5,"Edit"),h()()()}if(2&t){const e=y(2);p(2),K("",e.selectedAnimal.name," ")}}function IG(t,n){if(1&t){const e=de();f(0,"div")(1,"span")(2,"input",58),A("ngModelChange",function(r){return N(e),y(2).newName=r}),h()(),f(3,"span")(4,"button",8),A("click",function(){return N(e),y(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),A("click",function(){N(e);const r=y(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=y(2);p(2),b("ngModel",e.newName)}}function VG(t,n){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=y(2);cr("ngbPopover",e.traitStatGainDescription),p(1),K(" ",e.selectedAnimal.trait.traitName," ")}}function OG(t,n){if(1&t&&(f(0,"div"),x(1,EG,6,1,"div",6),x(2,IG,9,1,"div",6),f(3,"span",12),x(4,VG,2,2,"span",55),g(5),h()()),2&t){const e=y();p(1),b("ngIf",!e.editingName),p(1),b("ngIf",e.editingName),p(2),b("ngIf",null!=e.selectedAnimal.trait),p(1),K(" ",e.selectedAnimal.getAnimalType()," ")}}function NG(t,n){if(1&t){const e=de();f(0,"div")(1,"span")(2,"button",8),A("click",function(){N(e);const r=y(2);return r.editingName=!r.editingName}),g(3,"Edit Name"),h()()()}}function FG(t,n){if(1&t){const e=de();f(0,"div")(1,"span")(2,"input",60),A("ngModelChange",function(r){return N(e),y(2).newName=r}),h()(),f(3,"span")(4,"button",8),A("click",function(){return N(e),y(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),A("click",function(){N(e);const r=y(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=y(2);p(2),b("ngModel",e.newName)}}function BG(t,n){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=y(2);cr("ngbPopover",e.traitStatGainDescription),p(1),K(" ",e.selectedAnimal.trait.traitName," ")}}function LG(t,n){if(1&t&&(f(0,"div"),x(1,NG,4,0,"div",6),x(2,FG,9,1,"div",6),f(3,"span",12),x(4,BG,2,2,"span",55),g(5),h()()),2&t){const e=y();p(1),b("ngIf",!e.editingName),p(1),b("ngIf",e.editingName),p(2),b("ngIf",null!=e.selectedAnimal.trait),p(1),K(" ",e.selectedAnimal.getAnimalType()," ")}}function UG(t,n){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=y();p(1),K("(",e.selectedAnimal.currentTraining.trainingName,")")}}function HG(t,n){if(1&t&&D(0,"app-toggle",61),2&t){const e=y();b("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function GG(t,n){if(1&t&&(f(0,"div",14),g(1),D(2,"br")(3,"br"),g(4),h()),2&t){const e=y(2);b("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)),p(1),K("Orb: ",e.selectedAnimal.equippedOrb.name," "),p(3),K(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)," ")}}function zG(t,n){1&t&&(f(0,"div"),g(1," Orb: None "),h())}function jG(t,n){if(1&t){const e=de();f(0,"button",8),A("click",function(){return N(e),y(2).unequipOrb()}),g(1,"Unequip Orb"),h()}}function $G(t,n){if(1&t){const e=de();f(0,"div",62),x(1,GG,5,3,"div",5),x(2,zG,2,0,"div",6),D(3,"br"),x(4,jG,2,0,"button",7),f(5,"button",8),A("click",function(){N(e);const r=y(),a=at(215);return r.openOrbModal(a)}),g(6,"Equip New Orb"),h()()}if(2&t){const e=y();p(1),b("ngIf",null!=e.selectedAnimal.equippedOrb),p(1),b("ngIf",null==e.selectedAnimal.equippedOrb),p(2),b("ngIf",null!=e.selectedAnimal.equippedOrb)}}function WG(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Training:"),h(),g(4),Ot(5,"number"),h(),D(6,"br"),h()),2&t){const e=y(),i=at(203);p(2),b("ngbPopover",i),p(2),K(" ",oi(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromTraining,"1.0-0")," ")}}function qG(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Free Races:"),h(),g(4),Ot(5,"number"),h()()),2&t){const e=y(),i=at(199);p(2),b("ngbPopover",i),p(2),K(" ",oi(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces,"1.0-0")," ")}}function XG(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Circuit Races:"),h(),g(4),Ot(5,"number"),h()()),2&t){const e=y(),i=at(201);p(2),b("ngbPopover",i),p(2),K(" ",oi(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces,"1.0-0")," ")}}function YG(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Training Time Reduction:"),h(),g(4),Ot(5,"number"),h()()),2&t){const e=y(),i=at(207);p(2),b("ngbPopover",i),p(2),K(" ",oi(5,2,e.selectedAnimal.miscStats.trainingTimeReduction,"1.0-0"),"% ")}}function QG(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Diminishing Returns per Facility Level:"),h(),g(4),Ot(5,"number"),h()()),2&t){const e=y(),i=at(205);p(2),b("ngbPopover",i),p(2),K(" ",oi(5,2,e.selectedAnimal.miscStats.diminishingReturnsBonus,"1.0-0")," ")}}function KG(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Talents:"),h(),g(4),Ot(5,"number"),h()()),2&t){const e=y(),i=at(209);p(2),b("ngbPopover",i),p(2),K(" ",oi(5,2,e.selectedAnimal.miscStats.bonusTalents,"1.0-0")," ")}}function ZG(t,n){if(1&t){const e=de();f(0,"button",64),A("click",function(){N(e);const r=y();return r.selectAbility(r.ability2)}),g(1),h()}if(2&t){const e=y();Mt("filterActive",e.selectedAnimal.ability.name===e.ability2.name),p(1),K("",e.ability2.name," ")}}function JG(t,n){if(1&t){const e=de();f(0,"button",65),A("click",function(){N(e);const r=y();return r.selectAbility(r.ability3)}),g(1),h()}if(2&t){const e=y();Mt("filterActive",e.selectedAnimal.ability.name===e.ability3.name),p(1),K("",e.ability3.name," ")}}function ez(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y();p(1),Wi("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function tz(t,n){1&t&&(f(0,"span"),g(1,"MAX"),h())}function iz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getTopSpeedPopover()," ")}}function nz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getAccelerationPopover()," ")}}function rz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getEndurancePopover()," ")}}function az(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getPowerPopover()," ")}}function oz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getFocusPopover()," ")}}function sz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getAdaptabilityPopover()," ")}}function lz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getAbilityLevelPopover()," ")}}function cz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getBonusFreeRaceXpPopover()," ")}}function uz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getBonusCircuitRaceXpPopover()," ")}}function dz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getBonusTrainingXpPopover()," ")}}function hz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," ")}}function fz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getBonusTrainingTimeReductionPopover()," ")}}function pz(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=y();p(1),K(" ",e.getBonusTalentsPopover()," ")}}function gz(t,n){if(1&t&&(f(0,"div"),D(1,"span",31),h()),2&t){const e=y().$implicit,i=y(4);p(1),b("innerHTML",i.getItemAdditionalText(e),zt)}}const vz=function(t){return{activeSelectedItem:t}};function mz(t,n){if(1&t){const e=de();f(0,"td",76)(1,"div",77),A("click",function(){const a=N(e).$implicit;return y(4).selectItem(a)}),f(2,"h6",78),g(3),h(),x(4,gz,2,1,"div",6),D(5,"br")(6,"br"),g(7),D(8,"br")(9,"br"),h()()}if(2&t){const e=n.$implicit,i=y(4);p(1),b("ngClass",hn(5,vz,e.isSelected)),p(2),Wi("",e.name," (",e.amount,")"),p(1),b("ngIf",i.itemHasAdditionalText(e)),p(3),K(" ",i.getItemShortDescription(e.name)," ")}}function bz(t,n){if(1&t&&(f(0,"tr"),x(1,mz,10,7,"td",75),h()),2&t){const e=n.$implicit;p(1),b("ngForOf",e)}}function _z(t,n){if(1&t){const e=de();f(0,"div",79)(1,"span",80)(2,"span")(3,"span",78),g(4),h(),g(5),h(),f(6,"span",81)(7,"label",82),g(8,"Amount: "),h(),f(9,"input",83),A("ngModelChange",function(r){return N(e),y(3).selectedItemQuantity=r}),h(),f(10,"button",84),A("click",function(){return N(e),y(3).useItem()}),g(11,"Use"),h()()()()}if(2&t){const e=y(3);p(4),et(e.selectedItem.name),p(1),K(" - ",e.getItemShortDescription(e.selectedItem.name)," "),p(4),b("ngModel",e.selectedItemQuantity)}}function yz(t,n){if(1&t&&(f(0,"div")(1,"div",71)(2,"div",72)(3,"table"),x(4,bz,2,1,"tr",73),h()()(),x(5,_z,12,3,"div",74),h()),2&t){const e=y(2);p(4),b("ngForOf",e.itemsRows),p(1),b("ngIf",null!=e.selectedItem)}}function wz(t,n){1&t&&(f(0,"div"),g(1," No items available. "),h())}function Cz(t,n){if(1&t){const e=de();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Use Item"),h(),f(5,"button",70),A("click",function(){return N(e).$implicit.dismiss()}),g(6,"X"),h()(),x(7,yz,6,2,"div",6),x(8,wz,2,0,"div",6),h()()}if(2&t){const e=y();p(7),b("ngIf",e.usableItemsList.length>0),p(1),b("ngIf",0==e.usableItemsList.length)}}const Sz=function(t){return{activeSelectedEquipment:t}};function Tz(t,n){if(1&t){const e=de();f(0,"td",76)(1,"div",86),A("click",function(){const a=N(e).$implicit;return y(3).selectEquipment(a)}),f(2,"h6",52),g(3),h(),D(4,"br")(5,"br"),g(6),D(7,"br"),h()()}if(2&t){const e=n.$implicit,i=y(3);p(1),b("ngClass",hn(4,Sz,e.isSelected)),p(2),Wi("",e.name," (",e.amount,")"),p(3),K(" ",i.getEquipmentShortDescription(e.name)," ")}}function Dz(t,n){if(1&t&&(f(0,"tr"),x(1,Tz,8,6,"td",75),h()),2&t){const e=n.$implicit;p(1),b("ngForOf",e)}}function Rz(t,n){if(1&t){const e=de();f(0,"div",79)(1,"span",87)(2,"span")(3,"span",52),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),A("click",function(){return N(e),y(2).equipItem()}),g(8,"Equip"),h()()()()}if(2&t){const e=y(2);p(4),et(e.selectedEquipment.name),p(1),K(" - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function xz(t,n){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function kz(t,n){if(1&t){const e=de();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Equipment"),h(),f(5,"button",70),A("click",function(){const a=N(e).$implicit;return y().clearSelectedItems(),a.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",85)(10,"table"),x(11,Dz,2,1,"tr",73),h()()(),x(12,Rz,9,2,"div",74),h(),x(13,xz,2,0,"div",6),h()()}if(2&t){const e=y();p(11),b("ngForOf",e.equipmentRows),p(1),b("ngIf",null!=e.selectedEquipment),p(1),b("ngIf",0==e.equipmentList.length)}}const Mz=function(t){return{activeSelectedOrb:t}};function Az(t,n){if(1&t){const e=de();f(0,"td",76)(1,"div",89),A("click",function(){const a=N(e).$implicit;return y(3).selectOrb(a)}),f(2,"h6",90),g(3),h(),D(4,"br"),g(5),D(6,"br"),h()()}if(2&t){const e=n.$implicit,i=y(3);p(1),b("ngClass",hn(3,Mz,e.isSelected)),p(2),et(e.name),p(2),K(" ",i.getEquipmentShortDescription(e.name)," ")}}function Pz(t,n){if(1&t&&(f(0,"tr"),x(1,Az,7,5,"td",75),h()),2&t){const e=n.$implicit;p(1),b("ngForOf",e)}}function Ez(t,n){if(1&t){const e=de();f(0,"div",79)(1,"span",91)(2,"span")(3,"span",90),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),A("click",function(){return N(e),y(2).equipOrb()}),g(8,"Equip"),h()()()()}if(2&t){const e=y(2);p(4),et(e.selectedOrb.name),p(1),K(" - ",e.getEquipmentShortDescription(e.selectedOrb.name)," ")}}function Iz(t,n){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function Vz(t,n){if(1&t){const e=de();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Orb"),h(),f(5,"button",70),A("click",function(){return N(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",88)(10,"table"),x(11,Pz,2,1,"tr",73),h()()(),x(12,Ez,9,2,"div",74),h(),x(13,Iz,2,0,"div",6),h()()}if(2&t){const e=y();p(11),b("ngForOf",e.orbRows),p(1),b("ngIf",null!=e.selectedOrb),p(1),b("ngIf",0==e.equipmentList.length)}}const Oz=function(t){return{selectedTalentTree:t}};function Nz(t,n){if(1&t){const e=de();f(0,"span",96),A("click",function(){const a=N(e).$implicit;return y(4).filterTalentTree(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=y(4);b("ngClass",hn(2,Oz,i.selectedTalentTree===e)),p(1),K(" ",e.trim()," ")}}function Fz(t,n){1&t&&D(0,"div",109)}function Bz(t,n){if(1&t&&D(0,"div",11),2&t){const e=y().index,i=y().index;b("ngClass",y(5).getBorderConditional(i,e))}}function Lz(t,n){if(1&t){const e=de();f(0,"div",104)(1,"div",11)(2,"app-talent",105),A("spentTalent",function(r){return N(e),y(6).spentTalent(r)}),h()(),f(3,"div",106),x(4,Fz,1,0,"div",107),x(5,Bz,1,1,"div",108),h()()}if(2&t){const e=n.index,i=y().index,r=y(5);p(1),b("ngClass",i<r.talentRows-1?"talentContent":"lastTalentContent"),p(1),b("row",i)("column",e)("selectedAnimal",r.selectedAnimal)("isPreview",!0)("previewType",r.selectedTalentTree),p(2),b("ngIf",i!==r.talentRows-1),p(1),b("ngIf",i!==r.talentRows-1)}}const jf=function(){return[]};function Uz(t,n){if(1&t&&(f(0,"div",101)(1,"div",102),x(2,Lz,6,8,"div",103),h()()),2&t){const e=y(5);p(2),b("ngForOf",Jc(1,jf).constructor(e.talentColumns))}}function Hz(t,n){if(1&t){const e=de();f(0,"div")(1,"strong"),g(2),h(),D(3,"br"),f(4,"div",97)(5,"button",93),A("click",function(){return N(e),y(4).selectTalentTree()}),g(6,"Select"),h()(),D(7,"hr"),f(8,"div",98)(9,"em"),g(10,"Preview"),h()(),f(11,"div",99),x(12,Uz,3,2,"div",100),h()()}if(2&t){const e=y(4);p(2),K(" ",e.inDepthTalentTreeDescription," "),p(10),b("ngForOf",Jc(2,jf).constructor(e.talentRows))}}function Gz(t,n){if(1&t&&(f(0,"div")(1,"div",94),x(2,Nz,2,4,"span",95),h(),D(3,"hr"),x(4,Hz,13,3,"div",6),h()),2&t){const e=y(3);p(2),b("ngForOf",e.talentTreeOptions),p(2),b("ngIf",""!==e.inDepthTalentTreeDescription&&void 0!==e.inDepthTalentTreeDescription)}}function zz(t,n){if(1&t){const e=de();f(0,"div")(1,"div",71),x(2,Gz,5,2,"div",6),h(),f(3,"div",79)(4,"button",93),A("click",function(){return N(e),y(2).selectTalentTree()}),g(5,"Select"),h()()()}if(2&t){const e=y(2);p(2),b("ngIf",e.talentTreeOptions.length>0)}}function jz(t,n){1&t&&D(0,"div",109)}function $z(t,n){if(1&t&&D(0,"div",11),2&t){const e=y().index,i=y().index;b("ngClass",y(3).getBorderConditional(i,e))}}function Wz(t,n){if(1&t){const e=de();f(0,"div",104)(1,"div",11)(2,"app-talent",111),A("spentTalent",function(r){return N(e),y(4).spentTalent(r)}),h()(),f(3,"div",106),x(4,jz,1,0,"div",107),x(5,$z,1,1,"div",108),h()()}if(2&t){const e=n.index,i=y().index,r=y(3);p(1),b("ngClass",i<r.talentRows-1?"talentContent":"lastTalentContent"),p(1),b("row",i)("column",e)("selectedAnimal",r.selectedAnimal),p(2),b("ngIf",i!==r.talentRows-1),p(1),b("ngIf",i!==r.talentRows-1)}}function qz(t,n){if(1&t&&(f(0,"div",101)(1,"div",102),x(2,Wz,6,6,"div",103),h()()),2&t){const e=y(3);p(2),b("ngForOf",Jc(1,jf).constructor(e.talentColumns))}}function Xz(t,n){if(1&t&&(f(0,"div",71)(1,"div",110),g(2),h(),D(3,"br"),f(4,"p")(5,"em"),g(6," Note that this functionality is new and subject to change. I have plans to add more talents and certain talents will likely still need rebalancing/redesigning. Bear with me as I work that out. Once I feel like talents are in a final state, everyone will have the option to reset their talent choices if they choose to. Feel free to experiment with the options as they are now and let me know if you have any feedback. Thanks! "),h()(),D(7,"br"),x(8,qz,3,2,"div",100),h()),2&t){const e=y(2);p(2),K("Available Talent Points: ",e.availableTalentPoints,""),p(6),b("ngForOf",Jc(2,jf).constructor(e.talentRows))}}function Yz(t,n){if(1&t){const e=de();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Talents"),h(),f(5,"button",70),A("click",function(){return N(e).$implicit.dismiss()}),g(6,"X"),h()(),x(7,zz,6,1,"div",6),x(8,Xz,9,3,"div",92),h()()}if(2&t){const e=y();p(7),b("ngIf",e.selectedAnimal.talentTree.talentTreeType===e.talentTreeTypeEnum.none),p(1),b("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function Qz(t,n){if(1&t){const e=de();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Base Stats Info"),h(),f(4,"button",70),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",112)(8,"div",66)(9,"span",12),g(10,"Speed - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Endurance - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability - "),h(),g(36),h(),D(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Diminishing Returns - "),h(),g(41),h()()()()}if(2&t){const e=y();p(11),K(" ",e.getTopSpeedPopover()," "),p(5),K(" ",e.getAccelerationPopover()," "),p(5),K(" ",e.getEndurancePopover()," "),p(5),K(" ",e.getPowerPopover()," "),p(5),K(" ",e.getFocusPopover()," "),p(5),K(" ",e.getAdaptabilityPopover()," "),p(5),K(" ",e.getDiminishingReturnsPopover()," ")}}function Kz(t,n){if(1&t){const e=de();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Racing Stats Info"),h(),f(4,"button",70),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",23)(8,"div",66)(9,"span",12),g(10,"Max Speed - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration Rate - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Stamina - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power Efficiency - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus Distance - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability Distance - "),h(),g(36),h(),D(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Burst Chance - "),h(),g(41),h(),D(42,"hr"),f(43,"div",66)(44,"span",12),g(45,"Burst Distance - "),h(),g(46),h()()()()}if(2&t){const e=y();p(11),K(" ",e.selectedAnimal.currentStats.maxSpeedMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.accelerationMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.staminaPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.powerMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.focusMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.adaptabilityMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.burstChancePopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.burstDistancePopover()," ")}}function Zz(t,n){if(1&t){const e=de();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Miscellaneous Stats Info"),h(),f(4,"button",70),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",112)(8,"div",66)(9,"span",12),g(10,"Bonus Breed XP From Training - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Bonus Breed XP From Free Races - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Bonus Breed XP From Circuit Races - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Training Time Reduction - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Bonus Diminishing Returns per Facility Level - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Bonus Talents - "),h(),g(36),h()()()()}if(2&t){const e=y();p(11),K(" ",e.getBonusTrainingXpPopover()," "),p(5),K(" ",e.getBonusFreeRaceXpPopover()," "),p(5),K(" ",e.getBonusCircuitRaceXpPopover()," "),p(5),K(" ",e.getBonusTrainingTimeReductionPopover()," "),p(5),K(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," "),p(5),K(" ",e.getBonusTalentsPopover()," ")}}let Jz=(()=>{class t{constructor(e,i,r,a,o,s){this.lookupService=e,this.modalService=i,this.globalService=r,this.componentCommunicationService=a,this.utilityService=o,this.gameLoopService=s,this.returnEmitter=new ut,this.canAutoBreed=!1,this.areTalentsAvailable=!1,this.orbIsUnlocked=!1,this.talentTreeTypeEnum=pt,this.canBreed=!0,this.orbFunctionalityReleased=!1,this.talentColumns=3,this.talentRows=4,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}keyEvent(e){if(!this.modalService.hasOpenModals()){var i=this.globalService.globalVar.animals.filter(s=>s.isAvailable),r=i.findIndex(s=>this.selectedAnimal===s);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setAnimalView(Tt.animals,o=i[a]),this.resetSelectedAnimalInfo(o);else if("ArrowRight"===e.key){var a,o;(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setAnimalView(Tt.animals,o=i[a]),this.resetSelectedAnimalInfo(o)}}}ngOnInit(){this.handleIntroTutorial(),this.resetSelectedAnimalInfo(this.selectedAnimal),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,i=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=i&&(e=i.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}canAnimalBreed(){var e=!0;return this.selectedAnimal.breedGaugeXp<this.selectedAnimal.breedGaugeMax&&(e=!1),e}breed(){(!this.globalService.globalVar.showBreedWarning||confirm("Breeding will increase your base stat modifiers at the cost of resetting your base stats to their default values. You should do this when you have raced as far as you can without breeding or you have the time to spend to train your stats back. Continue?"))&&(this.globalService.globalVar.showBreedWarning=!1,this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut())}editName(){this.newName.length<=50&&this.newName.length>=1?(this.selectedAnimal.name=this.newName,this.editingName=!1):alert("Name must be between 1 and 50 characters long.")}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>(e.itemType===U.Food||e.itemType===U.Consumable)&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===U.Equipment&&!this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.equipmentList.push(i)}}),this.setupDisplayEquipment(),this.globalService.globalVar.animals.filter(e=>null!=e.equippedItem).forEach(e=>{var i=this.equipmentList.find(r=>{var a;return r.name===(null===(a=e.equippedItem)||void 0===a?void 0:a.name)});null!=i&&(i.amount>0&&(i.amount-=1),i.amount<=0&&(this.equipmentList=this.equipmentList.filter(r=>r.name!==(null==i?void 0:i.name))))})}updateOrbList(){this.orbList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===U.Equipment&&this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.orbList.push(i)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var i=1;i<=this.usableItemsList.length;i++)this.itemsCells.push(this.usableItemsList[i-1]),i%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var i=1;i<=this.equipmentList.length;i++)this.equipmentCells.push(this.equipmentList[i-1]),i%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}setupDisplayOrbs(){this.orbCells=[],this.orbRows=[];for(var i=1;i<=this.orbList.length;i++)this.orbCells.push(this.orbList[i-1]),i%4==0&&(this.orbRows.push(this.orbCells),this.orbCells=[]);0!==this.orbCells.length&&this.orbRows.push(this.orbCells)}openTalentsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openBaseStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openRacingStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openMiscStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()},r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()},r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()})}openOrbModal(e){this.setupDisplayOrbs(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()},r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()})}useItem(){if(void 0!==this.selectedItem){var e=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name&&r.itemType===this.selectedItem.itemType);if(void 0===e)return void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");if(null==this.selectedItemQuantity||isNaN(Number(this.selectedItemQuantity)))return void alert("You must enter a numerical amount to use.");if(e.amount<this.selectedItemQuantity)return void alert("You don't have that many "+e.name+"!");if(this.selectedItem.itemType===U.Consumable&&this.selectedItem.name.includes("Certificate")&&this.lookupService.isAmountMoreThanCertificateCap(this.selectedItemQuantity,this.selectedAnimal,this.selectedItem.name))return void alert("This amount will exceed the amount of these certificates you can give your animal.");if(e.amount-=this.selectedItemQuantity,this.selectedItem.itemType===U.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,null==this.selectedAnimal.mangoesUsed&&(this.selectedAnimal.mangoesUsed=0),this.selectedAnimal.mangoesUsed+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else if("Gingko Leaves"===this.selectedItem.name)this.selectedAnimal.previousBreedLevel=this.selectedAnimal.breedLevel,this.selectedAnimal.breedLevel=1,this.selectedAnimal.breedGaugeMax=200,this.selectedAnimal.breedGaugeXp=0,this.selectedAnimal.incubatorStatUpgrades=new mf;else{var i=new Ve(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(i.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(i.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(i.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(i.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(i.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(i.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(i),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}else this.selectedItem.itemType===U.Consumable&&(this.selectedItemQuantity=+this.selectedItemQuantity,"Free Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+=+this.selectedItemQuantity),"Circuit Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces+=2*this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+=+this.selectedItemQuantity),"Training Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromTraining+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+=+this.selectedItemQuantity),"Diminishing Returns Increase Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.diminishingReturnsBonus+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal)));this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()}}selectItem(e){this.selectedItem=e,this.usableItemsList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}clearSelectedItems(){this.usableItemsList.forEach(e=>{e.isSelected=!1})}clearSelectedEquipment(){this.equipmentList.forEach(e=>{e.isSelected=!1})}clearSelectedOrb(){this.orbList.forEach(e=>{e.isSelected=!1})}equipItem(){void 0!==this.selectedEquipment&&(this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.clearSelectedEquipment(),this.modalService.dismissAll(),this.selectedEquipment=void 0)}selectEquipment(e){this.selectedEquipment=e,this.equipmentList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}unequipItem(){this.selectedAnimal.equippedItem=null,this.clearSelectedEquipment(),this.updateEquipmentList()}equipOrb(){void 0!==this.selectedOrb&&(this.selectedAnimal.equippedOrb=this.selectedOrb,this.updateOrbList(),this.clearSelectedOrb(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal),this.modalService.dismissAll(),this.selectedOrb=void 0)}selectOrb(e){this.selectedOrb=e,this.orbList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}unequipOrb(){this.selectedAnimal.equippedOrb=null,this.clearSelectedOrb(),this.updateOrbList(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getBonusFreeRaceXpPopover(){return this.lookupService.bonusFreeRaceXpPopover(this.selectedAnimal)}getBonusCircuitRaceXpPopover(){return this.lookupService.bonusCircuitRaceXpPopover(this.selectedAnimal)}getBonusTrainingXpPopover(){return this.lookupService.bonusTrainingXpPopover(this.selectedAnimal)}getBonusDiminishingReturnsPerFacilityLevelPopover(){return this.lookupService.bonusDiminishingReturnsPerFacilityLevelPopover(this.selectedAnimal)}getBonusTrainingTimeReductionPopover(){return this.lookupService.bonusTrainingTimeReductionPopover(this.selectedAnimal)}getBonusTalentsPopover(){return this.lookupService.bonusTalentsPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e)}itemHasAdditionalText(e){return!(e.itemType!==U.Consumable||!e.name.includes("Certificate"))}getItemAdditionalText(e){var i="";return e.itemType===U.Consumable&&e.name.includes("Certificate")&&("Free Race Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Circuit Race Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Training Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Diminishing Returns Increase Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>")),this.utilityService.getSanitizedHtml(i)}handleIntroTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===H.Hare);!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(Tt.barn,e.barnNumber)}filterTalentTree(e){this.selectedTalentTree=e,this.inDepthTalentTreeDescription=this.lookupService.getInDepthTalentTreeDescription(e)}selectTalentTree(){""!==this.selectedTalentTree&&null!=this.selectedTalentTree?this.selectedAnimal.talentTree.talentTreeType=this.lookupService.convertTalentTreeNameToEnum(this.selectedTalentTree):alert("You must select a talent tree.")}resetSelectedAnimalInfo(e){var i=this;this.selectedAnimal=e,this.areTalentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.orbIsUnlocked=this.lookupService.isItemUnlocked("orbs"),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel);var r=this.lookupService.getStockbreeder();null!=r&&r>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.updateOrbList(),this.selectedTalentTree="",this.inDepthTalentTreeDescription="",this.componentCommunicationService.setAnimalView(Tt.animals,e);var a=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==a?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(a),this.areTalentsAvailable&&(this.talentTreeOptions=this.lookupService.getTalentTreeNames(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var o=Vr(function*(s){i.canBreed=i.canAnimalBreed()});return function(s){return o.apply(this,arguments)}}())}getTalentTreeName(){var e=this.selectedAnimal.talentTree.getTotalSpentPoints();return this.lookupService.getTalentTreeNameByEnum(this.selectedAnimal.talentTree.talentTreeType)+" Level "+e}getBorderConditional(e,i){var r,a=e+1,o=0;1===a&&(o=this.selectedAnimal.talentTree.row2RequiredPoints),2===a&&(o=this.selectedAnimal.talentTree.row3RequiredPoints),3===a&&(o=this.selectedAnimal.talentTree.row4RequiredPoints);var s=o-this.selectedAnimal.talentTree.getTalentPointsByColumn(i);return"Flatland"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedFlatlandTalentSpacer height0":!0}:4===s?r={"completedFlatlandTalentSpacer height1":!0}:3===s?r={"completedFlatlandTalentSpacer height2":!0}:2===s?r={"completedFlatlandTalentSpacer height3":!0}:1===s?r={"completedFlatlandTalentSpacer height4":!0}:s<=0&&(r={"completedFlatlandTalentSpacer height5":!0})),"Mountain"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedMountainTalentSpacer height0":!0}:4===s?r={"completedMountainTalentSpacer height1":!0}:3===s?r={"completedMountainTalentSpacer height2":!0}:2===s?r={"completedMountainTalentSpacer height3":!0}:1===s?r={"completedMountainTalentSpacer height4":!0}:s<=0&&(r={"completedMountainTalentSpacer height5":!0})),"Ocean"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedOceanTalentSpacer height0":!0}:4===s?r={"completedOceanTalentSpacer height1":!0}:3===s?r={"completedOceanTalentSpacer height2":!0}:2===s?r={"completedOceanTalentSpacer height3":!0}:1===s?r={"completedOceanTalentSpacer height4":!0}:s<=0&&(r={"completedOceanTalentSpacer height5":!0})),"Tundra"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedTundraTalentSpacer height0":!0}:4===s?r={"completedTundraTalentSpacer height1":!0}:3===s?r={"completedTundraTalentSpacer height2":!0}:2===s?r={"completedTundraTalentSpacer height3":!0}:1===s?r={"completedTundraTalentSpacer height4":!0}:s<=0&&(r={"completedTundraTalentSpacer height5":!0})),"Volcanic"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedVolcanicTalentSpacer height0":!0}:4===s?r={"completedVolcanicTalentSpacer height1":!0}:3===s?r={"completedVolcanicTalentSpacer height2":!0}:2===s?r={"completedVolcanicTalentSpacer height3":!0}:1===s?r={"completedVolcanicTalentSpacer height4":!0}:s<=0&&(r={"completedVolcanicTalentSpacer height5":!0})),r}spentTalent(e){this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setAnimal(new Pt)}}return t.\u0275fac=function(e){return new(e||t)(E(Di),E(ho),E(It),E(mn),E(Fn),E(Bn))},t.\u0275cmp=bt({type:t,selectors:[["app-selected-animal"]],hostBindings:function(e,i){1&e&&A("keyup",function(a){return i.keyEvent(a)},!1,Co)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:224,vars:113,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","talents",4,"ngIf"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],[1,"clickableText","buttonAsText",3,"click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back"],["class","orb",4,"ngIf"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"tooltipIcon",3,"click"],[1,"racingStats"],[1,"miscStats"],[1,"abilities"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"s4Heading",3,"ngbPopover"],[1,"ability1","s5Heading","clickableText","buttonAsText",3,"click"],["class","ability2 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],["class","ability3 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],[1,"abilityXp"],[3,"innerHTML"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["bonusFreeRaceXpPopoverContent",""],["bonusCircuitRaceXpPopoverContent",""],["bonusTrainingXpPopoverContent",""],["bonusDiminishingReturnsPerFacilityLevelPopoverContent",""],["bonusTrainingTimeReductionPopoverContent",""],["bonusTalentsPopoverContent",""],["content",""],["equipment",""],["orb",""],["talentsContent",""],["baseStatsContent",""],["racingStatsContent",""],["miscStatsContent",""],[1,"equipmentKeyword"],[1,"talents"],["class","keyword",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"orb"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],[1,"ability2","s5Heading","clickableText","buttonAsText",3,"click"],[1,"ability3","s5Heading","clickableText","buttonAsText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"selectableItem",3,"ngClass","click"],[1,"resourceKeyword"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectableEquipment",3,"ngClass","click"],[1,"selectedEquipmentSpan"],[1,"orbContainer"],[1,"selectableOrb",3,"ngClass","click"],[1,"progressionKeyword"],[1,"selectedOrbSpan"],["class","modal-body",4,"ngIf"],["type","button",3,"click"],[1,"typeContainer"],["class","talents subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"talents","subHeading",3,"ngClass","click"],[1,"rightTextAlign"],[1,"centered"],[1,"modal-body","talentPreview"],["class","talentRow",4,"ngFor","ngForOf"],[1,"talentRow"],[1,"rowFlex"],["class","talentColumn",4,"ngFor","ngForOf"],[1,"talentColumn"],[3,"row","column","selectedAnimal","isPreview","previewType","spentTalent"],[1,"talentSpacer"],["class","defaultTalentSpacer",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"defaultTalentSpacer"],[1,"talentInfo"],[3,"row","column","selectedAnimal","spentTalent"],[1,"baseStats"]],template:function(e,i){if(1&e){const r=de();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),x(6,xG,7,3,"div",5),x(7,kG,2,0,"div",6),D(8,"br"),x(9,MG,2,0,"button",7),f(10,"button",8),A("click",function(){N(r);const o=at(213);return i.openEquipmentModal(o)}),g(11,"Equip New Item"),h()(),D(12,"br"),x(13,PG,5,1,"div",9),h(),f(14,"div",10)(15,"div",11),x(16,OG,6,4,"div",6),x(17,LG,6,4,"div",6),f(18,"span",12),g(19),h(),D(20,"br"),h(),f(21,"button",13),A("click",function(){return i.goToAssignedBarn()}),g(22),x(23,UG,2,1,"em",6),h(),D(24,"br"),f(25,"span",14),g(26),h(),D(27,"br"),f(28,"span",14),g(29),Ot(30,"number"),f(31,"button",15),A("click",function(){return i.breed()}),g(32,"Breed"),h()(),D(33,"br"),f(34,"button",8),A("click",function(){N(r);const o=at(211);return i.openItemModal(o)}),g(35,"Use Item"),h(),D(36,"br"),x(37,HG,1,3,"app-toggle",16),h(),f(38,"div",17)(39,"div")(40,"button",8),A("click",function(){return i.returnToAnimalView()}),g(41,"Back"),h()(),D(42,"br"),x(43,$G,7,3,"div",18),h()(),D(44,"hr"),f(45,"div",19)(46,"div",20)(47,"span",21),g(48,"Base Stats "),f(49,"span",22),A("click",function(){N(r);const o=at(219);return i.openBaseStatsModal(o)}),g(50,"?"),h()(),D(51,"br")(52,"br"),f(53,"span",14)(54,"span",12),g(55,"Speed:"),h(),g(56),Ot(57,"number"),h(),D(58,"br"),f(59,"span",14)(60,"span",12),g(61,"Acceleration:"),h(),g(62),Ot(63,"number"),h(),D(64,"br"),f(65,"span",14)(66,"span",12),g(67,"Endurance:"),h(),g(68),Ot(69,"number"),h(),D(70,"br"),f(71,"span",14)(72,"span",12),g(73,"Power:"),h(),g(74),Ot(75,"number"),h(),D(76,"br"),f(77,"span",14)(78,"span",12),g(79,"Focus:"),h(),g(80),Ot(81,"number"),h(),D(82,"br"),f(83,"span",14)(84,"span",12),g(85,"Adaptability:"),h(),g(86),Ot(87,"number"),h(),D(88,"br"),f(89,"span",14)(90,"span",12),g(91,"Diminishing Returns:"),h(),g(92),Ot(93,"number"),h()(),f(94,"div",23)(95,"span",21),g(96,"Racing Stats "),f(97,"span",22),A("click",function(){N(r);const o=at(221);return i.openRacingStatsModal(o)}),g(98,"?"),h()(),D(99,"br")(100,"br"),f(101,"span",14)(102,"span",12),g(103,"Max Speed:"),h(),g(104),Ot(105,"number"),h(),D(106,"br"),f(107,"span",14)(108,"span",12),g(109,"Acceleration Rate:"),h(),g(110),Ot(111,"number"),h(),D(112,"br"),f(113,"span",14)(114,"span",12),g(115,"Stamina:"),h(),g(116),Ot(117,"number"),h(),D(118,"br"),f(119,"span",14)(120,"span",12),g(121,"Power Efficiency:"),h(),g(122),Ot(123,"number"),h(),D(124,"br"),f(125,"span",14)(126,"span",12),g(127,"Focus Distance:"),h(),g(128),Ot(129,"number"),h(),D(130,"br"),f(131,"span",14)(132,"span",12),g(133,"Adaptability Distance:"),h(),g(134),Ot(135,"number"),h(),D(136,"br"),f(137,"span",14)(138,"span",12),g(139,"Burst Chance:"),h(),g(140),Ot(141,"number"),h(),D(142,"br"),f(143,"span",14)(144,"span",12),g(145,"Burst Distance:"),h(),g(146),Ot(147,"number"),h()(),f(148,"div",24)(149,"span",21),g(150,"Miscellaneous Stats "),f(151,"span",22),A("click",function(){N(r);const o=at(223);return i.openMiscStatsModal(o)}),g(152,"?"),h()(),D(153,"br")(154,"br"),x(155,WG,7,5,"div",6),x(156,qG,6,5,"div",6),x(157,XG,6,5,"div",6),x(158,YG,6,5,"div",6),x(159,QG,6,5,"div",6),x(160,KG,6,5,"div",6),h()(),f(161,"div",25)(162,"p")(163,"span",26),g(164,"Abilities"),h(),D(165,"br"),f(166,"span")(167,"em"),g(168,"Your animal will use the ability you select below."),h()()(),f(169,"div")(170,"div")(171,"button",27),A("click",function(){return i.selectAbility(i.ability1)}),g(172),h(),x(173,ZG,2,3,"button",28),x(174,JG,2,3,"button",29),h(),D(175,"br"),f(176,"p")(177,"span",14),g(178),f(179,"span",30),x(180,ez,2,2,"span",6),x(181,tz,2,0,"span",6),h()(),D(182,"br")(183,"span",31),h()()()()()(),x(184,iz,2,1,"ng-template",null,32,ht),x(186,nz,2,1,"ng-template",null,33,ht),x(188,rz,2,1,"ng-template",null,34,ht),x(190,az,2,1,"ng-template",null,35,ht),x(192,oz,2,1,"ng-template",null,36,ht),x(194,sz,2,1,"ng-template",null,37,ht),x(196,lz,2,1,"ng-template",null,38,ht),x(198,cz,2,1,"ng-template",null,39,ht),x(200,uz,2,1,"ng-template",null,40,ht),x(202,dz,2,1,"ng-template",null,41,ht),x(204,hz,2,1,"ng-template",null,42,ht),x(206,fz,2,1,"ng-template",null,43,ht),x(208,pz,2,1,"ng-template",null,44,ht),x(210,Cz,9,2,"ng-template",null,45,ht),x(212,kz,14,3,"ng-template",null,46,ht),x(214,Vz,14,3,"ng-template",null,47,ht),x(216,Yz,9,2,"ng-template",null,48,ht),x(218,Qz,42,7,"ng-template",null,49,ht),x(220,Kz,47,8,"ng-template",null,50,ht),x(222,Zz,37,6,"ng-template",null,51,ht)}if(2&e){const r=at(185),a=at(187),o=at(189),s=at(191),l=at(193),c=at(195),u=at(197);p(6),b("ngIf",null!=i.selectedAnimal.equippedItem),p(1),b("ngIf",null==i.selectedAnimal.equippedItem),p(2),b("ngIf",null!=i.selectedAnimal.equippedItem),p(4),b("ngIf",i.areTalentsAvailable),p(2),b("ngClass",i.colorConditional),p(1),b("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),b("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(2),et(i.selectedAnimal.getRaceCourseType()),p(3),K("",i.assignedBarnName," "),p(1),b("ngIf",null!=i.selectedAnimal.currentTraining),p(2),cr("ngbPopover",i.breedLevelPopover),p(1),K("Breed Level ",i.selectedAnimal.breedLevel,""),p(2),b("ngbPopover",i.breedDescriptionPopover),p(1),Wi("Breed XP: ",oi(30,65,i.selectedAnimal.breedGaugeXp,"1.2-2"),"/",i.selectedAnimal.breedGaugeMax," "),p(2),b("disabled",!i.canBreed),p(6),b("ngIf",i.canAutoBreed),p(6),b("ngIf",i.orbIsUnlocked&&i.orbFunctionalityReleased),p(10),b("ngbPopover",r),p(3),K(" ",oi(57,68,i.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),p(3),b("ngbPopover",a),p(3),K(" ",oi(63,71,i.selectedAnimal.currentStats.acceleration,"1.2-2")," "),p(3),b("ngbPopover",o),p(3),K(" ",oi(69,74,i.selectedAnimal.currentStats.endurance,"1.2-2")," "),p(3),b("ngbPopover",s),p(3),K(" ",oi(75,77,i.selectedAnimal.currentStats.power,"1.2-2")," "),p(3),b("ngbPopover",l),p(3),K(" ",oi(81,80,i.selectedAnimal.currentStats.focus,"1.2-2")," "),p(3),b("ngbPopover",c),p(3),K(" ",oi(87,83,i.selectedAnimal.currentStats.adaptability,"1.2-2")," "),p(3),cr("ngbPopover",i.getDiminishingReturnsPopover()),p(3),K(" ",oi(93,86,i.diminishingReturnsAmount,"1.0-0")," "),p(9),cr("ngbPopover",i.selectedAnimal.currentStats.maxSpeedMsPopover()),p(3),K(" ",oi(105,89,i.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),p(3),cr("ngbPopover",i.selectedAnimal.currentStats.accelerationMsPopover()),p(3),K(" ",oi(111,92,i.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s "),p(3),cr("ngbPopover",i.selectedAnimal.currentStats.staminaPopover()),p(3),K(" ",oi(117,95,i.selectedAnimal.currentStats.stamina,"1.2-2")," "),p(3),cr("ngbPopover",i.selectedAnimal.currentStats.powerMsPopover()),p(3),K(" ",oi(123,98,i.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),p(3),cr("ngbPopover",i.selectedAnimal.currentStats.focusMsPopover()),p(3),K(" ~",oi(129,101,i.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),p(3),cr("ngbPopover",i.selectedAnimal.currentStats.adaptabilityMsPopover()),p(3),K(" ~",oi(135,104,i.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),p(3),cr("ngbPopover",i.selectedAnimal.currentStats.burstChancePopover()),p(3),K(" ",oi(141,107,i.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),p(3),cr("ngbPopover",i.selectedAnimal.currentStats.burstDistancePopover()),p(3),K(" ",oi(147,110,i.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),p(9),b("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromTraining>0),p(1),b("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces>0),p(1),b("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces>0),p(1),b("ngIf",i.selectedAnimal.miscStats.trainingTimeReduction>0),p(1),b("ngIf",i.selectedAnimal.miscStats.diminishingReturnsBonus>0),p(1),b("ngIf",i.selectedAnimal.miscStats.bonusTalents>0),p(3),b("ngbPopover",i.getAbilityPopover()),p(8),Mt("filterActive",i.selectedAnimal.ability.name===i.ability1.name),p(1),K("",i.ability1.name," "),p(1),b("ngIf",i.ability2.isAbilityPurchased),p(1),b("ngIf",i.ability3.isAbilityPurchased),p(3),b("ngbPopover",u),p(1),K("Level ",i.selectedAbility.abilityLevel," "),p(2),b("ngIf",!i.abilityLevelMaxedOut),p(1),b("ngIf",i.abilityLevelMaxedOut),p(2),b("innerHTML",i.longDescription,zt)}},directives:[hi,Zr,rn,es,Ll,Ds,Rs,Kh,_G,Xh,Lh,gu,cn,RG],pipes:[no],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:back;justify-content:space-between;flex-direction:column;display:flex}.equippable[_ngcontent-%COMP%]{justify-content:space-between;flex-direction:column;display:flex;grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-items:center;justify-content:stretch;grid-template-areas:"trainingStats racingStats miscStats"}.trainableStats[_ngcontent-%COMP%]{justify-self:left;grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}.miscStats[_ngcontent-%COMP%]{grid-area:miscStats}.centered[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedEquipmentSpan[_ngcontent-%COMP%], .selectedOrbSpan[_ngcontent-%COMP%], .selectedItemSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightTextAlign[_ngcontent-%COMP%]{text-align:right}.rightAlign[_ngcontent-%COMP%]{float:right}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.typeContainer[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly}.talentTreeType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedTalentTree[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid;text-decoration:underline solid}.rowFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.abilityXp[_ngcontent-%COMP%]{margin-left:2.5rem}.talentColumn[_ngcontent-%COMP%]{width:31.75%}.talentContent[_ngcontent-%COMP%]{height:calc(100% - 5rem);height:-o-calc(100% - 5rem);border:1px solid rgba(0,0,0,.1)}.lastTalentContent[_ngcontent-%COMP%]{height:100%;border:1px solid rgba(0,0,0,.1)}.talentInfo[_ngcontent-%COMP%]{text-align:center}.talentSpacer[_ngcontent-%COMP%]{display:grid;grid-template:1fr / 1fr;place-items:center}.defaultTalentSpacer[_ngcontent-%COMP%]{height:5rem;border-right:solid thick rgba(0,0,0,.1);grid-column:1 / 1;grid-row:1 / 1;z-index:1}.completedFlatlandTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--flatlandColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedMountainTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--mountainColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedOceanTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--waterColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedTundraTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--tundraColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedVolcanicTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--volcanicColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.height0[_ngcontent-%COMP%]{height:0}.height1[_ngcontent-%COMP%]{height:1rem}.height2[_ngcontent-%COMP%]{height:2rem}.height3[_ngcontent-%COMP%]{height:3rem}.height4[_ngcontent-%COMP%]{height:4rem}.height5[_ngcontent-%COMP%]{height:5rem}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}.activeSelectedItem[_ngcontent-%COMP%], .activeSelectedEquipment[_ngcontent-%COMP%], .activeSelectedOrb[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.selectableItem[_ngcontent-%COMP%], .selectableOrb[_ngcontent-%COMP%], .selectableEquipment[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;margin-top:.25rem}.tooltipIcon[_ngcontent-%COMP%]{display:none}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}@media (max-width: 800px){.info[_ngcontent-%COMP%], .gridContainer[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr 1fr}.tooltipIcon[_ngcontent-%COMP%]{display:inline-block}}']}),t})();function ej(t,n){1&t&&(f(0,"div",4)(1,"h2"),g(2,"Animals"),h(),f(3,"div",5),g(4," Select an animal to view its stats, change abilities, and more. "),h(),D(5,"hr"),h())}function tj(t,n){if(1&t){const e=de();f(0,"div",6)(1,"app-animal-list",7),A("selectedAnimal",function(r){return N(e),y().selectedAnimal(r)}),h()()}if(2&t){const e=y();p(1),b("availableAnimals",e.availableAnimals)("isAnimalDetailView",!0)}}function ij(t,n){if(1&t){const e=de();f(0,"div",8)(1,"app-selected-animal",9),A("returnEmitter",function(r){return N(e),y().returnToAnimalView(r)}),h()()}if(2&t){const e=y();p(1),b("selectedAnimal",e.animal)}}let nj=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Tt.animals),this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type?(this.animalSelected=!0,this.animal=e):this.animalSelected=!1})}selectedAnimal(e){this.animalSelected=!0,this.animal=e,this.componentCommunicationService.setAnimalView(Tt.animals,this.animal)}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","isAnimalDetailView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,ej,6,0,"div",1),x(2,tj,2,2,"div",2),x(3,ij,2,1,"div",3),h()),2&e&&(p(1),b("ngIf",!i.animalSelected),p(1),b("ngIf",!i.animalSelected),p(1),b("ngIf",i.animalSelected))},directives:[hi,zf,Jz],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;overflow:hidden;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}.selectedView[_ngcontent-%COMP%]{height:100%;overflow:auto}"]}),t})();function rj(t,n){if(1&t){const e=de();f(0,"button",17),A("click",function(){N(e);const r=y().$implicit;return y().setAsAutoRunFreeRace(r)}),g(1,"Auto Run Free Race"),h()}}function aj(t,n){if(1&t){const e=de();f(0,"button",18),A("click",function(){N(e);const r=y().$implicit;return y().setAsEventDeck(r)}),g(1,"Set as Event Team"),h()}}function oj(t,n){if(1&t){const e=de();f(0,"div")(1,"div",7),D(2,"app-animal-deck",8),f(3,"div",9)(4,"button",10),A("click",function(){const a=N(e).$implicit,o=y(),s=at(11);return o.editDeck(s,a)}),g(5,"Edit"),h()(),f(6,"div",11)(7,"button",12),A("click",function(){const a=N(e).$implicit;return y().setAsPrimary(a)}),g(8,"Set as Primary Team"),h()(),f(9,"div",13),x(10,rj,2,0,"button",14),h(),f(11,"div",15),x(12,aj,2,0,"button",16),h()(),D(13,"hr"),h()}if(2&t){const e=n.index,i=y();p(2),b("deckNumber",e+1),p(8),b("ngIf",i.showAutoRaceButton),p(2),b("ngIf",i.showEventButton)}}function sj(t,n){if(1&t){const e=de();f(0,"div",35)(1,"input",36),A("input",function(){return N(e),y(2).toggleRaceOrder()}),h(),f(2,"label",37),A("click",function(){return N(e),y(2).toggleRaceOrder()}),g(3,"Race Order: "),h(),f(4,"span")(5,"span",38),A("dragstart",function(r){return N(e),y(2).dragStart(r)})("dragover",function(r){return N(e),y(2).allowDrop(r)})("drop",function(r){return N(e),y(2).dropCourseType(r)}),g(6),h(),g(7," / "),f(8,"span",39),A("dragstart",function(r){return N(e),y(2).dragStart(r)})("dragover",function(r){return N(e),y(2).allowDrop(r)})("drop",function(r){return N(e),y(2).dropCourseType(r)}),g(9),h(),g(10," / "),f(11,"span",40),A("dragstart",function(r){return N(e),y(2).dragStart(r)})("dragover",function(r){return N(e),y(2).allowDrop(r)})("drop",function(r){return N(e),y(2).dropCourseType(r)}),g(12),h(),g(13," / "),f(14,"span",41),A("dragstart",function(r){return N(e),y(2).dragStart(r)})("dragover",function(r){return N(e),y(2).allowDrop(r)})("drop",function(r){return N(e),y(2).dropCourseType(r)}),g(15),h(),g(16," / "),f(17,"span",42),A("dragstart",function(r){return N(e),y(2).dragStart(r)})("dragover",function(r){return N(e),y(2).allowDrop(r)})("drop",function(r){return N(e),y(2).dropCourseType(r)}),g(18),h()()()}if(2&t){const e=y(2);p(1),b("checked",e.isRaceOrderOn),p(4),b("ngClass",e.getColorClass(e.selectedDeckOrder[0])),p(1),et(e.selectedDeckOrder[0]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[1])),p(1),et(e.selectedDeckOrder[1]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[2])),p(1),et(e.selectedDeckOrder[2]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[3])),p(1),et(e.selectedDeckOrder[3]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[4])),p(1),et(e.selectedDeckOrder[4])}}const lj=function(t,n,e,i,r,a){return{selectedCourseType:t,flatlandColor:n,mountainColor:e,waterColor:i,tundraColor:r,volcanicColor:a}};function cj(t,n){if(1&t){const e=de();f(0,"button",43),A("click",function(){const a=N(e).$implicit;return y(2).filterType(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=y(2);b("ngClass",function $w(t,n,e,i,r,a,o,s,l){const c=vr()+t,u=Me(),d=ua(u,c,e,i,r,a);return bs(u,c+4,o,s)||d?Ja(u,c+6,l?n.call(l,e,i,r,a,o,s):n(e,i,r,a,o,s)):zc(u,c+6)}(2,lj,i.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),p(1),K(" ",e.trim()," ")}}const uj=function(t){return{selectedAnimal:t}};function dj(t,n){if(1&t){const e=de();f(0,"button",44),A("click",function(){const a=N(e).$implicit;return y(2).selectAnimal(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=y(2);b("ngClass",hn(2,uj,i.selectedAnimalName===e)),p(1),K(" ",e.trim()," ")}}function hj(t,n){if(1&t){const e=de();f(0,"div",19)(1,"form",20)(2,"div",21)(3,"h4",22),g(4),h(),f(5,"button",23),A("click",function(){return N(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",24)(8,"div",25)(9,"label",26),g(10,"Relay Team Name: "),h(),D(11,"input",27),h(),x(12,sj,19,11,"div",28),D(13,"br"),f(14,"div",29),x(15,cj,2,9,"button",30),h(),D(16,"br"),f(17,"div",31),x(18,dj,2,4,"button",32),h()(),f(19,"div",33)(20,"button",34),A("click",function(){return N(e),y().saveDeck()}),g(21,"Save"),h()()()()}if(2&t){const e=y();p(1),b("formGroup",e.editDeckForm),p(3),K("Edit ",e.selectedDeck.name,""),p(8),b("ngIf",e.displayRaceOrder),p(3),b("ngForOf",e.raceCourseTypeList),p(3),b("ngForOf",e.possibleAnimalsList)}}let fj=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.modalService=i,this.lookupService=r,this.componentCommunicationService=a,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new qh({deckName:new Dm("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.componentCommunicationService.setNewView(Tt.relayTeams),this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var i=this.lookupService.getResourceByName("Team Manager");null==i&&(i=0),this.showAutoRaceButton=i>0,this.showEventButton=!!this.lookupService.isItemUnlocked("grandPrix")}editDeck(e,i){this.selectedDeck=i,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=i.isCourseOrderActive,null!=i.courseTypeOrder&&i.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],i.courseTypeOrder.forEach(r=>{r===j.Flatland&&this.selectedDeckOrder.push("Flatland"),r===j.Mountain&&this.selectedDeckOrder.push("Mountain"),r===j.Ocean&&this.selectedDeckOrder.push("Ocean"),r===j.Tundra&&this.selectedDeckOrder.push("Tundra"),r===j.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),i.selectedAnimals.length>0&&i.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:i.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,i,r,a,o,s,l,c,u=this.globalService.globalVar.animalDecks.find(k=>k.deckNumber===this.selectedDeck.deckNumber);if(null!=u&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(i=this.editDeckForm.get("deckName"))||void 0===i?void 0:i.value.length)>=1&&(u.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),u.selectedAnimals=[],this.newAnimalList.forEach(k=>{null==u||u.selectedAnimals.push(k)}),null==u||u.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var d=[],v=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,m=null===(o=document.getElementById("raceOrder2"))||void 0===o?void 0:o.innerHTML,_=null===(s=document.getElementById("raceOrder3"))||void 0===s?void 0:s.innerHTML,w=null===(l=document.getElementById("raceOrder4"))||void 0===l?void 0:l.innerHTML,S=null===(c=document.getElementById("raceOrder5"))||void 0===c?void 0:c.innerHTML;d.push(v),d.push(m),d.push(_),d.push(w),d.push(S),null!=u&&(u.courseTypeOrder=[]),d.forEach(k=>{"Flatland"===k&&(null==u||u.courseTypeOrder.push(j.Flatland)),"Mountain"===k&&(null==u||u.courseTypeOrder.push(j.Mountain)),"Ocean"===k&&(null==u||u.courseTypeOrder.push(j.Ocean)),"Tundra"===k&&(null==u||u.courseTypeOrder.push(j.Tundra)),"Volcanic"===k&&(null==u||u.courseTypeOrder.push(j.Volcanic))})}this.modalService.dismissAll()}compare(e,i){return e.raceCourseType>i.raceCourseType?1:i.raceCourseType>e.raceCourseType?-1:0}filterType(e){var i=this.lookupService.getAnimalsByRaceCourseType(e),r=[];i.length>0&&i.forEach(o=>{var s=this.globalService.globalVar.animals.find(l=>l.getAnimalType()===o);(null==s?void 0:s.isAvailable)&&r.push(s.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(o=>o.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var i=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(null!=i){var r=-1,a=i.getRaceCourseType();this.newAnimalList.forEach(o=>{o.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(o))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===i.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(i),this.selectedAnimalName=i.getAnimalType())}}setAsPrimary(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}setAsEventDeck(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isEventDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isEventDeck=!1),r.isEventDeck=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){e.preventDefault(),e.stopPropagation();var i=e.dataTransfer.getData("text"),r=document.getElementById(i),a=e.target.innerHTML;if(null!==r&&null!==a){var l=this.selectedDeckOrder.indexOf(a),c=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[l]=r.innerHTML,this.selectedDeckOrder[c]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(ho),E(Di),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"event"],["class","eventButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"eventButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText buttonAsTextKeepColor",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"animalContainer"],["class","animalOption clickableText buttonAsText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText","buttonAsTextKeepColor",3,"ngClass","click"],[1,"animalOption","clickableText","buttonAsText",3,"ngClass","click"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Relay Teams"),h(),f(6,"div",4),g(7," Relay Teams are groups of animals that run together in a race. As you rise through the ranks, races will have multiple legs of varying terrain that require you to use different animals to succeed. Each Relay Team consists of one animal from each course type. Your primary Relay Team is the one that will run the races you select. "),h(),D(8,"hr"),h(),x(9,oj,14,3,"div",5),h()()(),x(10,hj,22,5,"ng-template",null,6,ht)),2&e&&(p(9),b("ngForOf",i.animalDecks))},directives:[cn,j0,hi,Xh,Lh,Yh,es,Ll,Ds,Am,rn],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view .";background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.view[_ngcontent-%COMP%]{grid-area:view;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.animalOption[_ngcontent-%COMP%]{display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:60% 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace ." "deck edit primary event"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.eventButton[_ngcontent-%COMP%], .editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%;margin-bottom:.5rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{grid-template-columns:50% 1fr 1fr 1fr}}']}),t})();function pj(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y(2);p(1),K("",e.selectedItem.numberPurchasing," ")}}function gj(t,n){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=y(2);p(1),K(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function vj(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y(2);p(1),K(" x ",e.buyMultiplierAmount,"")}}function mj(t,n){if(1&t){const e=de();f(0,"div",3)(1,"span",4),x(2,pj,2,1,"span",5),g(3),h(),x(4,gj,2,1,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),D(12,"br"),f(13,"button",8),A("click",function(){return N(e),y().BuyItem()}),g(14,"Buy "),x(15,vj,2,1,"span",5),h()()}if(2&t){const e=y();b("ngbPopover",at(3)),p(1),b("ngClass",e.colorConditional),p(1),b("ngIf",e.displayNumberPurchasing),p(1),K(" ",e.displayName,""),p(1),b("ngIf",e.selectedItem.totalShopQuantity>1),p(3),b("innerHTML",e.shortDescription,zt),p(4),K(" ",e.purchaseResourcesRequired," "),p(2),b("disabled",!e.canAffordItem),p(2),b("ngIf",e.buyMultiplierAmount>1)}}function bj(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y(2);p(1),K("",e.selectedItem.numberPurchasing," ")}}function _j(t,n){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=y(2);p(1),K(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function yj(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y(2);p(1),K(" x ",e.buyMultiplierAmount,"")}}function wj(t,n){if(1&t){const e=de();f(0,"div",9)(1,"span",4),x(2,bj,2,1,"span",5),g(3),h(),x(4,_j,2,1,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),D(12,"br"),f(13,"button",8),A("click",function(){return N(e),y().BuyItem()}),g(14,"Buy "),x(15,yj,2,1,"span",5),h()()}if(2&t){const e=y();p(1),b("ngClass",e.colorConditional),p(1),b("ngIf",e.displayNumberPurchasing),p(1),et(e.displayName),p(1),b("ngIf",e.selectedItem.totalShopQuantity>1),p(3),b("innerHTML",e.shortDescription,zt),p(4),K(" ",e.purchaseResourcesRequired," "),p(2),b("disabled",!e.canAffordItem),p(2),b("ngIf",e.buyMultiplierAmount>1)}}function Cj(t,n){if(1&t&&(f(0,"div",10),D(1,"span",6),h()),2&t){const e=y();p(1),b("innerHTML",e.longDescription,zt)}}let Sj=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.gameLoopService=r,this.itemPurchased=new ut,this.canAffordItem=!0,this.displayNumberPurchasing=!1,this.displayName="",this.buyMultiplierAmount=1}keyEventDown(e){(this.selectedItem.type===U.Consumable||this.selectedItem.type===U.Food||this.selectedItem.type===U.Equipment||this.selectedItem.type===U.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&(e.preventDefault(),this.shiftPressed||(this.buyMultiplierAmount*=25,this.shiftPressed=!0)),"Control"===e.key&&(e.preventDefault(),this.ctrlPressed||(this.buyMultiplierAmount*=10,this.ctrlPressed=!0)),"Alt"===e.key&&(e.preventDefault(),this.altPressed||(this.buyMultiplierAmount*=100,this.altPressed=!0)))}keyEventUp(e){e.preventDefault(),(this.selectedItem.type===U.Consumable||this.selectedItem.type===U.Food||this.selectedItem.type===U.Equipment||this.selectedItem.type===U.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&this.shiftPressed&&(this.buyMultiplierAmount/=25,this.shiftPressed=!1),"Control"===e.key&&this.ctrlPressed&&(this.buyMultiplierAmount/=10,this.ctrlPressed=!1),"Alt"===e.key&&this.altPressed&&(this.buyMultiplierAmount/=100,this.altPressed=!1))}ngOnInit(){var e=this;if(this.buyMultiplierAmount=1,this.selectedItem.type===U.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===U.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):this.selectedItem.type===U.Animal?this.shortDescription=this.globalService.getAnimalDescription(this.selectedItem.name):this.selectedItem.type===U.Food?this.shortDescription=this.globalService.getItemDescription(this.selectedItem.name):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.displayName=this.selectedItem.name,this.selectedItem.type===U.Animal&&void 0!==(i=this.globalService.globalVar.animals.find(a=>a.name===this.selectedItem.name))&&(this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()}),this.selectedItem.type===U.Ability){var i,r=this.selectedItem.name.split(" ")[0].trim();""!==r&&void 0!==(i=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===r))&&(this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()})}this.selectedItem.type===U.Food&&1===this.selectedItem.numberPurchasing&&("Apples"===this.displayName&&(this.displayName="Apple"),"Oranges"===this.displayName&&(this.displayName="Orange"),"Bananas"===this.displayName&&(this.displayName="Banana"),"Strawberries"===this.displayName&&(this.displayName="Strawberry"),"Carrots"===this.displayName&&(this.displayName="Carrot"),"Turnips"===this.displayName&&(this.displayName="Turnip"),"Mangoes"===this.displayName&&(this.displayName="Mango"),"Gingko Leaves"===this.displayName&&(this.displayName="Gingko Leaf")),(this.selectedItem.type===U.Food||this.selectedItem.type===U.Resources)&&(this.displayNumberPurchasing=!0),this.amountSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Vr(function*(){e.selectedItem.purchasePrice.forEach(a=>{var o=a.name;1===a.amount&&("Tokens"===o&&(o="Token"),"Medals"===o&&(o="Medal")),e.purchaseResourcesRequired=a.amount.toLocaleString()+" "+o+", ";var s=e.lookupService.getResourceByName(a.name);e.canAffordItem=!(s<a.amount*e.buyMultiplierAmount)}),e.purchaseResourcesRequired.length>0&&(e.purchaseResourcesRequired=e.purchaseResourcesRequired.substring(0,e.purchaseResourcesRequired.length-2))}))}BuyItem(){this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===U.Animal&&this.buyAnimal(),this.selectedItem.type===U.Food?this.buyFood():this.selectedItem.type===U.Training&&this.buyTraining(),this.selectedItem.type===U.Specialty?this.buySpecialty():this.selectedItem.type===U.Ability&&this.buyAbility(),this.selectedItem.type===U.Equipment&&this.buyEquipment(),this.selectedItem.type===U.Consumable&&this.buyConsumable(),this.selectedItem.type===U.Resources&&this.buyResources(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){var e=!0;return this.selectedItem.purchasePrice.forEach(i=>{this.lookupService.getResourceByName(i.name)<i.amount*this.buyMultiplierAmount&&(e=!1)}),e}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount*this.buyMultiplierAmount)})}buyAnimal(){this.globalService.sortAnimalOrder();var e=this.globalService.globalVar.animals.find(s=>s.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var i=this.globalService.globalVar.shop.find(s=>"Abilities"===s.name);if(null!=i){var r=i.itemList.filter(s=>s.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(s=>{s.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);if(null!=a){var o=!1;a.selectedAnimals.forEach(s=>{s.raceCourseType===(null==e?void 0:e.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(i=>i.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,e,U.Food));"Mangoes"===this.selectedItem.name&&this.selectedItem.purchasePrice.forEach(r=>{"Coins"===r.name&&(r.amount+=50),"Tokens"===r.name&&(r.amount+=1)})}buySpecialty(){var e,a;if(this.selectedItem.amountPurchased+=1,"Whistle"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))){var i=e.itemList.find(c=>"Golden Whistle"===c.name);null!=i&&(i.isAvailable=!0)}if("National Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0,null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name)))){var r=e.itemList.find(u=>"International Races"===u.name);null!=r&&(r.isAvailable=!0)}"Incubator Upgrade Lv1"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv2"===u.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv2"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(d=>"Incubator Upgrade Lv3"===d.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv3"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(d=>"Incubator Upgrade Lv4"===d.name))&&(a.isAvailable=!0);var o=this.lookupService.getResourceByName("Team Manager");if("Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased&&(null==o||0===o)&&!this.globalService.globalVar.animalDecks.some(c=>c.autoRunFreeRace)){var s=this.globalService.globalVar.animalDecks.find(c=>c.isPrimaryDeck);null!=s&&(s.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources&&(this.globalService.globalVar.resources.some(c=>c.name===this.selectedItem.name)?null!=(l=this.globalService.globalVar.resources.find(c=>c.name===this.selectedItem.name))&&(l.amount+=1):this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,1,U.Specialty))),"Talent Point Voucher"===this.selectedItem.name)if(this.globalService.globalVar.resources.some(c=>"Talent Points"===c.name)){var l;null!=(l=this.globalService.globalVar.resources.find(u=>"Talent Points"===u.name))&&(l.amount+=1)}else this.globalService.globalVar.resources.push(new ie("Talent Points",1,U.Resources));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(c=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?c.amount+=this.selectedItem.quantityAdditive:c.amount*=this.selectedItem.quantityMultiplier,"Team Manager"===this.selectedItem.name&&c.amount>5e3&&(c.amount=5e3)})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),i=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==i){var r=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(o=>o.name===i);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,e,U.Equipment))}buyConsumable(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,e,U.Consumable))}buyResources(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,e,U.Resources))}ngOnDestroy(){null!=this.amountSubscription&&this.amountSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Di),E(Bn))},t.\u0275cmp=bt({type:t,selectors:[["app-shopping-item"]],hostBindings:function(e,i){1&e&&A("keydown",function(a){return i.keyEventDown(a)},!1,Co)("keyup",function(a){return i.keyEventUp(a)},!1,Co)},inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:4,vars:2,consts:[["class","item","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","item",4,"ngIf"],["longDescriptionContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[1,"keyword",3,"ngClass"],[4,"ngIf"],[3,"innerHTML"],[1,"resourceKeyword"],[3,"disabled","click"],[1,"item"],[1,"popoverClass"]],template:function(e,i){1&e&&(x(0,mj,16,9,"div",0),x(1,wj,16,8,"div",1),x(2,Cj,2,1,"ng-template",null,2,ht)),2&e&&(b("ngIf",""!==i.longDescription&&null!=i.longDescription),p(1),b("ngIf",""===i.longDescription||null==i.longDescription))},directives:[hi,Zr,rn],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();function Tj(t,n){if(1&t){const e=de();f(0,"td",8)(1,"div")(2,"app-shopping-item",9),A("itemPurchased",function(r){return N(e),y(3).itemPurchased(r)}),h()()()}if(2&t){const e=n.$implicit;p(2),b("selectedItem",e)}}function Dj(t,n){if(1&t&&(f(0,"tr"),x(1,Tj,3,1,"td",7),h()),2&t){const e=n.$implicit;p(1),b("ngForOf",e)}}function Rj(t,n){if(1&t&&(f(0,"table"),x(1,Dj,2,1,"tr",6),h()),2&t){const e=y();p(1),b("ngForOf",e.itemsRows)}}function xj(t,n){1&t&&(f(0,"div",10),D(1,"br"),f(2,"span"),g(3,"Fresh out! Check back again in the future to see if more items are added!"),h(),D(4,"br"),h())}const kj=function(t){return{tokenShopColor:t}};let b2=(()=>{class t{constructor(e){this.globalService=e,this.shopsEnum=_a,this.itemPurchasedEmitter=new ut}ngOnInit(){null==this.shopType&&(this.shopType=_a.regular),this.shopType===_a.regular&&(this.resetShopSubscription=this.resetShop.subscribe(()=>this.setupDisplayItems())),this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var i=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&i.push(a)});for(var r=1;r<=i.length;r++)this.itemsCells.push(i[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems(),this.itemPurchasedEmitter.emit(!0)}ngOnDestroy(){void 0!==this.resetShopSubscription&&this.resetShopSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(It))},t.\u0275cmp=bt({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,i){1&e&&A("resize",function(a){return i.onResize(a)},!1,Co)},inputs:{section:"section",shopType:"shopType",resetShop:"resetShop"},outputs:{itemPurchasedEmitter:"itemPurchasedEmitter"},decls:8,vars:6,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor",3,"ngClass"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngIf"],["class","centered","c","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"],["c","",1,"centered"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"span",2),g(3),h()(),f(4,"div",3),x(5,Rj,2,1,"table",4),x(6,xj,5,0,"div",5),D(7,"br"),h()()),2&e&&(p(1),b("ngClass",hn(4,kj,i.shopType===i.shopsEnum.token)),p(2),et(i.section.name),p(2),b("ngIf",i.itemsRows.length>0),p(1),b("ngIf",0===i.itemsRows.length))},directives:[rn,hi,cn,Sj],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.tokenShopColor[_ngcontent-%COMP%]{background-color:var(--tokenShopColor)!important}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.centered[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function Mj(t,n){if(1&t&&(f(0,"div",8),D(1,"app-shopping-list",9),h()),2&t){const e=n.$implicit,i=y();p(1),b("section",e)("shopType",i.shopType)}}function Aj(t,n){if(1&t&&(f(0,"div",10),D(1,"hr"),f(2,"em"),g(3),f(4,"span",11),g(5,"Renown"),h()()()),2&t){const e=y();p(3),K("Next tier unlocked at ",e.lookupService.getRenownRequiredForEventShopTier(e.highestTierUnlocked+1)," ")}}let Pj=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.gameLoopService=r,this.componentCommunicationService=a,this.highestTierUnlocked=0,this.maxTiers=3,this.shopType=_a.token,this.currentTokens=0}ngOnInit(){var e=this;this.highestTierUnlocked=this.lookupService.getHighestEventShopTierUnlocked(),this.getShopOptions(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(Vr(function*(){e.currentTokens=e.lookupService.getTokens()}))}getShopOptions(){this.sections=[];var e=this.globalService.globalVar.tokenShop.find(a=>"Tier 1"===a.name);void 0!==e&&this.highestTierUnlocked>=1&&this.sections.push(e);var i=this.globalService.globalVar.tokenShop.find(a=>"Tier 2"===a.name);void 0!==i&&this.highestTierUnlocked>=2&&this.sections.push(i);var r=this.globalService.globalVar.tokenShop.find(a=>"Tier 3"===a.name);void 0!==r&&this.highestTierUnlocked>=3&&this.sections.push(r)}returnToEventRaceView(){this.componentCommunicationService.setShopType(_a.regular),this.componentCommunicationService.setRaceView(Tt.raceselection,Ie.event)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Di),E(Bn),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-token-shop-view"]],decls:15,vars:3,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"back"],[3,"click"],["class","shopSection",4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],[1,"shopSection"],[3,"section","shopType"],[1,"centered"],[1,"progressionKeyword"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Token Shop"),h(),f(6,"span"),g(7),h()(),f(8,"div",4)(9,"button",5),A("click",function(){return i.returnToEventRaceView()}),g(10,"Back To Event"),h()()()(),D(11,"br"),x(12,Mj,2,2,"div",6),D(13,"br"),x(14,Aj,6,1,"div",7),h()),2&e&&(p(7),K("Tokens: ",i.currentTokens,""),p(5),b("ngForOf",i.sections),p(2),b("ngIf",i.highestTierUnlocked<i.maxTiers))},directives:[cn,b2,hi],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}']}),t})();function Ej(t,n){if(1&t){const e=de();f(0,"div",16)(1,"app-shopping-list",17),A("itemPurchasedEmitter",function(r){return N(e),y(2).itemPurchased(r)}),h()()}if(2&t){const e=n.$implicit,i=y(2);p(1),b("section",e)("resetShop",i.resetShopSubject.asObservable())}}function Ij(t,n){if(1&t){const e=de();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),g(5,"Shop"),h()()(),f(6,"div",6)(7,"span",7),g(8,"Filters:"),h(),f(9,"button",8),A("click",function(){return N(e),y().toggleShopFilter("Animals")}),g(10,"Animals"),h(),f(11,"button",9),A("click",function(){return N(e),y().toggleShopFilter("Trainings")}),g(12," Trainings"),h(),f(13,"button",10),A("click",function(){return N(e),y().toggleShopFilter("Equipment")}),g(14,"Equipment "),h(),f(15,"button",11),A("click",function(){return N(e),y().toggleShopFilter("Food")}),g(16,"Food"),h(),f(17,"button",12),A("click",function(){return N(e),y().toggleShopFilter("Specialty")}),g(18," Specialty"),h(),f(19,"button",13),A("click",function(){return N(e),y().toggleShopFilter("Abilities")}),g(20," Abilities"),h()(),f(21,"button",14),A("click",function(){return N(e),y().ResetShopFilters()}),g(22," Reset Filters "),h(),D(23,"br")(24,"br"),f(25,"em"),g(26,"Certain items can be bought in bulk. Use the Alt, Shift, and Ctrl keys to modify the amount you are buying."),h()(),D(27,"br"),x(28,Ej,2,2,"div",15),h()}if(2&t){const e=y();p(9),Mt("filterActive",e.filterAnimals),p(2),Mt("filterActive",e.filterTrainings),p(2),Mt("filterActive",e.filterEquipment),p(2),Mt("filterActive",e.filterFood),p(2),Mt("filterActive",e.filterSpecialty),p(2),Mt("filterActive",e.filterAbilities),p(9),b("ngForOf",e.sections)}}function Vj(t,n){1&t&&(f(0,"div"),D(1,"app-token-shop-view"),h())}let Oj=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1,this.ShopsEnum=_a,this.resetShopSubject=new ye}ngOnInit(){this.componentCommunicationService.setNewView(Tt.shop),this.getShopOptions(),this.subscription=this.componentCommunicationService.getShopView().subscribe(e=>{this.activeShopView=e})}getShopOptions(){this.sections=[];var e=this.filtersActive(),i=this.globalService.globalVar.shop.find(c=>"Animals"===c.name&&(!e||e&&this.filterAnimals));void 0!==i&&this.sections.push(i);var r=this.globalService.globalVar.shop.find(c=>"Trainings"===c.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(c=>"Equipment"===c.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var o=this.globalService.globalVar.shop.find(c=>"Food"===c.name&&(!e||e&&this.filterFood));void 0!==o&&this.sections.push(o);var s=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name&&(!e||e&&this.filterSpecialty));void 0!==s&&this.sections.push(s);var l=this.globalService.globalVar.shop.find(c=>"Abilities"===c.name&&(!e||e&&this.filterAbilities));void 0!==l&&this.sections.push(l)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}itemPurchased(e){this.getShopOptions(),this.resetShopSubject.next()}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-shop-view"]],decls:2,vars:2,consts:[["class","shopView",4,"ngIf"],[4,"ngIf"],[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText","buttonAsText",3,"click"],["id","trainingsFilter",1,"clickableText","buttonAsText",3,"click"],["id","equipmentFilter",1,"clickableText","buttonAsText",3,"click"],["id","foodFilter",1,"clickableText","buttonAsText",3,"click"],["id","specialtyFilter",1,"clickableText","buttonAsText",3,"click"],["id","abilitiesFilter",1,"clickableText","buttonAsText",3,"click"],[1,"centered","clickableText","buttonAsText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section","resetShop","itemPurchasedEmitter"]],template:function(e,i){1&e&&(x(0,Ij,29,13,"div",0),x(1,Vj,2,0,"div",1)),2&e&&(b("ngIf",i.activeShopView===i.ShopsEnum.regular),p(1),b("ngIf",i.activeShopView===i.ShopsEnum.token))},directives:[hi,cn,b2,Pj],styles:[".shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4%}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}"]}),t})(),Nj=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel(),this.maxNegativePercent=25;var e=this.globalService.globalVar.modifiers.find(i=>"maximumTraitNegativePercentModifier"===i.text);void 0!==e&&(this.maxNegativePercent=e.value)}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Di))},t.\u0275cmp=bt({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName","keyword"],[1,"traitStats"]],template:function(e,i){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h()()),2&e&&(p(2),et(i.trait.traitName),p(2),et(i.trait.getStatGainDescription(i.maxNegativePercent)))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const Fj=function(t){return{activeTrait:t}};function Bj(t,n){if(1&t){const e=de();f(0,"td",4)(1,"div",5),A("click",function(){const a=N(e).$implicit;return y(2).selectTrait(a)}),D(2,"app-trait-option",6),h()()}if(2&t){const e=n.$implicit;p(1),b("ngClass",hn(2,Fj,e.isSelected)),p(1),b("trait",e)}}function Lj(t,n){if(1&t&&(f(0,"tr"),x(1,Bj,3,4,"td",3),h()),2&t){const e=n.$implicit;p(1),b("ngForOf",e)}}let Uj=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new ut}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTraits.length;i++)this.traitsCells.push(this.availableTraits[i-1]),i%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(E(It))},t.\u0275cmp=bt({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,i){1&e&&A("resize",function(a){return i.onResize(a)},!1,Co)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[Gn],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,Lj,2,1,"tr",2),h()()()),2&e&&(p(3),b("ngForOf",i.traitsRows))},directives:[cn,rn,Nj],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function Hj(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y(2);p(1),et(e.selectedAnimal.name)}}function Gj(t,n){if(1&t){const e=de();f(0,"div",21),A("click",function(){return N(e),y().goToAnimal()}),x(1,Hj,2,1,"span",7),D(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=y();b("ngClass",e.colorConditional),p(1),b("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),et(e.selectedAnimal.getAnimalType())}}function zj(t,n){if(1&t){const e=de();f(0,"div",21),A("click",function(){return N(e),y().goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=y();b("ngClass",e.colorConditional),p(2),et(e.selectedAnimal.getAnimalType())}}function jj(t,n){if(1&t&&(f(0,"span",22),g(1,"Current Trait: "),f(2,"span",23),g(3),h()()),2&t){const e=y();cr("ngbPopover",e.traitStatGainDescription),p(3),et(e.selectedAnimal.getTraitName())}}function $j(t,n){if(1&t&&(f(0,"span",24),g(1),h()),2&t){const e=y();p(1),K("",e.existingTrait.traitName," ")}}function Wj(t,n){1&t&&(f(0,"span"),g(1,"No Trait Assigned"),h())}function qj(t,n){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"p",25),D(3,"ngb-progressbar",26),f(4,"span",27),g(5),Ot(6,"number"),h()(),D(7,"br"),h()),2&t){const e=y();p(3),b("value",e.trainingProgressBarPercent),p(2),K("",oi(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let Xj=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a,this.returnEmitter=new ut,this.traitStatGainDescription="",this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var i=this.availableTraits.find(r=>{var a;return(null===(a=this.existingTrait)||void 0===a?void 0:a.traitName)===r.traitName});null!=i&&(i.isSelected=!0)}this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.incubator;if(null==a.assignedAnimal||null==a.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(o=>{o.isSelected=!1});this.trainingProgressBarPercent=a.timeTrained/a.timeToComplete*100})}selectNewTrait(e){var i=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=i,this.existingTrait=i,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],i=this.lookupService.getResearchLevel();return e.push(new Si("Alert",1,i,we.focus,we.endurance)),e.push(new Si("Sharp",1,i,we.adaptability,we.power)),e.push(new Si("Bulky",1,i,we.power,we.topSpeed)),e.push(new Si("Curious",3,i,we.acceleration,we.focus)),e.push(new Si("Adamant",3,i,we.topSpeed,we.acceleration)),e.push(new Si("Stoic",5,i,we.endurance,we.adaptability)),e.push(new Si("Smart",5,i,we.focus,we.power)),e.push(new Si("Careful",7,i,we.adaptability,we.acceleration)),e.push(new Si("Attentive",7,i,we.power,we.endurance)),e.push(new Si("Keen",9,i,we.acceleration,we.topSpeed)),e.push(new Si("Quick",9,i,we.topSpeed,we.adaptability)),e.push(new Si("Tough",11,i,we.endurance,we.focus)),e.push(new Si("Solitary",11,i,we.focus,we.acceleration)),e.push(new Si("Cautious",13,i,we.adaptability,we.topSpeed)),e.push(new Si("Wild",13,i,we.power,we.focus)),e.push(new Si("Clumsy",15,i,we.acceleration,we.adaptability)),e.push(new Si("Natural",15,i,we.topSpeed,we.endurance)),e.push(new Si("Resilient",17,i,we.endurance,we.power)),e.push(new Si("Anxious",17,i,we.focus,we.topSpeed)),e.push(new Si("Lucky",19,i,we.adaptability,we.focus)),e.push(new Si("Rugged",19,i,we.power,we.adaptability)),e.push(new Si("Naive",21,i,we.acceleration,we.endurance)),e.push(new Si("Sprightly",21,i,we.topSpeed,we.power)),e.push(new Si("Stout",23,i,we.endurance,we.acceleration)),e.push(new Si("Pensive",23,i,we.focus,we.adaptability)),e.push(new Si("Languid",25,i,we.adaptability,we.endurance)),e.push(new Si("Mighty",25,i,we.power,we.acceleration)),e.push(new Si("Nimble",27,i,we.acceleration,we.power)),e.push(new Si("Small",27,i,we.topSpeed,we.focus)),e.push(new Si("Resolute",29,i,we.endurance,we.topSpeed)),(e=e.filter(r=>i>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===we.topSpeed||this.filterAcceleration&&r.positiveStatGain===we.acceleration||this.filterEndurance&&r.positiveStatGain===we.endurance||this.filterPower&&r.positiveStatGain===we.power||this.filterFocus&&r.positiveStatGain===we.focus||this.filterAdaptability&&r.positiveStatGain===we.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}goToAnimal(){this.componentCommunicationService.setAnimalView(Tt.animals,this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Bn),E(Di),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-incubator-traits"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:39,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","activeTrait",4,"ngIf"],[4,"ngIf"],[1,"back"],[3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTraits","selectedTrait"],[1,"clickableText","keyword",3,"ngClass","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],[1,"keyword"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(4,Gj,5,3,"div",4),x(5,zj,3,2,"div",4),x(6,jj,4,2,"span",5),D(7,"hr"),x(8,$j,2,1,"span",6),x(9,Wj,2,0,"span",7),h(),f(10,"div",8)(11,"button",9),A("click",function(){return i.returnToAnimalView()}),g(12,"Back"),h()()(),D(13,"hr"),x(14,qj,8,5,"div",7),D(15,"br")(16,"br"),f(17,"div",10)(18,"div",11)(19,"span",9),A("click",function(){return i.resetFilters()}),g(20,"Reset Filters"),h()(),f(21,"div",12)(22,"span"),g(23,"Choose New Trait"),h()(),f(24,"div",13)(25,"button",14),A("click",function(){return i.toggleStatFilter("Speed")}),g(26,"SPD "),h(),f(27,"button",15),A("click",function(){return i.toggleStatFilter("Acceleration")}),g(28,"ACC "),h(),f(29,"button",16),A("click",function(){return i.toggleStatFilter("Endurance")}),g(30,"END "),h(),f(31,"button",17),A("click",function(){return i.toggleStatFilter("Power")}),g(32,"PWR "),h(),f(33,"button",18),A("click",function(){return i.toggleStatFilter("Focus")}),g(34,"FCS "),h(),f(35,"button",19),A("click",function(){return i.toggleStatFilter("Adaptability")}),g(36,"ADP"),h()()(),D(37,"br"),f(38,"app-trait-list",20),A("selectedTrait",function(a){return i.selectNewTrait(a)}),h()()()),2&e&&(p(4),b("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),b("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(1),b("ngIf",null!=i.selectedAnimal.trait),p(2),b("ngIf",null!=i.existingTrait),p(1),b("ngIf",null==i.existingTrait),p(5),b("ngIf",null!=i.existingTrait),p(11),Mt("filterActive",i.filterSpeed),p(2),Mt("filterActive",i.filterAcceleration),p(2),Mt("filterActive",i.filterEndurance),p(2),Mt("filterActive",i.filterPower),p(2),Mt("filterActive",i.filterFocus),p(2),Mt("filterActive",i.filterAdaptability),p(3),b("availableTraits",i.availableTraits))},directives:[hi,rn,Zr,Gf,Uj],pipes:[no],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}']}),t})();function Yj(t,n){1&t&&(f(0,"div",3)(1,"h2"),g(2,"Incubator"),h(),f(3,"div",4),g(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),h(),D(5,"hr"),h())}function Qj(t,n){if(1&t){const e=de();f(0,"div",7)(1,"div")(2,"app-animal-list",8),A("selectedAnimal",function(r){return N(e),y(2).selectedAnimal(r)}),h()()()}if(2&t){const e=y(2);p(2),b("availableAnimals",e.availableAnimals)("isIncubatorDetailView",!0)}}function Kj(t,n){if(1&t){const e=de();f(0,"div",9)(1,"app-incubator-traits",10),A("returnEmitter",function(r){return N(e),y(2).returnToAnimalView(r)}),h()()}if(2&t){const e=y(2);p(1),b("selectedAnimal",e.animal)}}function Zj(t,n){if(1&t&&(f(0,"div"),x(1,Qj,3,2,"div",5),x(2,Kj,2,1,"div",6),h()),2&t){const e=y();p(1),b("ngIf",!e.animalSelected),p(1),b("ngIf",e.animalSelected)}}function Jj(t,n){1&t&&(f(0,"div"),g(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),h())}let e$=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Tt.incubator),this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Di),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","isIncubatorDetailView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,Yj,6,0,"div",1),x(2,Zj,3,2,"div",2),x(3,Jj,2,0,"div",2),h()),2&e&&(p(1),b("ngIf",!i.animalSelected),p(1),b("ngIf",i.researchLevel>0),p(1),b("ngIf",0===i.researchLevel))},directives:[hi,zf,Xj],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})();var Wu=(()=>{return(t=Wu||(Wu={}))[t.basics=0]="basics",t[t.progression=1]="progression",t[t.calculators=2]="calculators",Wu;var t})();function t$(t,n){if(1&t){const e=de();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerBreedGuide")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"What does Breeding do? How do I gain Breed XP?"),h()()(),f(9,"div",10),D(10,"div",7),f(11,"p"),g(12," Breeding is one of the best way to increase your animals' racing capabilities. It is a reset mechanic, meaning all of the base stats your animal has gained will be reset back to their default levels, and in return gain a permanent multiplier to your racing stats. Note that the stats your animal has prior to breeding have no impact on Breeding. "),D(13,"br")(14,"br"),g(15," Every time you Breed, you gain a 5% increase to the amount your base stats contribute to your racing stats. If you hover over your base stats (or tap if you are on mobile) when selecting an animal on the Animal page, you will see a breakdown of all multipliers you have obtained. With the Stockbreeder, you can set your animal to breed automatically without input so you can quickly raise your Breed Level in quick succession without having to spend time training in between each level. "),D(16,"br")(17,"br"),g(18," There are a few ways to increase Breed XP: "),D(19,"br"),f(20,"em"),g(21,"Completing any training:"),h(),g(22),D(23,"br"),f(24,"em"),g(25,"Successfully completing a free race:"),h(),g(26),D(27,"br"),f(28,"em"),g(29,"Successfully completing a circuit race:"),h(),g(30),D(31,"br")(32,"br"),g(33," As you progress, you'll find ways to increase the amount of XP gained. "),h()()(),D(34,"hr"),f(35,"div")(36,"div")(37,"div",7)(38,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerBreedBarnRows")}),g(39,"+"),h()(),f(40,"div",9)(41,"p"),g(42,"I've got too many animals -- how do I unlock more barns?"),h()()(),f(43,"div",11),D(44,"div",7),f(45,"p"),g(46," Raise your circuit rank! As you progress, you'll unlock more rows of 3 barns. "),h()()(),D(47,"hr"),f(48,"div")(49,"div")(50,"div",7)(51,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerAllAnimals")}),g(52,"+"),h()(),f(53,"div",9)(54,"p"),g(55,"What are all of the animals and course types?"),h()()(),f(56,"div",12),D(57,"div",7),f(58,"div")(59,"span",13),g(60,"Flatland"),h(),D(61,"br"),f(62,"span",14),g(63,"Horse"),h(),g(64),D(65,"br"),f(66,"span",14),g(67,"Cheetah"),h(),g(68),D(69,"br"),f(70,"span",14),g(71,"Hare"),h(),g(72),D(73,"br"),f(74,"span",14),g(75,"Warthog"),h(),g(76),D(77,"br")(78,"br"),f(79,"span",15),g(80,"Mountain"),h(),D(81,"br"),f(82,"span",14),g(83,"Monkey"),h(),g(84),D(85,"br"),f(86,"span",14),g(87,"Goat"),h(),g(88),D(89,"br"),f(90,"span",14),g(91,"Gecko"),h(),g(92),D(93,"br")(94,"br"),f(95,"div")(96,"span",16),A("click",function(){return N(e),y().viewSpoiler("Ocean Course Type")}),f(97,"span",17),g(98,"View Spoiler"),h(),f(99,"span",18),g(100,"Ocean"),h()(),D(101,"br"),f(102,"span",16),A("click",function(){return N(e),y().viewSpoiler("Ocean Course Type")}),f(103,"span",17),g(104,"View Spoiler"),h(),f(105,"span",14),g(106,"Dolphin"),h(),g(107),h(),D(108,"br"),f(109,"span",16),A("click",function(){return N(e),y().viewSpoiler("Ocean Course Type")}),f(110,"span",17),g(111,"View Spoiler"),h(),f(112,"span",14),g(113,"Shark"),h(),g(114),h(),D(115,"br"),f(116,"span",16),A("click",function(){return N(e),y().viewSpoiler("Ocean Course Type")}),f(117,"span",17),g(118,"View Spoiler"),h(),f(119,"span",14),g(120,"Octopus"),h(),g(121),h(),D(122,"br"),f(123,"span",16),A("click",function(){return N(e),y().viewSpoiler("Ocean Course Type")}),f(124,"span",17),g(125,"View Spoiler"),h(),f(126,"span",14),g(127,"Whale"),h(),g(128),h(),D(129,"br")(130,"br"),h(),f(131,"div")(132,"span",16),A("click",function(){return N(e),y().viewSpoiler("Tundra Course Type")}),f(133,"span",17),g(134,"View Spoiler"),h(),f(135,"span",18),g(136,"Tundra"),h()(),D(137,"br"),f(138,"span",16),A("click",function(){return N(e),y().viewSpoiler("Tundra Course Type")}),f(139,"span",17),g(140,"View Spoiler"),h(),D(141,"em",19),h(),D(142,"br"),f(143,"span",16),A("click",function(){return N(e),y().viewSpoiler("Tundra Course Type")}),f(144,"span",17),g(145,"View Spoiler"),h(),f(146,"span",14),g(147,"Penguin"),h(),g(148),h(),D(149,"br"),f(150,"span",16),A("click",function(){return N(e),y().viewSpoiler("Tundra Course Type")}),f(151,"span",17),g(152,"View Spoiler"),h(),f(153,"span",14),g(154,"Caribou"),h(),g(155),h(),D(156,"br")(157,"br"),h(),f(158,"div")(159,"span",16),A("click",function(){return N(e),y().viewSpoiler("Volcanic Course Type")}),f(160,"span",17),g(161,"View Spoiler"),h(),f(162,"span",18),g(163,"Volcanic"),h()(),D(164,"br"),f(165,"span",16),A("click",function(){return N(e),y().viewSpoiler("Volcanic Course Type")}),f(166,"span",17),g(167,"View Spoiler"),h(),D(168,"em",19),h(),D(169,"br"),f(170,"span",16),A("click",function(){return N(e),y().viewSpoiler("Volcanic Course Type")}),f(171,"span",17),g(172,"View Spoiler"),h(),f(173,"span",14),g(174,"Salamander"),h(),g(175),h(),D(176,"br"),f(177,"span",16),A("click",function(){return N(e),y().viewSpoiler("Volcanic Course Type")}),f(178,"span",17),g(179,"View Spoiler"),h(),f(180,"span",14),g(181,"Fox"),h(),g(182),h()()()()(),D(183,"hr"),f(184,"div")(185,"div")(186,"div",7)(187,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerTerrain")}),g(188,"+"),h()(),f(189,"div",9)(190,"p"),g(191,"What are the different terrain options when racing?"),h()()(),f(192,"div",20),D(193,"div",7),f(194,"p"),g(195," Every race leg will have a random terrain. Each terrain may have a positive or negative effect for your racer and should be considered when thinking about which animal is going to race a particular leg. The terrain options are below: "),D(196,"br")(197,"br"),f(198,"strong"),g(199,"Sunny"),h(),D(200,"br")(201,"span",19)(202,"br"),f(203,"strong"),g(204,"Rainy"),h(),D(205,"br")(206,"span",19)(207,"br"),f(208,"strong"),g(209,"Stormy"),h(),D(210,"br")(211,"span",19)(212,"br"),f(213,"strong"),g(214,"Torrid"),h(),D(215,"br")(216,"span",19)(217,"br"),f(218,"strong"),g(219,"Maelstrom"),h(),D(220,"br")(221,"span",19)(222,"br"),f(223,"strong"),g(224,"Snowfall"),h(),D(225,"br")(226,"span",19)(227,"br"),f(228,"strong"),g(229,"Hailstorm"),h(),D(230,"br")(231,"span",19)(232,"br"),f(233,"strong"),g(234,"Ashfall"),h(),D(235,"br")(236,"span",19),h()()(),D(237,"hr"),f(238,"div")(239,"div")(240,"div",7)(241,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerBreedKeybinds")}),g(242,"+"),h()(),f(243,"div",9)(244,"p"),g(245,"What keybinds or similar shortcuts are there?"),h()()(),f(246,"div",21),D(247,"div",7),f(248,"p"),g(249," Use the left and right arrow keys to quickly jump between barns under the 'Barns' page and between animals under the 'Animals' page. "),D(250,"br"),g(251," Use the ctrl, shift, and alt keys to add multipliers to certain items in the shop to buy them in bulk. "),h()()(),D(252,"hr"),f(253,"div")(254,"div")(255,"div",7)(256,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerSettings")}),g(257,"+"),h()(),f(258,"div",9)(259,"p"),g(260,"What does each setting do?"),h()()(),f(261,"div",22),D(262,"div",7),f(263,"p")(264,"strong"),g(265,"Auto Skip Race Info"),h(),g(266),D(267,"br")(268,"br"),f(269,"strong"),g(270,"Finish Training Before Switching"),h(),g(271),D(272,"br")(273,"br"),f(274,"strong"),g(275,"Hide Tips"),h(),g(276),D(277,"br")(278,"br"),f(279,"strong"),g(280,"Use Numbers For Circuit Rank"),h(),g(281),D(282,"br")(283,"br"),f(284,"strong"),g(285,"Auto Start Event Race"),h(),g(286),D(287,"br")(288,"br"),f(289,"strong"),g(290,"Race Display Info"),h(),g(291),h()()(),D(292,"hr"),f(293,"div")(294,"div")(295,"div",7)(296,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerFeedback")}),g(297,"+"),h()(),f(298,"div",9)(299,"p"),g(300,"I'm having an issue with my game or have some feedback, how can I contact you?"),h()()(),f(301,"div",23),D(302,"div",7),f(303,"p"),g(304,"Feel free to use the links at the bottom right or email me at CulturaIdle@gmail.com to get in touch. "),h()()(),D(305,"hr"),h()}if(2&t){const e=y();p(22),K(" ",e.lookupService.getTrainingBreedGaugeIncrease(0)," XP"),p(4),K(" ",e.lookupService.getLocalBreedGaugeIncrease()," XP"),p(4),K(" ",e.lookupService.getCircuitBreedGaugeIncrease()," XP"),p(34),K(" - ",e.globalService.getAnimalDescription("Horse")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Cheetah")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Hare")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Warthog")," "),p(8),K(" - ",e.globalService.getAnimalDescription("Monkey")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Goat")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Gecko")," "),p(4),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("ngClass",e.seeOceanCourseTypeSpoiler?"waterColor":""),p(3),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Dolphin"),""),p(2),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Shark"),""),p(2),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Octopus"),""),p(2),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Whale"),""),p(4),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("ngClass",e.seeTundraCourseTypeSpoiler?"tundraColor":""),p(3),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("innerHTML",e.globalService.getTundraDescription(),zt),p(2),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Penguin"),""),p(2),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Caribou"),""),p(4),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"volcanicColor":""),p(3),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("innerHTML",e.globalService.getVolcanicDescription(),zt),p(2),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Salamander"),""),p(2),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Fox"),""),p(19),b("innerHTML",e.sunnyTerrainInfo,zt),p(5),b("innerHTML",e.rainyTerrainInfo,zt),p(5),b("innerHTML",e.stormyTerrainInfo,zt),p(5),b("innerHTML",e.torridTerrainInfo,zt),p(5),b("innerHTML",e.maelstromTerrainInfo,zt),p(5),b("innerHTML",e.snowfallTerrainInfo,zt),p(5),b("innerHTML",e.hailstormTerrainInfo,zt),p(5),b("innerHTML",e.ashfallTerrainInfo,zt),p(30),K(" - ",e.lookupService.getSettingDescriptions("Auto Skip Race Info")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Finish Training Before Switching")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Hide Tips")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Auto Start Event Race")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Race Display Info")," ")}}function i$(t,n){if(1&t){const e=de();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),A("click",function(){return N(e),y(2).expandAnswer("faqAnswer4")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"What is the Incubator? How does the Incubator Upgrade item work?"),h()()(),f(8,"div",28),D(9,"div",7),f(10,"p"),g(11,"Once you've successfully completed a Duo Race, you will have access to the Incubator. The Incubator lets you select a trait for an individual animal that lets your customize your stats further. A trait increases one stat and decreases another. As you increase your Research Level by completing Duo Races, you will unlock new traits and increase the amount the traits increase/decrease your stats. Note that traits will only decrease the chosen stat by a maximum of 25%. "),D(12,"br")(13,"br"),g(14," The Incubator Upgrade item gives you even further control over how you build your animals and allows newer animals to quickly catch up to ones of higher breed level. After purchasing this item, every time you breed you will gain a permanent increase to the stat your trait currently is providing you. The increase amount depends on your current Research Level. For example: "),D(15,"br")(16,"br"),g(17," If you have a Research Level of 15 and apply the "),f(18,"span",14),g(19,"Alert"),h(),g(20," trait to your Horse, it will gain 15% "),f(21,"span",14),g(22,"Focus"),h(),g(23," and lose 15% "),f(24,"span",14),g(25,"Endurance"),h(),g(26," through the trait itself. "),D(27,"br"),f(28,"em"),g(29,"If you have Incubator Upgrade Level 1:"),h(),g(30," each time you Breed your Horse, it will gain an additional modifier of .01 to its "),f(31,"span",14),g(32,"Focus"),h(),g(33," stat. 10% of the positive trait value of 15% would come out to .015. Incubator Upgrade Level 1 only allows for the first 10% of your trait value to contribute to the modifier, so you would gain .01. "),D(34,"br"),f(35,"em"),g(36,"If you have Incubator Upgrade Level 2:"),h(),g(37," each time you Breed your Horse, it will gain an additional modifier of .015 to its "),f(38,"span",14),g(39,"Focus"),h(),g(40," stat. 10% of the positive trait value of 15% would come to .015. Incubator Upgrade Level 2 allows for the first 25% of your trait value to contribute to the modifier. Because your trait value is only 15%, it will contribute in its entirety. "),h()(),D(41,"hr"),h()}}function n$(t,n){if(1&t){const e=de();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerOverwhelmed")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"I'm overwhelmed -- what am I supposed to be doing? What are all of the different races? "),h()()(),f(9,"div",24),D(10,"div",7),f(11,"p"),g(12,"That's okay! There is a lot of information that comes at you at first. The first thing to understand is that this game has two basic loops at its core: Training/Racing cycles and Breeding cycles. At the beginning, you simply want to make sure your animals are training in a balanced way. Make sure to pay attention to what each animal's diminishing returns value is (20 by default), because after you train a base stat to that point then any further training of that stat becomes progressively weaker. You can keep up with your animal's stats and Diminishing Returns value by viewing any particular animal after clicking 'Animals' in the navigation menu. With that in mind, once you've got at least one animal of each available course type with stats close to their Diminishing Returns value, you're ready to race. When you click on the 'Races' section of the navigation menu, there are a few subsections at the top. Here is what they mean: "),D(13,"br")(14,"br"),f(15,"strong"),g(16,"Circuit Races:"),h(),g(17," Raising your circuit rank as high as possible is your ultimate aim, and completing Circuit Races is the only way to do so. You'll unlock new animals, races, items, and upgrades by doing this. On this page, you also have access to free races which are easier races that provide a smaller amount of coin. Free race difficulty scales with your circuit rank, so if you plan to play a more active playstyle then you may benefit from not speeding through circuit ranks too quickly as you may have trouble completing free races. If you are okay with a more idle play style though, then you can simply complete Circuit Races as you are able to. "),D(18,"br"),f(19,"strong"),g(20,"Special Races:"),h(),g(21," These races types are unlocked as you increase your circuit rank. They work just like Circuit Races in that you have to complete each rank's races before you increase your rank, but they each reward something unique. For example, the Mono Races you unlock at circuit rank 2 increase your animal's Diminishing Returns value. Your rank at any particular Special Race cannot exceed your circuit rank, so as you increase your circuit rank make sure to check back and complete your Special Races as you are able to. "),D(22,"br"),f(23,"strong"),g(24,"Event Races:"),h(),g(25," After reaching circuit rank 13, you have access to the Grand Prix. The Grand Prix is a multi day race that runs in the background where you can easily swap in and out different racers. This race may be difficult for those who are just starting and you are safe to ignore it until you have a handle on everything else. "),D(26,"br"),f(27,"strong"),g(28,"Training Track"),h(),g(29,": At the training track, each animal has the opportunity to race against a number of competitors to gain some Coins and some unique rewards. You'll likely need to raise your breed levels a bit before seeing success here, but do check in after you've played a little while and give it a shot. "),D(30,"br")(31,"br"),g(32," Once you've trained your animals up to their Diminishing Returns value, you've completed Special Races to increase your Diminishing Returns value, and you've pushed your Circuit Rank as high as you can go, that's when you will want to start breeding your animals. There are other FAQ sections dedicated to Breeding so check those out for more information. After Breeding for awhile, you'll go back to training and racing. Cycling between these two flows is key to success in Cultura. Once you start unlocking multiple animals per course type, you can have one set breeding while the others train and race to cut down on wait time. "),h()()(),D(33,"hr"),f(34,"div")(35,"div")(36,"div",7)(37,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswer1")}),g(38,"+"),h()(),f(39,"div",9)(40,"p"),g(41,"I'm stuck early on, how should I progress?"),h()()(),f(42,"div",25),D(43,"div",7),f(44,"p"),g(45,"In the early game, your biggest obstacles will be coins and breed level. Using the Stockbreeder to Auto Breed your animals can give them a big boost in stats. "),f(46,"em"),g(47,"Note that you should typically wait to Breed until you've gotten as far as you can in circuit races as Breeding will reset your base stats to their defaults and require you to train them back up again. "),h(),D(48,"br")(49,"br"),g(50," If you are having a hard time collecting coins, look into buying the Money Mark and Team Managers from the Shop and upgrading your barns to Attractions to build passive income. The Money Mark will add a new competitor to your races (gold colored as opposed to black) that will run 25% faster than the average speed. If you finish the race first, your coin gain will increase by 25%."),D(51,"br"),g(52," Team Managers will automatically run free races for you every reset period, making sure you're getting as much value as possible from free races. "),D(53,"br"),g(54," Attractions require reaching barn level 10 and will take a little longer than buying the Money Mark and Team Manager, but it will provide passive income as long as there is an animal training in the barn. "),D(55,"br")(56,"br"),g(57," Some early game goals to set for yourself are to complete the Novice level training track, buy enough barns to train at least 1 animal of each course type available to you, raise your circuit rank, and make sure you raise your mono rank to match your circuit rank. "),h()()(),D(58,"hr"),f(59,"div")(60,"div")(61,"div",7)(62,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswer2")}),g(63,"+"),h()(),f(64,"div",9)(65,"p"),g(66,"What do team managers do and how do I set auto race?"),h()()(),f(67,"div",26),D(68,"div",7),f(69,"p"),g(70,'After buying a Team Manager from the shop, you\'ll have the ability to set a deck as your "Auto Run Free Race" deck. Once selected, this deck will immediately run free races as soon as the time period resets creating a steady stream of income (assuming you win, of course!). '),D(71,"br")(72,"br"),g(73,' To set a deck as your "Auto Run Free Race" deck, select \'Decks\' on the right and then select the button that says "Auto Run Free Race" by the deck you want to select. Note that this option will not be available until you buy a Team Manager. '),h()()(),D(74,"hr"),f(75,"div")(76,"div")(77,"div",7)(78,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswer3")}),g(79,"+"),h()(),f(80,"div",9)(81,"p"),g(82,"What does upgrading a barn do and how do I specialize my barn?"),h()()(),f(83,"div",27),D(84,"div",7),f(85,"p"),g(86,"After reaching a certain circuit rank, you will gain the ability to upgrade your barns. Every level you upgrade, you gain a multiplier for a particular stat when training. Hovering over your barn level when selecting a barn will show you your current multipliers. Increasing your barn level can be a great way to get you back in the race after breeding. "),D(87,"br")(88,"br"),g(89," At barn level 10, you will instead have the option to specialize. Subsequently, every 10 levels will improve your specialization instead of giving a stat multiplier. The current specialization options are below."),D(90,"br")(91,"br"),f(92,"strong"),g(93),h(),D(94,"br"),f(95,"strong"),g(96),h(),D(97,"br"),f(98,"strong",16),A("click",function(){return N(e),y().viewSpoiler("Attraction Specialization")}),f(99,"span",17),g(100,"View Spoiler"),h(),g(101),h(),D(102,"br"),f(103,"strong",16),A("click",function(){return N(e),y().viewSpoiler("Research Center Specialization")}),f(104,"span",17),g(105,"View Spoiler"),h(),g(106),h()()()(),D(107,"hr"),x(108,i$,42,0,"div",6),h()}if(2&t){const e=y();p(93),K("Training Facility - ",e.lookupService.getInDepthSpecializationDescription("Training Facility"),""),p(3),K("Breeding Grounds - ",e.lookupService.getInDepthSpecializationDescription("Breeding Grounds"),""),p(2),b("ngClass",e.seeAttractionSpoiler?"viewSpoiler":"spoilerText"),p(3),K(" Attraction - ",e.lookupService.getInDepthSpecializationDescription("Attraction"),""),p(2),b("ngClass",e.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),p(3),K("Research Center - ",e.lookupService.getInDepthSpecializationDescription("Research Center"),""),p(2),b("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}function r$(t,n){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=y(2);p(1),K("",e.renownCoinGain,"% Additional Coins")}}function a$(t,n){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=y(2);p(1),K("",e.renownCoinGain.toFixed(2),"% Additional Coins")}}function o$(t,n){if(1&t&&(f(0,"option",52),g(1),h()),2&t){const e=n.$implicit;b("value",e.type),p(1),K(" ",e.name,"")}}function s$(t,n){1&t&&(f(0,"option",52),g(1,"Attraction"),h()),2&t&&b("value",3)}function l$(t,n){1&t&&(f(0,"option",52),g(1,"Research Center"),h()),2&t&&b("value",4)}function c$(t,n){if(1&t){const e=de();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),A("click",function(){return N(e),y(2).expandAnswer("faqAnswerIncubatorGrowthCalculator")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"Modifier gain from Incubator Upgrade"),h()()(),f(8,"div",58),D(9,"div",7),f(10,"div",48)(11,"div")(12,"em"),g(13,"Enter a Facility Level and an Incubator Upgrade Level between 1 and 4 to see what the modifier would be on the stat corresponding to the positive trait. This pulls from your current resources by default."),h()(),D(14,"br")(15,"br"),f(16,"div",30)(17,"div",49)(18,"label",59),g(19,"Incubator Upgrade Level:"),h(),f(20,"input",60),A("ngModelChange",function(r){return N(e),y(2).incubatorUpgradeLevel=r}),h(),D(21,"br"),f(22,"label",61),g(23,"Facility Level:"),h(),f(24,"input",62),A("ngModelChange",function(r){return N(e),y(2).facilityLevel=r}),h()(),f(25,"div",34)(26,"span"),g(27,"Result:"),h(),D(28,"br"),f(29,"em")(30,"span",36),g(31),h(),g(32," * .001 with Incubator Upgrade Level "),f(33,"span",63),g(34),h()(),g(35," = "),f(36,"span",14),g(37),h()()()()(),D(38,"hr"),h()}if(2&t){const e=y(2);p(20),b("ngModel",e.incubatorUpgradeLevel),p(4),b("ngModel",e.facilityLevel),p(7),et(e.facilityLevel),p(3),et(e.incubatorUpgradeLevel),p(3),K("*",e.incubatorModifierAmount," to Positive Trait Stat per Breed Level")}}const _2=function(t){return{inactiveCalculation:t}};function u$(t,n){if(1&t){const e=de();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerRenownCalculator")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"Coin gain from Renown"),h()()(),f(9,"div",29),D(10,"div",7),f(11,"div")(12,"em"),g(13,"Enter a Renown amount to see what the modifier would be on Coins won from races."),h()(),D(14,"br")(15,"br"),f(16,"div",30)(17,"div",31)(18,"label",32),g(19,"Renown:"),h(),f(20,"input",33),A("ngModelChange",function(r){return N(e),y().coinGainRenownAmount=r}),h()(),f(21,"div",34)(22,"span"),g(23,"Result:"),h(),f(24,"div",35)(25,"em"),g(26,"If Renown <= 50: "),f(27,"span",36),g(28),h()(),g(29," = "),x(30,r$,2,1,"span",37),h(),D(31,"br"),f(32,"div",35)(33,"em"),g(34,"If Renown > 50: 500 * log(.0035 * - ("),f(35,"span",36),g(36),h(),g(37," - 50) + 1) + 50 "),h(),g(38," = "),x(39,a$,2,1,"span",37),h()()()()(),D(40,"hr"),f(41,"div")(42,"div")(43,"div",7)(44,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerTrainingBreedXpCalculator")}),g(45,"+"),h()(),f(46,"div",9)(47,"p"),g(48,"Breed XP gain from Training"),h()()(),f(49,"div",38),D(50,"div",7),f(51,"div")(52,"em"),g(53,"Select an animal or enter your own values to see how much Breed XP you would gain from completing a single training. Selecting an animal pulls from their current bonuses."),h()(),D(54,"br")(55,"br"),f(56,"div",30)(57,"div",31)(58,"div",39)(59,"label",40),g(60,"Animal:"),h(),f(61,"select",41),A("ngModelChange",function(r){return N(e),y().selectedAnimalType=r})("change",function(){return N(e),y().newAnimalSelected()}),x(62,o$,2,2,"option",42),h()(),f(63,"em"),g(64,"or"),h(),f(65,"div")(66,"label",43),g(67,"Bonus Training Breed XP:"),h(),f(68,"input",44),A("change",function(){return N(e),y().animalNotSelected()})("ngModelChange",function(r){return N(e),y().bonusBreedXp=r}),h(),D(69,"br"),f(70,"label",45),g(71,"Breeding Grounds Specialization Level:"),h(),f(72,"input",46),A("ngModelChange",function(r){return N(e),y().breedingGroundsSpecializationLevel=r}),h()()(),f(73,"div",34)(74,"span"),g(75,"Result:"),h(),D(76,"br"),f(77,"em"),g(78,"(5 + "),f(79,"span",14),g(80),h(),g(81,") * (1 + "),f(82,"span",14),g(83),h(),g(84," * .1) "),h(),g(85," = "),f(86,"span",14),g(87),h()()()()(),D(88,"hr"),f(89,"div")(90,"div")(91,"div",7)(92,"button",8),A("click",function(){return N(e),y().expandAnswer("faqAnswerBarnSpecializationGainCalculator")}),g(93,"+"),h()(),f(94,"div",9)(95,"p"),g(96,"Barn Specialization Calculator"),h()()(),f(97,"div",47),D(98,"div",7),f(99,"div",48)(100,"div")(101,"em"),g(102,"Select a Specialization Type and enter the Barn Upgrade Level or Specialization Level to see what impact that specialization would have. Specialization Level corresponds Barn Upgrade Level * 10 because your specialization improves every 10 barn upgrade levels."),h()(),D(103,"br")(104,"br"),f(105,"div",30)(106,"div",49)(107,"label",50),g(108,"Specialization:"),h(),f(109,"select",51),A("ngModelChange",function(r){return N(e),y().selectedSpecialization=r}),f(110,"option",52),g(111,"Breeding Grounds"),h(),f(112,"option",52),g(113,"Training Facility"),h(),x(114,s$,2,1,"option",53),x(115,l$,2,1,"option",53),h(),D(116,"br")(117,"br"),f(118,"div")(119,"label",54),g(120,"Barn Upgrade Level:"),h(),f(121,"input",55),A("change",function(){return N(e),y().changeBarnUpgradeLevel()})("ngModelChange",function(r){return N(e),y().barnUpgradeLevel=r}),h(),D(122,"br"),f(123,"em"),g(124,"or"),h(),D(125,"br"),f(126,"label",56),g(127,"Barn Specialization Level:"),h(),f(128,"input",57),A("change",function(){return N(e),y().changeBarnSpecializationLevel()})("ngModelChange",function(r){return N(e),y().barnSpecializationLevel=r}),h()()(),f(129,"div",34)(130,"span"),g(131,"Result:"),h(),D(132,"br")(133,"span",19),h()()()()(),D(134,"hr"),x(135,c$,39,5,"div",6),h()}if(2&t){const e=y();p(20),b("ngModel",e.coinGainRenownAmount),p(4),b("ngClass",hn(23,_2,e.coinGainRenownAmount>50)),p(4),et(e.coinGainRenownAmount),p(2),b("ngIf",e.coinGainRenownAmount<=50),p(2),b("ngClass",hn(25,_2,e.coinGainRenownAmount<=50)),p(4),et(e.coinGainRenownAmount),p(3),b("ngIf",e.coinGainRenownAmount>50),p(22),b("ngModel",e.selectedAnimalType),p(1),b("ngForOf",e.availableAnimals),p(6),b("ngModel",e.bonusBreedXp),p(4),b("ngModel",e.breedingGroundsSpecializationLevel),p(8),et(e.bonusBreedXp),p(3),et(e.breedingGroundsSpecializationLevel),p(4),K("",e.trainingBreedXpGain," XP gained after completing any Training"),p(22),b("ngModel",e.selectedSpecialization),p(1),b("value",1),p(2),b("value",2),p(2),b("ngIf",e.seeAttractionSpoiler),p(1),b("ngIf",e.seeResearchCenterSpoiler),p(6),b("ngModel",e.barnUpgradeLevel),p(7),b("ngModel",e.barnSpecializationLevel),p(5),b("innerHTML",e.barnSpecializationLevelAmount,zt),p(2),b("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}let d$=(()=>{class t{constructor(e,i,r,a,o){this.componentCommunicationService=e,this.lookupService=i,this.gameLoopService=r,this.globalService=a,this.specializationService=o,this.seeAttractionSpoiler=!1,this.seeResearchCenterSpoiler=!1,this.seeOceanCourseTypeSpoiler=!1,this.seeTundraCourseTypeSpoiler=!1,this.seeVolcanicCourseTypeSpoiler=!1,this.currentSection=Wu.basics,this.faqSectionsEnum=Wu,this.sunnyTerrainInfo="",this.stormyTerrainInfo="",this.rainyTerrainInfo="",this.snowfallTerrainInfo="",this.ashfallTerrainInfo="",this.maelstromTerrainInfo="",this.hailstormTerrainInfo="",this.torridTerrainInfo="",this.coinGainRenownAmount=0,this.facilityLevel=0,this.incubatorUpgradeLevel=0,this.selectedAnimalType=0,this.animalSelected=!0,this.availableAnimals=[],this.bonusBreedXp=0,this.breedingGroundsSpecializationLevel=0,this.selectedSpecialization=1,this.barnUpgradeLevel=0,this.barnSpecializationLevel=0,this.renownCoinGain=0,this.incubatorModifierAmount=0,this.trainingBreedXpGain=0,this.barnSpecializationLevelAmount=""}ngOnInit(){var i,r,a,e=this;this.componentCommunicationService.setNewView(Tt.faqs),this.lookupService.isItemUnlocked("attractionSpecialization")&&(this.seeAttractionSpoiler=!0),this.lookupService.isItemUnlocked("researchCenterSpecialization")&&(this.seeResearchCenterSpoiler=!0),(null===(i=this.globalService.globalVar.animals.find(u=>u.type===H.Dolphin))||void 0===i?void 0:i.isAvailable)&&(this.seeOceanCourseTypeSpoiler=!0),(null===(r=this.globalService.globalVar.animals.find(u=>u.type===H.Penguin))||void 0===r?void 0:r.isAvailable)&&(this.seeTundraCourseTypeSpoiler=!0),(null===(a=this.globalService.globalVar.animals.find(u=>u.type===H.Salamander))||void 0===a?void 0:a.isAvailable)&&(this.seeVolcanicCourseTypeSpoiler=!0),this.sunnyTerrainInfo=this.lookupService.getTerrainPopoverText(new Tn(qe.Sunny)),this.stormyTerrainInfo=this.lookupService.getTerrainPopoverText(new Tn(qe.Stormy)),this.rainyTerrainInfo=this.lookupService.getTerrainPopoverText(new Tn(qe.Rainy)),this.torridTerrainInfo=this.lookupService.getTerrainPopoverText(new Tn(qe.Torrid)),this.maelstromTerrainInfo=this.lookupService.getTerrainPopoverText(new Tn(qe.Maelstrom)),this.hailstormTerrainInfo=this.lookupService.getTerrainPopoverText(new Tn(qe.Hailstorm)),this.ashfallTerrainInfo=this.lookupService.getTerrainPopoverText(new Tn(qe.Ashfall)),this.snowfallTerrainInfo=this.lookupService.getTerrainPopoverText(new Tn(qe.Snowfall)),this.availableAnimals=this.globalService.globalVar.animals.filter(u=>u.isAvailable),this.coinGainRenownAmount=this.lookupService.getRenown(),this.facilityLevel=this.lookupService.getFacilityLevel();var o=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv1"===u.name),s=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv2"===u.name),l=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv3"===u.name),c=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv4"===u.name);null!=o&&(this.incubatorUpgradeLevel=1),null!=s&&(this.incubatorUpgradeLevel=2),null!=l&&(this.incubatorUpgradeLevel=3),null!=c&&(this.incubatorUpgradeLevel=4),this.newAnimalSelected(),this.calculatorSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Vr(function*(){e.handleRenownModifierCalculation(),e.handleIncubatorModifierCalculation(),e.handleTrainingBreedXpGainCalculation(),e.handleBarnSpecializationLevelAmountCalculation()}))}handleRenownModifierCalculation(){null!=this.coinGainRenownAmount&&(this.renownCoinGain=this.lookupService.getRenownCoinModifier(this.coinGainRenownAmount,!0))}handleIncubatorModifierCalculation(){if(null!=this.incubatorUpgradeLevel&&null!=this.facilityLevel){var r=0,e=.001,i=this.globalService.globalVar.modifiers.find(a=>"incubatorUpgradeIncreaseModifier"===a.text);null!=i&&(e=i.value),r=this.facilityLevel*e,isNaN(this.incubatorUpgradeLevel)||(this.incubatorUpgradeLevel=+this.incubatorUpgradeLevel),this.incubatorUpgradeLevel>=4?(r>.1&&(r=.1),this.incubatorUpgradeLevel=4):3===this.incubatorUpgradeLevel?r>.05&&(r=.05):2===this.incubatorUpgradeLevel?r>.025&&(r=.025):1===this.incubatorUpgradeLevel?r>.01&&(r=.01):this.incubatorUpgradeLevel<=0&&(r=0),this.incubatorModifierAmount=Math.round(1e3*r)/1e3}}handleTrainingBreedXpGainCalculation(){var e=new Pt;e.miscStats.bonusBreedXpGainFromTraining=this.bonusBreedXp,this.trainingBreedXpGain=this.lookupService.getTrainingBreedGaugeIncrease(this.breedingGroundsSpecializationLevel,e)}newAnimalSelected(){this.animalSelected=!0;var e=void 0;if(null!=this.selectedAnimalType&&void 0!==(e=this.globalService.globalVar.animals.find(r=>r.getAnimalType()===H[this.selectedAnimalType]))){if(this.bonusBreedXp=e.miscStats.bonusBreedXpGainFromTraining,e.associatedBarnNumber>=0)var i=this.globalService.globalVar.barns.find(r=>r.barnNumber===(null==e?void 0:e.associatedBarnNumber));void 0!==i&&i.barnUpgrades.specialization===Wt.BreedingGrounds&&(this.breedingGroundsSpecializationLevel=i.barnUpgrades.specializationLevel)}}animalNotSelected(){this.animalSelected=!1}handleBarnSpecializationLevelAmountCalculation(){1==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Wt.BreedingGrounds,this.barnSpecializationLevel):2==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Wt.TrainingFacility,this.barnSpecializationLevel):3==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Wt.Attraction,this.barnSpecializationLevel):4==+this.selectedSpecialization&&(this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Wt.ResearchCenter,this.barnSpecializationLevel))}changeBarnUpgradeLevel(){this.barnSpecializationLevel=Math.floor(this.barnUpgradeLevel/10)}changeBarnSpecializationLevel(){this.barnUpgradeLevel=10*this.barnSpecializationLevel}viewSpoiler(e){"Attraction Specialization"===e&&(this.seeAttractionSpoiler=!0),"Research Center Specialization"===e&&(this.seeResearchCenterSpoiler=!0),"Ocean Course Type"===e&&(this.seeOceanCourseTypeSpoiler=!0),"Tundra Course Type"===e&&(this.seeTundraCourseTypeSpoiler=!0),"Volcanic Course Type"===e&&(this.seeVolcanicCourseTypeSpoiler=!0)}expandAnswer(e){var i=document.getElementById(e);null!=i&&i.classList.toggle("hide")}changeSection(e){this.currentSection=e}ngOnDestroy(){null!=this.calculatorSubscription&&this.calculatorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(mn),E(Di),E(Bn),E(It),E(g0))},t.\u0275cmp=bt({type:t,selectors:[["app-faq-view"]],decls:21,vars:6,consts:[[1,"faqView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"subsections","s4Heading"],[1,"subsectionOption","buttonAsText",3,"ngClass","click"],[4,"ngIf"],[1,"expanderMargin"],["type","button","aria-label","Expand",3,"click"],[1,"faqQuestion"],["id","faqAnswerBreedGuide",1,"faqAnswer","hide"],["id","faqAnswerBreedBarnRows",1,"faqAnswer","hide"],["id","faqAnswerAllAnimals",1,"faqAnswer","hide"],[1,"flatlandColor","keyword"],[1,"keyword"],[1,"mountainColor","keyword"],[3,"ngClass","click"],[1,"hidden"],[1,"keyword",3,"ngClass"],[3,"innerHTML"],["id","faqAnswerTerrain",1,"faqAnswer","hide"],["id","faqAnswerBreedKeybinds",1,"faqAnswer","hide"],["id","faqAnswerSettings",1,"faqAnswer","hide"],["id","faqAnswerFeedback",1,"faqAnswer","hide"],["id","faqAnswerOverwhelmed",1,"faqAnswer","hide"],["id","faqAnswer1",1,"faqAnswer","hide"],["id","faqAnswer2",1,"faqAnswer","hide"],["id","faqAnswer3",1,"faqAnswer","hide"],["id","faqAnswer4",1,"faqAnswer","hide"],["id","faqAnswerRenownCalculator",1,"faqAnswer","hide"],[1,"inputsAndResult"],[1,"mb-3","inputs"],["for","renown-amount",1,"shortLabelMargin","progressionKeyword"],["id","renown-amount","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"result"],[3,"ngClass"],[1,"progressionKeyword"],["class","keyword",4,"ngIf"],["id","faqAnswerTrainingBreedXpCalculator",1,"faqAnswer","hide"],[1,"dropdownSelection"],["for","breed-xp-animal",1,"keyword"],["name","breed-xp-animal","id","breed-xp-animal",1,"spaced",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","bonus-breed-xp",1,"longLabelMargin","keyword"],["id","bonus-breed-xp","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","breeding-grounds-spec-level",1,"longLabelMargin","keyword"],["id","breeding-grounds-spec-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["id","faqAnswerBarnSpecializationGainCalculator",1,"faqAnswer","hide"],[1,"mb-3"],[1,"inputs"],["for","specialization-options",1,"keyword"],["name","specialization-options","id","specialization-options",1,"spaced",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngIf"],["for","barn-upgrade-level",1,"labelMargin","keyword"],["id","barn-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","barn-specialization-level",1,"labelMargin","keyword"],["id","barn-specialization-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["id","faqAnswerIncubatorGrowthCalculator",1,"faqAnswer","hide"],["for","incubator-upgrade-level",1,"labelMargin","specialtyKeyword"],["id","incubator-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["for","facility-level",1,"labelMargin","progressionKeyword"],["id","facility-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"specialtyKeyword"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Frequently Asked Questions"),h(),f(6,"em"),g(7,"This FAQ and game is still a work in progress! Bear with me if certain features aren't fully fleshed out and developed yet. If you have any feedback at all, please let me know using one of the links on the bottom right. Thank you so much for playing and hope you're enjoying it!"),h()(),D(8,"br"),f(9,"div",4)(10,"button",5),A("click",function(){return i.changeSection(i.faqSectionsEnum.basics)}),g(11,"Basics"),h(),f(12,"button",5),A("click",function(){return i.changeSection(i.faqSectionsEnum.progression)}),g(13,"Progression"),h(),f(14,"button",5),A("click",function(){return i.changeSection(i.faqSectionsEnum.calculators)}),g(15,"Calculators"),h()(),D(16,"hr")(17,"br"),x(18,t$,306,50,"div",6),x(19,n$,109,7,"div",6),x(20,u$,136,27,"div",6),h()()()),2&e&&(p(10),b("ngClass",i.currentSection===i.faqSectionsEnum.basics?"active":""),p(2),b("ngClass",i.currentSection===i.faqSectionsEnum.progression?"active":""),p(2),b("ngClass",i.currentSection===i.faqSectionsEnum.calculators?"active":""),p(4),b("ngIf",i.currentSection===i.faqSectionsEnum.basics),p(1),b("ngIf",i.currentSection===i.faqSectionsEnum.progression),p(1),b("ngIf",i.currentSection===i.faqSectionsEnum.calculators))},directives:[rn,hi,Rm,es,Ll,Ds,Rs,Qh,cn,vT,bT],styles:['.faqView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}.faqQuestion[_ngcontent-%COMP%]{display:inline-block;width:95%;font-weight:700}.hide[_ngcontent-%COMP%]{display:none}.expanderMargin[_ngcontent-%COMP%]{display:inline-block;width:5%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.inputsAndResult[_ngcontent-%COMP%]{display:flex}.inactiveCalculation[_ngcontent-%COMP%]{opacity:.5}.inputs[_ngcontent-%COMP%], .results[_ngcontent-%COMP%]{width:50%}.spoilerText[_ngcontent-%COMP%]{background-color:gray;color:transparent;-webkit-user-select:none;user-select:none;position:relative;display:inline-block;min-width:8rem}.spoilerText[_ngcontent-%COMP%]:hover > .hidden[_ngcontent-%COMP%]{display:block;color:#fff}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.shortLabelMargin[_ngcontent-%COMP%]{min-width:15%}.labelMargin[_ngcontent-%COMP%]{min-width:25%}.longLabelMargin[_ngcontent-%COMP%]{min-width:40%}.hidden[_ngcontent-%COMP%]{display:none;position:absolute}.subsections[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.viewSpoiler[_ngcontent-%COMP%]{background-color:inherit;color:inherit}@media (max-width: 800px){.expanderMargin[_ngcontent-%COMP%]{width:auto;margin-right:1rem}.faqQuestion[_ngcontent-%COMP%]{width:auto}}']}),t})(),h$=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i}ngOnInit(){this.componentCommunicationService.setNewView(Tt.stats),this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(i=>{i.totalRacesRun>e&&(e=i.totalRacesRun,this.mostUsedAnimal=i.name,this.mostUsedAnimalCount=e)})}getColorClass(e){if(null!=e&&e.length>0){var i=this.globalService.globalVar.animals.filter(o=>o.isAvailable),r=new Pt;return i.forEach(o=>{e.includes(o.name)&&(r=o)}),{flatlandColor:"Flatland"===r.getRaceCourseType(),mountainColor:"Mountain"===r.getRaceCourseType(),waterColor:"Ocean"===r.getRaceCourseType(),tundraColor:"Tundra"===r.getRaceCourseType(),volcanicColor:"Volcanic"===r.getRaceCourseType()}}return{}}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(mn))},t.\u0275cmp=bt({type:t,selectors:[["app-stats-view"]],decls:37,vars:34,consts:[[1,"statsView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"coloredText",3,"ngClass"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Stats"),h(),D(5,"br")(6,"br"),g(7),Ot(8,"number"),D(9,"br"),g(10),Ot(11,"number"),D(12,"br"),g(13),Ot(14,"number"),D(15,"br"),f(16,"span",4),g(17),Ot(18,"number"),h(),D(19,"br"),f(20,"span",4),g(21),h(),D(22,"br"),f(23,"span",4),g(24),h(),D(25,"br"),f(26,"span",4),g(27),h(),D(28,"br"),f(29,"span",4),g(30),h(),D(31,"br"),f(32,"span",4),g(33),h(),D(34,"br"),f(35,"span",4),g(36),h()()()()),2&e&&(p(7),K(" Total Races: ",tu(8,18,i.trackedStats.totalRaces,"1.0","en-US")," "),p(3),K(" Total Meters Covered: ",tu(11,22,i.trackedStats.totalMetersRaced.toFixed(0),"1.0","en-US")," "),p(3),K(" Total Breeds: ",tu(14,26,i.trackedStats.totalBreeds,"1.0","en-US")," "),p(3),b("ngClass",i.getColorClass(i.mostUsedAnimal)),p(1),Wi("Most Used Animal: ",i.mostUsedAnimal," (",tu(18,30,i.mostUsedAnimalCount,"1.0","en-US"),")"),p(3),b("ngClass",i.getColorClass(i.trackedStats.highestMaxSpeed)),p(1),K("Highest Max Speed: ",i.trackedStats.highestMaxSpeed,""),p(2),b("ngClass",i.getColorClass(i.trackedStats.highestAccelerationRate)),p(1),K("Highest Acceleration Rate: ",i.trackedStats.highestAccelerationRate,""),p(2),b("ngClass",i.getColorClass(i.trackedStats.highestStamina)),p(1),K("Highest Stamina: ",i.trackedStats.highestStamina,""),p(2),b("ngClass",i.getColorClass(i.trackedStats.highestPowerEfficiency)),p(1),K("Highest Power Efficiency: ",i.trackedStats.highestPowerEfficiency,""),p(2),b("ngClass",i.getColorClass(i.trackedStats.highestFocusDistance)),p(1),K("Highest Focus Distance: ",i.trackedStats.highestFocusDistance,""),p(2),b("ngClass",i.getColorClass(i.trackedStats.highestAdaptabilityDistance)),p(1),K("Highest Adaptability Distance: ",i.trackedStats.highestAdaptabilityDistance,""))},directives:[rn],pipes:[no],styles:['.statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}']}),t})();function f$(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=y().$implicit;p(1),K("Level ",e.level+1,"")}}function p$(t,n){1&t&&(f(0,"span"),g(1,"MAX"),h())}function g$(t,n){if(1&t&&(f(0,"span"),g(1),Ot(2,"number"),h()),2&t){const e=y().$implicit;p(1),Wi("XP needed for next level: ",oi(2,2,e.xp,"1.2-2")," / ",e.xpNeededForLevel,"")}}function v$(t,n){1&t&&(f(0,"span"),g(1,"MAX"),h())}function m$(t,n){if(1&t&&(f(0,"div")(1,"div",2)(2,"span",3),g(3),h(),f(4,"p"),g(5),h(),f(6,"div"),D(7,"br"),f(8,"span",4)(9,"span"),g(10),h(),D(11,"ngb-progressbar",5),x(12,f$,2,1,"span",6),x(13,p$,2,0,"span",6),h(),f(14,"span",7),g(15),Ot(16,"number"),h(),D(17,"br"),x(18,g$,3,5,"span",6),x(19,v$,2,0,"span",6),D(20,"br")(21,"br"),g(22),h()(),D(23,"hr"),h()),2&t){const e=n.$implicit,i=y();p(2),b("ngClass",i.colorConditional(e.type)),p(1),et(i.globalService.getOrbNameFromType(e.type)),p(2),Wi("Level ",e.level," / ",e.maxLevel,""),p(5),K("Level ",e.level,""),p(1),b("value",i.getProgressBarPercent(e.type)),p(1),b("ngIf",e.level<e.maxLevel),p(1),b("ngIf",e.level>=e.maxLevel),p(2),K("",oi(16,12,i.getProgressBarPercent(e.type),"1.2-2"),"%"),p(3),b("ngIf",e.level<e.maxLevel),p(1),b("ngIf",e.level>=e.maxLevel),p(3),K(" ",i.globalService.getOrbDescription(e.type)," ")}}let b$=(()=>{class t{constructor(e){this.globalService=e}ngOnInit(){this.allOrbs=this.globalService.globalVar.orbStats.allOrbs}getProgressBarPercent(e){var i=this.globalService.getOrbDetailsFromType(e);return void 0!==i?i.xp/i.xpNeededForLevel*100:0}colorConditional(e){return{amberColor:e===tt.amber,amethystColor:e===tt.amethyst,rubyColor:e===tt.ruby,sapphireColor:e===tt.sapphire,topazColor:e===tt.topaz,emeraldColor:e===tt.emerald}}}return t.\u0275fac=function(e){return new(e||t)(E(It))},t.\u0275cmp=bt({type:t,selectors:[["app-orbs-view"]],decls:2,vars:1,consts:[[1,"orbView"],[4,"ngFor","ngForOf"],[1,"centered"],[1,"s4Heading",3,"ngClass"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[4,"ngIf"],[1,"customLabel"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,m$,24,15,"div",1),h()),2&e&&(p(1),b("ngForOf",i.allOrbs))},directives:[cn,rn,Gf,hi],pipes:[no],styles:[".orbView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.progressBar[_ngcontent-%COMP%]{width:50%}.progressBarContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}"]}),t})();function _$(t,n){if(1&t&&(f(0,"div",13),D(1,"span",14),h()),2&t){const e=y().$implicit,i=y();p(1),b("innerHTML",i.getPopover(e.name,e.itemType),zt)}}function y$(t,n){if(1&t&&(f(0,"p")(1,"span",8)(2,"span",9),g(3),h(),f(4,"span",10),g(5),h(),D(6,"hr",11),h(),x(7,_$,2,1,"ng-template",null,12,ht),h()),2&t){const e=n.$implicit,i=at(8);p(1),b("ngbPopover",i),p(2),et(e.name),p(2),K(" x ",e.amount,"")}}function w$(t,n){if(1&t&&(f(0,"div",13),D(1,"span",14),h()),2&t){const e=y().$implicit,i=y();p(1),b("innerHTML",i.getPopover(e.name,e.itemType),zt)}}function C$(t,n){if(1&t&&(f(0,"p")(1,"span",8)(2,"span",15),g(3),h(),f(4,"span",10),g(5),h(),D(6,"hr",11),h(),x(7,w$,2,1,"ng-template",null,16,ht),h()),2&t){const e=n.$implicit,i=at(8);p(1),b("ngbPopover",i),p(2),et(e.name),p(2),K(" x ",e.amount,"")}}function S$(t,n){if(1&t&&(f(0,"div",13),D(1,"span",14),h()),2&t){const e=y().$implicit,i=y();p(1),b("innerHTML",i.getPopover(e.name,e.itemType),zt)}}function T$(t,n){if(1&t&&(f(0,"p")(1,"span",8)(2,"span",17),g(3),h(),f(4,"span",10),g(5),h(),D(6,"hr",11),h(),x(7,S$,2,1,"ng-template",null,18,ht),h()),2&t){const e=n.$implicit,i=at(8);p(1),b("ngbPopover",i),p(2),et(e.name),p(2),K(" x ",e.amount,"")}}function D$(t,n){if(1&t){const e=de();f(0,"span")(1,"button",21),A("click",function(){N(e);const r=y().$implicit,a=y(),o=at(22);return a.openOrbModal(o,r.name)}),f(2,"span",22),g(3),h(),f(4,"span",10),g(5),h()()()}if(2&t){const e=y().$implicit;p(3),et(e.name),p(2),K(" x ",e.amount,"")}}function R$(t,n){if(1&t&&(f(0,"span")(1,"span",22),g(2),h(),f(3,"span",10),g(4),h()()),2&t){const e=y().$implicit;p(2),et(e.name),p(2),K(" x ",e.amount,"")}}function x$(t,n){if(1&t&&(f(0,"div",13),D(1,"span",14),h()),2&t){const e=y().$implicit,i=y();p(1),b("innerHTML",i.getPopover(e.name,e.itemType),zt)}}function k$(t,n){if(1&t&&(f(0,"p")(1,"span",8),x(2,D$,6,2,"span",19),x(3,R$,5,2,"span",19),D(4,"hr",11),h(),x(5,x$,2,1,"ng-template",null,20,ht),h()),2&t){const e=n.$implicit,i=at(6),r=y();p(1),b("ngbPopover",i),p(1),b("ngIf",r.isResourceAnOrb(e)),p(1),b("ngIf",!r.isResourceAnOrb(e))}}function M$(t,n){if(1&t){const e=de();f(0,"div",23)(1,"div",24)(2,"h4",25),g(3,"Orb Stats Info"),h(),f(4,"button",26),A("click",function(){return N(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",27),D(7,"app-orbs-view"),h()()}}let A$=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.utilityService=a,this.modalService=o,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.componentCommunicationService.setNewView(Tt.resources),this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===U.Food||e.itemType===U.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===U.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===U.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===U.Progression).sort()}getPopover(e,i){return this.utilityService.getSanitizedHtml(this.lookupService.getResourcePopover(e,i))}isResourceAnOrb(e){return e.itemType===U.Equipment&&("Sapphire Orb"===e.name||"Amethyst Orb"===e.name||"Topaz Orb"===e.name||"Amber Orb"===e.name||"Emerald Orb"===e.name||"Ruby Orb"===e.name)}openOrbModal(e,i){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Di),E(mn),E(Fn),E(ho))},t.\u0275cmp=bt({type:t,selectors:[["app-resources-view"]],decls:23,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["orbContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"resourceKeyword"],[1,"rightAligned"],[1,"miniHr"],["resourceContent",""],[1,"popoverClass"],[3,"innerHTML"],[1,"progressionKeyword"],["progressionContent",""],[1,"specialtyKeyword"],["specialityContent",""],[4,"ngIf"],["equipmentContent",""],[1,"buttonAsText",3,"click"],[1,"equipmentKeyword"],[1,"modalClass","orbContent"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),g(3,"Resources"),h(),D(4,"br"),x(5,y$,9,3,"p",3),h(),f(6,"div",4)(7,"div",2),g(8,"Progression"),h(),D(9,"br"),x(10,C$,9,3,"p",3),h(),f(11,"div",5)(12,"div",2),g(13,"Specialty"),h(),D(14,"br"),x(15,T$,9,3,"p",3),h(),f(16,"div",6)(17,"div",2),g(18,"Equipment"),h(),D(19,"br"),x(20,k$,7,3,"p",3),h()(),x(21,M$,8,0,"ng-template",null,7,ht)),2&e&&(p(5),b("ngForOf",i.resources),p(5),b("ngForOf",i.progressionResources),p(5),b("ngForOf",i.specialtyItems),p(5),b("ngForOf",i.equipment))},directives:[cn,Zr,hi,b$],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.orbContent[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.equipment[_ngcontent-%COMP%]{grid-area:equipment;background-color:var(--background-secondary)}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto auto;justify-content:stretch;grid-template-areas:"resources" "progression" "specialty" "equipment"}}']}),t})();var rc=Y(7206);let P$=(()=>{class t{constructor(e){this.globalService=e}redeemCode(e){var r=rc.AES.decrypt(e,"LaunchSecret!CLTRA71");0===r.toString(rc.enc.Utf8).length&&alert("Invalid code entered.");try{var a=JSON.parse(r.toString(rc.enc.Utf8));null!=a&&a.rewards.length>0&&((new Date).getTime()>new Date(a.expirationDate).getTime()?alert("This code has expired."):this.globalService.globalVar.redeemedCodes.some(o=>o.codeValue===r.toString(rc.enc.Utf8))?alert("This code has already been redeemed."):(a.rewards.forEach(o=>{var s=this.globalService.globalVar.resources.find(l=>l.name===o.name);null!=s?s.amount+=o.amount:this.globalService.globalVar.resources.push(o)}),a.codeValue=r.toString(rc.enc.Utf8),this.globalService.globalVar.redeemedCodes.push(a)))}catch(o){alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}}}return t.\u0275fac=function(e){return new(e||t)(Ue(It))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),E$=(()=>{class t{constructor(e){this.lookupService=e}setupRewards(){this.redeemableCode=new Tf,this.redeemableCode.expirationDate=new Date("2022-09-01"),this.redeemableCode.rewards.push(this.lookupService.gainTokens(5))}createCode(){this.setupRewards();var i=JSON.stringify(this.redeemableCode);return rc.AES.encrypt(i,"LaunchSecret!CLTRA71").toString()}}return t.\u0275fac=function(e){return new(e||t)(Ue(Di))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),I$=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u){this.globalService=e,this.themeService=i,this.lookupService=r,this.codeRedemptionService=a,this.codeCreationService=o,this.deploymentService=s,this.componentCommunicationService=l,this.versionControlService=c,this.utilityService=u,this.raceDisplayInfoEnum=ba,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)},this.autoStartEventRaceToggle=()=>{this.autoStartEventRace=!this.autoStartEventRace,this.globalService.globalVar.settings.set("autoStartEventRace",this.autoStartEventRace)}}ngOnInit(){this.componentCommunicationService.setNewView(Tt.settings),this.deploymentService.codeCreationMode&&console.log(this.codeCreationService.createCode()),this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText=this.lookupService.getSettingDescriptions("Auto Skip Race Info");var i=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==i&&i,this.finishTrainingBeforeSwitchingPopoverText=this.lookupService.getSettingDescriptions("Finish Training Before Switching");var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?ba.both:r),this.raceDisplayInfoPopoverText=this.lookupService.getSettingDescriptions("Race Display Info");var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText=this.lookupService.getSettingDescriptions("Hide Tips");var o=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==o&&o,this.useNumbersForCircuitRankPopoverText=this.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank");var s=this.globalService.globalVar.settings.get("autoStartEventRace");this.autoStartEventRace=void 0!==s&&s,this.autoStartEventRacePopoverText=this.lookupService.getSettingDescriptions("Auto Start Event Race")}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);this.importExportValue=i}fileChanged(e){this.file=e.target.files[0]}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),i=JSON.parse(e);null!=i&&(this.globalService.globalVar=p0(an,i),this.versionControlService.updatePlayerVersion())}}SaveGameToFile(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);let r=new Blob([i],{type:".txt"}),a=document.createElement("a"),o=URL.createObjectURL(r);a.href=o,a.download="Cultura-v"+this.globalService.globalVar.currentVersion.toString().replace(".","_")+"-"+(new Date).toLocaleDateString(),document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(o)},0)}LoadGameFromFile(){if((null==this.file||0===this.file.length)&&alert("First select a file to import."),confirm("This will overwrite your existing game data. Continue?")){let e=new FileReader;e.onload=i=>{var r=LZString.decompressFromBase64(e.result),a=JSON.parse(r);null!=a&&(this.globalService.globalVar=p0(an,a),this.versionControlService.updatePlayerVersion())},e.readAsText(this.file)}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var i=Eu;"White"===e&&(i=this.themeService.setWhiteTheme()),"Light"===e&&(i=this.themeService.setLightTheme()),"Twilight"===e&&(i=this.themeService.setTwilightTheme()),"Night"===e&&(i=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",i),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===ba.both?"Both":e===ba.text?"Text":e===ba.draw?"Draw":""}enterRedemptionCode(){this.codeRedemptionService.redeemCode(this.enteredRedemptionCode)}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(ql),E(Di),E(P$),E(E$),E(HD),E(mn),E(m0),E(Fn))},t.\u0275cmp=bt({type:t,selectors:[["app-settings-view"]],decls:100,vars:15,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","autoStartEventRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],["type","file","id","fileUpload",1,"spaced",3,"change"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"h2"),g(3,"Settings"),h()(),f(4,"div",2)(5,"div",3)(6,"span",4),g(7,"Options"),h(),D(8,"br"),f(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),A("ngModelChange",function(a){return i.skipDrawRace=a})("input",function(){return i.skipDrawRaceToggle()}),h(),f(13,"span"),g(14,"Auto Skip Race Info"),h()()(),D(15,"br"),f(16,"span",6)(17,"label")(18,"input",8),A("ngModelChange",function(a){return i.finishTrainingBeforeSwitching=a})("input",function(){return i.finishTrainingBeforeSwitchingToggle()}),h(),f(19,"span"),g(20,"Finish Training Before Switching "),h()()(),D(21,"br"),f(22,"span",6)(23,"label")(24,"input",9),A("ngModelChange",function(a){return i.hideTips=a})("input",function(){return i.hideTipsToggle()}),h(),f(25,"span"),g(26,"Hide Tips"),h()()(),D(27,"br"),f(28,"span",6)(29,"label")(30,"input",10),A("ngModelChange",function(a){return i.useNumbersForCircuitRank=a})("input",function(){return i.useNumbersForCircuitRankToggle()}),h(),f(31,"span"),g(32,"Use Numbers For Circuit Rank"),h()()(),D(33,"br"),f(34,"span",6)(35,"label")(36,"input",11),A("ngModelChange",function(a){return i.autoStartEventRace=a})("input",function(){return i.autoStartEventRaceToggle()}),h(),f(37,"span"),g(38,"Auto Start Event Race"),h()()(),D(39,"br"),h(),f(40,"div",12)(41,"label",13),g(42,"Race Display Info:"),h(),f(43,"button",14),g(44),h(),f(45,"div",15)(46,"button",16),A("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.draw)}),g(47,"Draw"),h(),f(48,"button",16),A("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.text)}),g(49,"Text"),h(),f(50,"button",16),A("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.both)}),g(51,"Both"),h()()(),D(52,"br"),f(53,"div",17)(54,"label",13),g(55,"Theme:"),h(),f(56,"button",18),g(57),h(),f(58,"div",19)(59,"button",16),A("click",function(){return i.changeTheme("White")}),g(60,"White"),h(),f(61,"button",16),A("click",function(){return i.changeTheme("Light")}),g(62,"Light"),h(),f(63,"button",16),A("click",function(){return i.changeTheme("Twilight")}),g(64,"Twilight"),h(),f(65,"button",16),A("click",function(){return i.changeTheme("Night")}),g(66,"Night"),h()()()(),f(67,"div",20)(68,"span",4),g(69,"Save/Load"),h(),D(70,"br"),f(71,"div",21)(72,"textarea",22),A("ngModelChange",function(a){return i.importExportValue=a}),h(),f(73,"div",23)(74,"button",24),A("click",function(){return i.LoadGame()}),g(75," Import "),h(),f(76,"button",24),A("click",function(){return i.SaveGame()}),g(77," Export "),h()(),D(78,"br"),f(79,"div",23)(80,"div")(81,"button",24),A("click",function(){return i.LoadGameFromFile()}),g(82," Import from File "),h(),f(83,"input",25),A("change",function(a){return i.fileChanged(a)}),h()(),f(84,"button",24),A("click",function(){return i.SaveGameToFile()}),g(85," Export to File "),h()()(),D(86,"br")(87,"br"),f(88,"div")(89,"span",4),g(90,"Code Redemption"),h(),D(91,"br")(92,"br"),f(93,"div",26)(94,"label",27),g(95,"Code: "),h(),f(96,"input",28),A("ngModelChange",function(a){return i.enteredRedemptionCode=a}),h(),f(97,"button",29),A("click",function(){return i.enterRedemptionCode()}),g(98," Enter "),h()(),D(99,"br"),h()()()()),2&e&&(p(10),b("ngbPopover",i.skipDrawRacePopoverText),p(2),b("ngModel",i.skipDrawRace),p(4),b("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),p(2),b("ngModel",i.finishTrainingBeforeSwitching),p(4),b("ngbPopover",i.hideTipsPopoverText),p(2),b("ngModel",i.hideTips),p(4),b("ngbPopover",i.useNumbersForCircuitRankPopoverText),p(2),b("ngModel",i.useNumbersForCircuitRank),p(4),b("ngbPopover",i.autoStartEventRacePopoverText),p(2),b("ngModel",i.autoStartEventRace),p(4),b("ngbPopover",i.raceDisplayInfoPopoverText),p(4),et(i.raceDisplayInfo),p(13),et(i.currentTheme),p(15),b("ngModel",i.importExportValue),p(24),b("ngModel",i.enteredRedemptionCode))},directives:[Zr,uu,Ds,Rs,nc,L0,Uf,B0,es],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:". options saveLoad .";background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}@media (max-width: 800px){.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:". options ." ". saveLoad ."}}']}),t})();function V$(t,n){if(1&t){const e=de();f(0,"div",12),A("click",function(){return N(e),y().getNewTip()}),f(1,"span"),g(2),h()()}if(2&t){const e=y();p(2),Wi("",e.displayingFunFact?"Fun Fact: ":"Tip: ","",e.randomTip,"")}}let O$=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a,this.utilityService=o,this.displayingFunFact=!1,this.lastDisplayedFunFact=!1}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=Vr(function*(r){if(e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&e.displayTip){e.totalTime=0;var a=e.utilityService.getRandomInteger(1,4);a<=3||e.lastDisplayedFunFact?(e.displayingFunFact=!1,e.lastDisplayedFunFact=!1,e.randomTip=e.lookupService.getRandomTip()):4===a&&(e.displayingFunFact=!0,e.lastDisplayedFunFact=!0,e.randomTip=e.lookupService.getRandomFunFact())}});return function(r){return i.apply(this,arguments)}}())}getNewTip(){this.totalTime=0;var e=this.utilityService.getRandomInteger(1,4);e<=3||this.lastDisplayedFunFact?(this.displayingFunFact=!1,this.lastDisplayedFunFact=!1,this.randomTip=this.lookupService.getRandomTip()):4===e&&(this.displayingFunFact=!0,this.lastDisplayedFunFact=!0,this.randomTip=this.lookupService.getRandomFunFact())}openFAQs(){this.componentCommunicationService.setNewView(Tt.faqs)}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Bn),E(Di),E(mn),E(Fn))},t.\u0275cmp=bt({type:t,selectors:[["app-footer"]],decls:25,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword tips",3,"click",4,"ngIf"],[1,"area3","keyword","rightAlign"],[1,"faqs",3,"click"],["href","https://discord.gg/TgbRXsXQF3","rel","noopener noreferrer","target","_blank"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],["href","https://www.buymeacoffee.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],["href","https://www.patreon.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],[1,"area2","keyword","tips",3,"click"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),D(3,"span"),h(),x(4,V$,3,2,"div",3),f(5,"div",4)(6,"span")(7,"span",5),A("click",function(){return i.openFAQs()}),g(8,"FAQs"),h(),g(9," | "),f(10,"a",6),g(11,"Discord"),h(),g(12," | "),f(13,"a",7),g(14,"Reddit"),h(),g(15," | "),f(16,"a",8),g(17,"Email"),h()()(),f(18,"div",9)(19,"span")(20,"a",10),g(21,"Donate"),h(),g(22," | "),f(23,"a",11),g(24,"Patreon"),h()()()()()),2&e&&(p(4),b("ngIf",i.displayTip))},directives:[hi],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%], .faqs[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.faqs[_ngcontent-%COMP%]{cursor:pointer}.faqs[_ngcontent-%COMP%]:hover{text-decoration:underline}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 0% 1fr 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". . . area3 ." ". . . area4 ."}.tips[_ngcontent-%COMP%]{display:none}}']}),t})();const N$=["tutorialContent"],F$=["eventLoadingContent"];function B$(t,n){1&t&&(f(0,"div",19),D(1,"app-barn-view"),h())}function L$(t,n){1&t&&(f(0,"div",20),D(1,"app-race-selection-view"),h())}function U$(t,n){1&t&&(f(0,"div",21),D(1,"app-animals-view"),h())}function H$(t,n){1&t&&(f(0,"div",22),D(1,"app-decks-view"),h())}function G$(t,n){1&t&&(f(0,"div",23),D(1,"app-shop-view"),h())}function z$(t,n){1&t&&(f(0,"div",24),D(1,"app-incubator-view"),h())}function j$(t,n){1&t&&(f(0,"div",25),D(1,"app-training-track-view"),h())}function $$(t,n){1&t&&(f(0,"div",26),D(1,"app-faq-view"),h())}function W$(t,n){1&t&&(f(0,"div",27),D(1,"app-stats-view"),h())}function q$(t,n){1&t&&(f(0,"div",28),D(1,"app-resources-view"),h())}function X$(t,n){1&t&&(f(0,"div",29),D(1,"app-settings-view"),h())}function Y$(t,n){if(1&t){const e=de();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Tutorial"),h(),f(4,"button",33),A("click",function(){return N(e),y().closeTutorialModal()}),g(5,"X"),h()(),D(6,"div",34),f(7,"div",35)(8,"span")(9,"button",36),A("click",function(){return N(e),y().skipTutorial()}),g(10,"Skip Tutorial"),h()(),f(11,"span")(12,"button",36),A("click",function(){return N(e),y().continueTutorial()}),g(13,"Continue"),h()()()()}if(2&t){const e=y();p(6),b("innerHTML",e.tutorialText,zt)}}function Q$(t,n){if(1&t){const e=de();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Loading..."),h(),f(4,"button",33),A("click",function(){return N(e),y().closeModals()}),g(5,"X"),h()(),f(6,"div",37),g(7," Grand Prix is calculating offline time. Load times may be long while this finishes. "),h(),f(8,"div",35)(9,"span")(10,"button",36),A("click",function(){return N(e),y().closeModals()}),g(11,"Continue"),h()()()()}}let K$=(()=>{class t{constructor(e,i,r,a,o,s,l){this.ref=e,this.globalService=i,this.modalService=r,this.tutorialService=a,this.componentCommunicationService=o,this.sanitizer=s,this.gameLoopService=l,this.navigationEnum=Tt,this.activeView=Tt.barn,this.loadingScreenDisplayed=!1}ngOnInit(){var e=this;this.openTutorialModal(),this.eventPrixSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=Vr(function*(a){null!=e.globalService.globalVar.eventRaceData&&e.globalService.globalVar.eventRaceData.isCatchingUp&&!e.loadingScreenDisplayed?(e.loadingScreenDisplayed=!0,e.openLoadingModal()):null!=e.globalService.globalVar.eventRaceData&&!e.globalService.globalVar.eventRaceData.isCatchingUp&&e.loadingScreenDisplayed&&(e.loadingScreenDisplayed=!1,e.closeModals())});return function(a){return r.apply(this,arguments)}}());var i=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=Vr(function*(a){e.globalService.globalVar.tutorials.showTutorial&&e.openTutorialModal(),e.globalService.globalVar.tutorials.tutorialCompleted&&i.unsubscribe()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorials.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.tutorials.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(pi.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.tutorials.showTutorial=!1,5===e.id&&(this.globalService.globalVar.tutorials.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(i=>{this.closeTutorialModal()},i=>{this.closeTutorialModal()}))}}openLoadingModal(){this.modalService.open(this.eventLoadingContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeModals()},e=>{this.closeModals()})}closeModals(){this.modalService.dismissAll()}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(E(Wr),E(It),E(ho),E(GD),E(mn),E(Jo),E(Bn))},t.\u0275cmp=bt({type:t,selectors:[["app-main"]],viewQuery:function(e,i){if(1&e&&(Pa(N$,7),Pa(F$,7)),2&e){let r;xi(r=ki())&&(i.tutorialContent=r.first),xi(r=ki())&&(i.eventLoadingContent=r.first)}},decls:23,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TrainingTrackView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["eventLoadingContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TrainingTrackView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"],[1,"modal-body"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1),D(2,"app-header"),h(),f(3,"div",2),x(4,B$,2,0,"div",3),x(5,L$,2,0,"div",4),x(6,U$,2,0,"div",5),x(7,H$,2,0,"div",6),x(8,G$,2,0,"div",7),x(9,z$,2,0,"div",8),x(10,j$,2,0,"div",9),x(11,$$,2,0,"div",10),x(12,W$,2,0,"div",11),x(13,q$,2,0,"div",12),x(14,X$,2,0,"div",13),h(),f(15,"div",14)(16,"app-navigation",15),A("viewChanged",function(a){return i.changeView(a)}),h()(),f(17,"div",16),D(18,"app-footer"),h()(),x(19,Y$,14,1,"ng-template",null,17,ht),x(21,Q$,12,0,"ng-template",null,18,ht)),2&e&&(p(4),b("ngIf",i.activeView===i.navigationEnum.barn),p(1),b("ngIf",i.activeView===i.navigationEnum.raceselection),p(1),b("ngIf",i.activeView===i.navigationEnum.animals),p(1),b("ngIf",i.activeView===i.navigationEnum.relayTeams),p(1),b("ngIf",i.activeView===i.navigationEnum.shop),p(1),b("ngIf",i.activeView===i.navigationEnum.incubator),p(1),b("ngIf",i.activeView===i.navigationEnum.trainingtrack),p(1),b("ngIf",i.activeView===i.navigationEnum.faqs),p(1),b("ngIf",i.activeView===i.navigationEnum.stats),p(1),b("ngIf",i.activeView===i.navigationEnum.resources),p(1),b("ngIf",i.activeView===i.navigationEnum.settings))},directives:[dU,hi,G7,bG,nj,fj,Oj,e$,m2,d$,h$,A$,I$,f2,O$],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100%;position:fixed;top:0;left:0;bottom:0;right:0;grid-template-columns:88% 12%;grid-template-rows:auto 1fr auto;justify-content:stretch;grid-template-areas:"header header" "main  main" "footer footer"}.navArea[_ngcontent-%COMP%]{display:none}}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),Z$=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.specializationService=a,this.themeService=o,this.raceLogicService=s,this.deploymentService=l,this.versionControlService=c,this.utilityService=u,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=20,this.racingSaveFrequency=60}ngOnInit(){var e=this,i=localStorage.getItem("culturaIdleGameData");if((null==i||0===i.length)&&(i=localStorage.getItem("gameData")),null!=i){var r=LZString.decompressFromBase64(i),a=JSON.parse(r);null!=a&&(this.newGame=!1,this.globalService.globalVar=p0(an,a),this.loadStartup())}this.deploymentService.setDevMode();var s=this.deploymentService.devModeActive;(this.newGame||this.deploymentService.forceStartNewGame)&&this.globalService.initializeGlobalVariables(),s&&(this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.devModeInitialize(90,4)),this.versionControlService.updatePlayerVersion(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Vr(function*(d){e.gameCheckup(d),e.saveTime+=d;var v=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(v=e.racingSaveFrequency),e.saveTime>=v&&(e.saveTime=0,e.saveGame());performance.now()});return function(d){return u.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(null!=this.globalService.globalVar.animals){this.globalService.globalVar.animals.filter(a=>a.isAvailable).forEach(a=>{a.canTrain=this.lookupService.canAnimalTrain(a)});var i=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining&&a.canTrain);i.length>0&&i.forEach(a=>{var o;if(null!=a.currentTraining&&a.canTrain)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var s=this.globalService.globalVar.barns.find(u=>u.barnNumber===a.associatedBarnNumber),l=0;null!=s&&s.barnUpgrades.specialization===Wt.BreedingGrounds&&(l=s.barnUpgrades.specializationLevel),null!=s&&s.barnUpgrades.specialization===Wt.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,s):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var c=this.lookupService.getTrainingBreedGaugeIncrease(l,a);this.globalService.IncreaseAnimalBreedGauge(a,c),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(o=a.currentTraining)||void 0===o?void 0:o.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleFreeRaceTimer(e),this.handleGrandPrix(e)}}handleGrandPrix(e){var i=!1;if(null!=this.globalService.globalVar.eventRaceData.currentEventEndDate&&new Date>this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1))return i=!0,this.globalService.globalVar.eventRaceData=new qn,void(this.globalService.globalVar.eventRaceData.initialSetupComplete=!1);if(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime&&(i=!0,this.globalService.globalVar.eventRaceData.isCatchingUp&&(i=!1),this.globalService.globalVar.eventRaceData.initialSetupComplete&&(this.globalService.globalVar.eventRaceData.remainingEventRaceTime>0&&new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?(this.globalService.globalVar.eventRaceData.segmentTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime,this.globalService.globalVar.eventRaceData.overallTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime):this.globalService.globalVar.eventRaceData.isCatchingUp||(this.globalService.globalVar.eventRaceData=new qn)),!this.globalService.globalVar.eventRaceData.isCatchingUp&&0===this.globalService.globalVar.eventRaceData.remainingEventRaceTime))this.globalService.globalVar.eventRaceData.initialSetupComplete=!1;else{if(!this.globalService.globalVar.eventRaceData.initialSetupComplete){this.globalService.initialGrandPrixSetup("Z",1),this.globalService.globalVar.eventRaceData.initialSetupComplete=!0,this.globalService.globalVar.notifications.isEventRaceNowActive=!0;var r=this.globalService.getCurrentEventStartEndDateTime(!1);r instanceof Date&&(this.globalService.globalVar.eventRaceData.currentEventStartDate=r);var a=this.globalService.getCurrentEventStartEndDateTime(!0);if(a instanceof Date&&(this.globalService.globalVar.eventRaceData.currentEventEndDate=a),this.globalService.globalVar.settings.get("autoStartEventRace")&&!1===this.globalService.globalVar.eventRaceData.isRunning){var o=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();if(this.globalService.globalVar.eventRaceData.segmentTimeCounter=o,this.globalService.globalVar.eventRaceData.overallTimeCounter=o,null!=(s=this.globalService.getGrandPrixRacingAnimal()).type){if(!this.globalService.globalVar.eventRaceData.animalData.some(v=>v.isCurrentlyRacing)){var l=this.globalService.globalVar.eventRaceData.animalData.find(v=>v.associatedAnimalType==s.type);void 0!==l&&(l.isCurrentlyRacing=!0)}this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(s),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}}}if(this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&this.globalService.increaseGrandPrixRaceRank(),this.globalService.getTimeToEventRace()>0&&this.globalService.globalVar.eventRaceData.bonusTime>0&&(this.globalService.globalVar.eventRaceData.bonusTime-=e,this.globalService.globalVar.eventRaceData.bonusTime<=0&&(this.globalService.globalVar.eventRaceData.bonusTime=0)),this.globalService.globalVar.eventRaceData.isRunning){if(null==this.globalService.globalVar.animalDecks.find(v=>v.isEventDeck))return;i||(this.globalService.globalVar.eventRaceData.segmentTimeCounter+=e,this.globalService.globalVar.eventRaceData.overallTimeCounter+=e),this.globalService.globalVar.eventRaceData.remainingEventRaceTime=new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?0:this.globalService.getRemainingEventRaceTime();var u=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60;if(this.globalService.globalVar.eventRaceData.isCatchingUp=this.globalService.globalVar.eventRaceData.segmentTimeCounter>=2*u&&new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1),this.globalService.globalVar.eventRaceData.segmentTimeCounter>=u)if(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1,this.globalService.globalVar.eventRaceData.segmentTimeCounter-=u,this.globalService.globalVar.eventRaceData.distanceCovered+=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.distanceCovered,this.globalService.globalVar.eventRaceData.previousRaceSegment=this.globalService.globalVar.eventRaceData.currentRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.previousRaceSegment.reduceExportSize(),this.globalService.globalVar.eventRaceData.distanceCovered>=this.globalService.globalVar.eventRaceData.totalDistance)this.globalService.globalVar.eventRaceData.distanceCovered=this.globalService.globalVar.eventRaceData.totalDistance,this.grandPrixRaceCompleted();else{var s;this.checkForEventRelayAnimal(this.globalService.globalVar.eventRaceData.isCatchingUp,this.globalService.globalVar.eventRaceData.segmentTimeCounter)&&this.resetEventAbilityUseCounts(),void 0!==(s=this.globalService.getGrandPrixRacingAnimal()).type&&void 0!==s.name&&(this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.globalVar.eventRaceData.nextRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.nextRaceSegment),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s,this.globalService.globalVar.eventRaceData.isCatchingUp?this.globalService.globalVar.eventRaceData.segmentTimeCounter:void 0))}this.checkForGrandPrixRewards()}else this.globalService.globalVar.eventRaceData.isCatchingUp=!1;this.updateExhaustionAndMorale(e),this.updateWeatherCluster(e)}}grandPrixRaceCompleted(){this.globalService.globalVar.eventRaceData.isGrandPrixCompleted=!0,this.globalService.stopGrandPrixRace()}updateExhaustionAndMorale(e){this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter+=this.globalService.globalVar.eventRaceData.isCatchingUp?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60:e;var i=300,r=this.globalService.globalVar.modifiers.find(l=>"exhaustionGainTimerCapGrandPrixModifier"===l.text);null!=r&&(i=r.value);var a=.02,o=this.globalService.globalVar.modifiers.find(l=>"exhaustionGainGrandPrixModifier"===l.text);null!=o&&(a=o.value);var s=this.globalService.globalVar.eventRaceData.animalData.find(l=>l.isCurrentlyRacing);this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter>i&&(this.globalService.globalVar.eventRaceData.animalData.forEach(l=>{(void 0===s||l.associatedAnimalType!==(null==s?void 0:s.associatedAnimalType))&&(l.exhaustionStatReduction+=a,l.exhaustionStatReduction>=1&&(l.exhaustionStatReduction=1)),l.morale<1&&(l.morale+=a)}),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter-=i)}updateWeatherCluster(e){this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter+=e;var i=7200,r=this.globalService.globalVar.modifiers.find(a=>"weatherClusterTimerCapGrandPrixModifier"===a.text);null!=r&&(i=r.value),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter>i&&(this.globalService.globalVar.eventRaceData.weatherCluster=this.globalService.getRandomGrandPrixWeatherCluster(void 0,this.globalService.globalVar.eventRaceData.weatherCluster),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter-=i)}checkForEventRelayAnimal(e,i){var r=!1;if(this.globalService.globalVar.eventRaceData.animalData.some(R=>R.isSetToRelay))this.globalService.globalVar.eventRaceData.animalData.forEach(R=>{R.isCurrentlyRacing=!1,R.isSetToRelay&&(R.isCurrentlyRacing=!0,R.isSetToRelay=!1,this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,r=!0,this.lookupService.getCourseTypeFromAnimalType(R.associatedAnimalType)===j.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0))});else{var a=this.globalService.getGrandPrixRacingAnimal(),o=this.globalService.getExhaustionOfAnimal(a.type),s=this.lookupService.getBreedLevelRequiredForGrandPrix();if(void 0!==o&&(o<.5||this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay)){this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay=!1;var l=this.globalService.globalVar.animalDecks.find(R=>R.isEventDeck);if(null!=l){var c=[];l.selectedAnimals.forEach(R=>{var L=this.globalService.globalVar.animals.find(W=>W.type===R.type);void 0!==L&&c.push(L)});var u=c.filter(R=>R.breedLevel>=s),d=[];if(l.isCourseOrderActive){for(var v=0;v<u.length;v++)if(l.courseTypeOrder.length>v){var m=l.courseTypeOrder[v],_=u.find(R=>R.raceCourseType===m);void 0!==_&&d.push(_)}}else u.forEach(R=>{d.push(R)});var w=.5;if(this.globalService.globalVar.doNotRelayBelowEnergyFloor&&(w=this.globalService.globalVar.relayEnergyFloor/100),(d=d.filter(R=>{var L=this.globalService.globalVar.eventRaceData.animalData.find(ae=>ae.associatedAnimalType===R.type);if(null!=L){var W=this.globalService.globalVar.animals.find(ae=>ae.type===R.type);return L.exhaustionStatReduction>=w&&!this.globalService.shouldShowSlowSegmentWarning(W)||L.associatedAnimalType===a.type}return!1})).length>1){var S=0,k=!1;if(d.forEach(R=>{R.type===a.type&&(k=!0),k||(S+=1)}),k||(S=-1),this.globalService.globalVar.eventRaceData.animalData.forEach(R=>{R.isCurrentlyRacing=!1}),S>-1){var T=S+1;T===d.length&&(T=0),this.globalService.globalVar.eventRaceData.animalData.forEach(R=>{R.associatedAnimalType===d[T].type&&(R.isCurrentlyRacing=!0,r=!0,this.lookupService.getCourseTypeFromAnimalType(R.associatedAnimalType)===j.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(d[T],e?i:void 0))})}else this.globalService.globalVar.eventRaceData.animalData.forEach(R=>{R.associatedAnimalType===d[0].type&&(R.isCurrentlyRacing=!0,r=!0,this.lookupService.getCourseTypeFromAnimalType(R.associatedAnimalType)===j.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(d[0],e?i:void 0))});this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1}else this.globalService.globalVar.eventRaceData.animalData.forEach(R=>{R.isCurrentlyRacing=!1}),this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalService.globalVar.eventRaceData.isRunning=!1,this.globalService.globalVar.eventRaceData.overallTimeCounter-=this.globalService.globalVar.eventRaceData.segmentTimeCounter,this.globalService.globalVar.eventRaceData.segmentTimeCounter=0,this.globalService.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}}}return r}resetEventAbilityUseCounts(){null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.eventAbilityData||this.globalService.globalVar.eventRaceData.eventAbilityData.resetUseCounts()}checkForGrandPrixRewards(){var e=this.globalService.globalVar.eventRaceData.distanceCovered,i=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,r=100,a=this.globalService.globalVar.modifiers.find(Ct=>"grandPrixCoinRewardModifier"===Ct.text);null!=a&&(r=a.value);var o=5,s=this.globalService.globalVar.modifiers.find(Ct=>"grandPrixRenownRewardModifier"===Ct.text);null!=s&&(o=s.value);var l=5e6,c=this.globalService.globalVar.modifiers.find(Ct=>"metersPerCoinsGrandPrixModifier"===Ct.text);null!=c&&(l=c.value);var u=2e7,d=this.globalService.globalVar.modifiers.find(Ct=>"metersPerRenownGrandPrixModifier"===Ct.text);null!=d&&(u=d.value);var v=5e7,m=this.globalService.globalVar.modifiers.find(Ct=>"grandPrixToken1MeterModifier"===Ct.text);null!=m&&(v=m.value);var _=5e7,w=this.globalService.globalVar.modifiers.find(Ct=>"grandPrixToken2MeterModifier"===Ct.text);null!=w&&(_=w.value);var S=5e7,k=this.globalService.globalVar.modifiers.find(Ct=>"grandPrixToken3MeterModifier"===Ct.text);null!=k&&(S=k.value);var T=5e7,R=this.globalService.globalVar.modifiers.find(Ct=>"grandPrixToken4MeterModifier"===Ct.text);null!=R&&(T=R.value);var L=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),ae=this.globalService.globalVar.eventRaceData.totalDistance/(u*i);if(e>=l*i*(this.globalService.globalVar.eventRaceData.coinRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.coinRewardsObtained<this.globalService.globalVar.eventRaceData.totalDistance/(l*i)&&(this.globalService.globalVar.eventRaceData.coinRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(Ct=>"Coins"===Ct.name))&&(ee.amount+=r),this.lookupService.addResourceToResourceList(new ie("Coins",r,U.Resources),this.globalService.globalVar.previousEventRewards)),e>=u*i*(this.globalService.globalVar.eventRaceData.renownRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.renownRewardsObtained<ae&&(this.globalService.globalVar.eventRaceData.renownRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Renown"===Z.name))&&(ee.amount+=o),this.lookupService.addResourceToResourceList(new ie("Renown",o,U.Progression),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=0&&e>=v*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Tokens"===Z.name))?ee.amount+=1*L:this.globalService.globalVar.resources.push(new ie("Tokens",1*L,U.Resources)),this.lookupService.addResourceToResourceList(new ie("Tokens",1*L,U.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=1&&e>=_*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Tokens"===Z.name))?ee.amount+=2*L:this.globalService.globalVar.resources.push(new ie("Tokens",2*L,U.Resources)),this.lookupService.addResourceToResourceList(new ie("Tokens",2*L,U.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=2&&e>=S*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Tokens"===Z.name))?ee.amount+=3*L:this.globalService.globalVar.resources.push(new ie("Tokens",3*L,U.Resources)),this.lookupService.addResourceToResourceList(new ie("Tokens",3*L,U.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=3&&e>=T*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Tokens"===Z.name))?ee.amount+=4*L:this.globalService.globalVar.resources.push(new ie("Tokens",4*L,U.Resources)),this.lookupService.addResourceToResourceList(new ie("Tokens",4*L,U.Resources),this.globalService.globalVar.previousEventRewards)),1===i){var ee,Qe=100;e>=25e3*i&&0===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Strawberries"===Z.name))?ee.amount+=Qe*i:this.globalService.globalVar.resources.push(new ie("Strawberries",Qe*i,U.Food)),this.lookupService.addResourceToResourceList(new ie("Strawberries",Qe*i,U.Food),this.globalService.globalVar.previousEventRewards)),e>=5e4*i&&1===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Apples"===Z.name))?ee.amount+=Qe*i:this.globalService.globalVar.resources.push(new ie("Apples",Qe*i,U.Food)),this.lookupService.addResourceToResourceList(new ie("Apples",Qe*i,U.Food),this.globalService.globalVar.previousEventRewards)),e>=75e3*i&&2===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Oranges"===Z.name))?ee.amount+=Qe*i:this.globalService.globalVar.resources.push(new ie("Oranges",Qe*i,U.Food)),this.lookupService.addResourceToResourceList(new ie("Oranges",Qe*i,U.Food),this.globalService.globalVar.previousEventRewards)),e>=1e5*i&&3===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Mangoes"===Z.name))?ee.amount+=5*i:this.globalService.globalVar.resources.push(new ie("Mangoes",5*i,U.Food)),this.lookupService.addResourceToResourceList(new ie("Mangoes",5*i,U.Food),this.globalService.globalVar.previousEventRewards)),e>=25e4*i&&4===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Turnips"===Z.name))?ee.amount+=Qe*i:this.globalService.globalVar.resources.push(new ie("Turnips",Qe*i,U.Food)),this.lookupService.addResourceToResourceList(new ie("Turnips",Qe*i,U.Food),this.globalService.globalVar.previousEventRewards)),e>=5e5*i&&5===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Bananas"===Z.name))?ee.amount+=Qe*i:this.globalService.globalVar.resources.push(new ie("Bananas",Qe*i,U.Food)),this.lookupService.addResourceToResourceList(new ie("Bananas",Qe*i,U.Food),this.globalService.globalVar.previousEventRewards)),e>=75e4*i&&6===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Carrots"===Z.name))?ee.amount+=Qe*i:this.globalService.globalVar.resources.push(new ie("Carrots",Qe*i,U.Food)),this.lookupService.addResourceToResourceList(new ie("Carrots",Qe*i,U.Food),this.globalService.globalVar.previousEventRewards)),e>=1e6*i&&7===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ee=this.globalService.globalVar.resources.find(Z=>"Mangoes"===Z.name))?ee.amount+=10*i:this.globalService.globalVar.resources.push(new ie("Mangoes",10*i,U.Food)),this.lookupService.addResourceToResourceList(new ie("Mangoes",10*i,U.Food),this.globalService.globalVar.previousEventRewards))}}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var i=300,r=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==r&&(i=r.value);var a=3600,o=this.globalService.globalVar.modifiers.find(s=>"autoFreeRacesMaxIdleTimePeriodModifier"===s.text);for(void 0!==o&&(a=o.value);this.globalService.globalVar.freeRaceTimePeriodCounter>=i&&a>0;)this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=i,a-=i,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0,this.handleAutoFreeRace(e)}}handleAutoFreeRace(e){var i=this.lookupService.getResourceByName("Team Manager");if(null==i&&(i=0),0!==i&&this.globalService.globalVar.animalDecks.some(d=>d.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(d=>d.autoRunFreeRace);if(null!=r)for(var a=i-this.globalService.globalVar.autoFreeRaceCounter,o=this.lookupService.getTotalFreeRacesPerPeriod(),s=0;s<a;s++){if(this.globalService.globalVar.freeRaceCounter>=o)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var l=this.globalService.generateFreeRace(),c=!0;l.raceLegs.forEach(d=>{(null==r?void 0:r.selectedAnimals.some(v=>v.raceCourseType===d.courseType))||(c=!1)}),c&&this.raceLogicService.runRace(l,!0)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(Y.tu(new URL(Y.p+Y.u(151),Y.b)));r.onmessage=({data:a})=>{localStorage.setItem("culturaIdleGameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);localStorage.setItem("culturaIdleGameData",i)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(E(It),E(Bn),E(Di),E(g0),E(ql),E(v0),E(HD),E(m0),E(Fn))},t.\u0275cmp=bt({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,i){1&e&&(f(0,"div",0),D(1,"app-main"),h(),D(2,"router-outlet"))},directives:[K$,qm],styles:[""]}),t})(),J$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fi({type:t,bootstrap:[Z$]}),t.\u0275inj=Ai({providers:[It,ql],imports:[[cF,O5,aU,Ir,xT,C3]]}),t})();(function HV(){OC=!1})(),sF().bootstrapModule(J$).catch(t=>console.error(t))},7466:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(8319),Y(9493),Y(7865),Y(3057),function(){var z=Q,le=z.lib.BlockCipher,ve=z.algo,J=[],re=[],V=[],M=[],F=[],I=[],O=[],P=[],B=[],$=[];!function(){for(var G=[],q=0;q<256;q++)G[q]=q<128?q<<1:q<<1^283;var pe=0,ne=0;for(q=0;q<256;q++){var ue=ne^ne<<1^ne<<2^ne<<3^ne<<4;J[pe]=ue=ue>>>8^255&ue^99,re[ue]=pe;var Ne,fe=G[pe],Re=G[fe],Ce=G[Re];V[pe]=(Ne=257*G[ue]^16843008*ue)<<24|Ne>>>8,M[pe]=Ne<<16|Ne>>>16,F[pe]=Ne<<8|Ne>>>24,I[pe]=Ne,O[ue]=(Ne=16843009*Ce^65537*Re^257*fe^16843008*pe)<<24|Ne>>>8,P[ue]=Ne<<16|Ne>>>16,B[ue]=Ne<<8|Ne>>>24,$[ue]=Ne,pe?(pe=fe^G[G[G[Ce^fe]]],ne^=G[G[ne]]):pe=ne=1}}();var ce=[0,1,2,4,8,16,32,64,128,27,54],se=ve.AES=le.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var q=this._keyPriorReset=this._key,pe=q.words,ne=q.sigBytes/4,fe=4*((this._nRounds=ne+6)+1),Re=this._keySchedule=[],Ce=0;Ce<fe;Ce++)Ce<ne?Re[Ce]=pe[Ce]:(G=Re[Ce-1],Ce%ne?ne>6&&Ce%ne==4&&(G=J[G>>>24]<<24|J[G>>>16&255]<<16|J[G>>>8&255]<<8|J[255&G]):(G=J[(G=G<<8|G>>>24)>>>24]<<24|J[G>>>16&255]<<16|J[G>>>8&255]<<8|J[255&G],G^=ce[Ce/ne|0]<<24),Re[Ce]=Re[Ce-ne]^G);for(var Ne=this._invKeySchedule=[],He=0;He<fe;He++){if(Ce=fe-He,He%4)var G=Re[Ce];else G=Re[Ce-4];Ne[He]=He<4||Ce<=4?G:O[J[G>>>24]]^P[J[G>>>16&255]]^B[J[G>>>8&255]]^$[J[255&G]]}}},encryptBlock:function(G,q){this._doCryptBlock(G,q,this._keySchedule,V,M,F,I,J)},decryptBlock:function(G,q){var pe=G[q+1];G[q+1]=G[q+3],G[q+3]=pe,this._doCryptBlock(G,q,this._invKeySchedule,O,P,B,$,re),pe=G[q+1],G[q+1]=G[q+3],G[q+3]=pe},_doCryptBlock:function(G,q,pe,ne,ue,fe,Re,Ce){for(var Ne=this._nRounds,He=G[q]^pe[0],me=G[q+1]^pe[1],Pe=G[q+2]^pe[2],Be=G[q+3]^pe[3],Ee=4,vt=1;vt<Ne;vt++){var Le=ne[He>>>24]^ue[me>>>16&255]^fe[Pe>>>8&255]^Re[255&Be]^pe[Ee++],qt=ne[me>>>24]^ue[Pe>>>16&255]^fe[Be>>>8&255]^Re[255&He]^pe[Ee++],ui=ne[Pe>>>24]^ue[Be>>>16&255]^fe[He>>>8&255]^Re[255&me]^pe[Ee++],Te=ne[Be>>>24]^ue[He>>>16&255]^fe[me>>>8&255]^Re[255&Pe]^pe[Ee++];He=Le,me=qt,Pe=ui,Be=Te}Le=(Ce[He>>>24]<<24|Ce[me>>>16&255]<<16|Ce[Pe>>>8&255]<<8|Ce[255&Be])^pe[Ee++],qt=(Ce[me>>>24]<<24|Ce[Pe>>>16&255]<<16|Ce[Be>>>8&255]<<8|Ce[255&He])^pe[Ee++],ui=(Ce[Pe>>>24]<<24|Ce[Be>>>16&255]<<16|Ce[He>>>8&255]<<8|Ce[255&me])^pe[Ee++],Te=(Ce[Be>>>24]<<24|Ce[He>>>16&255]<<16|Ce[me>>>8&255]<<8|Ce[255&Pe])^pe[Ee++],G[q]=Le,G[q+1]=qt,G[q+2]=ui,G[q+3]=Te},keySize:8});z.AES=le._createHelper(se)}(),Q.AES)},3057:function(Se,ke,Y){var te,le,ve,J,re,V,F,O,P,$,ce,se,q,ne,fe,Re,Ne,He,Q;Se.exports=(Q=Y(7585),Y(7865),void(Q.lib.Cipher||(te=Q,le=te.lib,ve=le.Base,J=le.WordArray,re=le.BufferedBlockAlgorithm,V=te.enc,F=V.Base64,O=te.algo.EvpKDF,P=le.Cipher=re.extend({cfg:ve.extend(),createEncryptor:function(me,Pe){return this.create(this._ENC_XFORM_MODE,me,Pe)},createDecryptor:function(me,Pe){return this.create(this._DEC_XFORM_MODE,me,Pe)},init:function(me,Pe,Be){this.cfg=this.cfg.extend(Be),this._xformMode=me,this._key=Pe,this.reset()},reset:function(){re.reset.call(this),this._doReset()},process:function(me){return this._append(me),this._process()},finalize:function(me){return me&&this._append(me),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function me(Pe){return"string"==typeof Pe?He:Re}return function(Pe){return{encrypt:function(Be,Ee,vt){return me(Ee).encrypt(Pe,Be,Ee,vt)},decrypt:function(Be,Ee,vt){return me(Ee).decrypt(Pe,Be,Ee,vt)}}}}()}),le.StreamCipher=P.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),$=te.mode={},ce=le.BlockCipherMode=ve.extend({createEncryptor:function(me,Pe){return this.Encryptor.create(me,Pe)},createDecryptor:function(me,Pe){return this.Decryptor.create(me,Pe)},init:function(me,Pe){this._cipher=me,this._iv=Pe}}),se=$.CBC=function(){var me=ce.extend();function Pe(Be,Ee,vt){var Le,qt=this._iv;qt?(Le=qt,this._iv=undefined):Le=this._prevBlock;for(var ui=0;ui<vt;ui++)Be[Ee+ui]^=Le[ui]}return me.Encryptor=me.extend({processBlock:function(Be,Ee){var vt=this._cipher,Le=vt.blockSize;Pe.call(this,Be,Ee,Le),vt.encryptBlock(Be,Ee),this._prevBlock=Be.slice(Ee,Ee+Le)}}),me.Decryptor=me.extend({processBlock:function(Be,Ee){var vt=this._cipher,Le=vt.blockSize,qt=Be.slice(Ee,Ee+Le);vt.decryptBlock(Be,Ee),Pe.call(this,Be,Ee,Le),this._prevBlock=qt}}),me}(),q=(te.pad={}).Pkcs7={pad:function(me,Pe){for(var Be=4*Pe,Ee=Be-me.sigBytes%Be,vt=Ee<<24|Ee<<16|Ee<<8|Ee,Le=[],qt=0;qt<Ee;qt+=4)Le.push(vt);var ui=J.create(Le,Ee);me.concat(ui)},unpad:function(me){me.sigBytes-=255&me.words[me.sigBytes-1>>>2]}},le.BlockCipher=P.extend({cfg:P.cfg.extend({mode:se,padding:q}),reset:function(){var me;P.reset.call(this);var Pe=this.cfg,Be=Pe.iv,Ee=Pe.mode;this._xformMode==this._ENC_XFORM_MODE?me=Ee.createEncryptor:(me=Ee.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==me?this._mode.init(this,Be&&Be.words):(this._mode=me.call(Ee,this,Be&&Be.words),this._mode.__creator=me)},_doProcessBlock:function(me,Pe){this._mode.processBlock(me,Pe)},_doFinalize:function(){var me,Pe=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Pe.pad(this._data,this.blockSize),me=this._process(!0)):(me=this._process(!0),Pe.unpad(me)),me},blockSize:4}),ne=le.CipherParams=ve.extend({init:function(me){this.mixIn(me)},toString:function(me){return(me||this.formatter).stringify(this)}}),fe=(te.format={}).OpenSSL={stringify:function(me){var Be=me.ciphertext,Ee=me.salt;return(Ee?J.create([1398893684,1701076831]).concat(Ee).concat(Be):Be).toString(F)},parse:function(me){var Pe,Be=F.parse(me),Ee=Be.words;return 1398893684==Ee[0]&&1701076831==Ee[1]&&(Pe=J.create(Ee.slice(2,4)),Ee.splice(0,4),Be.sigBytes-=16),ne.create({ciphertext:Be,salt:Pe})}},Re=le.SerializableCipher=ve.extend({cfg:ve.extend({format:fe}),encrypt:function(me,Pe,Be,Ee){Ee=this.cfg.extend(Ee);var vt=me.createEncryptor(Be,Ee),Le=vt.finalize(Pe),qt=vt.cfg;return ne.create({ciphertext:Le,key:Be,iv:qt.iv,algorithm:me,mode:qt.mode,padding:qt.padding,blockSize:me.blockSize,formatter:Ee.format})},decrypt:function(me,Pe,Be,Ee){return Ee=this.cfg.extend(Ee),Pe=this._parse(Pe,Ee.format),me.createDecryptor(Be,Ee).finalize(Pe.ciphertext)},_parse:function(me,Pe){return"string"==typeof me?Pe.parse(me,this):me}}),Ne=(te.kdf={}).OpenSSL={execute:function(me,Pe,Be,Ee){Ee||(Ee=J.random(8));var vt=O.create({keySize:Pe+Be}).compute(me,Ee),Le=J.create(vt.words.slice(Pe),4*Be);return vt.sigBytes=4*Pe,ne.create({key:vt,iv:Le,salt:Ee})}},He=le.PasswordBasedCipher=Re.extend({cfg:Re.cfg.extend({kdf:Ne}),encrypt:function(me,Pe,Be,Ee){var vt=(Ee=this.cfg.extend(Ee)).kdf.execute(Be,me.keySize,me.ivSize);Ee.iv=vt.iv;var Le=Re.encrypt.call(this,me,Pe,vt.key,Ee);return Le.mixIn(vt),Le},decrypt:function(me,Pe,Be,Ee){Ee=this.cfg.extend(Ee),Pe=this._parse(Pe,Ee.format);var vt=Ee.kdf.execute(Be,me.keySize,me.ivSize,Pe.salt);return Ee.iv=vt.iv,Re.decrypt.call(this,me,Pe,vt.key,Ee)}}))))},7585:function(Se,ke,Y){var Q;Se.exports=(Q=Q||function(z,te){var le;if("undefined"!=typeof window&&window.crypto&&(le=window.crypto),"undefined"!=typeof self&&self.crypto&&(le=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(le=globalThis.crypto),!le&&"undefined"!=typeof window&&window.msCrypto&&(le=window.msCrypto),!le&&"undefined"!=typeof global&&global.crypto&&(le=global.crypto),!le)try{le=Y(2480)}catch(G){}var ve=function(){if(le){if("function"==typeof le.getRandomValues)try{return le.getRandomValues(new Uint32Array(1))[0]}catch(G){}if("function"==typeof le.randomBytes)try{return le.randomBytes(4).readInt32LE()}catch(G){}}throw new Error("Native crypto module could not be used to get secure random number.")},J=Object.create||function(){function G(){}return function(q){var pe;return G.prototype=q,pe=new G,G.prototype=null,pe}}(),re={},V=re.lib={},M=V.Base={extend:function(G){var q=J(this);return G&&q.mixIn(G),(!q.hasOwnProperty("init")||this.init===q.init)&&(q.init=function(){q.$super.init.apply(this,arguments)}),q.init.prototype=q,q.$super=this,q},create:function(){var G=this.extend();return G.init.apply(G,arguments),G},init:function(){},mixIn:function(G){for(var q in G)G.hasOwnProperty(q)&&(this[q]=G[q]);G.hasOwnProperty("toString")&&(this.toString=G.toString)},clone:function(){return this.init.prototype.extend(this)}},F=V.WordArray=M.extend({init:function(G,q){G=this.words=G||[],this.sigBytes=null!=q?q:4*G.length},toString:function(G){return(G||O).stringify(this)},concat:function(G){var q=this.words,pe=G.words,ne=this.sigBytes,ue=G.sigBytes;if(this.clamp(),ne%4)for(var fe=0;fe<ue;fe++)q[ne+fe>>>2]|=(pe[fe>>>2]>>>24-fe%4*8&255)<<24-(ne+fe)%4*8;else for(var Ce=0;Ce<ue;Ce+=4)q[ne+Ce>>>2]=pe[Ce>>>2];return this.sigBytes+=ue,this},clamp:function(){var G=this.words,q=this.sigBytes;G[q>>>2]&=4294967295<<32-q%4*8,G.length=z.ceil(q/4)},clone:function(){var G=M.clone.call(this);return G.words=this.words.slice(0),G},random:function(G){for(var q=[],pe=0;pe<G;pe+=4)q.push(ve());return new F.init(q,G)}}),I=re.enc={},O=I.Hex={stringify:function(G){for(var q=G.words,pe=G.sigBytes,ne=[],ue=0;ue<pe;ue++){var fe=q[ue>>>2]>>>24-ue%4*8&255;ne.push((fe>>>4).toString(16)),ne.push((15&fe).toString(16))}return ne.join("")},parse:function(G){for(var q=G.length,pe=[],ne=0;ne<q;ne+=2)pe[ne>>>3]|=parseInt(G.substr(ne,2),16)<<24-ne%8*4;return new F.init(pe,q/2)}},P=I.Latin1={stringify:function(G){for(var q=G.words,pe=G.sigBytes,ne=[],ue=0;ue<pe;ue++)ne.push(String.fromCharCode(q[ue>>>2]>>>24-ue%4*8&255));return ne.join("")},parse:function(G){for(var q=G.length,pe=[],ne=0;ne<q;ne++)pe[ne>>>2]|=(255&G.charCodeAt(ne))<<24-ne%4*8;return new F.init(pe,q)}},B=I.Utf8={stringify:function(G){try{return decodeURIComponent(escape(P.stringify(G)))}catch(q){throw new Error("Malformed UTF-8 data")}},parse:function(G){return P.parse(unescape(encodeURIComponent(G)))}},$=V.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new F.init,this._nDataBytes=0},_append:function(G){"string"==typeof G&&(G=B.parse(G)),this._data.concat(G),this._nDataBytes+=G.sigBytes},_process:function(G){var q,pe=this._data,ne=pe.words,ue=pe.sigBytes,fe=this.blockSize,Ce=ue/(4*fe),Ne=(Ce=G?z.ceil(Ce):z.max((0|Ce)-this._minBufferSize,0))*fe,He=z.min(4*Ne,ue);if(Ne){for(var me=0;me<Ne;me+=fe)this._doProcessBlock(ne,me);q=ne.splice(0,Ne),pe.sigBytes-=He}return new F.init(q,He)},clone:function(){var G=M.clone.call(this);return G._data=this._data.clone(),G},_minBufferSize:0}),se=(V.Hasher=$.extend({cfg:M.extend(),init:function(G){this.cfg=this.cfg.extend(G),this.reset()},reset:function(){$.reset.call(this),this._doReset()},update:function(G){return this._append(G),this._process(),this},finalize:function(G){return G&&this._append(G),this._doFinalize()},blockSize:16,_createHelper:function(G){return function(q,pe){return new G.init(pe).finalize(q)}},_createHmacHelper:function(G){return function(q,pe){return new se.HMAC.init(G,pe).finalize(q)}}}),re.algo={});return re}(Math),Q)},8319:function(Se,ke,Y){var Q,le;Se.exports=(Q=Y(7585),le=Q.lib.WordArray,Q.enc.Base64={stringify:function(V){var M=V.words,F=V.sigBytes,I=this._map;V.clamp();for(var O=[],P=0;P<F;P+=3)for(var se=(M[P>>>2]>>>24-P%4*8&255)<<16|(M[P+1>>>2]>>>24-(P+1)%4*8&255)<<8|M[P+2>>>2]>>>24-(P+2)%4*8&255,G=0;G<4&&P+.75*G<F;G++)O.push(I.charAt(se>>>6*(3-G)&63));var q=I.charAt(64);if(q)for(;O.length%4;)O.push(q);return O.join("")},parse:function(V){var M=V.length,F=this._map,I=this._reverseMap;if(!I){I=this._reverseMap=[];for(var O=0;O<F.length;O++)I[F.charCodeAt(O)]=O}var P=F.charAt(64);if(P){var B=V.indexOf(P);-1!==B&&(M=B)}return function re(V,M,F){for(var I=[],O=0,P=0;P<M;P++)if(P%4){var B=F[V.charCodeAt(P-1)]<<P%4*2,$=F[V.charCodeAt(P)]>>>6-P%4*2;I[O>>>2]|=(B|$)<<24-O%4*8,O++}return le.create(I,O)}(V,M,I)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},Q.enc.Base64)},4410:function(Se,ke,Y){var Q,le;Se.exports=(Q=Y(7585),le=Q.lib.WordArray,Q.enc.Base64url={stringify:function(V,M=!0){var F=V.words,I=V.sigBytes,O=M?this._safe_map:this._map;V.clamp();for(var P=[],B=0;B<I;B+=3)for(var G=(F[B>>>2]>>>24-B%4*8&255)<<16|(F[B+1>>>2]>>>24-(B+1)%4*8&255)<<8|F[B+2>>>2]>>>24-(B+2)%4*8&255,q=0;q<4&&B+.75*q<I;q++)P.push(O.charAt(G>>>6*(3-q)&63));var pe=O.charAt(64);if(pe)for(;P.length%4;)P.push(pe);return P.join("")},parse:function(V,M=!0){var F=V.length,I=M?this._safe_map:this._map,O=this._reverseMap;if(!O){O=this._reverseMap=[];for(var P=0;P<I.length;P++)O[I.charCodeAt(P)]=P}var B=I.charAt(64);if(B){var $=V.indexOf(B);-1!==$&&(F=$)}return function re(V,M,F){for(var I=[],O=0,P=0;P<M;P++)if(P%4){var B=F[V.charCodeAt(P-1)]<<P%4*2,$=F[V.charCodeAt(P)]>>>6-P%4*2;I[O>>>2]|=(B|$)<<24-O%4*8,O++}return le.create(I,O)}(V,F,O)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},Q.enc.Base64url)},9012:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),function(){var le=Q.lib.WordArray,ve=Q.enc;function re(V){return V<<8&4278255360|V>>>8&16711935}ve.Utf16=ve.Utf16BE={stringify:function(V){for(var M=V.words,F=V.sigBytes,I=[],O=0;O<F;O+=2)I.push(String.fromCharCode(M[O>>>2]>>>16-O%4*8&65535));return I.join("")},parse:function(V){for(var M=V.length,F=[],I=0;I<M;I++)F[I>>>1]|=V.charCodeAt(I)<<16-I%2*16;return le.create(F,2*M)}},ve.Utf16LE={stringify:function(V){for(var M=V.words,F=V.sigBytes,I=[],O=0;O<F;O+=2){var P=re(M[O>>>2]>>>16-O%4*8&65535);I.push(String.fromCharCode(P))}return I.join("")},parse:function(V){for(var M=V.length,F=[],I=0;I<M;I++)F[I>>>1]|=re(V.charCodeAt(I)<<16-I%2*16);return le.create(F,2*M)}}}(),Q.enc.Utf16)},7865:function(Se,ke,Y){var z,te,le,ve,J,V,Q;Se.exports=(Q=Y(7585),Y(5162),Y(3764),ve=(te=(z=Q).lib).WordArray,V=(J=z.algo).EvpKDF=(le=te.Base).extend({cfg:le.extend({keySize:4,hasher:J.MD5,iterations:1}),init:function(M){this.cfg=this.cfg.extend(M)},compute:function(M,F){for(var I,O=this.cfg,P=O.hasher.create(),B=ve.create(),$=B.words,ce=O.keySize,se=O.iterations;$.length<ce;){I&&P.update(I),I=P.update(M).finalize(F),P.reset();for(var G=1;G<se;G++)I=P.finalize(I),P.reset();B.concat(I)}return B.sigBytes=4*ce,B}}),z.EvpKDF=function(M,F,I){return V.create(I).compute(M,F)},Q.EvpKDF)},1847:function(Se,ke,Y){var Q,ve,re;Se.exports=(Q=Y(7585),Y(3057),ve=Q.lib.CipherParams,re=Q.enc.Hex,Q.format.Hex={stringify:function(F){return F.ciphertext.toString(re)},parse:function(F){var I=re.parse(F);return ve.create({ciphertext:I})}},Q.format.Hex)},3764:function(Se,ke,Y){var Q,J;Se.exports=(Q=Y(7585),J=Q.enc.Utf8,void(Q.algo.HMAC=Q.lib.Base.extend({init:function(M,F){M=this._hasher=new M.init,"string"==typeof F&&(F=J.parse(F));var I=M.blockSize,O=4*I;F.sigBytes>O&&(F=M.finalize(F)),F.clamp();for(var P=this._oKey=F.clone(),B=this._iKey=F.clone(),$=P.words,ce=B.words,se=0;se<I;se++)$[se]^=1549556828,ce[se]^=909522486;P.sigBytes=B.sigBytes=O,this.reset()},reset:function(){var M=this._hasher;M.reset(),M.update(this._iKey)},update:function(M){return this._hasher.update(M),this},finalize:function(M){var F=this._hasher,I=F.finalize(M);return F.reset(),F.finalize(this._oKey.clone().concat(I))}})))},7206:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(401),Y(7412),Y(9012),Y(8319),Y(4410),Y(9493),Y(5162),Y(1817),Y(8769),Y(3351),Y(6787),Y(1971),Y(4973),Y(3764),Y(8812),Y(7865),Y(3057),Y(4424),Y(6635),Y(3592),Y(9354),Y(7934),Y(4413),Y(4630),Y(187),Y(1691),Y(3237),Y(1847),Y(7466),Y(7243),Y(486),Y(8182),Y(3544),Q)},7412:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),function(){if("function"==typeof ArrayBuffer){var le=Q.lib.WordArray,ve=le.init,J=le.init=function(re){if(re instanceof ArrayBuffer&&(re=new Uint8Array(re)),(re instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&re instanceof Uint8ClampedArray||re instanceof Int16Array||re instanceof Uint16Array||re instanceof Int32Array||re instanceof Uint32Array||re instanceof Float32Array||re instanceof Float64Array)&&(re=new Uint8Array(re.buffer,re.byteOffset,re.byteLength)),re instanceof Uint8Array){for(var V=re.byteLength,M=[],F=0;F<V;F++)M[F>>>2]|=re[F]<<24-F%4*8;ve.call(this,M,V)}else ve.apply(this,arguments)};J.prototype=le}}(),Q.lib.WordArray)},9493:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),function(z){var te=Q,le=te.lib,ve=le.WordArray,J=le.Hasher,re=te.algo,V=[];!function(){for(var B=0;B<64;B++)V[B]=4294967296*z.abs(z.sin(B+1))|0}();var M=re.MD5=J.extend({_doReset:function(){this._hash=new ve.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(B,$){for(var ce=0;ce<16;ce++){var se=$+ce,G=B[se];B[se]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8)}var q=this._hash.words,pe=B[$+0],ne=B[$+1],ue=B[$+2],fe=B[$+3],Re=B[$+4],Ce=B[$+5],Ne=B[$+6],He=B[$+7],me=B[$+8],Pe=B[$+9],Be=B[$+10],Ee=B[$+11],vt=B[$+12],Le=B[$+13],qt=B[$+14],ui=B[$+15],Te=q[0],Oe=q[1],ye=q[2],Ae=q[3];Te=F(Te,Oe,ye,Ae,pe,7,V[0]),Ae=F(Ae,Te,Oe,ye,ne,12,V[1]),ye=F(ye,Ae,Te,Oe,ue,17,V[2]),Oe=F(Oe,ye,Ae,Te,fe,22,V[3]),Te=F(Te,Oe,ye,Ae,Re,7,V[4]),Ae=F(Ae,Te,Oe,ye,Ce,12,V[5]),ye=F(ye,Ae,Te,Oe,Ne,17,V[6]),Oe=F(Oe,ye,Ae,Te,He,22,V[7]),Te=F(Te,Oe,ye,Ae,me,7,V[8]),Ae=F(Ae,Te,Oe,ye,Pe,12,V[9]),ye=F(ye,Ae,Te,Oe,Be,17,V[10]),Oe=F(Oe,ye,Ae,Te,Ee,22,V[11]),Te=F(Te,Oe,ye,Ae,vt,7,V[12]),Ae=F(Ae,Te,Oe,ye,Le,12,V[13]),ye=F(ye,Ae,Te,Oe,qt,17,V[14]),Te=I(Te,Oe=F(Oe,ye,Ae,Te,ui,22,V[15]),ye,Ae,ne,5,V[16]),Ae=I(Ae,Te,Oe,ye,Ne,9,V[17]),ye=I(ye,Ae,Te,Oe,Ee,14,V[18]),Oe=I(Oe,ye,Ae,Te,pe,20,V[19]),Te=I(Te,Oe,ye,Ae,Ce,5,V[20]),Ae=I(Ae,Te,Oe,ye,Be,9,V[21]),ye=I(ye,Ae,Te,Oe,ui,14,V[22]),Oe=I(Oe,ye,Ae,Te,Re,20,V[23]),Te=I(Te,Oe,ye,Ae,Pe,5,V[24]),Ae=I(Ae,Te,Oe,ye,qt,9,V[25]),ye=I(ye,Ae,Te,Oe,fe,14,V[26]),Oe=I(Oe,ye,Ae,Te,me,20,V[27]),Te=I(Te,Oe,ye,Ae,Le,5,V[28]),Ae=I(Ae,Te,Oe,ye,ue,9,V[29]),ye=I(ye,Ae,Te,Oe,He,14,V[30]),Te=O(Te,Oe=I(Oe,ye,Ae,Te,vt,20,V[31]),ye,Ae,Ce,4,V[32]),Ae=O(Ae,Te,Oe,ye,me,11,V[33]),ye=O(ye,Ae,Te,Oe,Ee,16,V[34]),Oe=O(Oe,ye,Ae,Te,qt,23,V[35]),Te=O(Te,Oe,ye,Ae,ne,4,V[36]),Ae=O(Ae,Te,Oe,ye,Re,11,V[37]),ye=O(ye,Ae,Te,Oe,He,16,V[38]),Oe=O(Oe,ye,Ae,Te,Be,23,V[39]),Te=O(Te,Oe,ye,Ae,Le,4,V[40]),Ae=O(Ae,Te,Oe,ye,pe,11,V[41]),ye=O(ye,Ae,Te,Oe,fe,16,V[42]),Oe=O(Oe,ye,Ae,Te,Ne,23,V[43]),Te=O(Te,Oe,ye,Ae,Pe,4,V[44]),Ae=O(Ae,Te,Oe,ye,vt,11,V[45]),ye=O(ye,Ae,Te,Oe,ui,16,V[46]),Te=P(Te,Oe=O(Oe,ye,Ae,Te,ue,23,V[47]),ye,Ae,pe,6,V[48]),Ae=P(Ae,Te,Oe,ye,He,10,V[49]),ye=P(ye,Ae,Te,Oe,qt,15,V[50]),Oe=P(Oe,ye,Ae,Te,Ce,21,V[51]),Te=P(Te,Oe,ye,Ae,vt,6,V[52]),Ae=P(Ae,Te,Oe,ye,fe,10,V[53]),ye=P(ye,Ae,Te,Oe,Be,15,V[54]),Oe=P(Oe,ye,Ae,Te,ne,21,V[55]),Te=P(Te,Oe,ye,Ae,me,6,V[56]),Ae=P(Ae,Te,Oe,ye,ui,10,V[57]),ye=P(ye,Ae,Te,Oe,Ne,15,V[58]),Oe=P(Oe,ye,Ae,Te,Le,21,V[59]),Te=P(Te,Oe,ye,Ae,Re,6,V[60]),Ae=P(Ae,Te,Oe,ye,Ee,10,V[61]),ye=P(ye,Ae,Te,Oe,ue,15,V[62]),Oe=P(Oe,ye,Ae,Te,Pe,21,V[63]),q[0]=q[0]+Te|0,q[1]=q[1]+Oe|0,q[2]=q[2]+ye|0,q[3]=q[3]+Ae|0},_doFinalize:function(){var B=this._data,$=B.words,ce=8*this._nDataBytes,se=8*B.sigBytes;$[se>>>5]|=128<<24-se%32;var G=z.floor(ce/4294967296),q=ce;$[15+(se+64>>>9<<4)]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8),$[14+(se+64>>>9<<4)]=16711935&(q<<8|q>>>24)|4278255360&(q<<24|q>>>8),B.sigBytes=4*($.length+1),this._process();for(var pe=this._hash,ne=pe.words,ue=0;ue<4;ue++){var fe=ne[ue];ne[ue]=16711935&(fe<<8|fe>>>24)|4278255360&(fe<<24|fe>>>8)}return pe},clone:function(){var B=J.clone.call(this);return B._hash=this._hash.clone(),B}});function F(B,$,ce,se,G,q,pe){var ne=B+($&ce|~$&se)+G+pe;return(ne<<q|ne>>>32-q)+$}function I(B,$,ce,se,G,q,pe){var ne=B+($&se|ce&~se)+G+pe;return(ne<<q|ne>>>32-q)+$}function O(B,$,ce,se,G,q,pe){var ne=B+($^ce^se)+G+pe;return(ne<<q|ne>>>32-q)+$}function P(B,$,ce,se,G,q,pe){var ne=B+(ce^($|~se))+G+pe;return(ne<<q|ne>>>32-q)+$}te.MD5=J._createHelper(M),te.HmacMD5=J._createHmacHelper(M)}(Math),Q.MD5)},4424:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(3057),Q.mode.CFB=function(){var z=Q.lib.BlockCipherMode.extend();function te(le,ve,J,re){var V,M=this._iv;M?(V=M.slice(0),this._iv=void 0):V=this._prevBlock,re.encryptBlock(V,0);for(var F=0;F<J;F++)le[ve+F]^=V[F]}return z.Encryptor=z.extend({processBlock:function(le,ve){var J=this._cipher,re=J.blockSize;te.call(this,le,ve,re,J),this._prevBlock=le.slice(ve,ve+re)}}),z.Decryptor=z.extend({processBlock:function(le,ve){var J=this._cipher,re=J.blockSize,V=le.slice(ve,ve+re);te.call(this,le,ve,re,J),this._prevBlock=V}}),z}(),Q.mode.CFB)},3592:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(3057),Q.mode.CTRGladman=function(){var z=Q.lib.BlockCipherMode.extend();function te(J){if(255==(J>>24&255)){var re=J>>16&255,V=J>>8&255,M=255&J;255===re?(re=0,255===V?(V=0,255===M?M=0:++M):++V):++re,J=0,J+=re<<16,J+=V<<8,J+=M}else J+=1<<24;return J}var ve=z.Encryptor=z.extend({processBlock:function(J,re){var V=this._cipher,M=V.blockSize,F=this._iv,I=this._counter;F&&(I=this._counter=F.slice(0),this._iv=void 0),function le(J){return 0===(J[0]=te(J[0]))&&(J[1]=te(J[1])),J}(I);var O=I.slice(0);V.encryptBlock(O,0);for(var P=0;P<M;P++)J[re+P]^=O[P]}});return z.Decryptor=ve,z}(),Q.mode.CTRGladman)},6635:function(Se,ke,Y){var z,te,Q;Se.exports=(Q=Y(7585),Y(3057),Q.mode.CTR=(te=(z=Q.lib.BlockCipherMode.extend()).Encryptor=z.extend({processBlock:function(le,ve){var J=this._cipher,re=J.blockSize,V=this._iv,M=this._counter;V&&(M=this._counter=V.slice(0),this._iv=void 0);var F=M.slice(0);J.encryptBlock(F,0),M[re-1]=M[re-1]+1|0;for(var I=0;I<re;I++)le[ve+I]^=F[I]}}),z.Decryptor=te,z),Q.mode.CTR)},7934:function(Se,ke,Y){var z,Q;Se.exports=(Q=Y(7585),Y(3057),Q.mode.ECB=((z=Q.lib.BlockCipherMode.extend()).Encryptor=z.extend({processBlock:function(te,le){this._cipher.encryptBlock(te,le)}}),z.Decryptor=z.extend({processBlock:function(te,le){this._cipher.decryptBlock(te,le)}}),z),Q.mode.ECB)},9354:function(Se,ke,Y){var z,te,Q;Se.exports=(Q=Y(7585),Y(3057),Q.mode.OFB=(te=(z=Q.lib.BlockCipherMode.extend()).Encryptor=z.extend({processBlock:function(le,ve){var J=this._cipher,re=J.blockSize,V=this._iv,M=this._keystream;V&&(M=this._keystream=V.slice(0),this._iv=void 0),J.encryptBlock(M,0);for(var F=0;F<re;F++)le[ve+F]^=M[F]}}),z.Decryptor=te,z),Q.mode.OFB)},4413:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(3057),Q.pad.AnsiX923={pad:function(z,te){var le=z.sigBytes,ve=4*te,J=ve-le%ve,re=le+J-1;z.clamp(),z.words[re>>>2]|=J<<24-re%4*8,z.sigBytes+=J},unpad:function(z){z.sigBytes-=255&z.words[z.sigBytes-1>>>2]}},Q.pad.Ansix923)},4630:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(3057),Q.pad.Iso10126={pad:function(z,te){var le=4*te,ve=le-z.sigBytes%le;z.concat(Q.lib.WordArray.random(ve-1)).concat(Q.lib.WordArray.create([ve<<24],1))},unpad:function(z){z.sigBytes-=255&z.words[z.sigBytes-1>>>2]}},Q.pad.Iso10126)},187:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(3057),Q.pad.Iso97971={pad:function(z,te){z.concat(Q.lib.WordArray.create([2147483648],1)),Q.pad.ZeroPadding.pad(z,te)},unpad:function(z){Q.pad.ZeroPadding.unpad(z),z.sigBytes--}},Q.pad.Iso97971)},3237:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(3057),Q.pad.NoPadding={pad:function(){},unpad:function(){}},Q.pad.NoPadding)},1691:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(3057),Q.pad.ZeroPadding={pad:function(z,te){var le=4*te;z.clamp(),z.sigBytes+=le-(z.sigBytes%le||le)},unpad:function(z){var te=z.words,le=z.sigBytes-1;for(le=z.sigBytes-1;le>=0;le--)if(te[le>>>2]>>>24-le%4*8&255){z.sigBytes=le+1;break}}},Q.pad.ZeroPadding)},8812:function(Se,ke,Y){var z,te,le,ve,J,V,M,Q;Se.exports=(Q=Y(7585),Y(5162),Y(3764),ve=(te=(z=Q).lib).WordArray,V=(J=z.algo).HMAC,M=J.PBKDF2=(le=te.Base).extend({cfg:le.extend({keySize:4,hasher:J.SHA1,iterations:1}),init:function(F){this.cfg=this.cfg.extend(F)},compute:function(F,I){for(var O=this.cfg,P=V.create(O.hasher,F),B=ve.create(),$=ve.create([1]),ce=B.words,se=$.words,G=O.keySize,q=O.iterations;ce.length<G;){var pe=P.update(I).finalize($);P.reset();for(var ne=pe.words,ue=ne.length,fe=pe,Re=1;Re<q;Re++){fe=P.finalize(fe),P.reset();for(var Ce=fe.words,Ne=0;Ne<ue;Ne++)ne[Ne]^=Ce[Ne]}B.concat(pe),se[0]++}return B.sigBytes=4*G,B}}),z.PBKDF2=function(F,I,O){return M.create(O).compute(F,I)},Q.PBKDF2)},3544:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(8319),Y(9493),Y(7865),Y(3057),function(){var z=Q,le=z.lib.StreamCipher,J=[],re=[],V=[],M=z.algo.RabbitLegacy=le.extend({_doReset:function(){var I=this._key.words,O=this.cfg.iv,P=this._X=[I[0],I[3]<<16|I[2]>>>16,I[1],I[0]<<16|I[3]>>>16,I[2],I[1]<<16|I[0]>>>16,I[3],I[2]<<16|I[1]>>>16],B=this._C=[I[2]<<16|I[2]>>>16,4294901760&I[0]|65535&I[1],I[3]<<16|I[3]>>>16,4294901760&I[1]|65535&I[2],I[0]<<16|I[0]>>>16,4294901760&I[2]|65535&I[3],I[1]<<16|I[1]>>>16,4294901760&I[3]|65535&I[0]];this._b=0;for(var $=0;$<4;$++)F.call(this);for($=0;$<8;$++)B[$]^=P[$+4&7];if(O){var ce=O.words,se=ce[0],G=ce[1],q=16711935&(se<<8|se>>>24)|4278255360&(se<<24|se>>>8),pe=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8),ne=q>>>16|4294901760&pe,ue=pe<<16|65535&q;for(B[0]^=q,B[1]^=ne,B[2]^=pe,B[3]^=ue,B[4]^=q,B[5]^=ne,B[6]^=pe,B[7]^=ue,$=0;$<4;$++)F.call(this)}},_doProcessBlock:function(I,O){var P=this._X;F.call(this),J[0]=P[0]^P[5]>>>16^P[3]<<16,J[1]=P[2]^P[7]>>>16^P[5]<<16,J[2]=P[4]^P[1]>>>16^P[7]<<16,J[3]=P[6]^P[3]>>>16^P[1]<<16;for(var B=0;B<4;B++)J[B]=16711935&(J[B]<<8|J[B]>>>24)|4278255360&(J[B]<<24|J[B]>>>8),I[O+B]^=J[B]},blockSize:4,ivSize:2});function F(){for(var I=this._X,O=this._C,P=0;P<8;P++)re[P]=O[P];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<re[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<re[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<re[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<re[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<re[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<re[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<re[6]>>>0?1:0)|0,this._b=O[7]>>>0<re[7]>>>0?1:0,P=0;P<8;P++){var B=I[P]+O[P],$=65535&B,ce=B>>>16;V[P]=(($*$>>>17)+$*ce>>>15)+ce*ce^((4294901760&B)*B|0)+((65535&B)*B|0)}I[0]=V[0]+(V[7]<<16|V[7]>>>16)+(V[6]<<16|V[6]>>>16)|0,I[1]=V[1]+(V[0]<<8|V[0]>>>24)+V[7]|0,I[2]=V[2]+(V[1]<<16|V[1]>>>16)+(V[0]<<16|V[0]>>>16)|0,I[3]=V[3]+(V[2]<<8|V[2]>>>24)+V[1]|0,I[4]=V[4]+(V[3]<<16|V[3]>>>16)+(V[2]<<16|V[2]>>>16)|0,I[5]=V[5]+(V[4]<<8|V[4]>>>24)+V[3]|0,I[6]=V[6]+(V[5]<<16|V[5]>>>16)+(V[4]<<16|V[4]>>>16)|0,I[7]=V[7]+(V[6]<<8|V[6]>>>24)+V[5]|0}z.RabbitLegacy=le._createHelper(M)}(),Q.RabbitLegacy)},8182:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(8319),Y(9493),Y(7865),Y(3057),function(){var z=Q,le=z.lib.StreamCipher,J=[],re=[],V=[],M=z.algo.Rabbit=le.extend({_doReset:function(){for(var I=this._key.words,O=this.cfg.iv,P=0;P<4;P++)I[P]=16711935&(I[P]<<8|I[P]>>>24)|4278255360&(I[P]<<24|I[P]>>>8);var B=this._X=[I[0],I[3]<<16|I[2]>>>16,I[1],I[0]<<16|I[3]>>>16,I[2],I[1]<<16|I[0]>>>16,I[3],I[2]<<16|I[1]>>>16],$=this._C=[I[2]<<16|I[2]>>>16,4294901760&I[0]|65535&I[1],I[3]<<16|I[3]>>>16,4294901760&I[1]|65535&I[2],I[0]<<16|I[0]>>>16,4294901760&I[2]|65535&I[3],I[1]<<16|I[1]>>>16,4294901760&I[3]|65535&I[0]];for(this._b=0,P=0;P<4;P++)F.call(this);for(P=0;P<8;P++)$[P]^=B[P+4&7];if(O){var ce=O.words,se=ce[0],G=ce[1],q=16711935&(se<<8|se>>>24)|4278255360&(se<<24|se>>>8),pe=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8),ne=q>>>16|4294901760&pe,ue=pe<<16|65535&q;for($[0]^=q,$[1]^=ne,$[2]^=pe,$[3]^=ue,$[4]^=q,$[5]^=ne,$[6]^=pe,$[7]^=ue,P=0;P<4;P++)F.call(this)}},_doProcessBlock:function(I,O){var P=this._X;F.call(this),J[0]=P[0]^P[5]>>>16^P[3]<<16,J[1]=P[2]^P[7]>>>16^P[5]<<16,J[2]=P[4]^P[1]>>>16^P[7]<<16,J[3]=P[6]^P[3]>>>16^P[1]<<16;for(var B=0;B<4;B++)J[B]=16711935&(J[B]<<8|J[B]>>>24)|4278255360&(J[B]<<24|J[B]>>>8),I[O+B]^=J[B]},blockSize:4,ivSize:2});function F(){for(var I=this._X,O=this._C,P=0;P<8;P++)re[P]=O[P];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<re[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<re[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<re[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<re[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<re[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<re[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<re[6]>>>0?1:0)|0,this._b=O[7]>>>0<re[7]>>>0?1:0,P=0;P<8;P++){var B=I[P]+O[P],$=65535&B,ce=B>>>16;V[P]=(($*$>>>17)+$*ce>>>15)+ce*ce^((4294901760&B)*B|0)+((65535&B)*B|0)}I[0]=V[0]+(V[7]<<16|V[7]>>>16)+(V[6]<<16|V[6]>>>16)|0,I[1]=V[1]+(V[0]<<8|V[0]>>>24)+V[7]|0,I[2]=V[2]+(V[1]<<16|V[1]>>>16)+(V[0]<<16|V[0]>>>16)|0,I[3]=V[3]+(V[2]<<8|V[2]>>>24)+V[1]|0,I[4]=V[4]+(V[3]<<16|V[3]>>>16)+(V[2]<<16|V[2]>>>16)|0,I[5]=V[5]+(V[4]<<8|V[4]>>>24)+V[3]|0,I[6]=V[6]+(V[5]<<16|V[5]>>>16)+(V[4]<<16|V[4]>>>16)|0,I[7]=V[7]+(V[6]<<8|V[6]>>>24)+V[5]|0}z.Rabbit=le._createHelper(M)}(),Q.Rabbit)},486:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(8319),Y(9493),Y(7865),Y(3057),function(){var z=Q,le=z.lib.StreamCipher,ve=z.algo,J=ve.RC4=le.extend({_doReset:function(){for(var M=this._key,F=M.words,I=M.sigBytes,O=this._S=[],P=0;P<256;P++)O[P]=P;P=0;for(var B=0;P<256;P++){var $=P%I,se=O[P];O[P]=O[B=(B+O[P]+(F[$>>>2]>>>24-$%4*8&255))%256],O[B]=se}this._i=this._j=0},_doProcessBlock:function(M,F){M[F]^=re.call(this)},keySize:8,ivSize:0});function re(){for(var M=this._S,F=this._i,I=this._j,O=0,P=0;P<4;P++){var B=M[F=(F+1)%256];M[F]=M[I=(I+M[F])%256],M[I]=B,O|=M[(M[F]+M[I])%256]<<24-8*P}return this._i=F,this._j=I,O}z.RC4=le._createHelper(J);var V=ve.RC4Drop=J.extend({cfg:J.cfg.extend({drop:192}),_doReset:function(){J._doReset.call(this);for(var M=this.cfg.drop;M>0;M--)re.call(this)}});z.RC4Drop=le._createHelper(V)}(),Q.RC4)},4973:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),function(z){var te=Q,le=te.lib,ve=le.WordArray,J=le.Hasher,re=te.algo,V=ve.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),M=ve.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),F=ve.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),I=ve.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),O=ve.create([0,1518500249,1859775393,2400959708,2840853838]),P=ve.create([1352829926,1548603684,1836072691,2053994217,0]),B=re.RIPEMD160=J.extend({_doReset:function(){this._hash=ve.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ne,ue){for(var fe=0;fe<16;fe++){var Re=ue+fe,Ce=ne[Re];ne[Re]=16711935&(Ce<<8|Ce>>>24)|4278255360&(Ce<<24|Ce>>>8)}var Le,qt,ui,Te,Oe,ye,Ae,zi,kt,Zt,Jt,Ne=this._hash.words,He=O.words,me=P.words,Pe=V.words,Be=M.words,Ee=F.words,vt=I.words;for(ye=Le=Ne[0],Ae=qt=Ne[1],zi=ui=Ne[2],kt=Te=Ne[3],Zt=Oe=Ne[4],fe=0;fe<80;fe+=1)Jt=Le+ne[ue+Pe[fe]]|0,Jt+=fe<16?$(qt,ui,Te)+He[0]:fe<32?ce(qt,ui,Te)+He[1]:fe<48?se(qt,ui,Te)+He[2]:fe<64?G(qt,ui,Te)+He[3]:q(qt,ui,Te)+He[4],Jt=(Jt=pe(Jt|=0,Ee[fe]))+Oe|0,Le=Oe,Oe=Te,Te=pe(ui,10),ui=qt,qt=Jt,Jt=ye+ne[ue+Be[fe]]|0,Jt+=fe<16?q(Ae,zi,kt)+me[0]:fe<32?G(Ae,zi,kt)+me[1]:fe<48?se(Ae,zi,kt)+me[2]:fe<64?ce(Ae,zi,kt)+me[3]:$(Ae,zi,kt)+me[4],Jt=(Jt=pe(Jt|=0,vt[fe]))+Zt|0,ye=Zt,Zt=kt,kt=pe(zi,10),zi=Ae,Ae=Jt;Jt=Ne[1]+ui+kt|0,Ne[1]=Ne[2]+Te+Zt|0,Ne[2]=Ne[3]+Oe+ye|0,Ne[3]=Ne[4]+Le+Ae|0,Ne[4]=Ne[0]+qt+zi|0,Ne[0]=Jt},_doFinalize:function(){var ne=this._data,ue=ne.words,fe=8*this._nDataBytes,Re=8*ne.sigBytes;ue[Re>>>5]|=128<<24-Re%32,ue[14+(Re+64>>>9<<4)]=16711935&(fe<<8|fe>>>24)|4278255360&(fe<<24|fe>>>8),ne.sigBytes=4*(ue.length+1),this._process();for(var Ce=this._hash,Ne=Ce.words,He=0;He<5;He++){var me=Ne[He];Ne[He]=16711935&(me<<8|me>>>24)|4278255360&(me<<24|me>>>8)}return Ce},clone:function(){var ne=J.clone.call(this);return ne._hash=this._hash.clone(),ne}});function $(ne,ue,fe){return ne^ue^fe}function ce(ne,ue,fe){return ne&ue|~ne&fe}function se(ne,ue,fe){return(ne|~ue)^fe}function G(ne,ue,fe){return ne&fe|ue&~fe}function q(ne,ue,fe){return ne^(ue|~fe)}function pe(ne,ue){return ne<<ue|ne>>>32-ue}te.RIPEMD160=J._createHelper(B),te.HmacRIPEMD160=J._createHmacHelper(B)}(Math),Q.RIPEMD160)},5162:function(Se,ke,Y){var z,te,le,ve,re,V,Q;Se.exports=(Q=Y(7585),le=(te=(z=Q).lib).WordArray,re=[],V=z.algo.SHA1=(ve=te.Hasher).extend({_doReset:function(){this._hash=new le.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,F){for(var I=this._hash.words,O=I[0],P=I[1],B=I[2],$=I[3],ce=I[4],se=0;se<80;se++){if(se<16)re[se]=0|M[F+se];else{var G=re[se-3]^re[se-8]^re[se-14]^re[se-16];re[se]=G<<1|G>>>31}var q=(O<<5|O>>>27)+ce+re[se];q+=se<20?1518500249+(P&B|~P&$):se<40?1859775393+(P^B^$):se<60?(P&B|P&$|B&$)-1894007588:(P^B^$)-899497514,ce=$,$=B,B=P<<30|P>>>2,P=O,O=q}I[0]=I[0]+O|0,I[1]=I[1]+P|0,I[2]=I[2]+B|0,I[3]=I[3]+$|0,I[4]=I[4]+ce|0},_doFinalize:function(){var M=this._data,F=M.words,I=8*this._nDataBytes,O=8*M.sigBytes;return F[O>>>5]|=128<<24-O%32,F[14+(O+64>>>9<<4)]=Math.floor(I/4294967296),F[15+(O+64>>>9<<4)]=I,M.sigBytes=4*F.length,this._process(),this._hash},clone:function(){var M=ve.clone.call(this);return M._hash=this._hash.clone(),M}}),z.SHA1=ve._createHelper(V),z.HmacSHA1=ve._createHmacHelper(V),Q.SHA1)},8769:function(Se,ke,Y){var z,le,ve,J,re,Q;Se.exports=(Q=Y(7585),Y(1817),le=(z=Q).lib.WordArray,re=(ve=z.algo).SHA224=(J=ve.SHA256).extend({_doReset:function(){this._hash=new le.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var V=J._doFinalize.call(this);return V.sigBytes-=4,V}}),z.SHA224=J._createHelper(re),z.HmacSHA224=J._createHmacHelper(re),Q.SHA224)},1817:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),function(z){var te=Q,le=te.lib,ve=le.WordArray,J=le.Hasher,re=te.algo,V=[],M=[];!function(){function O(ce){for(var se=z.sqrt(ce),G=2;G<=se;G++)if(!(ce%G))return!1;return!0}function P(ce){return 4294967296*(ce-(0|ce))|0}for(var B=2,$=0;$<64;)O(B)&&($<8&&(V[$]=P(z.pow(B,.5))),M[$]=P(z.pow(B,1/3)),$++),B++}();var F=[],I=re.SHA256=J.extend({_doReset:function(){this._hash=new ve.init(V.slice(0))},_doProcessBlock:function(O,P){for(var B=this._hash.words,$=B[0],ce=B[1],se=B[2],G=B[3],q=B[4],pe=B[5],ne=B[6],ue=B[7],fe=0;fe<64;fe++){if(fe<16)F[fe]=0|O[P+fe];else{var Re=F[fe-15],Ne=F[fe-2];F[fe]=((Re<<25|Re>>>7)^(Re<<14|Re>>>18)^Re>>>3)+F[fe-7]+((Ne<<15|Ne>>>17)^(Ne<<13|Ne>>>19)^Ne>>>10)+F[fe-16]}var Pe=$&ce^$&se^ce&se,vt=ue+((q<<26|q>>>6)^(q<<21|q>>>11)^(q<<7|q>>>25))+(q&pe^~q&ne)+M[fe]+F[fe];ue=ne,ne=pe,pe=q,q=G+vt|0,G=se,se=ce,ce=$,$=vt+((($<<30|$>>>2)^($<<19|$>>>13)^($<<10|$>>>22))+Pe)|0}B[0]=B[0]+$|0,B[1]=B[1]+ce|0,B[2]=B[2]+se|0,B[3]=B[3]+G|0,B[4]=B[4]+q|0,B[5]=B[5]+pe|0,B[6]=B[6]+ne|0,B[7]=B[7]+ue|0},_doFinalize:function(){var O=this._data,P=O.words,B=8*this._nDataBytes,$=8*O.sigBytes;return P[$>>>5]|=128<<24-$%32,P[14+($+64>>>9<<4)]=z.floor(B/4294967296),P[15+($+64>>>9<<4)]=B,O.sigBytes=4*P.length,this._process(),this._hash},clone:function(){var O=J.clone.call(this);return O._hash=this._hash.clone(),O}});te.SHA256=J._createHelper(I),te.HmacSHA256=J._createHmacHelper(I)}(Math),Q.SHA256)},1971:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(401),function(z){var te=Q,le=te.lib,ve=le.WordArray,J=le.Hasher,V=te.x64.Word,M=te.algo,F=[],I=[],O=[];!function(){for(var $=1,ce=0,se=0;se<24;se++){F[$+5*ce]=(se+1)*(se+2)/2%64;var q=(2*$+3*ce)%5;$=ce%5,ce=q}for($=0;$<5;$++)for(ce=0;ce<5;ce++)I[$+5*ce]=ce+(2*$+3*ce)%5*5;for(var pe=1,ne=0;ne<24;ne++){for(var ue=0,fe=0,Re=0;Re<7;Re++){if(1&pe){var Ce=(1<<Re)-1;Ce<32?fe^=1<<Ce:ue^=1<<Ce-32}128&pe?pe=pe<<1^113:pe<<=1}O[ne]=V.create(ue,fe)}}();var P=[];!function(){for(var $=0;$<25;$++)P[$]=V.create()}();var B=M.SHA3=J.extend({cfg:J.cfg.extend({outputLength:512}),_doReset:function(){for(var $=this._state=[],ce=0;ce<25;ce++)$[ce]=new V.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function($,ce){for(var se=this._state,G=this.blockSize/2,q=0;q<G;q++){var pe=$[ce+2*q],ne=$[ce+2*q+1];pe=16711935&(pe<<8|pe>>>24)|4278255360&(pe<<24|pe>>>8),(ue=se[q]).high^=ne=16711935&(ne<<8|ne>>>24)|4278255360&(ne<<24|ne>>>8),ue.low^=pe}for(var fe=0;fe<24;fe++){for(var Re=0;Re<5;Re++){for(var Ce=0,Ne=0,He=0;He<5;He++)Ce^=(ue=se[Re+5*He]).high,Ne^=ue.low;var me=P[Re];me.high=Ce,me.low=Ne}for(Re=0;Re<5;Re++){var Pe=P[(Re+4)%5],Be=P[(Re+1)%5],Ee=Be.high,vt=Be.low;for(Ce=Pe.high^(Ee<<1|vt>>>31),Ne=Pe.low^(vt<<1|Ee>>>31),He=0;He<5;He++)(ue=se[Re+5*He]).high^=Ce,ue.low^=Ne}for(var Le=1;Le<25;Le++){var qt=(ue=se[Le]).high,ui=ue.low,Te=F[Le];Te<32?(Ce=qt<<Te|ui>>>32-Te,Ne=ui<<Te|qt>>>32-Te):(Ce=ui<<Te-32|qt>>>64-Te,Ne=qt<<Te-32|ui>>>64-Te);var Oe=P[I[Le]];Oe.high=Ce,Oe.low=Ne}var ye=P[0],Ae=se[0];for(ye.high=Ae.high,ye.low=Ae.low,Re=0;Re<5;Re++)for(He=0;He<5;He++){var zi=P[Le=Re+5*He],kt=P[(Re+1)%5+5*He],Zt=P[(Re+2)%5+5*He];(ue=se[Le]).high=zi.high^~kt.high&Zt.high,ue.low=zi.low^~kt.low&Zt.low}var ue,Jt=O[fe];(ue=se[0]).high^=Jt.high,ue.low^=Jt.low}},_doFinalize:function(){var $=this._data,ce=$.words,G=8*$.sigBytes,q=32*this.blockSize;ce[G>>>5]|=1<<24-G%32,ce[(z.ceil((G+1)/q)*q>>>5)-1]|=128,$.sigBytes=4*ce.length,this._process();for(var pe=this._state,ne=this.cfg.outputLength/8,ue=ne/8,fe=[],Re=0;Re<ue;Re++){var Ce=pe[Re],Ne=Ce.high,He=Ce.low;Ne=16711935&(Ne<<8|Ne>>>24)|4278255360&(Ne<<24|Ne>>>8),fe.push(He=16711935&(He<<8|He>>>24)|4278255360&(He<<24|He>>>8)),fe.push(Ne)}return new ve.init(fe,ne)},clone:function(){for(var $=J.clone.call(this),ce=$._state=this._state.slice(0),se=0;se<25;se++)ce[se]=ce[se].clone();return $}});te.SHA3=J._createHelper(B),te.HmacSHA3=J._createHmacHelper(B)}(Math),Q.SHA3)},6787:function(Se,ke,Y){var z,te,le,ve,J,re,V,Q;Se.exports=(Q=Y(7585),Y(401),Y(3351),le=(te=(z=Q).x64).Word,ve=te.WordArray,V=(J=z.algo).SHA384=(re=J.SHA512).extend({_doReset:function(){this._hash=new ve.init([new le.init(3418070365,3238371032),new le.init(1654270250,914150663),new le.init(2438529370,812702999),new le.init(355462360,4144912697),new le.init(1731405415,4290775857),new le.init(2394180231,1750603025),new le.init(3675008525,1694076839),new le.init(1203062813,3204075428)])},_doFinalize:function(){var M=re._doFinalize.call(this);return M.sigBytes-=16,M}}),z.SHA384=re._createHelper(V),z.HmacSHA384=re._createHmacHelper(V),Q.SHA384)},3351:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(401),function(){var z=Q,le=z.lib.Hasher,ve=z.x64,J=ve.Word,re=ve.WordArray,V=z.algo;function M(){return J.create.apply(J,arguments)}var F=[M(1116352408,3609767458),M(1899447441,602891725),M(3049323471,3964484399),M(3921009573,2173295548),M(961987163,4081628472),M(1508970993,3053834265),M(2453635748,2937671579),M(2870763221,3664609560),M(3624381080,2734883394),M(310598401,1164996542),M(607225278,1323610764),M(1426881987,3590304994),M(1925078388,4068182383),M(2162078206,991336113),M(2614888103,633803317),M(3248222580,3479774868),M(3835390401,2666613458),M(4022224774,944711139),M(264347078,2341262773),M(604807628,2007800933),M(770255983,1495990901),M(1249150122,1856431235),M(1555081692,3175218132),M(1996064986,2198950837),M(2554220882,3999719339),M(2821834349,766784016),M(2952996808,2566594879),M(3210313671,3203337956),M(3336571891,1034457026),M(3584528711,2466948901),M(113926993,3758326383),M(338241895,168717936),M(666307205,1188179964),M(773529912,1546045734),M(1294757372,1522805485),M(1396182291,2643833823),M(1695183700,2343527390),M(1986661051,1014477480),M(2177026350,1206759142),M(2456956037,344077627),M(2730485921,1290863460),M(2820302411,3158454273),M(3259730800,3505952657),M(3345764771,106217008),M(3516065817,3606008344),M(3600352804,1432725776),M(4094571909,1467031594),M(275423344,851169720),M(430227734,3100823752),M(506948616,1363258195),M(659060556,3750685593),M(883997877,3785050280),M(958139571,3318307427),M(1322822218,3812723403),M(1537002063,2003034995),M(1747873779,3602036899),M(1955562222,1575990012),M(2024104815,1125592928),M(2227730452,2716904306),M(2361852424,442776044),M(2428436474,593698344),M(2756734187,3733110249),M(3204031479,2999351573),M(3329325298,3815920427),M(3391569614,3928383900),M(3515267271,566280711),M(3940187606,3454069534),M(4118630271,4000239992),M(116418474,1914138554),M(174292421,2731055270),M(289380356,3203993006),M(460393269,320620315),M(685471733,587496836),M(852142971,1086792851),M(1017036298,365543100),M(1126000580,2618297676),M(1288033470,3409855158),M(1501505948,4234509866),M(1607167915,987167468),M(1816402316,1246189591)],I=[];!function(){for(var P=0;P<80;P++)I[P]=M()}();var O=V.SHA512=le.extend({_doReset:function(){this._hash=new re.init([new J.init(1779033703,4089235720),new J.init(3144134277,2227873595),new J.init(1013904242,4271175723),new J.init(2773480762,1595750129),new J.init(1359893119,2917565137),new J.init(2600822924,725511199),new J.init(528734635,4215389547),new J.init(1541459225,327033209)])},_doProcessBlock:function(P,B){for(var $=this._hash.words,ce=$[0],se=$[1],G=$[2],q=$[3],pe=$[4],ne=$[5],ue=$[6],fe=$[7],Re=ce.high,Ce=ce.low,Ne=se.high,He=se.low,me=G.high,Pe=G.low,Be=q.high,Ee=q.low,vt=pe.high,Le=pe.low,qt=ne.high,ui=ne.low,Te=ue.high,Oe=ue.low,ye=fe.high,Ae=fe.low,zi=Re,kt=Ce,Zt=Ne,Jt=He,Ht=me,Ga=Pe,rd=Be,Bo=Ee,na=vt,je=Le,sc=qt,Je=ui,Us=Te,Hs=Oe,Gs=ye,zs=Ae,xr=0;xr<80;xr++){var kr,mo,lc=I[xr];if(xr<16)mo=lc.high=0|P[B+2*xr],kr=lc.low=0|P[B+2*xr+1];else{var Jf=I[xr-15],Mr=Jf.high,cs=Jf.low,ad=(cs>>>1|Mr<<31)^(cs>>>8|Mr<<24)^(cs>>>7|Mr<<25),ep=I[xr-2],Lo=ep.high,js=ep.low,tp=(js>>>19|Lo<<13)^(js<<3|Lo>>>29)^(js>>>6|Lo<<26),ip=I[xr-7],uc=I[xr-16],dc=uc.low;lc.high=mo=(mo=(mo=((Mr>>>1|cs<<31)^(Mr>>>8|cs<<24)^Mr>>>7)+ip.high+((kr=ad+ip.low)>>>0<ad>>>0?1:0))+((Lo>>>19|js<<13)^(Lo<<3|js>>>29)^Lo>>>6)+((kr+=tp)>>>0<tp>>>0?1:0))+uc.high+((kr+=dc)>>>0<dc>>>0?1:0),lc.low=kr}var pr,np=na&sc^~na&Us,hc=je&Je^~je&Hs,ld=zi&Zt^zi&Ht^Zt&Ht,Hn=(kt>>>28|zi<<4)^(kt<<30|zi>>>2)^(kt<<25|zi>>>7),dd=F[xr],fc=dd.low,za=Gs+((na>>>14|je<<18)^(na>>>18|je<<14)^(na<<23|je>>>9))+((pr=zs+((je>>>14|na<<18)^(je>>>18|na<<14)^(je<<23|na>>>9)))>>>0<zs>>>0?1:0),ra=Hn+(kt&Jt^kt&Ga^Jt&Ga);Gs=Us,zs=Hs,Us=sc,Hs=Je,sc=na,Je=je,na=rd+(za=(za=(za=za+np+((pr+=hc)>>>0<hc>>>0?1:0))+dd.high+((pr+=fc)>>>0<fc>>>0?1:0))+mo+((pr+=kr)>>>0<kr>>>0?1:0))+((je=Bo+pr|0)>>>0<Bo>>>0?1:0)|0,rd=Ht,Bo=Ga,Ht=Zt,Ga=Jt,Zt=zi,Jt=kt,zi=za+(((zi>>>28|kt<<4)^(zi<<30|kt>>>2)^(zi<<25|kt>>>7))+ld+(ra>>>0<Hn>>>0?1:0))+((kt=pr+ra|0)>>>0<pr>>>0?1:0)|0}Ce=ce.low=Ce+kt,ce.high=Re+zi+(Ce>>>0<kt>>>0?1:0),He=se.low=He+Jt,se.high=Ne+Zt+(He>>>0<Jt>>>0?1:0),Pe=G.low=Pe+Ga,G.high=me+Ht+(Pe>>>0<Ga>>>0?1:0),Ee=q.low=Ee+Bo,q.high=Be+rd+(Ee>>>0<Bo>>>0?1:0),Le=pe.low=Le+je,pe.high=vt+na+(Le>>>0<je>>>0?1:0),ui=ne.low=ui+Je,ne.high=qt+sc+(ui>>>0<Je>>>0?1:0),Oe=ue.low=Oe+Hs,ue.high=Te+Us+(Oe>>>0<Hs>>>0?1:0),Ae=fe.low=Ae+zs,fe.high=ye+Gs+(Ae>>>0<zs>>>0?1:0)},_doFinalize:function(){var P=this._data,B=P.words,$=8*this._nDataBytes,ce=8*P.sigBytes;return B[ce>>>5]|=128<<24-ce%32,B[30+(ce+128>>>10<<5)]=Math.floor($/4294967296),B[31+(ce+128>>>10<<5)]=$,P.sigBytes=4*B.length,this._process(),this._hash.toX32()},clone:function(){var P=le.clone.call(this);return P._hash=this._hash.clone(),P},blockSize:32});z.SHA512=le._createHelper(O),z.HmacSHA512=le._createHmacHelper(O)}(),Q.SHA512)},7243:function(Se,ke,Y){var Q;Se.exports=(Q=Y(7585),Y(8319),Y(9493),Y(7865),Y(3057),function(){var z=Q,te=z.lib,le=te.WordArray,ve=te.BlockCipher,J=z.algo,re=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],V=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],M=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],F=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],I=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],O=J.DES=ve.extend({_doReset:function(){for(var se=this._key.words,G=[],q=0;q<56;q++){var pe=re[q]-1;G[q]=se[pe>>>5]>>>31-pe%32&1}for(var ne=this._subKeys=[],ue=0;ue<16;ue++){var fe=ne[ue]=[],Re=M[ue];for(q=0;q<24;q++)fe[q/6|0]|=G[(V[q]-1+Re)%28]<<31-q%6,fe[4+(q/6|0)]|=G[28+(V[q+24]-1+Re)%28]<<31-q%6;for(fe[0]=fe[0]<<1|fe[0]>>>31,q=1;q<7;q++)fe[q]=fe[q]>>>4*(q-1)+3;fe[7]=fe[7]<<5|fe[7]>>>27}var Ce=this._invSubKeys=[];for(q=0;q<16;q++)Ce[q]=ne[15-q]},encryptBlock:function(ce,se){this._doCryptBlock(ce,se,this._subKeys)},decryptBlock:function(ce,se){this._doCryptBlock(ce,se,this._invSubKeys)},_doCryptBlock:function(ce,se,G){this._lBlock=ce[se],this._rBlock=ce[se+1],P.call(this,4,252645135),P.call(this,16,65535),B.call(this,2,858993459),B.call(this,8,16711935),P.call(this,1,1431655765);for(var q=0;q<16;q++){for(var pe=G[q],ne=this._lBlock,ue=this._rBlock,fe=0,Re=0;Re<8;Re++)fe|=F[Re][((ue^pe[Re])&I[Re])>>>0];this._lBlock=ue,this._rBlock=ne^fe}var Ce=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Ce,P.call(this,1,1431655765),B.call(this,8,16711935),B.call(this,2,858993459),P.call(this,16,65535),P.call(this,4,252645135),ce[se]=this._lBlock,ce[se+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function P(ce,se){var G=(this._lBlock>>>ce^this._rBlock)&se;this._rBlock^=G,this._lBlock^=G<<ce}function B(ce,se){var G=(this._rBlock>>>ce^this._lBlock)&se;this._lBlock^=G,this._rBlock^=G<<ce}z.DES=ve._createHelper(O);var $=J.TripleDES=ve.extend({_doReset:function(){var se=this._key.words;if(2!==se.length&&4!==se.length&&se.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var G=se.slice(0,2),q=se.length<4?se.slice(0,2):se.slice(2,4),pe=se.length<6?se.slice(0,2):se.slice(4,6);this._des1=O.createEncryptor(le.create(G)),this._des2=O.createEncryptor(le.create(q)),this._des3=O.createEncryptor(le.create(pe))},encryptBlock:function(ce,se){this._des1.encryptBlock(ce,se),this._des2.decryptBlock(ce,se),this._des3.encryptBlock(ce,se)},decryptBlock:function(ce,se){this._des3.decryptBlock(ce,se),this._des2.encryptBlock(ce,se),this._des1.decryptBlock(ce,se)},keySize:6,ivSize:2,blockSize:2});z.TripleDES=ve._createHelper($)}(),Q.TripleDES)},401:function(Se,ke,Y){var le,ve,J,re,Q;Se.exports=(Q=Y(7585),ve=(le=Q.lib).Base,J=le.WordArray,(re=Q.x64={}).Word=ve.extend({init:function(F,I){this.high=F,this.low=I}}),re.WordArray=ve.extend({init:function(F,I){F=this.words=F||[],this.sigBytes=null!=I?I:8*F.length},toX32:function(){for(var F=this.words,I=F.length,O=[],P=0;P<I;P++){var B=F[P];O.push(B.high),O.push(B.low)}return J.create(O,this.sigBytes)},clone:function(){for(var F=ve.clone.call(this),I=F.words=this.words.slice(0),O=I.length,P=0;P<O;P++)I[P]=I[P].clone();return F}}),Q)},340:(Se,ke,Y)=>{var Q=Y(9471),z=Y(2992),te=Y(7657),le=Y(5583),ve=Y(1929),J=Y(8083),re=Y(3818);re.alea=Q,re.xor128=z,re.xorwow=te,re.xorshift7=le,re.xor4096=ve,re.tychei=J,Se.exports=re},9471:function(Se,ke,Y){var Q;!function(z,te,le){function ve(M){var F=this,I=function V(){var M=4022871197;return function(I){I=String(I);for(var O=0;O<I.length;O++){var P=.02519603282416938*(M+=I.charCodeAt(O));P-=M=P>>>0,M=(P*=M)>>>0,M+=4294967296*(P-=M)}return 2.3283064365386963e-10*(M>>>0)}}();F.next=function(){var O=2091639*F.s0+2.3283064365386963e-10*F.c;return F.s0=F.s1,F.s1=F.s2,F.s2=O-(F.c=0|O)},F.c=1,F.s0=I(" "),F.s1=I(" "),F.s2=I(" "),F.s0-=I(M),F.s0<0&&(F.s0+=1),F.s1-=I(M),F.s1<0&&(F.s1+=1),F.s2-=I(M),F.s2<0&&(F.s2+=1),I=null}function J(M,F){return F.c=M.c,F.s0=M.s0,F.s1=M.s1,F.s2=M.s2,F}function re(M,F){var I=new ve(M),O=F&&F.state,P=I.next;return P.int32=function(){return 4294967296*I.next()|0},P.double=function(){return P()+11102230246251565e-32*(2097152*P()|0)},P.quick=P,O&&("object"==typeof O&&J(O,I),P.state=function(){return J(I,{})}),P}te&&te.exports?te.exports=re:Y.amdD&&Y.amdO?void 0!==(Q=function(){return re}.call(ke,Y,ke,te))&&(te.exports=Q):this.alea=re}(0,Se=Y.nmd(Se))},8083:function(Se,ke,Y){var Q;!function(z,te,le){function ve(V){var M=this,F="";M.next=function(){var O=M.b,P=M.c,B=M.d,$=M.a;return O=O<<25^O>>>7^P,P=P-B|0,B=B<<24^B>>>8^$,$=$-O|0,M.b=O=O<<20^O>>>12^P,M.c=P=P-B|0,M.d=B<<16^P>>>16^$,M.a=$-O|0},M.a=0,M.b=0,M.c=-1640531527,M.d=1367130551,V===Math.floor(V)?(M.a=V/4294967296|0,M.b=0|V):F+=V;for(var I=0;I<F.length+20;I++)M.b^=0|F.charCodeAt(I),M.next()}function J(V,M){return M.a=V.a,M.b=V.b,M.c=V.c,M.d=V.d,M}function re(V,M){var F=new ve(V),I=M&&M.state,O=function(){return(F.next()>>>0)/4294967296};return O.double=function(){do{var $=((F.next()>>>11)+(F.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=F.next,O.quick=O,I&&("object"==typeof I&&J(I,F),O.state=function(){return J(F,{})}),O}te&&te.exports?te.exports=re:Y.amdD&&Y.amdO?void 0!==(Q=function(){return re}.call(ke,Y,ke,te))&&(te.exports=Q):this.tychei=re}(0,Se=Y.nmd(Se))},2992:function(Se,ke,Y){var Q;!function(z,te,le){function ve(V){var M=this,F="";M.x=0,M.y=0,M.z=0,M.w=0,M.next=function(){var O=M.x^M.x<<11;return M.x=M.y,M.y=M.z,M.z=M.w,M.w^=M.w>>>19^O^O>>>8},V===(0|V)?M.x=V:F+=V;for(var I=0;I<F.length+64;I++)M.x^=0|F.charCodeAt(I),M.next()}function J(V,M){return M.x=V.x,M.y=V.y,M.z=V.z,M.w=V.w,M}function re(V,M){var F=new ve(V),I=M&&M.state,O=function(){return(F.next()>>>0)/4294967296};return O.double=function(){do{var $=((F.next()>>>11)+(F.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=F.next,O.quick=O,I&&("object"==typeof I&&J(I,F),O.state=function(){return J(F,{})}),O}te&&te.exports?te.exports=re:Y.amdD&&Y.amdO?void 0!==(Q=function(){return re}.call(ke,Y,ke,te))&&(te.exports=Q):this.xor128=re}(0,Se=Y.nmd(Se))},1929:function(Se,ke,Y){var Q;!function(z,te,le){function ve(V){var M=this;M.next=function(){var B,$,I=M.w,O=M.X,P=M.i;return M.w=I=I+1640531527|0,$=O[P+34&127],B=O[P=P+1&127],$^=$<<13,B^=B<<17,$=O[P]=($^=$>>>15)^(B^=B>>>12),M.i=P,$+(I^I>>>16)|0},function F(I,O){var P,B,$,ce,se,G=[],q=128;for(O===(0|O)?(B=O,O=null):(O+="\0",B=0,q=Math.max(q,O.length)),$=0,ce=-32;ce<q;++ce)O&&(B^=O.charCodeAt((ce+32)%O.length)),0===ce&&(se=B),B^=B<<10,B^=B>>>15,B^=B<<4,B^=B>>>13,ce>=0&&($=0==(P=G[127&ce]^=B+(se=se+1640531527|0))?$+1:0);for($>=128&&(G[127&(O&&O.length||0)]=-1),$=127,ce=512;ce>0;--ce)B=G[$+34&127],P=G[$=$+1&127],B^=B<<13,P^=P<<17,G[$]=(B^=B>>>15)^(P^=P>>>12);I.w=se,I.X=G,I.i=$}(M,V)}function J(V,M){return M.i=V.i,M.w=V.w,M.X=V.X.slice(),M}function re(V,M){null==V&&(V=+new Date);var F=new ve(V),I=M&&M.state,O=function(){return(F.next()>>>0)/4294967296};return O.double=function(){do{var $=((F.next()>>>11)+(F.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=F.next,O.quick=O,I&&(I.X&&J(I,F),O.state=function(){return J(F,{})}),O}te&&te.exports?te.exports=re:Y.amdD&&Y.amdO?void 0!==(Q=function(){return re}.call(ke,Y,ke,te))&&(te.exports=Q):this.xor4096=re}(0,Se=Y.nmd(Se))},5583:function(Se,ke,Y){var Q;!function(z,te,le){function ve(V){var M=this;M.next=function(){var P,B,I=M.x,O=M.i;return P=I[O],B=(P^=P>>>7)^P<<24,B^=(P=I[O+1&7])^P>>>10,B^=(P=I[O+3&7])^P>>>3,B^=(P=I[O+4&7])^P<<7,P=I[O+7&7],I[O]=B^=(P^=P<<13)^P<<9,M.i=O+1&7,B},function F(I,O){var P,$=[];if(O===(0|O))$[0]=O;else for(O=""+O,P=0;P<O.length;++P)$[7&P]=$[7&P]<<15^O.charCodeAt(P)+$[P+1&7]<<13;for(;$.length<8;)$.push(0);for(P=0;P<8&&0===$[P];++P);for(8==P&&($[7]=-1),I.x=$,I.i=0,P=256;P>0;--P)I.next()}(M,V)}function J(V,M){return M.x=V.x.slice(),M.i=V.i,M}function re(V,M){null==V&&(V=+new Date);var F=new ve(V),I=M&&M.state,O=function(){return(F.next()>>>0)/4294967296};return O.double=function(){do{var $=((F.next()>>>11)+(F.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=F.next,O.quick=O,I&&(I.x&&J(I,F),O.state=function(){return J(F,{})}),O}te&&te.exports?te.exports=re:Y.amdD&&Y.amdO?void 0!==(Q=function(){return re}.call(ke,Y,ke,te))&&(te.exports=Q):this.xorshift7=re}(0,Se=Y.nmd(Se))},7657:function(Se,ke,Y){var Q;!function(z,te,le){function ve(V){var M=this,F="";M.next=function(){var O=M.x^M.x>>>2;return M.x=M.y,M.y=M.z,M.z=M.w,M.w=M.v,(M.d=M.d+362437|0)+(M.v=M.v^M.v<<4^O^O<<1)|0},M.x=0,M.y=0,M.z=0,M.w=0,M.v=0,V===(0|V)?M.x=V:F+=V;for(var I=0;I<F.length+64;I++)M.x^=0|F.charCodeAt(I),I==F.length&&(M.d=M.x<<10^M.x>>>4),M.next()}function J(V,M){return M.x=V.x,M.y=V.y,M.z=V.z,M.w=V.w,M.v=V.v,M.d=V.d,M}function re(V,M){var F=new ve(V),I=M&&M.state,O=function(){return(F.next()>>>0)/4294967296};return O.double=function(){do{var $=((F.next()>>>11)+(F.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=F.next,O.quick=O,I&&("object"==typeof I&&J(I,F),O.state=function(){return J(F,{})}),O}te&&te.exports?te.exports=re:Y.amdD&&Y.amdO?void 0!==(Q=function(){return re}.call(ke,Y,ke,te))&&(te.exports=Q):this.xorwow=re}(0,Se=Y.nmd(Se))},3818:function(Se,ke,Y){var Q;!function(z,te,le){var P,ve=256,M=le.pow(ve,6),F=le.pow(2,52),I=2*F,O=255;function B(ne,ue,fe){var Re=[],Ce=G(se((ue=1==ue?{entropy:!0}:ue||{}).entropy?[ne,pe(te)]:null==ne?function q(){try{var ne;return P&&(ne=P.randomBytes)?ne=ne(ve):(ne=new Uint8Array(ve),(z.crypto||z.msCrypto).getRandomValues(ne)),pe(ne)}catch(Re){var ue=z.navigator,fe=ue&&ue.plugins;return[+new Date,z,fe,z.screen,pe(te)]}}():ne,3),Re),Ne=new $(Re),He=function(){for(var me=Ne.g(6),Pe=M,Be=0;me<F;)me=(me+Be)*ve,Pe*=ve,Be=Ne.g(1);for(;me>=I;)me/=2,Pe/=2,Be>>>=1;return(me+Be)/Pe};return He.int32=function(){return 0|Ne.g(4)},He.quick=function(){return Ne.g(4)/4294967296},He.double=He,G(pe(Ne.S),te),(ue.pass||fe||function(me,Pe,Be,Ee){return Ee&&(Ee.S&&ce(Ee,Ne),me.state=function(){return ce(Ne,{})}),Be?(le.random=me,Pe):me})(He,Ce,"global"in ue?ue.global:this==le,ue.state)}function $(ne){var ue,fe=ne.length,Re=this,Ce=0,Ne=Re.i=Re.j=0,He=Re.S=[];for(fe||(ne=[fe++]);Ce<ve;)He[Ce]=Ce++;for(Ce=0;Ce<ve;Ce++)He[Ce]=He[Ne=O&Ne+ne[Ce%fe]+(ue=He[Ce])],He[Ne]=ue;(Re.g=function(me){for(var Pe,Be=0,Ee=Re.i,vt=Re.j,Le=Re.S;me--;)Pe=Le[Ee=O&Ee+1],Be=Be*ve+Le[O&(Le[Ee]=Le[vt=O&vt+Pe])+(Le[vt]=Pe)];return Re.i=Ee,Re.j=vt,Be})(ve)}function ce(ne,ue){return ue.i=ne.i,ue.j=ne.j,ue.S=ne.S.slice(),ue}function se(ne,ue){var Ce,fe=[],Re=typeof ne;if(ue&&"object"==Re)for(Ce in ne)try{fe.push(se(ne[Ce],ue-1))}catch(Ne){}return fe.length?fe:"string"==Re?ne:ne+"\0"}function G(ne,ue){for(var Re,fe=ne+"",Ce=0;Ce<fe.length;)ue[O&Ce]=O&(Re^=19*ue[O&Ce])+fe.charCodeAt(Ce++);return pe(ue)}function pe(ne){return String.fromCharCode.apply(0,ne)}if(G(le.random(),te),Se.exports){Se.exports=B;try{P=Y(5042)}catch(ne){}}else void 0!==(Q=function(){return B}.call(ke,Y,ke,Se))&&(Se.exports=Q)}("undefined"!=typeof self?self:this,[],Math)},2480:()=>{},5042:()=>{}},Se=>{Se(Se.s=3276)}]);