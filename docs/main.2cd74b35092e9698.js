var _z=Object.defineProperty,ux=Object.getOwnPropertySymbols,yz=Object.prototype.hasOwnProperty,Cz=Object.prototype.propertyIsEnumerable,dx=(_e,Se,z)=>Se in _e?_z(_e,Se,{enumerable:!0,configurable:!0,writable:!0,value:z}):_e[Se]=z,Ir=(_e,Se)=>{for(var z in Se||(Se={}))yz.call(Se,z)&&dx(_e,z,Se[z]);if(ux)for(var z of ux(Se))Cz.call(Se,z)&&dx(_e,z,Se[z]);return _e};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{2191:(_e,Se,z)=>{"use strict";function $(t){return"function"==typeof t}function L(t){const e=t(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const J=L(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function re(t,i){if(t){const e=t.indexOf(i);0<=e&&t.splice(e,1)}}class ue{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:n}=this;if($(n))try{n()}catch(a){i=a instanceof J?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{P(a)}catch(s){i=null!=i?i:[],s instanceof J?i=[...i,...s.errors]:i.push(s)}}if(i)throw new J(i)}}add(i){var e;if(i&&i!==this)if(this.closed)P(i);else{if(i instanceof ue){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(i)}}_hasParent(i){const{_parentage:e}=this;return e===i||Array.isArray(e)&&e.includes(i)}_addParent(i){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i}_removeParent(i){const{_parentage:e}=this;e===i?this._parentage=null:Array.isArray(e)&&re(e,i)}remove(i){const{_teardowns:e}=this;e&&re(e,i),i instanceof ue&&i._removeParent(this)}}ue.EMPTY=(()=>{const t=new ue;return t.closed=!0,t})();const K=ue.EMPTY;function ne(t){return t instanceof ue||t&&"closed"in t&&$(t.remove)&&$(t.add)&&$(t.unsubscribe)}function P(t){$(t)?t():t.unsubscribe()}const R={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},O={setTimeout(...t){const{delegate:i}=O;return((null==i?void 0:i.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:i}=O;return((null==i?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:void 0};function A(t){O.setTimeout(()=>{const{onUnhandledError:i}=R;if(!i)throw t;i(t)})}function E(){}const M=ae("C",void 0,void 0);function ae(t,i,e){return{kind:t,value:i,error:e}}let ie=null;function B(t){if(R.useDeprecatedSynchronousErrorHandling){const i=!ie;if(i&&(ie={errorThrown:!1,error:null}),t(),i){const{errorThrown:e,error:n}=ie;if(ie=null,e)throw n}}else t()}class le extends ue{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,ne(i)&&i.add(this)):this.destination=he}static create(i,e,n){return new we(i,e,n)}next(i){this.isStopped?Be(function U(t){return ae("N",t,void 0)}(i),this):this._next(i)}error(i){this.isStopped?Be(function V(t){return ae("E",void 0,t)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?Be(M,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ee=Function.prototype.bind;function se(t,i){return ee.call(t,i)}class oe{constructor(i){this.partialObserver=i}next(i){const{partialObserver:e}=this;if(e.next)try{e.next(i)}catch(n){ve(n)}}error(i){const{partialObserver:e}=this;if(e.error)try{e.error(i)}catch(n){ve(n)}else ve(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(e){ve(e)}}}class we extends le{constructor(i,e,n){let r;if(super(),$(i)||!i)r={next:null!=i?i:void 0,error:null!=e?e:void 0,complete:null!=n?n:void 0};else{let a;this&&R.useDeprecatedNextContext?(a=Object.create(i),a.unsubscribe=()=>this.unsubscribe(),r={next:i.next&&se(i.next,a),error:i.error&&se(i.error,a),complete:i.complete&&se(i.complete,a)}):r=i}this.destination=new oe(r)}}function ve(t){R.useDeprecatedSynchronousErrorHandling?function j(t){R.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=t)}(t):A(t)}function Be(t,i){const{onStoppedNotification:e}=R;e&&O.setTimeout(()=>e(t,i))}const he={closed:!0,next:E,error:function Pe(t){throw t},complete:E},Re="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ie(t){return t}let Ne=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(e,n,r){const a=function ye(t){return t&&t instanceof le||function Wt(t){return t&&$(t.next)&&$(t.error)&&$(t.complete)}(t)&&ne(t)}(e)?e:new we(e,n,r);return B(()=>{const{operator:s,source:o}=this;a.add(s?s.call(a,o):o?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=It(n))((r,a)=>{const s=new we({next:o=>{try{e(o)}catch(l){a(l),s.unsubscribe()}},error:a,complete:r});this.subscribe(s)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Re](){return this}pipe(...e){return function tt(t){return 0===t.length?Ie:1===t.length?t[0]:function(e){return t.reduce((n,r)=>r(n),e)}}(e)(this)}toPromise(e){return new(e=It(e))((n,r)=>{let a;this.subscribe(s=>a=s,s=>r(s),()=>n(a))})}}return t.create=i=>new t(i),t})();function It(t){var i;return null!==(i=null!=t?t:R.Promise)&&void 0!==i?i:Promise}const Ae=L(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ge=(()=>{class t extends Ne{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new De(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new Ae}next(e){B(()=>{if(this._throwIfClosed(),!this.isStopped){const n=this.observers.slice();for(const r of n)r.next(e)}})}error(e){B(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){B(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:a}=this;return n||r?K:(a.push(e),new ue(()=>re(a,e)))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:a}=this;n?e.error(r):a&&e.complete()}asObservable(){const e=new Ne;return e.source=this,e}}return t.create=(i,e)=>new De(i,e),t})();class De extends ge{constructor(i,e){super(),this.destination=i,this.source=e}next(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,i)}error(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,i)}complete(){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.complete)||void 0===e||e.call(i)}_subscribe(i){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(i))&&void 0!==n?n:K}}function wn(t){return $(null==t?void 0:t.lift)}function gt(t){return i=>{if(wn(i))return i.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ft(t,i,e,n,r){return new Bt(t,i,e,n,r)}class Bt extends le{constructor(i,e,n,r,a,s){super(i),this.onFinalize=a,this.shouldUnsubscribe=s,this._next=e?function(o){try{e(o)}catch(l){i.error(l)}}:super._next,this._error=r?function(o){try{r(o)}catch(l){i.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(o){i.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}}}function Mt(t,i){return gt((e,n)=>{let r=0;e.subscribe(Ft(n,a=>{n.next(t.call(i,a,r++))}))})}function Ue(t,i,e,n){var s,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(i,e,a):s(i,e))||a);return r>3&&a&&Object.defineProperty(i,e,a),a}function We(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)}function ur(t){return this instanceof ur?(this.v=t,this):new ur(t)}function Us(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(t,i||[]),a=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){n[h]&&(r[h]=function(p){return new Promise(function(b,y){a.push([h,p,b,y])>1||o(h,p)})})}function o(h,p){try{!function l(h){h.value instanceof ur?Promise.resolve(h.value.v).then(c,u):d(a[0][2],h)}(n[h](p))}catch(b){d(a[0][3],b)}}function c(h){o("next",h)}function u(h){o("throw",h)}function d(h,p){h(p),a.shift(),a.length&&o(a[0][0],a[0][1])}}function Bu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=function lr(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=t[a]&&function(s){return new Promise(function(o,l){!function r(a,s,o,l){Promise.resolve(l).then(function(c){a({value:c,done:o})},s)}(o,l,(s=t[a](s)).done,s.value)})}}}const jl=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Lu(t){return $(null==t?void 0:t.then)}function zl(t){return $(t[Re])}function Uu(t){return Symbol.asyncIterator&&$(null==t?void 0:t[Symbol.asyncIterator])}function $l(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Wl=function kf(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Hu(t){return $(null==t?void 0:t[Wl])}function Gu(t){return Us(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:n,done:r}=yield ur(e.read());if(r)return yield ur(void 0);yield yield ur(n)}}finally{e.releaseLock()}})}function ju(t){return $(null==t?void 0:t.getReader)}function pi(t){if(t instanceof Ne)return t;if(null!=t){if(zl(t))return function Af(t){return new Ne(i=>{const e=t[Re]();if($(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(jl(t))return function Pf(t){return new Ne(i=>{for(let e=0;e<t.length&&!i.closed;e++)i.next(t[e]);i.complete()})}(t);if(Lu(t))return function zu(t){return new Ne(i=>{t.then(e=>{i.closed||(i.next(e),i.complete())},e=>i.error(e)).then(null,A)})}(t);if(Uu(t))return ql(t);if(Hu(t))return function Ef(t){return new Ne(i=>{for(const e of t)if(i.next(e),i.closed)return;i.complete()})}(t);if(ju(t))return function qi(t){return ql(Gu(t))}(t)}throw $l(t)}function ql(t){return new Ne(i=>{(function Ca(t,i){var e,n,r,a;return function yo(t,i,e,n){return new(e||(e=Promise))(function(a,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?a(u.value):function r(a){return a instanceof e?a:new e(function(s){s(a)})}(u.value).then(o,l)}c((n=n.apply(t,i||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Bu(t);!(n=yield e.next()).done;)if(i.next(n.value),i.closed)return}catch(s){r={error:s}}finally{try{n&&!n.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}i.complete()})})(t,i).catch(e=>i.error(e))})}function Or(t,i,e,n=0,r=!1){const a=i.schedule(function(){e(),r?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(a),!r)return a}function Zn(t,i,e=1/0){return $(i)?Zn((n,r)=>Mt((a,s)=>i(n,a,r,s))(pi(t(n,r))),e):("number"==typeof i&&(e=i),gt((n,r)=>function If(t,i,e,n,r,a,s,o){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&i.complete()},p=y=>c<n?b(y):l.push(y),b=y=>{a&&i.next(y),c++;let w=!1;pi(e(y,u++)).subscribe(Ft(i,S=>{null==r||r(S),a?p(S):i.next(S)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;l.length&&c<n;){const S=l.shift();s?Or(i,s,()=>b(S)):b(S)}h()}catch(S){i.error(S)}}))};return t.subscribe(Ft(i,p,()=>{d=!0,h()})),()=>{null==o||o()}}(n,r,t,e)))}function Xl(t=1/0){return Zn(Ie,t)}const Zr=new Ne(t=>t.complete());function Lv(t){return t&&$(t.schedule)}function Nf(t){return t[t.length-1]}function $u(t){return $(Nf(t))?t.pop():void 0}function Yl(t){return Lv(Nf(t))?t.pop():void 0}function Uv(t,i=0){return gt((e,n)=>{e.subscribe(Ft(n,r=>Or(n,t,()=>n.next(r),i),()=>Or(n,t,()=>n.complete(),i),r=>Or(n,t,()=>n.error(r),i)))})}function Hv(t,i=0){return gt((e,n)=>{n.add(t.schedule(()=>e.subscribe(n),i))})}function Gv(t,i){if(!t)throw new Error("Iterable cannot be null");return new Ne(e=>{Or(e,i,()=>{const n=t[Symbol.asyncIterator]();Or(e,i,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Ri(t,i){return i?function _x(t,i){if(null!=t){if(zl(t))return function px(t,i){return pi(t).pipe(Hv(i),Uv(i))}(t,i);if(jl(t))return function mx(t,i){return new Ne(e=>{let n=0;return i.schedule(function(){n===t.length?e.complete():(e.next(t[n++]),e.closed||this.schedule())})})}(t,i);if(Lu(t))return function gx(t,i){return pi(t).pipe(Hv(i),Uv(i))}(t,i);if(Uu(t))return Gv(t,i);if(Hu(t))return function vx(t,i){return new Ne(e=>{let n;return Or(e,i,()=>{n=t[Wl](),Or(e,i,()=>{let r,a;try{({value:r,done:a}=n.next())}catch(s){return void e.error(s)}a?e.complete():e.next(r)},0,!0)}),()=>$(null==n?void 0:n.return)&&n.return()})}(t,i);if(ju(t))return function bx(t,i){return Gv(Gu(t),i)}(t,i)}throw $l(t)}(t,i):pi(t)}function jv(...t){const i=Yl(t),e=function fx(t,i){return"number"==typeof Nf(t)?t.pop():i}(t,1/0),n=t;return n.length?1===n.length?pi(n[0]):Xl(e)(Ri(n,i)):Zr}function xi(t){return t<=0?()=>Zr:gt((i,e)=>{let n=0;i.subscribe(Ft(e,r=>{++n<=t&&(e.next(r),t<=n&&e.complete())}))})}function zv(t={}){const{connector:i=(()=>new ge),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=t;return a=>{let s=null,o=null,l=null,c=0,u=!1,d=!1;const h=()=>{null==o||o.unsubscribe(),o=null},p=()=>{h(),s=l=null,u=d=!1},b=()=>{const y=s;p(),null==y||y.unsubscribe()};return gt((y,w)=>{c++,!d&&!u&&h();const S=l=null!=l?l:i();w.add(()=>{c--,0===c&&!d&&!u&&(o=Of(b,r))}),S.subscribe(w),s||(s=new we({next:C=>S.next(C),error:C=>{d=!0,h(),o=Of(p,e,C),S.error(C)},complete:()=>{u=!0,h(),o=Of(p,n),S.complete()}}),Ri(y).subscribe(s))})(a)}}function Of(t,i,...e){return!0===i?(t(),null):!1===i?null:i(...e).pipe(xi(1)).subscribe(()=>t())}function Sn(t){for(let i in t)if(t[i]===Sn)return i;throw Error("Could not find renamed property on target object.")}function Vf(t,i){for(const e in i)i.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=i[e])}function fn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(fn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const e=i.indexOf("\n");return-1===e?i:i.substring(0,e)}function Ff(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const yx=Sn({__forward_ref__:Sn});function tn(t){return t.__forward_ref__=tn,t.toString=function(){return fn(this())},t}function Nt(t){return $v(t)?t():t}function $v(t){return"function"==typeof t&&t.hasOwnProperty(yx)&&t.__forward_ref__===tn}class Jt extends Error{constructor(i,e){super(function Bf(t,i){return`NG0${Math.abs(t)}${i?": "+i:""}`}(i,e)),this.code=i}}function wt(t){return"string"==typeof t?t:null==t?"":String(t)}function Xi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():wt(t)}function Wu(t,i){const e=i?` in ${i}`:"";throw new Jt(-201,`No provider for ${Xi(t)} found${e}`)}function Nn(t,i,e,n){throw new Error(`ASSERTION ERROR: ${t}`+(null==n?"":` [Expected=> ${e} ${n} ${i} <=Actual]`))}function Qe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ln(t){return{providers:t.providers||[],imports:t.imports||[]}}function Lf(t){return Wv(t,qu)||Wv(t,Xv)}function Wv(t,i){return t.hasOwnProperty(i)?t[i]:null}function qv(t){return t&&(t.hasOwnProperty(Uf)||t.hasOwnProperty(xx))?t[Uf]:null}const qu=Sn({\u0275prov:Sn}),Uf=Sn({\u0275inj:Sn}),Xv=Sn({ngInjectableDef:Sn}),xx=Sn({ngInjectorDef:Sn});var kt=(()=>((kt=kt||{})[kt.Default=0]="Default",kt[kt.Host=1]="Host",kt[kt.Self=2]="Self",kt[kt.SkipSelf=4]="SkipSelf",kt[kt.Optional=8]="Optional",kt))();let Hf;function gs(t){const i=Hf;return Hf=t,i}function Yv(t,i,e){const n=Lf(t);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&kt.Optional?null:void 0!==i?i:void Wu(fn(t),"Injector")}function ms(t){return{toString:t}.toString()}var Jr=(()=>((Jr=Jr||{})[Jr.OnPush=0]="OnPush",Jr[Jr.Default=1]="Default",Jr))(),wa=(()=>{return(t=wa||(wa={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",wa;var t})();const kx="undefined"!=typeof globalThis&&globalThis,Ax="undefined"!=typeof window&&window,Px="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,yn=kx||"undefined"!=typeof global&&global||Ax||Px,Do={},Tn=[],Xu=Sn({\u0275cmp:Sn}),Gf=Sn({\u0275dir:Sn}),jf=Sn({\u0275pipe:Sn}),Qv=Sn({\u0275mod:Sn}),$a=Sn({\u0275fac:Sn}),Ql=Sn({__NG_ELEMENT_ID__:Sn});let Ex=0;function st(t){return ms(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Jr.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Tn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||wa.Emulated,id:"c",styles:t.styles||Tn,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,s=t.pipes;return n.id+=Ex++,n.inputs=eb(t.inputs,e),n.outputs=eb(t.outputs),a&&a.forEach(o=>o(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Kv):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Zv):null,n})}function Kv(t){return Bi(t)||function vs(t){return t[Gf]||null}(t)}function Zv(t){return function Hs(t){return t[jf]||null}(t)}const Jv={};function pn(t){return ms(()=>{const i={type:t.type,bootstrap:t.bootstrap||Tn,declarations:t.declarations||Tn,imports:t.imports||Tn,exports:t.exports||Tn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Jv[t.id]=t.type),i})}function eb(t,i){if(null==t)return Do;const e={};for(const n in t)if(t.hasOwnProperty(n)){let r=t[n],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=n,i&&(i[r]=a)}return e}const Le=st;function dr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Bi(t){return t[Xu]||null}function Vr(t,i){const e=t[Qv]||null;if(!e&&!0===i)throw new Error(`Type ${fn(t)} does not have '\u0275mod' property.`);return e}function Sa(t){return Array.isArray(t)&&"object"==typeof t[1]}function ta(t){return Array.isArray(t)&&!0===t[1]}function Wf(t){return 0!=(8&t.flags)}function Zu(t){return 2==(2&t.flags)}function Ju(t){return 1==(1&t.flags)}function na(t){return null!==t.template}function Bx(t){return 0!=(512&t[2])}function $s(t,i){return t.hasOwnProperty($a)?t[$a]:null}class Hx{constructor(i,e,n){this.previousValue=i,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ki(){return nb}function nb(t){return t.type.prototype.ngOnChanges&&(t.setInput=jx),Gx}function Gx(){const t=rb(this),i=null==t?void 0:t.current;if(i){const e=t.previous;if(e===Do)t.previous=i;else for(let n in i)e[n]=i[n];t.current=null,this.ngOnChanges(i)}}function jx(t,i,e,n){const r=rb(t)||function zx(t,i){return t[ib]=i}(t,{previous:Do,current:null}),a=r.current||(r.current={}),s=r.previous,o=this.declaredInputs[e],l=s[o];a[o]=new Hx(l&&l.currentValue,i,s===Do),t[n]=i}ki.ngInherit=!0;const ib="__ngSimpleChanges__";function rb(t){return t[ib]||null}let Kf;function Zf(){return void 0!==Kf?Kf:"undefined"!=typeof document?document:void 0}function qn(t){return!!t.listen}const ab={createRenderer:(t,i)=>Zf()};function li(t){for(;Array.isArray(t);)t=t[0];return t}function ed(t,i){return li(i[t])}function Lr(t,i){return li(i[t.index])}function Jf(t,i){return t.data[i]}function Ao(t,i){return t[i]}function wr(t,i){const e=i[t];return Sa(e)?e:e[0]}function sb(t){return 4==(4&t[2])}function ep(t){return 128==(128&t[2])}function bs(t,i){return null==i?null:t[i]}function ob(t){t[18]=0}function tp(t,i){t[5]+=i;let e=t,n=t[3];for(;null!==n&&(1===i&&1===e[5]||-1===i&&0===e[5]);)n[5]+=i,e=n,n=n[3]}const bt={lFrame:gb(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function lb(){return bt.bindingsEnabled}function Te(){return bt.lFrame.lView}function en(){return bt.lFrame.tView}function X(t){return bt.lFrame.contextLView=t,t[8]}function gi(){let t=cb();for(;null!==t&&64===t.type;)t=t.parent;return t}function cb(){return bt.lFrame.currentTNode}function ec(){const t=bt.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}function Ta(t,i){const e=bt.lFrame;e.currentTNode=t,e.isParent=i}function np(){return bt.lFrame.isParent}function ip(){bt.lFrame.isParent=!1}function td(){return bt.isInCheckNoChangesMode}function nd(t){bt.isInCheckNoChangesMode=t}function Yi(){const t=bt.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function Wa(){return bt.lFrame.bindingIndex}function Po(){return bt.lFrame.bindingIndex++}function qa(t){const i=bt.lFrame,e=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,e}function db(t){bt.lFrame.inI18n=t}function oM(t,i){const e=bt.lFrame;e.bindingIndex=e.bindingRootIndex=t,rp(i)}function rp(t){bt.lFrame.currentDirectiveIndex=t}function hb(){return bt.lFrame.currentQueryIndex}function sp(t){bt.lFrame.currentQueryIndex=t}function cM(t){const i=t[1];return 2===i.type?i.declTNode:1===i.type?t[6]:null}function fb(t,i,e){if(e&kt.SkipSelf){let r=i,a=t;for(;!(r=r.parent,null!==r||e&kt.Host||(r=cM(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;i=r,t=a}const n=bt.lFrame=pb();return n.currentTNode=i,n.lView=t,!0}function id(t){const i=pb(),e=t[1];bt.lFrame=i,i.currentTNode=e.firstChild,i.lView=t,i.tView=e,i.contextLView=t,i.bindingIndex=e.bindingStartIndex,i.inI18n=!1}function pb(){const t=bt.lFrame,i=null===t?null:t.child;return null===i?gb(t):i}function gb(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function mb(){const t=bt.lFrame;return bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const vb=mb;function rd(){const t=mb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Qi(){return bt.lFrame.selectedIndex}function _s(t){bt.lFrame.selectedIndex=t}function Xn(){const t=bt.lFrame;return Jf(t.tView,t.selectedIndex)}function ad(t,i){for(let e=i.directiveStart,n=i.directiveEnd;e<n;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:o,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;s&&(t.contentHooks||(t.contentHooks=[])).push(-e,s),o&&((t.contentHooks||(t.contentHooks=[])).push(e,o),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,o)),l&&(t.viewHooks||(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks||(t.viewHooks=[])).push(e,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks||(t.destroyHooks=[])).push(e,u)}}function sd(t,i,e){bb(t,i,3,e)}function od(t,i,e,n){(3&t[2])===e&&bb(t,i,e,n)}function op(t,i){let e=t[2];(3&e)===i&&(e&=2047,e+=1,t[2]=e)}function bb(t,i,e,n){const a=null!=n?n:-1,s=i.length-1;let o=0;for(let l=void 0!==n?65535&t[18]:0;l<s;l++)if("number"==typeof i[l+1]){if(o=i[l],null!=n&&o>=n)break}else i[l]<0&&(t[18]+=65536),(o<a||-1==a)&&(bM(t,e,i,l),t[18]=(4294901760&t[18])+l+2),l++}function bM(t,i,e,n){const r=e[n]<0,a=e[n+1],o=t[r?-e[n]:e[n]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===i){t[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}class tc{constructor(i,e,n){this.factory=i,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ld(t,i,e){const n=qn(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const s=e[r++],o=e[r++],l=e[r++];n?t.setAttribute(i,o,l,s):i.setAttributeNS(s,o,l)}else{const s=a,o=e[++r];cp(s)?n&&t.setProperty(i,s,o):n?t.setAttribute(i,s,o):i.setAttribute(s,o),r++}}return r}function _b(t){return 3===t||4===t||6===t}function cp(t){return 64===t.charCodeAt(0)}function cd(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let e=-1;for(let n=0;n<i.length;n++){const r=i[n];"number"==typeof r?e=r:0===e||yb(t,e,r,null,-1===e||2===e?i[++n]:null)}}return t}function yb(t,i,e,n,r){let a=0,s=t.length;if(-1===i)s=-1;else for(;a<t.length;){const o=t[a++];if("number"==typeof o){if(o===i){s=-1;break}if(o>i){s=a-1;break}}}for(;a<t.length;){const o=t[a];if("number"==typeof o)break;if(o===e){if(null===n)return void(null!==r&&(t[a+1]=r));if(n===t[a+1])return void(t[a+2]=r)}a++,null!==n&&a++,null!==r&&a++}-1!==s&&(t.splice(s,0,i),a=s+1),t.splice(a++,0,e),null!==n&&t.splice(a++,0,n),null!==r&&t.splice(a++,0,r)}function Cb(t){return-1!==t}function Eo(t){return 32767&t}function Io(t,i){let e=function SM(t){return t>>16}(t),n=i;for(;e>0;)n=n[15],e--;return n}let up=!0;function ud(t){const i=up;return up=t,i}let TM=0;function ic(t,i){const e=hp(t,i);if(-1!==e)return e;const n=i[1];n.firstCreatePass&&(t.injectorIndex=i.length,dp(n.data,t),dp(i,null),dp(n.blueprint,null));const r=dd(t,i),a=t.injectorIndex;if(Cb(r)){const s=Eo(r),o=Io(r,i),l=o[1].data;for(let c=0;c<8;c++)i[a+c]=o[s+c]|l[s+c]}return i[a+8]=r,a}function dp(t,i){t.push(0,0,0,0,0,0,0,0,i)}function hp(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function dd(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,n=null,r=i;for(;null!==r;){const a=r[1],s=a.type;if(n=2===s?a.declTNode:1===s?r[6]:null,null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function hd(t,i,e){!function DM(t,i,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Ql)&&(n=e[Ql]),null==n&&(n=e[Ql]=TM++);const r=255&n;i.data[t+(r>>5)]|=1<<r}(t,i,e)}function Tb(t,i,e){if(e&kt.Optional)return t;Wu(i,"NodeInjector")}function Db(t,i,e,n){if(e&kt.Optional&&void 0===n&&(n=null),0==(e&(kt.Self|kt.Host))){const r=t[9],a=gs(void 0);try{return r?r.get(i,n,e&kt.Optional):Yv(i,n,e&kt.Optional)}finally{gs(a)}}return Tb(n,i,e)}function Rb(t,i,e,n=kt.Default,r){if(null!==t){const a=function kM(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(Ql)?t[Ql]:void 0;return"number"==typeof i?i>=0?255&i:xM:i}(e);if("function"==typeof a){if(!fb(i,t,n))return n&kt.Host?Tb(r,e,n):Db(i,e,n,r);try{const s=a(n);if(null!=s||n&kt.Optional)return s;Wu(e)}finally{vb()}}else if("number"==typeof a){let s=null,o=hp(t,i),l=-1,c=n&kt.Host?i[16][6]:null;for((-1===o||n&kt.SkipSelf)&&(l=-1===o?dd(t,i):i[o+8],-1!==l&&kb(n,!1)?(s=i[1],o=Eo(l),i=Io(l,i)):o=-1);-1!==o;){const u=i[1];if(Mb(a,o,u.data)){const d=MM(o,i,e,s,n,c);if(d!==xb)return d}l=i[o+8],-1!==l&&kb(n,i[1].data[o+8]===c)&&Mb(a,o,i)?(s=u,o=Eo(l),i=Io(l,i)):o=-1}}}return Db(i,e,n,r)}const xb={};function xM(){return new No(gi(),Te())}function MM(t,i,e,n,r,a){const s=i[1],o=s.data[t+8],u=fd(o,s,e,null==n?Zu(o)&&up:n!=s&&0!=(3&o.type),r&kt.Host&&a===o);return null!==u?rc(i,s,u,o):xb}function fd(t,i,e,n,r){const a=t.providerIndexes,s=i.data,o=1048575&a,l=t.directiveStart,u=a>>20,h=r?o+u:t.directiveEnd;for(let p=n?o:o+u;p<h;p++){const b=s[p];if(p<l&&e===b||p>=l&&b.type===e)return p}if(r){const p=s[l];if(p&&na(p)&&p.type===e)return l}return null}function rc(t,i,e,n){let r=t[e];const a=i.data;if(function _M(t){return t instanceof tc}(r)){const s=r;s.resolving&&function Cx(t,i){const e=i?`. Dependency path: ${i.join(" > ")} > ${t}`:"";throw new Jt(-200,`Circular dependency in DI detected for ${t}${e}`)}(Xi(a[e]));const o=ud(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?gs(s.injectImpl):null;fb(t,n,kt.Default);try{r=t[e]=s.factory(void 0,a,t,n),i.firstCreatePass&&e>=n.directiveStart&&function vM(t,i,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:a}=i.type.prototype;if(n){const s=nb(i);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,s)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],i)}finally{null!==l&&gs(l),ud(o),s.resolving=!1,vb()}}return r}function Mb(t,i,e){return!!(e[i+(t>>5)]&1<<t)}function kb(t,i){return!(t&kt.Self||t&kt.Host&&i)}class No{constructor(i,e){this._tNode=i,this._lView=e}get(i,e,n){return Rb(this._tNode,this._lView,i,n,e)}}function Ui(t){return ms(()=>{const i=t.prototype.constructor,e=i[$a]||fp(i),n=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==n;){const a=r[$a]||fp(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function fp(t){return $v(t)?()=>{const i=fp(Nt(t));return i&&i()}:$s(t)}const Vo="__parameters__";function Bo(t,i,e){return ms(()=>{const n=function pp(t){return function(...e){if(t){const n=t(...e);for(const r in n)this[r]=n[r]}}}(i);function r(...a){if(this instanceof r)return n.apply(this,a),this;const s=new r(...a);return o.annotation=s,o;function o(l,c,u){const d=l.hasOwnProperty(Vo)?l[Vo]:Object.defineProperty(l,Vo,{value:[]})[Vo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class Ut{constructor(i,e){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Qe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const PM=new Ut("AnalyzeForEntryComponents");function Ur(t,i){void 0===i&&(i=t);for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)?(i===t&&(i=t.slice(0,e)),Ur(n,i)):i!==t&&i.push(n)}return i}function Da(t,i){t.forEach(e=>Array.isArray(e)?Da(e,i):i(e))}function Pb(t,i,e){i>=t.length?t.push(e):t.splice(i,0,e)}function pd(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function oc(t,i){const e=[];for(let n=0;n<t;n++)e.push(i);return e}function Sr(t,i,e){let n=Lo(t,i);return n>=0?t[1|n]=e:(n=~n,function NM(t,i,e,n){let r=t.length;if(r==i)t.push(e,n);else if(1===r)t.push(n,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>i;)t[r]=t[r-2],r--;t[i]=e,t[i+1]=n}}(t,n,i,e)),n}function mp(t,i){const e=Lo(t,i);if(e>=0)return t[1|e]}function Lo(t,i){return function Nb(t,i,e){let n=0,r=t.length>>e;for(;r!==n;){const a=n+(r-n>>1),s=t[a<<e];if(i===s)return a<<e;s>i?r=a:n=a+1}return~(r<<e)}(t,i,1)}const lc={},bp="__NG_DI_FLAG__",md="ngTempTokenPath",HM=/\n/gm,Vb="__source",jM=Sn({provide:String,useValue:Sn});let cc;function Fb(t){const i=cc;return cc=t,i}function zM(t,i=kt.Default){if(void 0===cc)throw new Jt(203,"");return null===cc?Yv(t,void 0,i):cc.get(t,i&kt.Optional?null:void 0,i)}function Ve(t,i=kt.Default){return(function Mx(){return Hf}()||zM)(Nt(t),i)}function _p(t){const i=[];for(let e=0;e<t.length;e++){const n=Nt(t[e]);if(Array.isArray(n)){if(0===n.length)throw new Jt(900,"");let r,a=kt.Default;for(let s=0;s<n.length;s++){const o=n[s],l=$M(o);"number"==typeof l?-1===l?r=o.token:a|=l:r=o}i.push(Ve(r,a))}else i.push(Ve(n))}return i}function uc(t,i){return t[bp]=i,t.prototype[bp]=i,t}function $M(t){return t[bp]}const dc=uc(Bo("Inject",t=>({token:t})),-1),Ra=uc(Bo("Optional"),8),Uo=uc(Bo("SkipSelf"),4);let bd,_d;function Go(t){var i;return(null===(i=function Cp(){if(void 0===bd&&(bd=null,yn.trustedTypes))try{bd=yn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return bd}())||void 0===i?void 0:i.createHTML(t))||t}function jb(t){var i;return(null===(i=function wp(){if(void 0===_d&&(_d=null,yn.trustedTypes))try{_d=yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return _d}())||void 0===i?void 0:i.createHTML(t))||t}class qs{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class a2 extends qs{getTypeName(){return"HTML"}}class s2 extends qs{getTypeName(){return"Style"}}class o2 extends qs{getTypeName(){return"Script"}}class l2 extends qs{getTypeName(){return"URL"}}class c2 extends qs{getTypeName(){return"ResourceURL"}}function Tr(t){return t instanceof qs?t.changingThisBreaksApplicationSecurity:t}function xa(t,i){const e=Wb(t);if(null!=e&&e!==i){if("ResourceURL"===e&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===i}function Wb(t){return t instanceof qs&&t.getTypeName()||null}function qb(t){const i=new m2(t);return function v2(){try{return!!(new window.DOMParser).parseFromString(Go(""),"text/html")}catch(t){return!1}}()?new g2(i):i}class g2{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const e=(new window.DOMParser).parseFromString(Go(i),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(i):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class m2{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(i){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Go(i),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Go(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(i){const e=i.attributes;for(let r=e.length-1;0<r;r--){const s=e.item(r).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&i.removeAttribute(s)}let n=i.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const b2=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_2=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fc(t){return(t=String(t)).match(b2)||t.match(_2)?t:"unsafe:"+t}function Xb(t){return(t=String(t)).split(",").map(i=>fc(i.trim())).join(", ")}function Ma(t){const i={};for(const e of t.split(","))i[e]=!0;return i}function pc(...t){const i={};for(const e of t)for(const n in e)e.hasOwnProperty(n)&&(i[n]=!0);return i}const Yb=Ma("area,br,col,hr,img,wbr"),Qb=Ma("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Kb=Ma("rp,rt"),Sp=pc(Yb,pc(Qb,Ma("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pc(Kb,Ma("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pc(Kb,Qb)),Tp=Ma("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Dp=Ma("srcset"),Zb=pc(Tp,Dp,Ma("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ma("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),y2=Ma("script,style,template");class C2{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let e=i.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(i){const e=i.nodeName.toLowerCase();if(!Sp.hasOwnProperty(e))return this.sanitizedSomething=!0,!y2.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=i.attributes;for(let r=0;r<n.length;r++){const a=n.item(r),s=a.name,o=s.toLowerCase();if(!Zb.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let l=a.value;Tp[o]&&(l=fc(l)),Dp[o]&&(l=Xb(l)),this.buf.push(" ",s,'="',Jb(l),'"')}return this.buf.push(">"),!0}endElement(i){const e=i.nodeName.toLowerCase();Sp.hasOwnProperty(e)&&!Yb.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(i){this.buf.push(Jb(i))}checkClobberedElement(i,e){if(e&&(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return e}}const w2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S2=/([^\#-~ |!])/g;function Jb(t){return t.replace(/&/g,"&amp;").replace(w2,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(S2,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yd;function e1(t,i){let e=null;try{yd=yd||qb(t);let n=i?String(i):"";e=yd.getInertBodyElement(n);let r=5,a=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=a,a=e.innerHTML,e=yd.getInertBodyElement(n)}while(n!==a);return Go((new C2).sanitizeChildren(Rp(e)||e))}finally{if(e){const n=Rp(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Rp(t){return"content"in t&&function T2(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Xt=(()=>((Xt=Xt||{})[Xt.NONE=0]="NONE",Xt[Xt.HTML=1]="HTML",Xt[Xt.STYLE=2]="STYLE",Xt[Xt.SCRIPT=3]="SCRIPT",Xt[Xt.URL=4]="URL",Xt[Xt.RESOURCE_URL=5]="RESOURCE_URL",Xt))();function Dn(t){const i=function gc(){const t=Te();return t&&t[12]}();return i?jb(i.sanitize(Xt.HTML,t)||""):xa(t,"HTML")?jb(Tr(t)):e1(Zf(),wt(t))}const i1="__ngContext__";function Hi(t,i){t[i1]=i}function kp(t){const i=function mc(t){return t[i1]||null}(t);return i?Array.isArray(i)?i:i.lView:null}function Pp(t){return t.ngOriginalError}function U2(t,...i){t.error(...i)}class jo{constructor(){this._console=console}handleError(i){const e=this._findOriginalError(i),n=function L2(t){return t&&t.ngErrorLogger||U2}(i);n(this._console,"ERROR",i),e&&n(this._console,"ORIGINAL ERROR",e)}_findOriginalError(i){let e=i&&Pp(i);for(;e&&Pp(e);)e=Pp(e);return e||null}}const j2=/^>|^->|<!--|-->|--!>|<!-$/g,z2=/(<|>)/;const l1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(yn))();function Xa(t){return t.ownerDocument.defaultView}function ka(t){return t instanceof Function?t():t}var Dr=(()=>((Dr=Dr||{})[Dr.Important=1]="Important",Dr[Dr.DashCase=2]="DashCase",Dr))();let Ep;function Ip(t,i){return Ep(t,i)}function vc(t){const i=t[3];return ta(i)?i[3]:i}function Np(t){return f1(t[13])}function Op(t){return f1(t[4])}function f1(t){for(;null!==t&&!ta(t);)t=t[4];return t}function $o(t,i,e,n,r){if(null!=n){let a,s=!1;ta(n)?a=n:Sa(n)&&(s=!0,n=n[0]);const o=li(n);0===t&&null!==e?null==r?_1(i,e,o):Xs(i,e,o,r||null,!0):1===t&&null!==e?Xs(i,e,o,r||null,!0):2===t?R1(i,o,s):3===t&&i.destroyNode(o),null!=a&&function dk(t,i,e,n,r){const a=e[7];a!==li(e)&&$o(i,t,n,a,r);for(let o=10;o<e.length;o++){const l=e[o];bc(l[1],l,t,i,n,a)}}(i,t,a,e,r)}}function Vp(t,i){return qn(t)?t.createText(i):t.createTextNode(i)}function p1(t,i,e){qn(t)?t.setValue(i,e):i.textContent=e}function J2(t,i){return t.createComment(function o1(t){return t.replace(j2,i=>i.replace(z2,"\u200b$1\u200b"))}(i))}function Fp(t,i,e){if(qn(t))return t.createElement(i,e);{const n=null!==e?function Xx(t){const i=t.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(e):null;return null===n?t.createElement(i):t.createElementNS(n,i)}}function g1(t,i){const e=t[9],n=e.indexOf(i),r=i[3];1024&i[2]&&(i[2]&=-1025,tp(r,-1)),e.splice(n,1)}function Bp(t,i){if(t.length<=10)return;const e=10+i,n=t[e];if(n){const r=n[17];null!==r&&r!==t&&g1(r,n),i>0&&(t[e-1][4]=n[4]);const a=pd(t,10+i);!function ek(t,i){bc(t,i,i[11],2,null,null),i[0]=null,i[6]=null}(n[1],n);const s=a[19];null!==s&&s.detachView(a[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function m1(t,i){if(!(256&i[2])){const e=i[11];qn(e)&&e.destroyNode&&bc(t,i,e,3,null,null),function ik(t){let i=t[13];if(!i)return Lp(t[1],t);for(;i;){let e=null;if(Sa(i))e=i[13];else{const n=i[10];n&&(e=n)}if(!e){for(;i&&!i[4]&&i!==t;)Sa(i)&&Lp(i[1],i),i=i[3];null===i&&(i=t),Sa(i)&&Lp(i[1],i),e=i&&i[4]}i=e}}(i)}}function Lp(t,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function ok(t,i){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let n=0;n<e.length;n+=2){const r=i[e[n]];if(!(r instanceof tc)){const a=e[n+1];if(Array.isArray(a))for(let s=0;s<a.length;s+=2){const o=r[a[s]],l=a[s+1];try{l.call(o)}finally{}}else try{a.call(r)}finally{}}}}(t,i),function sk(t,i){const e=t.cleanup,n=i[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const s=e[a+1],o="function"==typeof s?s(i):li(i[s]),l=n[r=e[a+2]],c=e[a+3];"boolean"==typeof c?o.removeEventListener(e[a],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),a+=2}else{const s=n[r=e[a+1]];e[a].call(s)}if(null!==n){for(let a=r+1;a<n.length;a++)n[a]();i[7]=null}}(t,i),1===i[1].type&&qn(i[11])&&i[11].destroy();const e=i[17];if(null!==e&&ta(i[3])){e!==i[3]&&g1(e,i);const n=i[19];null!==n&&n.detachView(t)}}}function v1(t,i,e){return b1(t,i.parent,e)}function b1(t,i,e){let n=i;for(;null!==n&&40&n.type;)n=(i=n).parent;if(null===n)return e[0];if(2&n.flags){const r=t.data[n.directiveStart].encapsulation;if(r===wa.None||r===wa.Emulated)return null}return Lr(n,e)}function Xs(t,i,e,n,r){qn(t)?t.insertBefore(i,e,n,r):i.insertBefore(e,n,r)}function _1(t,i,e){qn(t)?t.appendChild(i,e):i.appendChild(e)}function y1(t,i,e,n,r){null!==n?Xs(t,i,e,n,r):_1(t,i,e)}function Cd(t,i){return qn(t)?t.parentNode(i):i.parentNode}function C1(t,i,e){return S1(t,i,e)}function w1(t,i,e){return 40&t.type?Lr(t,e):null}let Up,S1=w1;function T1(t,i){S1=t,Up=i}function wd(t,i,e,n){const r=v1(t,n,i),a=i[11],o=C1(n.parent||i[6],n,i);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)y1(a,r,e[l],o,!1);else y1(a,r,e,o,!1);void 0!==Up&&Up(a,n,i,e,r)}function Sd(t,i){if(null!==i){const e=i.type;if(3&e)return Lr(i,t);if(4&e)return Hp(-1,t[i.index]);if(8&e){const n=i.child;if(null!==n)return Sd(t,n);{const r=t[i.index];return ta(r)?Hp(-1,r):li(r)}}if(32&e)return Ip(i,t)()||li(t[i.index]);{const n=D1(t,i);return null!==n?Array.isArray(n)?n[0]:Sd(vc(t[16]),n):Sd(t,i.next)}}return null}function D1(t,i){return null!==i?t[16][6].projection[i.projection]:null}function Hp(t,i){const e=10+t+1;if(e<i.length){const n=i[e],r=n[1].firstChild;if(null!==r)return Sd(n,r)}return i[7]}function R1(t,i,e){const n=Cd(t,i);n&&function lk(t,i,e,n){qn(t)?t.removeChild(i,e,n):i.removeChild(e)}(t,n,i,e)}function Gp(t,i,e,n,r,a,s){for(;null!=e;){const o=n[e.index],l=e.type;if(s&&0===i&&(o&&Hi(li(o),n),e.flags|=4),64!=(64&e.flags))if(8&l)Gp(t,i,e.child,n,r,a,!1),$o(i,t,r,o,a);else if(32&l){const c=Ip(e,n);let u;for(;u=c();)$o(i,t,r,u,a);$o(i,t,r,o,a)}else 16&l?x1(t,i,n,e,r,a):$o(i,t,r,o,a);e=s?e.projectionNext:e.next}}function bc(t,i,e,n,r,a){Gp(e,n,t.firstChild,i,r,a,!1)}function x1(t,i,e,n,r,a){const s=e[16],l=s[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)$o(i,t,r,l[c],a);else Gp(t,i,l,s[3],r,a,!0)}function M1(t,i,e){qn(t)?t.setAttribute(i,"style",e):i.style.cssText=e}function jp(t,i,e){qn(t)?""===e?t.removeAttribute(i,"class"):t.setAttribute(i,"class",e):i.className=e}function k1(t,i,e){let n=t.length;for(;;){const r=t.indexOf(i,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=i.length;if(r+a===n||t.charCodeAt(r+a)<=32)return r}e=r+1}}const A1="ng-template";function fk(t,i,e){let n=0;for(;n<t.length;){let r=t[n++];if(e&&"class"===r){if(r=t[n],-1!==k1(r.toLowerCase(),i,0))return!0}else if(1===r){for(;n<t.length&&"string"==typeof(r=t[n++]);)if(r.toLowerCase()===i)return!0;return!1}}return!1}function P1(t){return 4===t.type&&t.value!==A1}function pk(t,i,e){return i===(4!==t.type||e?t.value:A1)}function gk(t,i,e){let n=4;const r=t.attrs||[],a=function bk(t){for(let i=0;i<t.length;i++)if(_b(t[i]))return i;return t.length}(r);let s=!1;for(let o=0;o<i.length;o++){const l=i[o];if("number"!=typeof l){if(!s)if(4&n){if(n=2|1&n,""!==l&&!pk(t,l,e)||""===l&&1===i.length){if(ia(n))return!1;s=!0}}else{const c=8&n?l:i[++o];if(8&n&&null!==t.attrs){if(!fk(t.attrs,c,e)){if(ia(n))return!1;s=!0}continue}const d=mk(8&n?"class":l,r,P1(t),e);if(-1===d){if(ia(n))return!1;s=!0;continue}if(""!==c){let h;h=d>a?"":r[d+1].toLowerCase();const p=8&n?h:null;if(p&&-1!==k1(p,c,0)||2&n&&c!==h){if(ia(n))return!1;s=!0}}}}else{if(!s&&!ia(n)&&!ia(l))return!1;if(s&&ia(l))continue;s=!1,n=l|1&n}}return ia(n)||s}function ia(t){return 0==(1&t)}function mk(t,i,e,n){if(null===i)return-1;let r=0;if(n||!e){let a=!1;for(;r<i.length;){const s=i[r];if(s===t)return r;if(3===s||6===s)a=!0;else{if(1===s||2===s){let o=i[++r];for(;"string"==typeof o;)o=i[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=a?1:2}return-1}return function _k(t,i){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const n=t[e];if("number"==typeof n)return-1;if(n===i)return e;e++}return-1}(i,t)}function E1(t,i,e=!1){for(let n=0;n<i.length;n++)if(gk(t,i[n],e))return!0;return!1}function yk(t,i){e:for(let e=0;e<i.length;e++){const n=i[e];if(t.length===n.length){for(let r=0;r<t.length;r++)if(t[r]!==n[r])continue e;return!0}}return!1}function I1(t,i){return t?":not("+i.trim()+")":i}function Ck(t){let i=t[0],e=1,n=2,r="",a=!1;for(;e<t.length;){let s=t[e];if("string"==typeof s)if(2&n){const o=t[++e];r+="["+s+(o.length>0?'="'+o+'"':"")+"]"}else 8&n?r+="."+s:4&n&&(r+=" "+s);else""!==r&&!ia(s)&&(i+=I1(a,r),r=""),n=s,a=a||!ia(n);e++}return""!==r&&(i+=I1(a,r)),i}const St={};function m(t){N1(en(),Te(),Qi()+t,td())}function N1(t,i,e,n){if(!n)if(3==(3&i[2])){const a=t.preOrderCheckHooks;null!==a&&sd(i,a,e)}else{const a=t.preOrderHooks;null!==a&&od(i,a,0,e)}_s(e)}function Td(t,i){return t<<17|i<<2}function ra(t){return t>>17&32767}function zp(t){return 2|t}function Ya(t){return(131068&t)>>2}function $p(t,i){return-131069&t|i<<2}function Wp(t){return 1|t}function $1(t,i){const e=t.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],a=e[n+1];if(-1!==a){const s=t.data[a];sp(r),s.contentQueries(2,i[a],a)}}}function _c(t,i,e,n,r,a,s,o,l,c){const u=i.blueprint.slice();return u[0]=r,u[2]=140|n,ob(u),u[3]=u[15]=t,u[8]=e,u[10]=s||t&&t[10],u[11]=o||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==i.type?t[16]:u,u}function Wo(t,i,e,n,r){let a=t.data[i];if(null===a)a=tg(t,i,e,n,r),function sM(){return bt.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=n,a.attrs=r;const s=ec();a.injectorIndex=null===s?-1:s.injectorIndex}return Ta(a,!0),a}function tg(t,i,e,n,r){const a=cb(),s=np(),l=t.data[i]=function Lk(t,i,e,n,r,a){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?a:a&&a.parent,e,i,n,r);return null===t.firstChild&&(t.firstChild=l),null!==a&&(s?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}function qo(t,i,e,n){if(0===e)return-1;const r=i.length;for(let a=0;a<e;a++)i.push(n),t.blueprint.push(n),t.data.push(null);return r}function yc(t,i,e){id(i);try{const n=t.viewQuery;null!==n&&ug(1,n,e);const r=t.template;null!==r&&W1(t,i,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&$1(t,i),t.staticViewQueries&&ug(2,t.viewQuery,e);const a=t.components;null!==a&&function Vk(t,i){for(let e=0;e<i.length;e++)iA(t,i[e])}(i,a)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),n}finally{i[2]&=-5,rd()}}function Xo(t,i,e,n){const r=i[2];if(256==(256&r))return;id(i);const a=td();try{ob(i),function ub(t){return bt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&W1(t,i,e,2,n);const s=3==(3&r);if(!a)if(s){const c=t.preOrderCheckHooks;null!==c&&sd(i,c,null)}else{const c=t.preOrderHooks;null!==c&&od(i,c,0,null),op(i,0)}if(function tA(t){for(let i=Np(t);null!==i;i=Op(i)){if(!i[2])continue;const e=i[9];for(let n=0;n<e.length;n++){const r=e[n],a=r[3];0==(1024&r[2])&&tp(a,1),r[2]|=1024}}}(i),function eA(t){for(let i=Np(t);null!==i;i=Op(i))for(let e=10;e<i.length;e++){const n=i[e],r=n[1];ep(n)&&Xo(r,n,r.template,n[8])}}(i),null!==t.contentQueries&&$1(t,i),!a)if(s){const c=t.contentCheckHooks;null!==c&&sd(i,c)}else{const c=t.contentHooks;null!==c&&od(i,c,1),op(i,1)}!function Nk(t,i){const e=t.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)_s(~r);else{const a=r,s=e[++n],o=e[++n];oM(s,a),o(2,i[a])}}}finally{_s(-1)}}(t,i);const o=t.components;null!==o&&function Ok(t,i){for(let e=0;e<i.length;e++)nA(t,i[e])}(i,o);const l=t.viewQuery;if(null!==l&&ug(2,l,n),!a)if(s){const c=t.viewCheckHooks;null!==c&&sd(i,c)}else{const c=t.viewHooks;null!==c&&od(i,c,2),op(i,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,tp(i[3],-1))}finally{rd()}}function Fk(t,i,e,n){const r=i[10],a=!td(),s=sb(i);try{a&&!s&&r.begin&&r.begin(),s&&yc(t,i,n),Xo(t,i,e,n)}finally{a&&!s&&r.end&&r.end()}}function W1(t,i,e,n,r){const a=Qi(),s=2&n;try{_s(-1),s&&i.length>20&&N1(t,i,20,td()),e(n,r)}finally{_s(a)}}function ng(t,i,e){!lb()||(function Wk(t,i,e,n){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||ic(e,i),Hi(n,i);const s=e.initialInputs;for(let o=r;o<a;o++){const l=t.data[o],c=na(l);c&&Kk(i,e,l);const u=rc(i,t,o,e);Hi(u,i),null!==s&&Zk(0,o-r,u,l,0,s),c&&(wr(e.index,i)[8]=u)}}(t,i,e,Lr(e,i)),128==(128&e.flags)&&function qk(t,i,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function lM(){return bt.lFrame.currentDirectiveIndex}();try{_s(s);for(let l=n;l<r;l++){const c=t.data[l],u=i[l];rp(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&t_(c,u)}}finally{_s(-1),rp(o)}}(t,i,e))}function ig(t,i,e=Lr){const n=i.localNames;if(null!==n){let r=i.index+1;for(let a=0;a<n.length;a+=2){const s=n[a+1],o=-1===s?e(i,t):t[s];t[r++]=o}}}function X1(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=xd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):i}function xd(t,i,e,n,r,a,s,o,l,c){const u=20+n,d=u+r,h=function Bk(t,i){const e=[];for(let n=0;n<i;n++)e.push(n<t?null:St);return e}(u,d),p="function"==typeof c?c():c;return h[1]={type:t,blueprint:h,template:e,queries:null,viewQuery:o,declTNode:i,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function K1(t,i,e,n){const r=o_(i);null===e?r.push(n):(r.push(e),t.firstCreatePass&&l_(t).push(n,r.length-1))}function Z1(t,i,e){for(let n in t)if(t.hasOwnProperty(n)){const r=t[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(i,r):e[n]=[i,r]}return e}function Rr(t,i,e,n,r,a,s,o){const l=Lr(i,e);let u,c=i.inputs;!o&&null!=c&&(u=c[n])?(d_(t,e,u,n,r),Zu(i)&&function Gk(t,i){const e=wr(i,t);16&e[2]||(e[2]|=64)}(e,i.index)):3&i.type&&(n=function Hk(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n),r=null!=s?s(r,i.value||"",n):r,qn(a)?a.setProperty(l,n,r):cp(n)||(l.setProperty?l.setProperty(n,r):l[n]=r))}function rg(t,i,e,n){let r=!1;if(lb()){const a=function Xk(t,i,e){const n=t.directiveRegistry;let r=null;if(n)for(let a=0;a<n.length;a++){const s=n[a];E1(e,s.selectors,!1)&&(r||(r=[]),hd(ic(e,i),t,s.type),na(s)?(n_(t,e),r.unshift(s)):r.push(s))}return r}(t,i,e),s=null===n?null:{"":-1};if(null!==a){r=!0,i_(e,t.data.length,a.length);for(let u=0;u<a.length;u++){const d=a[u];d.providersResolver&&d.providersResolver(d)}let o=!1,l=!1,c=qo(t,i,a.length,null);for(let u=0;u<a.length;u++){const d=a[u];e.mergedAttrs=cd(e.mergedAttrs,d.hostAttrs),r_(t,e,i,c,d),Qk(c,d,s),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),o=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function Uk(t,i){const n=i.directiveEnd,r=t.data,a=i.attrs,s=[];let o=null,l=null;for(let c=i.directiveStart;c<n;c++){const u=r[c],d=u.inputs,h=null===a||P1(i)?null:Jk(d,a);s.push(h),o=Z1(d,c,o),l=Z1(u.outputs,c,l)}null!==o&&(o.hasOwnProperty("class")&&(i.flags|=16),o.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=s,i.inputs=o,i.outputs=l}(t,e)}s&&function Yk(t,i,e){if(i){const n=t.localNames=[];for(let r=0;r<i.length;r+=2){const a=e[i[r+1]];if(null==a)throw new Jt(-301,!1);n.push(i[r],a)}}}(e,n,s)}return e.mergedAttrs=cd(e.mergedAttrs,e.attrs),r}function e_(t,i,e,n,r,a){const s=a.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const l=~i.index;(function $k(t){let i=t.length;for(;i>0;){const e=t[--i];if("number"==typeof e&&e<0)return e}return 0})(o)!=l&&o.push(l),o.push(n,r,s)}}function t_(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function n_(t,i){i.flags|=2,(t.components||(t.components=[])).push(i.index)}function Qk(t,i,e){if(e){if(i.exportAs)for(let n=0;n<i.exportAs.length;n++)e[i.exportAs[n]]=t;na(i)&&(e[""]=t)}}function i_(t,i,e){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+e,t.providerIndexes=i}function r_(t,i,e,n,r){t.data[n]=r;const a=r.factory||(r.factory=$s(r.type)),s=new tc(a,na(r),null);t.blueprint[n]=s,e[n]=s,e_(t,i,0,n,qo(t,e,r.hostVars,St),r)}function Kk(t,i,e){const n=Lr(i,t),r=X1(e),a=t[10],s=Md(t,_c(t,r,null,e.onPush?64:16,n,i,a,a.createRenderer(n,e),null,null));t[i.index]=s}function ag(t,i,e,n,r,a,s){if(null==a)qn(t)?t.removeAttribute(i,r,e):i.removeAttribute(r);else{const o=null==s?wt(a):s(a,n||"",r);qn(t)?t.setAttribute(i,r,o,e):e?i.setAttributeNS(e,r,o):i.setAttribute(r,o)}}function Zk(t,i,e,n,r,a){const s=a[i];if(null!==s){const o=n.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==o?n.setInput(e,d,c,u):e[u]=d}}}function Jk(t,i){let e=null,n=0;for(;n<i.length;){const r=i[n];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],i[n+1])),n+=2}else n+=2;else n+=4}return e}function a_(t,i,e,n){return new Array(t,!0,!1,i,null,0,n,e,null,null)}function nA(t,i){const e=wr(i,t);if(ep(e)){const n=e[1];80&e[2]?Xo(n,e,n.template,e[8]):e[5]>0&&sg(e)}}function sg(t){for(let n=Np(t);null!==n;n=Op(n))for(let r=10;r<n.length;r++){const a=n[r];if(1024&a[2]){const s=a[1];Xo(s,a,s.template,a[8])}else a[5]>0&&sg(a)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=wr(e[n],t);ep(r)&&r[5]>0&&sg(r)}}function iA(t,i){const e=wr(i,t),n=e[1];(function rA(t,i){for(let e=i.length;e<t.blueprint.length;e++)i.push(t.blueprint[e])})(n,e),yc(n,e,e[8])}function Md(t,i){return t[13]?t[14][4]=i:t[13]=i,t[14]=i,i}function og(t){for(;t;){t[2]|=64;const i=vc(t);if(Bx(t)&&!i)return t;t=i}return null}function cg(t,i,e){const n=i[10];n.begin&&n.begin();try{Xo(t,i,t.template,e)}catch(r){throw u_(i,r),r}finally{n.end&&n.end()}}function s_(t){!function lg(t){for(let i=0;i<t.components.length;i++){const e=t.components[i],n=kp(e),r=n[1];Fk(r,n,r.template,e)}}(t[8])}function ug(t,i,e){sp(0),i(t,e)}const lA=(()=>Promise.resolve(null))();function o_(t){return t[7]||(t[7]=[])}function l_(t){return t.cleanup||(t.cleanup=[])}function u_(t,i){const e=t[9],n=e?e.get(jo,null):null;n&&n.handleError(i)}function d_(t,i,e,n,r){for(let a=0;a<e.length;){const s=e[a++],o=e[a++],l=i[s],c=t.data[s];null!==c.setInput?c.setInput(l,r,n,o):l[o]=r}}function Qa(t,i,e){const n=ed(i,t);p1(t[11],n,e)}function kd(t,i,e){let n=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==i)for(let s=0;s<i.length;s++){const o=i[s];"number"==typeof o?a=o:1==a?r=Ff(r,o):2==a&&(n=Ff(n,o+": "+i[++s]+";"))}e?t.styles=n:t.stylesWithoutHost=n,e?t.classes=r:t.classesWithoutHost=r}const dg=new Ut("INJECTOR",-1);class h_{get(i,e=lc){if(e===lc){const n=new Error(`NullInjectorError: No provider for ${fn(i)}!`);throw n.name="NullInjectorError",n}return e}}const hg=new Ut("Set Injector scope."),Cc={},dA={};let fg;function f_(){return void 0===fg&&(fg=new h_),fg}function p_(t,i=null,e=null,n){const r=g_(t,i,e,n);return r._resolveInjectorDefTypes(),r}function g_(t,i=null,e=null,n){return new hA(t,e,i||f_(),n)}class hA{constructor(i,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&Da(e,o=>this.processProvider(o,i,e)),Da([i],o=>this.processInjectorType(o,[],a)),this.records.set(dg,Yo(void 0,this));const s=this.records.get(hg);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof i?null:fn(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,e=lc,n=kt.Default){this.assertNotDestroyed();const r=Fb(this),a=gs(void 0);try{if(!(n&kt.SkipSelf)){let o=this.records.get(i);if(void 0===o){const l=function yA(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ut}(i)&&Lf(i);o=l&&this.injectableDefInScope(l)?Yo(pg(i),Cc):null,this.records.set(i,o)}if(null!=o)return this.hydrate(i,o)}return(n&kt.Self?f_():this.parent).get(i,e=n&kt.Optional&&e===lc?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[md]=s[md]||[]).unshift(fn(i)),r)throw s;return function WM(t,i,e,n){const r=t[md];throw i[Vb]&&r.unshift(i[Vb]),t.message=function qM(t,i,e,n=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=fn(i);if(Array.isArray(i))r=i.map(fn).join(" -> ");else if("object"==typeof i){let a=[];for(let s in i)if(i.hasOwnProperty(s)){let o=i[s];a.push(s+":"+("string"==typeof o?JSON.stringify(o):fn(o)))}r=`{${a.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${t.replace(HM,"\n  ")}`}("\n"+t.message,r,e,n),t.ngTokenPath=r,t[md]=null,t}(s,i,"R3InjectorError",this.source)}throw s}finally{gs(a),Fb(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((n,r)=>i.push(fn(r))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Jt(205,!1)}processInjectorType(i,e,n){if(!(i=Nt(i)))return!1;let r=qv(i);const a=null==r&&i.ngModule||void 0,s=void 0===a?i:a,o=-1!==n.indexOf(s);if(void 0!==a&&(r=qv(a)),null==r)return!1;if(null!=r.imports&&!o){let u;n.push(s);try{Da(r.imports,d=>{this.processInjectorType(d,e,n)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:p}=u[d];Da(p,b=>this.processProvider(b,h,p||Tn))}}this.injectorDefTypes.add(s);const l=$s(s)||(()=>new s);this.records.set(s,Yo(l,Cc));const c=r.providers;if(null!=c&&!o){const u=i;Da(c,d=>this.processProvider(d,u,c))}return void 0!==a&&void 0!==i.providers}processProvider(i,e,n){let r=Qo(i=Nt(i))?i:Nt(i&&i.provide);const a=function pA(t,i,e){return v_(t)?Yo(void 0,t.useValue):Yo(m_(t),Cc)}(i);if(Qo(i)||!0!==i.multi)this.records.get(r);else{let s=this.records.get(r);s||(s=Yo(void 0,Cc,!0),s.factory=()=>_p(s.multi),this.records.set(r,s)),r=i,s.multi.push(i)}this.records.set(r,a)}hydrate(i,e){return e.value===Cc&&(e.value=dA,e.value=e.factory()),"object"==typeof e.value&&e.value&&function _A(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(i){if(!i.providedIn)return!1;const e=Nt(i.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function pg(t){const i=Lf(t),e=null!==i?i.factory:$s(t);if(null!==e)return e;if(t instanceof Ut)throw new Jt(204,!1);if(t instanceof Function)return function fA(t){const i=t.length;if(i>0)throw oc(i,"?"),new Jt(204,!1);const e=function Dx(t){const i=t&&(t[qu]||t[Xv]);if(i){const e=function Rx(t){if(t.hasOwnProperty("name"))return t.name;const i=(""+t).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),i}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new Jt(204,!1)}function m_(t,i,e){let n;if(Qo(t)){const r=Nt(t);return $s(r)||pg(r)}if(v_(t))n=()=>Nt(t.useValue);else if(function mA(t){return!(!t||!t.useFactory)}(t))n=()=>t.useFactory(..._p(t.deps||[]));else if(function gA(t){return!(!t||!t.useExisting)}(t))n=()=>Ve(Nt(t.useExisting));else{const r=Nt(t&&(t.useClass||t.provide));if(!function bA(t){return!!t.deps}(t))return $s(r)||pg(r);n=()=>new r(..._p(t.deps))}return n}function Yo(t,i,e=!1){return{factory:t,value:i,multi:e?[]:void 0}}function v_(t){return null!==t&&"object"==typeof t&&jM in t}function Qo(t){return"function"==typeof t}let ei=(()=>{class t{static create(e,n){var r;if(Array.isArray(e))return p_({name:""},n,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return p_({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=lc,t.NULL=new h_,t.\u0275prov=Qe({token:t,providedIn:"any",factory:()=>Ve(dg)}),t.__NG_ELEMENT_ID__=-1,t})();function MA(t,i){ad(kp(t)[1],gi())}function cn(t){let i=function k_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const n=[t];for(;i;){let r;if(na(t))r=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Jt(903,"");r=i.\u0275dir}if(r){if(e){n.push(r);const s=t;s.inputs=vg(t.inputs),s.declaredInputs=vg(t.declaredInputs),s.outputs=vg(t.outputs);const o=r.hostBindings;o&&EA(t,o);const l=r.viewQuery,c=r.contentQueries;if(l&&AA(t,l),c&&PA(t,c),Vf(t.inputs,r.inputs),Vf(t.declaredInputs,r.declaredInputs),Vf(t.outputs,r.outputs),na(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let s=0;s<a.length;s++){const o=a[s];o&&o.ngInherit&&o(t),o===cn&&(e=!1)}}i=Object.getPrototypeOf(i)}!function kA(t){let i=0,e=null;for(let n=t.length-1;n>=0;n--){const r=t[n];r.hostVars=i+=r.hostVars,r.hostAttrs=cd(r.hostAttrs,e=cd(e,r.hostAttrs))}}(n)}function vg(t){return t===Do?{}:t===Tn?[]:t}function AA(t,i){const e=t.viewQuery;t.viewQuery=e?(n,r)=>{i(n,r),e(n,r)}:i}function PA(t,i){const e=t.contentQueries;t.contentQueries=e?(n,r,a)=>{i(n,r,a),e(n,r,a)}:i}function EA(t,i){const e=t.hostBindings;t.hostBindings=e?(n,r)=>{i(n,r),e(n,r)}:i}let Ad=null;function Ko(){if(!Ad){const t=yn.Symbol;if(t&&t.iterator)Ad=t.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<i.length;++e){const n=i[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ad=n)}}}return Ad}function wc(t){return!!bg(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ko()in t)}function bg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Pa(t,i,e){return t[i]=e}function Sc(t,i){return t[i]}function Gi(t,i,e){return!Object.is(t[i],e)&&(t[i]=e,!0)}function Ys(t,i,e,n){const r=Gi(t,i,e);return Gi(t,i+1,n)||r}function Pd(t,i,e,n,r){const a=Ys(t,i,e,n);return Gi(t,i+2,r)||a}function Hr(t,i,e,n,r,a){const s=Ys(t,i,e,n);return Ys(t,i+2,r,a)||s}function gn(t,i,e,n){const r=Te();return Gi(r,Po(),i)&&(en(),function Aa(t,i,e,n,r,a){const s=Lr(t,i);ag(i[11],s,a,t.value,e,n,r)}(Xn(),r,t,i,e,n)),gn}function Jo(t,i,e,n){return Gi(t,Po(),e)?i+wt(e)+n:St}function nl(t,i,e,n,r,a,s,o,l,c){const d=Hr(t,Wa(),e,r,s,l);return qa(4),d?i+wt(e)+n+wt(r)+a+wt(s)+o+wt(l)+c:St}function x(t,i,e,n,r,a,s,o){const l=Te(),c=en(),u=t+20,d=c.firstCreatePass?function LA(t,i,e,n,r,a,s,o,l){const c=i.consts,u=Wo(i,t,4,s||null,bs(c,o));rg(i,e,u,bs(c,l)),ad(i,u);const d=u.tViews=xd(2,u,n,r,a,i.directiveRegistry,i.pipeRegistry,null,i.schemas,c);return null!==i.queries&&(i.queries.template(i,u),d.queries=i.queries.embeddedTView(u)),u}(u,c,l,i,e,n,r,a,s):c.data[u];Ta(d,!1);const h=l[11].createComment("");wd(c,l,h,d),Hi(h,l),Md(l,l[u]=a_(h,l,h,d)),Ju(d)&&ng(c,l,d),null!=s&&ig(l,d,o)}function rt(t){return Ao(function aM(){return bt.lFrame.contextLView}(),20+t)}function k(t,i=kt.Default){const e=Te();return null===e?Ve(t,i):Rb(gi(),e,Nt(t),i)}function Sg(){throw new Error("invalid")}function _(t,i,e){const n=Te();return Gi(n,Po(),i)&&Rr(en(),Xn(),n,t,i,n[11],e,!1),_}function Tg(t,i,e,n,r){const s=r?"class":"style";d_(t,e,i.inputs[s],s,n)}function g(t,i,e,n){const r=Te(),a=en(),s=20+t,o=r[11],l=r[s]=Fp(o,i,function mM(){return bt.lFrame.currentNamespace}()),c=a.firstCreatePass?function sP(t,i,e,n,r,a,s){const o=i.consts,c=Wo(i,t,2,r,bs(o,a));return rg(i,e,c,bs(o,s)),null!==c.attrs&&kd(c,c.attrs,!1),null!==c.mergedAttrs&&kd(c,c.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,c),c}(s,a,r,0,i,e,n):a.data[s];Ta(c,!0);const u=c.mergedAttrs;null!==u&&ld(o,l,u);const d=c.classes;null!==d&&jp(o,l,d);const h=c.styles;return null!==h&&M1(o,l,h),64!=(64&c.flags)&&wd(a,r,l,c),0===function eM(){return bt.lFrame.elementDepthCount}()&&Hi(l,r),function tM(){bt.lFrame.elementDepthCount++}(),Ju(c)&&(ng(a,r,c),function q1(t,i,e){if(Wf(i)){const r=i.directiveEnd;for(let a=i.directiveStart;a<r;a++){const s=t.data[a];s.contentQueries&&s.contentQueries(1,e[a],a)}}}(a,c,r)),null!==n&&ig(r,c),g}function f(){let t=gi();np()?ip():(t=t.parent,Ta(t,!1));const i=t;!function nM(){bt.lFrame.elementDepthCount--}();const e=en();return e.firstCreatePass&&(ad(e,t),Wf(t)&&e.queries.elementEnd(t)),null!=i.classesWithoutHost&&function CM(t){return 0!=(16&t.flags)}(i)&&Tg(e,i,Te(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function wM(t){return 0!=(32&t.flags)}(i)&&Tg(e,i,Te(),i.stylesWithoutHost,!1),f}function N(t,i,e,n){return g(t,i,e,n),f(),N}function fe(){return Te()}function Tc(t){return!!t&&"function"==typeof t.then}const xg=function Q_(t){return!!t&&"function"==typeof t.subscribe};function F(t,i,e,n){const r=Te(),a=en(),s=gi();return function Z_(t,i,e,n,r,a,s,o){const l=Ju(n),u=t.firstCreatePass&&l_(t),d=i[8],h=o_(i);let p=!0;if(3&n.type||o){const w=Lr(n,i),S=o?o(w):w,C=h.length,I=o?W=>o(li(W[n.index])):n.index;if(qn(e)){let W=null;if(!o&&l&&(W=function lP(t,i,e,n){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const s=r[a];if(s===e&&r[a+1]===n){const o=i[7],l=r[a+2];return o.length>l?o[l]:null}"string"==typeof s&&(a+=2)}return null}(t,i,r,n.index)),null!==W)(W.__ngLastListenerFn__||W).__ngNextListenerFn__=a,W.__ngLastListenerFn__=a,p=!1;else{a=Mg(n,i,d,a,!1);const G=e.listen(S,r,a);h.push(a,G),u&&u.push(r,I,C,C+1)}}else a=Mg(n,i,d,a,!0),S.addEventListener(r,a,s),h.push(a),u&&u.push(r,I,C,s)}else a=Mg(n,i,d,a,!1);const b=n.outputs;let y;if(p&&null!==b&&(y=b[r])){const w=y.length;if(w)for(let S=0;S<w;S+=2){const Q=i[y[S]][y[S+1]].subscribe(a),te=h.length;h.push(a,Q),u&&u.push(r,n.index,te,-(te+1))}}}(a,r,r[11],s,t,i,!!e,n),F}function J_(t,i,e,n){try{return!1!==e(n)}catch(r){return u_(t,r),!1}}function Mg(t,i,e,n,r){return function a(s){if(s===Function)return n;const o=2&t.flags?wr(t.index,i):i;0==(32&i[2])&&og(o);let l=J_(i,0,n,s),c=a.__ngNextListenerFn__;for(;c;)l=J_(i,0,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function T(t=1){return function uM(t){return(bt.lFrame.contextLView=function dM(t,i){for(;t>0;)i=i[15],t--;return i}(t,bt.lFrame.contextLView))[8]}(t)}function cP(t,i){let e=null;const n=function vk(t){const i=t.attrs;if(null!=i){const e=i.indexOf(5);if(0==(1&e))return i[e+1]}return null}(t);for(let r=0;r<i.length;r++){const a=i[r];if("*"!==a){if(null===n?E1(t,a,!0):yk(n,a))return r}else e=r}return e}function Id(t){const i=Te()[16][6];if(!i.projection){const n=i.projection=oc(t?t.length:1,null),r=n.slice();let a=i.child;for(;null!==a;){const s=t?cP(a,t):0;null!==s&&(r[s]?r[s].projectionNext=a:n[s]=a,r[s]=a),a=a.next}}}function Nd(t,i=0,e){const n=Te(),r=en(),a=Wo(r,20+t,16,null,e||null);null===a.projection&&(a.projection=i),ip(),64!=(64&a.flags)&&function uk(t,i,e){x1(i[11],0,i,e,v1(t,e,i),C1(e.parent||i[6],e,i))}(r,n,a)}function Zi(t,i,e){return Od(t,"",i,"",e),Zi}function Od(t,i,e,n,r){const a=Te(),s=Jo(a,i,e,n);return s!==St&&Rr(en(),Xn(),a,t,s,a[11],r,!1),Od}function ly(t,i,e,n,r){const a=t[e+1],s=null===i;let o=n?ra(a):Ya(a),l=!1;for(;0!==o&&(!1===l||s);){const u=t[o+1];hP(t[o],i)&&(l=!0,t[o+1]=n?Wp(u):zp(u)),o=n?ra(u):Ya(u)}l&&(t[e+1]=n?zp(a):Wp(a))}function hP(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&Lo(t,i)>=0}const vi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function cy(t){return t.substring(vi.key,vi.keyEnd)}function uy(t,i){const e=vi.textEnd;return e===i?-1:(i=vi.keyEnd=function mP(t,i,e){for(;i<e&&t.charCodeAt(i)>32;)i++;return i}(t,vi.key=i,e),ll(t,i,e))}function ll(t,i,e){for(;i<e&&t.charCodeAt(i)<=32;)i++;return i}function Dc(t,i,e){return sa(t,i,e,!1),Dc}function mt(t,i){return sa(t,i,null,!0),mt}function Ss(t){oa(Sr,Ia,t,!0)}function Ia(t,i){for(let e=function pP(t){return function hy(t){vi.key=0,vi.keyEnd=0,vi.value=0,vi.valueEnd=0,vi.textEnd=t.length}(t),uy(t,ll(t,0,vi.textEnd))}(i);e>=0;e=uy(i,e))Sr(t,cy(i),!0)}function sa(t,i,e,n){const r=Te(),a=en(),s=qa(2);a.firstUpdatePass&&my(a,t,s,n),i!==St&&Gi(r,s,i)&&by(a,a.data[Qi()],r,r[11],t,r[s+1]=function RP(t,i){return null==t||("string"==typeof i?t+=i:"object"==typeof t&&(t=fn(Tr(t)))),t}(i,e),n,s)}function oa(t,i,e,n){const r=en(),a=qa(2);r.firstUpdatePass&&my(r,null,a,n);const s=Te();if(e!==St&&Gi(s,a,e)){const o=r.data[Qi()];if(yy(o,n)&&!gy(r,a)){let l=n?o.classesWithoutHost:o.stylesWithoutHost;null!==l&&(e=Ff(l,e||"")),Tg(r,o,s,e,n)}else!function DP(t,i,e,n,r,a,s,o){r===St&&(r=Tn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<a.length?a[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,p=c<a.length?a[c+1]:void 0;let y,b=null;u===d?(l+=2,c+=2,h!==p&&(b=d,y=p)):null===d||null!==u&&u<d?(l+=2,b=u):(c+=2,b=d,y=p),null!==b&&by(t,i,e,n,b,y,s,o),u=l<r.length?r[l]:null,d=c<a.length?a[c]:null}}(r,o,s,s[11],s[a+1],s[a+1]=function TP(t,i,e){if(null==e||""===e)return Tn;const n=[],r=Tr(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(n,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(n,a,r[a]);else"string"==typeof r&&i(n,r);return n}(t,i,e),n,a)}}function gy(t,i){return i>=t.expandoStartIndex}function my(t,i,e,n){const r=t.data;if(null===r[e+1]){const a=r[Qi()],s=gy(t,e);yy(a,n)&&null===i&&!s&&(i=!1),i=function yP(t,i,e,n){const r=function ap(t){const i=bt.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}(t);let a=n?i.residualClasses:i.residualStyles;if(null===r)0===(n?i.classBindings:i.styleBindings)&&(e=Rc(e=kg(null,t,i,e,n),i.attrs,n),a=null);else{const s=i.directiveStylingLast;if(-1===s||t[s]!==r)if(e=kg(r,t,i,e,n),null===a){let l=function CP(t,i,e){const n=e?i.classBindings:i.styleBindings;if(0!==Ya(n))return t[ra(n)]}(t,i,n);void 0!==l&&Array.isArray(l)&&(l=kg(null,t,i,l[1],n),l=Rc(l,i.attrs,n),function wP(t,i,e,n){t[ra(e?i.classBindings:i.styleBindings)]=n}(t,i,n,l))}else a=function SP(t,i,e){let n;const r=i.directiveEnd;for(let a=1+i.directiveStylingLast;a<r;a++)n=Rc(n,t[a].hostAttrs,e);return Rc(n,i.attrs,e)}(t,i,n)}return void 0!==a&&(n?i.residualClasses=a:i.residualStyles=a),e}(r,a,i,n),function uP(t,i,e,n,r,a){let s=a?i.classBindings:i.styleBindings,o=ra(s),l=Ya(s);t[n]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||Lo(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const h=ra(t[o+1]);t[n+1]=Td(h,o),0!==h&&(t[h+1]=$p(t[h+1],n)),t[o+1]=function Tk(t,i){return 131071&t|i<<17}(t[o+1],n)}else t[n+1]=Td(o,0),0!==o&&(t[o+1]=$p(t[o+1],n)),o=n;else t[n+1]=Td(l,0),0===o?o=n:t[l+1]=$p(t[l+1],n),l=n;c&&(t[n+1]=zp(t[n+1])),ly(t,u,n,!0),ly(t,u,n,!1),function dP(t,i,e,n,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof i&&Lo(a,i)>=0&&(e[n+1]=Wp(e[n+1]))}(i,u,t,n,a),s=Td(o,l),a?i.classBindings=s:i.styleBindings=s}(r,a,i,e,s,n)}}function kg(t,i,e,n,r){let a=null;const s=e.directiveEnd;let o=e.directiveStylingLast;for(-1===o?o=e.directiveStart:o++;o<s&&(a=i[o],n=Rc(n,a.hostAttrs,r),a!==t);)o++;return null!==t&&(e.directiveStylingLast=o),n}function Rc(t,i,e){const n=e?1:2;let r=-1;if(null!==i)for(let a=0;a<i.length;a++){const s=i[a];"number"==typeof s?r=s:r===n&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Sr(t,s,!!e||i[++a]))}return void 0===t?null:t}function by(t,i,e,n,r,a,s,o){if(!(3&i.type))return;const l=t.data,c=l[o+1];Vd(function F1(t){return 1==(1&t)}(c)?_y(l,i,e,r,Ya(c),s):void 0)||(Vd(a)||function V1(t){return 2==(2&t)}(c)&&(a=_y(l,null,e,r,o,s)),function hk(t,i,e,n,r){const a=qn(t);if(i)r?a?t.addClass(e,n):e.classList.add(n):a?t.removeClass(e,n):e.classList.remove(n);else{let s=-1===n.indexOf("-")?void 0:Dr.DashCase;if(null==r)a?t.removeStyle(e,n,s):e.style.removeProperty(n);else{const o="string"==typeof r&&r.endsWith("!important");o&&(r=r.slice(0,-10),s|=Dr.Important),a?t.setStyle(e,n,r,s):e.style.setProperty(n,r,o?"important":"")}}}(n,s,ed(Qi(),e),r,a))}function _y(t,i,e,n,r,a){const s=null===i;let o;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[r+1];h===St&&(h=d?Tn:void 0);let p=d?mp(h,n):u===n?h:void 0;if(c&&!Vd(p)&&(p=mp(l,n)),Vd(p)&&(o=p,s))return o;const b=t[r+1];r=s?ra(b):Ya(b)}if(null!==i){let l=a?i.residualClasses:i.residualStyles;null!=l&&(o=mp(l,n))}return o}function Vd(t){return void 0!==t}function yy(t,i){return 0!=(t.flags&(i?16:32))}function v(t,i=""){const e=Te(),n=en(),r=t+20,a=n.firstCreatePass?Wo(n,r,1,i,null):n.data[r],s=e[r]=Vp(e[11],i);wd(n,e,s,a),Ta(a,!1)}function nt(t){return ce("",t,""),nt}function ce(t,i,e){const n=Te(),r=Jo(n,t,i,e);return r!==St&&Qa(n,Qi(),r),ce}function ti(t,i,e,n,r){const a=Te(),s=function el(t,i,e,n,r,a){const o=Ys(t,Wa(),e,r);return qa(2),o?i+wt(e)+n+wt(r)+a:St}(a,t,i,e,n,r);return s!==St&&Qa(a,Qi(),s),ti}function Ag(t,i,e,n,r,a,s){const o=Te(),l=function tl(t,i,e,n,r,a,s,o){const c=Pd(t,Wa(),e,r,s);return qa(3),c?i+wt(e)+n+wt(r)+a+wt(s)+o:St}(o,t,i,e,n,r,a,s);return l!==St&&Qa(o,Qi(),l),Ag}function Pg(t,i,e,n,r,a,s,o,l){const c=Te(),u=nl(c,t,i,e,n,r,a,s,o,l);return u!==St&&Qa(c,Qi(),u),Pg}function Eg(t,i,e){oa(Sr,Ia,Jo(Te(),t,i,e),!0)}function Ts(t,i,e){const n=Te();return Gi(n,Po(),i)&&Rr(en(),Xn(),n,t,i,n[11],e,!0),Ts}const Qs=void 0;var zP=["en",[["a","p"],["AM","PM"],Qs],[["AM","PM"],Qs,Qs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qs,"{1} 'at' {0}",Qs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jP(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let cl={};function Ji(t){const i=function $P(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=By(i);if(e)return e;const n=i.split("-")[0];if(e=By(n),e)return e;if("en"===n)return zP;throw new Error(`Missing locale data for the locale "${t}".`)}function Fy(t){return Ji(t)[Ge.PluralCase]}function By(t){return t in cl||(cl[t]=yn.ng&&yn.ng.common&&yn.ng.common.locales&&yn.ng.common.locales[t]),cl[t]}var Ge=(()=>((Ge=Ge||{})[Ge.LocaleId=0]="LocaleId",Ge[Ge.DayPeriodsFormat=1]="DayPeriodsFormat",Ge[Ge.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ge[Ge.DaysFormat=3]="DaysFormat",Ge[Ge.DaysStandalone=4]="DaysStandalone",Ge[Ge.MonthsFormat=5]="MonthsFormat",Ge[Ge.MonthsStandalone=6]="MonthsStandalone",Ge[Ge.Eras=7]="Eras",Ge[Ge.FirstDayOfWeek=8]="FirstDayOfWeek",Ge[Ge.WeekendRange=9]="WeekendRange",Ge[Ge.DateFormat=10]="DateFormat",Ge[Ge.TimeFormat=11]="TimeFormat",Ge[Ge.DateTimeFormat=12]="DateTimeFormat",Ge[Ge.NumberSymbols=13]="NumberSymbols",Ge[Ge.NumberFormats=14]="NumberFormats",Ge[Ge.CurrencyCode=15]="CurrencyCode",Ge[Ge.CurrencySymbol=16]="CurrencySymbol",Ge[Ge.CurrencyName=17]="CurrencyName",Ge[Ge.Currencies=18]="Currencies",Ge[Ge.Directionality=19]="Directionality",Ge[Ge.PluralCase=20]="PluralCase",Ge[Ge.ExtraData=21]="ExtraData",Ge))();const WP=["zero","one","two","few","many"],Fd="en-US",Bd={marker:"element"},Ld={marker:"ICU"};var Yn=(()=>((Yn=Yn||{})[Yn.SHIFT=2]="SHIFT",Yn[Yn.APPEND_EAGERLY=1]="APPEND_EAGERLY",Yn[Yn.COMMENT=2]="COMMENT",Yn))();let Ly=Fd;function Uy(t,i,e){const n=i.insertBeforeIndex,r=Array.isArray(n)?n[0]:n;return null===r?w1(t,0,e):li(e[r])}function Hy(t,i,e,n,r){const a=i.insertBeforeIndex;if(Array.isArray(a)){let s=n,o=null;if(3&i.type||(o=s,s=r),null!==s&&0==(2&i.flags))for(let l=1;l<a.length;l++)Xs(t,s,e[a[l]],o,!1)}}function Gy(t,i){if(t.push(i),t.length>1)for(let e=t.length-2;e>=0;e--){const n=t[e];jy(n)||KP(n,i)&&null===ZP(n)&&JP(n,i.index)}}function jy(t){return!(64&t.type)}function KP(t,i){return jy(i)||t.index>i.index}function ZP(t){const i=t.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function JP(t,i){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=i:(T1(Uy,Hy),t.insertBeforeIndex=i)}function xc(t,i){const e=t.data[i];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function nE(t,i,e){const n=tg(t,e,64,null,null);return Gy(i,n),n}function Ud(t,i){const e=i[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function zy(t){return t>>>17}function $y(t){return(131070&t)>>>1}let Mc=0,kc=0;function qy(t,i,e,n){const r=e[11];let s,a=null;for(let o=0;o<i.length;o++){const l=i[o];if("string"==typeof l){const c=i[++o];null===e[c]&&(e[c]=Vp(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=zy(l);let u,d;if(null===a&&(a=c,s=Cd(r,n)),c===a?(u=n,d=s):(u=null,d=li(e[c])),null!==d){const y=$y(l);Xs(r,d,e[y],u,!1);const S=xc(t,y);if(null!==S&&"object"==typeof S){const C=Ud(S,e);null!==C&&qy(t,S.create[C],e,e[S.anchorIdx])}}break;case 1:const p=i[++o],b=i[++o];ag(r,ed(l>>>1,e),null,null,p,b,null)}else switch(l){case Ld:const c=i[++o],u=i[++o];null===e[u]&&Hi(e[u]=J2(r,c),e);break;case Bd:const d=i[++o],h=i[++o];null===e[h]&&Hi(e[h]=Fp(r,d,null),e)}}}function Xy(t,i,e,n,r){for(let a=0;a<e.length;a++){const s=e[a],o=e[++a];if(s&r){let l="";for(let c=a+1;c<=a+o;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=wt(i[n-u]);else{const d=u>>>2;switch(3&u){case 1:const h=e[++c],p=e[++c],b=t.data[d];"string"==typeof b?ag(i[11],i[d],null,b,h,l,p):Rr(t,b,i,h,l,i[11],p,!1);break;case 0:const y=i[d];null!==y&&p1(i[11],y,l);break;case 2:oE(t,xc(t,d),i,l);break;case 3:Yy(t,xc(t,d),n,i)}}}}else{const l=e[a+1];if(l>0&&3==(3&l)){const u=xc(t,l>>>2);i[u.currentCaseLViewIndex]<0&&Yy(t,u,n,i)}}a+=o}}function Yy(t,i,e,n){let r=n[i.currentCaseLViewIndex];if(null!==r){let a=Mc;r<0&&(r=n[i.currentCaseLViewIndex]=~r,a=-1),Xy(t,n,i.update[r],e,a)}}function oE(t,i,e,n){const r=function lE(t,i){let e=t.cases.indexOf(i);if(-1===e)switch(t.type){case 1:{const n=function qP(t,i){const e=Fy(i)(parseInt(t,10)),n=WP[e];return void 0!==n?n:"other"}(i,function QP(){return Ly}());e=t.cases.indexOf(n),-1===e&&"other"!==n&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(i,n);if(Ud(i,e)!==r&&(Qy(t,i,e),e[i.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const s=e[i.anchorIdx];s&&qy(t,i.create[r],e,s)}}function Qy(t,i,e){let n=Ud(i,e);if(null!==n){const r=i.remove[n];for(let a=0;a<r.length;a++){const s=r[a];if(s>0){const o=ed(s,e);null!==o&&R1(e[11],o)}else Qy(t,xc(t,~s),e)}}}function cE(){const t=[];let e,n,i=-1;function a(o,l){i=0;const c=Ud(o,l);n=null!==c?o.remove[c]:Tn}function s(){if(i<n.length){const o=n[i++];return o>0?e[o]:(t.push(i,n),a(e[1].data[~o],e),s())}return 0===t.length?null:(n=t.pop(),i=t.pop(),s())}return function r(o,l){for(e=l;t.length;)t.pop();return a(o.value,l),s}}const Hd=/\ufffd(\d+):?\d*\ufffd/gi,dE=/\ufffd(\d+)\ufffd/,Zy=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,hE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,fE=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,pE=/\uE500/g;function Jy(t,i,e,n,r,a,s){const o=qo(t,n,1,null);let l=o<<Yn.SHIFT,c=ec();i===c&&(c=null),null===c&&(l|=Yn.APPEND_EAGERLY),s&&(l|=Yn.COMMENT,function Z2(t){void 0===Ep&&(Ep=t())}(cE)),r.push(l,null===a?"":a);const u=tg(t,o,s?32:1,null===a?"":a,null);Gy(e,u);const d=u.index;return Ta(u,!1),null!==c&&i!==c&&function tE(t,i){let e=t.insertBeforeIndex;null===e?(T1(Uy,Hy),e=t.insertBeforeIndex=[null,i]):(function za(t,i,e){t!=i&&Nn(e,t,i,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(i))}(c,d),u}function vE(t,i,e,n,r,a,s){const o=s.match(Hd),l=Jy(t,i,e,a,n,o?null:s,!1);o&&ul(r,s,l.index,null,0,null)}function ul(t,i,e,n,r,a){const s=t.length,o=s+1;t.push(null,null);const l=s+2,c=i.split(Hd);let u=0;for(let d=0;d<c.length;d++){const h=c[d];if(1&d){const p=r+parseInt(h,10);t.push(-1-p),u|=eC(p)}else""!==h&&t.push(h)}return t.push(e<<2|(n?1:0)),n&&t.push(n,a),t[s]=u,t[o]=t.length-l,u}function eC(t){return 1<<Math.min(t,31)}function tC(t){let i,a,e="",n=0,r=!1;for(;null!==(i=hE.exec(t));)r?i[0]===`\ufffd/*${a}\ufffd`&&(n=i.index,r=!1):(e+=t.substring(n,i.index+i[0].length),a=i[1],r=!0);return e+=t.substr(n),e}function nC(t,i,e,n,r,a){let s=0;const o={type:r.type,currentCaseLViewIndex:qo(t,i,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function DE(t,i,e){t.push(eC(i.mainBinding),2,-1-i.mainBinding,e<<2|2)})(e,r,a),function eE(t,i,e){const n=t.data[i];null===n?t.data[i]=e:n.value=e}(t,a,o);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],d=[];for(let h=0;h<u.length;h++){const p=u[h];if("string"!=typeof p){const b=d.push(p)-1;u[h]=`\x3c!--\ufffd${b}\ufffd--\x3e`}}s=SE(t,o,i,e,n,r.cases[c],u.join(""),d)|s}s&&function RE(t,i,e){t.push(i,1,e<<2|3)}(e,s,a)}function wE(t){const i=[],e=[];let n=1,r=0;const a=Ig(t=t.replace(Zy,function(s,o,l){return n="select"===l?0:1,r=parseInt(o.substr(1),10),""}));for(let s=0;s<a.length;){let o=a[s++].trim();1===n&&(o=o.replace(/\s*(?:=)?(\w+)\s*/,"$1")),o.length&&i.push(o);const l=Ig(a[s++]);i.length>e.length&&e.push(l)}return{type:n,mainBinding:r,cases:i,values:e}}function Ig(t){if(!t)return[];let i=0;const e=[],n=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const o=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const l=t.substring(i,o);Zy.test(l)?n.push(wE(l)):n.push(l),i=o+1}}else{if(0==e.length){const l=t.substring(i,o);n.push(l),i=o+1}e.push("{")}}const s=t.substring(i);return n.push(s),n}function SE(t,i,e,n,r,a,s,o){const l=[],c=[],u=[];i.cases.push(a),i.create.push(l),i.remove.push(c),i.update.push(u);const h=qb(Zf()).getInertBodyElement(s),p=Rp(h)||h;return p?iC(t,i,e,n,l,c,u,p,r,o,0):0}function iC(t,i,e,n,r,a,s,o,l,c,u){let d=0,h=o.firstChild;for(;h;){const p=qo(t,e,1,null);switch(h.nodeType){case Node.ELEMENT_NODE:const b=h,y=b.tagName.toLowerCase();if(Sp.hasOwnProperty(y)){Ng(r,Bd,y,l,p),t.data[p]=y;const I=b.attributes;for(let W=0;W<I.length;W++){const G=I.item(W),Q=G.name.toLowerCase();G.value.match(Hd)?Zb.hasOwnProperty(Q)&&ul(s,G.value,p,G.name,0,Tp[Q]?fc:Dp[Q]?Xb:null):xE(r,p,G)}d=iC(t,i,e,n,r,a,s,h,p,c,u+1)|d,rC(a,p,u)}break;case Node.TEXT_NODE:const w=h.textContent||"",S=w.match(Hd);Ng(r,null,S?"":w,l,p),rC(a,p,u),S&&(d=ul(s,w,p,null,0,null)|d);break;case Node.COMMENT_NODE:const C=dE.exec(h.textContent||"");if(C){const W=c[parseInt(C[1],10)];Ng(r,Ld,"",l,p),nC(t,e,n,l,W,p),TE(a,p,u)}}h=h.nextSibling}return d}function rC(t,i,e){0===e&&t.push(i)}function TE(t,i,e){0===e&&(t.push(~i),t.push(i))}function Ng(t,i,e,n,r){null!==i&&t.push(i),t.push(e,r,function iE(t,i,e){return t|i<<17|e<<1}(0,n,r))}function xE(t,i,e){t.push(i<<1|1,e.name,e.value)}function sC(t,i,e=-1){const n=en(),r=Te(),a=20+t,s=bs(n.consts,i),o=ec();n.firstCreatePass&&function mE(t,i,e,n,r,a){const s=ec(),o=[],l=[],c=[[]];r=function CE(t,i){if(function yE(t){return-1===t}(i))return tC(t);{const e=t.indexOf(`:${i}\ufffd`)+2+i.toString().length,n=t.search(new RegExp(`\ufffd\\/\\*\\d+:${i}\ufffd`));return tC(t.substring(e,n))}}(r,a);const u=function gE(t){return t.replace(pE," ")}(r).split(fE);for(let d=0;d<u.length;d++){let h=u[d];if(0==(1&d)){const p=Ig(h);for(let b=0;b<p.length;b++){let y=p[b];if(0==(1&b)){const w=y;""!==w&&vE(t,s,c[0],o,l,e,w)}else{const w=y;if("object"!=typeof w)throw new Error(`Unable to parse ICU expression in "${r}" message.`);nC(t,e,l,i,w,Jy(t,s,c[0],e,o,"",!0).index)}}}else{const p=47===h.charCodeAt(0),y=(h.charCodeAt(p?1:0),20+Number.parseInt(h.substring(p?2:1)));if(p)c.shift(),Ta(ec(),!1);else{const w=nE(t,c[0],y);c.unshift([]),Ta(w,!0)}}}t.data[n]={create:o,update:l}}(n,null===o?0:o.index,r,a,s,e);const l=n.data[a],u=b1(n,o===r[6]?null:o,r);(function sE(t,i,e,n){const r=t[11];for(let a=0;a<i.length;a++){const s=i[a++],o=i[a],l=(s&Yn.COMMENT)===Yn.COMMENT,c=(s&Yn.APPEND_EAGERLY)===Yn.APPEND_EAGERLY,u=s>>>Yn.SHIFT;let d=t[u];null===d&&(d=t[u]=l?r.createComment(o):Vp(r,o)),c&&null!==e&&Xs(r,e,d,n,!1)}})(r,l.create,u,o&&8&o.type?r[o.index]:null),db(!0)}function Ka(t,i,e){sC(t,i,e),function oC(){db(!1)}()}function Gd(t){return function rE(t){t&&(Mc|=1<<Math.min(kc,31)),kc++}(Gi(Te(),Po(),t)),Gd}function Vg(t,i,e,n,r){if(t=Nt(t),Array.isArray(t))for(let a=0;a<t.length;a++)Vg(t[a],i,e,n,r);else{const a=en(),s=Te();let o=Qo(t)?t:Nt(t.provide),l=m_(t);const c=gi(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Qo(t)||!t.multi){const p=new tc(l,r,k),b=Bg(o,i,r?u:u+h,d);-1===b?(hd(ic(c,s),a,o),Fg(a,t,i.length),i.push(o),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(p),s.push(p)):(e[b]=p,s[b]=p)}else{const p=Bg(o,i,u+h,d),b=Bg(o,i,u,u+h),y=p>=0&&e[p],w=b>=0&&e[b];if(r&&!w||!r&&!y){hd(ic(c,s),a,o);const S=function HE(t,i,e,n,r){const a=new tc(t,e,k);return a.multi=[],a.index=i,a.componentProviders=0,lC(a,r,n&&!e),a}(r?UE:LE,e.length,r,n,l);!r&&w&&(e[b].providerFactory=S),Fg(a,t,i.length,0),i.push(o),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(S),s.push(S)}else Fg(a,t,p>-1?p:b,lC(e[r?b:p],l,!r&&n));!r&&n&&w&&e[b].componentProviders++}}}function Fg(t,i,e,n){const r=Qo(i),a=function vA(t){return!!t.useClass}(i);if(r||a){const l=(a?Nt(i.useClass):i).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&i.multi){const u=c.indexOf(e);-1===u?c.push(e,[n,l]):c[u+1].push(n,l)}else c.push(e,l)}}}function lC(t,i,e){return e&&t.componentProviders++,t.multi.push(i)-1}function Bg(t,i,e,n){for(let r=e;r<n;r++)if(i[r]===t)return r;return-1}function LE(t,i,e,n){return Lg(this.multi,[])}function UE(t,i,e,n){const r=this.multi;let a;if(this.providerFactory){const s=this.providerFactory.componentProviders,o=rc(e,e[1],this.providerFactory.index,n);a=o.slice(0,s),Lg(r,a);for(let l=s;l<o.length;l++)a.push(o[l])}else a=[],Lg(r,a);return a}function Lg(t,i){for(let e=0;e<t.length;e++)i.push((0,t[e])());return i}function Rn(t,i=[]){return e=>{e.providersResolver=(n,r)=>function BE(t,i,e){const n=en();if(n.firstCreatePass){const r=na(t);Vg(e,n.data,n.blueprint,r,!0),Vg(i,n.data,n.blueprint,r,!1)}}(n,r?r(t):t,i)}}class cC{}class zE{resolveComponentFactory(i){throw function jE(t){const i=Error(`No component factory found for ${fn(t)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=t,i}(i)}}let Ks=(()=>{class t{}return t.NULL=new zE,t})();function $E(){return dl(gi(),Te())}function dl(t,i){return new un(Lr(t,i))}let un=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=$E,t})();function WE(t){return t instanceof un?t.nativeElement:t}class Ug{}let Gr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function XE(){const t=Te(),e=wr(gi().index,t);return function qE(t){return t[11]}(Sa(e)?e:t)}(),t})(),YE=(()=>{class t{}return t.\u0275prov=Qe({token:t,providedIn:"root",factory:()=>null}),t})();class Pc{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const QE=new Pc("13.2.3"),Hg={};function jd(t,i,e,n,r=!1){for(;null!==e;){const a=i[e.index];if(null!==a&&n.push(li(a)),ta(a))for(let o=10;o<a.length;o++){const l=a[o],c=l[1].firstChild;null!==c&&jd(l[1],l,c,n)}const s=e.type;if(8&s)jd(t,i,e.child,n);else if(32&s){const o=Ip(e,i);let l;for(;l=o();)n.push(l)}else if(16&s){const o=D1(i,e);if(Array.isArray(o))n.push(...o);else{const l=vc(i[16]);jd(l[1],l,o,n,!0)}}e=r?e.projectionNext:e.next}return n}class Ec{constructor(i,e){this._lView=i,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,e=i[1];return jd(e,i,e.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(ta(i)){const e=i[8],n=e?e.indexOf(this):-1;n>-1&&(Bp(i,n),pd(e,n))}this._attachedToViewContainer=!1}m1(this._lView[1],this._lView)}onDestroy(i){K1(this._lView[1],this._lView,null,i)}markForCheck(){og(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function sA(t,i,e){nd(!0);try{cg(t,i,e)}finally{nd(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Jt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nk(t,i){bc(t,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Jt(902,"");this._appRef=i}}class KE extends Ec{constructor(i){super(i),this._view=i}detectChanges(){s_(this._view)}checkNoChanges(){!function oA(t){nd(!0);try{s_(t)}finally{nd(!1)}}(this._view)}get context(){return null}}class dC extends Ks{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const e=Bi(i);return new Gg(e,this.ngModule)}}function hC(t){const i=[];for(let e in t)t.hasOwnProperty(e)&&i.push({propName:t[e],templateName:e});return i}const JE=new Ut("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>l1});class Gg extends cC{constructor(i,e){super(),this.componentDef=i,this.ngModule=e,this.componentType=i.type,this.selector=function wk(t){return t.map(Ck).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return hC(this.componentDef.inputs)}get outputs(){return hC(this.componentDef.outputs)}create(i,e,n,r){const a=(r=r||this.ngModule)?function eI(t,i){return{get:(e,n,r)=>{const a=t.get(e,Hg,r);return a!==Hg||n===Hg?a:i.get(e,n,r)}}}(i,r.injector):i,s=a.get(Ug,ab),o=a.get(YE,null),l=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function Q1(t,i,e){if(qn(t))return t.selectRootElement(i,e===wa.ShadowDom);let n="string"==typeof i?t.querySelector(i):i;return n.textContent="",n}(l,n,this.componentDef.encapsulation):Fp(s.createRenderer(null,this.componentDef),c,function ZE(t){const i=t.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function M_(t,i){return{components:[],scheduler:t||l1,clean:lA,playerHandler:i||null,flags:0}}(),p=xd(0,null,null,1,0,null,null,null,null,null),b=_c(null,p,h,d,null,null,s,l,o,a);let y,w;id(b);try{const S=function R_(t,i,e,n,r,a){const s=e[1];e[20]=t;const l=Wo(s,20,2,"#host",null),c=l.mergedAttrs=i.hostAttrs;null!==c&&(kd(l,c,!0),null!==t&&(ld(r,t,c),null!==l.classes&&jp(r,t,l.classes),null!==l.styles&&M1(r,t,l.styles)));const u=n.createRenderer(t,i),d=_c(e,X1(i),null,i.onPush?64:16,e[20],l,n,u,a||null,null);return s.firstCreatePass&&(hd(ic(l,e),s,i.type),n_(s,l),i_(l,e.length,1)),Md(e,d),e[20]=d}(u,this.componentDef,b,s,l);if(u)if(n)ld(l,u,["ng-version",QE.full]);else{const{attrs:C,classes:I}=function Sk(t){const i=[],e=[];let n=1,r=2;for(;n<t.length;){let a=t[n];if("string"==typeof a)2===r?""!==a&&i.push(a,t[++n]):8===r&&e.push(a);else{if(!ia(r))break;r=a}n++}return{attrs:i,classes:e}}(this.componentDef.selectors[0]);C&&ld(l,u,C),I&&I.length>0&&jp(l,u,I.join(" "))}if(w=Jf(p,20),void 0!==e){const C=w.projection=[];for(let I=0;I<this.ngContentSelectors.length;I++){const W=e[I];C.push(null!=W?Array.from(W):null)}}y=function x_(t,i,e,n,r){const a=e[1],s=function zk(t,i,e){const n=gi();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),r_(t,n,i,qo(t,i,1,null),e));const r=rc(i,t,n.directiveStart,n);Hi(r,i);const a=Lr(n,i);return a&&Hi(a,i),r}(a,e,i);if(n.components.push(s),t[8]=s,r&&r.forEach(l=>l(s,i)),i.contentQueries){const l=gi();i.contentQueries(1,s,l.directiveStart)}const o=gi();return!a.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(_s(o.index),e_(e[1],o,0,o.directiveStart,o.directiveEnd,i),t_(i,s)),s}(S,this.componentDef,b,h,[MA]),yc(p,b,null)}finally{rd()}return new nI(this.componentType,y,dl(w,b),b,w)}}class nI extends class GE{}{constructor(i,e,n,r,a){super(),this.location=n,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new KE(r),this.componentType=i}get injector(){return new No(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Za{}class fC{}const hl=new Map;class mC extends Za{constructor(i,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new dC(this);const n=Vr(i);this._bootstrapComponents=ka(n.bootstrap),this._r3Injector=g_(i,e,[{provide:Za,useValue:this},{provide:Ks,useValue:this.componentFactoryResolver}],fn(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,e=ei.THROW_IF_NOT_FOUND,n=kt.Default){return i===ei||i===Za||i===dg?this:this._r3Injector.get(i,e,n)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class jg extends fC{constructor(i){super(),this.moduleType=i,null!==Vr(i)&&function rI(t){const i=new Set;!function e(n){const r=Vr(n,!0),a=r.id;null!==a&&(function pC(t,i,e){if(i&&i!==e)throw new Error(`Duplicate module registered for ${t} - ${fn(i)} vs ${fn(i.name)}`)}(a,hl.get(a),n),hl.set(a,n));const s=ka(r.imports);for(const o of s)i.has(o)||(i.add(o),e(o))}(t)}(i)}create(i){return new mC(this.moduleType,i)}}function zg(t,i,e){const n=Yi()+t,r=Te();return r[n]===St?Pa(r,n,e?i.call(e):i()):Sc(r,n)}function bi(t,i,e,n){return bC(Te(),Yi(),t,i,e,n)}function Zs(t,i,e,n,r){return _C(Te(),Yi(),t,i,e,n,r)}function Ic(t,i){const e=t[i];return e===St?void 0:e}function bC(t,i,e,n,r,a){const s=i+e;return Gi(t,s,r)?Pa(t,s+1,a?n.call(a,r):n(r)):Ic(t,s+1)}function _C(t,i,e,n,r,a,s){const o=i+e;return Ys(t,o,r,a)?Pa(t,o+2,s?n.call(s,r,a):n(r,a)):Ic(t,o+2)}function At(t,i){const e=en();let n;const r=t+20;e.firstCreatePass?(n=function uI(t,i){if(i)for(let e=i.length-1;e>=0;e--){const n=i[e];if(t===n.name)return n}}(i,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const a=n.factory||(n.factory=$s(n.type)),s=gs(k);try{const o=ud(!1),l=a();return ud(o),function UA(t,i,e,n){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),i[e]=n}(e,Te(),r,l),l}finally{gs(s)}}function zd(t,i,e){const n=t+20,r=Te(),a=Ao(r,n);return Oc(r,n)?bC(r,Yi(),i,a.transform,e,a):a.transform(e)}function Qt(t,i,e,n){const r=t+20,a=Te(),s=Ao(a,r);return Oc(a,r)?_C(a,Yi(),i,s.transform,e,n,s):s.transform(e,n)}function Nc(t,i,e,n,r){const a=t+20,s=Te(),o=Ao(s,a);return Oc(s,a)?function yC(t,i,e,n,r,a,s,o){const l=i+e;return Pd(t,l,r,a,s)?Pa(t,l+3,o?n.call(o,r,a,s):n(r,a,s)):Ic(t,l+3)}(s,Yi(),i,o.transform,e,n,r,o):o.transform(e,n,r)}function Oc(t,i){return t[1].data[i].pure}function Wg(t){return i=>{setTimeout(t,void 0,i)}}const Ke=class fI extends ge{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,e,n){var r,a,s;let o=i,l=e||(()=>null),c=n;if(i&&"object"==typeof i){const d=i;o=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(a=d.error)||void 0===a?void 0:a.bind(d),c=null===(s=d.complete)||void 0===s?void 0:s.bind(d)}this.__isAsync&&(l=Wg(l),o&&(o=Wg(o)),c&&(c=Wg(c)));const u=super.subscribe({next:o,error:l,complete:c});return i instanceof ue&&i.add(u),u}};function pI(){return this._results[Ko()]()}class qg{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ko(),n=qg.prototype;n[e]||(n[e]=pI)}get changes(){return this._changes||(this._changes=new Ke)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,e){return this._results.reduce(i,e)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,e){const n=this;n.dirty=!1;const r=Ur(i);(this._changesDetected=!function EM(t,i,e){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],a=i[n];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Fn=(()=>{class t{}return t.__NG_ELEMENT_ID__=vI,t})();const gI=Fn,mI=class extends gI{constructor(i,e,n){super(),this._declarationLView=i,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(i){const e=this._declarationTContainer.tViews,n=_c(this._declarationLView,e,i,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(n[19]=a.createEmbeddedView(e)),yc(e,n,i),new Ec(n)}};function vI(){return $d(gi(),Te())}function $d(t,i){return 4&t.type?new mI(i,t,dl(t,i)):null}let jr=(()=>{class t{}return t.__NG_ELEMENT_ID__=bI,t})();function bI(){return DC(gi(),Te())}const _I=jr,SC=class extends _I{constructor(i,e,n){super(),this._lContainer=i,this._hostTNode=e,this._hostLView=n}get element(){return dl(this._hostTNode,this._hostLView)}get injector(){return new No(this._hostTNode,this._hostLView)}get parentInjector(){const i=dd(this._hostTNode,this._hostLView);if(Cb(i)){const e=Io(i,this._hostLView),n=Eo(i);return new No(e[1].data[n+8],e)}return new No(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const e=TC(this._lContainer);return null!==e&&e[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,e,n){const r=i.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(i,e,n,r,a){const s=i&&!function sc(t){return"function"==typeof t}(i);let o;if(s)o=e;else{const d=e||{};o=d.index,n=d.injector,r=d.projectableNodes,a=d.ngModuleRef}const l=s?i:new Gg(Bi(i)),c=n||this.parentInjector;if(!a&&null==l.ngModule){const h=(s?c:this.parentInjector).get(Za,null);h&&(a=h)}const u=l.create(c,r,void 0,a);return this.insert(u.hostView,o),u}insert(i,e){const n=i._lView,r=n[1];if(function Jx(t){return ta(t[3])}(n)){const u=this.indexOf(i);if(-1!==u)this.detach(u);else{const d=n[3],h=new SC(d,d[6],d[3]);h.detach(h.indexOf(i))}}const a=this._adjustIndex(e),s=this._lContainer;!function rk(t,i,e,n){const r=10+n,a=e.length;n>0&&(e[r-1][4]=i),n<a-10?(i[4]=e[r],Pb(e,10+n,i)):(e.push(i),i[4]=null),i[3]=e;const s=i[17];null!==s&&e!==s&&function ak(t,i){const e=t[9];i[16]!==i[3][3][16]&&(t[2]=!0),null===e?t[9]=[i]:e.push(i)}(s,i);const o=i[19];null!==o&&o.insertView(t),i[2]|=128}(r,n,s,a);const o=Hp(a,s),l=n[11],c=Cd(l,s[7]);return null!==c&&function tk(t,i,e,n,r,a){n[0]=r,n[6]=i,bc(t,n,e,1,r,a)}(r,s[6],l,n,c,o),i.attachToViewContainerRef(),Pb(Xg(s),a,i),i}move(i,e){return this.insert(i,e)}indexOf(i){const e=TC(this._lContainer);return null!==e?e.indexOf(i):-1}remove(i){const e=this._adjustIndex(i,-1),n=Bp(this._lContainer,e);n&&(pd(Xg(this._lContainer),e),m1(n[1],n))}detach(i){const e=this._adjustIndex(i,-1),n=Bp(this._lContainer,e);return n&&null!=pd(Xg(this._lContainer),e)?new Ec(n):null}_adjustIndex(i,e=0){return null==i?this.length+e:i}};function TC(t){return t[8]}function Xg(t){return t[8]||(t[8]=[])}function DC(t,i){let e;const n=i[t.index];if(ta(n))e=n;else{let r;if(8&t.type)r=li(n);else{const a=i[11];r=a.createComment("");const s=Lr(t,i);Xs(a,Cd(a,s),r,function ck(t,i){return qn(t)?t.nextSibling(i):i.nextSibling}(a,s),!1)}i[t.index]=e=a_(n,i,r,t),Md(i,e)}return new SC(e,t,i)}class Yg{constructor(i){this.queryList=i,this.matches=null}clone(){return new Yg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qg{constructor(i=[]){this.queries=i}createEmbeddedView(i){const e=i.queries;if(null!==e){const n=null!==i.contentQueries?i.contentQueries[0]:e.length,r=[];for(let a=0;a<n;a++){const s=e.getByIndex(a);r.push(this.queries[s.indexInDeclarationView].clone())}return new Qg(r)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let e=0;e<this.queries.length;e++)null!==AC(i,e).matches&&this.queries[e].setDirty()}}class RC{constructor(i,e,n=null){this.predicate=i,this.flags=e,this.read=n}}class Kg{constructor(i=[]){this.queries=i}elementStart(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(i,e)}elementEnd(i){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(i)}embeddedTView(i){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,a=this.getByIndex(n).embeddedTView(i,r);a&&(a.indexInDeclarationView=n,null!==e?e.push(a):e=[a])}return null!==e?new Kg(e):null}template(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(i,e)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Zg{constructor(i,e=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(i,e){this.isApplyingToNode(e)&&this.matchTNode(i,e)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,e){this.elementStart(i,e)}embeddedTView(i,e){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,e),new Zg(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=i.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(i,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const a=n[r];this.matchTNodeWithReadOption(i,e,wI(e,a)),this.matchTNodeWithReadOption(i,e,fd(e,i,a,!1,!1))}else n===Fn?4&e.type&&this.matchTNodeWithReadOption(i,e,-1):this.matchTNodeWithReadOption(i,e,fd(e,i,n,!1,!1))}matchTNodeWithReadOption(i,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===un||r===jr||r===Fn&&4&e.type)this.addMatch(e.index,-2);else{const a=fd(e,i,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,n)}}addMatch(i,e){null===this.matches?this.matches=[i,e]:this.matches.push(i,e)}}function wI(t,i){const e=t.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===i)return e[n+1];return null}function TI(t,i,e,n){return-1===e?function SI(t,i){return 11&t.type?dl(t,i):4&t.type?$d(t,i):null}(i,t):-2===e?function DI(t,i,e){return e===un?dl(i,t):e===Fn?$d(i,t):e===jr?DC(i,t):void 0}(t,i,n):rc(t,t[1],e,i)}function xC(t,i,e,n){const r=i[19].queries[n];if(null===r.matches){const a=t.data,s=e.matches,o=[];for(let l=0;l<s.length;l+=2){const c=s[l];o.push(c<0?null:TI(i,a[c],s[l+1],e.metadata.read))}r.matches=o}return r.matches}function Jg(t,i,e,n){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const s=xC(t,i,r,e);for(let o=0;o<a.length;o+=2){const l=a[o];if(l>0)n.push(s[o/2]);else{const c=a[o+1],u=i[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Jg(h[1],h,c,n)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const p=d[h];Jg(p[1],p,c,n)}}}}}return n}function mn(t){const i=Te(),e=en(),n=hb();sp(n+1);const r=AC(e,n);if(t.dirty&&sb(i)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?Jg(e,i,n,[]):xC(e,i,r,n);t.reset(a,WE),t.notifyOnChanges()}return!0}return!1}function Ja(t,i,e){const n=en();n.firstCreatePass&&(kC(n,new RC(t,i,e),-1),2==(2&i)&&(n.staticViewQueries=!0)),MC(n,Te(),i)}function ni(t,i,e,n){const r=en();if(r.firstCreatePass){const a=gi();kC(r,new RC(i,e,n),a.index),function xI(t,i){const e=t.contentQueries||(t.contentQueries=[]);i!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,i)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}MC(r,Te(),e)}function vn(){return function RI(t,i){return t[19].queries[i].queryList}(Te(),hb())}function MC(t,i,e){const n=new qg(4==(4&e));K1(t,i,n,n.destroy),null===i[19]&&(i[19]=new Qg),i[19].queries.push(new Yg(n))}function kC(t,i,e){null===t.queries&&(t.queries=new Kg),t.queries.track(new Zg(i,e))}function AC(t,i){return t.queries.getByIndex(i)}function ot(t,i){return $d(t,i)}function Xd(...t){}const Yd=new Ut("Application Initializer");let pl=(()=>{class t{constructor(e){this.appInits=e,this.resolve=Xd,this.reject=Xd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(Tc(a))e.push(a);else if(xg(a)){const s=new Promise((o,l)=>{a.subscribe({complete:o,error:l})});e.push(s)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Ve(Yd,8))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const Fc=new Ut("AppId"),$I={provide:Fc,useFactory:function zI(){return`${s0()}${s0()}${s0()}`},deps:[]};function s0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qC=new Ut("Platform Initializer"),Qd=new Ut("Platform ID"),XC=new Ut("appBootstrapListener");let YC=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const Ds=new Ut("LocaleId"),QC=new Ut("DefaultCurrencyCode");class WI{constructor(i,e){this.ngModuleFactory=i,this.componentFactories=e}}let Kd=(()=>{class t{compileModuleSync(e){return new jg(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),a=ka(Vr(e).declarations).reduce((s,o)=>{const l=Bi(o);return l&&s.push(new Gg(l)),s},[]);return new WI(n,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const XI=(()=>Promise.resolve(0))();function o0(t){"undefined"==typeof Zone?XI.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class xn{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ke(!1),this.onMicrotaskEmpty=new Ke(!1),this.onStable=new Ke(!1),this.onError=new Ke(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function YI(){let t=yn.requestAnimationFrame,i=yn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&i){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const n=i[Zone.__symbol__("OriginalDelegate")];n&&(i=n)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function ZI(t){const i=()=>{!function KI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(yn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,c0(t),t.isCheckStableRunning=!0,l0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),c0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,a,s,o)=>{try{return KC(t),e.invokeTask(r,a,s,o)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&i(),ZC(t)}},onInvoke:(e,n,r,a,s,o,l)=>{try{return KC(t),e.invoke(r,a,s,o,l)}finally{t.shouldCoalesceRunChangeDetection&&i(),ZC(t)}},onHasTask:(e,n,r,a)=>{e.hasTask(r,a),n===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,c0(t),l0(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,n,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,e,n){return this._inner.run(i,e,n)}runTask(i,e,n,r){const a=this._inner,s=a.scheduleEventTask("NgZoneEvent: "+r,i,QI,Xd,Xd);try{return a.runTask(s,e,n)}finally{a.cancelTask(s)}}runGuarded(i,e,n){return this._inner.runGuarded(i,e,n)}runOutsideAngular(i){return this._outer.run(i)}}const QI={};function l0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function c0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function KC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ZC(t){t._nesting--,l0(t)}class JI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ke,this.onMicrotaskEmpty=new Ke,this.onStable=new Ke,this.onError=new Ke}run(i,e,n){return i.apply(e,n)}runGuarded(i,e,n){return i.apply(e,n)}runOutsideAngular(i){return i()}runTask(i,e,n,r){return i.apply(e,n)}}let u0=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xn.assertNotInAngularZone(),o0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())o0(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let a=-1;n&&n>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Ve(xn))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})(),JC=(()=>{class t{constructor(){this._applications=new Map,d0.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return d0.findTestabilityInTree(this,e,n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();class eN{addToWindow(i){}findTestabilityInTree(i,e,n){return null}}let la,d0=new eN;const ew=new Ut("AllowMultipleToken");class tw{constructor(i,e){this.name=i,this.token=e}}function nw(t,i,e=[]){const n=`Platform: ${i}`,r=new Ut(n);return(a=[])=>{let s=iw();if(!s||s.injector.get(ew,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const o=e.concat(a).concat({provide:r,useValue:!0},{provide:hg,useValue:"platform"});!function rN(t){if(la&&!la.destroyed&&!la.injector.get(ew,!1))throw new Jt(400,"");la=t.get(rw);const i=t.get(qC,null);i&&i.forEach(e=>e())}(ei.create({providers:o,name:n}))}return function aN(t){const i=iw();if(!i)throw new Jt(401,"");return i}()}}function iw(){return la&&!la.destroyed?la:null}let rw=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const o=function sN(t,i){let e;return e="noop"===t?new JI:("zone.js"===t?void 0:t)||new xn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),e}(n?n.ngZone:void 0,{ngZoneEventCoalescing:n&&n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:n&&n.ngZoneRunCoalescing||!1}),l=[{provide:xn,useValue:o}];return o.run(()=>{const c=ei.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get(jo,null);if(!d)throw new Jt(402,"");return o.runOutsideAngular(()=>{const h=o.onError.subscribe({next:p=>{d.handleError(p)}});u.onDestroy(()=>{h0(this._modules,u),h.unsubscribe()})}),function oN(t,i,e){try{const n=e();return Tc(n)?n.catch(r=>{throw i.runOutsideAngular(()=>t.handleError(r)),r}):n}catch(n){throw i.runOutsideAngular(()=>t.handleError(n)),n}}(d,o,()=>{const h=u.injector.get(pl);return h.runInitializers(),h.donePromise.then(()=>(function YP(t){(function yr(t,i){null==t&&Nn(i,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(Ly=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Ds,Fd)||Fd),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,n=[]){const r=aw({},n);return function nN(t,i,e){const n=new jg(e);return Promise.resolve(n)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const n=e.injector.get(Js);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Jt(403,"");e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Jt(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Ve(ei))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();function aw(t,i){return Array.isArray(i)?i.reduce(aw,t):Object.assign(Object.assign({},t),i)}let Js=(()=>{class t{constructor(e,n,r,a,s){this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Ne(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Ne(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{xn.assertNotInAngularZone(),o0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{xn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=jv(o,l.pipe(zv()))}bootstrap(e,n){if(!this._initStatus.done)throw new Jt(405,"");let r;r=e instanceof cC?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function iN(t){return t.isBoundToModule}(r)?void 0:this._injector.get(Za),o=r.create(ei.NULL,[],n||r.selector,a),l=o.location.nativeElement,c=o.injector.get(u0,null),u=c&&o.injector.get(JC);return c&&u&&u.registerApplication(l,c),o.onDestroy(()=>{this.detachView(o.hostView),h0(this.components,o),u&&u.unregisterApplication(l)}),this._loadComponent(o),o}tick(){if(this._runningTick)throw new Jt(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;h0(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(XC,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Ve(xn),Ve(ei),Ve(jo),Ve(Ks),Ve(pl))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();function h0(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}let ow=!0,xr=(()=>{class t{}return t.__NG_ELEMENT_ID__=uN,t})();function uN(t){return function dN(t,i,e){if(Zu(t)&&!e){const n=wr(t.index,i);return new Ec(n,n)}return 47&t.type?new Ec(i[16],i):null}(gi(),Te(),16==(16&t))}class hw{constructor(){}supports(i){return wc(i)}create(i){return new vN(i)}}const mN=(t,i)=>i;class vN{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||mN}forEachItem(i){let e;for(e=this._itHead;null!==e;e=e._next)i(e)}forEachOperation(i){let e=this._itHead,n=this._removalsHead,r=0,a=null;for(;e||n;){const s=!n||e&&e.currentIndex<pw(n,r,a)?e:n,o=pw(s,r,a),l=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{a||(a=[]);const c=o-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const p=h<a.length?a[h]:a[h]=0,b=p+h;u<=b&&b<c&&(a[h]=p+1)}a[s.previousIndex]=u-c}}o!==l&&i(s,o,l)}}forEachPreviousItem(i){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachMovedItem(i){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}forEachIdentityChange(i){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)i(e)}diff(i){if(null==i&&(i=[]),!wc(i))throw new Jt(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let r,a,s,e=this._itHead,n=!1;if(Array.isArray(i)){this.length=i.length;for(let o=0;o<this.length;o++)a=i[o],s=this._trackByFn(o,a),null!==e&&Object.is(e.trackById,s)?(n&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,o),n=!0),e=e._next}else r=0,function BA(t,i){if(Array.isArray(t))for(let e=0;e<t.length;e++)i(t[e]);else{const e=t[Ko()]();let n;for(;!(n=e.next()).done;)i(n.value)}}(i,o=>{s=this._trackByFn(r,o),null!==e&&Object.is(e.trackById,s)?(n&&(e=this._verifyReinsertion(e,o,s,r)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,e,n,r){let a;return null===i?a=this._itTail:(a=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._reinsertAfter(i,a,r)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._moveAfter(i,a,r)):i=this._addAfter(new bN(e,n),a,r),i}_verifyReinsertion(i,e,n,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==a?i=this._reinsertAfter(a,i._prev,r):i.currentIndex!=r&&(i.currentIndex=r,this._addToMoves(i,r)),i}_truncate(i){for(;null!==i;){const e=i._next;this._addToRemovals(this._unlink(i)),i=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const r=i._prevRemoved,a=i._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(i,e,n),this._addToMoves(i,n),i}_moveAfter(i,e,n){return this._unlink(i),this._insertAfter(i,e,n),this._addToMoves(i,n),i}_addAfter(i,e,n){return this._insertAfter(i,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,e,n){const r=null===e?this._itHead:e._next;return i._next=r,i._prev=e,null===r?this._itTail=i:r._prev=i,null===e?this._itHead=i:e._next=i,null===this._linkedRecords&&(this._linkedRecords=new fw),this._linkedRecords.put(i),i.currentIndex=n,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const e=i._prev,n=i._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,i}_addToMoves(i,e){return i.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,e){return i.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class bN{constructor(i,e){this.item=i,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _N{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,i))return n;return null}remove(i){const e=i._prevDup,n=i._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class fw{constructor(){this.map=new Map}put(i){const e=i.trackById;let n=this.map.get(e);n||(n=new _N,this.map.set(e,n)),n.add(i)}get(i,e){const r=this.map.get(i);return r?r.get(i,e):null}remove(i){const e=i.trackById;return this.map.get(e).remove(i)&&this.map.delete(e),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pw(t,i,e){const n=t.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+i+r}class gw{constructor(){}supports(i){return i instanceof Map||bg(i)}create(){return new yN}}class yN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let e;for(e=this._mapHead;null!==e;e=e._next)i(e)}forEachPreviousItem(i){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)i(e)}forEachChangedItem(i){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}diff(i){if(i){if(!(i instanceof Map||bg(i)))throw new Jt(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(i,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,e){if(i){const n=i._prev;return e._next=i,e._prev=n,i._prev=e,n&&(n._next=e),i===this._mapHead&&(this._mapHead=e),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(i,e){if(this._records.has(i)){const r=this._records.get(i);this._maybeAddToChanges(r,e);const a=r._prev,s=r._next;return a&&(a._next=s),s&&(s._prev=a),r._next=null,r._prev=null,r}const n=new CN(i);return this._records.set(i,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,e){Object.is(e,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=e,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,e){i instanceof Map?i.forEach(e):Object.keys(i).forEach(n=>e(i[n],n))}}class CN{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mw(){return new Bc([new hw])}let Bc=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||mw()),deps:[[t,new Uo,new Ra]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new Jt(901,"")}}return t.\u0275prov=Qe({token:t,providedIn:"root",factory:mw}),t})();function vw(){return new gl([new gw])}let gl=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||vw()),deps:[[t,new Uo,new Ra]]}}find(e){const n=this.factories.find(a=>a.supports(e));if(n)return n;throw new Jt(901,"")}}return t.\u0275prov=Qe({token:t,providedIn:"root",factory:vw}),t})();const wN=[new gw],TN=new Bc([new hw]),DN=new gl(wN),RN=nw(null,"core",[{provide:Qd,useValue:"unknown"},{provide:rw,deps:[ei]},{provide:JC,deps:[]},{provide:YC,deps:[]}]),PN=[{provide:Js,useClass:Js,deps:[xn,ei,jo,Ks,pl]},{provide:JE,deps:[xn],useFactory:function EN(t){let i=[];return t.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(e){i.push(e)}}},{provide:pl,useClass:pl,deps:[[new Ra,Yd]]},{provide:Kd,useClass:Kd,deps:[]},$I,{provide:Bc,useFactory:function xN(){return TN},deps:[]},{provide:gl,useFactory:function MN(){return DN},deps:[]},{provide:Ds,useFactory:function kN(t){return t||function AN(){return"undefined"!=typeof $localize&&$localize.locale||Fd}()},deps:[[new dc(Ds),new Ra,new Uo]]},{provide:QC,useValue:"USD"}];let IN=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Ve(Js))},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({providers:PN}),t})(),eh=null;function Na(){return eh}const ci=new Ut("DocumentToken");let to=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:function(){return function FN(){return Ve(bw)}()},providedIn:"platform"}),t})();const BN=new Ut("Location Initialized");let bw=(()=>{class t extends to{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Na().getBaseHref(this._doc)}onPopState(e){const n=Na().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Na().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){_w()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){_w()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Ve(ci))},t.\u0275prov=Qe({token:t,factory:function(){return function LN(){return new bw(Ve(ci))}()},providedIn:"platform"}),t})();function _w(){return!!window.history.pushState}function v0(t,i){if(0==t.length)return i;if(0==i.length)return t;let e=0;return t.endsWith("/")&&e++,i.startsWith("/")&&e++,2==e?t+i.substring(1):1==e?t+i:t+"/"+i}function yw(t){const i=t.match(/#|\?|$/),e=i&&i.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function es(t){return t&&"?"!==t[0]?"?"+t:t}let ml=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:function(){return function UN(t){const i=Ve(ci).location;return new Cw(Ve(to),i&&i.origin||"")}()},providedIn:"root"}),t})();const b0=new Ut("appBaseHref");let Cw=(()=>{class t extends ml{constructor(e,n){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return v0(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+es(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,a){const s=this.prepareExternalUrl(r+es(a));this._platformLocation.pushState(e,n,s)}replaceState(e,n,r,a){const s=this.prepareExternalUrl(r+es(a));this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return t.\u0275fac=function(e){return new(e||t)(Ve(to),Ve(b0,8))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})(),HN=(()=>{class t extends ml{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=v0(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,a){let s=this.prepareExternalUrl(r+es(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,n,s)}replaceState(e,n,r,a){let s=this.prepareExternalUrl(r+es(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return t.\u0275fac=function(e){return new(e||t)(Ve(to),Ve(b0,8))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})(),_0=(()=>{class t{constructor(e,n){this._subject=new Ke,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=yw(ww(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+es(n))}normalize(e){return t.stripTrailingSlash(function jN(t,i){return t&&i.startsWith(t)?i.substring(t.length):i}(this._baseHref,ww(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+es(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+es(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformStrategy).historyGo)||void 0===r||r.call(n,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return t.normalizeQueryParams=es,t.joinWithSlash=v0,t.stripTrailingSlash=yw,t.\u0275fac=function(e){return new(e||t)(Ve(ml),Ve(to))},t.\u0275prov=Qe({token:t,factory:function(){return function GN(){return new _0(Ve(ml),Ve(to))}()},providedIn:"root"}),t})();function ww(t){return t.replace(/\/index.html$/,"")}var fr=(()=>((fr=fr||{})[fr.Decimal=0]="Decimal",fr[fr.Percent=1]="Percent",fr[fr.Currency=2]="Currency",fr[fr.Scientific=3]="Scientific",fr))(),ui=(()=>((ui=ui||{})[ui.Zero=0]="Zero",ui[ui.One=1]="One",ui[ui.Two=2]="Two",ui[ui.Few=3]="Few",ui[ui.Many=4]="Many",ui[ui.Other=5]="Other",ui))(),ct=(()=>((ct=ct||{})[ct.Decimal=0]="Decimal",ct[ct.Group=1]="Group",ct[ct.List=2]="List",ct[ct.PercentSign=3]="PercentSign",ct[ct.PlusSign=4]="PlusSign",ct[ct.MinusSign=5]="MinusSign",ct[ct.Exponential=6]="Exponential",ct[ct.SuperscriptingExponent=7]="SuperscriptingExponent",ct[ct.PerMille=8]="PerMille",ct[ct.Infinity=9]="Infinity",ct[ct.NaN=10]="NaN",ct[ct.TimeSeparator=11]="TimeSeparator",ct[ct.CurrencyDecimal=12]="CurrencyDecimal",ct[ct.CurrencyGroup=13]="CurrencyGroup",ct))();function zr(t,i){const e=Ji(t),n=e[Ge.NumberSymbols][i];if(void 0===n){if(i===ct.CurrencyDecimal)return e[Ge.NumberSymbols][ct.Decimal];if(i===ct.CurrencyGroup)return e[Ge.NumberSymbols][ct.Group]}return n}function y0(t,i){return Ji(t)[Ge.NumberFormats][i]}const QN=Fy,gO=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function D0(t,i,e,n,r,a,s=!1){let o="",l=!1;if(isFinite(t)){let c=function SO(t){let n,r,a,s,o,i=Math.abs(t)+"",e=0;for((r=i.indexOf("."))>-1&&(i=i.replace(".","")),(a=i.search(/e/i))>0?(r<0&&(r=a),r+=+i.slice(a+1),i=i.substring(0,a)):r<0&&(r=i.length),a=0;"0"===i.charAt(a);a++);if(a===(o=i.length))n=[0],r=1;else{for(o--;"0"===i.charAt(o);)o--;for(r-=a,n=[],s=0;a<=o;a++,s++)n[s]=Number(i.charAt(a))}return r>22&&(n=n.splice(0,21),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}(t);s&&(c=function wO(t){if(0===t.digits[0])return t;const i=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===i?t.digits.push(0,0):1===i&&t.digits.push(0),t.integerLen+=2),t}(c));let u=i.minInt,d=i.minFrac,h=i.maxFrac;if(a){const C=a.match(gO);if(null===C)throw new Error(`${a} is not a valid digit info`);const I=C[1],W=C[3],G=C[5];null!=I&&(u=x0(I)),null!=W&&(d=x0(W)),null!=G?h=x0(G):null!=W&&d>h&&(h=d)}!function TO(t,i,e){if(i>e)throw new Error(`The minimum number of digits after fraction (${i}) is higher than the maximum (${e}).`);let n=t.digits,r=n.length-t.integerLen;const a=Math.min(Math.max(i,r),e);let s=a+t.integerLen,o=n[s];if(s>0){n.splice(Math.max(t.integerLen,s));for(let d=s;d<n.length;d++)n[d]=0}else{r=Math.max(0,r),t.integerLen=1,n.length=Math.max(1,s=a+1),n[0]=0;for(let d=1;d<s;d++)n[d]=0}if(o>=5)if(s-1<0){for(let d=0;d>s;d--)n.unshift(0),t.integerLen++;n.unshift(1),t.integerLen++}else n[s-1]++;for(;r<Math.max(0,a);r++)n.push(0);let l=0!==a;const c=i+t.integerLen,u=n.reduceRight(function(d,h,p,b){return b[p]=(h+=d)<10?h:h-10,l&&(0===b[p]&&p>=c?b.pop():l=!1),h>=10?1:0},0);u&&(n.unshift(u),t.integerLen++)}(c,d,h);let p=c.digits,b=c.integerLen;const y=c.exponent;let w=[];for(l=p.every(C=>!C);b<u;b++)p.unshift(0);for(;b<0;b++)p.unshift(0);b>0?w=p.splice(b,p.length):(w=p,p=[0]);const S=[];for(p.length>=i.lgSize&&S.unshift(p.splice(-i.lgSize,p.length).join(""));p.length>i.gSize;)S.unshift(p.splice(-i.gSize,p.length).join(""));p.length&&S.unshift(p.join("")),o=S.join(zr(e,n)),w.length&&(o+=zr(e,r)+w.join("")),y&&(o+=zr(e,ct.Exponential)+"+"+y)}else o=zr(e,ct.Infinity);return o=t<0&&!l?i.negPre+o+i.negSuf:i.posPre+o+i.posSuf,o}function R0(t,i="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=t.split(";"),r=n[0],a=n[1],s=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],o=s[0],l=s[1]||"";e.posPre=o.substr(0,o.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?e.minFrac=e.maxFrac=u+1:"#"===d?e.maxFrac=u+1:e.posSuf+=d}const c=o.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const u=r.length-e.posPre.length-e.posSuf.length,d=a.indexOf("#");e.negPre=a.substr(0,d).replace(/'/g,""),e.negSuf=a.substr(d+u).replace(/'/g,"")}else e.negPre=i+e.posPre,e.negSuf=e.posSuf;return e}function x0(t){const i=parseInt(t);if(isNaN(i))throw new Error("Invalid integer literal when parsing "+t);return i}class uh{}let DO=(()=>{class t extends uh{constructor(e){super(),this.locale=e}getPluralCategory(e,n){switch(QN(n||this.locale)(e)){case ui.Zero:return"zero";case ui.One:return"one";case ui.Two:return"two";case ui.Few:return"few";case ui.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Ve(Ds))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})(),Bn=(()=>{class t{constructor(e,n,r,a){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(wc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${fn(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(k(Bc),k(gl),k(un),k(Gr))},t.\u0275dir=Le({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class MO{constructor(i,e,n,r){this.$implicit=i,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ri=(()=>{class t{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,a,s)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new MO(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)n.remove(null===a?void 0:a);else if(null!==a){const o=n.get(a);n.move(o,s),Pw(o,r)}});for(let r=0,a=n.length;r<a;r++){const o=n.get(r).context;o.index=r,o.count=a,o.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Pw(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(k(jr),k(Fn),k(Bc))},t.\u0275dir=Le({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function Pw(t,i){t.context.$implicit=i.item}let Kt=(()=>{class t{constructor(e,n){this._viewContainer=e,this._context=new kO,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Ew("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Ew("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(k(jr),k(Fn))},t.\u0275dir=Le({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class kO{constructor(){this.$implicit=null,this.ngIf=null}}function Ew(t,i){if(i&&!i.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${fn(i)}'.`)}let vl=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const n=this._viewContainerRef;this._viewRef&&n.remove(n.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?n.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(k(jr))},t.\u0275dir=Le({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[ki]}),t})();function ua(t,i){return new Jt(2100,"")}let ns=(()=>{class t{constructor(e){this._locale=e}transform(e,n,r){if(!A0(e))return null;r=r||this._locale;try{return function CO(t,i,e){return D0(t,R0(y0(i,fr.Decimal),zr(i,ct.MinusSign)),i,ct.Group,ct.Decimal,e)}(P0(e),r,n)}catch(a){throw ua()}}}return t.\u0275fac=function(e){return new(e||t)(k(Ds,16))},t.\u0275pipe=dr({name:"number",type:t,pure:!0}),t})(),Ow=(()=>{class t{constructor(e){this._locale=e}transform(e,n,r){if(!A0(e))return null;r=r||this._locale;try{return function yO(t,i,e){return D0(t,R0(y0(i,fr.Percent),zr(i,ct.MinusSign)),i,ct.Group,ct.Decimal,e,!0).replace(new RegExp("%","g"),zr(i,ct.PercentSign))}(P0(e),r,n)}catch(a){throw ua()}}}return t.\u0275fac=function(e){return new(e||t)(k(Ds,16))},t.\u0275pipe=dr({name:"percent",type:t,pure:!0}),t})();function A0(t){return!(null==t||""===t||t!=t)}function P0(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let pr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({providers:[{provide:uh,useClass:DO}]}),t})();let iV=(()=>{class t{}return t.\u0275prov=Qe({token:t,providedIn:"root",factory:()=>new rV(Ve(ci),window)}),t})();class rV{constructor(i,e){this.document=i,this.window=e,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const e=function aV(t,i){const e=t.getElementById(i)||t.getElementsByName(i)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const a=r.shadowRoot;if(a){const s=a.getElementById(i)||a.querySelector(`[name="${i}"]`);if(s)return s}r=n.nextNode()}}return null}(this.document,i);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(i){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=i)}}scrollToElement(i){const e=i.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(n-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const i=Fw(this.window.history)||Fw(Object.getPrototypeOf(this.window.history));return!(!i||!i.writable&&!i.set)}catch(i){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(i){return!1}}}function Fw(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class E0 extends class oV extends class VN{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ON(t){eh||(eh=t)}(new E0)}onAndCancel(i,e,n){return i.addEventListener(e,n,!1),()=>{i.removeEventListener(e,n,!1)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,e){return(e=e||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return"window"===e?window:"document"===e?i:"body"===e?i.body:null}getBaseHref(i){const e=function lV(){return Hc=Hc||document.querySelector("base"),Hc?Hc.getAttribute("href"):null}();return null==e?null:function cV(t){dh=dh||document.createElement("a"),dh.setAttribute("href",t);const i=dh.pathname;return"/"===i.charAt(0)?i:`/${i}`}(e)}resetBaseElement(){Hc=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return function RO(t,i){i=encodeURIComponent(i);for(const e of t.split(";")){const n=e.indexOf("="),[r,a]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===i)return decodeURIComponent(a)}return null}(document.cookie,i)}}let dh,Hc=null;const Bw=new Ut("TRANSITION_ID"),dV=[{provide:Yd,useFactory:function uV(t,i,e){return()=>{e.get(pl).donePromise.then(()=>{const n=Na(),r=i.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)n.remove(r[a])})}},deps:[Bw,ci,ei],multi:!0}];class I0{static init(){!function tN(t){d0=t}(new I0)}addToWindow(i){yn.getAngularTestability=(n,r=!0)=>{const a=i.findTestabilityInTree(n,r);if(null==a)throw new Error("Could not find testability for element.");return a},yn.getAllAngularTestabilities=()=>i.getAllTestabilities(),yn.getAllAngularRootElements=()=>i.getAllRootElements(),yn.frameworkStabilizers||(yn.frameworkStabilizers=[]),yn.frameworkStabilizers.push(n=>{const r=yn.getAllAngularTestabilities();let a=r.length,s=!1;const o=function(l){s=s||l,a--,0==a&&n(s)};r.forEach(function(l){l.whenStable(o)})})}findTestabilityInTree(i,e,n){if(null==e)return null;const r=i.getTestability(e);return null!=r?r:n?Na().isShadowRoot(e)?this.findTestabilityInTree(i,e.host,!0):this.findTestabilityInTree(i,e.parentElement,!0):null}}let hV=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const hh=new Ut("EventManagerPlugins");let fh=(()=>{class t{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let a=0;a<r.length;a++){const s=r[a];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Ve(hh),Ve(xn))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();class Lw{constructor(i){this._doc=i}addGlobalEventListener(i,e,n){const r=Na().getGlobalEventTarget(this._doc,i);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Uw=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})(),Gc=(()=>{class t extends Uw{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(a=>{const s=this._doc.createElement("style");s.textContent=a,r.push(n.appendChild(s))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(Hw),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Hw))}}return t.\u0275fac=function(e){return new(e||t)(Ve(ci))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();function Hw(t){Na().remove(t)}const N0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},O0=/%COMP%/g;function ph(t,i,e){for(let n=0;n<i.length;n++){let r=i[n];Array.isArray(r)?ph(t,r,e):(r=r.replace(O0,t),e.push(r))}return e}function zw(t){return i=>{if("__ngUnwrap__"===i)return t;!1===t(i)&&(i.preventDefault(),i.returnValue=!1)}}let V0=(()=>{class t{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new F0(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case wa.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new bV(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case wa.ShadowDom:return new _V(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=ph(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Ve(fh),Ve(Gc),Ve(Fc))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();class F0{constructor(i){this.eventManager=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,e){return e?document.createElementNS(N0[e]||e,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,e){i.appendChild(e)}insertBefore(i,e,n){i&&i.insertBefore(e,n)}removeChild(i,e){i&&i.removeChild(e)}selectRootElement(i,e){let n="string"==typeof i?document.querySelector(i):i;if(!n)throw new Error(`The selector "${i}" did not match any elements`);return e||(n.textContent=""),n}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,n,r){if(r){e=r+":"+e;const a=N0[r];a?i.setAttributeNS(a,e,n):i.setAttribute(e,n)}else i.setAttribute(e,n)}removeAttribute(i,e,n){if(n){const r=N0[n];r?i.removeAttributeNS(r,e):i.removeAttribute(`${n}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,n,r){r&(Dr.DashCase|Dr.Important)?i.style.setProperty(e,n,r&Dr.Important?"important":""):i.style[e]=n}removeStyle(i,e,n){n&Dr.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,n){i[e]=n}setValue(i,e){i.nodeValue=e}listen(i,e,n){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,e,zw(n)):this.eventManager.addEventListener(i,e,zw(n))}}class bV extends F0{constructor(i,e,n,r){super(i),this.component=n;const a=ph(r+"-"+n.id,n.styles,[]);e.addStyles(a),this.contentAttr=function gV(t){return"_ngcontent-%COMP%".replace(O0,t)}(r+"-"+n.id),this.hostAttr=function mV(t){return"_nghost-%COMP%".replace(O0,t)}(r+"-"+n.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,e){const n=super.createElement(i,e);return super.setAttribute(n,this.contentAttr,""),n}}class _V extends F0{constructor(i,e,n,r){super(i),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ph(r.id,r.styles,[]);for(let s=0;s<a.length;s++){const o=document.createElement("style");o.textContent=a[s],this.shadowRoot.appendChild(o)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,n){return super.insertBefore(this.nodeOrShadowRoot(i),e,n)}removeChild(i,e){return super.removeChild(this.nodeOrShadowRoot(i),e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let yV=(()=>{class t extends Lw{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return t.\u0275fac=function(e){return new(e||t)(Ve(ci))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const Ww=["alt","control","meta","shift"],wV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},SV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let TV=(()=>{class t extends Lw{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const a=t.parseEventName(n),s=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Na().onAndCancel(e,a.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(n.pop());let s="";if(Ww.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),s+=l+".")}),s+=a,0!=n.length||0===a.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let n="",r=function DV(t){let i=t.key;if(null==i){if(i=t.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===t.location&&qw.hasOwnProperty(i)&&(i=qw[i]))}return wV[i]||i}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Ww.forEach(a=>{a!=r&&SV[a](e)&&(n+=a+".")}),n+=r,n}static eventCallback(e,n,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>n(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Ve(ci))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const kV=nw(RN,"browser",[{provide:Qd,useValue:"browser"},{provide:qC,useValue:function RV(){E0.makeCurrent(),I0.init()},multi:!0},{provide:ci,useFactory:function MV(){return function Yx(t){Kf=t}(document),document},deps:[]}]),AV=[{provide:hg,useValue:"root"},{provide:jo,useFactory:function xV(){return new jo},deps:[]},{provide:hh,useClass:yV,multi:!0,deps:[ci,xn,Qd]},{provide:hh,useClass:TV,multi:!0,deps:[ci]},{provide:V0,useClass:V0,deps:[fh,Gc,Fc]},{provide:Ug,useExisting:V0},{provide:Uw,useExisting:Gc},{provide:Gc,useClass:Gc,deps:[ci]},{provide:u0,useClass:u0,deps:[xn]},{provide:fh,useClass:fh,deps:[hh,xn]},{provide:class sV{},useClass:hV,deps:[]}];let PV=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Fc,useValue:e.appId},{provide:Bw,useExisting:Fc},dV]}}}return t.\u0275fac=function(e){return new(e||t)(Ve(t,12))},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({providers:AV,imports:[pr,IN]}),t})();"undefined"!=typeof window&&window;let xs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:function(e){let n=null;return n=e?new(e||t):Ve(Qw),n},providedIn:"root"}),t})(),Qw=(()=>{class t extends xs{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case Xt.NONE:return n;case Xt.HTML:return xa(n,"HTML")?Tr(n):e1(this._doc,String(n)).toString();case Xt.STYLE:return xa(n,"Style")?Tr(n):n;case Xt.SCRIPT:if(xa(n,"Script"))return Tr(n);throw new Error("unsafe value used in a script context");case Xt.URL:return Wb(n),xa(n,"URL")?Tr(n):fc(String(n));case Xt.RESOURCE_URL:if(xa(n,"ResourceURL"))return Tr(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function u2(t){return new a2(t)}(e)}bypassSecurityTrustStyle(e){return function d2(t){return new s2(t)}(e)}bypassSecurityTrustScript(e){return function h2(t){return new o2(t)}(e)}bypassSecurityTrustUrl(e){return function f2(t){return new l2(t)}(e)}bypassSecurityTrustResourceUrl(e){return function p2(t){return new c2(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Ve(ci))},t.\u0275prov=Qe({token:t,factory:function(e){let n=null;return n=e?new e:function HV(t){return new Qw(t.get(ci))}(Ve(ei)),n},providedIn:"root"}),t})();const{isArray:GV}=Array,{getPrototypeOf:jV,prototype:zV,keys:$V}=Object;function Kw(t){if(1===t.length){const i=t[0];if(GV(i))return{args:i,keys:null};if(function WV(t){return t&&"object"==typeof t&&jV(t)===zV}(i)){const e=$V(i);return{args:e.map(n=>i[n]),keys:e}}}return{args:t,keys:null}}const{isArray:qV}=Array;function L0(t){return Mt(i=>function XV(t,i){return qV(i)?t(...i):t(i)}(t,i))}function Zw(t,i){return t.reduce((e,n,r)=>(e[n]=i[r],e),{})}let Jw=(()=>{class t{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(k(Gr),k(un))},t.\u0275dir=Le({type:t}),t})(),no=(()=>{class t extends Jw{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Ui(t)))(n||t)}}(),t.\u0275dir=Le({type:t,features:[cn]}),t})();const Wr=new Ut("NgValueAccessor"),QV={provide:Wr,useExisting:tn(()=>gh),multi:!0};let gh=(()=>{class t extends no{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Ui(t)))(n||t)}}(),t.\u0275dir=Le({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,n){1&e&&F("change",function(a){return n.onChange(a.target.checked)})("blur",function(){return n.onTouched()})},features:[Rn([QV]),cn]}),t})();const KV={provide:Wr,useExisting:tn(()=>bl),multi:!0},JV=new Ut("CompositionEventMode");let bl=(()=>{class t extends Jw{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ZV(){const t=Na()?Na().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(k(Gr),k(un),k(JV,8))},t.\u0275dir=Le({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&F("input",function(a){return n._handleInput(a.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(a){return n._compositionEnd(a.target.value)})},features:[Rn([KV]),cn]}),t})();function eS(t){return null!=t&&"number"==typeof t.length}const ji=new Ut("NgValidators"),ks=new Ut("NgAsyncValidators");function mh(t){return null}function cS(t){return null!=t}function uS(t){const i=Tc(t)?Ri(t):t;return xg(i),i}function dS(t){let i={};return t.forEach(e=>{i=null!=e?Object.assign(Object.assign({},i),e):i}),0===Object.keys(i).length?null:i}function hS(t,i){return i.map(e=>e(t))}function fS(t){return t.map(i=>function tF(t){return!t.validate}(i)?i:e=>i.validate(e))}function U0(t){return null!=t?function pS(t){if(!t)return null;const i=t.filter(cS);return 0==i.length?null:function(e){return dS(hS(e,i))}}(fS(t)):null}function H0(t){return null!=t?function gS(t){if(!t)return null;const i=t.filter(cS);return 0==i.length?null:function(e){return function YV(...t){const i=$u(t),{args:e,keys:n}=Kw(t),r=new Ne(a=>{const{length:s}=e;if(!s)return void a.complete();const o=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;pi(e[u]).subscribe(Ft(a,h=>{d||(d=!0,c--),o[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||a.next(n?Zw(n,o):o),a.complete())}))}});return i?r.pipe(L0(i)):r}(hS(e,i).map(uS)).pipe(Mt(dS))}}(fS(t)):null}function mS(t,i){return null===t?[i]:Array.isArray(t)?[...t,i]:[t,i]}function vS(t){return t._rawValidators}function bS(t){return t._rawAsyncValidators}function G0(t){return t?Array.isArray(t)?t:[t]:[]}function vh(t,i){return Array.isArray(t)?t.includes(i):t===i}function _S(t,i){const e=G0(i);return G0(t).forEach(r=>{vh(e,r)||e.push(r)}),e}function yS(t,i){return G0(i).filter(e=>!vh(t,e))}class CS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=U0(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=H0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,e){return!!this.control&&this.control.hasError(i,e)}getError(i,e){return this.control?this.control.getError(i,e):null}}class As extends CS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class tr extends CS{get formDirective(){return null}get path(){return null}}class wS{constructor(i){this._cd=i}is(i){var e,n,r;return"submitted"===i?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[i])}}let jc=(()=>{class t extends wS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(k(As,2))},t.\u0275dir=Le({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&mt("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[cn]}),t})(),bh=(()=>{class t extends wS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(k(tr,10))},t.\u0275dir=Le({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&mt("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))("ng-submitted",n.is("submitted"))},features:[cn]}),t})();function yh(t,i){return[...i.path,t]}function zc(t,i){$0(t,i),i.valueAccessor.writeValue(t.value),function cF(t,i){i.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&TS(t,i)})}(t,i),function dF(t,i){const e=(n,r)=>{i.valueAccessor.writeValue(n),r&&i.viewToModelUpdate(n)};t.registerOnChange(e),i._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,i),function uF(t,i){i.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&TS(t,i),"submit"!==t.updateOn&&t.markAsTouched()})}(t,i),function lF(t,i){if(i.valueAccessor.setDisabledState){const e=n=>{i.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(e),i._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,i)}function Ch(t,i,e=!0){const n=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(n),i.valueAccessor.registerOnTouched(n)),Sh(t,i),t&&(i._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function wh(t,i){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function $0(t,i){const e=vS(t);null!==i.validator?t.setValidators(mS(e,i.validator)):"function"==typeof e&&t.setValidators([e]);const n=bS(t);null!==i.asyncValidator?t.setAsyncValidators(mS(n,i.asyncValidator)):"function"==typeof n&&t.setAsyncValidators([n]);const r=()=>t.updateValueAndValidity();wh(i._rawValidators,r),wh(i._rawAsyncValidators,r)}function Sh(t,i){let e=!1;if(null!==t){if(null!==i.validator){const r=vS(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(s=>s!==i.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==i.asyncValidator){const r=bS(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(s=>s!==i.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const n=()=>{};return wh(i._rawValidators,n),wh(i._rawAsyncValidators,n),e}function TS(t,i){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function DS(t,i){$0(t,i)}function W0(t,i){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(i,e.currentValue)}function RS(t,i){t._syncPendingControls(),i.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function q0(t,i){if(!i)return null;let e,n,r;return Array.isArray(i),i.forEach(a=>{a.constructor===bl?e=a:function pF(t){return Object.getPrototypeOf(t.constructor)===no}(a)?n=a:r=a}),r||n||e||null}function X0(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}const $c="VALID",Th="INVALID",_l="PENDING",Wc="DISABLED";function Q0(t){return(Dh(t)?t.validators:t)||null}function xS(t){return Array.isArray(t)?U0(t):t||null}function K0(t,i){return(Dh(i)?i.asyncValidators:t)||null}function MS(t){return Array.isArray(t)?H0(t):t||null}function Dh(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const kS=t=>t instanceof em,Z0=t=>t instanceof Rh;function AS(t){return kS(t)?t.value:t.getRawValue()}function PS(t,i){const e=Z0(t),n=t.controls;if(!(e?Object.keys(n):n).length)throw new Jt(1e3,"");if(!n[i])throw new Jt(1001,"")}function ES(t,i){Z0(t),t._forEachChild((n,r)=>{if(void 0===i[r])throw new Jt(1002,"")})}class J0{constructor(i,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=e,this._composedValidatorFn=xS(this._rawValidators),this._composedAsyncValidatorFn=MS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===$c}get invalid(){return this.status===Th}get pending(){return this.status==_l}get disabled(){return this.status===Wc}get enabled(){return this.status!==Wc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=xS(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=MS(i)}addValidators(i){this.setValidators(_S(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(_S(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(yS(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(yS(i,this._rawAsyncValidators))}hasValidator(i){return vh(this._rawValidators,i)}hasAsyncValidator(i){return vh(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=_l,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=Wc,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=$c,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$c||this.status===_l)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wc:$c}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=_l,this._hasOwnPendingAsyncValidator=!0;const e=uS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent)}get(i){return function gF(t,i,e){if(null==i||(Array.isArray(i)||(i=i.split(e)),Array.isArray(i)&&0===i.length))return null;let n=t;return i.forEach(r=>{n=Z0(n)?n.controls.hasOwnProperty(r)?n.controls[r]:null:(t=>t instanceof vF)(n)&&n.at(r)||null}),n}(this,i,".")}getError(i,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new Ke,this.statusChanges=new Ke}_calculateStatus(){return this._allControlsDisabled()?Wc:this.errors?Th:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_l)?_l:this._anyControlsHaveStatus(Th)?Th:$c}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_isBoxedValue(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){Dh(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class em extends J0{constructor(i=null,e,n){super(Q0(e),K0(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dh(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(i)?i.value:i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){X0(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){X0(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){this._isBoxedValue(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}}class Rh extends J0{constructor(i,e,n){super(Q0(e),K0(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,n={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){ES(this,i),Object.keys(i).forEach(n=>{PS(this,n),this.controls[n].setValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,n)=>(i[n]=AS(e),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&i(n,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&i(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(i,e,n)=>((e.enabled||this.disabled)&&(i[n]=e.value),i))}_reduceChildren(i,e){let n=i;return this._forEachChild((r,a)=>{n=e(n,r,a)}),n}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class vF extends J0{constructor(i,e,n){super(Q0(e),K0(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[i]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,n={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){ES(this,i),i.forEach((n,r)=>{PS(this,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(i.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>AS(i))}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_syncPendingControls(){let i=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){this.controls.forEach((e,n)=>{i(e,n)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}}const bF={provide:tr,useExisting:tn(()=>Xc)},qc=(()=>Promise.resolve(null))();let Xc=(()=>{class t extends tr{constructor(e,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ke,this.form=new Rh({},U0(e),H0(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){qc.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),zc(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){qc.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){qc.then(()=>{const n=this._findContainer(e.path),r=new Rh({});DS(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){qc.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){qc.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,RS(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(k(ji,10),k(ks,10))},t.\u0275dir=Le({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&F("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rn([bF]),cn]}),t})();const yF={provide:As,useExisting:tn(()=>Yc)},OS=(()=>Promise.resolve(null))();let Yc=(()=>{class t extends As{constructor(e,n,r,a,s){super(),this._changeDetectorRef=s,this.control=new em,this._registered=!1,this.update=new Ke,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=q0(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),W0(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){OS.then(()=>{var n;this.control.setValue(e,{emitViewToModelChange:!1}),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;OS.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?yh(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(k(tr,9),k(ji,10),k(ks,10),k(Wr,10),k(xr,8))},t.\u0275dir=Le({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Rn([yF]),cn,ki]}),t})(),xh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Le({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),FS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({}),t})();const tm=new Ut("NgModelWithFormControlWarning"),RF={provide:tr,useExisting:tn(()=>Mh)};let Mh=(()=>{class t extends tr{constructor(e,n){super(),this.validators=e,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ke,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return zc(n,e),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Ch(e.control||null,e,!1),X0(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,RS(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(Ch(n||null,e),kS(r)&&(zc(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);DS(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function hF(t,i){return Sh(t,i)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$0(this.form,this),this._oldForm&&Sh(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(k(ji,10),k(ks,10))},t.\u0275dir=Le({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&F("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rn([RF]),cn,ki]}),t})();const kF={provide:As,useExisting:tn(()=>rm)};let rm=(()=>{class t extends As{constructor(e,n,r,a,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new Ke,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=q0(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),W0(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return yh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(k(tr,13),k(ji,10),k(ks,10),k(Wr,10),k(tm,8))},t.\u0275dir=Le({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Rn([kF]),cn,ki]}),t})();function zS(t){return"number"==typeof t?t:parseInt(t,10)}let io=(()=>{class t{constructor(){this._validator=mh}ngOnChanges(e){if(this.inputName in e){const n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):mh,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Le({type:t,features:[ki]}),t})();const GF={provide:ji,useExisting:tn(()=>lm),multi:!0};let lm=(()=>{class t extends io{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>zS(e),this.createValidator=e=>function sS(t){return i=>function Ms(t){return null==t||0===t.length}(i.value)||!eS(i.value)?null:i.value.length<t?{minlength:{requiredLength:t,actualLength:i.value.length}}:null}(e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Ui(t)))(n||t)}}(),t.\u0275dir=Le({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&gn("minlength",n._enabled?n.minlength:null)},inputs:{minlength:"minlength"},features:[Rn([GF]),cn]}),t})();const jF={provide:ji,useExisting:tn(()=>kh),multi:!0};let kh=(()=>{class t extends io{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>zS(e),this.createValidator=e=>function oS(t){return i=>eS(i.value)&&i.value.length>t?{maxlength:{requiredLength:t,actualLength:i.value.length}}:null}(e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Ui(t)))(n||t)}}(),t.\u0275dir=Le({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&gn("maxlength",n._enabled?n.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Rn([jF]),cn]}),t})(),KS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[FS]]}),t})(),ZS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[KS]}),t})(),$F=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:tm,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[KS]}),t})();function _t(...t){return Ri(t,Yl(t))}class Gn extends ge{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const e=super._subscribe(i);return!e.closed&&i.next(this._value),e}getValue(){const{hasError:i,thrownError:e,_value:n}=this;if(i)throw e;return this._throwIfClosed(),n}next(i){super.next(this._value=i)}}function JS(t,i,e){t?Or(e,t,i):i()}const Ah=L(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Qc(...t){return function qF(){return Xl(1)}()(Ri(t,Yl(t)))}function eT(t){return new Ne(i=>{pi(t()).subscribe(i)})}function tT(){return gt((t,i)=>{let e=null;t._refCount++;const n=Ft(i,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),i.unsubscribe()});t.subscribe(n),n.closed||(e=t.connect())})}class XF extends Ne{constructor(i,e){super(),this.source=i,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,wn(i)&&(this.lift=i.lift)}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:i}=this;this._subject=this._connection=null,null==i||i.unsubscribe()}connect(){let i=this._connection;if(!i){i=this._connection=new ue;const e=this.getSubject();i.add(this.source.subscribe(Ft(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),i.closed&&(this._connection=null,i=ue.EMPTY)}return i}refCount(){return tT()(this)}}function is(t,i){return gt((e,n)=>{let r=null,a=0,s=!1;const o=()=>s&&!r&&n.complete();e.subscribe(Ft(n,l=>{null==r||r.unsubscribe();let c=0;const u=a++;pi(t(l,u)).subscribe(r=Ft(n,d=>n.next(i?i(l,d,u,c++):d),()=>{r=null,o()}))},()=>{s=!0,o()}))})}function YF(t,i,e,n,r){return(a,s)=>{let o=e,l=i,c=0;a.subscribe(Ft(s,u=>{const d=c++;l=o?t(l,u,d):(o=!0,u),n&&s.next(l)},r&&(()=>{o&&s.next(l),s.complete()})))}}function nT(t,i){return gt(YF(t,i,arguments.length>=2,!0))}function Ni(t,i){return gt((e,n)=>{let r=0;e.subscribe(Ft(n,a=>t.call(i,a,r++)&&n.next(a)))})}function Ps(t){return gt((i,e)=>{let a,n=null,r=!1;n=i.subscribe(Ft(e,void 0,void 0,s=>{a=pi(t(s,Ps(t)(i))),n?(n.unsubscribe(),n=null,a.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,a.subscribe(e))})}function Kc(t,i){return $(i)?Zn(t,i,1):Zn(t,1)}function um(t){return t<=0?()=>Zr:gt((i,e)=>{let n=[];i.subscribe(Ft(e,r=>{n.push(r),t<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function iT(t=QF){return gt((i,e)=>{let n=!1;i.subscribe(Ft(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(t())))})}function QF(){return new Ah}function rT(t){return gt((i,e)=>{let n=!1;i.subscribe(Ft(e,r=>{n=!0,e.next(r)},()=>{n||e.next(t),e.complete()}))})}function yl(t,i){const e=arguments.length>=2;return n=>n.pipe(t?Ni((r,a)=>t(r,a,n)):Ie,xi(1),e?rT(i):iT(()=>new Ah))}function zi(t,i,e){const n=$(t)||i||e?{next:t,error:i,complete:e}:t;return n?gt((r,a)=>{var s;null===(s=n.subscribe)||void 0===s||s.call(n);let o=!0;r.subscribe(Ft(a,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),a.next(l)},()=>{var l;o=!1,null===(l=n.complete)||void 0===l||l.call(n),a.complete()},l=>{var c;o=!1,null===(c=n.error)||void 0===c||c.call(n,l),a.error(l)},()=>{var l,c;o&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Ie}class rs{constructor(i,e){this.id=i,this.url=e}}class dm extends rs{constructor(i,e,n="imperative",r=null){super(i,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zc extends rs{constructor(i,e,n){super(i,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class aT extends rs{constructor(i,e,n){super(i,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class JF extends rs{constructor(i,e,n){super(i,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class e3 extends rs{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t3 extends rs{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n3 extends rs{constructor(i,e,n,r,a){super(i,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class r3 extends rs{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class a3 extends rs{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sT{constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oT{constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class s3{constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o3{constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l3{constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class c3{constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lT{constructor(i,e,n){this.routerEvent=i,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const zt="primary";class u3{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Cl(t){return new u3(t)}const cT="ngNavigationCancelingError";function hm(t){const i=Error("NavigationCancelingError: "+t);return i[cT]=!0,i}function h3(t,i,e){const n=e.path.split("/");if(n.length>t.length||"full"===e.pathMatch&&(i.hasChildren()||n.length<t.length))return null;const r={};for(let a=0;a<n.length;a++){const s=n[a],o=t[a];if(s.startsWith(":"))r[s.substring(1)]=o;else if(s!==o.path)return null}return{consumed:t.slice(0,n.length),posParams:r}}function Oa(t,i){const e=t?Object.keys(t):void 0,n=i?Object.keys(i):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!uT(t[r],i[r]))return!1;return!0}function uT(t,i){if(Array.isArray(t)&&Array.isArray(i)){if(t.length!==i.length)return!1;const e=[...t].sort(),n=[...i].sort();return e.every((r,a)=>n[a]===r)}return t===i}function dT(t){return Array.prototype.concat.apply([],t)}function hT(t){return t.length>0?t[t.length-1]:null}function Oi(t,i){for(const e in t)t.hasOwnProperty(e)&&i(t[e],e)}function Va(t){return xg(t)?t:Tc(t)?Ri(Promise.resolve(t)):_t(t)}const g3={exact:function gT(t,i,e){if(!ao(t.segments,i.segments)||!Eh(t.segments,i.segments,e)||t.numberOfChildren!==i.numberOfChildren)return!1;for(const n in i.children)if(!t.children[n]||!gT(t.children[n],i.children[n],e))return!1;return!0},subset:mT},fT={exact:function m3(t,i){return Oa(t,i)},subset:function v3(t,i){return Object.keys(i).length<=Object.keys(t).length&&Object.keys(i).every(e=>uT(t[e],i[e]))},ignored:()=>!0};function pT(t,i,e){return g3[e.paths](t.root,i.root,e.matrixParams)&&fT[e.queryParams](t.queryParams,i.queryParams)&&!("exact"===e.fragment&&t.fragment!==i.fragment)}function mT(t,i,e){return vT(t,i,i.segments,e)}function vT(t,i,e,n){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!ao(r,e)||i.hasChildren()||!Eh(r,e,n))}if(t.segments.length===e.length){if(!ao(t.segments,e)||!Eh(t.segments,e,n))return!1;for(const r in i.children)if(!t.children[r]||!mT(t.children[r],i.children[r],n))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(ao(t.segments,r)&&Eh(t.segments,r,n)&&t.children[zt])&&vT(t.children[zt],i,a,n)}}function Eh(t,i,e){return i.every((n,r)=>fT[e](t[r].parameters,n.parameters))}class ro{constructor(i,e,n){this.root=i,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cl(this.queryParams)),this._queryParamMap}toString(){return y3.serialize(this)}}class Yt{constructor(i,e){this.segments=i,this.children=e,this.parent=null,Oi(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ih(this)}}class Jc{constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Cl(this.parameters)),this._parameterMap}toString(){return wT(this)}}function ao(t,i){return t.length===i.length&&t.every((e,n)=>e.path===i[n].path)}class bT{}class _T{parse(i){const e=new k3(i);return new ro(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){const e=`/${eu(i.root,!0)}`,n=function S3(t){const i=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(r=>`${Nh(e)}=${Nh(r)}`).join("&"):`${Nh(e)}=${Nh(n)}`}).filter(e=>!!e);return i.length?`?${i.join("&")}`:""}(i.queryParams);return`${e}${n}${"string"==typeof i.fragment?`#${function C3(t){return encodeURI(t)}(i.fragment)}`:""}`}}const y3=new _T;function Ih(t){return t.segments.map(i=>wT(i)).join("/")}function eu(t,i){if(!t.hasChildren())return Ih(t);if(i){const e=t.children[zt]?eu(t.children[zt],!1):"",n=[];return Oi(t.children,(r,a)=>{a!==zt&&n.push(`${a}:${eu(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function _3(t,i){let e=[];return Oi(t.children,(n,r)=>{r===zt&&(e=e.concat(i(n,r)))}),Oi(t.children,(n,r)=>{r!==zt&&(e=e.concat(i(n,r)))}),e}(t,(n,r)=>r===zt?[eu(t.children[zt],!1)]:[`${r}:${eu(n,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[zt]?`${Ih(t)}/${e[0]}`:`${Ih(t)}/(${e.join("//")})`}}function yT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nh(t){return yT(t).replace(/%3B/gi,";")}function fm(t){return yT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oh(t){return decodeURIComponent(t)}function CT(t){return Oh(t.replace(/\+/g,"%20"))}function wT(t){return`${fm(t.path)}${function w3(t){return Object.keys(t).map(i=>`;${fm(i)}=${fm(t[i])}`).join("")}(t.parameters)}`}const T3=/^[^\/()?;=#]+/;function Vh(t){const i=t.match(T3);return i?i[0]:""}const D3=/^[^=?&#]+/,x3=/^[^&#]+/;class k3{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(n[zt]=new Yt(i,e)),n}parseSegment(){const i=Vh(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(i),new Jc(Oh(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const e=Vh(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=Vh(this.remaining);r&&(n=r,this.capture(n))}i[Oh(e)]=Oh(n)}parseQueryParam(i){const e=function R3(t){const i=t.match(D3);return i?i[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const s=function M3(t){const i=t.match(x3);return i?i[0]:""}(this.remaining);s&&(n=s,this.capture(n))}const r=CT(e),a=CT(n);if(i.hasOwnProperty(r)){let s=i[r];Array.isArray(s)||(s=[s],i[r]=s),s.push(a)}else i[r]=a}parseParens(i){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Vh(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;n.indexOf(":")>-1?(a=n.substr(0,n.indexOf(":")),this.capture(a),this.capture(":")):i&&(a=zt);const s=this.parseChildren();e[a]=1===Object.keys(s).length?s[zt]:new Yt([],s),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new Error(`Expected "${i}".`)}}class ST{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){const e=pm(i,this._root);return e?e.children.map(n=>n.value):[]}firstChild(i){const e=pm(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){const e=gm(i,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==i)}pathFromRoot(i){return gm(i,this._root).map(e=>e.value)}}function pm(t,i){if(t===i.value)return i;for(const e of i.children){const n=pm(t,e);if(n)return n}return null}function gm(t,i){if(t===i.value)return[i];for(const e of i.children){const n=gm(t,e);if(n.length)return n.unshift(i),n}return[]}class as{constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}}function wl(t){const i={};return t&&t.children.forEach(e=>i[e.value.outlet]=e),i}class TT extends ST{constructor(i,e){super(i),this.snapshot=e,mm(this,i)}toString(){return this.snapshot.toString()}}function DT(t,i){const e=function A3(t,i){const s=new Fh([],{},{},"",{},zt,i,null,t.root,-1,{});return new xT("",new as(s,[]))}(t,i),n=new Gn([new Jc("",{})]),r=new Gn({}),a=new Gn({}),s=new Gn({}),o=new Gn(""),l=new Sl(n,r,s,o,a,zt,i,e.root);return l.snapshot=e.root,new TT(new as(l,[]),e)}class Sl{constructor(i,e,n,r,a,s,o,l){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=s,this.component=o,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Mt(i=>Cl(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Mt(i=>Cl(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RT(t,i="emptyOnly"){const e=t.pathFromRoot;let n=0;if("always"!==i)for(n=e.length-1;n>=1;){const r=e[n],a=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(a.component)break;n--}}return function P3(t){return t.reduce((i,e)=>({params:Object.assign(Object.assign({},i.params),e.params),data:Object.assign(Object.assign({},i.data),e.data),resolve:Object.assign(Object.assign({},i.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(n))}class Fh{constructor(i,e,n,r,a,s,o,l,c,u,d){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=s,this.component=o,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xT extends ST{constructor(i,e){super(e),this.url=i,mm(this,e)}toString(){return MT(this._root)}}function mm(t,i){i.value._routerState=t,i.children.forEach(e=>mm(t,e))}function MT(t){const i=t.children.length>0?` { ${t.children.map(MT).join(", ")} } `:"";return`${t.value}${i}`}function vm(t){if(t.snapshot){const i=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Oa(i.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),i.fragment!==e.fragment&&t.fragment.next(e.fragment),Oa(i.params,e.params)||t.params.next(e.params),function f3(t,i){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!Oa(t[e],i[e]))return!1;return!0}(i.url,e.url)||t.url.next(e.url),Oa(i.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function bm(t,i){const e=Oa(t.params,i.params)&&function b3(t,i){return ao(t,i)&&t.every((e,n)=>Oa(e.parameters,i[n].parameters))}(t.url,i.url);return e&&!(!t.parent!=!i.parent)&&(!t.parent||bm(t.parent,i.parent))}function tu(t,i,e){if(e&&t.shouldReuseRoute(i.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=i.value;const r=function I3(t,i,e){return i.children.map(n=>{for(const r of e.children)if(t.shouldReuseRoute(n.value,r.value.snapshot))return tu(t,n,r);return tu(t,n)})}(t,i,e);return new as(n,r)}{if(t.shouldAttach(i.value)){const a=t.retrieve(i.value);if(null!==a){const s=a.route;return s.value._futureSnapshot=i.value,s.children=i.children.map(o=>tu(t,o)),s}}const n=function N3(t){return new Sl(new Gn(t.url),new Gn(t.params),new Gn(t.queryParams),new Gn(t.fragment),new Gn(t.data),t.outlet,t.component,t)}(i.value),r=i.children.map(a=>tu(t,a));return new as(n,r)}}function Bh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function nu(t){return"object"==typeof t&&null!=t&&t.outlets}function _m(t,i,e,n,r){let a={};return n&&Oi(n,(s,o)=>{a[o]=Array.isArray(s)?s.map(l=>`${l}`):`${s}`}),new ro(e.root===t?i:kT(e.root,t,i),a,r)}function kT(t,i,e){const n={};return Oi(t.children,(r,a)=>{n[a]=r===i?e:kT(r,i,e)}),new Yt(t.segments,n)}class AT{constructor(i,e,n){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=n,i&&n.length>0&&Bh(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(nu);if(r&&r!==hT(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ym{constructor(i,e,n){this.segmentGroup=i,this.processChildren=e,this.index=n}}function PT(t,i,e){if(t||(t=new Yt([],{})),0===t.segments.length&&t.hasChildren())return Lh(t,i,e);const n=function U3(t,i,e){let n=0,r=i;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(n>=e.length)return a;const s=t.segments[r],o=e[n];if(nu(o))break;const l=`${o}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!IT(l,c,s))return a;n+=2}else{if(!IT(l,{},s))return a;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(t,i,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){const a=new Yt(t.segments.slice(0,n.pathIndex),{});return a.children[zt]=new Yt(t.segments.slice(n.pathIndex),t.children),Lh(a,0,r)}return n.match&&0===r.length?new Yt(t.segments,{}):n.match&&!t.hasChildren()?Cm(t,i,e):n.match?Lh(t,0,r):Cm(t,i,e)}function Lh(t,i,e){if(0===e.length)return new Yt(t.segments,{});{const n=function L3(t){return nu(t[0])?t[0].outlets:{[zt]:t}}(e),r={};return Oi(n,(a,s)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[s]=PT(t.children[s],i,a))}),Oi(t.children,(a,s)=>{void 0===n[s]&&(r[s]=a)}),new Yt(t.segments,r)}}function Cm(t,i,e){const n=t.segments.slice(0,i);let r=0;for(;r<e.length;){const a=e[r];if(nu(a)){const l=H3(a.outlets);return new Yt(n,l)}if(0===r&&Bh(e[0])){n.push(new Jc(t.segments[i].path,ET(e[0]))),r++;continue}const s=nu(a)?a.outlets[zt]:`${a}`,o=r<e.length-1?e[r+1]:null;s&&o&&Bh(o)?(n.push(new Jc(s,ET(o))),r+=2):(n.push(new Jc(s,{})),r++)}return new Yt(n,{})}function H3(t){const i={};return Oi(t,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(i[n]=Cm(new Yt([],{}),0,e))}),i}function ET(t){const i={};return Oi(t,(e,n)=>i[n]=`${e}`),i}function IT(t,i,e){return t==e.path&&Oa(i,e.parameters)}class j3{constructor(i,e,n,r){this.routeReuseStrategy=i,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(i){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,i),vm(this.futureState.root),this.activateChildRoutes(e,n,i)}deactivateChildRoutes(i,e,n){const r=wl(e);i.children.forEach(a=>{const s=a.value.outlet;this.deactivateRoutes(a,r[s],n),delete r[s]}),Oi(r,(a,s)=>{this.deactivateRouteAndItsChildren(a,n)})}deactivateRoutes(i,e,n){const r=i.value,a=e?e.value:null;if(r===a)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(i,e,s.children)}else this.deactivateChildRoutes(i,e,n);else a&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,a=wl(i);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],r);if(n&&n.outlet){const s=n.outlet.detach(),o=n.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:s,route:i,contexts:o})}}deactivateRouteAndOutlet(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,a=wl(i);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(i,e,n){const r=wl(e);i.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],n),this.forwardEvent(new c3(a.value.snapshot))}),i.children.length&&this.forwardEvent(new o3(i.value.snapshot))}activateRoutes(i,e,n){const r=i.value,a=e?e.value:null;if(vm(r),r===a)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(i,e,s.children)}else this.activateChildRoutes(i,e,n);else if(r.component){const s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const o=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(o.contexts),s.attachRef=o.componentRef,s.route=o.route.value,s.outlet&&s.outlet.attach(o.componentRef,o.route.value),vm(o.route.value),this.activateChildRoutes(i,null,s.children)}else{const o=function z3(t){for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=o?o.module.componentFactoryResolver:null;s.attachRef=null,s.route=r,s.resolver=l,s.outlet&&s.outlet.activateWith(r,l),this.activateChildRoutes(i,null,s.children)}}else this.activateChildRoutes(i,null,n)}}class wm{constructor(i,e){this.routes=i,this.module=e}}function Es(t){return"function"==typeof t}function so(t){return t instanceof ro}const iu=Symbol("INITIAL_VALUE");function ru(){return is(t=>function cm(...t){const i=Yl(t),e=$u(t),{args:n,keys:r}=Kw(t);if(0===n.length)return Ri([],i);const a=new Ne(function WF(t,i,e=Ie){return n=>{JS(i,()=>{const{length:r}=t,a=new Array(r);let s=r,o=r;for(let l=0;l<r;l++)JS(i,()=>{const c=Ri(t[l],i);let u=!1;c.subscribe(Ft(n,d=>{a[l]=d,u||(u=!0,o--),o||n.next(e(a.slice()))},()=>{--s||n.complete()}))},n)},n)}}(n,i,r?s=>Zw(r,s):Ie));return e?a.pipe(L0(e)):a}(t.map(i=>i.pipe(xi(1),function Ph(...t){const i=Yl(t);return gt((e,n)=>{(i?Qc(t,e,i):Qc(t,e)).subscribe(n)})}(iu)))).pipe(nT((i,e)=>{let n=!1;return e.reduce((r,a,s)=>r!==iu?r:(a===iu&&(n=!0),n||!1!==a&&s!==e.length-1&&!so(a)?r:a),i)},iu),Ni(i=>i!==iu),Mt(i=>so(i)?i:!0===i),xi(1)))}class Q3{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new au,this.attachRef=null}}class au{constructor(){this.contexts=new Map}onChildOutletCreated(i,e){const n=this.getOrCreateContext(i);n.outlet=e,this.contexts.set(i,n)}onChildOutletDestroyed(i){const e=this.getContext(i);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let e=this.getContext(i);return e||(e=new Q3,this.contexts.set(i,e)),e}getContext(i){return this.contexts.get(i)||null}}let Sm=(()=>{class t{constructor(e,n,r,a,s){this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ke,this.deactivateEvents=new Ke,this.attachEvents=new Ke,this.detachEvents=new Ke,this.name=a||zt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const s=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),o=this.parentContexts.getOrCreateContext(this.name).children,l=new K3(e,o,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(k(au),k(jr),k(Ks),function Ws(t){return function RM(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const e=t.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const a=e[r];if(_b(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(a===i)return e[r+1];r+=2}}}return null}(gi(),t)}("name"),k(xr))},t.\u0275dir=Le({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class K3{constructor(i,e,n){this.route=i,this.childContexts=e,this.parent=n}get(i,e){return i===Sl?this.route:i===au?this.childContexts:this.parent.get(i,e)}}let NT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=st({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&N(0,"router-outlet")},directives:[Sm],encapsulation:2}),t})();function OT(t,i=""){for(let e=0;e<t.length;e++){const n=t[e];Z3(n,J3(i,n))}}function Z3(t,i){t.children&&OT(t.children,i)}function J3(t,i){return i?t||i.path?t&&!i.path?`${t}/`:!t&&i.path?i.path:`${t}/${i.path}`:"":t}function Tm(t){const i=t.children&&t.children.map(Tm),e=i?Object.assign(Object.assign({},t),{children:i}):Object.assign({},t);return!e.component&&(i||e.loadChildren)&&e.outlet&&e.outlet!==zt&&(e.component=NT),e}function qr(t){return t.outlet||zt}function VT(t,i){const e=t.filter(n=>qr(n)===i);return e.push(...t.filter(n=>qr(n)!==i)),e}const FT={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Uh(t,i,e){var n;if(""===i.path)return"full"===i.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},FT):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(i.matcher||h3)(e,t,i);if(!a)return Object.assign({},FT);const s={};Oi(a.posParams,(l,c)=>{s[c]=l.path});const o=a.consumed.length>0?Object.assign(Object.assign({},s),a.consumed[a.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:o,positionalParamSegments:null!==(n=a.posParams)&&void 0!==n?n:{}}}function Hh(t,i,e,n,r="corrected"){if(e.length>0&&function nB(t,i,e){return e.some(n=>Gh(t,i,n)&&qr(n)!==zt)}(t,e,n)){const s=new Yt(i,function tB(t,i,e,n){const r={};r[zt]=n,n._sourceSegment=t,n._segmentIndexShift=i.length;for(const a of e)if(""===a.path&&qr(a)!==zt){const s=new Yt([],{});s._sourceSegment=t,s._segmentIndexShift=i.length,r[qr(a)]=s}return r}(t,i,n,new Yt(e,t.children)));return s._sourceSegment=t,s._segmentIndexShift=i.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function iB(t,i,e){return e.some(n=>Gh(t,i,n))}(t,e,n)){const s=new Yt(t.segments,function eB(t,i,e,n,r,a){const s={};for(const o of n)if(Gh(t,e,o)&&!r[qr(o)]){const l=new Yt([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===a?t.segments.length:i.length,s[qr(o)]=l}return Object.assign(Object.assign({},r),s)}(t,i,e,n,t.children,r));return s._sourceSegment=t,s._segmentIndexShift=i.length,{segmentGroup:s,slicedSegments:e}}const a=new Yt(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=i.length,{segmentGroup:a,slicedSegments:e}}function Gh(t,i,e){return(!(t.hasChildren()||i.length>0)||"full"!==e.pathMatch)&&""===e.path}function BT(t,i,e,n){return!!(qr(t)===n||n!==zt&&Gh(i,e,t))&&("**"===t.path||Uh(i,t,e).matched)}function LT(t,i,e){return 0===i.length&&!t.children[e]}class su{constructor(i){this.segmentGroup=i||null}}class UT{constructor(i){this.urlTree=i}}function jh(t){return new Ne(i=>i.error(new su(t)))}function HT(t){return new Ne(i=>i.error(new UT(t)))}function rB(t){return new Ne(i=>i.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class oB{constructor(i,e,n,r,a){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=i.get(Za)}apply(){const i=Hh(this.urlTree.root,[],[],this.config).segmentGroup,e=new Yt(i.segments,i.children);return this.expandSegmentGroup(this.ngModule,this.config,e,zt).pipe(Mt(a=>this.createUrlTree(Dm(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ps(a=>{if(a instanceof UT)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof su?this.noMatchError(a):a}))}match(i){return this.expandSegmentGroup(this.ngModule,this.config,i.root,zt).pipe(Mt(r=>this.createUrlTree(Dm(r),i.queryParams,i.fragment))).pipe(Ps(r=>{throw r instanceof su?this.noMatchError(r):r}))}noMatchError(i){return new Error(`Cannot match any routes. URL Segment: '${i.segmentGroup}'`)}createUrlTree(i,e,n){const r=i.segments.length>0?new Yt([],{[zt]:i}):i;return new ro(r,e,n)}expandSegmentGroup(i,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(i,e,n).pipe(Mt(a=>new Yt([],a))):this.expandSegment(i,n,e,n.segments,r,!0)}expandChildren(i,e,n){const r=[];for(const a of Object.keys(n.children))"primary"===a?r.unshift(a):r.push(a);return Ri(r).pipe(Kc(a=>{const s=n.children[a],o=VT(e,a);return this.expandSegmentGroup(i,o,s,a).pipe(Mt(l=>({segment:l,outlet:a})))}),nT((a,s)=>(a[s.outlet]=s.segment,a),{}),function KF(t,i){const e=arguments.length>=2;return n=>n.pipe(t?Ni((r,a)=>t(r,a,n)):Ie,um(1),e?rT(i):iT(()=>new Ah))}())}expandSegment(i,e,n,r,a,s){return Ri(n).pipe(Kc(o=>this.expandSegmentAgainstRoute(i,e,n,o,r,a,s).pipe(Ps(c=>{if(c instanceof su)return _t(null);throw c}))),yl(o=>!!o),Ps((o,l)=>{if(o instanceof Ah||"EmptyError"===o.name){if(LT(e,r,a))return _t(new Yt([],{}));throw new su(e)}throw o}))}expandSegmentAgainstRoute(i,e,n,r,a,s,o){return BT(r,e,a,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(i,e,r,a,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,e,n,r,a,s):jh(e):jh(e)}expandSegmentAgainstRouteUsingRedirect(i,e,n,r,a,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,a,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,e,n,r){const a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?HT(a):this.lineralizeSegments(n,a).pipe(Zn(s=>{const o=new Yt(s,{});return this.expandSegment(i,o,e,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,a,s){const{matched:o,consumedSegments:l,lastChild:c,positionalParamSegments:u}=Uh(e,r,a);if(!o)return jh(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?HT(d):this.lineralizeSegments(r,d).pipe(Zn(h=>this.expandSegment(i,e,n,h.concat(a.slice(c)),s,!1)))}matchSegmentAgainstRoute(i,e,n,r,a){if("**"===n.path)return n.loadChildren?(n._loadedConfig?_t(n._loadedConfig):this.configLoader.load(i.injector,n)).pipe(Mt(h=>(n._loadedConfig=h,new Yt(r,{})))):_t(new Yt(r,{}));const{matched:s,consumedSegments:o,lastChild:l}=Uh(e,n,r);if(!s)return jh(e);const c=r.slice(l);return this.getChildConfig(i,n,r).pipe(Zn(d=>{const h=d.module,p=d.routes,{segmentGroup:b,slicedSegments:y}=Hh(e,o,c,p),w=new Yt(b.segments,b.children);if(0===y.length&&w.hasChildren())return this.expandChildren(h,p,w).pipe(Mt(W=>new Yt(o,W)));if(0===p.length&&0===y.length)return _t(new Yt(o,{}));const S=qr(n)===a;return this.expandSegment(h,w,p,y,S?zt:a,!0).pipe(Mt(I=>new Yt(o.concat(I.segments),I.children)))}))}getChildConfig(i,e,n){return e.children?_t(new wm(e.children,i)):e.loadChildren?void 0!==e._loadedConfig?_t(e._loadedConfig):this.runCanLoadGuards(i.injector,e,n).pipe(Zn(r=>r?this.configLoader.load(i.injector,e).pipe(Mt(a=>(e._loadedConfig=a,a))):function aB(t){return new Ne(i=>i.error(hm(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):_t(new wm([],i))}runCanLoadGuards(i,e,n){const r=e.canLoad;return r&&0!==r.length?_t(r.map(s=>{const o=i.get(s);let l;if(function W3(t){return t&&Es(t.canLoad)}(o))l=o.canLoad(e,n);else{if(!Es(o))throw new Error("Invalid CanLoad guard");l=o(e,n)}return Va(l)})).pipe(ru(),zi(s=>{if(!so(s))return;const o=hm(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw o.url=s,o}),Mt(s=>!0===s)):_t(!0)}lineralizeSegments(i,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return _t(n);if(r.numberOfChildren>1||!r.children[zt])return rB(i.redirectTo);r=r.children[zt]}}applyRedirectCommands(i,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),i,n)}applyRedirectCreatreUrlTree(i,e,n,r){const a=this.createSegmentGroup(i,e.root,n,r);return new ro(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){const n={};return Oi(i,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const o=r.substring(1);n[a]=e[o]}else n[a]=r}),n}createSegmentGroup(i,e,n,r){const a=this.createSegments(i,e.segments,n,r);let s={};return Oi(e.children,(o,l)=>{s[l]=this.createSegmentGroup(i,o,n,r)}),new Yt(a,s)}createSegments(i,e,n,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(i,a,r):this.findOrReturn(a,n))}findPosParam(i,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${i}'. Cannot find '${e.path}'.`);return r}findOrReturn(i,e){let n=0;for(const r of e){if(r.path===i.path)return e.splice(n),r;n++}return i}}function Dm(t){const i={};for(const n of Object.keys(t.children)){const a=Dm(t.children[n]);(a.segments.length>0||a.hasChildren())&&(i[n]=a)}return function lB(t){if(1===t.numberOfChildren&&t.children[zt]){const i=t.children[zt];return new Yt(t.segments.concat(i.segments),i.children)}return t}(new Yt(t.segments,i))}class GT{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class zh{constructor(i,e){this.component=i,this.route=e}}function uB(t,i,e){const n=t._root;return ou(n,i?i._root:null,e,[n.value])}function $h(t,i,e){const n=function hB(t){if(!t)return null;for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(i);return(n?n.module.injector:e).get(t)}function ou(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=wl(i);return t.children.forEach(s=>{(function fB(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,s=i?i.value:null,o=e?e.getContext(t.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){const l=function pB(t,i,e){if("function"==typeof e)return e(t,i);switch(e){case"pathParamsChange":return!ao(t.url,i.url);case"pathParamsOrQueryParamsChange":return!ao(t.url,i.url)||!Oa(t.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bm(t,i)||!Oa(t.queryParams,i.queryParams);default:return!bm(t,i)}}(s,a,a.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new GT(n)):(a.data=s.data,a._resolvedData=s._resolvedData),ou(t,i,a.component?o?o.children:null:e,n,r),l&&o&&o.outlet&&o.outlet.isActivated&&r.canDeactivateChecks.push(new zh(o.outlet.component,s))}else s&&lu(i,o,r),r.canActivateChecks.push(new GT(n)),ou(t,null,a.component?o?o.children:null:e,n,r)})(s,a[s.value.outlet],e,n.concat([s.value]),r),delete a[s.value.outlet]}),Oi(a,(s,o)=>lu(s,e.getContext(o),r)),r}function lu(t,i,e){const n=wl(t),r=t.value;Oi(n,(a,s)=>{lu(a,r.component?i?i.children.getContext(s):null:i,e)}),e.canDeactivateChecks.push(new zh(r.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,r))}class SB{}function jT(t){return new Ne(i=>i.error(t))}class DB{constructor(i,e,n,r,a,s){this.rootComponentType=i,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=s}recognize(){const i=Hh(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,i,zt);if(null===e)return null;const n=new Fh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new as(n,e),a=new xT(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(i){const e=i.value,n=RT(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),i.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(i,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(i,e):this.processSegment(i,e,e.segments,n)}processChildren(i,e){const n=[];for(const a of Object.keys(e.children)){const s=e.children[a],o=VT(i,a),l=this.processSegmentGroup(o,s,a);if(null===l)return null;n.push(...l)}const r=zT(n);return function RB(t){t.sort((i,e)=>i.value.outlet===zt?-1:e.value.outlet===zt?1:i.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(i,e,n,r){for(const a of i){const s=this.processSegmentAgainstRoute(a,e,n,r);if(null!==s)return s}return LT(e,n,r)?[]:null}processSegmentAgainstRoute(i,e,n,r){if(i.redirectTo||!BT(i,e,n,r))return null;let a,s=[],o=[];if("**"===i.path){const p=n.length>0?hT(n).parameters:{};a=new Fh(n,p,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qT(i),qr(i),i.component,i,$T(e),WT(e)+n.length,XT(i))}else{const p=Uh(e,i,n);if(!p.matched)return null;s=p.consumedSegments,o=n.slice(p.lastChild),a=new Fh(s,p.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qT(i),qr(i),i.component,i,$T(e),WT(e)+s.length,XT(i))}const l=function xB(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(i),{segmentGroup:c,slicedSegments:u}=Hh(e,s,o,l.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const p=this.processChildren(l,c);return null===p?null:[new as(a,p)]}if(0===l.length&&0===u.length)return[new as(a,[])];const d=qr(i)===r,h=this.processSegment(l,c,u,d?zt:r);return null===h?null:[new as(a,h)]}}function MB(t){const i=t.value.routeConfig;return i&&""===i.path&&void 0===i.redirectTo}function zT(t){const i=[],e=new Set;for(const n of t){if(!MB(n)){i.push(n);continue}const r=i.find(a=>n.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):i.push(n)}for(const n of e){const r=zT(n.children);i.push(new as(n.value,r))}return i.filter(n=>!e.has(n))}function $T(t){let i=t;for(;i._sourceSegment;)i=i._sourceSegment;return i}function WT(t){let i=t,e=i._segmentIndexShift?i._segmentIndexShift:0;for(;i._sourceSegment;)i=i._sourceSegment,e+=i._segmentIndexShift?i._segmentIndexShift:0;return e-1}function qT(t){return t.data||{}}function XT(t){return t.resolve||{}}function YT(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Rm(t){return is(i=>{const e=t(i);return e?Ri(e).pipe(Mt(()=>i)):_t(i)})}class VB extends class OB{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}}{}const xm=new Ut("ROUTES");class QT{constructor(i,e,n,r){this.injector=i,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(i,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(Mt(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const s=a.create(i);return new wm(dT(s.injector.get(xm,void 0,kt.Self|kt.Optional)).map(Tm),s)}),Ps(a=>{throw e._loader$=void 0,a}));return e._loader$=new XF(r,()=>new ge).pipe(tT()),e._loader$}loadModuleFactory(i){return Va(i()).pipe(Zn(e=>e instanceof fC?_t(e):Ri(this.compiler.compileModuleAsync(e))))}}class BB{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,e){return i}}function LB(t){throw t}function UB(t,i,e){return i.parse("/")}function KT(t,i){return _t(null)}const HB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mr=(()=>{class t{constructor(e,n,r,a,s,o,l){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=a,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ge,this.errorHandler=LB,this.malformedUriErrorHandler=UB,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:KT,afterPreactivation:KT},this.urlHandlingStrategy=new BB,this.routeReuseStrategy=new VB,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(Za),this.console=s.get(YC);const d=s.get(xn);this.isNgZoneEnabled=d instanceof xn&&xn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function p3(){return new ro(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new QT(s,o,h=>this.triggerEvent(new sT(h)),h=>this.triggerEvent(new oT(h))),this.routerState=DT(this.currentUrlTree,this.rootComponentType),this.transitions=new Gn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(Ni(r=>0!==r.id),Mt(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),is(r=>{let a=!1,s=!1;return _t(r).pipe(zi(o=>{this.currentNavigation={id:o.id,initialUrl:o.currentRawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),is(o=>{const l=this.browserUrlTree.toString(),c=!this.navigated||o.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Wh(o.source)&&(this.browserUrlTree=o.extractedUrl),_t(o).pipe(is(d=>{const h=this.transitions.getValue();return n.next(new dm(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Zr:Promise.resolve(d)}),function cB(t,i,e,n){return is(r=>function sB(t,i,e,n,r){return new oB(t,i,e,n,r).apply()}(t,i,e,r.extractedUrl,n).pipe(Mt(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),zi(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function kB(t,i,e,n,r){return Zn(a=>function TB(t,i,e,n,r="emptyOnly",a="legacy"){try{const s=new DB(t,i,e,n,r,a).recognize();return null===s?jT(new SB):_t(s)}catch(s){return jT(s)}}(t,i,a.urlAfterRedirects,e(a.urlAfterRedirects),n,r).pipe(Mt(s=>Object.assign(Object.assign({},a),{targetSnapshot:s}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),zi(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const p=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(p,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new e3(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);n.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:p,source:b,restoredState:y,extras:w}=o,S=new dm(h,this.serializeUrl(p),b,y);n.next(S);const C=DT(p,this.rootComponentType).snapshot;return _t(Object.assign(Object.assign({},o),{targetSnapshot:C,urlAfterRedirects:p,extras:Object.assign(Object.assign({},w),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=o.rawUrl,o.resolve(null),Zr}),Rm(o=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:p}}=o;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!p})}),zi(o=>{const l=new t3(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(o.urlAfterRedirects),o.targetSnapshot);this.triggerEvent(l)}),Mt(o=>Object.assign(Object.assign({},o),{guards:uB(o.targetSnapshot,o.currentSnapshot,this.rootContexts)})),function gB(t,i){return Zn(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:s}}=e;return 0===s.length&&0===a.length?_t(Object.assign(Object.assign({},e),{guardsResult:!0})):function mB(t,i,e,n){return Ri(t).pipe(Zn(r=>function wB(t,i,e,n,r){const a=i&&i.routeConfig?i.routeConfig.canDeactivate:null;return a&&0!==a.length?_t(a.map(o=>{const l=$h(o,i,r);let c;if(function Y3(t){return t&&Es(t.canDeactivate)}(l))c=Va(l.canDeactivate(t,i,e,n));else{if(!Es(l))throw new Error("Invalid CanDeactivate guard");c=Va(l(t,i,e,n))}return c.pipe(yl())})).pipe(ru()):_t(!0)}(r.component,r.route,e,i,n)),yl(r=>!0!==r,!0))}(s,n,r,t).pipe(Zn(o=>o&&function $3(t){return"boolean"==typeof t}(o)?function vB(t,i,e,n){return Ri(i).pipe(Kc(r=>Qc(function _B(t,i){return null!==t&&i&&i(new s3(t)),_t(!0)}(r.route.parent,n),function bB(t,i){return null!==t&&i&&i(new l3(t)),_t(!0)}(r.route,n),function CB(t,i,e){const n=i[i.length-1],a=i.slice(0,i.length-1).reverse().map(s=>function dB(t){const i=t.routeConfig?t.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:t,guards:i}:null}(s)).filter(s=>null!==s).map(s=>eT(()=>_t(s.guards.map(l=>{const c=$h(l,s.node,e);let u;if(function X3(t){return t&&Es(t.canActivateChild)}(c))u=Va(c.canActivateChild(n,t));else{if(!Es(c))throw new Error("Invalid CanActivateChild guard");u=Va(c(n,t))}return u.pipe(yl())})).pipe(ru())));return _t(a).pipe(ru())}(t,r.path,e),function yB(t,i,e){const n=i.routeConfig?i.routeConfig.canActivate:null;if(!n||0===n.length)return _t(!0);const r=n.map(a=>eT(()=>{const s=$h(a,i,e);let o;if(function q3(t){return t&&Es(t.canActivate)}(s))o=Va(s.canActivate(i,t));else{if(!Es(s))throw new Error("Invalid CanActivate guard");o=Va(s(i,t))}return o.pipe(yl())}));return _t(r).pipe(ru())}(t,r.route,e))),yl(r=>!0!==r,!0))}(n,a,t,i):_t(o)),Mt(o=>Object.assign(Object.assign({},e),{guardsResult:o})))})}(this.ngModule.injector,o=>this.triggerEvent(o)),zi(o=>{if(so(o.guardsResult)){const c=hm(`Redirecting to "${this.serializeUrl(o.guardsResult)}"`);throw c.url=o.guardsResult,c}const l=new n3(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.triggerEvent(l)}),Ni(o=>!!o.guardsResult||(this.restoreHistory(o),this.cancelNavigationTransition(o,""),!1)),Rm(o=>{if(o.guards.canActivateChecks.length)return _t(o).pipe(zi(l=>{const c=new r3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),is(l=>{let c=!1;return _t(l).pipe(function AB(t,i){return Zn(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return _t(e);let a=0;return Ri(r).pipe(Kc(s=>function PB(t,i,e,n){return function EB(t,i,e,n){const r=YT(t);if(0===r.length)return _t({});const a={};return Ri(r).pipe(Zn(s=>function IB(t,i,e,n){const r=$h(t,i,n);return Va(r.resolve?r.resolve(i,e):r(i,e))}(t[s],i,e,n).pipe(zi(o=>{a[s]=o}))),um(1),Zn(()=>YT(a).length===r.length?_t(a):Zr))}(t._resolve,t,i,n).pipe(Mt(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),RT(t,e).resolve),null)))}(s.route,n,t,i)),zi(()=>a++),um(1),Zn(s=>a===r.length?_t(e):Zr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),zi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),zi(l=>{const c=new a3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Rm(o=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:p}}=o;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!p})}),Mt(o=>{const l=function E3(t,i,e){const n=tu(t,i._root,e?e._root:void 0);return new TT(n,i)}(this.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return Object.assign(Object.assign({},o),{targetRouterState:l})}),zi(o=>{this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects)}),((t,i,e)=>Mt(n=>(new j3(i,n.targetRouterState,n.currentRouterState,e).activate(t),n)))(this.rootContexts,this.routeReuseStrategy,o=>this.triggerEvent(o)),zi({next(){a=!0},complete(){a=!0}}),function ZF(t){return gt((i,e)=>{try{i.subscribe(e)}finally{e.add(t)}})}(()=>{var o;a||s||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(o=this.currentNavigation)||void 0===o?void 0:o.id)===r.id&&(this.currentNavigation=null)}),Ps(o=>{if(s=!0,function d3(t){return t&&t[cT]}(o)){const l=so(o.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new aT(r.id,this.serializeUrl(r.extractedUrl),o.message);n.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(o.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Wh(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new JF(r.id,this.serializeUrl(r.extractedUrl),o);n.next(l);try{r.resolve(this.errorHandler(o))}catch(c){r.reject(c)}}return Zr}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{var r;const a={replaceUrl:!0},s=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(s){const l=Object.assign({},s);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,n,s,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){OT(e),this.config=e.map(Tm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:a,fragment:s,queryParamsHandling:o,preserveFragment:l}=n,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:s;let d=null;switch(o){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}return null!==d&&(d=this.removeEmptyProps(d)),function O3(t,i,e,n,r){if(0===e.length)return _m(i.root,i.root,i,n,r);const a=function V3(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new AT(!0,0,t);let i=0,e=!1;const n=t.reduce((r,a,s)=>{if("object"==typeof a&&null!=a){if(a.outlets){const o={};return Oi(a.outlets,(l,c)=>{o[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:o}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===s?(a.split("/").forEach((o,l)=>{0==l&&"."===o||(0==l&&""===o?e=!0:".."===o?i++:""!=o&&r.push(o))}),r):[...r,a]},[]);return new AT(e,i,n)}(e);if(a.toRoot())return _m(i.root,new Yt([],{}),i,n,r);const s=function F3(t,i,e){if(t.isAbsolute)return new ym(i.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new ym(a,a===i.root,0)}const n=Bh(t.commands[0])?0:1;return function B3(t,i,e){let n=t,r=i,a=e;for(;a>r;){if(a-=r,n=n.parent,!n)throw new Error("Invalid number of '../'");r=n.segments.length}return new ym(n,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+n,t.numberOfDoubleDots)}(a,i,t),o=s.processChildren?Lh(s.segmentGroup,s.index,a.commands):PT(s.segmentGroup,s.index,a.commands);return _m(s.segmentGroup,o,i,n,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=so(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function jB(t){for(let i=0;i<t.length;i++){const e=t[i];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${i}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?Object.assign({},HB):!1===n?Object.assign({},GB):n,so(e))return pT(this.currentUrlTree,e,r);const a=this.parseUrl(e);return pT(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const a=e[r];return null!=a&&(n[r]=a),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Zc(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,a,s){var o,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=Wh(n)&&u&&!Wh(u.source),h=u.rawUrl.toString()===e.toString(),p=u.id===(null===(o=this.currentNavigation)||void 0===o?void 0:o.id);if(d&&h&&p)return Promise.resolve(!0);let y,w,S;s?(y=s.resolve,w=s.reject,S=s.promise):S=new Promise((W,G)=>{y=W,w=G});const C=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),I=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):I=0,this.setTransition({id:C,targetPageId:I,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:y,reject:w,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(W=>Promise.reject(W))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,n=!1){var r,a;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===s?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n){const r=new aT(e.id,this.serializeUrl(e.extractedUrl),n);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return t.\u0275fac=function(e){Sg()},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();function Wh(t){return"imperative"!==t}class ZT{}class JT{preload(i,e){return _t(null)}}let eD=(()=>{class t{constructor(e,n,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new QT(r,n,l=>e.triggerEvent(new sT(l)),l=>e.triggerEvent(new oT(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ni(e=>e instanceof Zc),Kc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Za);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const a of n)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const s=a._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return Ri(r).pipe(Xl(),Mt(a=>{}))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?_t(n._loadedConfig):this.loader.load(e.injector,n)).pipe(Zn(a=>(n._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Ve(Mr),Ve(Kd),Ve(ei),Ve(ZT))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})(),Am=(()=>{class t{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof dm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Zc&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof lT&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new lT(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){Sg()},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const oo=new Ut("ROUTER_CONFIGURATION"),tD=new Ut("ROUTER_FORROOT_GUARD"),qB=[_0,{provide:bT,useClass:_T},{provide:Mr,useFactory:function ZB(t,i,e,n,r,a,s={},o,l){const c=new Mr(null,t,i,e,n,r,dT(a));return o&&(c.urlHandlingStrategy=o),l&&(c.routeReuseStrategy=l),function JB(t,i){t.errorHandler&&(i.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(i.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(i.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(i.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(i.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(i.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(i.canceledNavigationResolution=t.canceledNavigationResolution)}(s,c),s.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[bT,au,_0,ei,Kd,xm,oo,[class FB{},new Ra],[class NB{},new Ra]]},au,{provide:Sl,useFactory:function e4(t){return t.routerState.root},deps:[Mr]},eD,JT,class WB{preload(i,e){return e().pipe(Ps(()=>_t(null)))}},{provide:oo,useValue:{enableTracing:!1}}];function XB(){return new tw("Router",Mr)}let nD=(()=>{class t{constructor(e,n){}static forRoot(e,n){return{ngModule:t,providers:[qB,iD(e),{provide:tD,useFactory:KB,deps:[[Mr,new Ra,new Uo]]},{provide:oo,useValue:n||{}},{provide:ml,useFactory:QB,deps:[to,[new dc(b0),new Ra],oo]},{provide:Am,useFactory:YB,deps:[Mr,iV,oo]},{provide:ZT,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:JT},{provide:tw,multi:!0,useFactory:XB},[Pm,{provide:Yd,multi:!0,useFactory:t4,deps:[Pm]},{provide:rD,useFactory:n4,deps:[Pm]},{provide:XC,multi:!0,useExisting:rD}]]}}static forChild(e){return{ngModule:t,providers:[iD(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Ve(tD,8),Ve(Mr,8))},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({}),t})();function YB(t,i,e){return e.scrollOffset&&i.setOffset(e.scrollOffset),new Am(t,i,e)}function QB(t,i,e={}){return e.useHash?new HN(t,i):new Cw(t,i)}function KB(t){return"guarded"}function iD(t){return[{provide:PM,multi:!0,useValue:t},{provide:xm,multi:!0,useValue:t}]}let Pm=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ge}appInitializer(){return this.injector.get(BN,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const r=new Promise(o=>n=o),a=this.injector.get(Mr),s=this.injector.get(oo);return"disabled"===s.initialNavigation?(a.setUpLocationChangeListener(),n(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?_t(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),a.initialNavigation()):n(!0),r})}bootstrapListener(e){const n=this.injector.get(oo),r=this.injector.get(eD),a=this.injector.get(Am),s=this.injector.get(Mr),o=this.injector.get(Js);e===o.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&s.initialNavigation(),r.setUpPreloading(),a.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(Ve(ei))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();function t4(t){return t.appInitializer.bind(t)}function n4(t){return t.bootstrapListener.bind(t)}const rD=new Ut("Router Initializer"),r4=[];let a4=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[nD.forRoot(r4)],nD]}),t})();function aD(t,i,e,n,r,a,s){try{var o=t[a](s),l=o.value}catch(c){return void e(c)}o.done?i(l):Promise.resolve(l).then(n,r)}function Xr(t){return function(){var i=this,e=arguments;return new Promise(function(n,r){var a=t.apply(i,e);function s(l){aD(a,n,r,s,o,"next",l)}function o(l){aD(a,n,r,s,o,"throw",l)}s(void 0)})}}var Ht=(()=>{return(t=Ht||(Ht={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",Ht;var t})();const nr=new class s4{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(i){this._typeMetadatas.has(i.target)||this._typeMetadatas.set(i.target,new Map),this._typeMetadatas.get(i.target).set(i.propertyName,i)}addTransformMetadata(i){this._transformMetadatas.has(i.target)||this._transformMetadatas.set(i.target,new Map),this._transformMetadatas.get(i.target).has(i.propertyName)||this._transformMetadatas.get(i.target).set(i.propertyName,[]),this._transformMetadatas.get(i.target).get(i.propertyName).push(i)}addExposeMetadata(i){this._exposeMetadatas.has(i.target)||this._exposeMetadatas.set(i.target,new Map),this._exposeMetadatas.get(i.target).set(i.propertyName,i)}addExcludeMetadata(i){this._excludeMetadatas.has(i.target)||this._excludeMetadatas.set(i.target,new Map),this._excludeMetadatas.get(i.target).set(i.propertyName,i)}findTransformMetadatas(i,e,n){return this.findMetadatas(this._transformMetadatas,i,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?n===Ht.CLASS_TO_CLASS||n===Ht.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||n===Ht.CLASS_TO_PLAIN))}findExcludeMetadata(i,e){return this.findMetadata(this._excludeMetadatas,i,e)}findExposeMetadata(i,e){return this.findMetadata(this._exposeMetadatas,i,e)}findExposeMetadataByCustomName(i,e){return this.getExposedMetadatas(i).find(n=>n.options&&n.options.name===e)}findTypeMetadata(i,e){return this.findMetadata(this._typeMetadatas,i,e)}getStrategy(i){const e=this._excludeMetadatas.get(i),n=e&&e.get(void 0),r=this._exposeMetadatas.get(i),a=r&&r.get(void 0);return n&&a||!n&&!a?"none":n?"excludeAll":"exposeAll"}getExposedMetadatas(i){return this.getMetadata(this._exposeMetadatas,i)}getExcludedMetadatas(i){return this.getMetadata(this._excludeMetadatas,i)}getExposedProperties(i,e){return this.getExposedMetadatas(i).filter(n=>!n.options||!0===n.options.toClassOnly&&!0===n.options.toPlainOnly||(!0===n.options.toClassOnly?e===Ht.CLASS_TO_CLASS||e===Ht.PLAIN_TO_CLASS:!0!==n.options.toPlainOnly||e===Ht.CLASS_TO_PLAIN)).map(n=>n.propertyName)}getExcludedProperties(i,e){return this.getExcludedMetadatas(i).filter(n=>!n.options||!0===n.options.toClassOnly&&!0===n.options.toPlainOnly||(!0===n.options.toClassOnly?e===Ht.CLASS_TO_CLASS||e===Ht.PLAIN_TO_CLASS:!0!==n.options.toPlainOnly||e===Ht.CLASS_TO_PLAIN)).map(n=>n.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(i,e){const n=i.get(e);let r;n&&(r=Array.from(n.values()).filter(s=>void 0!==s.propertyName));const a=[];for(const s of this.getAncestors(e)){const o=i.get(s);if(o){const l=Array.from(o.values()).filter(c=>void 0!==c.propertyName);a.push(...l)}}return a.concat(r||[])}findMetadata(i,e,n){const r=i.get(e);if(r){const a=r.get(n);if(a)return a}for(const a of this.getAncestors(e)){const s=i.get(a);if(s){const o=s.get(n);if(o)return o}}}findMetadatas(i,e,n){const r=i.get(e);let a;r&&(a=r.get(n));const s=[];for(const o of this.getAncestors(e)){const l=i.get(o);l&&l.has(n)&&s.push(...l.get(n))}return s.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(i){if(!i)return[];if(!this._ancestorsMap.has(i)){const e=[];for(let n=Object.getPrototypeOf(i.prototype.constructor);void 0!==n.prototype;n=Object.getPrototypeOf(n.prototype.constructor))e.push(n);this._ancestorsMap.set(i,e)}return this._ancestorsMap.get(i)}};function Ze(t,i={}){return function(e,n){const r=Reflect.getMetadata("design:type",e,n);nr.addTypeMetadata({target:e.constructor,propertyName:n,reflectedType:r,typeFunction:t,options:i})}}var q=(()=>{return(t=q||(q={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",q;var t})(),H=(()=>{return(t=H||(H={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",H;var t})();class be{constructor(i,e,n){this.name=i,this.amount=e,void 0!==n&&(this.itemType=n)}makeCopy(i){var e=new be("",0);return e.name=JSON.parse(JSON.stringify(i.name)),e.amount=JSON.parse(JSON.stringify(i.amount)),e.itemType=JSON.parse(JSON.stringify(i.itemType)),e}}var Y=(()=>{return(t=Y||(Y={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",t[t.Other=8]="Other",t[t.Consumable=9]="Consumable",Y;var t})();class Fa{constructor(){this.totalRewards=0,this.rewardsObtained=0,this.rewards=[]}}Ue([Ze(()=>be),We("design:type",Array)],Fa.prototype,"rewards",void 0);class Dl{constructor(){this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.noviceTrack=new Fa,this.noviceTrack.totalRewards=12;var i=50;this.noviceTrack.rewards.push(new be("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new be("Bonus Breed XP Gain From Training",1,Y.Other)),this.noviceTrack.rewards.push(new be("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new be("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.noviceTrack.rewards.push(new be("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new be("Bonus Breed XP Gain From Training",1,Y.Other)),this.noviceTrack.rewards.push(new be("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new be("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.noviceTrack.rewards.push(new be("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new be("Bonus Breed XP Gain From Training",1,Y.Other)),this.noviceTrack.rewards.push(new be("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new be("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.intermediateTrack=new Fa,this.intermediateTrack.totalRewards=12,this.intermediateTrack.rewards.push(new be("Coins",200,Y.Resources)),this.intermediateTrack.rewards.push(new be("Bonus Breed XP Gain From Training",2,Y.Other)),this.intermediateTrack.rewards.push(new be("Medals",1,Y.Resources)),this.intermediateTrack.rewards.push(new be("Diminishing Returns per Facility Level",2,Y.Other)),this.intermediateTrack.rewards.push(new be("Training Time Reduction",1,Y.Other)),this.intermediateTrack.rewards.push(new be("Bonus Breed XP Gain From Circuit Races",5,Y.Other)),this.intermediateTrack.rewards.push(new be("Coins",200,Y.Resources)),this.intermediateTrack.rewards.push(new be("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.intermediateTrack.rewards.push(new be("Medals",1,Y.Resources)),this.intermediateTrack.rewards.push(new be("Bonus Breed XP Gain From Training",2,Y.Other)),this.intermediateTrack.rewards.push(new be("Training Time Reduction",1,Y.Other)),this.intermediateTrack.rewards.push(new be("Diminishing Returns per Facility Level",3,Y.Other)),this.masterTrack=new Fa,this.masterTrack.totalRewards=12,this.masterTrack.rewards.push(new be("Bonus Breed XP Gain From Free Races",5,Y.Other)),this.masterTrack.rewards.push(new be("Diminishing Returns per Facility Level",2,Y.Other)),this.masterTrack.rewards.push(new be("Training Time Reduction",1,Y.Other)),this.masterTrack.rewards.push(new be("Coins",1e3,Y.Resources)),this.masterTrack.rewards.push(new be("Bonus Breed XP Gain From Training",3,Y.Other)),this.masterTrack.rewards.push(new be("Bonus Talents",2,Y.Other)),this.masterTrack.rewards.push(new be("Training Time Reduction",1,Y.Other)),this.masterTrack.rewards.push(new be("Coins",1e3,Y.Resources)),this.masterTrack.rewards.push(new be("Orb Pendant",1,Y.Other)),this.masterTrack.rewards.push(new be("Diminishing Returns per Facility Level",3,Y.Other)),this.masterTrack.rewards.push(new be("Training Time Reduction",1,Y.Other)),this.masterTrack.rewards.push(new be("Bonus Talents",3,Y.Other))}getTotalRewardCount(){return this.noviceTrack.totalRewards+this.intermediateTrack.totalRewards+this.masterTrack.totalRewards}getTotalRewardsObtained(){return this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalRewardsRemaining(){return this.getTotalRewardCount()-this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalTrainingTrackBonusBreedXpFromFreeRaces(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=4&&(i+=this.noviceTrack.rewards[3].amount),this.noviceTrack.rewardsObtained>=8&&(i+=this.noviceTrack.rewards[7].amount),this.noviceTrack.rewardsObtained>=12&&(i+=this.noviceTrack.rewards[11].amount),this.intermediateTrack.rewardsObtained>=8&&(i+=this.intermediateTrack.rewards[7].amount),this.masterTrack.rewardsObtained>=1&&(i+=this.masterTrack.rewards[0].amount),i)}getTotalTrainingTrackBonusBreedXpFromCircuitRaces(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=6&&(i+=this.intermediateTrack.rewards[5].amount),i)}getTotalTrainingTrackBonusBreedXpFromTraining(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=2&&(i+=this.noviceTrack.rewards[1].amount),this.noviceTrack.rewardsObtained>=6&&(i+=this.noviceTrack.rewards[5].amount),this.noviceTrack.rewardsObtained>=10&&(i+=this.noviceTrack.rewards[9].amount),this.intermediateTrack.rewardsObtained>=2&&(i+=this.intermediateTrack.rewards[1].amount),this.intermediateTrack.rewardsObtained>=10&&(i+=this.intermediateTrack.rewards[9].amount),this.masterTrack.rewardsObtained>=5&&(i+=this.masterTrack.rewards[4].amount),i)}getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=4&&(i+=this.intermediateTrack.rewards[3].amount),this.intermediateTrack.rewardsObtained>=12&&(i+=this.intermediateTrack.rewards[11].amount),this.masterTrack.rewardsObtained>=2&&(i+=this.masterTrack.rewards[1].amount),this.masterTrack.rewardsObtained>=10&&(i+=this.masterTrack.rewards[9].amount),i)}getTotalTrainingTrackBonusTrainingTimeReduction(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=5&&(i+=this.intermediateTrack.rewards[4].amount),this.intermediateTrack.rewardsObtained>=11&&(i+=this.intermediateTrack.rewards[10].amount),this.masterTrack.rewardsObtained>=3&&(i+=this.masterTrack.rewards[2].amount),this.masterTrack.rewardsObtained>=7&&(i+=this.masterTrack.rewards[6].amount),this.masterTrack.rewardsObtained>=11&&(i+=this.masterTrack.rewards[10].amount),i)}getTotalTrainingTrackBonusTalents(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.masterTrack.rewardsObtained>=6&&(i+=this.masterTrack.rewards[5].amount),this.masterTrack.rewardsObtained>=12&&(i+=this.masterTrack.rewards[11].amount),i)}}Ue([Ze(()=>Fa),We("design:type",Fa)],Dl.prototype,"noviceTrack",void 0),Ue([Ze(()=>Fa),We("design:type",Fa)],Dl.prototype,"intermediateTrack",void 0),Ue([Ze(()=>Fa),We("design:type",Fa)],Dl.prototype,"masterTrack",void 0);class Ee{constructor(i,e,n,r,a,s){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=1,this.diminishingReturnsDefaultStatThreshold=20,void 0!==i&&(this.topSpeed=i),void 0!==e&&(this.acceleration=e),void 0!==n&&(this.endurance=n),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==s&&(this.adaptability=s)}makeCopy(i){var e=new Ee;return e.topSpeed=i.topSpeed,e.acceleration=i.acceleration,e.endurance=i.endurance,e.power=i.power,e.focus=i.focus,e.adaptability=i.adaptability,e.stamina=i.stamina,e.maxSpeedMs=i.maxSpeedMs,e.accelerationMs=i.accelerationMs,e.powerMs=i.powerMs,e.focusMs=i.focusMs,e.adaptabilityMs=i.adaptabilityMs,e.burstChance=i.burstChance,e.burstDistance=i.burstDistance,e}calculateStamina(i,e,n){return null==i&&(i=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.endurance<=e?this.endurance*i*n:(e*i+(this.endurance-e)*(i*this.calculateDiminishingReturns(this.endurance-e)))*n}calculateMaxSpeed(i,e,n){return null==i&&(i=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.topSpeed<=e?this.topSpeed*i*n:(e*i+(this.topSpeed-e)*(i*this.calculateDiminishingReturns(this.topSpeed-e)))*n}calculateTrueAcceleration(i,e,n){return null==i&&(i=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.acceleration<=e?this.acceleration*i*n:(e*i+(this.acceleration-e)*(i*this.calculateDiminishingReturns(this.acceleration-e)))*n}calculateTruePower(i,e,n){return null==i&&(i=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.power<=e?this.power*i*n:(e*i+(this.power-e)*(i*this.calculateDiminishingReturns(this.power-e)))*n}calculateTrueFocus(i,e,n){return null==i&&(i=this.defaultFocusModifier),null==n&&(n=1),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*i*n:(e*i+(this.focus-e)*(i*this.calculateDiminishingReturns(this.focus-e)))*n}calculateTrueAdaptability(i,e,n){return null==i&&(i=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.adaptability<=e?this.adaptability*i*n:(e*i+(this.adaptability-e)*(i*this.calculateDiminishingReturns(this.adaptability-e)))*n}calculateBurstChance(i,e,n){var r=this.focus,a=this.adaptability;return null!=e&&(r*=e/this.focusMs),null!=n&&(a*=n/this.adaptabilityMs),(a+r)*(1+i/4)/1e3*100}calculateBurstDistance(i,e,n){null==e&&(e=this.defaultBurstDistanceModifier);var r=this.power;return null!=n&&(r*=n/this.powerMs),r*(1+i/4)*e}topSpeedPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}accelerationPopover(i){return"Every stat point increases acceleration by "+i.toFixed(3)+"m/s up to diminishing returns."}endurancePopover(i){return"Every stat point increases stamina by "+i.toFixed(3)+" up to diminishing returns."}powerPopover(i){return"Every stat point increases ability efficiency by "+i.toFixed(3)+"% up to diminishing returns."}focusPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}adaptabilityPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(i){return 1/i**.6}addCurrentRacingStats(i){this.maxSpeedMs+=i.topSpeed,this.accelerationMs+=i.acceleration,this.stamina+=i.endurance,this.powerMs+=i.power,this.focusMs+=i.focus,this.adaptabilityMs+=i.adaptability}subtractCurrentRacingStats(i){this.maxSpeedMs-=i.topSpeed,this.accelerationMs-=i.acceleration,this.stamina-=i.endurance,this.powerMs-=i.power,this.focusMs-=i.focus,this.adaptabilityMs-=i.adaptability}multiplyCurrentRacingStats(i){this.maxSpeedMs*=i.topSpeed,this.accelerationMs*=i.acceleration,this.stamina*=i.endurance,this.powerMs*=i.power,this.focusMs*=i.focus,this.adaptabilityMs*=i.adaptability}divideCurrentRacingStats(i){this.maxSpeedMs/=i.topSpeed,this.accelerationMs/=i.acceleration,this.stamina/=i.endurance,this.powerMs/=i.power,this.focusMs/=i.focus,this.adaptabilityMs/=i.adaptability}}var at=(()=>{return(t=at||(at={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",at;var t})();class Is{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(i){var e=new Is;return e.affectedStatRatios=JSON.parse(JSON.stringify(i.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(i.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(i.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(i.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(i.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(i.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(i.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(i.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(i.trainingName)),e.trainingType=JSON.parse(JSON.stringify(i.trainingType)),e}getFacilitySize(){return at[this.facilitySize]}getStatGainDescription(){var i="";return this.affectedStatRatios.topSpeed>0&&(i+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Speed\n"),this.affectedStatRatios.acceleration>0&&(i+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(i+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(i+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(i+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(i+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),i}}Ue([Ze(()=>Ee),We("design:type",Ee)],Is.prototype,"affectedStatRatios",void 0);class Pt{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}}var me=(()=>{return(t=me||(me={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",me;var t})();class nn{constructor(i,e,n,r,a){void 0!==i&&(this.traitName=i),void 0!==e&&(this.requiredLevel=e),void 0!==n&&(this.researchLevel=n),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(i){var e="",n="";return this.positiveStatGain===me.acceleration&&(e="Acceleration"),this.positiveStatGain===me.adaptability&&(e="Adaptability"),this.positiveStatGain===me.endurance&&(e="Endurance"),this.positiveStatGain===me.focus&&(e="Focus"),this.positiveStatGain===me.power&&(e="Power"),this.positiveStatGain===me.topSpeed&&(e="Speed"),this.negativeStatGain===me.acceleration&&(n="Acceleration"),this.negativeStatGain===me.adaptability&&(n="Adaptability"),this.negativeStatGain===me.endurance&&(n="Endurance"),this.negativeStatGain===me.focus&&(n="Focus"),this.negativeStatGain===me.power&&(n="Power"),this.negativeStatGain===me.topSpeed&&(n="Speed"),"+"+this.researchLevel+"% "+e+", -"+(this.researchLevel>i?i:this.researchLevel)+"% "+n}}class Em{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class Im{constructor(){this.bonusBreedXpGainFromLocalRaces=0,this.bonusBreedXpGainFromCircuitRaces=0,this.bonusBreedXpGainFromTraining=0,this.trainingTimeReduction=0,this.diminishingReturnsBonus=0,this.bonusTalents=0,this.bonusTrainingBreedXpCertificateCount=0,this.bonusCircuitBreedXpCertificateCount=0,this.bonusLocalBreedXpCertificateCount=0,this.bonusDiminishingReturnsCertificateCount=0,this.certificateUseCap=30}}class ss{constructor(){this.remainingBurstMeters=0,this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.hasLostFocusDuringRace=!1,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0,this.scaryMaskEffectOccurred=!1,this.firstAbilityUseEffectApplied=!1,this.velocityExceedsMaxSpeedDuringBurst=!1,this.velocityReachesMaxSpeedCount=0}makeCopy(){var i=new ss;return i.remainingBurstMeters=this.remainingBurstMeters,i.metersSinceLostFocus=this.metersSinceLostFocus,i.recoveringStamina=this.recoveringStamina,i.defaultRecoveringStaminaLength=this.defaultRecoveringStaminaLength,i.currentRecoveringStaminaLength=this.currentRecoveringStaminaLength,i.ranOutOfStamina=this.ranOutOfStamina,i.lostFocus=this.lostFocus,i.defaultLostFocusLength=this.defaultLostFocusLength,i.currentLostFocusLength=this.currentLostFocusLength,i.hasLostFocusDuringRace=this.hasLostFocusDuringRace,i.stumbled=this.stumbled,i.defaultStumbledLength=this.defaultStumbledLength,i.currentStumbledLength=this.currentStumbledLength,i.burstCount=this.burstCount,i.icyCurrentYAmount=this.icyCurrentYAmount,i.icyCurrentDirectionUp=this.icyCurrentDirectionUp,i.headbandStumblePreventionCount=this.headbandStumblePreventionCount,i.scaryMaskEffectOccurred=this.scaryMaskEffectOccurred,i.firstAbilityUseEffectApplied=this.firstAbilityUseEffectApplied,i.velocityExceedsMaxSpeedDuringBurst=this.velocityExceedsMaxSpeedDuringBurst,i.velocityReachesMaxSpeedCount=this.velocityReachesMaxSpeedCount,this.relayEffects=[],i}}var lt=(()=>{return(t=lt||(lt={}))[t.none=0]="none",t[t.sprint=1]="sprint",t[t.support=2]="support",t[t.longDistance=3]="longDistance",lt;var t})();class cu{constructor(){this.talentTreeType=lt.none,this.row2RequiredPoints=5,this.row3RequiredPoints=10,this.row4RequiredPoints=15,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}makeCopy(i){var e=new cu;return e.talentTreeType=i.talentTreeType,e.column1Row1Points=i.column1Row1Points,e.column1Row2Points=i.column1Row2Points,e.column1Row3Points=i.column1Row3Points,e.column1Row4Points=i.column1Row4Points,e.column2Row1Points=i.column2Row1Points,e.column2Row2Points=i.column2Row2Points,e.column2Row3Points=i.column2Row3Points,e.column2Row4Points=i.column2Row4Points,e.column3Row1Points=i.column3Row1Points,e.column3Row2Points=i.column3Row2Points,e.column3Row3Points=i.column3Row3Points,e.column3Row4Points=i.column3Row4Points,e}getTalentPointsByColumn(i){return 0===i?this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points:1===i?this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points:2===i?this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points:0}getTalentPointsByRowColumn(i,e){return 0===i&&0===e?this.column1Row1Points:1===i&&0===e?this.column1Row2Points:2===i&&0===e?this.column1Row3Points:3===i&&0===e?this.column1Row4Points:0===i&&1===e?this.column2Row1Points:1===i&&1===e?this.column2Row2Points:2===i&&1===e?this.column2Row3Points:3===i&&1===e?this.column2Row4Points:0===i&&2===e?this.column3Row1Points:1===i&&2===e?this.column3Row2Points:2===i&&2===e?this.column3Row3Points:3===i&&2===e?this.column3Row4Points:0}getTotalSpentPoints(){return this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points+this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points+this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points}spendTalentPoint(i,e){0===i&&0===e&&(this.column1Row1Points+=1),1===i&&0===e&&(this.column1Row2Points+=1),2===i&&0===e&&(this.column1Row3Points+=1),3===i&&0===e&&(this.column1Row4Points+=1),0===i&&1===e&&(this.column2Row1Points+=1),1===i&&1===e&&(this.column2Row2Points+=1),2===i&&1===e&&(this.column2Row3Points+=1),3===i&&1===e&&(this.column2Row4Points+=1),0===i&&2===e&&(this.column3Row1Points+=1),1===i&&2===e&&(this.column3Row2Points+=1),2===i&&2===e&&(this.column3Row3Points+=1),3===i&&2===e&&(this.column3Row4Points+=1)}}class Nm{constructor(){this.successfulCoachingAttempts=0}}class Tt{constructor(){this.incubatorStatUpgrades=new Em,this.allTrainingTracks=new Dl,this.miscStats=new Im,this.trackedAnimalStats=new Nm,this.talentTree=new cu,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=200,this.totalRacesRun=0,this.equippedOrb=null,this.canEquipOrb=!1,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}makeCopy(i){var e=new Tt;return e.name=i.name,e.type=i.type,e.raceCourseType=i.raceCourseType,e.currentStats=i.currentStats.makeCopy(i.currentStats),e.baseStats=i.baseStats.makeCopy(i.baseStats),e.talentTree=i.talentTree.makeCopy(i.talentTree),e.isAvailable=i.isAvailable,e.ability=i.ability,e.raceVariables=new ss,e.equippedItem=i.equippedItem,e.equippedOrb=i.equippedOrb,e.incubatorStatUpgrades=i.incubatorStatUpgrades,e.breedLevel=i.breedLevel,e.trackedAnimalStats=i.trackedAnimalStats,e.trait=i.trait,e}viewAbility(){return this.ability.name}getAbilityUseUpdateText(i,e=""){return i+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return q[this.type]}getRaceCourseType(){return H[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}getCourseTypeClass(){return this.raceCourseType===H.Flatland?"flatlandColor":this.raceCourseType===H.Mountain?"mountainColor":this.raceCourseType===H.Ocean?"waterColor":this.raceCourseType===H.Tundra?"tundraColor":this.raceCourseType===H.Volcanic?"volcanicColor":""}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(i){null==i||null==this.currentStats||(this.currentStats.topSpeed+=Number(i.topSpeed),this.currentStats.acceleration+=Number(i.acceleration),this.currentStats.stamina+=Number(i.stamina),this.currentStats.endurance+=Number(i.endurance),this.currentStats.power+=Number(i.power),this.currentStats.focus+=Number(i.focus),this.currentStats.adaptability+=Number(i.adaptability))}}Ue([Ze(()=>Ee),We("design:type",Ee)],Tt.prototype,"currentStats",void 0),Ue([Ze(()=>Ee),We("design:type",Ee)],Tt.prototype,"baseStats",void 0),Ue([Ze(()=>Is),We("design:type",Object)],Tt.prototype,"currentTraining",void 0),Ue([Ze(()=>Is),We("design:type",Object)],Tt.prototype,"queuedTraining",void 0),Ue([Ze(()=>Pt),We("design:type",Pt)],Tt.prototype,"ability",void 0),Ue([Ze(()=>ss),We("design:type",ss)],Tt.prototype,"raceVariables",void 0),Ue([Ze(()=>be),We("design:type",Object)],Tt.prototype,"equippedItem",void 0),Ue([Ze(()=>be),We("design:type",Object)],Tt.prototype,"equippedOrb",void 0),Ue([Ze(()=>Em),We("design:type",Em)],Tt.prototype,"incubatorStatUpgrades",void 0),Ue([Ze(()=>Dl),We("design:type",Dl)],Tt.prototype,"allTrainingTracks",void 0),Ue([Ze(()=>Im),We("design:type",Im)],Tt.prototype,"miscStats",void 0),Ue([Ze(()=>Nm),We("design:type",Nm)],Tt.prototype,"trackedAnimalStats",void 0),Ue([Ze(()=>Pt),We("design:type",Array)],Tt.prototype,"availableAbilities",void 0),Ue([Ze(()=>nn),We("design:type",nn)],Tt.prototype,"trait",void 0),Ue([Ze(()=>cu),We("design:type",cu)],Tt.prototype,"talentTree",void 0);class o4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Horse,this.raceCourseType=H.Flatland,this.ability=new Pt,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=60,i.oneTimeEffect=!0,i.name="Inspiration",i.description="Inspiration",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.cooldown=5,e.efficiency=27,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class l4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Cheetah,this.raceCourseType=H.Flatland,this.ability=new Pt,this.ability.cooldown=6,this.ability.efficiency=35,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=.5,i.oneTimeEffect=!1,i.name="Giving Chase",i.description="Giving Chase",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class c4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Hare,this.raceCourseType=H.Flatland,this.ability=new Pt,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.cooldown=5,i.efficiency=40,i.oneTimeEffect=!1,i.name="Awareness",i.description="Awareness",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class u4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Monkey,this.raceCourseType=H.Mountain,this.ability=new Pt,this.ability.cooldown=11,this.ability.efficiency=6,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=60,i.oneTimeEffect=!0,i.name="Frenzy",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class d4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Goat,this.raceCourseType=H.Mountain,this.ability=new Pt,this.ability.efficiency=.5,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=.25,i.oneTimeEffect=!1,i.name="Deep Breathing",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class h4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Gecko,this.raceCourseType=H.Mountain,this.ability=new Pt,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=.2,i.oneTimeEffect=!1,i.name="Night Vision",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=38,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class f4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Dolphin,this.raceCourseType=H.Ocean,this.ability=new Pt,this.ability.cooldown=6,this.ability.efficiency=84,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=50,i.oneTimeEffect=!0,i.name="Navigator",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class p4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Shark,this.raceCourseType=H.Ocean,this.ability=new Pt,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=35,i.oneTimeEffect=!0,i.name="Feeding Frenzy",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.1,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class g4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Octopus,this.raceCourseType=H.Ocean,this.ability=new Pt,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=1,i.oneTimeEffect=!1,i.name="Buried Treasure",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=2,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class m4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Penguin,this.raceCourseType=H.Tundra,this.ability=new Pt,this.ability.efficiency=65,this.ability.cooldown=8,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=4,i.oneTimeEffect=!1,i.name="Wild Toboggan",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class v4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Caribou,this.raceCourseType=H.Tundra,this.ability=new Pt,this.ability.efficiency=.5,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=50,i.cooldown=7,i.oneTimeEffect=!1,i.name="Great Migration",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.05,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class b4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Salamander,this.raceCourseType=H.Volcanic,this.ability=new Pt,this.ability.cooldown=7,this.ability.efficiency=70,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.cooldown=6,i.efficiency=50,i.oneTimeEffect=!1,i.name="Burrow",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.cooldown=10,e.efficiency=25,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class _4 extends Tt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=q.Fox,this.raceCourseType=H.Volcanic,this.ability=new Pt,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=1.5,i.oneTimeEffect=!1,i.name="Fleeting Speed",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class qh{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1,this.isEventDeck=!1}}Ue([Ze(()=>Tt),We("design:type",Array)],qh.prototype,"selectedAnimals",void 0);class Om{constructor(){this.maxSpeedIncrease=1.1,this.accelerationRateIncrease=1.1,this.staminaIncrease=1.1,this.powerEfficiencyIncrease=1.1,this.focusDistanceIncrease=1.1,this.adaptabilityDistanceIncrease=1.1}}class y4{constructor(){this.upgradePrice=[],this.upgradedStatGain=new Ee(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0}}class Vm{constructor(){this.barnUpgrades=new y4}getSize(){return at[this.size]}}class uu{constructor(){this.timeTrained=0,this.timeToComplete=300}}Ue([Ze(()=>Tt),We("design:type",Object)],uu.prototype,"assignedAnimal",void 0),Ue([Ze(()=>nn),We("design:type",Object)],uu.prototype,"assignedTrait",void 0);class sD{constructor(i){this.exhaustionStatReduction=1,this.morale=1,this.associatedAnimalType=i,this.isCurrentlyRacing=!1,this.isSetToRelay=!1}}class Fm{constructor(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.deepBreathingUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.bigBrainUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.specialDeliveryUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.onTheHuntUseCap=25,this.sureFootedUseCap=25,this.deepBreathingUseCap=25,this.nightVisionUseCap=25,this.bigBrainUseCap=5,this.quickTobogganUseCap=25,this.herdMentalityUseCap=1,this.specialDeliveryUseCap=25}resetUseCounts(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0}}class Xh{constructor(){this.nineTailsBuffs=[],this.relayEffects=[],this.mountainEndingY=0,this.deepBreathingStaminaGain=0,this.longDistanceTalentIncreaseAccelerationWithLowVelocity=!1,this.maxSpeedFloor=0,this.raceVariables=new ss}}Ue([Ze(()=>ss),We("design:type",ss)],Xh.prototype,"raceVariables",void 0);class Z{constructor(i,e){void 0!==i&&(this.value=i),void 0!==e&&(this.text=e)}}class Yh{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1,this.distanceCovered=0}addRaceUpdate(i,e){var n=new Z;n.text=e,n.value=i,this.raceUpdates.push(n)}}var $e=(()=>{return(t=$e||($e={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",$e;var t})(),je=(()=>{return(t=je||(je={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",je;var t})(),kr=(()=>{return(t=kr||(kr={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",kr;var t})();class Qh{constructor(i){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForMiniBurst=!1,this.checkedForNineTails=!1,null!=i&&this.setStumbleFields(),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){this.currentStumbleOpportunity=0,this.routeDesign===je.Regular&&(this.stumbleSeverity=kr.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===je.S&&(this.isSpecialPath=!0,this.stumbleSeverity=kr.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===je.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=kr.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===je.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=kr.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===je.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=kr.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===je.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=kr.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===je.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=kr.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===je.Cavern&&(this.isSpecialPath=!0,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===je.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=kr.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===je.FirstRegular||this.routeDesign===je.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=kr.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===je.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=kr.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10)}}class gr{constructor(i){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==i&&(this.terrainType=i,i===$e.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),i===$e.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),i===$e.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),i===$e.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),i===$e.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),i===$e.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),i===$e.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),i===$e.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return $e[this.terrainType]}}class In{constructor(i,e){this.legComplete=!1,null!=i&&(this.courseType=i),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return H[this.courseType]}getCourseTypeClass(){return this.courseType===H.Flatland?"flatlandColor":this.courseType===H.Mountain?"mountainColor":this.courseType===H.Ocean?"waterColor":this.courseType===H.Tundra?"tundraColor":this.courseType===H.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":$e[this.terrain.terrainType]}}Ue([Ze(()=>Qh),We("design:type",Array)],In.prototype,"pathData",void 0),Ue([Ze(()=>gr),We("design:type",gr)],In.prototype,"terrain",void 0);class Kh{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[],this.racePositionByFrame=[]}}class hi{constructor(i,e,n,r,a,s,o,l,c,u,d){this.raceLegs=i,this.requiredRank=e,this.isCircuitRace=n,this.raceId=r,this.length=a,this.timeToComplete=s,this.raceUI=new Kh,this.circuitIncreaseReward=["",""],null!=o&&(this.rewards=o),null!=l&&(this.localRaceType=l),null!=c&&(this.trackRaceType=c),null!=u&&(this.raceType=u),null!=d&&(this.eventRaceType=d)}makeCopy(i){var e=new hi(i.raceLegs,i.requiredRank,i.isCircuitRace,i.raceId,i.length,i.timeToComplete,i.rewards,i.localRaceType,i.trackRaceType,i.raceType,i.eventRaceType);return i.raceUI.velocityByFrame.length>0&&i.raceUI.velocityByFrame.forEach(n=>{e.raceUI.velocityByFrame.push(n)}),i.raceUI.staminaPercentByFrame.length>0&&i.raceUI.staminaPercentByFrame.forEach(n=>{e.raceUI.staminaPercentByFrame.push(n)}),e}reduceExportSize(){this.raceUI=new Kh}}Ue([Ze(()=>In),We("design:type",Array)],hi.prototype,"raceLegs",void 0),Ue([Ze(()=>be),We("design:type",Array)],hi.prototype,"rewards",void 0),Ue([Ze(()=>Kh),We("design:type",Kh)],hi.prototype,"raceUI",void 0);class Zh{constructor(){this.affectsAllRacers=!1}makeCopy(){var i=new Zh;return i.isMultiplicative=this.isMultiplicative,i.remainingRelayMeters=this.remainingRelayMeters,i.relayAffectedStatRatios=new Ee(this.relayAffectedStatRatios.topSpeed,this.relayAffectedStatRatios.acceleration,this.relayAffectedStatRatios.endurance,this.relayAffectedStatRatios.power,this.relayAffectedStatRatios.focus,this.relayAffectedStatRatios.adaptability),i.effectType=this.effectType,i.additionalValue=this.additionalValue,i.affectsAllRacers=this.affectsAllRacers,i}}class Vi{constructor(){this.isRunning=!1,this.initialSetupComplete=!1,this.animalAlreadyPrepped=!1,this.mountainEndingY=0,this.mountainClimbPercent=0,this.exhaustionMoraleUpdateCounter=0,this.weatherClusterUpdateCounter=0,this.weekStartDay=2,this.weekStartHour=9,this.weekEndDay=4,this.weekEndHour=12,this.weekendStartDay=5,this.weekendStartHour=20,this.weekendEndDay=0,this.weekendEndHour=23,this.distanceCovered=0,this.grandPrixTimeLength=183600,this.segmentTime=180,this.segmentTimeCounter=0,this.overallTimeCounter=0,this.rank="Z",this.animalData=[],this.queuedRelayEffects=[],this.bonusTime=0,this.remainingRewards=0,this.totalRewards=0,this.coinRewardsObtained=0,this.renownRewardsObtained=0,this.tokenRewardsObtained=0,this.isGrandPrixCompleted=!1,this.eventAbilityData=new Fm,this.isCatchingUp=!1}}Ue([Ze(()=>Fm),We("design:type",Fm)],Vi.prototype,"eventAbilityData",void 0),Ue([Ze(()=>gr),We("design:type",gr)],Vi.prototype,"raceTerrain",void 0),Ue([Ze(()=>hi),We("design:type",hi)],Vi.prototype,"currentRaceSegment",void 0),Ue([Ze(()=>Yh),We("design:type",Yh)],Vi.prototype,"currentRaceSegmentResult",void 0),Ue([Ze(()=>hi),We("design:type",hi)],Vi.prototype,"nextRaceSegment",void 0),Ue([Ze(()=>hi),We("design:type",hi)],Vi.prototype,"previousRaceSegment",void 0),Ue([Ze(()=>Xh),We("design:type",Xh)],Vi.prototype,"previousRaceSegmentData",void 0),Ue([Ze(()=>sD),We("design:type",Array)],Vi.prototype,"animalData",void 0),Ue([Ze(()=>Zh),We("design:type",Array)],Vi.prototype,"queuedRelayEffects",void 0);class oD{}class Jh{constructor(){this.rewards=[]}}Ue([Ze(()=>Date),We("design:type",Date)],Jh.prototype,"expirationDate",void 0),Ue([Ze(()=>Is),We("design:type",Array)],Jh.prototype,"rewards",void 0);class Je{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.numberPurchasing=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class Yr{}Ue([Ze(()=>Je),We("design:type",Array)],Yr.prototype,"itemList",void 0);class Bm{constructor(){this.tutorialCompleted=!1,this.currentTutorialId=1,this.showTutorial=!1,this.showTrainingTrackTutorial=!0,this.showCoachingTutorial=!0}}class ef{constructor(){this.isNewSpecialRaceAvailable=!1,this.isEventRaceNowActive=!1}}class Lm{constructor(){this.settings=[]}get(i){var e=this.settings.find(n=>n[0]===i);return null!=e?e[1]:""}set(i,e){var n=this.settings.find(r=>r[0]===i);null==n?this.settings.push([i,e]):n[1]=e}}class Um{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType="",this.highestMaxSpeed="",this.highestAccelerationRate="",this.highestStamina="",this.highestPowerEfficiency="",this.highestFocusDistance="",this.highestAdaptabilityDistance=""}}class Hm{constructor(){this.unlockables=[]}get(i){var e=this.unlockables.find(n=>n[0]===i);return null!=e&&e[1]}set(i,e){var n=this.unlockables.find(r=>r[0]===i);null==n?this.unlockables.push([i,e]):n[1]=e}}class jn{constructor(i){this.userIsRacing=!1,null!=i&&(this.animals=i.animals,this.barns=i.barns,this.trainingOptions=i.trainingOptions,this.circuitRaces=i.circuitRaces,this.circuitRank=i.circuitRank,this.localRaces=i.localRaces,this.resources=i.resources,this.modifiers=i.modifiers,this.shop=i.shop,this.tokenShop=i.tokenShop,this.animalDecks=i.animalDecks,this.incubator=i.incubator,this.trackedStats=i.trackedStats,this.pinnacle=i.pinnacle,this.orbStats=i.orbStats,this.redeemedCodes=i.redeemedCodes,this.eventRaceData=i.eventRaceData,this.notifications=i.notifications,this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}Ue([Ze(()=>Tt),We("design:type",Array)],jn.prototype,"animals",void 0),Ue([Ze(()=>Vm),We("design:type",Array)],jn.prototype,"barns",void 0),Ue([Ze(()=>Is),We("design:type",Array)],jn.prototype,"trainingOptions",void 0),Ue([Ze(()=>hi),We("design:type",Array)],jn.prototype,"circuitRaces",void 0),Ue([Ze(()=>hi),We("design:type",Array)],jn.prototype,"localRaces",void 0),Ue([Ze(()=>oD),We("design:type",oD)],jn.prototype,"pinnacle",void 0),Ue([Ze(()=>be),We("design:type",Array)],jn.prototype,"resources",void 0),Ue([Ze(()=>Z),We("design:type",Array)],jn.prototype,"modifiers",void 0),Ue([Ze(()=>Yr),We("design:type",Array)],jn.prototype,"shop",void 0),Ue([Ze(()=>Yr),We("design:type",Array)],jn.prototype,"tokenShop",void 0),Ue([Ze(()=>qh),We("design:type",Array)],jn.prototype,"animalDecks",void 0),Ue([Ze(()=>Lm),We("design:type",Lm)],jn.prototype,"settings",void 0),Ue([Ze(()=>Hm),We("design:type",Hm)],jn.prototype,"unlockables",void 0),Ue([Ze(()=>uu),We("design:type",uu)],jn.prototype,"incubator",void 0),Ue([Ze(()=>Um),We("design:type",Um)],jn.prototype,"trackedStats",void 0),Ue([Ze(()=>Om),We("design:type",Om)],jn.prototype,"orbStats",void 0),Ue([Ze(()=>Bm),We("design:type",Bm)],jn.prototype,"tutorials",void 0),Ue([Ze(()=>Jh),We("design:type",Array)],jn.prototype,"redeemedCodes",void 0),Ue([Ze(()=>Vi),We("design:type",Vi)],jn.prototype,"eventRaceData",void 0),Ue([Ze(()=>ef),We("design:type",ef)],jn.prototype,"notifications",void 0);var Oe=(()=>{return(t=Oe||(Oe={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",Oe;var t})(),lD=z(340);let $i=(()=>{class t{constructor(e){this.sanitizer=e}getRandomSeededInteger(e,n,r="seeded"){var a=lD(r);return Math.round(a()*(n-e)+e)}getRandomInteger(e,n){return Math.round(Math.random()*(n-e)+e)}getRandomSeededNumber(e,n,r="seeded"){return lD(r)()*(n-e)+e}getRandomNumber(e,n){return Math.random()*(n-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var n=0;return e.length>1&&(n=26*(e.length-1)),n+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var n="";e>26;)n+="A",e-=26;return n+String.fromCharCode(91-e)}getHoursRemainingFromSeconds(e){return Math.floor(e/3600)}getMinutesLeftInHourRemainingFromSeconds(e){var n=Math.floor(e/3600);return Math.floor(e/60-60*n)}getSecondsLeftInMinuteRemainingFromSeconds(e){var n=Math.floor(e/3600);return e-60*n*60-60*Math.floor(e/60-60*n)}convertSecondsToHHMMSS(e){var n=Math.floor(e/3600),r=Math.floor(e/60-60*n),a=e-60*n*60-60*r,s=n.toString(),o=r.toString(),l=Math.floor(a).toString();return n<10&&(s=n<1||n>59?"00":String(s).padStart(2,"0")),r<10&&(o=r<1||r>59?"00":String(o).padStart(2,"0")),a<10&&(l=a<1||a>59?"00":String(l).padStart(2,"0")),s+":"+o+":"+l}getClosestWholeNumber(e,n){return n/Math.floor(n/e)}getDayOfWeekFromNumber(e){return e<=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].length-1?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]:""}getAmPmTimeFromHours(e){return 0===e?"12:00 AM":e<12?e+":00 AM":12===e?"12:00 PM":e-12+":00 PM"}get24HourFormat(e){return e<=9?"0"+e+":00":e+":00"}convertDegreesToRadians(e){return e*(Math.PI/180)}getSanitizedHtml(e){return this.sanitizer.sanitize(Xt.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}shadeColor(e,n){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+n)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}condenseList(e){var n=[];return e.forEach(r=>{if(n.some(s=>s.name===r.name))n.find(s=>s.name===r.name).amount+=r.amount;else{var a=r.makeCopy(r);n.push(a)}}),n}ordinalSuffixOf(e){var n=e%10,r=e%100;return 1==n&&11!=r?e+"st":2==n&&12!=r?e+"nd":3==n&&13!=r?e+"rd":e+"th"}}return t.\u0275fac=function(e){return new(e||t)(Ve(xs))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gm=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,n,r){return new be(e,n,r)}initializeTraining(e){var n=new Is;return e===Oe.ShortTrackRunning&&(n.trainingName="Short Track Running",n.isAvailable=!0,n.facilitySize=at.Small,n.timeToComplete=30,n.trainingType=Oe.ShortTrackRunning,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(1,0,0,0,0,0)),e===Oe.Sprints&&(n.trainingName="Sprints",n.isAvailable=!0,n.facilitySize=at.Small,n.timeToComplete=20,n.trainingType=Oe.Sprints,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,1,0,0,0,0)),e===Oe.TrailRunning&&(n.trainingName="Trail Running",n.isAvailable=!0,n.facilitySize=at.Small,n.timeToComplete=45,n.trainingType=Oe.TrailRunning,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(.5,0,1,0,0,0)),e===Oe.MoveLogs&&(n.trainingName="Move Logs",n.isAvailable=!1,n.facilitySize=at.Small,n.timeToComplete=30,n.trainingType=Oe.MoveLogs,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,1,0,0)),e===Oe.Footwork&&(n.trainingName="Footwork",n.isAvailable=!1,n.facilitySize=at.Small,n.timeToComplete=45,n.trainingType=Oe.Footwork,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,.5,0,0,0,1)),e===Oe.PracticeCommands&&(n.trainingName="Practice Commands",n.isAvailable=!1,n.facilitySize=at.Small,n.timeToComplete=40,n.trainingType=Oe.PracticeCommands,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,0,1,.25)),e===Oe.ScentTraining&&(n.trainingName="Scent Training",n.isAvailable=!1,n.facilitySize=at.Small,n.timeToComplete=45,n.trainingType=Oe.ScentTraining,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,.5,0,1,0)),e===Oe.SmallWagonTow&&(n.trainingName="Small Wagon Tow",n.isAvailable=!1,n.facilitySize=at.Small,n.timeToComplete=45,n.trainingType=Oe.SmallWagonTow,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(.25,0,0,1.5,0,0)),e===Oe.Sidestep&&(n.trainingName="Sidestep",n.isAvailable=!1,n.facilitySize=at.Small,n.timeToComplete=35,n.trainingType=Oe.Sidestep,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,2,0,0,0,0)),e===Oe.MediumTrackRunning&&(n.trainingName="Medium Track Running",n.isAvailable=!1,n.facilitySize=at.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Oe.MediumTrackRunning,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(2,0,1,0,0,0)),e===Oe.UphillRun&&(n.trainingName="Uphill Run",n.isAvailable=!1,n.facilitySize=at.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Oe.UphillRun,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,1,2,0,0,0)),e===Oe.Puzzles&&(n.trainingName="Puzzles",n.isAvailable=!1,n.facilitySize=at.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Oe.Puzzles,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,0,2,1)),e===Oe.MoveRocks&&(n.trainingName="Move Rocks",n.isAvailable=!1,n.facilitySize=at.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Oe.MoveRocks,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,1,0,2,0,0)),e===Oe.DodgeBall&&(n.trainingName="Dodge Ball",n.isAvailable=!1,n.facilitySize=at.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Oe.DodgeBall,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,2.5,0,0,0,.5)),e===Oe.LateralVerticalDrill&&(n.trainingName="Lateral Vertical Drill",n.isAvailable=!1,n.facilitySize=at.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Oe.LateralVerticalDrill,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(1.5,0,0,0,2,0)),e===Oe.BurstPractice&&(n.trainingName="Burst Practice",n.isAvailable=!1,n.facilitySize=at.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Oe.BurstPractice,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,1.5,1.5,1.5)),e===Oe.Acrobatics&&(n.trainingName="Acrobatics",n.isAvailable=!1,n.facilitySize=at.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Oe.Acrobatics,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(.5,0,.5,3,0,0)),e===Oe.LongTrackRunning&&(n.trainingName="Long Track Running",n.isAvailable=!1,n.facilitySize=at.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Oe.LongTrackRunning,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(5,0,0,0,2,0)),e===Oe.VehicleTow&&(n.trainingName="Vehicle Tow",n.isAvailable=!1,n.facilitySize=at.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Oe.VehicleTow,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,2,5,0,0)),e===Oe.LogJump&&(n.trainingName="Log Jump",n.isAvailable=!1,n.facilitySize=at.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Oe.LogJump,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(1,1,0,0,0,5)),e===Oe.Meditation&&(n.trainingName="Meditation",n.isAvailable=!1,n.facilitySize=at.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Oe.Meditation,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,2,5,0)),e===Oe.WindSprints&&(n.trainingName="Wind Sprints",n.isAvailable=!1,n.facilitySize=at.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Oe.WindSprints,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(2,5,0,0,0,0)),e===Oe.GreenwayHike&&(n.trainingName="Greenway Hike",n.isAvailable=!1,n.facilitySize=at.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Oe.GreenwayHike,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,5,0,0,2)),e===Oe.Marathon&&(n.trainingName="Marathon",n.isAvailable=!1,n.facilitySize=at.Large,n.purchasePrice*=10,n.timeToComplete=120,n.trainingType=Oe.Marathon,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,2,3,0,3,0)),e===Oe.AgilityCourse&&(n.trainingName="Agility Course",n.isAvailable=!1,n.facilitySize=at.Large,n.purchasePrice*=10,n.timeToComplete=120,n.trainingType=Oe.AgilityCourse,n.trainingCourseType=H.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(3,0,0,2,0,3)),n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var $t=(()=>{return(t=$t||($t={}))[t.Track=0]="Track",t[t.Free=1]="Free",t[t.Mono=2]="Mono",t[t.Duo=3]="Duo",t[t.Rainbow=4]="Rainbow",$t;var t})(),Xe=(()=>{return(t=Xe||(Xe={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",t[t.scaryMask=12]="scaryMask",t[t.runningShoes=13]="runningShoes",t[t.incense=14]="incense",t[t.athleticTape=15]="athleticTape",Xe;var t})();const jm={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#a6a49d","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#8105fc","--specialityKeywordColor":"#050efc","--equipmentKeywordColor":"#1B7F02","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},zm={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#BF6200","--mountainColor":"#228D0F","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#266A80","--volcanicColor":"#C70604","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#064064","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},$m={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#C05100","--foreground-tertiary":"#6A2D00","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#000000","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},du={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#49647A","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#E18B07","--mountainColor":"#30b001","--waterColor":"#9289CF","--waterSubcolor":"#5044ab","--tundraColor":"#019DDE","--volcanicColor":"#E56C6E","--resourceKeywordColor":"#EAAD91","--progressionKeywordColor":"#ABB5DC","--specialityKeywordColor":"#5DBDF6","--equipmentKeywordColor":"#83C2A6","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let Rl=(()=>{class t{constructor(){this.active=du,this.availableThemes=[jm,zm,$m,du]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){return this.active===du?"night":this.active===zm?"light":this.active===jm?"white":this.active===$m?"twilight":""}setNightTheme(){return this.setActiveTheme(du)}setLightTheme(){return this.setActiveTheme(zm)}setTwilightTheme(){return this.setActiveTheme($m)}setWhiteTheme(){return this.setActiveTheme(jm)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(n=>{document.documentElement.style.setProperty(n,this.active.properties[n])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Qr=(()=>{return(t=Qr||(Qr={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",Qr;var t})(),zn=(()=>{return(t=zn||(zn={}))[t.practice=0]="practice",t[t.novice=1]="novice",t[t.intermediate=2]="intermediate",t[t.master=3]="master",zn;var t})(),Fe=(()=>{return(t=Fe||(Fe={}))[t.circuit=0]="circuit",t[t.special=1]="special",t[t.event=2]="event",t[t.trainingTrack=3]="trainingTrack",Fe;var t})(),ze=(()=>{return(t=ze||(ze={}))[t.grandPrix=0]="grandPrix",ze;var t})(),Ai=(()=>{return(t=Ai||(Ai={}))[t.clearSkies=0]="clearSkies",t[t.inclementWeather=1]="inclementWeather",t[t.coldSpell=2]="coldSpell",Ai;var t})();let yt=(()=>{class t{constructor(e,n,r){this.utilityService=e,this.initializeService=n,this.themeService=r,this.globalVar=new jn}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.redeemedCodes=[],this.globalVar.settings=new Lm,this.globalVar.unlockables=new Hm,this.globalVar.incubator=new uu,this.globalVar.trackedStats=new Um,this.globalVar.orbStats=new Om,this.globalVar.tutorials=new Bm,this.globalVar.eventRaceData=new Vi,this.globalVar.userIsRacing=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1.05,this.globalVar.startingVersion=1.05,this.globalVar.startDate=new Date,this.globalVar.notifications=new ef,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeRelayTeams(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeTokenShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables()}InitializeModifiers(){this.globalVar.modifiers.push(new Z(.2,"staminaModifier")),this.globalVar.modifiers.push(new Z(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new Z(.1,"exhaustionStatLossMinimumModifier")),this.globalVar.modifiers.push(new Z(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new Z(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new Z(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new Z(.5,"trainingTrackPaceModifier")),this.globalVar.modifiers.push(new Z(.05,"breedLevelStatModifier")),this.globalVar.modifiers.push(new Z(10,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new Z(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new Z(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new Z(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new Z(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new Z(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new Z(25,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new Z(10,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new Z(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new Z(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new Z(5,"whistleModifier")),this.globalVar.modifiers.push(new Z(10,"goldenWhistleModifier")),this.globalVar.modifiers.push(new Z(.1,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new Z(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new Z(10,"attractionAmountModifier")),this.globalVar.modifiers.push(new Z(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new Z(.45,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new Z(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new Z(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new Z(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new Z(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new Z(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new Z(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(2,"scaryMaskEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.2,"runningShoesEquipmentModifier")),this.globalVar.modifiers.push(new Z(.9,"incenseEquipmentModifier")),this.globalVar.modifiers.push(new Z(.5,"athleticTapeEquipmentModifier")),this.globalVar.modifiers.push(new Z(7200,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new Z(14400,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new Z(28800,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new Z(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new Z(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new Z(7200,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new Z(5e6,"metersPerCoinsGrandPrixModifier")),this.globalVar.modifiers.push(new Z(2e7,"metersPerRenownGrandPrixModifier")),this.globalVar.modifiers.push(new Z(100,"grandPrixCoinRewardModifier")),this.globalVar.modifiers.push(new Z(5,"grandPrixRenownRewardModifier")),this.globalVar.modifiers.push(new Z(5e7,"grandPrixToken1MeterModifier")),this.globalVar.modifiers.push(new Z(1e8,"grandPrixToken2MeterModifier")),this.globalVar.modifiers.push(new Z(25e7,"grandPrixToken3MeterModifier")),this.globalVar.modifiers.push(new Z(5e8,"grandPrixToken4MeterModifier")),this.globalVar.modifiers.push(new Z(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new Z(.02,"exhaustionGainGrandPrixModifier")),this.globalVar.modifiers.push(new Z(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new Z(50,"grandPrixBreedLevelRequiredModifier")),this.globalVar.modifiers.push(new Z(.2,"weatherMoraleBoostModifier")),this.globalVar.modifiers.push(new Z(.03,"focusMoraleLossModifier")),this.globalVar.modifiers.push(new Z(.01,"stumbleMoraleLossModifier")),this.globalVar.modifiers.push(new Z(.05,"segmentCompleteMoraleBoostModifier")),this.globalVar.modifiers.push(new Z(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new Z(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new Z(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new Z(20,"maxDriftAmountModifier")),this.globalVar.modifiers.push(new Z(4,"relayAbilityXpGainModifier")),this.globalVar.modifiers.push(new Z(25,"maximumTraitNegativePercentModifier"));var e=.3,n=.1,l=1.025,c=1.05,d=.975,h=.95;this.globalVar.modifiers.push(new Z(e*l,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*h,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*c,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(1.1*n,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*d,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*h,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*h,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*c,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*l,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*l,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*d,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*d,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*h,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*c,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*d,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*l,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*d,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*d,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*h,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*h,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*d,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*h,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*l,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*h,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*c,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*d,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*h,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*c,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*l,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*h,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*c,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*c,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*d,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*c,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new o4;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var n=new u4;n.name="Monkey",this.calculateAnimalRacingStats(n);var r=new c4;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new l4;a.name="Cheetah",this.calculateAnimalRacingStats(a);var s=new d4;s.name="Goat",this.calculateAnimalRacingStats(s);var o=new h4;o.name="Gecko",this.calculateAnimalRacingStats(o);var l=new f4;l.name="Dolphin",this.calculateAnimalRacingStats(l);var c=new p4;c.name="Shark",this.calculateAnimalRacingStats(c);var u=new g4;u.name="Octopus",this.calculateAnimalRacingStats(u);var d=new m4;d.name="Penguin",this.calculateAnimalRacingStats(d);var h=new v4;h.name="Caribou",this.calculateAnimalRacingStats(h);var p=new b4;p.name="Salamander",this.calculateAnimalRacingStats(p);var b=new _4;b.name="Fox",this.calculateAnimalRacingStats(b),this.globalVar.animals.push(e),this.globalVar.animals.push(a),this.globalVar.animals.push(r),this.globalVar.animals.push(s),this.globalVar.animals.push(n),this.globalVar.animals.push(o),this.globalVar.animals.push(l),this.globalVar.animals.push(c),this.globalVar.animals.push(u),this.globalVar.animals.push(d),this.globalVar.animals.push(h),this.globalVar.animals.push(p),this.globalVar.animals.push(b)}InitializeRelayTeams(){var e=new qh;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Relay Team 1",e.deckNumber=1;var n=this.globalVar.animals.find(s=>"Horse"===s.getAnimalType());void 0!==n&&e.selectedAnimals.push(n),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new qh;a.isAvailable=!0,a.deckNumber=r+2,a.name="Relay Team "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeTokenShop(){this.globalVar.tokenShop=[];var e=new Yr,n=[],r=10,a=new Je;a.name="Apples",a.purchasePrice.push(this.getTokenResourceValue(1)),a.basePurchasePrice.push(this.getTokenResourceValue(1)),a.shortDescription="+1 Acceleration to a single animal",a.numberPurchasing=r,a.canHaveMultiples=!0,a.type=Y.Food,a.infiniteAmount=!0,n.push(a);var s=new Je;s.name="Bananas",s.shortDescription="+1 Speed to a single animal",s.purchasePrice.push(this.getTokenResourceValue(1)),s.basePurchasePrice.push(this.getTokenResourceValue(1)),s.canHaveMultiples=!0,s.numberPurchasing=r,s.type=Y.Food,s.infiniteAmount=!0,n.push(s);var o=new Je;o.name="Strawberries",o.shortDescription="+1 Endurance to a single animal",o.purchasePrice.push(this.getTokenResourceValue(1)),o.basePurchasePrice.push(this.getTokenResourceValue(1)),o.canHaveMultiples=!0,o.numberPurchasing=r,o.type=Y.Food,o.infiniteAmount=!0,n.push(o);var l=new Je;l.name="Carrots",l.shortDescription="+1 Power to a single animal",l.purchasePrice.push(this.getTokenResourceValue(1)),l.basePurchasePrice.push(this.getTokenResourceValue(1)),l.canHaveMultiples=!0,l.numberPurchasing=r,l.type=Y.Food,l.infiniteAmount=!0,n.push(l);var c=new Je;c.name="Turnips",c.shortDescription="+1 Focus to a single animal",c.purchasePrice.push(this.getTokenResourceValue(1)),c.basePurchasePrice.push(this.getTokenResourceValue(1)),c.canHaveMultiples=!0,c.numberPurchasing=r,c.type=Y.Food,c.infiniteAmount=!0,n.push(c);var u=new Je;u.name="Oranges",u.shortDescription="+1 Adaptability to a single animal",u.purchasePrice.push(this.getTokenResourceValue(1)),u.basePurchasePrice.push(this.getTokenResourceValue(1)),u.canHaveMultiples=!0,u.numberPurchasing=r,u.type=Y.Food,u.infiniteAmount=!0,n.push(u);var d=new Je;d.name="Circuit Race Breed XP Gain Certificate",d.shortDescription=this.getItemDescription(d.name),d.purchasePrice.push(this.getTokenResourceValue(1)),d.basePurchasePrice.push(this.getTokenResourceValue(1)),d.canHaveMultiples=!0,d.type=Y.Consumable,d.infiniteAmount=!0,n.push(d);var h=new Je;h.name="Free Race Breed XP Gain Certificate",h.shortDescription=this.getItemDescription(h.name),h.purchasePrice.push(this.getTokenResourceValue(1)),h.basePurchasePrice.push(this.getTokenResourceValue(1)),h.canHaveMultiples=!0,h.type=Y.Consumable,h.infiniteAmount=!0,n.push(h),e.name="Tier 1",e.itemList=n,this.globalVar.tokenShop.push(e);var p=new Yr,b=[],y=new Je;y.name="Mangoes",y.shortDescription="+1 Breed Level to a single animal",y.purchasePrice.push(this.getTokenResourceValue(1)),y.basePurchasePrice.push(this.getTokenResourceValue(1)),y.canHaveMultiples=!0,y.numberPurchasing=2,y.type=Y.Food,y.infiniteAmount=!0,b.push(y);var w=new Je;w.name="Coins",w.shortDescription="",w.purchasePrice.push(this.getTokenResourceValue(3)),w.basePurchasePrice.push(this.getTokenResourceValue(3)),w.canHaveMultiples=!0,w.numberPurchasing=5e3,w.type=Y.Resources,w.infiniteAmount=!0,b.push(w);var S=new Je;S.name="Diminishing Returns Increase Certificate",S.shortDescription=this.getItemDescription(S.name),S.purchasePrice.push(this.getTokenResourceValue(5)),S.basePurchasePrice.push(this.getTokenResourceValue(5)),S.canHaveMultiples=!0,S.type=Y.Consumable,S.infiniteAmount=!0,b.push(S);var C=new Je;C.name="Training Breed XP Gain Certificate",C.shortDescription=this.getItemDescription(C.name),C.purchasePrice.push(this.getTokenResourceValue(1)),C.basePurchasePrice.push(this.getTokenResourceValue(1)),C.canHaveMultiples=!0,C.type=Y.Consumable,C.infiniteAmount=!0,b.push(C),p.name="Tier 2",p.itemList=b,this.globalVar.tokenShop.push(p);var I=new Yr,W=[],G=new Je;G.name=this.getEquipmentName(Xe.scaryMask),G.shortDescription=this.getEquipmentDescription(G.name),G.purchasePrice.push(this.getTokenResourceValue(7)),G.canHaveMultiples=!0,G.infiniteAmount=!0,G.type=Y.Equipment,W.push(G);var Q=new Je;Q.name=this.getEquipmentName(Xe.runningShoes),Q.shortDescription=this.getEquipmentDescription(Q.name),Q.purchasePrice.push(this.getTokenResourceValue(7)),Q.canHaveMultiples=!0,Q.infiniteAmount=!0,Q.type=Y.Equipment,W.push(Q);var te=new Je;te.name=this.getEquipmentName(Xe.incense),te.shortDescription=this.getEquipmentDescription(te.name),te.purchasePrice.push(this.getTokenResourceValue(7)),te.canHaveMultiples=!0,te.infiniteAmount=!0,te.type=Y.Equipment,W.push(te);var de=new Je;de.name=this.getEquipmentName(Xe.athleticTape),de.shortDescription=this.getEquipmentDescription(de.name),de.purchasePrice.push(this.getTokenResourceValue(7)),de.canHaveMultiples=!0,de.infiniteAmount=!0,de.type=Y.Equipment,W.push(de),I.name="Tier 3",I.itemList=W,this.globalVar.tokenShop.push(I)}InitializeShop(){this.globalVar.shop=[];var e=new Yr,n=[],u=new Je;u.name="Cheetah",u.shortDescription="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.",u.purchasePrice.push(new be("Coins",1e3)),u.canHaveMultiples=!1,u.type=Y.Animal,n.push(u);var d=new Je;d.name="Hare",d.shortDescription="The Hare is a Flatland racing animal with various ways to increase acceleration and focus.",d.purchasePrice.push(new be("Coins",1e3)),d.canHaveMultiples=!1,d.type=Y.Animal,n.push(d);var h=new Je;h.name="Goat",h.shortDescription="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.",h.purchasePrice.push(new be("Coins",2500)),h.canHaveMultiples=!1,h.type=Y.Animal,h.isAvailable=!1,n.push(h);var p=new Je;p.name="Gecko",p.shortDescription="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' velocity.",p.purchasePrice.push(new be("Coins",2500)),p.canHaveMultiples=!1,p.type=Y.Animal,p.isAvailable=!1,n.push(p);var b=new Je;b.name="Shark",b.shortDescription="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.",b.purchasePrice.push(new be("Coins",5e3)),b.canHaveMultiples=!1,b.type=Y.Animal,b.isAvailable=!1,n.push(b);var y=new Je;y.name="Octopus",y.shortDescription="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.",y.purchasePrice.push(new be("Coins",5e3)),y.canHaveMultiples=!1,y.type=Y.Animal,y.isAvailable=!1,n.push(y);var w=new Je;w.name="Caribou",w.shortDescription="The Caribou is a Tundra racing animal that boosts other racers based on stamina.",w.purchasePrice.push(new be("Coins",1e4)),w.canHaveMultiples=!1,w.type=Y.Animal,w.isAvailable=!1,n.push(w);var S=new Je;S.name="Fox",S.shortDescription="The Fox is a Volcanic racing animal that can increase stats at random.",S.purchasePrice.push(new be("Coins",1e4)),S.canHaveMultiples=!1,S.type=Y.Animal,S.isAvailable=!1,n.push(S),e.name="Animals",e.itemList=n,this.globalVar.shop.push(e);var C=new Yr,I=[],W=50,G=new Je;G.name="Apples",G.shortDescription="+1 Acceleration to a single animal",G.purchasePrice.push(new be("Coins",W)),G.canHaveMultiples=!0,G.type=Y.Food,G.infiniteAmount=!0,I.push(G);var Q=new Je;Q.name="Bananas",Q.shortDescription="+1 Speed to a single animal",Q.purchasePrice.push(new be("Coins",W)),Q.canHaveMultiples=!0,Q.type=Y.Food,Q.infiniteAmount=!0,I.push(Q);var te=new Je;te.name="Strawberries",te.shortDescription="+1 Endurance to a single animal",te.purchasePrice.push(new be("Coins",W)),te.canHaveMultiples=!0,te.type=Y.Food,te.infiniteAmount=!0,I.push(te);var de=new Je;de.name="Carrots",de.shortDescription="+1 Power to a single animal",de.purchasePrice.push(new be("Coins",W)),de.canHaveMultiples=!0,de.type=Y.Food,de.infiniteAmount=!0,I.push(de);var ke=new Je;ke.name="Turnips",ke.shortDescription="+1 Focus to a single animal",ke.purchasePrice.push(new be("Coins",W)),ke.canHaveMultiples=!0,ke.type=Y.Food,ke.infiniteAmount=!0,I.push(ke);var Me=new Je;Me.name="Oranges",Me.shortDescription="+1 Adaptability to a single animal",Me.purchasePrice.push(new be("Coins",W)),Me.canHaveMultiples=!0,Me.type=Y.Food,Me.infiniteAmount=!0,I.push(Me);var Ce=new Je;Ce.name="Mangoes",Ce.shortDescription="+1 Breed Level to a single animal",Ce.purchasePrice.push(new be("Coins",500)),Ce.canHaveMultiples=!0,Ce.type=Y.Food,Ce.infiniteAmount=!0,I.push(Ce),C.name="Food",C.itemList=I,this.globalVar.shop.push(C);var Ye=new Yr,vt=[];this.globalVar.trainingOptions.filter(oi=>!oi.isAvailable).forEach(oi=>{var On=new Je;On.name=oi.trainingName,On.shortDescription=oi.getStatGainDescription(),On.purchasePrice.push(new be("Coins",oi.purchasePrice)),On.canHaveMultiples=!1,On.type=Y.Training,(oi.facilitySize===at.Medium||oi.facilitySize===at.Large)&&(On.isAvailable=!1,On.additionalIdentifier=oi.facilitySize.toString()),vt.push(On)}),Ye.name="Trainings",Ye.itemList=vt,this.globalVar.shop.push(Ye);var Rt=new Yr,Zt=[];this.globalVar.animals.forEach(oi=>{oi.availableAbilities.forEach(On=>{if(!On.isAbilityPurchased){var Un=new Je;Un.name=oi.getAnimalType()+" Ability: "+On.name,Un.purchasePrice.push(new be("Coins",On.purchasePrice)),Un.canHaveMultiples=!1,Un.type=Y.Ability,Un.additionalIdentifier=On.name,Un.isAvailable=oi.isAvailable,Zt.push(Un)}})}),Rt.name="Abilities",Rt.itemList=Zt,this.globalVar.shop.push(Rt);var Gt=new Yr,xt=[],pe=new Je;pe.name="Stopwatch",pe.purchasePrice.push(this.getMedalResourceValue(10)),pe.basePurchasePrice.push(this.getMedalResourceValue(10)),pe.quantityMultiplier=2.5,pe.totalShopQuantity=2,pe.canHaveMultiples=!0,pe.type=Y.Specialty,xt.push(pe);var D=new Je;D.name="Animal Handler",D.purchasePrice.push(this.getCoinsResourceValue(2e3)),D.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),D.quantityAdditive=2e3,D.totalShopQuantity=20,D.canHaveMultiples=!0,D.type=Y.Specialty,xt.push(D);var qe=new Je;qe.name="Course Maps",qe.purchasePrice.push(this.getMedalResourceValue(2)),qe.basePurchasePrice.push(this.getMedalResourceValue(2)),qe.quantityMultiplier=2,qe.totalShopQuantity=5,qe.canHaveMultiples=!0,qe.type=Y.Specialty,xt.push(qe);var Lt=new Je;Lt.name="Stockbreeder",Lt.purchasePrice.push(this.getCoinsResourceValue(500)),Lt.basePurchasePrice.push(this.getCoinsResourceValue(500)),Lt.canHaveMultiples=!1,Lt.type=Y.Specialty,xt.push(Lt);var an=new Je;an.name="Team Manager",an.purchasePrice.push(this.getMedalResourceValue(3)),an.basePurchasePrice.push(this.getMedalResourceValue(3)),an.canHaveMultiples=!0,an.quantityMultiplier=2,an.totalShopQuantity=20,an.type=Y.Specialty,xt.push(an);var bn=new Je;bn.name="Scouts",bn.purchasePrice.push(this.getCoinsResourceValue(1e4)),bn.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),bn.canHaveMultiples=!1,bn.type=Y.Specialty,xt.push(bn);var dt=new Je;dt.name="Money Mark",dt.purchasePrice.push(this.getCoinsResourceValue(500)),dt.basePurchasePrice.push(this.getCoinsResourceValue(500)),dt.canHaveMultiples=!1,dt.type=Y.Specialty,xt.push(dt);var rn=new Je;rn.name="National Races",rn.purchasePrice.push(this.getCoinsResourceValue(1e4)),rn.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),rn.canHaveMultiples=!1,rn.type=Y.Specialty,xt.push(rn);var pt,sn=new Je;sn.name="International Races",sn.purchasePrice.push(this.getCoinsResourceValue(5e4)),sn.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),sn.canHaveMultiples=!1,sn.isAvailable=!1,sn.type=Y.Specialty,xt.push(sn),(pt=new Je).name="Incubator Upgrade Lv1",pt.purchasePrice.push(this.getCoinsResourceValue(5e3)),pt.basePurchasePrice.push(this.getCoinsResourceValue(5e3)),pt.canHaveMultiples=!1,pt.isAvailable=!1,pt.type=Y.Specialty,xt.push(pt),(pt=new Je).name="Incubator Upgrade Lv2",pt.purchasePrice.push(this.getCoinsResourceValue(1e4)),pt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),pt.canHaveMultiples=!1,pt.isAvailable=!1,pt.type=Y.Specialty,xt.push(pt),(pt=new Je).name="Incubator Upgrade Lv3",pt.purchasePrice.push(this.getCoinsResourceValue(25e3)),pt.basePurchasePrice.push(this.getCoinsResourceValue(25e3)),pt.canHaveMultiples=!1,pt.isAvailable=!1,pt.type=Y.Specialty,xt.push(pt),(pt=new Je).name="Incubator Upgrade Lv4",pt.purchasePrice.push(this.getCoinsResourceValue(5e4)),pt.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),pt.canHaveMultiples=!1,pt.isAvailable=!1,pt.type=Y.Specialty,xt.push(pt);var Cn=new Je;Cn.name="Whistle",Cn.purchasePrice.push(this.getCoinsResourceValue(2500)),Cn.basePurchasePrice.push(this.getCoinsResourceValue(2500)),Cn.totalShopQuantity=1,Cn.canHaveMultiples=!1,Cn.isAvailable=!1,Cn.type=Y.Specialty,xt.push(Cn);var Kn=new Je;Kn.name="Golden Whistle",Kn.purchasePrice.push(this.getCoinsResourceValue(15e3)),Kn.basePurchasePrice.push(this.getCoinsResourceValue(15e3)),Kn.totalShopQuantity=1,Kn.canHaveMultiples=!1,Kn.isAvailable=!1,Kn.type=Y.Specialty,xt.push(Kn),Gt.name="Specialty",Gt.itemList=xt,this.globalVar.shop.push(Gt);var ar=new Yr,_n=[],ai=new Je;ai.name=this.getEquipmentName(Xe.headband),ai.shortDescription=this.getEquipmentDescription(ai.name),ai.purchasePrice.push(this.getCoinsResourceValue(1e3)),ai.canHaveMultiples=!0,ai.infiniteAmount=!0,ai.type=Y.Equipment,_n.push(ai);var si=new Je;si.name=this.getEquipmentName(Xe.pendant),si.shortDescription=this.getEquipmentDescription(si.name),si.purchasePrice.push(this.getCoinsResourceValue(1e3)),si.canHaveMultiples=!0,si.infiniteAmount=!0,si.type=Y.Equipment,_n.push(si);var Pi=new Je;Pi.name=this.getEquipmentName(Xe.blinders),Pi.shortDescription=this.getEquipmentDescription(Pi.name),Pi.purchasePrice.push(this.getCoinsResourceValue(1e3)),Pi.canHaveMultiples=!0,Pi.infiniteAmount=!0,Pi.type=Y.Equipment,_n.push(Pi);var Ei=new Je;Ei.name=this.getEquipmentName(Xe.quickSnack),Ei.shortDescription=this.getEquipmentDescription(Ei.name),Ei.purchasePrice.push(this.getCoinsResourceValue(1e3)),Ei.canHaveMultiples=!0,Ei.infiniteAmount=!0,Ei.type=Y.Equipment,_n.push(Ei);var Si=new Je;Si.name=this.getEquipmentName(Xe.redBaton),Si.shortDescription=this.getEquipmentDescription(Si.name),Si.purchasePrice.push(this.getCoinsResourceValue(2500)),Si.canHaveMultiples=!0,Si.infiniteAmount=!0,Si.type=Y.Equipment,_n.push(Si);var Mn=new Je;Mn.name=this.getEquipmentName(Xe.blueBaton),Mn.shortDescription=this.getEquipmentDescription(Mn.name),Mn.purchasePrice.push(this.getCoinsResourceValue(2500)),Mn.canHaveMultiples=!0,Mn.infiniteAmount=!0,Mn.type=Y.Equipment,_n.push(Mn);var it=new Je;it.name=this.getEquipmentName(Xe.violetBaton),it.shortDescription=this.getEquipmentDescription(it.name),it.purchasePrice.push(this.getCoinsResourceValue(2500)),it.canHaveMultiples=!0,it.infiniteAmount=!0,it.type=Y.Equipment,_n.push(it);var fi=new Je;fi.name=this.getEquipmentName(Xe.orangeBaton),fi.shortDescription=this.getEquipmentDescription(fi.name),fi.purchasePrice.push(this.getCoinsResourceValue(2500)),fi.canHaveMultiples=!0,fi.infiniteAmount=!0,fi.type=Y.Equipment,_n.push(fi);var on=new Je;on.name=this.getEquipmentName(Xe.greenBaton),on.shortDescription=this.getEquipmentDescription(on.name),on.purchasePrice.push(this.getCoinsResourceValue(2500)),on.canHaveMultiples=!0,on.infiniteAmount=!0,on.type=Y.Equipment,_n.push(on);var Wn=new Je;Wn.name=this.getEquipmentName(Xe.yellowBaton),Wn.shortDescription=this.getEquipmentDescription(Wn.name),Wn.purchasePrice.push(this.getCoinsResourceValue(2500)),Wn.canHaveMultiples=!0,Wn.infiniteAmount=!0,Wn.type=Y.Equipment,_n.push(Wn),ar.name="Equipment",ar.itemList=_n,this.globalVar.shop.push(ar)}getEquipmentName(e){return e===Xe.headband?"Headband":e===Xe.pendant?"Pendant":e===Xe.blinders?"Blinders":e===Xe.quickSnack?"Quick Snack":e===Xe.carrotOnAStick?"Carrot on a Stick":e===Xe.redBaton?"Red Baton":e===Xe.blueBaton?"Blue Baton":e===Xe.violetBaton?"Violet Baton":e===Xe.yellowBaton?"Yellow Baton":e===Xe.greenBaton?"Green Baton":e===Xe.orangeBaton?"Orange Baton":e===Xe.scaryMask?"Scary Mask":e===Xe.runningShoes?"Running Shoes":e===Xe.incense?"Incense":e===Xe.athleticTape?"Athletic Tape":""}getEquipmentEnum(e){return"Headband"===e?Xe.headband:"Pendant"===e?Xe.pendant:"Blinders"===e?Xe.blinders:"Quick Snack"===e?Xe.quickSnack:"Carrot on a Stick"===e?Xe.carrotOnAStick:"Red Baton"===e?Xe.redBaton:"Blue Baton"===e?Xe.blueBaton:"Violet Baton"===e?Xe.violetBaton:"Yellow Baton"===e?Xe.yellowBaton:"Green Baton"===e?Xe.greenBaton:"Orange Baton"===e?Xe.orangeBaton:"Scary Mask"===e?Xe.scaryMask:"Running Shoes"===e?Xe.runningShoes:"Incense"===e?Xe.incense:"Athletic Tape"===e?Xe.athleticTape:Xe.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var n=new Vm;if(n.barnNumber=1,n.isLocked=!1,n.size=at.Small,n.purchasePrice=0,n.facilityUpgradePrice=500,n.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(o=>o.type===q.Horse);null!=r&&(r.associatedBarnNumber=n.barnNumber)}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.globalVar.barns.push(n);for(var a=2;a<=15;a++){var s=new Vm;s.barnNumber=a,s.isLocked=!0,s.purchasePrice=500*(a-1),s.facilityUpgradePrice=500,s.size=at.Small,this.globalVar.barns.push(s)}}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Oe.AgilityCourse))}IncreaseCircuitRank(){var e=this.globalVar.circuitRank,n=e.replace(/([A-Z])[^A-Z]*$/,function(c){var u=c.charCodeAt(0);return 65===u?String.fromCharCode(u)+"Z":String.fromCharCode(--u)}),r=!1;this.utilityService.getNumericValueOfCircuitRank(this.globalVar.monoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.duoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.rainbowRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),r&&(this.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalVar.circuitRank=n;var l=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),l}IncreaseLocalRaceRank(e){var n="";e===$t.Mono&&(n=this.globalVar.monoRank),e===$t.Duo&&(n=this.globalVar.duoRank),e===$t.Rainbow&&(n=this.globalVar.rainbowRank);var r=n.replace(/([A-Z])[^A-Z]*$/,function(a){var s=a.charCodeAt(0);return 65===s?String.fromCharCode(s)+"Z":String.fromCharCode(--s)});e===$t.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===$t.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===$t.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank))}increaseGrandPrixRaceRank(){if(null!=this.globalVar.eventRaceData){var n=this.globalVar.eventRaceData.rank.replace(/([A-Z])[^A-Z]*$/,function(r){var a=r.charCodeAt(0);return 65===a?String.fromCharCode(a)+"Z":String.fromCharCode(--a)});this.globalVar.eventRaceData.rank=n,this.initialGrandPrixSetup(this.globalVar.eventRaceData.rank),this.globalVar.eventRaceData.initialSetupComplete=!0,this.globalVar.notifications.isEventRaceNowActive=!0}}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),n=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e&&(this.globalVar.unlockables.set("monoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,n=["Mono Race","A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, which means it's time to make some upgrades. Gain Facility Level points from winning these races that increase your Diminishing Returns max value."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Monkey"),3===e){var r=this.globalVar.animals.find(G=>G.type===q.Monkey);if(null!=r&&(r.isAvailable=!0,this.unlockAnimalAbilities(r),this.unlockOtherRaceCourseTypeAnimals(r.raceCourseType),null!=(a=this.globalVar.animalDecks.find(G=>G.isPrimaryDeck)))){var s=!1;a.selectedAnimals.forEach(G=>{G.raceCourseType===(null==r?void 0:r.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(r)}n=["Monkey","The Monkey is a powerful Mountain climbing animal capable of slowing its competitors and leaping to victory."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+"Coaching"}else if(4===e){if(this.globalVar.unlockables.set("coaching",!0),null!=(o=this.globalVar.shop.find(G=>"Specialty"===G.name))){var l=o.itemList.find(G=>"Whistle"===G.name);null!=l&&(l.isAvailable=!0)}n=["Coaching","Take charge of your animal's training by giving them some coaching yourself. Visit a barn with an animal assigned and select 'Coach' to get started."];var c=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+c+" Coins"}else if(5===e)c=500,null==(u=this.globalVar.resources.find(Q=>"Coins"===Q.name))?this.globalVar.resources.push(new be("Coins",c)):u.amount+=c,n=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations";else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),n=["Barn Specializations","As your training facility grows, so should your barns. At barn level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e)c=1,null==(u=this.globalVar.resources.find(te=>"1 Headband"===te.name))?this.globalVar.resources.push(new be("Headband",c,Y.Equipment)):u.amount+=c,n=[c+" Headband","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Dolphin";else if(10===e){var d=this.globalVar.animals.find(Q=>Q.type===q.Dolphin);null!=d&&(d.isAvailable=!0,this.unlockAnimalAbilities(d),this.unlockOtherRaceCourseTypeAnimals(d.raceCourseType),null!=(a=this.globalVar.animalDecks.find(te=>te.isPrimaryDeck))&&(s=!1,a.selectedAnimals.forEach(de=>{de.raceCourseType===(null==d?void 0:d.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(d))),n=["Dolphin","The Dolphin is a graceful Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay."],c=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+c+" Stat Increasing Food"}else if(12===e)this.increaseAllFood(c=10),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(13)+"Grand Prix";else if(13===e){this.globalVar.unlockables.set("grandPrix",!0);var h=this.globalVar.animalDecks.find(G=>G.isPrimaryDeck);null!=h&&(h.isEventDeck=!0),n=["Grand Prix","Now that you've climbed the ranks and your racing team has turned some heads, you've received an invite to the Grand Prix invitational. Twice per week, a marathon style race runs over multiple days. Check the 'Event Races' tab to see more info."];var p=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Attraction Specialization"}else if(15===e)this.globalVar.unlockables.set("attractionSpecialization",!0),n=["Attraction Specialization",this.getSpecializationDescription("Attraction")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+" 1 Pendant";else if(16===e)c=1,null==(u=this.globalVar.resources.find(te=>"Pendant"===te.name))?this.globalVar.resources.push(new be("Pendant",c,Y.Equipment)):u.amount+=c,n=[c+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+"Barn Row 2";else if(18===e)this.globalVar.unlockables.set("barnRow2",!0),n=["Barn Row 2",""],p=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+p+" Renown";else if(20===e)p=1,null==(b=this.globalVar.resources.find(te=>"Renown"===te.name))?this.globalVar.resources.push(new be("Renown",p)):b.amount+=p,n=[p+" Renown",""],c=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+c+" Stat Increasing Food";else if(22===e)this.increaseAllFood(c=50),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Research Center Specialization";else if(25===e)this.globalVar.unlockables.set("researchCenterSpecialization",!0),n=["Research Center Specialization",this.getSpecializationDescription("Research Center")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races";else if(27===e){var o;if(this.globalVar.unlockables.set("duoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(o=this.globalVar.shop.find(Q=>"Specialty"===Q.name))){var y=o.itemList.find(Q=>"Incubator Upgrade Lv1"===Q.name);null!=y&&(y.isAvailable=!0)}n=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."];var w=2500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+w+" Coins"}else if(30===e){var S=2500;null==(u=this.globalVar.resources.find(te=>"Coins"===te.name))?this.globalVar.resources.push(new be("Coins",S)):u.amount+=S,n=[S+" Coins",""],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+c+" Mangoes"}else if(32===e)c=1,null==(u=this.globalVar.resources.find(te=>"1 Blue Baton"===te.name))?this.globalVar.resources.push(new be("Blue Baton",c,Y.Equipment)):u.amount+=c,n=[c+" Blue Baton","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Dolphin";else if(33===e)c=20,null==(u=this.globalVar.resources.find(te=>"Mangoes"===te.name))?this.globalVar.resources.push(new be("Mangoes",c,Y.Food)):u.amount+=c,n=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var C=this.globalVar.animals.find(Q=>Q.type===q.Penguin);null!=C&&(C.isAvailable=!0,this.unlockAnimalAbilities(C),this.unlockOtherRaceCourseTypeAnimals(C.raceCourseType),null!=(a=this.globalVar.animalDecks.find(te=>te.isPrimaryDeck))&&(s=!1,a.selectedAnimals.forEach(de=>{de.raceCourseType===(null==C?void 0:C.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(C))),n=["Penguin","The Penguin is a Tundra racing animal that can slide carefully or recklessly."],w=3500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(37)+w+" Coins"}else if(37===e)S=3500,null==(u=this.globalVar.resources.find(te=>"Coins"===te.name))?this.globalVar.resources.push(new be("Coins",S)):u.amount+=S,n=[S+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals";else if(38===e)null==(u=this.globalVar.resources.find(Q=>"Medals"===Q.name))?this.globalVar.resources.push(new be("Medals",5)):u.amount+=5,n=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 3";else if(40===e)this.globalVar.unlockables.set("barnRow3",!0),n=["Barn Row 3",""],c=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+c+" Stat Increasing Food";else if(43===e)this.increaseAllFood(c=250),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var a,W=this.globalVar.animals.find(Q=>Q.type===q.Salamander);null!=W&&(W.isAvailable=!0,this.unlockAnimalAbilities(W),this.unlockOtherRaceCourseTypeAnimals(W.raceCourseType),null!=(a=this.globalVar.animalDecks.find(te=>te.isPrimaryDeck))&&(s=!1,a.selectedAnimals.forEach(de=>{de.raceCourseType===(null==W?void 0:W.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(W))),n=["Salamander","The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration."],p=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+p+" Renown"}else if(47===e)p=10,null==(b=this.globalVar.resources.find(de=>"Renown"===de.name))?this.globalVar.resources.push(new be("Renown",p)):b.amount+=p,n=[p+" Renown",""],S=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+S+" Coins";else if(50===e)w=15e3,null==(u=this.globalVar.resources.find(te=>"Coins"===te.name))?this.globalVar.resources.push(new be("Coins",w)):u.amount+=w,n=[w+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e)this.globalVar.unlockables.set("rainbowRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,n=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Amethyst Orb";else if(55===e)this.globalVar.resources.push(new be("Amethyst Orb",1,Y.Equipment)),this.globalVar.unlockables.set("orbs",!0),n=["Amethyst Orb","You receive a glowing violet orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 4";else if(58===e)this.globalVar.unlockables.set("barnRow4",!0),n=["Barn Row 4",""],p=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+"Sapphire Orb";else if(60===e)this.globalVar.resources.push(new be("Sapphire Orb",1,Y.Equipment)),n=["Sapphire Orb","You receive a glowing blue orb. What it does is a mystery."],c=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+c+" Mangoes";else if(62===e){var u;c=100,null==(u=this.globalVar.resources.find(te=>"Mangoes"===te.name))?this.globalVar.resources.push(new be("Mangoes",c,Y.Food)):u.amount+=c,n=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Amber Orb"}else if(65===e)this.globalVar.resources.push(new be("Amber Orb",1,Y.Equipment)),n=["Amber Orb","You receive a glowing orange orb. What it does is a mystery."],c=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+c+" Renown";else if(67===e){var b;p=25,null==(b=this.globalVar.resources.find(te=>"Renown"===te.name))?this.globalVar.resources.push(new be("Renown",p)):b.amount+=p,n=[p+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Topaz Orb"}else 70===e?(this.globalVar.resources.push(new be("Topaz Orb",1,Y.Equipment)),n=["Topaz Orb","You receive a glowing yellow orb. What it does is a mystery."],c=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+c+" Stat Increasing Food Items"):73===e?(this.increaseAllFood(c=500),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Emerald Orb"):75===e?(this.globalVar.resources.push(new be("Emerald Orb",1,Y.Equipment)),n=["Emerald Orb","You receive a glowing green orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Ruby Orb"):78===e&&(this.globalVar.resources.push(new be("Ruby Orb",1,Y.Equipment)),n=["Ruby Orb","You receive a glowing red orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription="More Coming Soon!");return n}increaseAllFood(e){var n=this.globalVar.resources.find(c=>"Apples"===c.name);null==n?this.globalVar.resources.push(new be("Apples",e,Y.Food)):n.amount+=e;var r=this.globalVar.resources.find(c=>"Bananas"===c.name);null==r?this.globalVar.resources.push(new be("Bananas",e,Y.Food)):r.amount+=e;var a=this.globalVar.resources.find(c=>"Oranges"===c.name);null==a?this.globalVar.resources.push(new be("Oranges",e,Y.Food)):a.amount+=e;var s=this.globalVar.resources.find(c=>"Strawberries"===c.name);null==s?this.globalVar.resources.push(new be("Strawberries",e,Y.Food)):s.amount+=e;var o=this.globalVar.resources.find(c=>"Carrots"===c.name);null==o?this.globalVar.resources.push(new be("Carrots",e,Y.Food)):o.amount+=e;var l=this.globalVar.resources.find(c=>"Turnips"===c.name);null==l?this.globalVar.resources.push(new be("Turnips",e,Y.Food)):l.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var n=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,s=15,o=100,l=1.125,c=80*n,u=1.1,d=.9,b=3;"Z"===e?b=1:"Y"==e&&(b=2);for(var y=0;y<b;y++){var w=[],S="C"+n+y;if(n<=2){c=-37;var C=new In;C.courseType=H.Flatland,2===n?0===y?C.terrain=new gr($e.Sunny):1===y&&(C.terrain=new gr($e.Rainy)):C.terrain=new gr($e.Sunny),C.distance=Math.round(o*l**n+c),w.push(C)}else if(n<=9){c=3===n?20*n:40*n,(I=[]).push(H.Flatland),I.push(H.Mountain);var W=this.getCourseTypeInRandomOrderSeeded(I,S+"cl1"),G=this.utilityService.getRandomSeededNumber(20,80,S+"l1d"),Me=(Q=this.utilityService.getRandomSeededNumber(20,80,S+"l2d"))*(de=a/(G+Q));(ke=G*de)<s?(ke=0,Me=a):Me<s&&(Me=0,ke=a),ke>0&&((Ce=new In).courseType=W[0],Ce.distance=Math.round(o*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l1r")*(ke/a),Ce.terrain=this.getRandomTerrain(Ce.courseType,S+"lt1d"),w.push(Ce)),Me>0&&((Ye=new In).courseType=W[1],Ye.distance=Math.round(o*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l2r")*(Me/a),Ye.terrain=this.getRandomTerrain(Ye.courseType,S+"lt2d"),w.push(Ye))}else{s=10,10===n?c=50*n:11===n&&(c=60*n);var I=[];n<=43?(I.push(H.Flatland),I.push(H.Mountain),I.push(H.Ocean)):n<=51?(I.push(H.Flatland),I.push(H.Mountain),I.push(H.Ocean),I.push(H.Tundra)):(I.push(H.Flatland),I.push(H.Mountain),I.push(H.Ocean),I.push(H.Tundra),I.push(H.Volcanic)),W=this.getCourseTypeInRandomOrderSeeded(I,S+"courses1"),G=this.utilityService.getRandomSeededNumber(20,80,S+"l1d");var de,ke,Ce,Ye,Q=this.utilityService.getRandomSeededNumber(20,80,S+"l2d"),vt=this.utilityService.getRandomSeededNumber(20,80,S+"l3d"),Rt=(Me=Q*(de=a/(G+Q+vt)),vt*de);if((ke=G*de)<s?(Me+=ke/2,Rt+=ke/2,ke=0):Me<s?(ke+=Me/2,Rt+=Me/2,Me=0):Rt<s&&(ke+=Rt/2,Me+=Rt/2,Rt=0),ke>0&&((Ce=new In).courseType=W[0],Ce.distance=Math.round(o*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l1r")*(ke/a),Ce.terrain=this.getRandomTerrain(Ce.courseType,S+"tl1d"),w.push(Ce)),Me>0&&((Ye=new In).courseType=W[1],Ye.distance=Math.round(o*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l2r")*(Me/a),Ye.terrain=this.getRandomTerrain(Ye.courseType,S+"tl2d"),w.push(Ye)),Rt>0){var Zt=new In;Zt.courseType=W[2],Zt.distance=Math.round(o*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l3r")*(Rt/a),Zt.terrain=this.getRandomTerrain(Zt.courseType,S+"tl3d"),w.push(Zt)}}var Gt=0;w.forEach(xt=>{Gt+=xt.distance}),w.forEach(xt=>{xt.pathData=this.GenerateRaceLegPaths(xt,Gt)}),this.globalVar.circuitRaces.push(new hi(w,e,!0,r,Gt,a,this.GenerateCircuitRaceRewards(e),void 0,void 0,Fe.circuit)),r+=1}}reorganizeLegsByDeckOrder(e,n){return n.isCourseOrderActive?e.sort((r,a)=>n.courseTypeOrder.indexOf(r.courseType)-n.courseTypeOrder.indexOf(a.courseType)):e}getCourseTypeInRandomOrder(e){for(var n=[],r=e.length,a=0;a<r;a++){var s=this.utilityService.getRandomInteger(1,e.length);n.push(e[s-1]),e=e.filter(o=>o!==e[s-1])}return n}getCourseTypeInRandomOrderSeeded(e,n="seeded"){for(var r=[],a=e.length,s=0;s<a;s++){var o=this.utilityService.getRandomSeededInteger(1,e.length,n);r.push(e[o-1]),e=e.filter(l=>l!==e[o-1])}return r}getRandomTerrain(e,n){var r=[];e===H.Flatland||e===H.Mountain?(r.push($e.Sunny),r.push($e.Rainy),r.push($e.Stormy),r.push($e.Torrid),r.push($e.Snowfall)):e===H.Ocean?(r.push($e.Sunny),r.push($e.Maelstrom),r.push($e.Stormy),r.push($e.Snowfall)):e===H.Tundra?(r.push($e.Sunny),r.push($e.Hailstorm),r.push($e.Stormy),r.push($e.Snowfall)):e===H.Volcanic&&(r.push($e.Sunny),r.push($e.Ashfall),r.push($e.Stormy),r.push($e.Torrid));var a;return a=null!=n?this.utilityService.getRandomSeededInteger(1,r.length,n):this.utilityService.getRandomInteger(1,r.length),new gr(r[a-1])}getRandomGrandPrixWeatherCluster(e,n){var r=[];r.push(Ai.clearSkies),r.push(Ai.coldSpell),r.push(Ai.inclementWeather);var s=r[(null!=e?this.utilityService.getRandomSeededInteger(1,r.length,e):this.utilityService.getRandomInteger(1,r.length))-1];if(this.globalVar.eventRaceData.animalData.length>0){var o=.2,l=this.globalVar.modifiers.find(c=>"weatherMoraleBoostModifier"===c.text);void 0!==l&&(o=l.value),this.globalVar.eventRaceData.animalData.forEach(c=>{var u=this.globalVar.animals.find(d=>d.type===c.associatedAnimalType);void 0!==u&&(void 0!==n&&this.animalGainsMoraleBoostFromWeather(u.raceCourseType,n)&&(c.morale-=+o),this.animalGainsMoraleBoostFromWeather(u.raceCourseType,s)&&(c.morale+=+o))})}return s}animalGainsMoraleBoostFromWeather(e,n){var r=!1;return(n===Ai.clearSkies&&(e===H.Volcanic||e===H.Flatland)||n===Ai.inclementWeather&&e===H.Ocean||n===Ai.coldSpell&&(e===H.Tundra||e===H.Mountain))&&(r=!0),r}getRandomGrandPrixTerrainFromWeatherCluster(e,n,r){var a=[];e===Ai.clearSkies?(a.push($e.Sunny),a.push($e.Torrid),a.push($e.Ashfall)):e===Ai.coldSpell?(a.push($e.Snowfall),a.push($e.Hailstorm),a.push($e.Sunny)):e===Ai.inclementWeather&&(a.push($e.Rainy),a.push($e.Stormy),a.push($e.Maelstrom),a.push($e.Hailstorm)),n===H.Flatland&&(a=a.filter(o=>o!==$e.Ashfall&&o!==$e.Hailstorm&&o!==$e.Maelstrom)),n===H.Mountain&&(a=a.filter(o=>o!==$e.Ashfall&&o!==$e.Hailstorm&&o!==$e.Maelstrom)),n===H.Ocean&&(a=a.filter(o=>o!==$e.Ashfall&&o!==$e.Hailstorm&&o!==$e.Rainy&&o!==$e.Torrid)),n===H.Tundra&&(a=a.filter(o=>o!==$e.Ashfall&&o!==$e.Rainy&&o!==$e.Maelstrom&&o!==$e.Torrid)),n===H.Volcanic&&(a=a.filter(o=>o!==$e.Snowfall&&o!==$e.Hailstorm&&o!==$e.Maelstrom));var s;return s=null!=r?this.utilityService.getRandomSeededInteger(1,a.length,r):this.utilityService.getRandomInteger(1,a.length),new gr(a[s-1])}stopGrandPrixRace(){this.globalVar.eventRaceData.animalData.forEach(e=>{e.isCurrentlyRacing=!1}),this.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalVar.eventRaceData.isRunning=!1,this.globalVar.eventRaceData.overallTimeCounter-=this.globalVar.eventRaceData.segmentTimeCounter,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}GetCircuitRankValue(e){for(var n=1;e.length>1;){var r=e.length;n+=26,(e=e.substring(1)).length>=r&&(e="")}return n+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var n=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new be("Coins",Math.round(50*1.01**n))),l.push(new be("Renown",parseFloat((1.03*1.03**n/100).toFixed(3)))),l}GenerateLocalRaceRewards(e){var n=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new be("Coins",Math.round(10*1.005**n))),l.push(new be("Renown",parseFloat((1.01*1.015**n/100).toFixed(3)))),l}GenerateMonoRaceRewards(e){var n=[];n.push(new be("Facility Level",1,Y.Progression));var r=this.GetCircuitRankValue(e);return n.push(new be("Coins",Math.round(30*1.01**r))),n.push(new be("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateDuoRaceRewards(e){var n=[];n.push(new be("Research Level",1,Y.Progression));var r=this.GetCircuitRankValue(e);return n.push(new be("Coins",Math.round(100*1.01**r))),n.push(new be("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateRainbowRaceRewards(e){var n=[];n.push(new be("Talent Points",1,Y.Progression));var r=this.GetCircuitRankValue(e);return n.push(new be("Coins",Math.round(250*1.01**r))),n.push(new be("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank)}GenerateMonoRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(w=>w.localRaceType!==$t.Mono),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=100*n,d=[],h=new In;if(1===n)h.courseType=H.Flatland;else{var p=[];n<9?(p.push(H.Flatland),p.push(H.Mountain)):n<40?(p.push(H.Flatland),p.push(H.Mountain),p.push(H.Ocean)):n<50?(p.push(H.Flatland),p.push(H.Mountain),p.push(H.Ocean),p.push(H.Tundra)):(p.push(H.Flatland),p.push(H.Mountain),p.push(H.Ocean),p.push(H.Tundra),p.push(H.Volcanic)),null!=this.globalVar.lastMonoRaceCourseType&&n>2&&(p=p.filter(w=>w!==this.globalVar.lastMonoRaceCourseType));var b=this.getCourseTypeInRandomOrderSeeded(p,"monoseed"+e+n);h.courseType=b[0]}h.terrain=this.getRandomTerrain(h.courseType,"monoseed"+e+n),h.distance=Math.round((155*1.155**n+l)*this.utilityService.getRandomSeededNumber(.9,1.1)),d.push(h);var y=h.distance;d.forEach(w=>{w.pathData=this.GenerateRaceLegPaths(w,y)}),this.globalVar.localRaces.push(new hi(d,e,!1,r,y,90,this.GenerateMonoRaceRewards(e),$t.Mono,void 0,Fe.special)),r+=1}}GenerateDuoRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(S=>S.localRaceType!==$t.Duo),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,u=[],d=[];n<=10?(d.push(H.Flatland),d.push(H.Mountain),d.push(H.Ocean)):n<=20?(d.push(H.Flatland),d.push(H.Mountain),d.push(H.Ocean),d.push(H.Tundra)):(d.push(H.Flatland),d.push(H.Mountain),d.push(H.Ocean),d.push(H.Tundra),d.push(H.Volcanic));var h=this.getCourseTypeInRandomOrderSeeded(d,"duooseed"+e+n),p=this.utilityService.getRandomSeededNumber(.8,1.2),b=new In;b.courseType=h[0],b.distance=Math.round(6500*1.1**n*p*.5),b.terrain=this.getRandomTerrain(b.courseType,"duoseedl1"+e+n),u.push(b);var y=new In;y.courseType=h[1],y.distance=Math.round(6500*1.1**n*p*.5),y.terrain=this.getRandomTerrain(y.courseType,"duoseedl2"+e+n),u.push(y);var w=b.distance+y.distance;u.forEach(S=>{S.pathData=this.GenerateRaceLegPaths(S,w)}),this.globalVar.localRaces.push(new hi(u,e,!1,r,w,80,this.GenerateDuoRaceRewards(e),$t.Duo,void 0,Fe.special)),r+=1}}GenerateRainbowRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(W=>W.localRaceType!==$t.Rainbow),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,s=1e5,o=1.135,u=[],d=[];d.push(H.Flatland),d.push(H.Mountain),d.push(H.Ocean),d.push(H.Tundra),d.push(H.Volcanic);var h=this.getCourseTypeInRandomOrderSeeded(d,"rainbow"+e+n),p=this.utilityService.getRandomSeededNumber(.8,1.2),b=new In;b.courseType=h[0],b.distance=Math.round(s*o**n*p*.2),b.terrain=this.getRandomTerrain(b.courseType,"rainbowl1"+e+n),u.push(b);var y=new In;y.courseType=h[1],y.distance=Math.round(s*o**n*p*.2),y.terrain=this.getRandomTerrain(y.courseType,"rainbowl2"+e+n),u.push(y);var w=new In;w.courseType=h[2],w.distance=Math.round(s*o**n*p*.2),w.terrain=this.getRandomTerrain(w.courseType,"rainbowl3"+e+n),u.push(w);var S=new In;S.courseType=h[3],S.distance=Math.round(s*o**n*p*.2),S.terrain=this.getRandomTerrain(S.courseType,"rainbowl4"+e+n),u.push(S);var C=new In;C.courseType=h[4],C.distance=Math.round(s*o**n*p*.2),C.terrain=this.getRandomTerrain(C.courseType,"rainbowl5"+e+n),u.push(C);var I=b.distance+y.distance+w.distance+S.distance+C.distance;u.forEach(W=>{W.pathData=this.GenerateRaceLegPaths(W,I)}),this.globalVar.localRaces.push(new hi(u,e,!1,r,I,120,this.GenerateRainbowRaceRewards(e),$t.Rainbow,void 0,Fe.special)),r+=1}}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),n=60,r=15,a=90,s=1.125,o=40*e;e>=11&&(o=70*e);var l=1.05,c=.8,h=[];if(e<=2){var p=new In;p.courseType=H.Flatland,p.terrain=this.getRandomTerrain(p.courseType),p.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l)),h.push(p)}else if(e<=10){(b=[]).push(H.Flatland),b.push(H.Mountain);var y=this.getCourseTypeInRandomOrder(b),w=this.utilityService.getRandomNumber(10,90),G=(S=this.utilityService.getRandomNumber(10,90))*(I=n/(w+S));(W=w*I)<r?(W=0,G=n):G<r&&(G=0,W=n),W>0&&((Q=new In).courseType=y[0],Q.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(W/n),Q.terrain=this.getRandomTerrain(Q.courseType),h.push(Q)),G>0&&((te=new In).courseType=y[1],te.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(G/n),te.terrain=this.getRandomTerrain(te.courseType),h.push(te))}else{r=10;var b=[];e<35?(b.push(H.Flatland),b.push(H.Mountain),b.push(H.Ocean)):e<45?(b.push(H.Flatland),b.push(H.Mountain),b.push(H.Ocean),b.push(H.Tundra)):(b.push(H.Flatland),b.push(H.Mountain),b.push(H.Ocean),b.push(H.Tundra),b.push(H.Volcanic)),y=this.getCourseTypeInRandomOrder(b),w=this.utilityService.getRandomNumber(10,90);var I,W,Q,te,S=this.utilityService.getRandomNumber(10,90),de=this.utilityService.getRandomNumber(10,90),ke=(G=S*(I=n/(w+S+de)),de*I);if((W=w*I)<r?(G+=W/2,ke+=W/2,W=0):G<r?(W+=G/2,ke+=G/2,G=0):ke<r&&(W+=ke/2,G+=ke/2,ke=0),W>0&&((Q=new In).courseType=y[0],Q.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(W/n),Q.terrain=this.getRandomTerrain(Q.courseType),h.push(Q)),G>0&&((te=new In).courseType=y[1],te.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(G/n),te.terrain=this.getRandomTerrain(te.courseType),h.push(te)),ke>0){var Me=new In;Me.courseType=y[2],Me.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(ke/n),Me.terrain=this.getRandomTerrain(Me.courseType),h.push(Me)}}var Ce=0,Ye=this.globalVar.animalDecks.find(vt=>vt.isPrimaryDeck);return void 0!==Ye&&(h=this.reorganizeLegsByDeckOrder(h,Ye)),h.forEach(vt=>{Ce+=vt.distance}),h.forEach(vt=>{vt.pathData=this.GenerateRaceLegPaths(vt,Ce)}),new hi(h,this.globalVar.circuitRank,!1,1,Ce,n,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),$t.Free,void 0,Fe.circuit)}getTotalSegments(e){return(null==this.globalVar.circuitRaces||0===this.globalVar.circuitRaces.length)&&this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),Math.ceil(this.globalVar.eventRaceData.grandPrixTimeLength/this.globalVar.eventRaceData.segmentTime),e/this.utilityService.getClosestWholeNumber(this.globalVar.circuitRaces[0].length*(this.globalVar.eventRaceData.segmentTime/this.globalVar.circuitRaces[0].timeToComplete),e)}initialGrandPrixSetup(e){this.globalVar.eventRaceData=new Vi,this.globalVar.eventRaceData.rank=e;var n=this.utilityService.getNumericValueOfCircuitRank(e);this.globalVar.eventRaceData.totalDistance=5e8*n,this.globalVar.eventRaceData.currentRaceSegmentCount=0,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.totalSegments=this.getTotalSegments(this.globalVar.eventRaceData.totalDistance),this.globalVar.eventRaceData.remainingRewards=this.globalVar.eventRaceData.totalRewards=this.getGrandPrixRewardCount(),this.globalVar.eventRaceData.animalData=[],this.globalVar.animals.forEach(r=>{this.globalVar.eventRaceData.animalData.push(new sD(r.type))}),this.globalVar.eventRaceData.weatherCluster=this.getRandomGrandPrixWeatherCluster(this.getEventStartDateTime().toString())}animalCanRaceGrandPrix(e){var n=!0,r=this.getBreedLevelRequiredForGrandPrix();e.breedLevel<r&&(n=!1);var a=this.globalVar.eventRaceData.animalData.find(s=>s.associatedAnimalType===e.type);return null!=a&&a.exhaustionStatReduction<.5&&(n=!1),n}getGrandPrixRacingAnimal(){var e=new Tt,n=this.globalVar.animalDecks.find(a=>a.isEventDeck);if(void 0!==n){var r=n.selectedAnimals.filter(a=>this.animalCanRaceGrandPrix(a));r.length>0&&(e=r[0])}return this.globalVar.eventRaceData.animalData.forEach(a=>{if(a.isCurrentlyRacing){var s=this.globalVar.animals.find(o=>o.type===a.associatedAnimalType);void 0!==s&&(e=s.makeCopy(s))}}),e}getCurrentlyActiveGrandPrixRacingAnimal(){var e=new Tt;return this.globalVar.eventRaceData.isRunning&&this.globalVar.eventRaceData.animalData.forEach(n=>{if(n.isCurrentlyRacing){var r=this.globalVar.animals.find(a=>a.type===n.associatedAnimalType);void 0!==r&&(e=r.makeCopy(r))}}),e}getExhaustionOfAnimal(e){var n;return null===(n=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===n?void 0:n.exhaustionStatReduction}getMoraleOfAnimal(e){var n;return null===(n=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===n?void 0:n.morale}generateGrandPrixSegment(e){var n=this.globalVar.eventRaceData,r=this.getRemainingEventRaceTime(),a=n.totalDistance/n.totalSegments,s=[],o=new In;return o.courseType=e.raceCourseType,o.terrain=this.getRandomGrandPrixTerrainFromWeatherCluster(this.globalVar.eventRaceData.weatherCluster,o.courseType,this.getEventStartDateTime().toString()+this.getEventTimePer5Min().toString()),o.distance=a,s.push(o),s.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,a)}),new hi(s,this.globalVar.circuitRank,!1,1,a,r,void 0,void 0,void 0,Fe.event,ze.grandPrix)}getGrandPrixRewardCount(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank),n=5,r=this.globalVar.modifiers.find(u=>"metersPerCoinsGrandPrixModifier"===u.text);void 0!==r&&(n=r.value);var a=5,s=this.globalVar.modifiers.find(u=>"metersPerRenownGrandPrixModifier"===u.text);return void 0!==s&&(a=s.value),this.globalVar.eventRaceData.totalDistance/(n*e)+this.globalVar.eventRaceData.totalDistance/(a*e)+4}getEventStartDateTime(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,s=new Date,o=new Date,l=new Date,c=new Date;return(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(s.getHours()-r+a.weekStartHour),s.setMinutes(0,0,0),(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(o.getHours()-r+a.weekEndHour),o.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=s&&e<=o||e>=l&&e<=c?0:e>o?l:s}getTimeToEventRace(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,s=new Date,o=new Date,l=new Date,c=new Date;return(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(s.getHours()-r+a.weekStartHour),s.setMinutes(0,0,0),(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(o.getHours()-r+a.weekEndHour),o.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=s&&e<=o||e>=l&&e<=c?0:e>o?(l.getTime()-e.getTime())/1e3:(s.getTime()-e.getTime())/1e3}getRemainingEventRaceTime(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,s=new Date,o=new Date,l=new Date,c=new Date;return(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(s.getHours()-r+a.weekStartHour),s.setMinutes(0,0,0),(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(o.getHours()-r+a.weekEndHour),o.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=s&&e<=o||e>=l&&e<=c?e>l?(c.getTime()-e.getTime())/1e3:(o.getTime()-e.getTime())/1e3:0}getEventTimePer5Min(){var e=this.getRemainingEventRaceTime();return Math.floor(e/60/5)}generateTrackRace(e,n){var r=60,a=[],s=new In;s.courseType=e.raceCourseType,n===zn.practice?(r=45,s.distance=100,s.terrain=new gr($e.Stormy)):n===zn.novice?(r=60,s.distance=1e3,s.terrain=new gr($e.Stormy)):n===zn.intermediate?(r=80,s.distance=1e4,s.terrain=new gr($e.Stormy)):n===zn.master&&(r=100,s.distance=1e5,s.terrain=new gr($e.Stormy)),a.push(s);var o=0;return a.forEach(l=>{o+=l.distance}),a.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,o,n)}),new hi(a,this.globalVar.circuitRank,!1,1,o,r,void 0,$t.Track,n,Fe.trainingTrack)}GenerateRaceLegPaths(e,n,r){for(var s=[],o=e.distance,c=Math.round(o/(n/20)),u=!1,d=je.Regular,h=o/c,p=0;p<c;p++){var b=new Qh;0!==p?p!==c-1?(b.length=o>h?h:o,(o-=b.length)<0&&(o=0),u?b.routeDesign=je.Regular:(b.routeDesign=this.GetSpecialRoute(e.courseType,p+2<c,d),e.specialPathCount+=1,b.isSpecialPath=!0),u=b.routeDesign!==je.Regular,b.setStumbleFields(),s.push(b),d=b.routeDesign):(b.length=o,b.routeDesign=e.courseType===H.Volcanic?je.LastRegular:je.Regular,b.setStumbleFields(),s.push(b),d=b.routeDesign):(b.length=h,b.routeDesign=e.courseType===H.Volcanic?je.FirstRegular:je.Regular,b.setStumbleFields(),s.push(b),o-=b.length,d=b.routeDesign)}return s}GetSpecialRoute(e,n,r){var a=je.Regular,o=this.utilityService.getRandomInteger(1,3);return 1===o||(2===o?e===H.Flatland?a=je.S:e===H.Mountain?a=je.Crevasse:e===H.Ocean?a=je.Waves:e===H.Tundra?a=je.Cavern:e===H.Volcanic&&(a=je.Regular):3===o&&(e===H.Flatland?a=je.Bumps:e===H.Mountain?a=je.Gaps:e===H.Ocean?a=je.Dive:e===H.Tundra?a=je.Hills:e===H.Volcanic&&(a=je.SteppingStones))),a}calculateAnimalRacingStats(e){var n=e.currentStats.defaultMaxSpeedModifier,r=e.currentStats.defaultAccelerationModifier,a=e.currentStats.defaultStaminaModifier,s=e.currentStats.defaultPowerModifier,o=e.currentStats.defaultFocusModifier,l=e.currentStats.defaultAdaptabilityModifier,c=.02,u=e.getAnimalType().toLowerCase(),d=this.globalVar.modifiers.find(Lt=>Lt.text===u+"DefaultMaxSpeedModifier"),h=this.globalVar.modifiers.find(Lt=>Lt.text===u+"DefaultAccelerationModifier"),p=this.globalVar.modifiers.find(Lt=>Lt.text===u+"DefaultStaminaModifier"),b=this.globalVar.modifiers.find(Lt=>Lt.text===u+"DefaultPowerModifier"),y=this.globalVar.modifiers.find(Lt=>Lt.text===u+"DefaultFocusModifier"),w=this.globalVar.modifiers.find(Lt=>Lt.text===u+"DefaultAdaptabilityModifier");null!=d&&(n=d.value),null!=h&&(r=h.value),null!=p&&(a=p.value),null!=b&&(s=b.value),null!=y&&(o=y.value),null!=w&&(l=w.value);var S=this.getTraitModifier(e,me.topSpeed),C=this.getTraitModifier(e,me.acceleration),I=this.getTraitModifier(e,me.endurance),W=this.getTraitModifier(e,me.power),G=this.getTraitModifier(e,me.focus),Q=this.getTraitModifier(e,me.adaptability),te=null!==e.equippedOrb&&"Ruby Orb"===e.equippedOrb.name?this.globalVar.orbStats.maxSpeedIncrease:1,de=null!==e.equippedOrb&&"Amber Orb"===e.equippedOrb.name?this.globalVar.orbStats.accelerationRateIncrease:1,ke=null!==e.equippedOrb&&"Topaz Orb"===e.equippedOrb.name?this.globalVar.orbStats.staminaIncrease:1,Me=null!==e.equippedOrb&&"Amethyst Orb"===e.equippedOrb.name?this.globalVar.orbStats.powerEfficiencyIncrease:1,Ce=null!==e.equippedOrb&&"Sapphire Orb"===e.equippedOrb.name?this.globalVar.orbStats.focusDistanceIncrease:1,Ye=null!==e.equippedOrb&&"Emerald Orb"===e.equippedOrb.name?this.globalVar.orbStats.adaptabilityDistanceIncrease:1,vt=this.globalVar.modifiers.find(Lt=>"breedLevelStatModifier"===Lt.text);null!=vt&&(c=vt.value),c=1+c*(e.breedLevel-1);var Rt=1,Zt=1,Gt=1,xt=1,pe=1,D=1;e.talentTree.talentTreeType===lt.sprint&&(D=1+e.talentTree.column1Row3Points/100,Zt=1+e.talentTree.column2Row3Points/100,xt=1+e.talentTree.column3Row3Points/100),e.talentTree.talentTreeType===lt.longDistance&&(pe=1+e.talentTree.column1Row3Points/100,Rt=1+e.talentTree.column2Row3Points/100,Gt=1+e.talentTree.column3Row3Points/100);var qe=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(n*c*S*e.incubatorStatUpgrades.maxSpeedModifier*Rt,qe,te),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(r*c*C*e.incubatorStatUpgrades.accelerationModifier*Zt,qe,de),e.currentStats.stamina=e.currentStats.calculateStamina(a*c*I*e.incubatorStatUpgrades.staminaModifier*Gt,qe,ke),e.currentStats.powerMs=e.currentStats.calculateTruePower(s*c*W*e.incubatorStatUpgrades.powerModifier*xt,qe,Me),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(o*c*G*e.incubatorStatUpgrades.focusModifier*pe,qe,Ce),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(l*c*Q*e.incubatorStatUpgrades.adaptabilityModifier*D,qe,Ye),e.currentStats.burstChance=e.currentStats.calculateBurstChance(c),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance(c),this.updateTrackedMaxStats(e)}getTraitModifier(e,n){var r=1;if(null!=e.trait){var a=e.trait.researchLevel,s=e.trait.researchLevel,o=this.globalVar.modifiers.find(l=>"maximumTraitNegativePercentModifier"===l.text);void 0!==o&&s>o.value&&(s=o.value),e.trait.positiveStatGain===n&&(r+=a/100),e.trait.negativeStatGain===n&&(r-=s/100)}return r}GetAnimalDiminishingReturns(e){var n=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.resources.find(o=>"Facility Level"===o.name);if(null==r)return n;var a=5,s=this.globalVar.modifiers.find(o=>"facilityLevelModifier"===o.text);return void 0!==s&&(a=s.value),n+r.amount*(a+e.miscStats.diminishingReturnsBonus)}IncreaseAnimalBreedGauge(e,n){e.breedGaugeXp+=n,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}getBreedLevelRequiredForGrandPrix(){var e=50,n=this.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var n=5,r=this.globalVar.modifiers.find(Q=>"breedGaugeMaxIncreaseModifier"===Q.text);if(null!=r&&(n=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=n,null!=this.globalVar.resources.find(Q=>Q.name.includes("Incubator Upgrade"))&&null!=e.trait){var s=.001,o=this.globalVar.modifiers.find(Q=>"incubatorUpgradeIncreaseModifier"===Q.text);null!=o&&(s=o.value);var l=e.trait.researchLevel*s,c=this.globalVar.resources.find(Q=>"Incubator Upgrade Lv1"===Q.name),u=this.globalVar.resources.find(Q=>"Incubator Upgrade Lv2"===Q.name),d=this.globalVar.resources.find(Q=>"Incubator Upgrade Lv3"===Q.name);null!=this.globalVar.resources.find(Q=>"Incubator Upgrade Lv4"===Q.name)?l>.1&&(l=.1):null!=d?l>.05&&(l=.05):null!=u?l>.025&&(l=.025):null!=c&&l>.01&&(l=.01),e.trait.positiveStatGain===me.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=l),e.trait.positiveStatGain===me.acceleration&&(e.incubatorStatUpgrades.accelerationModifier+=l),e.trait.positiveStatGain===me.endurance&&(e.incubatorStatUpgrades.staminaModifier+=l),e.trait.positiveStatGain===me.power&&(e.incubatorStatUpgrades.powerModifier+=l),e.trait.positiveStatGain===me.focus&&(e.incubatorStatUpgrades.focusModifier+=l),e.trait.positiveStatGain===me.adaptability&&(e.incubatorStatUpgrades.adaptabilityModifier+=l)}var p=this.globalVar.resources.find(Q=>"Animal Handler"===Q.name),b=this.globalVar.modifiers.find(Q=>"animalHandlerModifier"===Q.text);if(null!=p&&void 0!==b&&null!=b&&p.amount>0){var y=p.amount*b.value,w=Math.round((e.currentStats.topSpeed-e.baseStats.topSpeed)*y),S=Math.round((e.currentStats.acceleration-e.baseStats.acceleration)*y),C=Math.round((e.currentStats.endurance-e.baseStats.endurance)*y),I=Math.round((e.currentStats.power-e.baseStats.power)*y),W=Math.round((e.currentStats.focus-e.baseStats.focus)*y),G=Math.round((e.currentStats.adaptability-e.baseStats.adaptability)*y);e.currentStats=new Ee(e.baseStats.topSpeed+w,e.baseStats.acceleration+S,e.baseStats.endurance+C,e.baseStats.power+I,e.baseStats.focus+W,e.baseStats.adaptability+G)}else e.currentStats=new Ee(e.baseStats.topSpeed,e.baseStats.acceleration,e.baseStats.endurance,e.baseStats.power,e.baseStats.focus,e.baseStats.adaptability);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,n){var r=25,a=this.globalVar.modifiers.find(l=>"abilityLevelCapModifier"===l.text);if(null!=a&&(r=a.value),!(e.ability.abilityLevel>e.breedLevel+r)){var s=1;null!=n&&n>1&&(s=n),e.ability.abilityXp+=s,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5));var o=e.availableAbilities.find(l=>l.name===e.ability.name);null!=o&&(o.abilityXp=e.ability.abilityXp,o.abilityLevel=e.ability.abilityLevel,o.abilityMaxXp=e.ability.abilityMaxXp)}}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,Y.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,Y.Progression))}InitializeSettings(){this.themeService.setLightTheme(),this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",Qr.both)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("grandPrix",!1),this.globalVar.unlockables.set("orbs",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnRow4",!1),this.globalVar.unlockables.set("barnRow5",!1),this.globalVar.unlockables.set("coaching",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new be("Coins",e)}getMedalResourceValue(e){return new be("Medals",e)}getTokenResourceValue(e){return new be("Tokens",e)}unlockAnimalAbilities(e){var n=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=n){var r=n.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var n=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=n){var r=[];n.itemList.forEach(a=>{var s=this.globalVar.animals.find(o=>o.getAnimalType()===a.name);null!=s&&s.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getEquipmentDescription(e){var n="";return"Headband"===e&&(n="The first three stumbles you would have are ignored"),"Pendant"===e&&(n="Reduce your ability cooldown by 10%"),"Blinders"===e&&(n="Negative terrain effects are cut in half"),"Quick Snack"===e&&(n="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(n="Increase next racer's Speed by 10% on Relay"),"Blue Baton"===e&&(n="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(n="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(n="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(n="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(n="Increase next racer's Endurance by 10% on Relay"),"Amethyst Orb"===e&&(n="Increase your Power Efficiency by 10%."),"Sapphire Orb"===e&&(n="Increase your Focus Distance by 10%."),"Amber Orb"===e&&(n="Increase your Acceleration Rate by 10%."),"Topaz Orb"===e&&(n="Increase your Stamina by 10%."),"Emerald Orb"===e&&(n="Increase your Adaptability Distance by 10%."),"Ruby Orb"===e&&(n="Increase your Max Speed by 10%."),"Scary Mask"===e&&(n="Cause a distraction the first time you lose focus while ahead of competition, slowing competitors by 2 seconds."),"Running Shoes"===e&&(n="After each Burst during a race, increase subsequent Burst distance by 20%."),"Incense"===e&&(n="When your velocity is at least 90% of your Max Speed, immediately set velocity to 100% of your Max Speed."),"Athletic Tape"===e&&(n="While Bursting, decrease Acceleration Rate by 50% but increase Focus Distance and Adaptability Distance by 50%."),n}getItemDescription(e){var n="";return"Apples"===e&&(n="+1 Acceleration to a single animal"),"Bananas"===e&&(n="+1 Speed to a single animal"),"Strawberries"===e&&(n="+1 Endurance to a single animal"),"Carrots"===e&&(n="+1 Power to a single animal"),"Turnips"===e&&(n="+1 Focus to a single animal"),"Oranges"===e&&(n="+1 Adaptability to a single animal"),"Mangoes"===e&&(n="+1 Breed Level to a single animal"),"Circuit Race Breed XP Gain Certificate"===e&&(n="Give an animal +2 Bonus Breed XP Gain from Circuit Races. Can use up to 30 of these certificates on any individual animal."),"Free Race Breed XP Gain Certificate"===e&&(n="Give an animal +1 Bonus Breed XP Gain from Free Races. Can use up to 30 of these certificates on any individual animal."),"Training Breed XP Gain Certificate"===e&&(n="Give an animal +1 Bonus Breed XP Gain from Training. Can use up to 30 of these certificates on any individual animal."),"Diminishing Returns Increase Certificate"===e&&(n="Give an animal +1 Diminishing Returns per Facility Level. Can use up to 30 of these certificates on any individual animal."),n}getSpecializationDescription(e){var n="";return"Breeding Grounds"===e?n="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?n="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?n="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(n="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),n}updateTrackedMaxStats(e){if(e.isAvailable){if(""===this.globalVar.trackedStats.highestMaxSpeed)this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var n=parseFloat(this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").indexOf(" ")));e.currentStats.maxSpeedMs>n&&(this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAccelerationRate)this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var r=parseFloat(this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").indexOf(" ")));e.currentStats.accelerationMs>r&&(this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestStamina)this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")";else{var a=parseFloat(this.globalVar.trackedStats.highestStamina.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestStamina.replaceAll(",","").indexOf(" ")));e.currentStats.stamina>a&&(this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")")}if(""===this.globalVar.trackedStats.highestPowerEfficiency)this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")";else{var s=parseFloat(this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").indexOf(" ")));e.currentStats.powerMs>s&&(this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")")}if(""===this.globalVar.trackedStats.highestFocusDistance)this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")";else{var o=parseFloat(this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>o&&(this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAdaptabilityDistance)this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")";else{var l=parseFloat(this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>l&&(this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")")}}}devModeInitialize(e){var n=this.globalVar.resources.find(G=>"Coins"===G.name);if(void 0!==n&&(n.amount=1e5),this.globalVar.resources.some(G=>"Medals"===G.name)){var r=this.globalVar.resources.find(G=>"Medals"===G.name);void 0!==r&&(r.amount+=e+1e6)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e+1e5,Y.Resources));if(this.globalVar.resources.push(this.initializeService.initializeResource("Talent Points",1e3,Y.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Tokens",1e3,Y.Resources)),this.globalVar.resources.some(G=>"Renown"===G.name)){var a=this.globalVar.resources.find(G=>"Renown"===G.name);void 0!==a&&(a.amount+=200)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",200,Y.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",2*e,Y.Progression)),this.globalVar.resources.push(this.initializeService.initializeResource("Research Level",e,Y.Progression));for(var s=1;s<=e;s++){var o=this.utilityService.getCircuitRankFromNumericValue(s);this.globalVar.circuitRank=o,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}var l=this.globalVar.animals.find(G=>G.type===q.Horse);void 0!==l&&(l.currentStats.topSpeed=2e3,l.currentStats.acceleration=2e3,l.currentStats.endurance=1e3,l.currentStats.power=2e3,l.currentStats.focus=1e3,l.currentStats.adaptability=1e3,l.breedLevel=1e5,l.canEquipOrb=!0,l.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(l));var c=this.globalVar.animals.find(G=>G.type===q.Cheetah);void 0!==c&&(c.currentStats.topSpeed=2e3,c.currentStats.acceleration=200,c.currentStats.endurance=200,c.currentStats.power=2e3,c.currentStats.focus=200,c.currentStats.adaptability=200,c.breedLevel=1e3,c.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(c));var u=this.globalVar.animals.find(G=>G.type===q.Hare);void 0!==u&&(u.currentStats.topSpeed=200,u.currentStats.acceleration=200,u.currentStats.endurance=200,u.currentStats.power=2e3,u.currentStats.focus=200,u.currentStats.adaptability=200,u.breedLevel=1e3,u.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(u));var d=this.globalVar.animals.find(G=>G.type===q.Monkey);void 0!==d&&(d.currentStats.topSpeed=2500,d.currentStats.acceleration=2500,d.currentStats.endurance=2550,d.currentStats.power=2e3,d.currentStats.focus=2500,d.currentStats.adaptability=2500,d.breedLevel=151e3,d.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(d));var h=this.globalVar.animals.find(G=>G.type===q.Goat);void 0!==h&&(h.currentStats.topSpeed=200,h.currentStats.acceleration=200,h.currentStats.endurance=200,h.currentStats.power=2e3,h.currentStats.focus=200,h.currentStats.adaptability=200,h.breedLevel=1e3,h.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(h));var p=this.globalVar.animals.find(G=>G.type===q.Gecko);void 0!==p&&(p.currentStats.topSpeed=200,p.currentStats.acceleration=200,p.currentStats.endurance=200,p.currentStats.power=2e3,p.currentStats.focus=200,p.currentStats.adaptability=200,p.breedLevel=1e3,p.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(p));var b=this.globalVar.animals.find(G=>G.type===q.Dolphin);void 0!==b&&(b.currentStats.topSpeed=1e3,b.currentStats.acceleration=1e3,b.currentStats.endurance=500,b.currentStats.power=2e3,b.currentStats.focus=1e3,b.currentStats.adaptability=1e3,b.breedLevel=1e4,b.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(b));var y=this.globalVar.animals.find(G=>G.type===q.Octopus);void 0!==y&&(y.currentStats.topSpeed=200,y.currentStats.acceleration=200,y.currentStats.endurance=200,y.currentStats.power=2e3,y.currentStats.focus=500,y.currentStats.adaptability=500,y.breedLevel=1e3,y.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(y));var w=this.globalVar.animals.find(G=>G.type===q.Shark);void 0!==w&&(w.currentStats.topSpeed=200,w.currentStats.acceleration=200,w.currentStats.endurance=200,w.currentStats.power=2e3,w.currentStats.focus=200,w.currentStats.adaptability=200,w.incubatorStatUpgrades.powerModifier=5,w.breedLevel=1e3,this.calculateAnimalRacingStats(w));var S=this.globalVar.animals.find(G=>G.type===q.Penguin);void 0!==S&&(S.currentStats.topSpeed=600,S.currentStats.acceleration=200,S.currentStats.endurance=500,S.currentStats.power=2e3,S.currentStats.focus=200,S.currentStats.adaptability=200,S.incubatorStatUpgrades.powerModifier=5,S.breedLevel=1e4,this.calculateAnimalRacingStats(S));var C=this.globalVar.animals.find(G=>G.type===q.Caribou);void 0!==C&&(C.currentStats.topSpeed=200,C.currentStats.acceleration=200,C.currentStats.endurance=200,C.currentStats.power=2e3,C.currentStats.focus=200,C.currentStats.adaptability=200,C.breedLevel=1e5,C.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(C));var I=this.globalVar.animals.find(G=>G.type===q.Salamander);void 0!==I&&(I.currentStats.topSpeed=2500,I.currentStats.acceleration=1500,I.currentStats.endurance=5e3,I.currentStats.power=2e3,I.currentStats.focus=1e3,I.currentStats.adaptability=1e3,I.breedLevel=2e4,I.incubatorStatUpgrades.powerModifier=5,I.incubatorStatUpgrades.maxSpeedModifier=5,I.incubatorStatUpgrades.accelerationModifier=5,this.calculateAnimalRacingStats(I));var W=this.globalVar.animals.find(G=>G.type===q.Fox);void 0!==W&&(W.currentStats.topSpeed=400,W.currentStats.acceleration=200,W.currentStats.endurance=40,W.currentStats.power=2e3,W.currentStats.focus=200,W.currentStats.adaptability=200,W.breedLevel=2e3,W.incubatorStatUpgrades.powerModifier=5,this.calculateAnimalRacingStats(W))}}return t.\u0275fac=function(e){return new(e||t)(Ve($i),Ve(Gm),Ve(Rl))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var dn=(()=>{return(t=dn||(dn={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",dn;var t})(),ft=(()=>{return(t=ft||(ft={}))[t.inspiration=0]="inspiration",t[t.navigator=1]="navigator",t[t.flowingCurrent=2]="flowingCurrent",t[t.bigBrain=3]="bigBrain",t[t.camouflage=4]="camouflage",t[t.herdMentality=5]="herdMentality",t[t.specialDelivery=6]="specialDelivery",t[t.deepBreathing=7]="deepBreathing",t[t.redBaton=8]="redBaton",t[t.blueBaton=9]="blueBaton",t[t.violetBaton=10]="violetBaton",t[t.greenBaton=11]="greenBaton",t[t.orangeBaton=12]="orangeBaton",t[t.yellowBaton=13]="yellowBaton",t[t.supportMaxSpeedRelay=14]="supportMaxSpeedRelay",t[t.supportAccelerationRelay=15]="supportAccelerationRelay",t[t.supportStaminaRelay=16]="supportStaminaRelay",t[t.supportPowerRelay=17]="supportPowerRelay",t[t.supportFocusRelay=18]="supportFocusRelay",t[t.supportAdaptabilityRelay=19]="supportAdaptabilityRelay",t[t.supportBurstDistance=20]="supportBurstDistance",t[t.supportBurstChance=21]="supportBurstChance",t[t.supportAbilityCooldown=22]="supportAbilityCooldown",t[t.supportAbilityEfficiency=23]="supportAbilityEfficiency",ft;var t})();let hn=(()=>{class t{constructor(e,n,r){this.globalService=e,this.utilityService=n,this.sanitizer=r}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var n=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(s=>s.type===r.type);void 0!==a&&n.push(a)}),n}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck)}getResourceByName(e){var n=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==n?n.amount:0}spendResourceByName(e,n){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=n)}gainResourceByName(e,n){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount+=n)}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(n=>"Facility Level"===n.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(n=>"Research Level"===n.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(n=>"Coins"===n.name);return void 0!==e?e.amount:0}spendCoins(e){var n=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==n&&(n.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(n=>"Medals"===n.name);return void 0!==e?e.amount:0}spendMedals(e){var n=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==n&&(n.amount-=e)}getTokens(){var e=this.globalService.globalVar.resources.find(n=>"Tokens"===n.name);return void 0!==e?e.amount:0}spendTokens(e){var n=this.globalService.globalVar.resources.find(r=>"Tokens"===r.name);void 0!==n&&(n.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(n=>"Renown"===n.name);return void 0!==e?e.amount:0}getStockbreeder(){var e=this.globalService.globalVar.resources.find(n=>"Stockbreeder"===n.name);return void 0!==e?e.amount:0}getAnimalByType(e){var n=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==n?n:null}getMaxSpeedModifierByAnimalType(e){var n=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===q[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(s,me.topSpeed),u=1;s.talentTree.talentTreeType===lt.longDistance&&(u=1+s.talentTree.column2Row3Points/100),n=a*r*c*s.incubatorStatUpgrades.maxSpeedModifier*u}return n}getAccelerationModifierByAnimalType(e){var n=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===q[e].toLowerCase()+"DefaultAccelerationModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(s,me.acceleration),u=1;s.talentTree.talentTreeType===lt.sprint&&(u=1+s.talentTree.column2Row3Points/100),n=a*r*c*s.incubatorStatUpgrades.accelerationModifier*u}return n}getStaminaModifierByAnimalType(e){var n=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===q[e].toLowerCase()+"DefaultStaminaModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(s,me.endurance),u=1;s.talentTree.talentTreeType===lt.longDistance&&(u=1+s.talentTree.column3Row3Points/100),n=a*r*c*s.incubatorStatUpgrades.staminaModifier*u}return n}getPowerModifierByAnimalType(e){var n=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===q[e].toLowerCase()+"DefaultPowerModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(s,me.power),u=1;s.talentTree.talentTreeType===lt.sprint&&(u=1+s.talentTree.column3Row3Points/100),n=a*r*c*s.incubatorStatUpgrades.powerModifier*u}return n}getFocusModifierByAnimalType(e){var n=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===q[e].toLowerCase()+"DefaultFocusModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(s,me.focus),u=1;s.talentTree.talentTreeType===lt.longDistance&&(u=1+s.talentTree.column1Row3Points/100),n=a*r*c*s.incubatorStatUpgrades.focusModifier*u}return n}getAdaptabilityModifierByAnimalType(e){var n=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===q[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(s,me.adaptability),u=1;s.talentTree.talentTreeType===lt.sprint&&(u=1+s.talentTree.column1Row3Points/100),n=a*r*c*s.incubatorStatUpgrades.adaptabilityModifier*u}return n}getTrainingBreedGaugeIncrease(e,n){var r=0,a=this.globalService.globalVar.modifiers.find(o=>"trainingBreedGaugeIncrease"===o.text);if(null!=a&&(r=a.value),null!=n.miscStats.bonusBreedXpGainFromTraining&&n.miscStats.bonusBreedXpGainFromTraining>0&&(r+=n.miscStats.bonusBreedXpGainFromTraining),e>0){var s=this.globalService.globalVar.modifiers.find(o=>"breedingGroundsSpecializationModifier"===o.text);null!=s&&(r*=1+e*s.value)}return r}getCircuitBreedGaugeIncrease(e){var n=0,r=this.globalService.globalVar.modifiers.find(a=>"circuitBreedGaugeIncrease"===a.text);return null!=r&&(n=r.value),null!=e.miscStats.bonusBreedXpGainFromCircuitRaces&&e.miscStats.bonusBreedXpGainFromCircuitRaces>0&&(n+=e.miscStats.bonusBreedXpGainFromCircuitRaces),n}getLocalBreedGaugeIncrease(e){var n=0,r=this.globalService.globalVar.modifiers.find(a=>"localBreedGaugeIncrease"===a.text);return null!=r&&(n=r.value),null!=e.miscStats.bonusBreedXpGainFromLocalRaces&&e.miscStats.bonusBreedXpGainFromLocalRaces>0&&(n+=e.miscStats.bonusBreedXpGainFromLocalRaces),n}getTotalRacersByRace(e){var n=2;return e.localRaceType===$t.Track?n=13:this.getResourceByName("Money Mark")>0&&(n+=1),n}getDiminishingReturnsThreshold(e){var n=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(n+=this.getFacilityLevel()*r.value),n}getBreedLevelPopover(e){var n=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(n=r.value),"Increase racing stat gain from base stats by "+(n*(e-1)*100).toFixed(0)+"%"}getResourcePopover(e,n){return"Coins"===e?"Good ol classic Coins. Gain from most actions and buy most things with this.":"Medals"===e?"Rare currency gained from improving your circuit rank and winning certain special races.":"Renown"===e?"Increases Coins gained from races by "+this.getRenown()+"%. Increase total number of free races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or free races to get your name out there and raise your renown.":"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):n===Y.Specialty?this.getSpecialtyItemDescription(e):n===Y.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let n in H)isNaN(Number(n))&&e.push(n);return e}getCourseTypeFromAnimalType(e){var n=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==n?n.raceCourseType:-1}getTalentTreeNameByEnum(e){var n="";return e===lt.sprint&&(n="Sprint"),e===lt.support&&(n="Support"),e===lt.longDistance&&(n="Long Distance"),n}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}getTrackRaceRewards(e){var n=[];return e===zn.novice?(n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races")):e===zn.intermediate?(n.push("- 200 Coins"),n.push("- +2 Bonus Breed XP Gain From Training"),n.push("- 1 Medal"),n.push("- +2 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- +5 Bonus Breed XP Gain From Circuit Races"),n.push("- 200 Coins"),n.push("- +2 Bonus Breed XP Gain From Training"),n.push("- 1 Medal"),n.push("- +2 Bonus Breed XP Gain From Free Races"),n.push("- +1% Training Time Reduction"),n.push("- +3 Diminishing Returns per Facility Level")):e===zn.master&&(n.push("- +5 Bonus Breed XP Gain From Free Races"),n.push("- +2 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- 1000 Coins"),n.push("- +3 Bonus Breed XP Gain From Training"),n.push("- +2 Talents"),n.push("- +1% Training Time Reduction"),n.push("- 1000 Coins"),n.push("- Orb Pendant"),n.push("- +3 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- +3 Talents")),n}getGrandPrixTokenRewards(){var e=[],n=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=5e7,a=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken1MeterModifier"===w.text);null!=a&&(r=a.value);var s=5e7,o=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken2MeterModifier"===w.text);null!=o&&(s=o.value);var l=5e7,c=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken3MeterModifier"===w.text);null!=c&&(l=c.value);var u=5e7,d=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken4MeterModifier"===w.text);null!=d&&(u=d.value);var h=1*n,p=2*n,b=3*n,y=4*n;return e.push((r*n).toLocaleString()+" meters - +"+h+" Token"+(h>1?"s":"")),e.push((s*n).toLocaleString()+" meters - +"+p+" Tokens"),e.push((l*n).toLocaleString()+" meters - +"+b+" Tokens"),e.push((u*n).toLocaleString()+" meters - +"+y+" Tokens"),e}getRenownRequiredForEventShopTier(e){return 1===e?0:2===e?200:e>2?500*(e-2):-1}getHighestEventShopTierUnlocked(){var e=1,n=this.getRenown();return n>200&&(e=2),n>500&&(e=Math.floor(n/500)+2),e}isItemUnlocked(e){var n=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(n=r),n}getAnimalsByRaceCourseType(e){var n=[];return"Flatland"===e?(n.push(q[q.Horse]),n.push(q[q.Cheetah]),n.push(q[q.Hare])):"Mountain"===e?(n.push(q[q.Monkey]),n.push(q[q.Goat]),n.push(q[q.Gecko])):"Ocean"===e?(n.push(q[q.Dolphin]),n.push(q[q.Shark]),n.push(q[q.Octopus])):"Tundra"===e?(n.push(q[q.Penguin]),n.push(q[q.Caribou])):"Volcanic"===e&&(n.push(q[q.Salamander]),n.push(q[q.Fox])),n}GetAbilityEffectiveAmount(e,n,r,a){if(null==e.ability||null==e.ability.name)return-1;null==n&&(n=1),null==r&&(r=1);var s=1;e.type===q.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===q.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5),e.talentTree.talentTreeType===lt.sprint&&(s*=1+.05*e.talentTree.column3Row2Points);var o=e.ability;null!=a&&(o=a);var l=1;null!=e.talentTree&&null!=e.raceVariables&&e.talentTree.talentTreeType===lt.sprint&&!e.raceVariables.firstAbilityUseEffectApplied&&(l*=1+.05*e.talentTree.column3Row4Points,e.raceVariables.firstAbilityUseEffectApplied=!0);var c=1;if(null!=e.raceVariables&&null!=e.raceVariables.relayEffects){var u=this.getRelayEffectFromListByType(e.raceVariables.relayEffects,ft.supportAbilityEfficiency);void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue)}return(o.efficiency*c*l+o.efficiency*(.01*(o.abilityLevel-1)))*(1+e.currentStats.powerMs*s*n*r/100)}getAnimalAbilityDescription(e,n,r){if(e){if("Second Wind"===n)return"Stamina does not go down for a short period";if("Inspiration"===n)return"Increase next racer's max speed on relay";if("Pacemaker"===n)return"Increase acceleration for a short period";if("Sprint"===n)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===n)return"Increase acceleration when behind competitors";if("On The Hunt"===n)return"Gain max speed after each burst";if("Awareness"===n)return"Increase adaptability, focus for a short period";if("Prey Instinct"===n)return"Start in extended burst mode";if("Nap"===n)return"Delay leg start, increase max speed and focus";if("Landslide"===n)return"Delay competitors";if("Frenzy"===n)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===n)return"Jump to the finish line";if("Echolocation"===n)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===n)return"Increase previous and next racer's adaptability";if("Flowing Current"===n)return"Increase next racer's acceleration on relay";if("Apex Predator"===n)return"Slow competitors if they pass you";if("Feeding Frenzy"===n)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===n)return"Increase max speed when ahead of competitors";if("Propulsion"===n)return"Dash a short distance";if("Buried Treasure"===n)return"Delay your start, increase coin gain for winning race";if("Big Brain"===n)return"Increase power of other racers after bursting a certain number of times";if("Sure-footed"===n)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===n)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===n)return"Increase burst speed bonus";if("Sticky"===n)return"Cannot stumble for a short period";if("Night Vision"===n)return"Increase max speed by keeping focused";if("Camouflage"===n)return"Transfer velocity to next racer on relay";if("Herd Mentality"===n)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===n)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===n)return"Increase other racers' burst max speed bonus based on stamina";if("Careful Toboggan"===n)return"Increase adaptability for a short period";if("Wild Toboggan"===n)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===n)return"Increase max speed if you do not drift";if("Cold Blooded"===n)return"Increase stamina and focus for a short period based on distance in leg";if("Burrow"===n)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===n)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===n)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===n)return"Increase max speed greatly, lose over time";if("Nine Tails"===n)return"Increase random stat for a short period, effect can stack"}else{var a="",s=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(u=>{u.availableAbilities.forEach(d=>{d.name===n&&(r=u,s=d,null!=d.cooldown&&(a=d.cooldown.toString()))})}),null!=r){var o=this.GetAbilityEffectiveAmount(r,void 0,void 0,s).toLocaleString(void 0,{minimumFractionDigits:2});""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString());var l="";return"Second Wind"===n?"Stamina does not decrease for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Inspiration"===n?"When the next racer starts, they gain 25% of your Max Speed for <span class='keyword'>"+o+"</span> meters. Passive.":"Pacemaker"===n?"Increase Acceleration Rate by 50% for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Sprint"===n?" Gain 35% Max Speed and Acceleration Rate for <span class='keyword'>"+o+"</span> meters, but lose twice as much stamina as normal. "+a+" second cooldown.":"Giving Chase"===n?"While you are behind the average pace, increase Acceleration Rate by <span class='keyword'>"+o+"</span>%. Passive.":"On The Hunt"===n?"Every time you Burst, increase your Max Speed by <span class='keyword'>"+o+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Awareness"===n?"Boosts Focus Distance and Adaptability Distance by 40% for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Prey Instinct"===n?"Starts its leg in Burst mode that continues for an additional <span class='keyword'>"+o+"</span> meters. Passive.":"Nap"===n?"Sleep until the competition has traveled a distance equal to <span class='keyword'>"+o+"</span> meters from the end of your leg. Max Speed and Focus Distance are then doubled. Passive.":"Landslide"===n?"Drop rocks on competitors, delaying them <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Frenzy"===n?"Increase Burst distance by <span class='keyword'>"+o+"</span> meters. You do not stumble or lose focus while bursting. Passive.":"Leap"===n?"When you are <span class='keyword'>"+o+"</span> meters from the finish line, leap straight to the end over .5 seconds. Passive.":"Sure-footed"===n?"When you make it through a special path without stumbling, increase your Adaptability Distance by <span class='keyword'>"+o+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Deep Breathing"===n?"Every time you Burst, regain <span class='keyword'>"+o+"</span>% of your stamina, up to 100%. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"In The Rhythm"===n?"Increase your max speed bonus while Bursting by <span class='keyword'>"+o+"</span>%. Passive.":"Sticky"===n?"Cannot stumble for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Night Vision"===n?"Increase Max Speed by <span class='keyword'>"+o+"</span>% for every path you complete without losing focus. If you lose focus, reset this bonus back to 0%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Camouflage"===n?"The velocity you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over <span class='keyword'>"+o+"</span> meters. The following racer can break their max speed by up to 50% while this is active. Passive.":"Echolocation"===n?"Increase your Adaptability Distance by 75% for <span class='keyword'>"+o+"</span> meters and ignore any negative effects from the terrain. "+a+" second cooldown.":"Navigator"===n?"Assist the previous racer and next racer, boosting their Adaptability Distance by 25% of your max for the last and first <span class='keyword'>"+o+"</span> meters of their legs respectively. Passive.":"Flowing Current"===n?"When relaying, increase the Acceleration Rate of your next racer by 25% of your Acceleration Rate for <span class='keyword'>"+o+"</span> meters. Passive.":"Apex Predator"===n?"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for <span class='keyword'>"+o+"</span> meters. Can only occur once. Passive.":"Feeding Frenzy"===n?"Increase Max Speed and Acceleration Rate by 50% for the first and last <span class='keyword'>"+o+"</span> meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.":"Blood In The Water"===n?"While you are ahead of the average pace, increase Max Speed by <span class='keyword'>"+o+"</span>%. Passive.":"Propulsion"===n?"Dash <span class='keyword'>"+o+"</span> meters over .25 seconds. "+a+" second cooldown.":"Buried Treasure"===n?"Delay your start by 8 seconds. If you still win the race, increase your Coin reward by <span class='keyword'>"+o+"</span>%. Passive.":"Big Brain"===n?"After Bursting through one third of your race paths, increase Power Efficiency of all remaining racers by <span class='keyword'>"+o+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 5 times. Effects remain for the duration of the race.":"Herd Mentality"===n?"After completing your leg, <span class='keyword'>"+o+"</span>% of your remaining Stamina is given to the next racer and they start their leg in Burst mode. This does not occur if you run out of Stamina during your leg. Passive.":"Great Migration"===n?"Reduce stamina by 10%. For <span class='keyword'>"+o+"</span> meters, Acceleration Rate is increased by 25% of the amount of stamina lost. "+a+" second cooldown.":"Special Delivery"===n?"Increase all remaining racers' Burst Max Speed Bonus by <span class='keyword'>"+o+"</span>% of your remaining Stamina percentage after completing your leg. This does not occur if you run out of Stamina during your leg. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"Careful Toboggan"===n?"Increase Adaptability Distance by 60% for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Wild Toboggan"===n?"Double the maximum amount of drift per path. Increase Acceleration Rate by up to <span class='keyword'>"+o+"</span>% based on how much you drift. Passive.":"Quick Toboggan"===n?"Every time you make it through a path without drifting, gain <span class='keyword'>"+o+"</span>% Max Speed. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Cold Blooded"===n?"Increase Stamina and Focus Distance by 0-30% depending on how close to the center of the volcano you are. Focus Distance boost lasts <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Burrow"===n?"Go underground for <span class='keyword'>"+o+"</span> meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.":"Heat Up"===n?"Increase Acceleration Rate by 15% for <span class='keyword'>"+o+"</span> meters. This increase doubles every subsequent use this race. "+a+" second cooldown.":"Trickster"===n?"When active, sacrifice 25% of one random stat for 50% of another random stat. Lasts <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Fleeting Speed"===n?"Increase Max Speed by <span class='keyword'>"+o+"</span>%. Decrease this bonus by 2% for every percent of the leg you complete. Passive.":"Nine Tails"===n?"At the start of each path, increase either Acceleration Rate, Max Speed, Focus Distance, or Adaptability Distance by 15% for <span class='keyword'>"+o+"</span> meters. This effect can stack. Passive.":(null===(l=this.sanitizer.sanitize(Xt.HTML,this.sanitizer.bypassSecurityTrustHtml(l)))&&(l=""),l)}}return""}getBarnByBarnNumber(e){return this.globalService.globalVar.barns.find(n=>n.barnNumber===e)}getAvailableBarns(){var e=[];return e.push(this.getBarnByBarnNumber(1)),e.push(this.getBarnByBarnNumber(2)),e.push(this.getBarnByBarnNumber(3)),this.isItemUnlocked("barnRow2")&&(e.push(this.getBarnByBarnNumber(4)),e.push(this.getBarnByBarnNumber(5)),e.push(this.getBarnByBarnNumber(6))),this.isItemUnlocked("barnRow3")&&(e.push(this.getBarnByBarnNumber(7)),e.push(this.getBarnByBarnNumber(8)),e.push(this.getBarnByBarnNumber(9))),this.isItemUnlocked("barnRow4")&&(e.push(this.getBarnByBarnNumber(10)),e.push(this.getBarnByBarnNumber(11)),e.push(this.getBarnByBarnNumber(12))),this.isItemUnlocked("barnRow5")&&(e.push(this.getBarnByBarnNumber(13)),e.push(this.getBarnByBarnNumber(14)),e.push(this.getBarnByBarnNumber(15))),e}getResourcesForBarnUpgrade(e){var n=[],r=new be("Coins",100);if(r.amount*=e+1,n.push(r),e%10==9){var a=new be("Medals",1);n.push(a)}return n}getBarnName(e){var n="",r=e.getSize();return(e.barnUpgrades.specialization===dn.None||null==e.barnUpgrades.specialization)&&(n=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===dn.Attraction&&(n=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===dn.BreedingGrounds&&(n=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===dn.TrainingFacility&&(n=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===dn.ResearchCenter&&(n=r+" Research Center "+e.barnNumber),n}getTerrainPopoverText(e,n){var r="The terrain for the "+n.getCourseTypeName()+" leg is "+e.getTerrainType()+":\n";return null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss\n":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss\n"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed\n":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed\n"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration\n":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration\n"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency\n":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency\n"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus\n":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus\n"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling\n":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling\n"),r}getInDepthSpecializationDescription(e){var n="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(C=>"breedingGroundsSpecializationModifier"===C.text);null!=a&&(r=a.value),n="For every 10 levels, gain "+100*r+"% additional breed XP when completing a training."}else if("Training Facility"===e)n="For every 10 levels up to level 200, gain 1% training time reduction. For every 10 levels after level 200, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var s=60,o=this.globalService.globalVar.modifiers.find(C=>"attractionTimeToCollectModifier"===C.text);null!=o&&(s=o.value);var l=0,c=this.globalService.globalVar.modifiers.find(C=>"attractionAmountModifier"===C.text);null!=c&&(l=c.value),n="For every 10 levels, gain "+l+" Coins every "+s+" seconds while an animal trains in this barn."}else if("Research Center"===e){var u=this.globalService.globalVar.modifiers.find(C=>"researchCenterIncrementsModifier"===C.text),d=this.globalService.globalVar.modifiers.find(C=>"researchCenterTrainingAnimalModifier"===C.text),h=this.globalService.globalVar.modifiers.find(C=>"researchCenterStudyingAnimalModifier"===C.text),p=this.globalService.globalVar.modifiers.find(C=>"researchCenterMaxStatGainModifier"===C.text),b=.05,y=.45,w=.25,S=.5;null!=u&&(b=u.value),null!=d&&(y=d.value),null!=h&&(w=h.value),null!=p&&(S=p.value),n="To start, the animal training only gains "+100*(y+b)+"% of the stats from their training. An animal at random will gain "+100*w+"% of the stats from training, prioritizing animals of the same course type. For every 10 levels, "+100*b+"% additional stat gain will be distributed up to "+100*S+"% starting with the training animal. Additional animals will gain stats after maxing out the previous."}return n}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?dn.BreedingGrounds:"Training Facility"===e?dn.TrainingFacility:"Attraction"===e?dn.Attraction:"Research Center"===e?dn.ResearchCenter:dn.None}convertTalentTreeNameToEnum(e){return"Sprint"===e?lt.sprint:"Support"===e?lt.support:"Long Distance"===e?lt.longDistance:lt.none}convertSpecializationEnumToName(e){return e===dn.BreedingGrounds?"Breeding Grounds":e===dn.TrainingFacility?"Training Facility":e===dn.Attraction?"Attraction":e===dn.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){return e.specialization===dn.TrainingFacility?.01*e.specializationLevel:0}getTrainingProgressionAnimationText(e){var n="";return e.affectedStatRatios.topSpeed>0&&(n+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(n+="+ACC\n"),e.affectedStatRatios.endurance>0&&(n+="+END\n"),e.affectedStatRatios.power>0&&(n+="+PWR\n"),e.affectedStatRatios.focus>0&&(n+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(n+="+ADP\n"),n}relayEffectTypeStacksEffectiveness(e){var n=!1;return(e===ft.bigBrain||e===ft.herdMentality||e===ft.deepBreathing||e===ft.specialDelivery)&&(n=!0),n}relayEffectPersistsEventSegments(e){var n=!1;return(e===ft.bigBrain||e===ft.redBaton||e===ft.blueBaton||e===ft.greenBaton||e===ft.orangeBaton||e===ft.violetBaton||e===ft.yellowBaton)&&(n=!0),n}getBreedLevelRequiredForGrandPrix(){var e=50,n=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}canAnimalTrain(e){var n=!0;this.globalService.globalVar.incubator.assignedAnimal===e&&(n=!1);var r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(n=!1),n}canAnimalRace(e){var n=!0,r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(n=!1),n}getTraitStatGainDescription(e){var n="",r="";return e.positiveStatGain===me.acceleration&&(n="Acceleration"),e.positiveStatGain===me.adaptability&&(n="Adaptability"),e.positiveStatGain===me.endurance&&(n="Endurance"),e.positiveStatGain===me.focus&&(n="Focus"),e.positiveStatGain===me.power&&(n="Power"),e.positiveStatGain===me.topSpeed&&(n="Speed"),e.negativeStatGain===me.acceleration&&(r="Acceleration"),e.negativeStatGain===me.adaptability&&(r="Adaptability"),e.negativeStatGain===me.endurance&&(r="Endurance"),e.negativeStatGain===me.focus&&(r="Focus"),e.negativeStatGain===me.power&&(r="Power"),e.negativeStatGain===me.topSpeed&&(r="Speed"),"+"+e.researchLevel+"% "+n+", -"+(e.researchLevel>25?25:e.researchLevel)+"% "+r}getSpecialtyItemDescription(e){var n="",r=5,a=this.globalService.globalVar.modifiers.find(p=>"internationalRacesToMedalModifier"===p.text);null!=a&&(r=a.value);var s=10,o=this.globalService.globalVar.modifiers.find(p=>"nationalRacesToMedalModifier"===p.text);null!=o&&(s=o.value);var l=5,c=this.globalService.globalVar.modifiers.find(p=>"whistleModifier"===p.text);null!=c&&(l=c.value);var u=5,d=this.globalService.globalVar.modifiers.find(p=>"goldenWhistleModifier"===p.text);null!=d&&(u=d.value),"Stopwatch"===e?n="Reduce training time by 5%":"Animal Handler"===e?n="Retain 2% of trained stats after breeding":"Course Maps"===e?n="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?n="Add option to auto breed when Breed XP is full":"Scouts"===e?n="You can choose the order of race legs for each relay team":"Money Mark"===e?n="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?n="Gain 1 medal for every "+s+" free races you complete":"International Races"===e?n="Gain 1 medal for every "+r+" free races you complete":"Team Manager"===e?n="Add option to automatically run 1 free race per reset period <em>(runs for 2 hours of idle time)</em>":"Incubator Upgrade Lv1"===e?n="When breeding, permanently increase racing stat gain from base stat by .1% of positive trait value <em>(up to 10% trait value)</em>":"Incubator Upgrade Lv2"===e?n="When breeding, permanently increase racing stat gain from base stat by .1% of positive trait value <em>(up to 25% trait value)</em>":"Incubator Upgrade Lv3"===e?n="When breeding, permanently increase racing stat gain from base stat by .1% of positive trait value <em>(up to 50% trait value)</em>":"Incubator Upgrade Lv4"===e?n="When breeding, permanently increase racing stat gain from base stat by .1% of positive trait value <em>(up to 100% trait value)</em>":"Whistle"===e?n="Gain +"+l+" to a stat instead of +1 after a successful coaching attempt":"Golden Whistle"===e&&(n="Gain +"+u+" to a stat instead of +"+l+" after a successful coaching attempt");var h=this.sanitizer.sanitize(Xt.HTML,this.sanitizer.bypassSecurityTrustHtml(n));return null!==h&&(n=h),n}getWeatherClusterFromEnum(e){var n="";return e===Ai.clearSkies?n="Clear Skies":e===Ai.inclementWeather?n="Inclement Weather":e===Ai.coldSpell&&(n="Cold Spell"),n}getWeatherClusterDescription(e){var n="";return e===Ai.clearSkies?n="Race terrain shifts between Sunny, Torrid, and Ashfall. \n Flatland and Volcanic Morale increased by 20%.":e===Ai.inclementWeather?n="Race terrain shifts between Rainy, Stormy, Maelstrom, and Hailstorm. \n Ocean Morale increased by 20%.":e===Ai.coldSpell&&(n="Race terrain shifts between Sunny, Snowfall, and Hailstorm. \n Tundra and Mountain Morale increased by 20%."),n}topSpeedPopover(e){var n=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultMaxSpeedModifier");null!=a&&(n=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,me.topSpeed),c=1;e.talentTree.talentTreeType===lt.longDistance&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases max speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return s>1&&(u+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}accelerationPopover(e){var n=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAccelerationModifier");null!=a&&(n=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,me.acceleration),c=1;e.talentTree.talentTreeType===lt.sprint&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return s>1&&(u+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}endurancePopover(e){var n=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultStaminaModifier");null!=a&&(n=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,me.endurance),c=1;e.talentTree.talentTreeType===lt.longDistance&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return s>1&&(u+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}powerPopover(e){var n=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultPowerModifier");null!=a&&(n=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,me.power),c=1;e.talentTree.talentTreeType===lt.sprint&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return s>1&&(u+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}focusPopover(e){var n=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultFocusModifier");null!=a&&(n=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,me.focus),c=1;e.talentTree.talentTreeType===lt.longDistance&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return s>1&&(u+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}adaptabilityPopover(e){var n=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAdaptabilityModifier");null!=a&&(n=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,me.adaptability),c=1;e.talentTree.talentTreeType===lt.sprint&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return s>1&&(u+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}abilityPopover(){var e=25,n=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=n&&(e=n.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var n="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(n+="Level Efficiency Multiplier: "+(1+.01*(e.ability.abilityLevel-1))),n}bonusFreeRaceXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusLocalBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusLocalBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusLocalBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusCircuitRaceXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusCircuitBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+2*e.miscStats.bonusCircuitBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusCircuitBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusTrainingXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusTrainingBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusTrainingBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusTrainingBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusDiminishingReturnsPerFacilityLevelPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusDiminishingReturnsCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusDiminishingReturnsCertificateCount+" (Certificates Used: "+e.miscStats.bonusDiminishingReturnsCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusTrainingTimeReductionPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction();return r>0&&(n+="Track Race Rewards: "+r+"%\n"),n}bonusTalentsPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();return r>0&&(n+="Track Race Rewards: "+r+"\n"),n}isAmountMoreThanCertificateCap(e,n,r){var a=!1;return e=+e,"Free Race Breed XP Gain Certificate"===r&&n.miscStats.bonusLocalBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Circuit Race Breed XP Gain Certificate"===r&&n.miscStats.bonusCircuitBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Training Breed XP Gain Certificate"===r&&n.miscStats.bonusTrainingBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Diminishing Returns Increase Certificate"===r&&n.miscStats.bonusDiminishingReturnsCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),a}getAnimalMorale(e){if(null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e);return null==n?0:n.morale}changeGrandPrixMorale(e,n){if(null!=this.globalService.globalVar.eventRaceData&&null!=this.globalService.globalVar.eventRaceData.animalData&&0!==this.globalService.globalVar.eventRaceData.animalData.length){var r=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e);null!=r&&(r.morale+=n,r.morale>=3&&(r.morale=3),r.morale<=.5&&(r.morale=.5))}}getWeekDayGrandPrixTimeSpan(){var e=new Vi;return this.utilityService.getDayOfWeekFromNumber(e.weekStartDay)+" "+this.utilityService.get24HourFormat(e.weekStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekEndDay)+" "+this.utilityService.get24HourFormat(e.weekEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekEndHour)+")"}getWeekEndGrandPrixTimeSpan(){var e=new Vi;return this.utilityService.getDayOfWeekFromNumber(e.weekendStartDay)+" "+this.utilityService.get24HourFormat(e.weekendStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekendEndDay)+" "+this.utilityService.get24HourFormat(e.weekendEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendEndHour)+")"}getRandomTip(){var e="",n=[];return this.globalService.globalVar.settings.get("hideTips")||(n.push("After upgrading training options, reselect them to gain their benefits!"),n.push("Don't forget to export your save regularly!"),n.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),n.push("Small barns allow training for 2 hours, medium for 4 hours, and large for 8 hours. Your animals will train even when the game is not active."),n.push("Each animal is predisposed to racing a certain way, meaning they may gain more or less racing stats from a base stat than other animals. Hover over each base stat in the Animals tab to see its modifier."),n.push("Can't quite finish a close race and don't want to breed? Burst Chance and Distance are not affected by Diminishing Returns, so you can continue to increase those stats to try and push you over the edge!"),e=n[this.utilityService.getRandomInteger(0,n.length-1)]),e}getTotalFreeRacesPerPeriod(){var e=10,n=this.globalService.globalVar.modifiers.find(s=>"freeRacesPerTimePeriodModifier"===s.text);void 0!==n&&(e=n.value);var r=this.getRenown();return e+Math.floor(r/100)}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}getRelayEffectFromListByType(e,n){if(null!=e&&0!==e.length)return e.find(r=>r.effectType===n)}isEquipmentItemAnOrb(e){return"Amethyst Orb"===e||"Sapphire Orb"===e||"Amber Orb"===e||"Topaz Orb"===e||"Emerald Orb"===e||"Ruby Orb"===e}getStatGainDescription(e,n){var r="";return e.topSpeed>0&&(r+="+"+n*e.topSpeed+" Speed\n"),e.acceleration>0&&(r+="+"+n*e.acceleration+" Acceleration\n"),e.endurance>0&&(r+="+"+n*e.endurance+" Endurance\n"),e.focus>0&&(r+="+"+n*e.focus+" Focus\n"),e.power>0&&(r+="+"+n*e.power+" Power\n"),e.adaptability>0&&(r+="+"+n*e.adaptability+" Adaptability\n"),r}getTalentTreeNames(){var e=[];return e.push("Sprint"),e.push("Support"),e.push("Long Distance"),e}getInDepthTalentTreeDescription(e){var n="";return"Sprint"===e?n="Sprinters excel at going short distances quickly. Whether it's through chaining together quick Bursts or powerful abilities, these racers will leave others in the dust at the starting line. Recommended for when you want to get the most out of Burst effects and high acceleration.":"Support"===e?n="Supporters excel when working alongside other animals. They have a special way of encouraging the racers after and sometimes before them to reach new limits. Recommended for when you want to get the most out of Relay effects.":"Long Distance"===e&&(n="Long Distance Racers excel when given time to ramp up and go the distance. These racers manage their stamina well and can reach incredible speeds over time. Recommended for racers with high max speed and that have abilities that improve over time."),n}getTalentDescription(e,n,r,a){var s="";return(null==a||a<=0)&&(a=1),r===lt.sprint&&(0===e&&0===n&&(s="Increase Adaptability stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(s="Increase Adaptability Distance by <span class='keyword'>"+5*a+"</span>% until you lose focus for the first time."),2===e&&0===n&&(s="Increase Adaptability Distance gain from Adaptability stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(s="Every time you make it through a special path without stumbling, enter a Burst that lasts <span class='keyword'>"+5*a+"</span>% as long as normal."),0===e&&1===n&&(s="Increase Acceleration stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(s="The first time velocity exceeds Max Speed while bursting, increase remaining burst distance by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===n&&(s="Increase Acceleration Rate gain from Acceleration stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(s="Each time your velocity reaches Max Speed, increase Max Speed by <span class='keyword'>"+.5*a+"</span>% and reduce Focus Distance by <span class='keyword'>"+.5*a+"</span>%. This effect can occur 10 times, up to <span class='keyword'>"+5*a+"</span>%."),0===e&&2===n&&(s="Increase Power stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(s="Increase Power Efficiency by <span class='keyword'>"+5*a+"</span>%, but consume stamina <span class='keyword'>"+5*a+"</span>% faster."),2===e&&2===n&&(s="Increase Power Efficiency gain from Power stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(s="The first time you use an ability every race, the efficiency is increased by <span class='keyword'>"+5*a+"</span>%.")),r===lt.support&&(0===e&&0===n&&(s="Increase Relay Animal's Adaptability Distance by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(s="Increase the effectiveness of your Relay effects by <span class='keyword'>"+2*a+"</span>%."),2===e&&0===n&&(s="Increase Relay Animal's Max Speed by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(s="The racer prior to you gains any relay effects you provide for <span class='keyword'>"+3*a+"</span>% of the normal length if possible."),0===e&&1===n&&(s="Increase Relay Animal's Acceleration Rate by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(s="Increase Burst Distance of next racer by <span class='keyword'>"+5*a+"</span>% of your Burst Distance on Relay."),2===e&&1===n&&(s="Increase Relay Animal's Stamina by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(s="Increase Burst Chance of next racer by <span class='keyword'>"+3*a+"</span>% of your Burst Chance on Relay."),0===e&&2===n&&(s="Increase Relay Animal's Power Efficiency by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(s="If Relay Animal ability has a cooldown, reduce it by <span class='keyword'>"+2*a+"</span>%."),2===e&&2===n&&(s="Increase Relay Animal's Focus Distance by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(s="Increase Relay Animal's Ability Efficiency by <span class='keyword'>"+2*a+"</span>%.")),r===lt.longDistance&&(0===e&&0===n&&(s="Increase Focus stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(s="Every burst increases Burst Velocity Bonus by <span class='keyword'>"+.5*a+"</span>%."),2===e&&0===n&&(s="Increase Focus Distance gain from Focus stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(s="Instead of reducing velocity to 10% when losing focus, reduce to <span class='keyword'>"+(10+2*a)+"</span>%."),0===e&&1===n&&(s="Increase Max Speed stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(s="While your velocity is 25% of your Max Speed or below, increase your Acceleration Rate by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===n&&(s="Increase Max Speed gain from Speed stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(s="After surpassing <span class='keyword'>"+.5*a+"</span>% of your Max Speed, your velocity can no longer drop below it. All calculations consider this to be 0% of your velocity."),0===e&&2===n&&(s="Increase Endurance stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(s="While stamina is below 35%, reduce stamina consumption by <span class='keyword'>"+5*a+"</span>%."),2===e&&2===n&&(s="Increase Stamina gain from Endurance stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(s="When running out of stamina, increase the percent regained by <span class='keyword'>"+2*a+"</span>%.")),s}getTalentUpgradeDescription(e,n,r,a){}getTotalPossiblePointsByRowColumn(e,n,r){var a=0;return r===lt.sprint&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),r===lt.support&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),r===lt.longDistance&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),a}getTalentPointsAvailableToAnimal(e){var n=0;return n=this.getResourceByName("Talent Points"),n+=e.miscStats.bonusTalents,(n-=e.talentTree.getTotalSpentPoints())<=0&&(n=0),n}}return t.\u0275fac=function(e){return new(e||t)(Ve(yt),Ve($i),Ve(xs))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yi=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.totalTime=0,this.gameUpdateEvent=new Ke}Update(){var e=Date.now();const n=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=n,this.totalTime+=n;var r=performance.now();this.globalService.globalVar.lastTimeStamp=e,this.gameUpdateEvent.emit(n),this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(Ve(yt),Ve(hn))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class xl{constructor(i,e){this.transformationType=i,this.options=e,this.recursionStack=new Set}transform(i,e,n,r,a,s=0){if(Array.isArray(e)||e instanceof Set){const o=r&&this.transformationType===Ht.PLAIN_TO_CLASS?function S4(t){const i=new t;return i instanceof Set||"push"in i?i:[]}(r):[];return e.forEach((l,c)=>{const u=i?i[c]:void 0;if(this.options.enableCircularCheck&&this.isCircular(l))this.transformationType===Ht.CLASS_TO_CLASS&&(o instanceof Set?o.add(l):o.push(l));else{let d;if("function"!=typeof n&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(this.transformationType===Ht.PLAIN_TO_CLASS){d=n.options.discriminator.subTypes.find(y=>y.name===l[n.options.discriminator.property]);const b=n.typeFunction({newObject:o,object:l,property:void 0});d=void 0===d?b:d.value,n.options.keepDiscriminatorProperty||delete l[n.options.discriminator.property]}this.transformationType===Ht.CLASS_TO_CLASS&&(d=l.constructor),this.transformationType===Ht.CLASS_TO_PLAIN&&(l[n.options.discriminator.property]=n.options.discriminator.subTypes.find(p=>p.value===l.constructor).name)}else d=n;const h=this.transform(u,l,d,void 0,l instanceof Map,s+1);o instanceof Set?o.add(h):o.push(h)}}),o}if(n===String&&!a)return null==e?e:String(e);if(n===Number&&!a)return null==e?e:Number(e);if(n===Boolean&&!a)return null==e?e:Boolean(e);if((n===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function C4(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(n===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function w4(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((o,l)=>{e.then(c=>o(this.transform(void 0,c,n,void 0,void 0,s+1)),l)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!n&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(n=e.constructor)),!n&&i&&(n=i.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const o=this.getKeys(n,e,a);let l=i||{};!i&&(this.transformationType===Ht.PLAIN_TO_CLASS||this.transformationType===Ht.CLASS_TO_CLASS)&&(l=a?new Map:n?new n:{});for(const c of o){if("__proto__"===c||"constructor"===c)continue;const u=c;let p,d=c,h=c;if(!this.options.ignoreDecorators&&n)if(this.transformationType===Ht.PLAIN_TO_CLASS){const C=nr.findExposeMetadataByCustomName(n,c);C&&(h=C.propertyName,d=C.propertyName)}else if(this.transformationType===Ht.CLASS_TO_PLAIN||this.transformationType===Ht.CLASS_TO_CLASS){const C=nr.findExposeMetadata(n,c);C&&C.options&&C.options.name&&(d=C.options.name)}p=this.transformationType===Ht.PLAIN_TO_CLASS?e[u]:e instanceof Map?e.get(u):e[u]instanceof Function?e[u]():e[u];let b,y=p instanceof Map;if(n&&a)b=n;else if(n){const C=nr.findTypeMetadata(n,h);if(C){const I={newObject:l,object:e,property:h},W=C.typeFunction?C.typeFunction(I):C.reflectedType;C.options&&C.options.discriminator&&C.options.discriminator.property&&C.options.discriminator.subTypes?e[u]instanceof Array?b=C:(this.transformationType===Ht.PLAIN_TO_CLASS&&(b=C.options.discriminator.subTypes.find(G=>{if(p&&p instanceof Object&&C.options.discriminator.property in p)return G.name===p[C.options.discriminator.property]}),b=void 0===b?W:b.value,C.options.keepDiscriminatorProperty||p&&p instanceof Object&&C.options.discriminator.property in p&&delete p[C.options.discriminator.property]),this.transformationType===Ht.CLASS_TO_CLASS&&(b=p.constructor),this.transformationType===Ht.CLASS_TO_PLAIN&&p&&(p[C.options.discriminator.property]=C.options.discriminator.subTypes.find(G=>G.value===p.constructor).name)):b=W,y=y||C.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(I=>I.target===n&&!!I.properties[h]).forEach(I=>b=I.properties[h]);else if(this.options.enableImplicitConversion&&this.transformationType===Ht.PLAIN_TO_CLASS){const I=Reflect.getMetadata("design:type",n.prototype,h);I&&(b=I)}}const w=Array.isArray(e[u])?this.getReflectedType(n,h):void 0,S=i?i[u]:void 0;if(l.constructor.prototype){const C=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if((this.transformationType===Ht.PLAIN_TO_CLASS||this.transformationType===Ht.CLASS_TO_CLASS)&&(C&&!C.set||l[d]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(p)){if(this.transformationType===Ht.CLASS_TO_CLASS){let C=p;C=this.applyCustomTransformations(C,n,c,e,this.transformationType),(void 0!==C||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,C):l[d]=C)}}else{const C=this.transformationType===Ht.PLAIN_TO_CLASS?d:c;let I;this.transformationType===Ht.CLASS_TO_PLAIN?(I=e[C],I=this.applyCustomTransformations(I,n,C,e,this.transformationType),I=e[C]===I?p:I,I=this.transform(S,I,b,w,y,s+1)):void 0===p&&this.options.exposeDefaultValues?I=l[d]:(I=this.transform(S,p,b,w,y,s+1),I=this.applyCustomTransformations(I,n,C,e,this.transformationType)),(void 0!==I||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,I):l[d]=I)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}applyCustomTransformations(i,e,n,r,a){let s=nr.findTransformMetadatas(e,n,this.transformationType);return void 0!==this.options.version&&(s=s.filter(o=>!o.options||this.checkVersion(o.options.since,o.options.until))),s=s.filter(this.options.groups&&this.options.groups.length?o=>!o.options||this.checkGroups(o.options.groups):o=>!o.options||!o.options.groups||!o.options.groups.length),s.forEach(o=>{i=o.transformFn({value:i,key:n,obj:r,type:a,options:this.options})}),i}isCircular(i){return this.recursionStack.has(i)}getReflectedType(i,e){if(!i)return;const n=nr.findTypeMetadata(i,e);return n?n.reflectedType:void 0}getKeys(i,e,n){let r=nr.getStrategy(i);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||n)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),n)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&i&&(a=[...nr.getExposedProperties(i,this.transformationType),...nr.getExcludedProperties(i,this.transformationType)]),!this.options.ignoreDecorators&&i){let s=nr.getExposedProperties(i,this.transformationType);this.transformationType===Ht.PLAIN_TO_CLASS&&(s=s.map(l=>{const c=nr.findExposeMetadata(i,l);return c&&c.options&&c.options.name?c.options.name:l})),a=this.options.excludeExtraneousValues?s:a.concat(s);const o=nr.getExcludedProperties(i,this.transformationType);o.length>0&&(a=a.filter(l=>!o.includes(l))),void 0!==this.options.version&&(a=a.filter(l=>{const c=nr.findExposeMetadata(i,l);return!c||!c.options||this.checkVersion(c.options.since,c.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?l=>{const c=nr.findExposeMetadata(i,l);return!c||!c.options||this.checkGroups(c.options.groups)}:l=>{const c=nr.findExposeMetadata(i,l);return!(c&&c.options&&c.options.groups&&c.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(s=>this.options.excludePrefixes.every(o=>s.substr(0,o.length)!==o))),a=a.filter((s,o,l)=>l.indexOf(s)===o),a}checkVersion(i,e){let n=!0;return n&&i&&(n=this.options.version>=i),n&&e&&(n=this.options.version<e),n}checkGroups(i){return!i||this.options.groups.some(e=>i.includes(e))}}const Ml={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},da=new class T4{instanceToPlain(i,e){return new xl(Ht.CLASS_TO_PLAIN,Ir(Ir({},Ml),e)).transform(void 0,i,void 0,void 0,void 0,void 0)}classToPlainFromExist(i,e,n){return new xl(Ht.CLASS_TO_PLAIN,Ir(Ir({},Ml),n)).transform(e,i,void 0,void 0,void 0,void 0)}plainToInstance(i,e,n){return new xl(Ht.PLAIN_TO_CLASS,Ir(Ir({},Ml),n)).transform(void 0,e,i,void 0,void 0,void 0)}plainToClassFromExist(i,e,n){return new xl(Ht.PLAIN_TO_CLASS,Ir(Ir({},Ml),n)).transform(i,e,void 0,void 0,void 0,void 0)}instanceToInstance(i,e){return new xl(Ht.CLASS_TO_CLASS,Ir(Ir({},Ml),e)).transform(void 0,i,void 0,void 0,void 0,void 0)}classToClassFromExist(i,e,n){return new xl(Ht.CLASS_TO_CLASS,Ir(Ir({},Ml),n)).transform(e,i,void 0,void 0,void 0,void 0)}serialize(i,e){return JSON.stringify(this.instanceToPlain(i,e))}deserialize(i,e,n){const r=JSON.parse(e);return this.plainToInstance(i,r,n)}deserializeArray(i,e,n){const r=JSON.parse(e);return this.plainToInstance(i,r,n)}};function cD(t,i,e){return da.plainToInstance(t,i,e)}let uD=(()=>{class t{constructor(e,n,r){this.globalService=e,this.utilityService=n,this.lookupService=r}getSpecializationPopoverText(e,n){if(e===dn.Attraction){var r=60,a=this.globalService.globalVar.modifiers.find(S=>"attractionTimeToCollectModifier"===S.text);null!=a&&(r=a.value);var s=0,o=this.globalService.globalVar.modifiers.find(S=>"attractionAmountModifier"===S.text);return null!=o&&(s=o.value*n),"Amount Earned: "+s+" Coins / "+r+" seconds\n"}if(e===dn.ResearchCenter){var l=this.globalService.globalVar.modifiers.find(S=>"researchCenterIncrementsModifier"===S.text),c=this.globalService.globalVar.modifiers.find(S=>"researchCenterTrainingAnimalModifier"===S.text),u=this.globalService.globalVar.modifiers.find(S=>"researchCenterStudyingAnimalModifier"===S.text),d=this.globalService.globalVar.modifiers.find(S=>"researchCenterMaxStatGainModifier"===S.text);if(null==l||null==c||null==u||null==d)return"";var h=n*l.value,b="Training Animal Stat Gain: "+(100*(c.value+h<d.value?c.value+h:d.value)).toFixed(0)+"%\n",y=(h-(d.value-c.value))/(d.value-u.value);return y>0?(Math.floor(y)>0&&(b+="Additional Studying Animal Stat Gain (x"+Math.floor(y)+"): "+(100*d.value).toFixed(0)+"%\n"),y>Math.floor(y)&&(b+="Additional Studying Animal Stat Gain: "+(100*((y-Math.floor(y))*(d.value-u.value)+u.value)).toFixed(0)+"%\n")):b+="Additional Studying Animal Stat Gain: "+(100*u.value).toFixed(0)+"%\n",b}return""}handleResearchCenterStatIncrease(e,n){var r=this.globalService.globalVar.modifiers.find(G=>"researchCenterIncrementsModifier"===G.text),a=this.globalService.globalVar.modifiers.find(G=>"researchCenterTrainingAnimalModifier"===G.text),s=this.globalService.globalVar.modifiers.find(G=>"researchCenterStudyingAnimalModifier"===G.text),o=this.globalService.globalVar.modifiers.find(G=>"researchCenterMaxStatGainModifier"===G.text);if(null!=r&&null!=a&&null!=s&&null!=o&&null!=e.currentTraining){var w,c=n.barnUpgrades.specializationLevel*r.value,u=e.currentTraining.affectedStatRatios.topSpeed,d=e.currentTraining.affectedStatRatios.acceleration,h=e.currentTraining.affectedStatRatios.endurance,p=e.currentTraining.affectedStatRatios.power,b=e.currentTraining.affectedStatRatios.focus,y=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new Ee((w=a.value+c<o.value?a.value+c:o.value)*u,w*d,w*h,w*p,w*b,w*y)),this.globalService.calculateAnimalRacingStats(e);var S=(c-(o.value-a.value))/(o.value-s.value),C=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(S>0){C.length<S&&(S=C.length);for(var I=0;I<Math.floor(S);I++)C[I].increaseStats(new Ee(o.value*u,o.value*d,o.value*h,o.value*p,o.value*b,o.value*y)),this.globalService.calculateAnimalRacingStats(C[I]);if(S>Math.floor(S)&&C.length>I){var W=s.value+(S-Math.floor(S))*(o.value-s.value);C[I].increaseStats(new Ee(W*u,W*d,W*h,W*p,W*b,W*y)),this.globalService.calculateAnimalRacingStats(C[I])}}else C.length>=1&&(C[0].increaseStats(new Ee((W=s.value)*u,W*d,W*h,W*p,W*b,W*y)),this.globalService.calculateAnimalRacingStats(C[0]))}}getAnimalsInRandomOrder(e,n){for(var r=[],a=this.globalService.globalVar.animals.filter(u=>u.raceCourseType===e&&u.isAvailable&&u.type!==n.type),s=this.globalService.globalVar.animals.filter(u=>u.raceCourseType!==e&&u.isAvailable),o=a.length,l=0;l<o;l++){var c=this.utilityService.getRandomInteger(1,a.length);r.push(a[c-1]),a=a.filter(u=>u!==a[c-1])}for(o=s.length,l=0;l<o;l++)c=this.utilityService.getRandomInteger(1,s.length),r.push(s[c-1]),s=s.filter(h=>h!==s[c-1]);return r}handleAttractionRevenue(e,n){var r=this.globalService.globalVar.barns.find(d=>d.barnNumber===n.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===dn.Attraction){var a=60,s=this.globalService.globalVar.modifiers.find(d=>"attractionTimeToCollectModifier"===d.text);null!=s&&(a=s.value);var o=0,l=this.globalService.globalVar.modifiers.find(d=>"attractionAmountModifier"===d.text);for(null!=l&&(o=l.value),o*=r.barnUpgrades.specializationLevel,r.barnUpgrades.currentDeltaTime+=e,null!==n.currentTraining&&r.barnUpgrades.currentDeltaTime>=n.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=n.currentTraining.trainingTimeRemaining);r.barnUpgrades.currentDeltaTime>=a;){r.barnUpgrades.currentDeltaTime-=a;var u=this.globalService.globalVar.resources.find(d=>"Coins"===d.name);void 0!==u&&(u.amount+=o)}}}}return t.\u0275fac=function(e){return new(e||t)(Ve(yt),Ve($i),Ve(hn))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ar=(()=>{return(t=Ar||(Ar={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",Ar;var t})();let Wm=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e,n){this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var r=new Yh,a=0,s=0,o=0,l=0,c=0;e.raceLegs.forEach(pe=>a+=pe.distance);var u=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var d=a/e.timeToComplete,h=this.globalService.globalVar.animalDecks.find(pe=>pe.isPrimaryDeck),p=0;this.timeToComplete=e.timeToComplete;var b=[],y=[],w=Ar.None,S=0,C=0,I=0,W=0,G=0,Q=0,te=1,de=new Tt,ke=new Tt;if(void 0===h)return r.errorMessage="No relay team selected.",r;if(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(h),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],e.raceUI.racePositionByFrame=[],e.timeToComplete<=180)r.addRaceUpdate(u,Math.round(e.timeToComplete)+" seconds are on the race clock.");else{var Me=this.globalService.getRemainingEventRaceTime()+this.globalService.globalVar.eventRaceData.bonusTime,Ce=this.utilityService.getHoursRemainingFromSeconds(Me),Ye=this.utilityService.getMinutesLeftInHourRemainingFromSeconds(Me),vt=this.utilityService.getSecondsLeftInMinuteRemainingFromSeconds(Me),Rt=Math.floor(vt).toString(),Zt=Ce.toString(),Gt=Ye.toString();Ce<10&&(Zt=Ce<1||Ce>59?"00":String(Zt).padStart(2,"0")),Ye<10&&(Gt=Ye<1||Ye>59?"00":String(Gt).padStart(2,"0")),vt<10&&(Rt=vt<1||vt>59?"00":String(Rt).padStart(2,"0")),r.addRaceUpdate(u,Zt+":"+Gt+":"+Rt+" is left on the race clock.")}return e.raceLegs.forEach(pe=>{var D=null;null!=(D=this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(qe=>qe.raceCourseType===pe.courseType))?this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||(D.raceVariables=new ss,D.totalRacesRun+=1):alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(pe=>{var D=void 0;if(null!=(D=this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(et=>et.raceCourseType===pe.courseType))){this.increasePersistentAbilityXp(D);var qe=void 0;this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&(qe=this.globalService.globalVar.eventRaceData.previousRaceSegmentData);var Lt=void 0,an=new In,dt="<span class='coloredText "+pe.getCourseTypeClass()+"'>"+D.name+"</span>",sn="",Cn="";if(C>0){var Kn=this.racingAnimals.find(et=>et.raceCourseType===e.raceLegs[C-1].courseType);null!=Kn&&(de=Kn)}else de=null;if(C<e.raceLegs.length-1){an=e.raceLegs[C+1];var ar=this.racingAnimals.find(et=>et.raceCourseType===an.courseType);null!=ar&&(ke=ar,Cn="<span class='coloredText "+an.getCourseTypeClass()+"'>"+(null==ke?void 0:ke.name)+"</span>")}else ke=null;this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&r.addRaceUpdate(u,dt+" clears "+Math.round(this.selectedRace.length).toLocaleString()+" meters of the Grand Prix and moves onto the next leg of the race.");var _n=pe.terrain.maxSpeedModifier,ai=pe.terrain.accelerationModifier,si=pe.terrain.staminaModifier,Pi=pe.terrain.powerModifier,Ei=pe.terrain.focusModifier,Si=pe.terrain.adaptabilityModifier;u<this.timeToComplete*this.frameModifier&&(y.length>0&&void 0!==(Lt=y[y.length-1])&&(sn="<span class='coloredText "+Lt.getCourseTypeClass()+"'>"+(null==de?void 0:de.name)+"</span>"),this.getPrelayEffects(D,ke,null==an?void 0:an.terrain,1,r,u,sn,an,pe),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.PrepareRacingAnimal(r,u,sn,D,b,pe,Lt,void 0,void 0,o,c,l),this.prepareRacingLeg(pe,D),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix||r.addRaceUpdate(u,dt+" starts their leg of the race."));var Mn=D.currentStats.stamina,it=0,fi=pe.distance,on=new Qh,Wn=new Qh,On=!1,Un=1,mr={permanentAdaptabilityIncreaseMultiplier:1},va={permanentMaxSpeedIncreaseMultiplier:1},vr=1,ba=1,cs={coldBloodedIncreaseMultiplier:1},Vs=1,Ii=[],Et=1,Wi=!1,go=0,ut=[!1,!1,!1,!1,!1],Ct=!1,br=0,_f=0,yf=0;if(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix){var Du=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime();_f+=d*Du,yf=this.globalService.globalVar.eventRaceData.distanceCovered}s+yf>d*(u/this.frameModifier)+_f?(Wi||(Vu=!0),Wi=!0):(Wi&&(Vu=!0),Wi=!1),null!=qe&&(it=qe.velocity,D.currentStats.stamina=qe.stamina,W=qe.deepBreathingStaminaGain,Un=qe.permanentMaxSpeedIncreaseMultiplier,mr.permanentAdaptabilityIncreaseMultiplier=qe.permanentAdaptabilityIncreaseMultiplier,va.permanentMaxSpeedIncreaseMultiplier=qe.permanentMaxSpeedIncreaseObjMultiplier,vr=qe.feedingFrenzyIncreaseMultiplier,ba=qe.greatMigrationAccelerationIncreaseAdditive,cs.coldBloodedIncreaseMultiplier=qe.coldBloodedIncreaseMultiplier,Vs=qe.fleetingSpeedIncreaseMultiplier,D.raceVariables=qe.raceVariables.makeCopy(),qe.nineTailsBuffs.length>0&&qe.nineTailsBuffs.forEach(et=>{Ii.push(et)}),qe.relayEffects.length>0&&qe.relayEffects.forEach(et=>{null!=D&&(D.raceVariables.relayEffects.push(et),null!=D.raceVariables.relayEffects&&D.raceVariables.relayEffects.length>0&&D.raceVariables.relayEffects.forEach(Vv=>{Vv.isMultiplicative?D.currentStats.multiplyCurrentRacingStats(Vv.relayAffectedStatRatios):D.currentStats.addCurrentRacingStats(Vv.relayAffectedStatRatios)}))}),Ct=qe.longDistanceTalentIncreaseAccelerationWithLowVelocity,br=qe.maxSpeedFloor,Et=qe.statLossFromExhaustion);var xu=this.lookupService.getRelayEffectFromListByType(D.raceVariables.relayEffects,ft.camouflage);void 0!==xu&&void 0!==xu.additionalValue&&(G=xu.additionalValue);var us=this.lookupService.getRelayEffectFromListByType(D.raceVariables.relayEffects,ft.herdMentality);void 0!==us&&void 0!==us.additionalValue&&(I=us.additionalValue);var ds=this.lookupService.getRelayEffectFromListByType(D.raceVariables.relayEffects,ft.specialDelivery);if(void 0!==ds&&void 0!==ds.additionalValue&&(Q=ds.additionalValue),"Nap"===D.ability.name&&D.type===q.Hare){var hs=pe.distance-this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et);hs<0&&(hs=0),D.ability.remainingLength=hs}var Fs=this.lookupService.getRelayEffectFromListByType(D.raceVariables.relayEffects,ft.deepBreathing);if(void 0!==Fs&&void 0!==Fs.additionalValue){var Mu=D.raceVariables.relayEffects.filter(et=>et.effectType===ft.deepBreathing);void 0!==Mu&&Mu.forEach(et=>{void 0!==et.additionalValue&&(W=et.additionalValue),W>0&&D.type!==q.Goat&&(D.currentStats.stamina+=W)})}for(var Bl=u;Bl<=this.timeToComplete*this.frameModifier;Bl++){go+=1,w=Ar.None;var mo=!1,ku=0;if(p>0)for(var Ll=0;Ll<p;Ll++)ku+=e.raceLegs[Ll].distance;d=this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime):a/this.timeToComplete;var kn=s-ku,Ti=0,Di=!1,_a=0;if(pe.pathData.forEach(et=>{!Di&&kn>=_a&&kn<_a+et.length&&(Di=!0,on=et,Ti=kn-_a),et.legStartingDistance=_a,_a+=et.length,Di||(Wn=et)}),"Night Vision"===D.ability.name&&D.type===q.Gecko&&!D.ability.abilityInUse&&!Wn.didAnimalLoseFocus&&Wn.length>0&&(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCap||(this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount+=1,Un+=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100,this.globalService.increaseAbilityXp(D),D.ability.abilityInUse=!0)),"Feeding Frenzy"===D.ability.name&&D.type===q.Shark){var vo=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et);if(kn<=vo||kn>=pe.distance-vo){vr=1.5;var Au=this.globalService.globalVar.modifiers.find(et=>"feedingFrenzyPositiveModifier"===et.text);void 0!==Au&&(vr=Au.value)}else vr=1}I>0&&(D.raceVariables.isBursting=!0,mo=!0,D.currentStats.stamina+=I,I=0,null!=de&&(de.ability.abilityUsed=!0)),"Navigator"===D.ability.name&&D.type===q.Dolphin&&(D.ability.abilityInUse=!1),D.type===q.Fox&&"Fleeting Speed"===D.ability.name&&!D.ability.abilityUsed&&(Vs+=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100,D.ability.abilityUsed=!0),D.type===q.Dolphin&&"Echolocation"===D.ability.name&&(D.ability.abilityInUse?(pe.terrain.maxSpeedModifier<1&&(pe.terrain.maxSpeedModifier=1),pe.terrain.accelerationModifier<1&&(pe.terrain.accelerationModifier=1),pe.terrain.staminaModifier<1&&(pe.terrain.staminaModifier=1),pe.terrain.powerModifier<1&&(pe.terrain.powerModifier=1),pe.terrain.focusModifier<1&&(pe.terrain.focusModifier=1),pe.terrain.adaptabilityModifier<1&&(pe.terrain.adaptabilityModifier=1)):(pe.terrain.maxSpeedModifier=_n,pe.terrain.accelerationModifier=ai,pe.terrain.staminaModifier=si,pe.terrain.powerModifier=Pi,pe.terrain.focusModifier=Ei,pe.terrain.adaptabilityModifier=Si,this.checkForBlinders(pe,D))),On=on===pe.pathData[pe.pathData.length-1];var Bs=this.getModifiedAdaptability(D,mr,Et,Ii,pe,kn,ke,an,r,u,dt,Cn),bo=this.getModifiedFocus(D,Et,Ii,cs),Cf=this.didAnimalStumble(D,on,Ti,pe.terrain,mr,Bs,Et,u,dt,r),GR=this.didAnimalLoseFocus(D,this.timeToComplete,e.length,s,pe.terrain,Et,Ii,cs,on,bo);if(GR){if(D.raceVariables.lostFocus=!0,D.raceVariables.hasLostFocusDuringRace=!0,D.raceVariables.currentLostFocusLength=D.raceVariables.defaultLostFocusLength,D.raceVariables.metersSinceLostFocus=0,S=it,this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix){var jR=.02,wv=this.globalService.globalVar.modifiers.find(et=>"focusMoraleLossModifier"===et.text);null!=wv&&(jR=wv.value),this.lookupService.changeGrandPrixMorale(D.type,-jR)}if("Night Vision"===D.ability.name&&D.type===q.Gecko&&(Un=1),D.getEquippedItemName()===this.globalService.getEquipmentName(Xe.scaryMask)&&Wi&&!D.raceVariables.scaryMaskEffectOccurred){D.raceVariables.scaryMaskEffectOccurred=!0;var Sv=2,zR=this.globalService.globalVar.modifiers.find(et=>"scaryMaskEquipmentModifier"===et.text);void 0!==zR&&(Sv=zR.value),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=Sv:this.timeToComplete+=Sv}r.addRaceUpdate(u,dt+" is distracted and lost focus!")}if(Cf){if(D.raceVariables.stumbled=!0,D.raceVariables.currentStumbledLength=D.raceVariables.defaultStumbledLength,S=it,this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix){var $R=.02,Tv=this.globalService.globalVar.modifiers.find(et=>"stumbleMoraleLossModifier"===et.text);null!=Tv&&($R=Tv.value),this.lookupService.changeGrandPrixMorale(D.type,-$R)}r.addRaceUpdate(u,dt+" stumbles!")}if(0===D.currentStats.stamina){var wf=.9,WR=this.globalService.globalVar.modifiers.find(et=>"exhaustionStatLossModifier"===et.text);if(void 0!==WR&&(wf=WR.value),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix){var Dv=1-wf;wf=1-(Dv*=1/this.lookupService.getAnimalMorale(D.type))}Et*=wf;var Rv=.1,qR=this.globalService.globalVar.modifiers.find(et=>"exhaustionStatLossMinimumModifier"===et.text);void 0!==qR&&(Rv=qR.value),Et<Rv&&(Et=Rv),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.setStaminaLossForEventAnimal(Et,D.type);var Sf=.5;if(D.talentTree.talentTreeType===lt.longDistance&&(Sf+=.02*D.talentTree.column3Row4Points),D.getEquippedItemName()===this.globalService.getEquipmentName(Xe.quickSnack)){Sf=1;var XR=this.globalService.globalVar.modifiers.find(et=>"quickSnackEquipmentModifier"===et.text);void 0!==XR&&(Sf=XR.value)}D.currentStats.stamina=Mn*Sf,r.addRaceUpdate(u,dt+" runs out of stamina and must slow down.")}if(D.raceVariables.lostFocus||D.raceVariables.stumbled){if(D.raceVariables.lostFocus){w=Ar.LostFocus;var YR=.9;D.talentTree.talentTreeType===lt.longDistance&&(YR-=.02*D.talentTree.column1Row4Points);var xv=S*YR;it>br&&(it-=xv/D.raceVariables.defaultLostFocusLength),D.raceVariables.currentLostFocusLength-=1,0===D.raceVariables.currentLostFocusLength&&(D.raceVariables.lostFocus=!1)}D.raceVariables.stumbled&&(w=Ar.Stumble,xv=S-S*on.stumbleSeverity,it>br&&(it-=xv/D.raceVariables.defaultStumbledLength),D.raceVariables.currentStumbledLength-=1,0===D.raceVariables.currentStumbledLength&&(D.raceVariables.stumbled=!1))}else{var Fi=D.currentStats.accelerationMs;if(Fi*=pe.terrain.accelerationModifier,Fi*=Et,D.type===q.Horse&&"Pacemaker"===D.ability.name&&D.ability.abilityInUse&&(Fi*=1.5),D.type===q.Cheetah&&"Sprint"===D.ability.name&&D.ability.abilityInUse&&(Fi*=1.35),D.type===q.Cheetah&&"Giving Chase"===D.ability.name&&!Wi&&(Fi*=1+this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100),"Feeding Frenzy"===D.ability.name&&D.type===q.Shark&&(Fi*=vr),D.type===q.Caribou&&"Great Migration"===D.ability.name&&(Fi+=ba),"Wild Toboggan"===D.ability.name&&D.type===q.Penguin&&D.ability.abilityInUse){var rz=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100,_o=20,QR=this.globalService.globalVar.modifiers.find(et=>"maxDriftAmountModifier"===et.text);void 0!==QR&&(_o=QR.value),(Ul=on.driftAmount)>(_o*=2)&&(Ul=_o),Fi*=1+rz*(Math.abs(Ul)/_o),D.ability.abilityInUse=!0}"Nap"===D.ability.name&&D.type===q.Hare&&(D.ability.remainingLength-=d*(1/this.frameModifier),D.ability.remainingLength<=0&&(D.ability.remainingLength=0),D.ability.remainingLength>0&&(Fi=0)),"Buried Treasure"===D.ability.name&&D.type===q.Octopus&&go<8*this.frameModifier&&(Fi=0),D.type===q.Salamander&&"Heat Up"===D.ability.name&&D.ability.abilityInUse&&(Fi*=1+.15*D.ability.totalUseCount),D.type===q.Fox&&"Trickster"===D.ability.name&&"Acceleration"===D.ability.tricksterStatLoss&&D.ability.abilityInUse&&(Fi*=.75),D.type===q.Fox&&"Trickster"===D.ability.name&&"Acceleration"===D.ability.tricksterStatGain&&D.ability.abilityInUse&&(Fi*=1.5),D.type===q.Fox&&"Nine Tails"===D.ability.name&&(Fi*=1+.15*this.getNineTailsBuffCount("Acceleration",Ii)),D.getEquippedItemName()===this.globalService.getEquipmentName(Xe.athleticTape)&&D.raceVariables.isBursting&&(Fi*=.5),Ct&&(Fi*=1+.05*D.talentTree.column2Row2Points),it+=Fi/this.frameModifier}it<0&&(it=0);var An=D.currentStats.maxSpeedMs;if(An*=pe.terrain.maxSpeedModifier,An*=Et,D.type===q.Cheetah&&"Sprint"===D.ability.name&&D.ability.abilityInUse&&(An*=1.35),D.type===q.Cheetah&&"On The Hunt"===D.ability.name&&(An*=Un),"Nap"===D.ability.name&&D.type===q.Hare&&(An*=2),Wi&&D.type===q.Shark&&"Blood In The Water"===D.ability.name&&(An*=1+this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100),null!==ke&&ke.type===q.Shark&&"Feeding Frenzy"===ke.ability.name||null!==de&&de.type===q.Shark&&"Feeding Frenzy"===de.ability.name){var KR=.9,ZR=this.globalService.globalVar.modifiers.find(et=>"feedingFrenzyNegativeModifier"===et.text);void 0!==ZR&&(KR=ZR.value),An*=KR}if("Feeding Frenzy"===D.ability.name&&D.type===q.Shark&&(An*=vr),"Quick Toboggan"===D.ability.name&&D.type===q.Penguin&&(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCap||(this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount+=1,An*=va.permanentMaxSpeedIncreaseMultiplier)),D.type===q.Gecko&&"Night Vision"===D.ability.name&&(An*=Un),D.type===q.Fox&&"Trickster"===D.ability.name&&"Max Speed"===D.ability.tricksterStatLoss&&D.ability.abilityInUse&&(An*=.75),D.type===q.Fox&&"Trickster"===D.ability.name&&"Max Speed"===D.ability.tricksterStatGain&&D.ability.abilityInUse&&(An*=1.5),D.type===q.Fox&&"Fleeting Speed"===D.ability.name){var Pu=Vs;(Pu-=.02*Math.floor(kn/pe.distance*100)*(Pu-1))<1&&(Pu=1),An*=Pu}if(D.type===q.Fox&&"Nine Tails"===D.ability.name&&(An*=1+.15*this.getNineTailsBuffCount("Max Speed",Ii)),D.talentTree.talentTreeType===lt.sprint&&(An*=1+.005*D.talentTree.column2Row4Points*D.raceVariables.velocityReachesMaxSpeedCount),D.talentTree.talentTreeType===lt.longDistance&&it>An*(.005*D.talentTree.column2Row4Points)&&(br=An*(.005*D.talentTree.column2Row4Points)),D.getEquippedItemName()===this.globalService.getEquipmentName(Xe.incense)){var JR=.9,ex=this.globalService.globalVar.modifiers.find(et=>"incenseEquipmentModifier"===et.text);void 0!==ex&&(JR=ex.value),it>=An*JR&&(it=An)}Ct=D.talentTree.talentTreeType===lt.longDistance&&it<=.25*An,it>An&&(it=An,D.talentTree.talentTreeType===lt.sprint&&D.raceVariables.velocityReachesMaxSpeedCount<10&&(D.raceVariables.velocityReachesMaxSpeedCount+=1));var Mv=this.doesRacerMiniBurst(D,Wn),kv=this.doesRacerBurst(D,on,this.timeToComplete,e.length,s,Bs,bo);if(kv||Mv||mo){if(D.raceVariables.isBursting=!0,(kv||mo)&&(D.raceVariables.remainingBurstMeters+=this.getBurstDistance(D,pe.terrain.powerModifier,Et)),Mv&&(D.raceVariables.remainingBurstMeters+=this.getBurstDistance(D,pe.terrain.powerModifier,Et)*(.05*D.talentTree.column1Row4Points)),D.raceVariables.burstCount+=1,D.type===q.Monkey&&"Frenzy"===D.ability.name&&(D.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et),this.globalService.increaseAbilityXp(D)),D.type===q.Hare&&"Prey Instinct"===D.ability.name&&!D.ability.abilityUsed&&(D.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et),D.ability.abilityUsed=!0),D.type===q.Octopus&&"Big Brain"===D.ability.name&&!(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCap)){var oz=Math.round(pe.pathData.length/3);if(D.raceVariables.burstCount===oz){this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount+=1,r.addRaceUpdate(u,dt+" uses "+(null==D?void 0:D.ability.name)+".");var lz=1+this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100,cz=this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;this.AddRelayEffect(new Tt,D,cz,new Ee(1,1,1,lz,1,1),!0,ft.bigBrain,!0);var tx=4,nx=this.globalService.globalVar.modifiers.find(et=>"relayAbilityXpGainModifier"===et.text);void 0!==nx&&(tx=nx.value),this.globalService.increaseAbilityXp(D,tx)}}if((kv||mo)&&r.addRaceUpdate(u,"<strong>BURST!</strong> "+dt+" is breaking their limit!"),Mv&&r.addRaceUpdate(u,"<strong>MINI BURST!</strong> "+dt+" is breaking their limit!"),D.type!==q.Cheetah||"On The Hunt"!==D.ability.name||this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCap||(this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount+=1,Un+=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100,this.globalService.increaseAbilityXp(D)),D.type===q.Goat&&"Deep Breathing"===D.ability.name&&!(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCap)){this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount+=1;var Tf=Mn*(this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100);D.currentStats.stamina+=Tf,r.addRaceUpdate(u,dt+" uses "+D.ability.name+"."),D.currentStats.stamina>Mn&&(Tf=D.currentStats.stamina-Mn,vo=0,this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(Tf*=.2),this.AddRelayEffect(new Tt,D,vo,new Ee(0,0,0,0,0,0),!1,ft.deepBreathing,!0,Tf),D.currentStats.stamina=Mn),this.globalService.increaseAbilityXp(D)}}var sr=it;if(G>0){var Av=this.lookupService.getRelayEffectFromListByType(D.raceVariables.relayEffects,ft.camouflage);if(void 0!==Av&&void 0!==Av.additionalValue){var Pv=kn/Av.remainingRelayMeters;Pv>1&&(Pv=1),(sr+=(1-Pv)*G)>1.5*An&&(sr=1.5*An)}}if(D.raceVariables.isBursting){w=Ar.Burst;var Eu=1.25;D.type===q.Goat&&"In The Rhythm"===D.ability.name&&(Eu+=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100),Eu+=Q,D.talentTree.talentTreeType===lt.longDistance&&(Eu+=D.raceVariables.burstCount*(.005*D.talentTree.column1Row2Points)),D.raceVariables.remainingBurstMeters>=sr/this.frameModifier?(D.raceVariables.remainingBurstMeters-=(sr*=Eu)/this.frameModifier,D.raceVariables.remainingBurstMeters<0&&(sr+=D.raceVariables.remainingBurstMeters,D.raceVariables.remainingBurstMeters=0)):(sr-=D.raceVariables.remainingBurstMeters,sr+=D.raceVariables.remainingBurstMeters*Eu,D.raceVariables.remainingBurstMeters=0,D.raceVariables.isBursting=!1,r.addRaceUpdate(u,dt+"'s burst ends.")),D.talentTree.talentTreeType===lt.sprint&&!D.raceVariables.velocityExceedsMaxSpeedDuringBurst&&sr>An&&D.raceVariables.isBursting&&(D.raceVariables.remainingBurstMeters+=D.raceVariables.remainingBurstMeters*(.05*D.talentTree.column2Row2Points),D.raceVariables.velocityExceedsMaxSpeedDuringBurst=!0)}var or=sr/this.frameModifier;if(D.ability.abilityInUse&&(D.type===q.Monkey&&"Leap"===D.ability.name||D.type===q.Octopus&&"Propulsion"===D.ability.name)){var dz=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et);or+=dz/D.ability.totalFrames,D.ability.remainingFrames-=1,D.ability.remainingFrames<=0&&(D.ability.abilityInUse=!1)}if(pe.courseType===H.Tundra){var Ul;if(this.handleTundraDrift(D,on,Wn,On,Bs,pe.terrain,Ti,or,Et,va,r,dt,u))or=0,it=0,r.addRaceUpdate(u,dt+" slides into a wall and loses all momentum!");else if((Ul=Math.abs(on.driftAmount))<=(_o=20)&&!On){var ix=1-Ul/100;or*=ix,An*=ix}this.tundraPreviousYAmount=D.raceVariables.icyCurrentYAmount}if(pe.courseType===H.Volcanic?this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.selectedRace.raceUI.lavaFallPercentByFrame.push([0,0,0,0,0]):this.handleLavaFall(D,go,e.length/this.timeToComplete,kn,pe.distance,r,u,ut)&&(this.timeToComplete=u/this.frameModifier):this.selectedRace.raceLegs.some(et=>et.courseType===H.Volcanic)&&this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),s+=or>fi?fi:or,fi-=or,e.raceUI.distanceCoveredByFrame.push(Math.round(1e5*s)/1e5),e.raceUI.velocityByFrame.push(Math.round(1e5*or)/1e5),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix||e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push(Math.round(1e5*An)/1e5),e.raceUI.staminaPercentByFrame.push(Math.round(D.currentStats.stamina/Mn*1e5)/1e5),e.raceUI.racerEffectByFrame.push(w),this.handleRacePositionByFrame(e,d,u,this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+s:s),this.handleStamina(D,r,or,u,pe.terrain,Mn),GR||(D.raceVariables.metersSinceLostFocus+=or),D.type===q.Fox&&"Nine Tails"===D.ability.name&&(this.checkForNineTailsBuff(on,Ii,D,pe,Et,r,u,dt),Ii.length>0&&(Ii.forEach(et=>{et[1]-=or}),Ii=Ii.filter(et=>et[1]>0))),D.ability.abilityInUse&&D.ability.remainingLength>0&&(D.ability.remainingLength-=or,D.type===q.Gecko&&"Camouflage"===D.ability.name&&(D.ability.remainingLength-=or),D.ability.remainingLength<=0)){if(D.ability.abilityInUse=!1,D.ability.currentCooldown=D.ability.cooldown,D.getEquippedItemName()===this.globalService.getEquipmentName(Xe.pendant)){var Nu=.9;void 0!==(Ou=this.globalService.globalVar.modifiers.find(et=>"pendantEquipmentModifier"===et.text))&&(Nu=Ou.value),D.ability.currentCooldown*=Nu}if(null!=D.raceVariables&&null!=D.raceVariables.relayEffects&&D.raceVariables.relayEffects.length>0){var Ev=this.lookupService.getRelayEffectFromListByType(D.raceVariables.relayEffects,ft.supportAbilityCooldown);void 0!==Ev&&void 0!==Ev.additionalValue&&(D.ability.currentCooldown*=Ev.additionalValue)}}if(null!=D.ability.currentCooldown&&D.ability.currentCooldown<=0&&this.abilityRedundancyCheck(D,it,on,pe,fi,Et)){var Ou;if(this.useAbility(D,e,pe,Et,Mn,kn,cs),(Ls=new Z).value=u,Ls.text=D.type===q.Fox&&"Trickster"===D.ability.name?D.getAbilityUseUpdateText(dt,", gaining "+D.ability.tricksterStatGain+" but losing "+D.ability.tricksterStatLoss):D.getAbilityUseUpdateText(dt),r.raceUpdates.push(Ls),D.ability.currentCooldown=D.ability.cooldown,D.getEquippedItemName()===this.globalService.getEquipmentName(Xe.pendant))Nu=.9,void 0!==(Ou=this.globalService.globalVar.modifiers.find(bz=>"pendantEquipmentModifier"===bz.text))&&(Nu=Ou.value),D.ability.currentCooldown*=Nu;if(D.type===q.Caribou&&"Great Migration"===D.ability.name){var Iv=.1*Mn;D.currentStats.stamina-=Iv,ba=Iv>1?.25*Iv:1}}null!=D.raceVariables.relayEffects&&D.raceVariables.relayEffects.length>0&&(D.raceVariables.relayEffects.forEach(et=>{et.remainingRelayMeters<=or?(et.remainingRelayMeters=0,et.isMultiplicative?null==D||D.currentStats.divideCurrentRacingStats(et.relayAffectedStatRatios):null==D||D.currentStats.subtractCurrentRacingStats(et.relayAffectedStatRatios),r.addRaceUpdate(u,dt+"'s relay effect ends.")):et.remainingRelayMeters-=or}),D.raceVariables.relayEffects=D.raceVariables.relayEffects.filter(et=>et.remainingRelayMeters>0));var Ls,ax=10;this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(ax=20),0!==u&&u!==this.timeToComplete&&u%(ax*this.frameModifier)==0&&((Ls=new Z).value=u,Ls.text=this.getUpdateMessageByRelativeDistance(d,u,this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+s:s,dt),r.raceUpdates.push(Ls));var Vu=!1,sx=0,ox=0;if(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(Du=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime(),sx+=d*Du,ox=this.globalService.globalVar.eventRaceData.distanceCovered),s+ox>d*(u/this.frameModifier)+sx?(Wi||(Vu=!0),Wi=!0):(Wi&&(Vu=!0),Wi=!1),Vu&&D.type===q.Shark&&"Apex Predator"===D.ability.name&&!D.ability.abilityUsed&&Bl>1){r.addRaceUpdate(u,dt+" bites the other racers as they pass, slowing them down."),D.ability.abilityUsed=!0;var mz=this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et),Nv=this.timeToComplete*(mz/this.selectedRace.length),lx=1.5*Nv;this.timeToComplete+=lx-Nv,this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(this.globalService.globalVar.eventRaceData.bonusTime+=lx-Nv),this.globalService.increaseAbilityXp(D)}if(D.ability.currentCooldown-=1/this.frameModifier,u+=1,fi<=0){r.addRaceUpdate(u,dt+" finishes their leg of the race."),pe.legComplete=!0,C+=1,this.preRacerResetRelayEffectCheck(D,ke,r,u,dt,pe,pe,Et,sr,Mn),D.type===q.Octopus&&"Buried Treasure"===D.ability.name&&(te=1+this.lookupService.GetAbilityEffectiveAmount(D,pe.terrain.powerModifier,Et)/100),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped?this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.endOfLegRelayEffectCheck(D,new Tt,r,u,sn,pe,pe,Et,sr,bo,Bs):this.PrepareRacingAnimal(r,u,sn,D,void 0,void 0,void 0,Et,void 0,sr),pe.terrain.accelerationModifier=ai,pe.terrain.maxSpeedModifier=_n,pe.terrain.staminaModifier=si,pe.terrain.powerModifier=Pi,pe.terrain.focusModifier=Ei,pe.terrain.adaptabilityModifier=Si,b.push(D),y.push(pe);break}u===this.timeToComplete*this.frameModifier&&(pe.terrain.accelerationModifier=ai,pe.terrain.maxSpeedModifier=_n,pe.terrain.staminaModifier=si,pe.terrain.powerModifier=Pi,pe.terrain.focusModifier=Ei,pe.terrain.adaptabilityModifier=Si),o=sr,l=Bs,c=bo}if(p+=1,this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix){var cx=.05,Ov=this.globalService.globalVar.modifiers.find(et=>"segmentCompleteMoraleBoostModifier"===et.text);null!=Ov&&(cx=Ov.value),this.lookupService.changeGrandPrixMorale(D.type,cx),this.globalService.globalVar.eventRaceData.previousRaceSegmentData=this.carryOverEventRaceSegmentData(D,it,Un,mr.permanentAdaptabilityIncreaseMultiplier,va.permanentMaxSpeedIncreaseMultiplier,vr,ba,cs.coldBloodedIncreaseMultiplier,Vs,Ii,W,Ct,br)}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),e.raceLegs.some(pe=>!pe.legComplete)?(r.wasSuccessful=!1,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You lost the race...")):(e.isCompleted=!0,r.wasSuccessful=!0,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You won the race!")),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.racingAnimals.forEach(pe=>{this.PrepareRacingAnimal(r,u,"",pe,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=s,r.wasSuccessful&&this.raceWasSuccessfulUpdate(r,te),r}getStaminaModifier(e,n,r){var a,s=this.globalService.globalVar.modifiers.find(o=>"staminaModifier"===o.text);return a=void 0===s?.2:s.value,null!=e&&null!=e.staminaModifier&&(a*=e.staminaModifier),n.talentTree.talentTreeType===lt.sprint&&(a*=1+.05*n.talentTree.column3Row2Points),n.talentTree.talentTreeType===lt.longDistance&&n.currentStats.stamina/r<=.35&&(a*=1-.05*n.talentTree.column3Row2Points),a}handleStamina(e,n,r,a,s,o){var l=this.getStaminaModifier(s,e,o);e.type===q.Horse&&"Second Wind"===e.ability.name&&e.ability.abilityInUse||(e.currentStats.stamina-=e.type===q.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*l*2:r*l),e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}getBurstDistance(e,n,r){var a=0,s=this.globalService.globalVar.modifiers.find(b=>"breedLevelStatModifier"===b.text);null!=s&&(a=s.value),a=1+a*(e.breedLevel-1);var o=1;e.type===q.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(o*=.75),e.type===q.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(o*=1.5);var l=e.currentStats.powerMs*o*n*r,c=1;if(e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.runningShoes)){var u=1.2,d=this.globalService.globalVar.modifiers.find(b=>"runningShoesEquipmentModifier"===b.text);void 0!==d&&(u=d.value),c=1+e.raceVariables.burstCount*(u-1)}var h=0,p=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,ft.supportBurstDistance);return void 0!==p&&void 0!==p.additionalValue&&(h=p.additionalValue),e.currentStats.calculateBurstDistance(a,void 0,l)*c+h}doesRacerMiniBurst(e,n){var r=!1;return null!=n&&n.isSpecialPath&&(e.talentTree.talentTreeType===lt.sprint&&e.talentTree.column1Row4Points>0&&!n.didAnimalStumble&&!n.checkedForMiniBurst&&(r=!0),n.checkedForMiniBurst=!0),r}getBurstChance(e,n,r){var a=1e3/this.selectedRace.length,s=0,o=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=o&&(s=o.value);var l=e.currentStats.calculateBurstChance(s=1+s*(e.breedLevel-1),n,r)*a,c=0,u=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,ft.supportBurstChance);return void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue),l+c}doesRacerBurst(e,n,r,a,s,o,l){var c=this.getBurstChance(e,l,o);if(n.checkedForBurst)return!1;if(n.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===q.Gecko&&(e.ability.abilityInUse=!1),e.type===q.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(n.isSpecialPath){var u=this.lookupService.getResourceByName("Course Maps");if(null==u&&(u=0),u>0){var d=1,h=this.globalService.globalVar.modifiers.find(b=>"racerMapsModifier"===b.text);null!=h&&(d=1+u*h.value),c*=d}}return this.utilityService.getRandomNumber(1,100)<=c+1}raceWasSuccessfulUpdate(e,n){var o,r=this.globalService.globalVar.animals.find(S=>S.type===q.Octopus),a="<span class='coloredText waterColor'>"+(null==r?void 0:r.name)+"</span>",s=this.globalService.globalVar.circuitRank,l=0;if(this.selectedRace.isCircuitRace)o=this.globalService.globalVar.circuitRaces.find(S=>S.raceId===this.selectedRace.raceId),this.globalService.globalVar.circuitRaces.filter(S=>S.requiredRank===s).every(S=>S.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Y.Resources)));else if(o=this.globalService.globalVar.localRaces.find(S=>S.raceId===this.selectedRace.raceId&&S.localRaceType===this.selectedRace.localRaceType),this.selectedRace.localRaceType===$t.Free){var u=this.globalService.globalVar.resources.find(S=>"International Races"===S.name),d=this.globalService.globalVar.resources.find(S=>"National Races"===S.name);if(null!=u&&u.amount>0){var h=5,p=this.globalService.globalVar.modifiers.find(S=>"internationalRacesToMedalModifier"===S.text);null!=p&&(h=p.value),this.globalService.globalVar.nationalRaceCountdown>=h&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Y.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else if(null!=d&&d.amount>0){var b=12,y=this.globalService.globalVar.modifiers.find(S=>"nationalRacesToMedalModifier"===S.text);null!=y&&(b=y.value),this.globalService.globalVar.nationalRaceCountdown>=b&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Y.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}}if(this.selectedRace.localRaceType!==$t.Free&&this.selectedRace.localRaceType!==$t.Track){if(void 0===o)return;this.selectedRace.localRaceType===$t.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),o.isCompleted=!0}else this.selectedRace.localRaceType===$t.Free&&(this.globalService.globalVar.nationalRaceCountdown+=1);this.racingAnimals.forEach(S=>{l=this.selectedRace.isCircuitRace?this.lookupService.getCircuitBreedGaugeIncrease(S):this.lookupService.getLocalBreedGaugeIncrease(S),this.globalService.IncreaseAnimalBreedGauge(S,l)}),this.selectedRace.localRaceType!==$t.Track?e.beatMoneyMark=this.checkMoneyMark(e):this.handleTrackRaceRewards(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(S=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(de=>de.name===S.name)){var C=this.globalService.globalVar.resources.find(de=>de.name===S.name);if(null!=C)if(this.selectedRace.localRaceType!==$t.Track)if("Coins"===C.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var I=1.25,W=this.globalService.globalVar.modifiers.find(de=>"moneyMarkRewardModifier"===de.text);null!=W&&(I=W.value),S.amount=Math.round(S.amount*I)}var G=this.lookupService.getRenown();S.amount+=Math.round(S.amount*(G/100)),n>1&&e.addRaceUpdate(e.totalFramesPassed,a+" finds buried treasure at the bottom of the ocean!"),S.amount=Math.round(S.amount*n),C.amount+=S.amount}else"Facility Level"===C.name?(C.amount+=S.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===C.name?C.amount=parseFloat((C.amount+S.amount).toFixed(3)):C.amount+=S.amount;else C.amount+=S.amount}else if("Bonus Breed XP Gain From Training"===S.name&&S.itemType===Y.Other){var Q=this.selectedRace.raceLegs[0].courseType;null!=(te=this.racingAnimals.find(de=>de.raceCourseType===Q))&&(te.miscStats.bonusBreedXpGainFromTraining+=S.amount)}else if("Bonus Breed XP Gain From Free Races"===S.name&&S.itemType===Y.Other)Q=this.selectedRace.raceLegs[0].courseType,null!=(te=this.racingAnimals.find(Me=>Me.raceCourseType===Q))&&(te.miscStats.bonusBreedXpGainFromLocalRaces+=S.amount);else if("Bonus Breed XP Gain From Circuit Races"===S.name&&S.itemType===Y.Other)Q=this.selectedRace.raceLegs[0].courseType,null!=(te=this.racingAnimals.find(Me=>Me.raceCourseType===Q))&&(te.miscStats.bonusBreedXpGainFromCircuitRaces+=S.amount);else if("Training Time Reduction"===S.name&&S.itemType===Y.Other)Q=this.selectedRace.raceLegs[0].courseType,null!=(te=this.racingAnimals.find(Me=>Me.raceCourseType===Q))&&(te.miscStats.trainingTimeReduction+=S.amount);else if("Diminishing Returns per Facility Level"===S.name&&S.itemType===Y.Other)Q=this.selectedRace.raceLegs[0].courseType,null!=(te=this.racingAnimals.find(Me=>Me.raceCourseType===Q))&&(te.miscStats.diminishingReturnsBonus+=S.amount);else if("Orb Pendant"===S.name&&S.itemType===Y.Other)Q=this.selectedRace.raceLegs[0].courseType,null!=(te=this.racingAnimals.find(Me=>Me.raceCourseType===Q))&&(te.canEquipOrb=!0);else if("Bonus Talents"===S.name&&S.itemType===Y.Other){var te;Q=this.selectedRace.raceLegs[0].courseType,null!=(te=this.racingAnimals.find(Me=>Me.raceCourseType===Q))&&(te.miscStats.bonusTalents+=S.amount)}else this.globalService.globalVar.resources.push(new be(S.name,S.amount,S.itemType))})}checkMoneyMark(e){var n=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return n;var a=this.globalService.globalVar.modifiers.find(o=>"moneyMarkPaceModifier"===o.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(n=!0),n}handleTrackRaceRewards(e){if(1===this.selectedRace.raceLegs.length){var n=this.selectedRace.raceLegs[0].courseType,r=this.racingAnimals.find(d=>d.raceCourseType===n);if(void 0!==r){var a=null;if(this.selectedRace.trackRaceType===zn.novice&&(a=r.allTrainingTracks.noviceTrack),this.selectedRace.trackRaceType===zn.intermediate&&(a=r.allTrainingTracks.intermediateTrack),this.selectedRace.trackRaceType===zn.master&&(a=r.allTrainingTracks.masterTrack),null!==a){var s=this.timeToComplete*this.frameModifier,o=.25,l=this.globalService.globalVar.modifiers.find(d=>"trainingTrackPaceModifier"===d.text);void 0!==l&&(o=l.value);for(var c=0;c<a.totalRewards;c++)c<a.rewardsObtained||e.totalFramesPassed<=s/(1+o*c)&&(a.rewardsObtained=c+1,a.rewardsObtained===a.totalRewards&&(this.selectedRace.trackRaceType===zn.novice&&(r.allTrainingTracks.intermediateTrackAvailable=!0),this.selectedRace.trackRaceType===zn.intermediate&&(r.allTrainingTracks.masterTrackAvailable=!0)),null==this.selectedRace.rewards&&(this.selectedRace.rewards=[]),this.selectedRace.rewards.push(a.rewards[c]));null!=this.selectedRace.rewards&&(this.selectedRace.rewards=this.utilityService.condenseList(this.selectedRace.rewards))}}}}getUpdateMessageByRelativeDistance(e,n,r,a){var s=a,o=e*(n/this.frameModifier);return this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(o+=e*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),r<.5*o?s="Is "+a+" <strong>even moving?!</strong>":r<.75*o?s=a+" is <strong>falling out of the race!</strong>":r<.9*o?s=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*o&&r<=1.1*o?s=a+" is <strong>right on pace!</strong>":r>=1.5*o?s=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*o?s=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*o&&(s=a+" is <strong>barely leading the pack!</strong>"),s}PrepareRacingAnimal(e,n,r,a,s,o,l,c,u,d,h,p){if(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!0),a.ability.currentCooldown=a.ability.cooldown,a.ability.remainingLength=0,a.ability.totalUseCount=0,a.getEquippedItemName()===this.globalService.getEquipmentName(Xe.pendant)){var b=.9,y=this.globalService.globalVar.modifiers.find(I=>"pendantEquipmentModifier"===I.text);void 0!==y&&(b=y.value),a.ability.currentCooldown*=b}if(null!=a.raceVariables&&null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0){var S=this.lookupService.getRelayEffectFromListByType(a.raceVariables.relayEffects,ft.supportAbilityCooldown);void 0!==S&&void 0!==S.additionalValue&&(a.ability.currentCooldown*=S.additionalValue)}a.ability.abilityUsed=!1,a.ability.abilityInUse=!1,null!=a.raceVariables&&(a.raceVariables.ranOutOfStamina=!1,a.raceVariables.burstCount=0,a.raceVariables.metersSinceLostFocus=0,a.raceVariables.hasLostFocusDuringRace=!1,a.raceVariables.firstAbilityUseEffectApplied=!1,a.raceVariables.velocityExceedsMaxSpeedDuringBurst=!1,a.raceVariables.velocityReachesMaxSpeedCount=0),this.globalService.calculateAnimalRacingStats(a),!0!==u&&(null!=s&&s.length>0&&this.endOfLegRelayEffectCheck(s[s.length-1],a,e,n,r,o,l,c,d,h,p),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects.forEach(I=>{a.raceVariables.relayEffects.push(I.makeCopy())}),this.globalService.globalVar.eventRaceData.queuedRelayEffects.length>0&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects=this.globalService.globalVar.eventRaceData.queuedRelayEffects.filter(I=>I.affectsAllRacers))),null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0&&a.raceVariables.relayEffects.forEach(I=>{I.isMultiplicative?a.currentStats.multiplyCurrentRacingStats(I.relayAffectedStatRatios):a.currentStats.addCurrentRacingStats(I.relayAffectedStatRatios)}))}preRacerResetRelayEffectCheck(e,n,r,a,s,o,l,c,u,d){var h=4,p=this.globalService.globalVar.modifiers.find(S=>"relayAbilityXpGainModifier"===S.text);if(void 0!==p&&(h=p.value),null===n&&(n=new Tt),null!=l){if(e.type===q.Caribou&&"Herd Mentality"===e.ability.name&&!e.raceVariables.ranOutOfStamina){var b=e.currentStats.stamina*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100),y=0;this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCap||(this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount+=1,r.addRaceUpdate(a,s+" uses "+e.ability.name+"."),this.AddRelayEffect(n,e,y,new Ee(0,0,0,0,0,0),!1,ft.herdMentality,!1,b),this.globalService.increaseAbilityXp(e,h))}if(!(e.type!==q.Caribou||"Special Delivery"!==e.ability.name||e.raceVariables.ranOutOfStamina||(void 0===d&&(d=1),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCap))){this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount+=1,y=this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;var w=e.currentStats.stamina/d*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100);this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(w*=.2),this.AddRelayEffect(e,e,y,new Ee(0,0,0,0,0,0),!1,ft.specialDelivery,!0,w),r.addRaceUpdate(a,s+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,h)}}}endOfLegRelayEffectCheck(e,n,r,a,s,o,l,c,u,d,h,p=1){var b=4,y=this.globalService.globalVar.modifiers.find(G=>"relayAbilityXpGainModifier"===G.text);if(void 0!==y&&(b=y.value),"Inspiration"===e.ability.name&&e.type===q.Horse&&null!=l){var w=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c);this.AddRelayEffect(n,e,w*p,new Ee(.25*e.currentStats.maxSpeedMs,0,0,0,0,0),!1,ft.inspiration,!1),r.addRaceUpdate(a,s+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.inspirationUseCount+=1)}if("Flowing Current"===e.ability.name&&e.type===q.Dolphin&&null!=l&&(w=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,w*p,new Ee(0,.25*e.currentStats.accelerationMs,0,0,0,0),!1,ft.flowingCurrent,!1),r.addRaceUpdate(a,s+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.flowingCurrentUseCount+=1)),"Navigator"===e.ability.name&&e.type===q.Dolphin&&null!=l&&(w=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,w*p,new Ee(0,0,0,0,0,.25*e.currentStats.adaptabilityMs),!1,ft.navigator,!1),r.addRaceUpdate(a,s+" uses "+(null==e?void 0:e.ability.name)+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.navigatorUseCount+=1)),e.type===q.Gecko&&"Camouflage"===e.ability.name&&null!=l){var C=u;w=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,w*p,new Ee(0,0,0,0,0,0),!1,ft.camouflage,!1,C),r.addRaceUpdate(a,s+" uses "+e.ability.name+"."),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.camouflageUseCount+=1)}if(void 0!==o){var I=new gr;void 0!==l&&(I=l.terrain),void 0===c&&(c=1),void 0===h&&(h=e.currentStats.adaptabilityMs),void 0===d&&(d=e.currentStats.focusMs),this.talentRelayCheck(e,n,o.distance*p,I,c,d,h),this.batonEquipmentCheck(e,n,o.distance*p)}}talentRelayCheck(e,n,r,a,s,o,l,c=1){if(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.talentTree.talentTreeType===lt.support){if(e.talentTree.column1Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,1,1,u=1+.01*e.talentTree.column1Row1Points),!0,ft.supportAdaptabilityRelay,!1),e.talentTree.column1Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(u=1+.01*e.talentTree.column1Row3Points,1,1,1,1,1),!0,ft.supportMaxSpeedRelay,!1),e.talentTree.column2Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,u=1+.01*e.talentTree.column2Row1Points,1,1,1,1),!0,ft.supportAccelerationRelay,!1),e.talentTree.column2Row2Points>0){var u=this.getBurstDistance(e,a.powerModifier,s)*(.05*e.talentTree.column2Row2Points);this.AddRelayEffect(n,e,r*c,new Ee(0,0,0,0,0,0),!1,ft.supportBurstDistance,!1,u)}if(e.talentTree.column2Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,u=1+.01*e.talentTree.column2Row3Points,1,1,1),!0,ft.supportStaminaRelay,!1),e.talentTree.column2Row4Points>0){u=this.getBurstChance(e,o,l)*(.03*e.talentTree.column2Row4Points);this.AddRelayEffect(n,e,r*c,new Ee(0,0,0,0,0,0),!1,ft.supportBurstChance,!1,u)}e.talentTree.column3Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,u=1+.01*e.talentTree.column3Row1Points,1,1),!0,ft.supportPowerRelay,!1),e.talentTree.column3Row2Points>0&&(u=1-.02*e.talentTree.column3Row2Points,this.AddRelayEffect(n,e,r*c,new Ee(0,0,0,0,0,0),!1,ft.supportAbilityCooldown,!1,u)),e.talentTree.column3Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,1,u=1+.01*e.talentTree.column3Row3Points,1),!0,ft.supportFocusRelay,!1),e.talentTree.column3Row4Points>0&&(u=1+.02*e.talentTree.column3Row4Points,this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,1,1,1),!0,ft.supportAbilityEfficiency,!1,u))}}batonEquipmentCheck(e,n,r,a=1){if(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.redBaton)){var s=1.1,o=this.globalService.globalVar.modifiers.find(C=>"redBatonEquipmentModifier"===C.text);void 0!==o&&(s=o.value),this.AddRelayEffect(n,e,r*a,new Ee(s,1,1,1,1,1),!0,ft.redBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.blueBaton)){var l=1.1,c=this.globalService.globalVar.modifiers.find(C=>"blueBatonEquipmentModifier"===C.text);void 0!==c&&(l=c.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,1,1,l,1),!0,ft.blueBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.violetBaton)){var u=1.1,d=this.globalService.globalVar.modifiers.find(C=>"violetBatonEquipmentModifier"===C.text);void 0!==d&&(u=d.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,1,u,1,1),!0,ft.violetBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.greenBaton)){var h=1.1,p=this.globalService.globalVar.modifiers.find(C=>"greenBatonEquipmentModifier"===C.text);void 0!==p&&(h=p.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,1,1,1,h),!0,ft.greenBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.orangeBaton)){var b=1.1,y=this.globalService.globalVar.modifiers.find(C=>"orangeBatonEquipmentModifier"===C.text);void 0!==y&&(b=y.value),this.AddRelayEffect(n,e,r*a,new Ee(1,b,1,1,1,1),!0,ft.orangeBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.yellowBaton)){var w=1.1,S=this.globalService.globalVar.modifiers.find(C=>"yellowBatonEquipmentModifier"===C.text);void 0!==S&&(w=S.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,w,1,1,1),!0,ft.yellowBaton,!1)}}prepareRacingLeg(e,n){e.pathData.forEach(r=>{r.currentStumbleOpportunity=0,r.checkedForBurst=!1,r.checkedForNineTails=!1,r.driftAmount=0,r.didAnimalStumble=!1,r.checkedForDrift=!1}),this.checkForBlinders(e,n)}checkForBlinders(e,n){if(n.getEquippedItemName()===this.globalService.getEquipmentName(Xe.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}getPrelayEffects(e,n,r,a,s,o,l,c,u){null!==n&&void 0!==c&&n.talentTree.talentTreeType===lt.support&&n.talentTree.column1Row4Points>0&&this.endOfLegRelayEffectCheck(n,e,s,o,l,c,u,a,void 0,void 0,void 0,.03*n.talentTree.column1Row4Points)}AddRelayEffect(e,n,r,a,s,o,l,c,u=!1){var d=new Zh;if(d.remainingRelayMeters=r,d.relayAffectedStatRatios=a,d.isMultiplicative=s,d.effectType=o,d.additionalValue=c,d.affectsAllRacers=l,n.talentTree.talentTreeType===lt.support&&n.talentTree.column1Row2Points>0){var h=1+.02*n.talentTree.column1Row2Points;d.isMultiplicative?(d.relayAffectedStatRatios.topSpeed>1&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*h),d.relayAffectedStatRatios.acceleration>1&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*h),d.relayAffectedStatRatios.endurance>1&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*h),d.relayAffectedStatRatios.power>1&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*h),d.relayAffectedStatRatios.focus>1&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*h),d.relayAffectedStatRatios.adaptability>1&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*h),void 0!==d.additionalValue&&d.additionalValue>1&&(d.additionalValue*=h)):(d.relayAffectedStatRatios.topSpeed>0&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*h),d.relayAffectedStatRatios.acceleration>0&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*h),d.relayAffectedStatRatios.endurance>0&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*h),d.relayAffectedStatRatios.power>0&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*h),d.relayAffectedStatRatios.focus>0&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*h),d.relayAffectedStatRatios.adaptability>0&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*h),void 0!==d.additionalValue&&d.additionalValue>0&&(d.additionalValue*=h))}if(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix)if(this.globalService.globalVar.eventRaceData.queuedRelayEffects.some(y=>y.effectType===o))if(this.lookupService.relayEffectTypeStacksEffectiveness(o))null!=(p=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(y=>y.effectType===o))&&(p.relayAffectedStatRatios.addCurrentRacingStats(a),void 0!==p.additionalValue&&void 0!==d.additionalValue&&(p.additionalValue+=d.additionalValue));else{var p;null!=(p=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(w=>w.effectType===o))&&(p.remainingRelayMeters+=r)}else this.globalService.globalVar.eventRaceData.queuedRelayEffects.push(d);else if(l){var b=this.selectedRace.raceLegs.findIndex(y=>y.courseType===e.raceCourseType);this.selectedRace.raceLegs.length>b&&this.selectedRace.raceLegs.slice(b+1).forEach(y=>{var w=this.racingAnimals.find(S=>S.raceCourseType===y.courseType);null!=w&&null!=w.raceVariables&&null!=w.raceVariables.relayEffects&&w.raceVariables.relayEffects.push(d)})}else null!=e&&null!=e.raceVariables&&null!=e.raceVariables.relayEffects&&e.raceVariables.relayEffects.push(d)}didAnimalStumble(e,n,r,a,s,o,l,c,u,d){if(e.raceVariables.stumbled||0===n.frequencyOfStumble||e.type===q.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===q.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===q.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;var h=n.length/n.stumbleOpportunities;if(n.currentStumbleOpportunity===n.stumbleOpportunities&&n.routeDesign!==je.Regular&&e.type===q.Goat&&"Sure-footed"===e.ability.name&&(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCap||(this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount+=1,s.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,a.powerModifier,l)/100,this.globalService.increaseAbilityXp(e),n.currentStumbleOpportunity+=1)),n.currentStumbleOpportunity*h<r){n.currentStumbleOpportunity+=1;var b=250;if(this.utilityService.getRandomNumber(1,100)<=n.frequencyOfStumble/(b+=o*a.adaptabilityModifier)*n.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.headband)){var S=3,C=this.globalService.globalVar.modifiers.find(I=>"headbandEquipmentModifier"===I.text);if(void 0!==C&&(S=C.value),e.raceVariables.headbandStumblePreventionCount<S)return e.raceVariables.headbandStumblePreventionCount+=1,d.addRaceUpdate(c,u+"'s headband prevents them from stumbling."),!1}return n.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,n,r,a,s,o,l,c,u,d){if(e.raceVariables.lostFocus||e.type===q.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/n)<a){this.currentLostFocusOpportunity+=1;var b=this.globalService.globalVar.modifiers.find(I=>"focusModifier"===I.text),y=d*s.focusModifier*(void 0===b?.75:b.value);if(e.raceVariables.metersSinceLostFocus<y)return!1;var S=(e.raceVariables.metersSinceLostFocus-y)/e.currentStats.focusMs*100;return this.utilityService.getRandomNumber(1,100)<=S&&(u.didAnimalLoseFocus=!0),!0}return!1}increasePersistentAbilityXp(e){(e.type===q.Cheetah&&"Giving Chase"===e.ability.name||e.type===q.Hare&&"Prey Instinct"===e.ability.name||e.type===q.Hare&&"Nap"===e.ability.name||e.type===q.Goat&&"In The Rhythm"===e.ability.name||e.type===q.Shark&&"Feeding Frenzy"===e.ability.name||e.type===q.Shark&&"Blood In The Water"===e.ability.name||e.type===q.Octopus&&"Buried Treasure"===e.ability.name||e.type===q.Penguin&&"Wild Toboggan"===e.ability.name||e.type===q.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,3)}abilityRedundancyCheck(e,n,r,a,s,o){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===q.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===q.Horse&&n===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===q.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,a.terrain.powerModifier,o)<s)&&!("Sticky"===e.ability.name&&e.type===q.Gecko&&0===r.frequencyOfStumble))}useAbility(e,n,r,a,s,o,l){if(e.ability.abilityUsed=!0,e.type===q.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Monkey){if("Landslide"===e.ability.name){var c=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),u=n.length/this.timeToComplete;this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=c/(u=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=c/u,this.globalService.increaseAbilityXp(e)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e))}if(e.type===q.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e)),e.type===q.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);var d=o/r.distance;d>.5&&(d=.5-(d-.5));var h=.6*d;e.currentStats.stamina+=s*h,e.currentStats.stamina>s&&(e.currentStats.stamina=s),l.coldBloodedIncreaseMultiplier=1+h}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))}if(e.type===q.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e);var p=this.utilityService.getRandomInteger(1,6);1===p&&(e.ability.tricksterStatLoss="Acceleration"),2===p&&(e.ability.tricksterStatLoss="Max Speed"),3===p&&(e.ability.tricksterStatLoss="Adaptability"),4===p&&(e.ability.tricksterStatLoss="Focus"),5===p&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.25*s,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===p&&(e.ability.tricksterStatLoss="Power");var b=this.utilityService.getRandomInteger(1,6);b===p&&(b+=1)>6&&(b=1),1===b&&(e.ability.tricksterStatGain="Acceleration"),2===b&&(e.ability.tricksterStatGain="Max Speed"),3===b&&(e.ability.tricksterStatGain="Adaptability"),4===b&&(e.ability.tricksterStatGain="Focus"),5===b&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.5*s,e.currentStats.stamina>s&&(e.currentStats.stamina=s)),6===b&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,n,r,a,s,o,l,c){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var u=this.utilityService.getRandomInteger(1,4),d=new Z;d.value=l,1===u?(n.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,s)]),d.text=r.getAbilityUseUpdateText(c," (Acceleration)"),o.raceUpdates.push(d)):2===u?(n.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,s)]),d.text=r.getAbilityUseUpdateText(c," (Max Speed)"),o.raceUpdates.push(d)):3===u?(n.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,s)]),d.text=r.getAbilityUseUpdateText(c," (Adaptability)"),o.raceUpdates.push(d)):4===u&&(n.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,s)]),d.text=r.getAbilityUseUpdateText(c," (Focus)"),o.raceUpdates.push(d)),this.globalService.increaseAbilityXp(r)}}getNineTailsBuffCount(e,n){return n.filter(r=>r[0]===e).length}getModifiedAdaptability(e,n,r,a,s,o,l,c,u,d,h,p){var b=e.currentStats.adaptabilityMs*r;return e.type===q.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(b*=1.75),e.type===q.Goat&&"Sure-footed"===e.ability.name&&(b*=n.permanentAdaptabilityIncreaseMultiplier),e.type===q.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(b*=1.4),e.type===q.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(b*=1.6),e.type===q.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(b*=.75),e.type===q.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(b*=1.5),e.type===q.Fox&&"Nine Tails"===e.ability.name&&(b*=1+.15*this.getNineTailsBuffCount("Adaptability",a)),null!==l&&void 0!==c&&"Navigator"===l.ability.name&&l.type===q.Dolphin&&s.distance-o<=this.lookupService.GetAbilityEffectiveAmount(l,c.terrain.powerModifier,r)&&(b+=.25*l.currentStats.adaptabilityMs,l.ability.abilityInUse||u.addRaceUpdate(d,h+" is shown the way by "+p+"'s "+(null==l?void 0:l.ability.name)+" ability."),l.ability.abilityInUse=!0),e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.athleticTape)&&e.raceVariables.isBursting&&(b*=1.5),e.talentTree.talentTreeType===lt.sprint&&!e.raceVariables.hasLostFocusDuringRace&&(b*=1+5*e.talentTree.column1Row2Points/100),b}getModifiedFocus(e,n,r,a){var s=e.currentStats.focusMs*n;return e.type===q.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(s*=1.4),e.type===q.Hare&&"Nap"===e.ability.name&&(s*=2),e.type===q.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===q.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5),e.type===q.Fox&&"Nine Tails"===e.ability.name&&(s*=1+.15*this.getNineTailsBuffCount("Focus",r)),e.type===q.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(s*=a.coldBloodedIncreaseMultiplier),e.getEquippedItemName()===this.globalService.getEquipmentName(Xe.athleticTape)&&e.raceVariables.isBursting&&(s*=1.5),e.talentTree.talentTreeType===lt.sprint&&(s*=1-.005*e.talentTree.column2Row4Points*e.raceVariables.velocityReachesMaxSpeedCount),s}handleTundraDrift(e,n,r,a,s,o,l,c,u,d,h,p,b){var y=!1;if(!n.checkedForDrift){n.checkedForDrift=!0;var w=80,S=-80;if((n.routeDesign===je.Cavern||r.routeDesign===je.Cavern)&&(w=60,S=-60),e.raceVariables.icyCurrentYAmount>=w||e.raceVariables.icyCurrentYAmount<=S||a)return(e.raceVariables.icyCurrentYAmount>=w||e.raceVariables.icyCurrentYAmount<=S)&&(y=!0),n.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,y;var C=this.utilityService.getRandomNumber(1,100),I=1e3,G=n.frequencyOfDrift/(I+=s*o.adaptabilityModifier)*n.length;if(C<G){n.didAnimalStumble=!0,(G-=C)<=0&&(G=0);var Q=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===Q;var te=100,de=20,ke=this.globalService.globalVar.modifiers.find(Ce=>"maxDriftAmountModifier"===Ce.text);void 0!==ke&&(de=ke.value),"Wild Toboggan"===e.ability.name&&e.type===q.Penguin&&(de*=2,te*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===q.Penguin&&(e.ability.abilityInUse=!1);var Me=0;(Me=G>te?de:G/te*de)>de&&(Me=de),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=Me:e.raceVariables.icyCurrentYAmount+=Me,e.raceVariables.icyCurrentYAmount>=w&&(e.raceVariables.icyCurrentYAmount=w),e.raceVariables.icyCurrentYAmount<=S&&(e.raceVariables.icyCurrentYAmount=S),h.addRaceUpdate(b,p+" drifts to the side, losing "+Me.toFixed(2)+"% max speed."),n.driftAmount=e.raceVariables.icyCurrentDirectionUp?-Me:Me,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else n.driftAmount=0,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===q.Penguin&&(h.addRaceUpdate(b,p+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e),d.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,o.powerModifier,u)/100,e.ability.abilityInUse=!0);return y}}handleLavaFall(e,n,r,a,s,o,l,c){for(var u=!1,d=n/this.frameModifier,h=s/r,p=[.4,.45,.5,.55,.6],b=[],y=0;y<p.length;y++){var w=h*p[y],S=d/w;S>1&&(S=1),b.push(Math.round(1e5*S)/1e5);var C=a>p[y]*s,I=C!=c[y];c[y]=C,d>=w&&I&&(e.type===q.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(o.addRaceUpdate(l,"Lava spills out onto the course, forcing you to evacuate."),u=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(b),u}handleRacePositionByFrame(e,n,r,a){var s=this.lookupService.getTotalRacersByRace(e),o=s,l=.25,c=this.globalService.globalVar.modifiers.find(I=>"trainingTrackPaceModifier"===I.text);if(void 0!==c&&(l=c.value),e.localRaceType===$t.Track)for(var u=0;u<s-1;u++)a>e.length/(this.timeToComplete/(1+l*u))*(r/this.frameModifier)&&(o=s-(u+1));else{var p=n*(r/this.frameModifier),b=0;if(this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(p+=b=n*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),2===s)a>p&&(o=1);else if(3===s){a>p&&(o=2);var w=.75,S=this.globalService.globalVar.modifiers.find(I=>"moneyMarkPaceModifier"===I.text);null!=S&&(w=S.value),a>e.length/(this.timeToComplete*w)*(r/this.frameModifier)+b&&(o=1)}}e.raceUI.racePositionByFrame.push(o)}carryOverEventRaceSegmentData(e,n,r,a,s,o,l,c,u,d,h,p,b){var y=new Xh;return y.velocity=n,y.stamina=e.currentStats.stamina,y.permanentMaxSpeedIncreaseMultiplier=r,y.permanentAdaptabilityIncreaseMultiplier=a,y.permanentMaxSpeedIncreaseObjMultiplier=s,y.feedingFrenzyIncreaseMultiplier=o,y.greatMigrationAccelerationIncreaseAdditive=l,y.coldBloodedIncreaseMultiplier=c,y.fleetingSpeedIncreaseMultiplier=u,y.racingAnimalType=e.type,y.deepBreathingStaminaGain=h,y.longDistanceTalentIncreaseAccelerationWithLowVelocity=p,y.maxSpeedFloor=b,d.length>0&&d.forEach(w=>{y.nineTailsBuffs.push(w)}),e.raceVariables.relayEffects.length>0&&e.raceVariables.relayEffects.forEach(w=>{y.relayEffects.push(w)}),this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.associatedAnimalType===e.type&&(y.statLossFromExhaustion=w.exhaustionStatReduction)}),y.raceVariables=e.raceVariables.makeCopy(),y}setStaminaLossForEventAnimal(e,n){this.globalService.globalVar.eventRaceData.animalData.forEach(r=>{r.associatedAnimalType===n&&(r.exhaustionStatReduction=e)})}}return t.\u0275fac=function(e){return new(e||t)(Ve(yt),Ve(hn),Ve($i),Ve(Gm))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let qm=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.gameVersions=[1.05,1.04,1.03,1.02,1.01,1]}getListAscended(){var e=[];return this.gameVersions.forEach(n=>{e.unshift(n)}),e}getLatestChanges(){return this.getVersionChanges(this.gameVersions[0])}getAllChanges(){var e=[];return this.gameVersions.forEach(n=>{e.push(this.getVersionChanges(n))}),e}getVersionChanges(e){var n="";return 1===e&&(n="Initial Launch!"),1.01===e&&(n="Improved UI by adding better notifications and refactoring some clickable text.\n\nBreeding Grounds specialization now grants a 10% bonus to Breeding XP from Training, up from 5%.\n\nRefactored Breed Progression:\n<ul><li>Breed Levels now grant a 5% bonus to racing stats as opposed to 2%. Breed Levels now require twice as much XP.</li><li>Animals have had their breed levels reduced by half to balance this change. Despite this, you should notice a small increase in stats.</li></ul>"),1.02===e&&(n="Event Races now active!\n<ul><li>Select an event deck (now relay team) and run the marathon-style Grand Prix.</li><li>Run a single race over the course of multiple days to unlock new rewards.</li><li>Mix and match powerful Relay abilities with strong long distance racers and see how far you can go!</li></ul>\nMore UI improvements. (better contrast in colors, differentiation of text through various means, etc)\n\nBug fixes."),1.03===e&&(n="Talents are now active!\n<ul><li>Complete Rainbow Races to start earning Talent Points for your animals.</li><li>Each animal can select a unique talent tree and start racing in its own unique way.</li></ul>\nMore UI improvements. (specifically around items/equipment)\n\nBug fixes."),1.04===e&&(n="Ability rebalancing (view Discord Change Log for full info).\n\nChanges to Event Races<ul><li>Leg length adjusts based on your game progress so that the race always feels smooth.</li><li>Certain abilities have different effects during events, viewable when changing abilities.</li><li>Abilities that can trigger multiple times or have a cap are now displayed on the Event Race Info page.</li></ul>\nBug fixes (view Discord Change Log for full info)."),1.05===e&&(n="Changed all references of 'Decks' to 'Relay Teams' for ease of understanding and better theming.\n\nBug fixes and UI improvements (view Discord Change Log for full info)."),n}getDateForVersion(e){var n=new Date;return 1===e&&(n=new Date("2022-07-08 12:00:00")),1.01===e&&(n=new Date("2022-07-10 12:00:00")),1.02===e&&(n=new Date("2022-07-18 12:00:00")),1.03===e&&(n=new Date("2022-07-24 12:00:00")),1.04===e&&(n=new Date("2022-07-27 12:00:00")),1.05===e&&(n=new Date("2022-07-29 12:00:00")),n.toDateString().replace(/^\S+\s/,"")}updatePlayerVersion(){this.getListAscended().forEach(e=>{if(this.globalService.globalVar.currentVersion<e){if(1.01===e){this.globalService.globalVar.notifications=new ef;var n=this.globalService.globalVar.modifiers.find(h=>"breedLevelStatModifier"===h.text);void 0!==n&&(n.value=.05);var r=this.globalService.globalVar.modifiers.find(h=>"breedGaugeMaxIncreaseModifier"===h.text);void 0!==r&&(r.value=10);var a=this.globalService.globalVar.modifiers.find(h=>"breedingGroundsSpecializationModifier"===h.text);void 0!==a&&(a.value=.1),this.globalService.globalVar.animals.forEach(h=>{h.breedLevel=Math.round(h.breedLevel/2),h.breedGaugeXp=2*h.breedGaugeXp});var s=this.globalService.globalVar.animalDecks.find(h=>h.isPrimaryDeck);null!=s&&(s.isEventDeck=!0)}else if(1.02===e){this.globalService.globalVar.eventRaceData=new Vi,this.globalService.globalVar.modifiers.push(new Z(.1,"exhaustionStatLossMinimumModifier")),this.globalService.globalVar.modifiers.push(new Z(5e6,"metersPerCoinsGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(2e7,"metersPerRenownGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(100,"grandPrixCoinRewardModifier")),this.globalService.globalVar.modifiers.push(new Z(5,"grandPrixRenownRewardModifier")),this.globalService.globalVar.modifiers.push(new Z(5e7,"grandPrixToken1MeterModifier")),this.globalService.globalVar.modifiers.push(new Z(1e8,"grandPrixToken2MeterModifier")),this.globalService.globalVar.modifiers.push(new Z(25e7,"grandPrixToken3MeterModifier")),this.globalService.globalVar.modifiers.push(new Z(5e8,"grandPrixToken4MeterModifier")),this.globalService.globalVar.modifiers.push(new Z(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(.02,"exhaustionGainGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(75,"grandPrixBreedLevelRequiredModifier")),this.globalService.globalVar.modifiers.push(new Z(2,"scaryMaskEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Z(1.2,"runningShoesEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Z(.9,"incenseEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Z(.5,"athleticTapeEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Z(.2,"weatherMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new Z(.03,"focusMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new Z(.01,"stumbleMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new Z(.05,"segmentCompleteMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new Z(5,"whistleModifier")),this.globalService.globalVar.modifiers.push(new Z(10,"goldenWhistleModifier")),this.globalService.InitializeTokenShop();var o=this.globalService.globalVar.shop.find(h=>"Specialty"===h.name);if(null!=o){var l=new Je;l.name="Whistle",l.purchasePrice.push(this.globalService.getCoinsResourceValue(2500)),l.basePurchasePrice.push(this.globalService.getCoinsResourceValue(2500)),l.totalShopQuantity=1,l.canHaveMultiples=!1,l.isAvailable=this.lookupService.isItemUnlocked("coaching"),l.type=Y.Specialty,o.itemList.push(l);var c=new Je;c.name="Golden Whistle",c.purchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),c.basePurchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),c.totalShopQuantity=1,c.canHaveMultiples=!1,c.isAvailable=!1,c.type=Y.Specialty,o.itemList.push(c)}this.globalService.globalVar.animals.forEach(h=>{h.allTrainingTracks.noviceTrack.rewards.filter(p=>"Bonus Breed XP Gain From Local Races"===p.name).forEach(p=>{p.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(h=>{h.allTrainingTracks.intermediateTrack.rewards.filter(p=>"Bonus Breed XP Gain From Local Races"===p.name).forEach(p=>{p.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(h=>{h.allTrainingTracks.masterTrack.rewards.filter(p=>"Bonus Breed XP Gain From Local Races"===p.name).forEach(p=>{p.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(h=>{h.breedGaugeMax=200+10*(h.breedLevel-1)})}else if(1.03===e)this.globalService.globalVar.animals.forEach(h=>{(isNaN(Number(h.breedLevel))||null==h.breedLevel)&&(h.breedLevel=1)});else if(1.04===e){this.fixTrackRewardsBug(),this.globalService.globalVar.notifications.isEventRaceNowActive=!1,this.globalService.globalVar.animals.forEach(h=>{if(h.type===q.Cheetah){var p=h.availableAbilities.find(Ce=>"Giving Chase"===Ce.name);void 0!==p&&(p.efficiency=.5),"Giving Chase"===h.ability.name&&(h.ability.efficiency=.5);var b=h.availableAbilities.find(Ce=>"On The Hunt"===Ce.name);void 0!==b&&(b.efficiency=.1),"On The Hunt"===h.ability.name&&(h.ability.efficiency=.1)}if(h.type===q.Goat){var y=h.availableAbilities.find(Ce=>"Deep Breathing"===Ce.name);void 0!==y&&(y.efficiency=.25),"Deep Breathing"===h.ability.name&&(h.ability.efficiency=.25);var w=h.availableAbilities.find(Ce=>"In The Rhythm"===Ce.name);void 0!==w&&(w.efficiency=.1),"In The Rhythm"===h.ability.name&&(h.ability.efficiency=.1);var S=h.availableAbilities.find(Ce=>"Sure-footed"===Ce.name);void 0!==S&&(S.efficiency=.5),"Sure-footed"===h.ability.name&&(h.ability.efficiency=.5)}if(h.type===q.Gecko){var C=h.availableAbilities.find(Ce=>"Night Vision"===Ce.name);void 0!==C&&(C.efficiency=.2),"Night Vision"===h.ability.name&&(h.ability.efficiency=.2)}if(h.type===q.Shark){var I=h.availableAbilities.find(Ce=>"Blood In The Water"===Ce.name);void 0!==I&&(I.efficiency=.1),"Blood In The Water"===h.ability.name&&(h.ability.efficiency=.1)}if(h.type===q.Octopus){var W=h.availableAbilities.find(Ce=>"Buried Treasure"===Ce.name);void 0!==W&&(W.efficiency=1),"Buried Treasure"===h.ability.name&&(h.ability.efficiency=1);var G=h.availableAbilities.find(Ce=>"Big Brain"===Ce.name);void 0!==G&&(G.efficiency=2),"Big Brain"===h.ability.name&&(h.ability.efficiency=2)}if(h.type===q.Penguin){var Q=h.availableAbilities.find(Ce=>"Wild Toboggan"===Ce.name);void 0!==Q&&(Q.efficiency=4),"Wild Toboggan"===h.ability.name&&(h.ability.efficiency=4);var te=h.availableAbilities.find(Ce=>"Quick Toboggan"===Ce.name);void 0!==te&&(te.efficiency=.1),"Quick Toboggan"===h.ability.name&&(h.ability.efficiency=.1)}if(h.type===q.Caribou){var de=h.availableAbilities.find(Ce=>"Herd Mentality"===Ce.name);void 0!==de&&(de.efficiency=.5),"Herd Mentality"===h.ability.name&&(h.ability.efficiency=.5);var ke=h.availableAbilities.find(Ce=>"Special Delivery"===Ce.name);void 0!==ke&&(ke.efficiency=.05),"Special Delivery"===h.ability.name&&(h.ability.efficiency=.05)}if(h.type===q.Fox){var Me=h.availableAbilities.find(Ce=>"Fleeting Speed"===Ce.name);void 0!==Me&&(Me.efficiency=1.5),"Fleeting Speed"===h.ability.name&&(h.ability.efficiency=1.5)}});var u=this.globalService.globalVar.modifiers.find(h=>"autoFreeRacesMaxIdleTimePeriodModifier"===h.text);void 0!==u&&(u.value=7200)}else if(1.05===e){null!=this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.isCatchingUp&&(this.globalService.globalVar.eventRaceData.isCatchingUp=!1);var d=this.globalService.globalVar.modifiers.find(h=>"grandPrixBreedLevelRequiredModifier"===h.text);void 0!==d&&(d.value=50)}this.globalService.globalVar.currentVersion=e}})}fixTrackRewardsBug(){this.globalService.globalVar.animals.filter(e=>e.isAvailable).forEach(e=>{var n=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces(),r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces(),a=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(),s=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel();0===e.miscStats.bonusLocalBreedXpCertificateCount&&(e.miscStats.bonusBreedXpGainFromLocalRaces=n),0===e.miscStats.bonusCircuitBreedXpCertificateCount&&(e.miscStats.bonusBreedXpGainFromCircuitRaces=r),0===e.miscStats.bonusTrainingBreedXpCertificateCount&&(e.miscStats.bonusBreedXpGainFromTraining=a),0===e.miscStats.bonusDiminishingReturnsCertificateCount&&(e.miscStats.diminishingReturnsBonus=s)})}}return t.\u0275fac=function(e){return new(e||t)(Ve(yt),Ve(hn))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),dD=(()=>{class t{constructor(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setProductionMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setDevMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Dt=(()=>{return(t=Dt||(Dt={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.relayTeams=3]="relayTeams",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.trainingtrack=6]="trainingtrack",t[t.talents=7]="talents",t[t.resources=8]="resources",t[t.faqs=9]="faqs",t[t.stats=10]="stats",t[t.settings=11]="settings",Dt;var t})();class D4{}let hD=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.globalVar.tutorials.currentTutorialId=9}getTutorialState(e){var n=new D4;return n.id=e,1===e&&(n.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",n.associatedTab=Dt.barn),2===e&&(n.tutorialText="You'll have to train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following stats:\n\nSpeed: Increase the max speed your animal can run in a race.\nAcceleration: Increase how quickly your animal gains speed.\nEndurance: Increase the distance your animal can run before tiring out and slowing down.\nPower: Increase the efficiency of your unique ability.\nFocus: Increase the distance your animal can run before losing focus and stopping abruptly.\nAdaptability: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",n.associatedTab=Dt.barn),3===e&&(n.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. Check back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right bordered in red.</b>",n.associatedTab=Dt.animals),4===e&&(n.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. You can also run some free races against local competition to make some quick coin.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over an item usually gives you the information you need. Whenever you're ready, start the race. Good luck!\n\n<b>Select the race option outlined in red.</b>",n.associatedTab=Dt.raceselection),5===e&&(n.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. I'll check in with you again a little later. I look forward to seeing how far you can go!\n\n<b>If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",n.associatedTab=Dt.raceselection),6===e&&(n.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",n.associatedTab=Dt.raceselection),7===e&&(n.tutorialText="From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",n.associatedTab=Dt.barn),8===e&&(n.tutorialText="Nicely done. One last thing to talk about before I let you do whatever you want. Click your animal's name to take a shortcut to the animal page and let's talk about breeding. If you haven't named your animal, its type is its name (so for example, Monkey's name is Monkey).\n\n<b>Select your animal's type or name to jump to its page.</b>",n.associatedTab=Dt.barn),9===e&&(n.tutorialText="Here you can see how close your animal is to being able to breed. Training and racing both contribute to this. Once you're ready, you can breed your animal and start racing the offspring. There's a strategic element to this. After breeding, your animal will have its stats set back to their starting points, but the amount that the base stats contribute to the racing stats will increase. To keep up with the competition, you'll need to keep breeding and getting faster animals. But don't breed right before a big race or you might find yourself in trouble!\n\nThat's all I have for you. Good luck and have fun!",n.associatedTab=Dt.animals,this.globalService.globalVar.tutorials.tutorialCompleted=!0),n}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(Ve(yt))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const R4=["addListener","removeListener"],x4=["addEventListener","removeEventListener"],M4=["on","off"];function ir(t,i,e,n){if($(e)&&(n=e,e=void 0),n)return ir(t,i,e).pipe(L0(n));const[r,a]=function P4(t){return $(t.addEventListener)&&$(t.removeEventListener)}(t)?x4.map(s=>o=>t[s](i,o,e)):function k4(t){return $(t.addListener)&&$(t.removeListener)}(t)?R4.map(fD(t,i)):function A4(t){return $(t.on)&&$(t.off)}(t)?M4.map(fD(t,i)):[];if(!r&&jl(t))return Zn(s=>ir(s,i,e))(pi(t));if(!r)throw new TypeError("Invalid event target");return new Ne(s=>{const o=(...l)=>s.next(1<l.length?l:l[0]);return r(o),()=>a(o)})}function fD(t,i){return e=>n=>t[e](i,n)}class E4 extends ue{constructor(i,e){super()}schedule(i,e=0){return this}}const nf={setInterval(...t){const{delegate:i}=nf;return((null==i?void 0:i.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:i}=nf;return((null==i?void 0:i.clearInterval)||clearInterval)(t)},delegate:void 0},pD={now:()=>(pD.delegate||Date).now(),delegate:void 0};class hu{constructor(i,e=hu.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,n){return new this.schedulerActionCtor(this,i).schedule(n,e)}}hu.now=pD.now;const gD=new class N4 extends hu{constructor(i,e=hu.now){super(i,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(i){const{actions:e}=this;if(this._active)return void e.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=e.shift());if(this._active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}}(class I4 extends E4{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){if(this.closed)return this;this.state=i;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(i,e,n=0){return nf.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;nf.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let r,n=!1;try{this.work(i)}catch(a){n=!0,r=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,re(n,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}}),O4=gD;function Xm(t=0,i,e=O4){let n=-1;return null!=i&&(Lv(i)?e=i:n=i),new Ne(r=>{let a=function V4(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=n?this.schedule(void 0,n):r.complete())},a)})}const{isArray:F4}=Array;function mD(t){return 1===t.length&&F4(t[0])?t[0]:t}function vD(...t){return 1===(t=mD(t)).length?pi(t[0]):new Ne(function B4(t){return i=>{let e=[];for(let n=0;e&&!i.closed&&n<t.length;n++)e.push(pi(t[n]).subscribe(Ft(i,r=>{if(e){for(let a=0;a<e.length;a++)a!==n&&e[a].unsubscribe();e=null}i.next(r)})))}}(t))}function rf(...t){const i=$u(t),e=mD(t);return e.length?new Ne(n=>{let r=e.map(()=>[]),a=e.map(()=>!1);n.add(()=>{r=a=null});for(let s=0;!n.closed&&s<e.length;s++)pi(e[s]).subscribe(Ft(n,o=>{if(r[s].push(o),r.every(l=>l.length)){const l=r.map(c=>c.shift());n.next(i?i(...l):l),r.some((c,u)=>!c.length&&a[u])&&n.complete()}},()=>{a[s]=!0,!r[s].length&&n.complete()}));return()=>{r=a=null}}):Zr}function Ci(t){return gt((i,e)=>{pi(t).subscribe(Ft(e,()=>e.complete(),E)),!e.closed&&i.subscribe(e)})}function Qm(...t){const i=$u(t);return gt((e,n)=>{const r=t.length,a=new Array(r);let s=t.map(()=>!1),o=!1;for(let l=0;l<r;l++)pi(t[l]).subscribe(Ft(n,c=>{a[l]=c,!o&&!s[l]&&(s[l]=!0,(o=s.every(Ie))&&(s=null))},E));e.subscribe(Ft(n,l=>{if(o){const c=[l,...a];n.next(i?i(...c):c)}}))})}function _D(t,i){return i?e=>Qc(i.pipe(xi(1),function H4(){return gt((t,i)=>{t.subscribe(Ft(i,E))})}()),e.pipe(_D(t))):Zn((e,n)=>t(e,n).pipe(xi(1),function G4(t){return Mt(()=>t)}(e)))}function yD(t,i=gD){const e=Xm(t,i);return _D(()=>e)}new Ne(E);var z4={left:"right",right:"left",bottom:"top",top:"bottom"};function af(t){return t.replace(/left|right|bottom|top/g,function(i){return z4[i]})}function Ba(t){return t.split("-")[0]}var $4={start:"end",end:"start"};function CD(t){return t.replace(/start|end/g,function(i){return $4[i]})}var Pr="top",ha="bottom",fa="right",Er="left",Km="auto",fu=[Pr,ha,fa,Er],kl="start",pu="end",wD="viewport",gu="popper",SD=fu.reduce(function(t,i){return t.concat([i+"-"+kl,i+"-"+pu])},[]),TD=[].concat(fu,[Km]).reduce(function(t,i){return t.concat([i,i+"-"+kl,i+"-"+pu])},[]),i5=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function pa(t){if(null==t)return window;if("[object Window]"!==t.toString()){var i=t.ownerDocument;return i&&i.defaultView||window}return t}function Al(t){return t instanceof pa(t).Element||t instanceof Element}function Kr(t){return t instanceof pa(t).HTMLElement||t instanceof HTMLElement}function DD(t){return"undefined"!=typeof ShadowRoot&&(t instanceof pa(t).ShadowRoot||t instanceof ShadowRoot)}function Ns(t){return((Al(t)?t.ownerDocument:t.document)||window.document).documentElement}var lo=Math.max,sf=Math.min,Pl=Math.round;function El(t,i){void 0===i&&(i=!1);var e=t.getBoundingClientRect(),n=1,r=1;if(Kr(t)&&i){var a=t.offsetHeight,s=t.offsetWidth;s>0&&(n=Pl(e.width)/s||1),a>0&&(r=Pl(e.height)/a||1)}return{width:e.width/n,height:e.height/r,top:e.top/r,right:e.right/n,bottom:e.bottom/r,left:e.left/n,x:e.left/n,y:e.top/r}}function Zm(t){var i=pa(t);return{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function Jm(t){return El(Ns(t)).left+Zm(t).scrollLeft}function os(t){return pa(t).getComputedStyle(t)}function La(t){return t?(t.nodeName||"").toLowerCase():null}function lf(t){return"html"===La(t)?t:t.assignedSlot||t.parentNode||(DD(t)?t.host:null)||Ns(t)}function ev(t){var i=os(t);return/auto|scroll|overlay|hidden/.test(i.overflow+i.overflowY+i.overflowX)}function RD(t){return["html","body","#document"].indexOf(La(t))>=0?t.ownerDocument.body:Kr(t)&&ev(t)?t:RD(lf(t))}function mu(t,i){var e;void 0===i&&(i=[]);var n=RD(t),r=n===(null==(e=t.ownerDocument)?void 0:e.body),a=pa(n),s=r?[a].concat(a.visualViewport||[],ev(n)?n:[]):n,o=i.concat(s);return r?o:o.concat(mu(lf(s)))}function s5(t){return["table","td","th"].indexOf(La(t))>=0}function xD(t){return Kr(t)&&"fixed"!==os(t).position?t.offsetParent:null}function vu(t){for(var i=pa(t),e=xD(t);e&&s5(e)&&"static"===os(e).position;)e=xD(e);return e&&("html"===La(e)||"body"===La(e)&&"static"===os(e).position)?i:e||function o5(t){var i=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Kr(t)&&"fixed"===os(t).position)return null;for(var r=lf(t);Kr(r)&&["html","body"].indexOf(La(r))<0;){var a=os(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||i&&"filter"===a.willChange||i&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||i}function MD(t,i){var e=i.getRootNode&&i.getRootNode();if(t.contains(i))return!0;if(e&&DD(e)){var n=i;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function tv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function kD(t,i){return i===wD?tv(function r5(t){var i=pa(t),e=Ns(t),n=i.visualViewport,r=e.clientWidth,a=e.clientHeight,s=0,o=0;return n&&(r=n.width,a=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=n.offsetLeft,o=n.offsetTop)),{width:r,height:a,x:s+Jm(t),y:o}}(t)):Al(i)?function l5(t){var i=El(t);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(i):tv(function a5(t){var i,e=Ns(t),n=Zm(t),r=null==(i=t.ownerDocument)?void 0:i.body,a=lo(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=lo(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-n.scrollLeft+Jm(t),l=-n.scrollTop;return"rtl"===os(r||e).direction&&(o+=lo(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}(Ns(t)))}function Il(t){return t.split("-")[1]}function nv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function AD(t){var l,i=t.reference,e=t.element,n=t.placement,r=n?Ba(n):null,a=n?Il(n):null,s=i.x+i.width/2-e.width/2,o=i.y+i.height/2-e.height/2;switch(r){case Pr:l={x:s,y:i.y-e.height};break;case ha:l={x:s,y:i.y+i.height};break;case fa:l={x:i.x+i.width,y:o};break;case Er:l={x:i.x-e.width,y:o};break;default:l={x:i.x,y:i.y}}var c=r?nv(r):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case kl:l[c]=l[c]-(i[u]/2-e[u]/2);break;case pu:l[c]=l[c]+(i[u]/2-e[u]/2)}}return l}function ED(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function ID(t,i){return i.reduce(function(e,n){return e[n]=t,e},{})}function iv(t,i){void 0===i&&(i={});var n=i.placement,r=void 0===n?t.placement:n,a=i.boundary,s=void 0===a?"clippingParents":a,o=i.rootBoundary,l=void 0===o?wD:o,c=i.elementContext,u=void 0===c?gu:c,d=i.altBoundary,h=void 0!==d&&d,p=i.padding,b=void 0===p?0:p,y=ED("number"!=typeof b?b:ID(b,fu)),S=t.rects.popper,C=t.elements[h?u===gu?"reference":gu:u],I=function u5(t,i,e){var n="clippingParents"===i?function c5(t){var i=mu(lf(t)),n=["absolute","fixed"].indexOf(os(t).position)>=0&&Kr(t)?vu(t):t;return Al(n)?i.filter(function(r){return Al(r)&&MD(r,n)&&"body"!==La(r)}):[]}(t):[].concat(i),r=[].concat(n,[e]),s=r.reduce(function(o,l){var c=kD(t,l);return o.top=lo(c.top,o.top),o.right=sf(c.right,o.right),o.bottom=sf(c.bottom,o.bottom),o.left=lo(c.left,o.left),o},kD(t,r[0]));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}(Al(C)?C:C.contextElement||Ns(t.elements.popper),s,l),W=El(t.elements.reference),G=AD({reference:W,element:S,strategy:"absolute",placement:r}),Q=tv(Object.assign({},S,G)),te=u===gu?Q:W,de={top:I.top-te.top+y.top,bottom:te.bottom-I.bottom+y.bottom,left:I.left-te.left+y.left,right:te.right-I.right+y.right},ke=t.modifiersData.offset;if(u===gu&&ke){var Me=ke[r];Object.keys(de).forEach(function(Ce){var Ye=[fa,ha].indexOf(Ce)>=0?1:-1,vt=[Pr,ha].indexOf(Ce)>=0?"y":"x";de[Ce]+=Me[vt]*Ye})}return de}const p5={name:"flip",enabled:!0,phase:"main",fn:function f5(t){var i=t.state,e=t.options,n=t.name;if(!i.modifiersData[n]._skip){for(var r=e.mainAxis,a=void 0===r||r,s=e.altAxis,o=void 0===s||s,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,h=e.altBoundary,p=e.flipVariations,b=void 0===p||p,y=e.allowedAutoPlacements,w=i.options.placement,S=Ba(w),I=l||(S!==w&&b?function h5(t){if(Ba(t)===Km)return[];var i=af(t);return[CD(t),i,CD(i)]}(w):[af(w)]),W=[w].concat(I).reduce(function(dt,rn){return dt.concat(Ba(rn)===Km?function d5(t,i){void 0===i&&(i={});var r=i.boundary,a=i.rootBoundary,s=i.padding,o=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?TD:l,u=Il(i.placement),d=u?o?SD:SD.filter(function(b){return Il(b)===u}):fu,h=d.filter(function(b){return c.indexOf(b)>=0});0===h.length&&(h=d);var p=h.reduce(function(b,y){return b[y]=iv(t,{placement:y,boundary:r,rootBoundary:a,padding:s})[Ba(y)],b},{});return Object.keys(p).sort(function(b,y){return p[b]-p[y]})}(i,{placement:rn,boundary:u,rootBoundary:d,padding:c,flipVariations:b,allowedAutoPlacements:y}):rn)},[]),G=i.rects.reference,Q=i.rects.popper,te=new Map,de=!0,ke=W[0],Me=0;Me<W.length;Me++){var Ce=W[Me],Ye=Ba(Ce),vt=Il(Ce)===kl,Rt=[Pr,ha].indexOf(Ye)>=0,Zt=Rt?"width":"height",Gt=iv(i,{placement:Ce,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),xt=Rt?vt?fa:Er:vt?ha:Pr;G[Zt]>Q[Zt]&&(xt=af(xt));var pe=af(xt),D=[];if(a&&D.push(Gt[Ye]<=0),o&&D.push(Gt[xt]<=0,Gt[pe]<=0),D.every(function(dt){return dt})){ke=Ce,de=!1;break}te.set(Ce,D)}if(de)for(var Lt=function(rn){var sn=W.find(function(pt){var Cn=te.get(pt);if(Cn)return Cn.slice(0,rn).every(function(Kn){return Kn})});if(sn)return ke=sn,"break"},an=b?3:1;an>0&&"break"!==Lt(an);an--);i.placement!==ke&&(i.modifiersData[n]._skip=!0,i.placement=ke,i.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function bu(t,i,e){return lo(t,sf(i,e))}function rv(t){var i=El(t),e=t.offsetWidth,n=t.offsetHeight;return Math.abs(i.width-e)<=1&&(e=i.width),Math.abs(i.height-n)<=1&&(n=i.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:n}}const b5={name:"preventOverflow",enabled:!0,phase:"main",fn:function v5(t){var i=t.state,e=t.options,n=t.name,r=e.mainAxis,a=void 0===r||r,s=e.altAxis,o=void 0!==s&&s,h=e.tether,p=void 0===h||h,b=e.tetherOffset,y=void 0===b?0:b,w=iv(i,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),S=Ba(i.placement),C=Il(i.placement),I=!C,W=nv(S),G=function g5(t){return"x"===t?"y":"x"}(W),Q=i.modifiersData.popperOffsets,te=i.rects.reference,de=i.rects.popper,ke="function"==typeof y?y(Object.assign({},i.rects,{placement:i.placement})):y,Me="number"==typeof ke?{mainAxis:ke,altAxis:ke}:Object.assign({mainAxis:0,altAxis:0},ke),Ce=i.modifiersData.offset?i.modifiersData.offset[i.placement]:null,Ye={x:0,y:0};if(Q){if(a){var vt,Rt="y"===W?Pr:Er,Zt="y"===W?ha:fa,Gt="y"===W?"height":"width",xt=Q[W],pe=xt+w[Rt],D=xt-w[Zt],qe=p?-de[Gt]/2:0,Lt=C===kl?te[Gt]:de[Gt],an=C===kl?-de[Gt]:-te[Gt],bn=i.elements.arrow,dt=p&&bn?rv(bn):{width:0,height:0},rn=i.modifiersData["arrow#persistent"]?i.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},sn=rn[Rt],pt=rn[Zt],Cn=bu(0,te[Gt],dt[Gt]),Kn=I?te[Gt]/2-qe-Cn-sn-Me.mainAxis:Lt-Cn-sn-Me.mainAxis,ar=I?-te[Gt]/2+qe+Cn+pt+Me.mainAxis:an+Cn+pt+Me.mainAxis,_n=i.elements.arrow&&vu(i.elements.arrow),si=null!=(vt=null==Ce?void 0:Ce[W])?vt:0,Ei=xt+ar-si,Si=bu(p?sf(pe,xt+Kn-si-(_n?"y"===W?_n.clientTop||0:_n.clientLeft||0:0)):pe,xt,p?lo(D,Ei):D);Q[W]=Si,Ye[W]=Si-xt}if(o){var Mn,on=Q[G],Wn="y"===G?"height":"width",oi=on+w["x"===W?Pr:Er],On=on-w["x"===W?ha:fa],Un=-1!==[Pr,Er].indexOf(S),mr=null!=(Mn=null==Ce?void 0:Ce[G])?Mn:0,va=Un?oi:on-te[Wn]-de[Wn]-mr+Me.altAxis,vr=Un?on+te[Wn]+de[Wn]-mr-Me.altAxis:On,ba=p&&Un?function m5(t,i,e){var n=bu(t,i,e);return n>e?e:n}(va,on,vr):bu(p?va:oi,on,p?vr:On);Q[G]=ba,Ye[G]=ba-on}i.modifiersData[n]=Ye}},requiresIfExists:["offset"]},w5={name:"arrow",enabled:!0,phase:"main",fn:function y5(t){var i,e=t.state,n=t.name,r=t.options,a=e.elements.arrow,s=e.modifiersData.popperOffsets,o=Ba(e.placement),l=nv(o),u=[Er,fa].indexOf(o)>=0?"height":"width";if(a&&s){var d=function(i,e){return ED("number"!=typeof(i="function"==typeof i?i(Object.assign({},e.rects,{placement:e.placement})):i)?i:ID(i,fu))}(r.padding,e),h=rv(a),p="y"===l?Pr:Er,b="y"===l?ha:fa,y=e.rects.reference[u]+e.rects.reference[l]-s[l]-e.rects.popper[u],w=s[l]-e.rects.reference[l],S=vu(a),C=S?"y"===l?S.clientHeight||0:S.clientWidth||0:0,Q=C/2-h[u]/2+(y/2-w/2),te=bu(d[p],Q,C-h[u]-d[b]);e.modifiersData[n]=((i={})[l]=te,i.centerOffset=te-Q,i)}},effect:function C5(t){var i=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"==typeof r&&!(r=i.elements.popper.querySelector(r))||!MD(i.elements.popper,r)||(i.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function R5(t,i,e){void 0===e&&(e=!1);var n=Kr(i),r=Kr(i)&&function D5(t){var i=t.getBoundingClientRect(),e=Pl(i.width)/t.offsetWidth||1,n=Pl(i.height)/t.offsetHeight||1;return 1!==e||1!==n}(i),a=Ns(i),s=El(t,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&(("body"!==La(i)||ev(a))&&(o=function T5(t){return t!==pa(t)&&Kr(t)?function S5(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):Zm(t)}(i)),Kr(i)?((l=El(i,!0)).x+=i.clientLeft,l.y+=i.clientTop):a&&(l.x=Jm(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function x5(t){var i=new Map,e=new Set,n=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(o){if(!e.has(o)){var l=i.get(o);l&&r(l)}}),n.push(a)}return t.forEach(function(a){i.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),n}function k5(t){var i;return function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(t())})})),i}}var ND={placement:"bottom",modifiers:[],strategy:"absolute"};function OD(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return!i.some(function(n){return!(n&&"function"==typeof n.getBoundingClientRect)})}function P5(t){void 0===t&&(t={});var e=t.defaultModifiers,n=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?ND:r;return function(o,l,c){void 0===c&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},ND,a),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(S){var C="function"==typeof S?S(u.options):S;y(),u.options=Object.assign({},a,u.options,C),u.scrollParents={reference:Al(o)?mu(o):o.contextElement?mu(o.contextElement):[],popper:mu(l)};var I=function M5(t){var i=x5(t);return i5.reduce(function(e,n){return e.concat(i.filter(function(r){return r.phase===n}))},[])}(function A5(t){var i=t.reduce(function(e,n){var r=e[n.name];return e[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,e},{});return Object.keys(i).map(function(e){return i[e]})}([].concat(n,u.options.modifiers)));return u.orderedModifiers=I.filter(function(Ce){return Ce.enabled}),function b(){u.orderedModifiers.forEach(function(w){var C=w.options,W=w.effect;if("function"==typeof W){var G=W({state:u,name:w.name,instance:p,options:void 0===C?{}:C});d.push(G||function(){})}})}(),p.update()},forceUpdate:function(){if(!h){var S=u.elements,C=S.reference,I=S.popper;if(OD(C,I)){u.rects={reference:R5(C,vu(I),"fixed"===u.options.strategy),popper:rv(I)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(Ce){return u.modifiersData[Ce.name]=Object.assign({},Ce.data)});for(var G=0;G<u.orderedModifiers.length;G++)if(!0!==u.reset){var Q=u.orderedModifiers[G],te=Q.fn,de=Q.options;"function"==typeof te&&(u=te({state:u,options:void 0===de?{}:de,name:Q.name,instance:p})||u)}else u.reset=!1,G=-1}}},update:k5(function(){return new Promise(function(w){p.forceUpdate(),w(u)})}),destroy:function(){y(),h=!0}};if(!OD(o,l))return p;function y(){d.forEach(function(w){return w()}),d=[]}return p.setOptions(c).then(function(w){!h&&c.onFirstUpdate&&c.onFirstUpdate(w)}),p}}var cf={passive:!0},V5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function VD(t){var i,e=t.popper,n=t.popperRect,r=t.placement,a=t.variation,s=t.offsets,o=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=s.x,p=void 0===h?0:h,b=s.y,y=void 0===b?0:b,w="function"==typeof u?u({x:p,y}):{x:p,y};p=w.x,y=w.y;var S=s.hasOwnProperty("x"),C=s.hasOwnProperty("y"),I=Er,W=Pr,G=window;if(c){var Q=vu(e),te="clientHeight",de="clientWidth";Q===pa(e)&&"static"!==os(Q=Ns(e)).position&&"absolute"===o&&(te="scrollHeight",de="scrollWidth"),Q=Q,(r===Pr||(r===Er||r===fa)&&a===pu)&&(W=ha,y-=(d&&G.visualViewport?G.visualViewport.height:Q[te])-n.height,y*=l?1:-1),r!==Er&&(r!==Pr&&r!==ha||a!==pu)||(I=fa,p-=(d&&G.visualViewport?G.visualViewport.width:Q[de])-n.width,p*=l?1:-1)}var vt,Ce=Object.assign({position:o},c&&V5),Ye=!0===u?function F5(t){var e=t.y,r=window.devicePixelRatio||1;return{x:Pl(t.x*r)/r||0,y:Pl(e*r)/r||0}}({x:p,y}):{x:p,y};return p=Ye.x,y=Ye.y,Object.assign({},Ce,l?((vt={})[W]=C?"0":"",vt[I]=S?"0":"",vt.transform=(G.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",vt):((i={})[W]=C?y+"px":"",i[I]=S?p+"px":"",i.transform="",i))}var j5=P5({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function E5(t){var i=t.state,e=t.instance,n=t.options,r=n.scroll,a=void 0===r||r,s=n.resize,o=void 0===s||s,l=pa(i.elements.popper),c=[].concat(i.scrollParents.reference,i.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",e.update,cf)}),o&&l.addEventListener("resize",e.update,cf),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",e.update,cf)}),o&&l.removeEventListener("resize",e.update,cf)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function N5(t){var i=t.state;i.modifiersData[t.name]=AD({reference:i.rects.reference,element:i.rects.popper,strategy:"absolute",placement:i.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function B5(t){var i=t.state,e=t.options,n=e.gpuAcceleration,r=void 0===n||n,a=e.adaptive,s=void 0===a||a,o=e.roundOffsets,l=void 0===o||o,u={placement:Ba(i.placement),variation:Il(i.placement),popper:i.elements.popper,popperRect:i.rects.popper,gpuAcceleration:r,isFixed:"fixed"===i.options.strategy};null!=i.modifiersData.popperOffsets&&(i.styles.popper=Object.assign({},i.styles.popper,VD(Object.assign({},u,{offsets:i.modifiersData.popperOffsets,position:i.options.strategy,adaptive:s,roundOffsets:l})))),null!=i.modifiersData.arrow&&(i.styles.arrow=Object.assign({},i.styles.arrow,VD(Object.assign({},u,{offsets:i.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-placement":i.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function U5(t){var i=t.state;Object.keys(i.elements).forEach(function(e){var n=i.styles[e]||{},r=i.attributes[e]||{},a=i.elements[e];!Kr(a)||!La(a)||(Object.assign(a.style,n),Object.keys(r).forEach(function(s){var o=r[s];!1===o?a.removeAttribute(s):a.setAttribute(s,!0===o?"":o)}))})},effect:function H5(t){var i=t.state,e={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(i.elements.popper.style,e.popper),i.styles=e,i.elements.arrow&&Object.assign(i.elements.arrow.style,e.arrow),function(){Object.keys(i.elements).forEach(function(n){var r=i.elements[n],a=i.attributes[n]||{},o=Object.keys(i.styles.hasOwnProperty(n)?i.styles[n]:e[n]).reduce(function(l,c){return l[c]="",l},{});!Kr(r)||!La(r)||(Object.assign(r.style,o),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}]});const W5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function $5(t){var i=t.state,n=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,s=TD.reduce(function(u,d){return u[d]=function z5(t,i,e){var n=Ba(t),r=[Er,Pr].indexOf(n)>=0?-1:1,a="function"==typeof e?e(Object.assign({},i,{placement:t})):e,s=a[0],o=a[1];return s=s||0,o=(o||0)*r,[Er,fa].indexOf(n)>=0?{x:o,y:s}:{x:s,y:o}}(d,i.rects,a),u},{}),o=s[i.placement],c=o.y;null!=i.modifiersData.popperOffsets&&(i.modifiersData.popperOffsets.x+=o.x,i.modifiersData.popperOffsets.y+=c),i.modifiersData[n]=s}},av=["*"],vL=["dialog"];function YL(t,i){1&t&&v(0),2&t&&nt(T(2).title)}function QL(t,i){}function KL(t,i){if(1&t&&(g(0,"h3",3),x(1,YL,1,1,"ng-template",null,4,ot),x(3,QL,0,0,"ng-template",5),f()),2&t){const e=rt(2),n=T();m(3),_("ngTemplateOutlet",n.isTitleTemplate()?n.title:e)("ngTemplateOutletContext",n.context)}}function ZL(t,i){if(1&t&&(g(0,"span"),Ka(1,2),At(2,"percent"),f()),2&t){const e=T();m(2),Gd(zd(2,1,e.getValue()/e.max)),function Og(t){!function aE(t,i,e){if(kc>0){const n=t.data[e];Xy(t,i,Array.isArray(n)?n:n.update,Wa()-kc-1,Mc)}Mc=0,kc=0}(en(),Te(),t+20)}(1)}}function Ua(t){return!isNaN(function uf(t){return parseInt(`${t}`,10)}(t))}function co(t){return null!=t}function Nl(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let i=this;if(!document.documentElement.contains(i))return null;do{if(i.matches(t))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null});const LD={animation:!0,transitionTimerDelayMs:5},f8=()=>{},{transitionTimerDelayMs:p8}=LD,_u=new Map,rr=(t,i,e,n)=>{let r=n.context||{};const a=_u.get(i);if(a)switch(n.runningTransition){case"continue":return Zr;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),_u.delete(i)}const s=e(i,n.animation,r)||f8;if(!n.animation||"none"===window.getComputedStyle(i).transitionProperty)return t.run(()=>s()),_t(void 0).pipe(function d8(t){return i=>new Ne(e=>i.subscribe({next:s=>t.run(()=>e.next(s)),error:s=>t.run(()=>e.error(s)),complete:()=>t.run(()=>e.complete())}))}(t));const o=new ge,l=new ge,c=o.pipe(function L4(...t){return i=>Qc(i,_t(...t))}(!0));_u.set(i,{transition$:o,complete:()=>{l.next(),l.complete()},context:r});const u=function h8(t){const{transitionDelay:i,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(i)+parseFloat(e))}(i);return t.runOutsideAngular(()=>{const d=ir(i,"transitionend").pipe(Ci(c),Ni(({target:p})=>p===i));vD(Xm(u+p8).pipe(Ci(c)),d,l).pipe(Ci(c)).subscribe(()=>{_u.delete(i),t.run(()=>{s(),o.next(),o.complete()})})}),o.asObservable()};let yu=(()=>{class t{constructor(){this.animation=LD.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})(),WD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})(),XD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({}),t})(),KD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})(),ZD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({}),t})();var wi=(()=>{return(t=wi||(wi={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",wi;var t})();const hf=(t,i)=>!!i&&i.some(e=>e.contains(t)),JD=(t,i)=>!i||null!=function u8(t,i){return i&&void 0!==t.closest?t.closest(i):null}(t,i),E8="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function eR(t,i,e,n,r,a,s,o){e&&t.runOutsideAngular((t=>E8?()=>setTimeout(()=>t(),100):t)(()=>{const c=ir(i,"keydown").pipe(Ci(r),Ni(h=>h.which===wi.Escape),zi(h=>h.preventDefault())),u=ir(i,"mousedown").pipe(Mt(h=>{const p=h.target;return 2!==h.button&&!hf(p,s)&&("inside"===e?hf(p,a)&&JD(p,o):"outside"===e?!hf(p,a):JD(p,o)||!hf(p,a))}),Ci(r)),d=ir(i,"mouseup").pipe(Qm(u),Ni(([h,p])=>p),yD(0),Ci(r));vD([c.pipe(Mt(h=>0)),d.pipe(Mt(h=>1))]).subscribe(h=>t.run(()=>n(h)))}))}const tR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function nR(t){const i=Array.from(t.querySelectorAll(tR)).filter(e=>-1!==e.tabIndex);return[i[0],i[i.length-1]]}const O8=/\s+/,V8=/  +/gi,F8=/^start/,B8=/^end/,L8=/-(top|left)$/,U8=/-(bottom|right)$/,G8=/^left/,j8=/^right/,z8=/^start/,$8=/^end/;function iR({placement:t,baseClass:i}){let e=Array.isArray(t)?t:t.split(O8),r=e.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==e.find(c=>-1!==c.search("^"+l))&&e.splice(r++,1,l)});const a=e.map(l=>function H8(t){return t.replace(F8,"left").replace(B8,"right").replace(L8,"-start").replace(U8,"-end")}(l));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!i,phase:"write",fn({state:l}){const c=new RegExp(i+"-[a-z]+","gi"),u=l.elements.popper,d=l.placement;let h=u.className;h=h.replace(c,""),h+=` ${function W8(t,i){let[e,n]=i.split("-");const r=e.replace(G8,"start").replace(j8,"end");let a=[r];if(n){let s=n;("left"===e||"right"===e)&&(s=s.replace(z8,"top").replace($8,"bottom")),a.push(`${r}-${s}`)}return t&&(a=a.map(s=>`${t}-${s}`)),a.join(" ")}(i,d)}`,h=h.trim().replace(V8," "),u.className=h}},p5,b5,w5,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function rR(t){return t}function aR(){let t=null;return{createPopper(i){if(!t){let n=(i.updatePopperOptions||rR)(iR(i));t=j5(i.hostElement,i.targetElement,n)}},update(){t&&t.update()},setOptions(i){if(t){let n=(i.updatePopperOptions||rR)(iR(i));t.setOptions(n)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let dR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr,ZS]]}),t})(),tU=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Le({type:t,selectors:[["",8,"navbar"]]}),t})(),pv=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(k(un))},t.\u0275dir=Le({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,n){2&e&&mt("disabled",n.disabled)},inputs:{disabled:"disabled"}}),t})(),mf=(()=>{class t{constructor(e,n){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=n.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(k(tn(()=>Vl)),k(un))},t.\u0275dir=Le({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,n,r){if(1&e&&ni(r,pv,4),2&e){let a;mn(a=vn())&&(n.menuItems=a)}},hostVars:5,hostBindings:function(e,n){1&e&&F("keydown.ArrowUp",function(a){return n.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return n.dropdown.onKeyDown(a)})("keydown.Home",function(a){return n.dropdown.onKeyDown(a)})("keydown.End",function(a){return n.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return n.dropdown.onKeyDown(a)})("keydown.Space",function(a){return n.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return n.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return n.dropdown.onKeyDown(a)}),2&e&&(gn("data-popper",n.placement),mt("dropdown-menu",!0)("show",n.dropdown.isOpen()))}}),t})(),vf=(()=>{class t{constructor(e,n){this.dropdown=e,this.nativeElement=n.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(k(tn(()=>Vl)),k(un))},t.\u0275dir=Le({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,n){2&e&&gn("aria-expanded",n.dropdown.isOpen())}}),t})(),gv=(()=>{class t extends vf{constructor(e,n){super(e,n)}}return t.\u0275fac=function(e){return new(e||t)(k(tn(()=>Vl)),k(un))},t.\u0275dir=Le({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,n){1&e&&F("click",function(){return n.dropdown.toggle()})("keydown.ArrowUp",function(a){return n.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return n.dropdown.onKeyDown(a)})("keydown.Home",function(a){return n.dropdown.onKeyDown(a)})("keydown.End",function(a){return n.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return n.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return n.dropdown.onKeyDown(a)}),2&e&&gn("aria-expanded",n.dropdown.isOpen())},features:[Rn([{provide:vf,useExisting:tn(()=>t)}]),cn]}),t})(),Vl=(()=>{class t{constructor(e,n,r,a,s,o,l){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=s,this._renderer=o,this._closed$=new ge,this._bodyContainer=null,this._positioning=aR(),this._open=!1,this.openChange=new Ke,this.placement=n.placement,this.container=n.container,this.autoClose=n.autoClose,this.display=l?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(xi(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:n,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(n,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(xi(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){eR(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const n=e.which,r=this._getMenuElements();let a=-1,s=null;const o=this._isEventFromToggle(e);if(!o&&r.length&&r.forEach((l,c)=>{l.contains(e.target)&&(s=l),l===this._document.activeElement&&(a=c)}),n!==wi.Space&&n!==wi.Enter){if(n!==wi.Tab){if(o||s){if(this.open(),r.length){switch(n){case wi.ArrowDown:a=Math.min(a+1,r.length-1);break;case wi.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case wi.Home:a=0;break;case wi.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const l=this._menu.nativeElement.querySelectorAll(tR);e.shiftKey&&e.target===l[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===l[l.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else ir(e.target,"focusout").pipe(xi(1)).subscribe(({relatedTarget:l})=>{this._elementRef.nativeElement.contains(l)||this.close()})}}else s&&(!0===this.autoClose||"inside"===this.autoClose)&&ir(s,"click").pipe(xi(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(n=>!n.disabled).map(n=>n.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const n=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||n.createElement("div");n.setStyle(a,"position","absolute"),n.setStyle(r,"position","static"),n.setStyle(a,"z-index","1050"),n.appendChild(a,r),n.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,n){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(n&&this._renderer.removeClass(r,n),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const n=this._menu;if(n){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:s}=n;"static"===this.display?(n.placement=null,r.setAttribute(s,"data-bs-popper","static")):(n.placement=e,r.removeAttribute(s,"data-bs-popper"));const o=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,o);const l=this._bodyContainer;l&&(r.removeClass(l,"dropup"),r.removeClass(l,"dropdown"),r.addClass(l,o))}}}return t.\u0275fac=function(e){return new(e||t)(k(xr),k(tU),k(ci),k(xn),k(un),k(Gr),k(hR,8))},t.\u0275dir=Le({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,n,r){if(1&e&&(ni(r,mf,5),ni(r,vf,5)),2&e){let a;mn(a=vn())&&(n._menu=a.first),mn(a=vn())&&(n._anchor=a.first)}},hostVars:2,hostBindings:function(e,n){2&e&&mt("show",n.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[ki]}),t})(),fR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({}),t})();class po{constructor(i,e,n){this.nodes=i,this.viewRef=e,this.componentRef=n}}class nU{constructor(i,e,n,r,a,s){this._type=i,this._injector=e,this._viewContainerRef=n,this._renderer=r,this._ngZone=a,this._applicationRef=s,this._windowRef=null,this._contentRef=null}open(i,e,n=!1){this._windowRef||(this._contentRef=this._getContentRef(i,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(xi(1),Zn(()=>rr(this._ngZone,r,({classList:s})=>s.add("show"),{animation:n,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(i=!1){return this._windowRef?rr(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:i,runningTransition:"stop"}).pipe(zi(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):_t(void 0)}_getContentRef(i,e){if(i){if(i instanceof Fn){const n=i.createEmbeddedView(e);return this._applicationRef.attachView(n),new po([n.rootNodes],n)}return new po([[this._renderer.createText(`${i}`)]])}return new po([])}}let iU=(()=>{class t{constructor(e,n){this._el=e,this._zone=n}ngOnInit(){this._zone.onStable.asObservable().pipe(xi(1)).subscribe(()=>{rr(this._zone,this._el.nativeElement,(e,n)=>{n&&Nl(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return rr(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(k(un),k(xn))},t.\u0275cmp=st({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,n){2&e&&(Ss("modal-backdrop"+(n.backdropClass?" "+n.backdropClass:"")),mt("show",!n.animation)("fade",n.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})();class pR{close(i){}dismiss(i){}}class rU{constructor(i,e,n,r){this._windowCmptRef=i,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new ge,this._dismissed=new ge,this._hidden=new ge,i.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,s)=>{this._resolve=a,this._reject=s}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ci(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ci(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(i){this._windowCmptRef&&(this._closed.next(i),this._resolve(i),this._removeModalElements())}_dismiss(i){this._dismissed.next(i),this._reject(i),this._removeModalElements()}dismiss(i){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function c8(t){return t&&t.then}(e)?!1!==e&&this._dismiss(i):e.then(n=>{!1!==n&&this._dismiss(i)},()=>{})}else this._dismiss(i)}_removeModalElements(){const i=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():_t(void 0);i.subscribe(()=>{const{nativeElement:n}=this._windowCmptRef.location;n.parentNode.removeChild(n),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:n}=this._backdropCmptRef.location;n.parentNode.removeChild(n),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),rf(i,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Tu=(()=>{return(t=Tu||(Tu={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",Tu;var t})();let aU=(()=>{class t{constructor(e,n,r){this._document=e,this._elRef=n,this._zone=r,this._closed$=new ge,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ke,this.shown=new ge,this.hidden=new ge}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(xi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,n={animation:this.animation,runningTransition:"stop"},s=rf(rr(this._zone,e,()=>e.classList.remove("show"),n),rr(this._zone,this._dialogEl.nativeElement,()=>{},n));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const e={animation:this.animation,runningTransition:"continue"};rf(rr(this._zone,this._elRef.nativeElement,(a,s)=>{s&&Nl(a),a.classList.add("show")},e),rr(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{ir(e,"keydown").pipe(Ci(this._closed$),Ni(r=>r.which===wi.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Tu.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let n=!1;ir(this._dialogEl.nativeElement,"mousedown").pipe(Ci(this._closed$),zi(()=>n=!1),is(()=>ir(e,"mouseup").pipe(Ci(this._closed$),xi(1))),Ni(({target:r})=>e===r)).subscribe(()=>{n=!0}),ir(e,"click").pipe(Ci(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!n&&this._zone.run(()=>this.dismiss(Tu.BACKDROP_CLICK))),n=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const n=e.querySelector("[ngbAutofocus]"),r=nR(e)[0];(n||r||e).focus()}}_restoreFocus(){const e=this._document.body,n=this._elWithFocus;let r;r=n&&n.focus&&e.contains(n)?n:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&rr(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(k(ci),k(un),k(xn))},t.\u0275cmp=st({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,n){if(1&e&&Ja(vL,7),2&e){let r;mn(r=vn())&&(n._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,n){2&e&&(gn("aria-modal",!0)("aria-labelledby",n.ariaLabelledBy)("aria-describedby",n.ariaDescribedBy),Ss("modal d-block"+(n.windowClass?" "+n.windowClass:"")),mt("fade",n.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:av,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,n){1&e&&(Id(),g(0,"div",0,1)(2,"div",2),Nd(3),f()()),2&e&&Ss("modal-dialog"+(n.size?" modal-"+n.size:"")+(n.centered?" modal-dialog-centered":"")+(n.scrollable?" modal-dialog-scrollable":"")+(n.modalDialogClass?" "+n.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),sU=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),n=this._document.body,r=n.style,{overflow:a,paddingRight:s}=r;if(e>0){const o=parseFloat(window.getComputedStyle(n).paddingRight);r.paddingRight=`${o+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=s),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(Ve(ci))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oU=(()=>{class t{constructor(e,n,r,a,s,o){this._applicationRef=e,this._injector=n,this._document=r,this._scrollBar=a,this._rendererFactory=s,this._ngZone=o,this._activeWindowCmptHasChanged=new ge,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new Ke,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((t,i,e,n=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=ir(i,"focusin").pipe(Ci(e),Mt(a=>a.target));ir(i,"keydown").pipe(Ci(e),Ni(a=>a.which===wi.Tab),Qm(r)).subscribe(([a,s])=>{const[o,l]=nR(i);(s===o||s===i)&&a.shiftKey&&(l.focus(),a.preventDefault()),s===l&&!a.shiftKey&&(o.focus(),a.preventDefault())}),n&&ir(i,"click").pipe(Ci(e),Qm(r),Mt(a=>a[1])).subscribe(a=>a.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(e,n,r,a){const s=a.container instanceof HTMLElement?a.container:co(a.container)?this._document.querySelector(a.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!s)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const u=new pR,d=this._getContentRef(e,a.injector||n,r,u,a);let h=!1!==a.backdrop?this._attachBackdrop(e,s):void 0,p=this._attachWindowComponent(e,s,d),b=new rU(p,d,h,a.beforeDismiss);return this._registerModalRef(b),this._registerWindowCmpt(p),b.result.then(l,l),b.result.then(c,c),u.close=y=>{b.close(y)},u.dismiss=y=>{b.dismiss(y)},this._applyWindowOptions(p.instance,a),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),h&&h.instance&&(this._applyBackdropOptions(h.instance,a),h.changeDetectorRef.detectChanges()),p.changeDetectorRef.detectChanges(),b}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(n=>n.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,n){let a=e.resolveComponentFactory(iU).create(this._injector);return this._applicationRef.attachView(a.hostView),n.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,n,r){let s=e.resolveComponentFactory(aU).create(this._injector,r.nodes);return this._applicationRef.attachView(s.hostView),n.appendChild(s.location.nativeElement),s}_applyWindowOptions(e,n){this._windowAttributes.forEach(r=>{co(n[r])&&(e[r]=n[r])})}_applyBackdropOptions(e,n){this._backdropAttributes.forEach(r=>{co(n[r])&&(e[r]=n[r])})}_getContentRef(e,n,r,a,s){return r?r instanceof Fn?this._createFromTemplateRef(r,a):function BD(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,n,r,a,s):new po([])}_createFromTemplateRef(e,n){const a=e.createEmbeddedView({$implicit:n,close(s){n.close(s)},dismiss(s){n.dismiss(s)}});return this._applicationRef.attachView(a),new po([a.rootNodes],a)}_createFromString(e){const n=this._document.createTextNode(`${e}`);return new po([[n]])}_createFromComponent(e,n,r,a,s){const o=e.resolveComponentFactory(r),l=ei.create({providers:[{provide:pR,useValue:a}],parent:n}),c=o.create(l),u=c.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new po([[u]],c.hostView,c)}_setAriaHidden(e){const n=e.parentElement;n&&e!==this._document.body&&(Array.from(n.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,n)=>{e?n.setAttribute("aria-hidden",e):n.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const n=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(n,n)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const n=this._windowCmpts.indexOf(e);n>-1&&(this._windowCmpts.splice(n,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Ve(Js),Ve(ei),Ve(ci),Ve(sU),Ve(Ug),Ve(xn))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lU=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ve(yu))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ls=(()=>{class t{constructor(e,n,r,a){this._moduleCFR=e,this._injector=n,this._modalStack=r,this._config=a}open(e,n={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),n);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Ve(Ks),Ve(ei),Ve(oU),Ve(lU))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({providers:[ls]}),t})(),_R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})(),xR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})();class pU{constructor(i,e){this.open=i,this.close=e,e||(this.close=i)}isManual(){return"manual"===this.open||"manual"===this.close}}const gU={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},MR=t=>t>0?yD(t):i=>i;let yU=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ve(yu))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),CU=0;function wU(t){return t.modifiers.push(W5,{name:"offset",options:{offset:()=>[0,12]}}),t}let SU=(()=>{class t{isTitleTemplate(){return this.title instanceof Fn}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=st({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,n){2&e&&(Ts("id",n.id),Ss("popover"+(n.popoverClass?" "+n.popoverClass:"")),mt("fade",n.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:av,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Id(),N(0,"div",0),x(1,KL,4,2,"h3",1),g(2,"div",2),Nd(3),f()),2&e&&(m(1),_("ngIf",n.title))},directives:[Kt,vl],encapsulation:2,changeDetection:0}),t})(),ma=(()=>{class t{constructor(e,n,r,a,s,o,l,c,u){this._elementRef=e,this._renderer=n,this._ngZone=o,this._document=l,this._changeDetector=c,this.shown=new Ke,this.hidden=new Ke,this._ngbPopoverWindowId="ngb-popover-"+CU++,this._windowRef=null,this._positioning=aR(),this.animation=s.animation,this.autoClose=s.autoClose,this.placement=s.placement,this.triggers=s.triggers,this.container=s.container,this.disablePopover=s.disablePopover,this.popoverClass=s.popoverClass,this.openDelay=s.openDelay,this.closeDelay=s.closeDelay,this._popupService=new nU(SU,r,a,n,this._ngZone,u),this._zoneSubscription=o.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:n,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=n,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(xi(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:wU})}),eR(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function _U(t,i,e,n,r,a,s=0,o=0){const l=function mU(t,i=gU){const e=(t||"").trim();if(0===e.length)return[];const n=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let s=i[a[0]]||a;return new pU(s[0],s[1])}),r=n.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return n}(e);if(1===l.length&&l[0].isManual())return()=>{};const c=function vU(t,i,e,n){return new Ne(r=>{const a=[],s=()=>r.next(!0),o=()=>r.next(!1),l=()=>r.next(!n());return e.forEach(c=>{c.open===c.close?a.push(t.listen(i,c.open,l)):a.push(t.listen(i,c.open,s),t.listen(i,c.close,o))}),()=>{a.forEach(c=>c())}})}(t,i,l,n).pipe(function bU(t,i,e){return n=>{let r=null;const a=n.pipe(Mt(l=>({open:l})),Ni(l=>{const c=e();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),zv());return jv(a.pipe(Ni(l=>l.open),MR(t)),a.pipe(Ni(l=>!l.open),MR(i))).pipe(Ni(l=>l===r&&(r=null,l.open!==e())),Mt(l=>l.open))}}(s,o,n)).subscribe(u=>u?r():a());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:n,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||n||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(un),k(Gr),k(ei),k(jr),k(yU),k(xn),k(ci),k(xr),k(Js))},t.\u0275dir=Le({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[ki]}),t})(),kR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})(),TU=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_v=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!Ua(e)||e<=0?100:e}get max(){return this._max}getValue(){return function FD(t,i,e=0){return Math.max(Math.min(t,i),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(k(TU))},t.\u0275cmp=st({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,n){2&e&&Dc("height",n.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:av,decls:3,vars:11,consts:function(){let i;return i=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],i]},template:function(e,n){1&e&&(Id(),g(0,"div",0),x(1,ZL,3,3,"span",1),Nd(2),f()),2&e&&(function Ry(t,i,e,n,r,a,s,o,l){oa(Sr,Ia,nl(Te(),t,i,e,n,r,a,s,o,l),!0)}("progress-bar",n.type?" bg-"+n.type:"","",n.textType?" text-"+n.textType:"","\n    ",n.animated?" progress-bar-animated":"","",n.striped?" progress-bar-striped":"",""),Dc("width",n.getPercentValue(),"%"),gn("aria-valuenow",n.getValue())("aria-valuemax",n.max),m(1),_("ngIf",n.showValue))},directives:[Kt],pipes:[Ow],encapsulation:2,changeDetection:0}),t})(),AR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})(),PR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})(),ER=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})(),IR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})(),NR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({}),t})();new Ut("live announcer delay",{providedIn:"root",factory:function xU(){return 100}});let OR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[[pr]]}),t})();const MU=[$D,WD,XD,KD,ZD,dR,fR,gR,_R,xR,kR,AR,PR,ER,IR,NR,OR];let kU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t}),t.\u0275inj=ln({imports:[MU,$D,WD,XD,KD,ZD,dR,fR,gR,_R,xR,kR,AR,PR,ER,IR,NR,OR]}),t})();var Ga=(()=>{return(t=Ga||(Ga={}))[t.regular=0]="regular",t[t.token=1]="token",Ga;var t})();let Qn=(()=>{class t{constructor(){this.switchView=new Gn(Dt.barn),this.selectAnimalView=new Gn(new Tt),this.selectBarnView=new Gn(0),this.selectShopView=new Gn(Ga.regular),this.selectRaceView=new Gn(Fe.circuit)}setNewView(e){e!==this.switchView.value&&this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,n){n!==this.selectAnimalView.value&&this.selectAnimalView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,n){n!==this.selectBarnView.value&&this.selectBarnView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}setShopView(e,n){n!==this.selectShopView.value&&this.selectShopView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getShopView(){return this.selectShopView.asObservable()}setRaceView(e,n){n!==this.selectRaceView.value&&this.selectRaceView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getRaceView(){return this.selectRaceView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function AU(t,i){if(1&t){const e=fe();g(0,"div")(1,"button",1),F("click",function(){X(e);const r=T();return r.switchView(r.navigationEnum.incubator)}),v(2,"Incubator"),f(),N(3,"hr"),f()}if(2&t){const e=T();m(1),_("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}const VR=function(t,i){return{active:t,tutorialActive:i}};let FR=(()=>{class t{constructor(e,n,r,a){this.componentCommunicationService=e,this.lookupService=n,this.globalService=r,this.gameLoopService=a,this.viewChanged=new Ke,this.navigationEnum=Dt,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var n;this.tutorial3Active=!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||6!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(n=this.globalService.globalVar.animals.find(r=>r.type===q.Monkey))||void 0===n?void 0:n.isAvailable)),this.globalService.globalVar.tutorials.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.selectedNavigation===Dt.shop&&this.componentCommunicationService.setShopView(Dt.shop,Ga.regular),this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack")}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(k(Qn),k(hn),k(yt),k(yi))},t.\u0275cmp=st({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:25,vars:15,consts:[[1,"navigation"],[1,"buttonAsText","clickableText",3,"ngClass","click"],[4,"ngIf"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"button",1),F("click",function(){return n.switchView(n.navigationEnum.barn)}),v(2,"Barns"),f(),N(3,"hr"),g(4,"button",1),F("click",function(){return n.switchView(n.navigationEnum.raceselection)}),v(5,"Races"),f(),N(6,"hr"),g(7,"button",1),F("click",function(){return n.switchView(n.navigationEnum.animals)}),v(8,"Animals"),f(),N(9,"hr"),g(10,"button",1),F("click",function(){return n.switchView(n.navigationEnum.relayTeams)}),v(11,"Relay Teams"),f(),N(12,"hr"),g(13,"button",1),F("click",function(){return n.switchView(n.navigationEnum.shop)}),v(14,"Shop"),f(),N(15,"hr"),x(16,AU,4,1,"div",2),g(17,"button",1),F("click",function(){return n.switchView(n.navigationEnum.resources)}),v(18,"Resources"),f(),N(19,"hr"),g(20,"button",1),F("click",function(){return n.switchView(n.navigationEnum.settings)}),v(21,"Settings"),f(),N(22,"hr"),g(23,"button",1),F("click",function(){return n.switchView(n.navigationEnum.stats)}),v(24,"Stats"),f()()),2&e&&(m(1),_("ngClass",Zs(9,VR,n.selectedNavigation===n.navigationEnum.barn,n.tutorial6Active)),m(3),_("ngClass",Zs(12,VR,n.selectedNavigation===n.navigationEnum.raceselection,n.tutorial3Active)),m(3),_("ngClass",n.selectedNavigation===n.navigationEnum.animals?"active":""),m(3),_("ngClass",n.selectedNavigation===n.navigationEnum.relayTeams?"active":""),m(3),_("ngClass",n.selectedNavigation===n.navigationEnum.shop?"active":""),m(3),_("ngIf",n.incubatorAvailable),m(1),_("ngClass",n.selectedNavigation===n.navigationEnum.resources?"active":""),m(3),_("ngClass",n.selectedNavigation===n.navigationEnum.settings?"active":""),m(3),_("ngClass",n.selectedNavigation===n.navigationEnum.stats?"active":""))},directives:[Bn,Kt],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem;background-color:var(--background-secondary);color:var(--foreground-default)}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function PU(t,i){if(1&t&&N(0,"div",15),2&t){const e=T();_("innerHTML",e.getSanitizedHtml(e.latestVersionChanges),Dn)}}function EU(t,i){if(1&t&&(g(0,"div")(1,"div",24)(2,"span",25),v(3),At(4,"number"),f(),g(5,"span"),v(6),f()(),N(7,"br")(8,"div",26),g(9,"span"),N(10,"hr"),f()()),2&t){const e=i.$implicit,n=i.index,r=T(3);m(3),ce("Version ",Qt(4,3,r.allVersions[n],"1.2-2"),""),m(3),ce(" ",r.versionControlService.getDateForVersion(r.allVersions[n]),""),m(2),_("innerHTML",r.getSanitizedHtml(e),Dn)}}function IU(t,i){if(1&t&&(g(0,"div")(1,"div",21)(2,"div",22),x(3,EU,11,6,"div",23),f()()()),2&t){const e=T(2);m(3),_("ngForOf",e.changeLog)}}function NU(t,i){if(1&t){const e=fe();g(0,"div",16)(1,"div",17)(2,"h4",18),v(3,"Change Log"),f(),g(4,"button",19),F("click",function(){return X(e).$implicit.dismiss()}),v(5,"X"),f()(),x(6,IU,4,1,"div",20),f()}if(2&t){const e=T();m(6),_("ngIf",e.changeLog.length>0)}}let OU=(()=>{class t{constructor(e,n,r,a,s,o,l){this.lookupService=e,this.gameLoopService=n,this.globalService=r,this.componentCommunicationService=a,this.versionControlService=s,this.modalService=o,this.sanitizer=l}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.latestVersionChanges=this.versionControlService.getLatestChanges(),this.changeLog=this.versionControlService.getAllChanges(),this.allVersions=this.versionControlService.gameVersions,this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}getSanitizedHtml(e){return this.sanitizer.sanitize(Xt.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}changeView(e){this.componentCommunicationService.setNewView(e)}openChangeLog(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(k(hn),k(yi),k(yt),k(Qn),k(qm),k(ls),k(xs))},t.\u0275cmp=st({type:t,selectors:[["app-header"]],decls:26,vars:8,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"version","versionMargin","clickableText",3,"ngbPopover","click"],[1,"coins","keyword"],[1,"medals","keyword"],[1,"menu","keyword"],["ngbDropdown","",1,"d-inline-block"],["menuDropdown","ngbDropdown"],["type","button","id","menuDropdown","ngbDropdownToggle","",1,"btn","dropdown"],["ngbDropdownMenu","","aria-labelledby","menuDropdown",1,"dropdownItems"],[3,"viewChanged","click"],["latestVersionChangesContent",""],["content",""],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],[1,"flexDiv"],[1,"s4Heading"],[3,"innerHTML"]],template:function(e,n){if(1&e){const r=fe();g(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),v(4," Cultura "),f(),g(5,"span",4),F("click",function(){X(r);const s=rt(25);return n.openChangeLog(s)}),v(6),f()(),g(7,"div",5)(8,"span"),v(9),At(10,"number"),f()(),g(11,"div",6)(12,"span"),v(13),At(14,"number"),f()(),g(15,"div",7)(16,"div",8,9)(18,"button",10),v(19,"Menu"),f(),g(20,"div",11)(21,"app-navigation",12),F("viewChanged",function(s){return n.changeView(s)})("click",function(){return X(r),rt(17).close()}),f()()()()(),x(22,PU,1,1,"ng-template",null,13,ot),x(24,NU,7,1,"ng-template",null,14,ot),f()}if(2&e){const r=rt(23);m(5),_("ngbPopover",r),m(1),ce(" v",n.version," "),m(3),ce("Coins: ",zd(10,4,n.coinCount),""),m(4),ce("Medals: ",zd(14,6,n.medalCount),"")}},directives:[ma,Vl,gv,mf,FR,Kt,ri],pipes:[ns],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}.versionMargin[_ngcontent-%COMP%]{margin-left:.5rem}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}.dropdownItems[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--foreground-default)}.menu[_ngcontent-%COMP%]{display:none}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre-line}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.flexDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name coins menu ." ". name medals menu ."}.menu[_ngcontent-%COMP%]{display:block;grid-area:menu;justify-self:stretch}}']}),t})();function VU(t,i){if(1&t&&(g(0,"div",9)(1,"span"),v(2),f(),N(3,"br"),g(4,"span"),v(5),f()()),2&t){const e=T(2);_("ngClass",e.colorConditional),m(2),nt(e.associatedAnimalName),m(3),nt(e.associatedAnimalType)}}function FU(t,i){if(1&t&&(g(0,"div",9)(1,"span"),v(2),f()()),2&t){const e=T(2);_("ngClass",e.colorConditional),m(2),nt(e.associatedAnimalType)}}function BU(t,i){1&t&&(g(0,"div")(1,"em"),v(2,"Ready to Breed"),f()())}const LU=function(t){return{floatingProgressTextAnimation:t}};function UU(t,i){if(1&t&&(g(0,"div",4)(1,"span"),v(2),f(),x(3,VU,6,3,"div",5),x(4,FU,3,2,"div",5),N(5,"br"),g(6,"p"),N(7,"ngb-progressbar",6),f(),g(8,"div",7),v(9),f(),N(10,"br"),x(11,BU,3,0,"div",8),f()),2&t){const e=T();m(2),nt(e.barnName),m(1),_("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),m(1),_("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),m(3),_("value",e.trainingProgressBarPercent),m(1),_("ngClass",bi(7,LU,e.showTrainingAnimation)),m(1),ce(" ",e.trainingCompleteText," "),m(2),_("ngIf",e.readyToBreed)}}function HU(t,i){1&t&&(g(0,"div",10)(1,"span"),v(2,"Unassigned"),f(),N(3,"br"),g(4,"em"),v(5,"Click to assign animal"),f()())}function GU(t,i){1&t&&(g(0,"div",11)(1,"span"),v(2,"Locked"),f(),N(3,"br"),g(4,"em"),v(5,"Click to view status"),f()())}let jU=(()=>{class t{constructor(e,n,r){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.selectedBarn=new Ke}ngOnInit(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var n=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=n?(this.isOccupied=!0,this.associatedAnimalName=n.name,this.associatedAnimalType=q[n.type],this.associatedAnimal=n,this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()}):this.isOccupied=!1,this.isLocked=e.isLocked}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.isLocked||(this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber==this.barnNumber);if(null!=a){if(null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax,this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}))}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(yi),k(hn))},t.\u0275cmp=st({type:t,selectors:[["app-barn"]],hostBindings:function(e,n){1&e&&F("click",function(){return n.onClick()})},inputs:{barnNumber:"barnNumber"},outputs:{selectedBarn:"selectedBarn"},decls:4,vars:3,consts:[[1,"barn","clickableText"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],["class","keyword",3,"ngClass",4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[4,"ngIf"],[1,"keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"]],template:function(e,n){1&e&&(g(0,"div",0),x(1,UU,12,9,"div",1),x(2,HU,6,0,"div",2),x(3,GU,6,0,"div",3),f()),2&e&&(m(1),_("ngIf",n.isOccupied),m(1),_("ngIf",!n.isOccupied&&!n.isLocked),m(1),_("ngIf",n.isLocked))},directives:[Kt,Bn,_v],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:45%;margin:auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}"]}),t})(),zU=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=st({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName","keyword"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"p",1),v(2),f(),g(3,"p",2),v(4),f(),g(5,"p",3),v(6),f()()),2&e&&(m(2),nt(n.trainingOption.trainingName),m(2),nt(n.trainingOption.getStatGainDescription()),m(2),ti("",n.trainingOption.getFacilitySize()," - ",n.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line}"]}),t})();const $U=function(t){return{activeTrainingOption:t}};function WU(t,i){if(1&t){const e=fe();g(0,"td",4)(1,"div",5),F("click",function(){const a=X(e).$implicit;return T(2).selectTrainingOption(a)}),N(2,"app-training-option",6),f()()}if(2&t){const e=i.$implicit;m(1),_("ngClass",bi(2,$U,e.isSelected)),m(1),_("trainingOption",e)}}function qU(t,i){if(1&t&&(g(0,"tr"),x(1,WU,3,4,"td",3),f()),2&t){const e=i.$implicit;m(1),_("ngForOf",e)}}let XU=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new Ke}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableTrainingOptions.length;n++)this.trainingsCells.push(this.availableTrainingOptions[n-1]),n%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(n=>{n.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(k(yt))},t.\u0275cmp=st({type:t,selectors:[["app-training-list"]],hostBindings:function(e,n){1&e&&F("resize",function(a){return n.onResize(a)},!1,Xa)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[ki],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"table"),x(3,qU,2,1,"tr",2),f()()()),2&e&&(m(3),_("ngForOf",n.trainingsRows))},directives:[ri,Bn,zU],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function YU(t,i){if(1&t&&(g(0,"span"),v(1),f()),2&t){const e=T(2);m(1),nt(e.selectedAnimal.name)}}function QU(t,i){if(1&t&&(g(0,"div"),x(1,YU,2,1,"span",1),N(2,"br"),g(3,"span"),v(4),f()()),2&t){const e=T();m(1),_("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),m(3),nt(e.selectedAnimal.getAnimalType())}}function KU(t,i){if(1&t&&(g(0,"div")(1,"span"),v(2),f()()),2&t){const e=T();m(2),nt(e.selectedAnimal.getAnimalType())}}function ZU(t,i){if(1&t&&(g(0,"div"),N(1,"br")(2,"br"),g(3,"em"),v(4),f()()),2&t){const e=T();m(4),ti("",e.trainingTrackRewardsRemaining," / ",e.trainingTrackTotalRewards," rewards remaining")}}let JU=(()=>{class t{constructor(){this.isTrainingTrackView=!1,this.trainingTrackRewardsRemaining=0,this.trainingTrackTotalRewards=0}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.isTrainingTrackView&&(this.trainingTrackRewardsRemaining=this.selectedAnimal.allTrainingTracks.getTotalRewardsRemaining(),this.trainingTrackTotalRewards=this.selectedAnimal.allTrainingTracks.getTotalRewardCount())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=st({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal",isTrainingTrackView:"isTrainingTrackView"},decls:8,vars:5,consts:[[1,"keyword","animal",3,"ngClass"],[4,"ngIf"]],template:function(e,n){1&e&&(g(0,"div",0),x(1,QU,5,2,"div",1),x(2,KU,3,1,"div",1),N(3,"br")(4,"br"),g(5,"span"),v(6),f(),x(7,ZU,5,2,"div",1),f()),2&e&&(_("ngClass",n.colorConditional),m(1),_("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),m(1),_("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),m(4),nt(n.selectedAnimal.getRaceCourseType()),m(1),_("ngIf",n.isTrainingTrackView))},directives:[Bn,Kt],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function e6(t,i){if(1&t){const e=fe();g(0,"td")(1,"div",3),F("click",function(){const a=X(e).$implicit;return T(2).selectAnimal(a)}),N(2,"app-animal",4),f()()}if(2&t){const e=i.$implicit,n=T(2);m(2),_("selectedAnimal",e)("isTrainingTrackView",n.isTrainingTrackView)}}function t6(t,i){if(1&t&&(g(0,"tr"),x(1,e6,3,2,"td",2),f()),2&t){const e=i.$implicit;m(1),_("ngForOf",e)}}let bf=(()=>{class t{constructor(e){this.globalService=e,this.isTrainingTrackView=!1,this.selectedAnimal=new Ke}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableAnimals.length;n++)this.animalCells.push(this.availableAnimals[n-1]),n%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(k(yt))},t.\u0275cmp=st({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,n){1&e&&F("resize",function(a){return n.onResize(a)},!1,Xa)},inputs:{availableAnimals:"availableAnimals",isTrainingTrackView:"isTrainingTrackView"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal","isTrainingTrackView"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"table"),x(3,t6,2,1,"tr",2),f()()()),2&e&&(m(3),_("ngForOf",n.animalRows))},directives:[ri,JU],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const n6=["specializationModal"];function i6(t,i){if(1&t){const e=fe();g(0,"div")(1,"span",37),v(2),f(),N(3,"br"),g(4,"span",37)(5,"button",38),F("click",function(){return X(e),T(2).upgradeBarn()}),v(6),f()()()}if(2&t){const e=T(2),n=rt(4),r=rt(6);m(1),_("ngbPopover",n),m(1),ce("Barn Level ",e.barn.barnUpgrades.barnLevel,""),m(2),_("ngbPopover",r),m(1),_("disabled",!e.canUpgrade),m(1),nt(e.upgradeText)}}function r6(t,i){if(1&t&&(g(0,"span"),v(1),f()),2&t){const e=T(3);m(1),nt(e.associatedAnimal.name)}}function a6(t,i){if(1&t){const e=fe();g(0,"div",39),F("click",function(){return X(e),T(2).goToAnimal()}),x(1,r6,2,1,"span",12),N(2,"br"),g(3,"span"),v(4),f()()}if(2&t){const e=T(2);_("ngClass",e.colorConditional),m(1),_("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),m(3),nt(e.associatedAnimal.getAnimalType())}}function s6(t,i){if(1&t){const e=fe();g(0,"div",40),F("click",function(){return X(e),T(2).goToAnimal()}),g(1,"span"),v(2),f()()}if(2&t){const e=T(2);_("ngClass",e.colorConditional),m(2),nt(e.associatedAnimal.getAnimalType())}}function o6(t,i){if(1&t){const e=fe();g(0,"span",37)(1,"button",41),F("click",function(){return X(e),T(2).upgradeBarnSize()}),v(2,"Build"),f()()}if(2&t){const e=T(2);_("ngbPopover",rt(8)),m(1),_("disabled",!e.canBuild)}}function l6(t,i){if(1&t&&(g(0,"div",37)(1,"span",42),v(2),f(),N(3,"br"),g(4,"span")(5,"em"),v(6),At(7,"number"),f()()()),2&t){const e=T(2);_("ngbPopover",rt(10)),m(2),ce("",e.existingTraining.trainingName," "),m(4),ce("(",Qt(7,3,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function c6(t,i){1&t&&(g(0,"div",37)(1,"span"),v(2,"No Training Assigned"),f()()),2&t&&(T(2),_("ngbPopover",rt(12)))}function u6(t,i){if(1&t){const e=fe();g(0,"div")(1,"span")(2,"button",11),F("click",function(){return X(e),T(2).goToCoaching()}),v(3,"Coach"),f()()()}}function d6(t,i){if(1&t&&(g(0,"div"),N(1,"br"),g(2,"p",43),N(3,"ngb-progressbar",44),g(4,"span",45),v(5),At(6,"number"),f()(),N(7,"br"),f()),2&t){const e=T(2);m(3),_("value",e.trainingProgressBarPercent),m(2),ce("",Qt(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function h6(t,i){if(1&t){const e=fe();g(0,"app-training-list",46),F("selectedTrainingOption",function(r){return X(e),T(2).selectNewTraining(r)}),f()}2&t&&_("availableTrainingOptions",T(2).availableTrainings)}function f6(t,i){1&t&&(g(0,"div",47),v(1," This animal is currently busy and cannot train. "),f())}const p6=function(t){return{sizeSpacing:t}};function g6(t,i){if(1&t){const e=fe();g(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"button",11),F("click",function(){return X(e),T().unassignAnimal()}),v(5,"Unassign"),f(),N(6,"br")(7,"br"),x(8,i6,7,5,"div",12),f(),g(9,"div",13)(10,"span"),v(11),f(),N(12,"br"),x(13,a6,5,3,"div",14),x(14,s6,3,2,"div",15),g(15,"div")(16,"span",16),v(17),f(),x(18,o6,3,2,"span",17),f(),N(19,"hr"),x(20,l6,8,6,"div",17),x(21,c6,3,1,"div",17),f(),g(22,"div",18)(23,"button",11),F("click",function(){return X(e),T().returnToBarnView()}),v(24,"Back"),f(),N(25,"br")(26,"br")(27,"br"),x(28,u6,4,0,"div",12),f()(),N(29,"hr"),x(30,d6,8,5,"div",12),N(31,"br"),g(32,"div",19)(33,"span",20),F("click",function(){return X(e),T().resetFilters()}),v(34,"Change Training"),f(),N(35,"br"),g(36,"span",21)(37,"em"),v(38,"Click an option below to start training."),f()()(),N(39,"br"),g(40,"div",22)(41,"div",23)(42,"span",24),F("click",function(){return X(e),T().toggleFacilityFilter("Small")}),v(43,"Small "),f(),g(44,"span",25),F("click",function(){return X(e),T().toggleFacilityFilter("Medium")}),v(45,"Medium "),f(),g(46,"span",26),F("click",function(){return X(e),T().toggleFacilityFilter("Large")}),v(47,"Large "),f()(),g(48,"div",27)(49,"span",11),F("click",function(){return X(e),T().resetFilters()}),v(50,"Reset Filters"),f()(),g(51,"div",28)(52,"span",29),F("click",function(){return X(e),T().toggleStatFilter("Speed")}),v(53,"SPD "),f(),g(54,"span",30),F("click",function(){return X(e),T().toggleStatFilter("Acceleration")}),v(55,"ACC "),f(),g(56,"span",31),F("click",function(){return X(e),T().toggleStatFilter("Endurance")}),v(57,"END "),f(),g(58,"span",32),F("click",function(){return X(e),T().toggleStatFilter("Power")}),v(59,"PWR "),f(),g(60,"span",33),F("click",function(){return X(e),T().toggleStatFilter("Focus")}),v(61,"FCS "),f(),g(62,"span",34),F("click",function(){return X(e),T().toggleStatFilter("Adaptability")}),v(63,"ADP"),f()()(),N(64,"br"),g(65,"div",16),x(66,h6,1,1,"app-training-list",35),x(67,f6,2,0,"div",36),f()()()}if(2&t){const e=T();m(8),_("ngIf",e.barnSpecializationsUnlocked),m(3),ce(" ",e.barnName,""),m(2),_("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),m(1),_("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),m(2),_("ngClass",bi(32,p6,"Large"!==e.sizeValue)),m(1),ce("",e.sizeValue," "),m(1),_("ngIf","Large"!==e.sizeValue),m(2),_("ngIf",null!=e.existingTraining),m(1),_("ngIf",null==e.existingTraining),m(7),_("ngIf",e.coachingUnlocked),m(2),_("ngIf",null!=e.existingTraining),m(12),mt("filterActive",e.filterSmall),m(2),mt("filterActive",e.filterMedium),m(2),mt("filterActive",e.filterLarge),m(6),mt("filterActive",e.filterSpeed),m(2),mt("filterActive",e.filterAcceleration),m(2),mt("filterActive",e.filterEndurance),m(2),mt("filterActive",e.filterPower),m(2),mt("filterActive",e.filterFocus),m(2),mt("filterActive",e.filterAdaptability),m(3),_("ngClass",e.tutorialActive?"tutorialActive":""),m(1),_("ngIf",e.associatedAnimal.canTrain),m(1),_("ngIf",!e.associatedAnimal.canTrain)}}function m6(t,i){if(1&t){const e=fe();g(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",13)(4,"span"),v(5),f(),N(6,"br"),g(7,"span"),v(8,"Unassigned"),f()(),g(9,"div",18)(10,"button",11),F("click",function(){return X(e),T().returnToBarnView()}),v(11,"Back"),f()()(),N(12,"hr")(13,"br"),g(14,"span"),v(15,"Assign Animal"),f(),N(16,"br")(17,"br"),g(18,"app-animal-list",48),F("selectedAnimal",function(r){return X(e),T().assignAnimal(r)}),f()()()}if(2&t){const e=T();m(5),ce("Barn ",e.selectedBarnNumber,""),m(13),_("availableAnimals",e.availableAnimals)}}function v6(t,i){if(1&t){const e=fe();g(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",13)(4,"span"),v(5),f(),N(6,"br"),g(7,"span"),v(8,"Locked"),f()(),g(9,"div",18)(10,"button",11),F("click",function(){return X(e),T().returnToBarnView()}),v(11,"Back"),f()()(),N(12,"hr")(13,"br"),g(14,"div",49)(15,"span"),v(16,"Purchase Barn"),f(),N(17,"br")(18,"br"),g(19,"span",50),v(20),f(),N(21,"br"),g(22,"button",51),F("click",function(){return X(e),T().purchaseBarn()}),v(23,"Buy"),f()()()()}if(2&t){const e=T();m(5),ce("Barn ",e.selectedBarnNumber,""),m(15),ce("",e.barn.purchasePrice," Coins"),m(2),_("disabled",!e.canPurchaseBarn())}}function b6(t,i){if(1&t&&(g(0,"div",53),v(1),f()),2&t){const e=T(2);m(1),ce(" ",e.totalBarnStatsPopover," ")}}function _6(t,i){1&t&&x(0,b6,2,1,"div",52),2&t&&_("ngIf",""!==T().totalBarnStatsPopover)}function y6(t,i){if(1&t&&(g(0,"div",53),v(1),f()),2&t){const e=T(2);m(1),ce(" ",e.upgradeBarnPopover," ")}}function C6(t,i){1&t&&x(0,y6,2,1,"div",52),2&t&&_("ngIf",""!==T().upgradeBarnPopover)}function w6(t,i){if(1&t&&(g(0,"div",53),v(1),f()),2&t){const e=T(2);m(1),ce(" ",e.buildBiggerBarnPopover," ")}}function S6(t,i){1&t&&x(0,w6,2,1,"div",52),2&t&&_("ngIf",""!==T().buildBiggerBarnPopover)}function T6(t,i){1&t&&N(0,"div",55),2&t&&_("innerHTML",T(2).currentTrainingPopover,Dn)}function D6(t,i){1&t&&x(0,T6,1,1,"div",54),2&t&&_("ngIf",""!==T().currentTrainingPopover)}function R6(t,i){1&t&&N(0,"div",55),2&t&&_("innerHTML",T(2).currentTrainingPopover,Dn)}function x6(t,i){1&t&&x(0,R6,1,1,"div",54),2&t&&_("ngIf",""!==T().currentTrainingPopover)}const M6=function(t){return{selectedSpecialization:t}};function k6(t,i){if(1&t){const e=fe();g(0,"span",66),F("click",function(){const a=X(e).$implicit;return T(3).filterSpecialization(a)}),v(1),f()}if(2&t){const e=i.$implicit,n=T(3);_("ngClass",bi(2,M6,n.selectedSpecialization===e)),m(1),ce(" ",e.trim()," ")}}function A6(t,i){if(1&t&&(g(0,"div",64),x(1,k6,2,4,"span",65),f()),2&t){const e=T(2);m(1),_("ngForOf",e.specializationOptions)}}function P6(t,i){if(1&t&&(g(0,"div"),v(1),N(2,"br")(3,"br"),g(4,"strong"),v(5),f()()),2&t){const e=T(2);m(1),ce(" ",e.specializationDescription," "),m(4),ce(" ",e.inDepthSpecializationDescription," ")}}function E6(t,i){if(1&t){const e=fe();g(0,"div",56)(1,"form")(2,"div",57)(3,"h4",58),v(4,"Choose Barn Specialization"),f(),g(5,"button",59),F("click",function(){return X(e).$implicit.dismiss()}),v(6,"X"),f()(),g(7,"div",60),x(8,A6,2,1,"div",61),N(9,"hr"),x(10,P6,6,2,"div",12),f(),g(11,"div",62)(12,"button",63),F("click",function(){return X(e),T().selectSpecialization()}),v(13,"Select"),f()()()()}if(2&t){const e=T();m(8),_("ngIf",e.specializationOptions.length>0),m(2),_("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}let I6=(()=>{class t{constructor(e,n,r,a,s,o,l,c){this.globalService=e,this.gameLoopService=n,this.modalService=r,this.lookupService=a,this.componentCommunicationService=s,this.specializationService=o,this.tutorialService=l,this.utilityService=c,this.returnToBarnEmitter=new Ke,this.isCoachingEmitter=new Ke,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.coachingUnlocked=!1,this.tutorialActive=!1,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}keyEvent(e){var n=this.lookupService.getAvailableBarns().filter(o=>void 0!==o),r=n.findIndex(o=>this.selectedBarnNumber===o.barnNumber);if(r>-1)if(null!=this.subscription&&this.subscription.unsubscribe(),"ArrowLeft"===e.key)(a=r-1)<0&&(a=n.length-1),this.componentCommunicationService.setBarnView(Dt.barn,(s=n[a]).barnNumber),this.resetSelectedBarnInfo(s);else if("ArrowRight"===e.key){var a,s;(a=r+1)===n.length&&(a=0),this.componentCommunicationService.setBarnView(Dt.barn,(s=n[a]).barnNumber),this.resetSelectedBarnInfo(s)}}ngOnInit(){if(this.handleTutorial(),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(n=>n.barnNumber===this.selectedBarnNumber);null!=e&&this.resetSelectedBarnInfo(e)}}selectNewTraining(e){var n=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber===this.selectedBarnNumber);if(null!=n){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===at.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===at.Large&&(a="largeBarnTrainingTimeModifier");var s=this.globalService.globalVar.modifiers.find(o=>o.text===a);if(null!=s&&(r.trainingTimeRemaining=s.value),null!=n.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return void(n.queuedTraining=r);n.currentTraining.timeTrained=0}n.currentTraining=r,this.existingTraining=r,!this.globalService.globalVar.tutorials.tutorialCompleted&&2===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.componentCommunicationService.setAnimalView(Dt.animals,this.associatedAnimal))}}GetAvailableTrainingOptions(e){var n=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return n;n=this.globalService.globalVar.trainingOptions.filter(s=>s.isAvailable&&(s.facilitySize===at.Small||s.facilitySize===at.Medium&&(this.barn.size===at.Medium||this.barn.size===at.Large)||s.facilitySize===at.Large&&this.barn.size===at.Large));var r=[];n.forEach(s=>{var o=s.makeCopy(s),l=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),c=this.lookupService.getResourceByName("Stopwatch");null==c&&(c=0),o.timeToComplete*=1-(.05*c+l+e.miscStats.trainingTimeReduction/100),o.timeToComplete=Math.round(100*(o.timeToComplete+Number.EPSILON))/100,e.raceCourseType===H.Mountain&&(o.trainingType===Oe.ShortTrackRunning&&(o.trainingName="Short Track Climbing"),o.trainingType===Oe.TrailRunning&&(o.trainingName="Trail Climbing"),o.trainingType===Oe.LongTrackRunning&&(o.trainingName="Long Track Climbing")),e.raceCourseType===H.Ocean&&(o.trainingType===Oe.ShortTrackRunning&&(o.trainingName="Short Track Swimming"),o.trainingType===Oe.TrailRunning&&(o.trainingName="Lane Swimming"),o.trainingType===Oe.SmallWagonTow&&(o.trainingName="Small Canoe Tow"),o.trainingType===Oe.UphillRun&&(o.trainingName="Upstream Swim"),o.trainingType===Oe.LongTrackRunning&&(o.trainingName="Long Track Swimming"),o.trainingType===Oe.VehicleTow&&(o.trainingName="Boat Tow"),o.trainingType===Oe.GreenwayHike&&(o.trainingName="Canal Adventure")),o.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed,o.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration,o.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance,o.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power,o.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus,o.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability;var u=1,d=1,h=1,p=1,b=1,y=1;e.talentTree.talentTreeType===lt.sprint&&(y=1+e.talentTree.column1Row1Points/100,d=1+e.talentTree.column2Row1Points/100,p=1+e.talentTree.column3Row1Points/100),e.talentTree.talentTreeType===lt.longDistance&&(b=1+e.talentTree.column1Row1Points/100,u=1+e.talentTree.column2Row1Points/100,h=1+e.talentTree.column3Row1Points/100),o.affectedStatRatios.topSpeed*=u,o.affectedStatRatios.acceleration*=d,o.affectedStatRatios.endurance*=h,o.affectedStatRatios.power*=p,o.affectedStatRatios.focus*=b,o.affectedStatRatios.adaptability*=y,o.affectedStatRatios.topSpeed=Math.round(100*(o.affectedStatRatios.topSpeed+Number.EPSILON))/100,o.affectedStatRatios.acceleration=Math.round(100*(o.affectedStatRatios.acceleration+Number.EPSILON))/100,o.affectedStatRatios.endurance=Math.round(100*(o.affectedStatRatios.endurance+Number.EPSILON))/100,o.affectedStatRatios.power=Math.round(100*(o.affectedStatRatios.power+Number.EPSILON))/100,o.affectedStatRatios.focus=Math.round(100*(o.affectedStatRatios.focus+Number.EPSILON))/100,o.affectedStatRatios.adaptability=Math.round(100*(o.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(o)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(s=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&s.affectedStatRatios.acceleration>0||this.filterAdaptability&&s.affectedStatRatios.adaptability>0||this.filterEndurance&&s.affectedStatRatios.endurance>0||this.filterFocus&&s.affectedStatRatios.focus>0||this.filterPower&&s.affectedStatRatios.power>0||this.filterSpeed&&s.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&s.facilitySize===at.Small||this.filterMedium&&s.facilitySize===at.Medium||this.filterLarge&&s.facilitySize===at.Large)));var a=r.find(s=>{var o;return(null===(o=this.existingTraining)||void 0===o?void 0:o.trainingName)===s.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(n=>n.isAvailable&&(void 0===n.associatedBarnNumber||n.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(n=>n.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var n=this.lookupService.getAnimalByType(e.type);null!==n&&(n.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=n,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()}),!this.globalService.globalVar.tutorials.tutorialCompleted&&7===this.globalService.globalVar.tutorials.currentTutorialId&&this.associatedAnimal.type===q.Monkey&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===at.Small)this.barn.size=at.Medium,this.barn.facilityUpgradePrice=4e3,null!=(n=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&n.itemList.filter(r=>r.additionalIdentifier===at.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===at.Medium){var n;this.barn.size=at.Large,null!=(n=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&n.itemList.filter(a=>a.additionalIdentifier===at.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(s=>{this.lookupService.spendResourceByName(s.name,s.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}else alert("You don't have the required resources to upgrade your barn.")}canUpgradeBarn(e){var n=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(n=!1)}),n}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(){var e="Upgrade to gain barn bonuses";if(this.barn.barnUpgrades.barnLevel>=1&&(e="Barn Upgrades: \n"),this.barn.barnUpgrades.specialization===dn.TrainingFacility)e+=this.barn.barnUpgrades.specializationLevel<=20?"Training Time Reduction: "+this.barn.barnUpgrades.specializationLevel+"%\n":"Training Time Reduction: 20%\n All Stat Multiplier: "+(this.barn.barnUpgrades.specializationLevel-20)/10;else if(this.barn.barnUpgrades.specialization===dn.BreedingGrounds){var n=this.globalService.globalVar.modifiers.find(a=>"breedingGroundsSpecializationModifier"===a.text);null!=n&&(e+="Training Breed XP Multipler: "+this.barn.barnUpgrades.specializationLevel*(100*n.value)+"%\n")}else this.barn.barnUpgrades.specialization===dn.Attraction?e+=this.specializationService.getSpecializationPopoverText(dn.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===dn.ResearchCenter&&(e+=this.specializationService.getSpecializationPopoverText(dn.ResearchCenter,this.barn.barnUpgrades.specializationLevel));return this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(e+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(e+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(e+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(e+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(e+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(e+="Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"\n"),e}getUpgradeBarnPopover(){var e="Cost to upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===at.Small?e+="You will be able to do Medium trainings and increase idle training time to 4 hours.":this.barn.size===at.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 8 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){""!==this.selectedSpecialization&&null!=this.selectedSpecialization?(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(n=>{this.lookupService.spendResourceByName(n.name,n.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===dn.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.modalService.dismissAll()):alert("You must select a specialization.")}goToAnimal(){this.componentCommunicationService.setAnimalView(Dt.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(n=>n.type===q.Monkey);this.globalService.globalVar.tutorials.tutorialCompleted||1!==this.globalService.globalVar.tutorials.currentTutorialId?!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0):this.globalService.globalVar.tutorials.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}resetSelectedBarnInfo(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.coachingUnlocked=this.lookupService.isItemUnlocked("coaching"),this.selectedBarnNumber=e.barnNumber,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var n=this.globalService.globalVar.barns.find(s=>s.barnNumber===this.selectedBarnNumber);if(void 0!==n){this.barn=n,this.barnName=this.lookupService.getBarnName(n),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var r=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber==this.selectedBarnNumber);if(null!=r){if(this.animalAssigned=!0,this.associatedAnimal=r,this.associatedAnimalName=r.name,this.existingTraining=r.currentTraining,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(r),this.currentTrainingPopover=this.getCurrentTrainingPopover(r),null!=this.existingTraining){var a=this.availableTrainings.find(s=>{var o;return(null===(o=this.existingTraining)||void 0===o?void 0:o.trainingName)===s.trainingName});null!=a&&(a.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(Dt.barn,0),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(s=>{if(!this.barn.isLocked){var o=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.selectedBarnNumber);if(null!=o){if(null==o.currentTraining){if(null!==this.existingTraining){var l=this.availableTrainings.find(c=>{var u;return(null===(u=this.existingTraining)||void 0===u?void 0:u.trainingName)===c.trainingName});null!=l&&(l.isSelected=!1),this.existingTraining=null}return}o.currentTraining!==this.existingTraining&&(this.existingTraining=o.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=o.currentTraining.timeTrained/o.currentTraining.timeToComplete*100,this.currentTrainingPopover=this.getCurrentTrainingPopover(o)}}})}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}getCurrentTrainingPopover(e){var n="";null!=e.currentTraining&&(n+=e.currentTraining.trainingName+"\n"+this.lookupService.getStatGainDescription(e.currentTraining.affectedStatRatios,e.currentTraining.statGain)+"\n"),n+=e.name+" Current Stats:\n",n+="Speed: "+Math.round(e.currentStats.topSpeed).toLocaleString()+"\n",n+="Acceleration: "+Math.round(e.currentStats.acceleration).toLocaleString()+"\n",n+="Endurance: "+Math.round(e.currentStats.endurance).toLocaleString()+"\n",n+="Power: "+Math.round(e.currentStats.power).toLocaleString()+"\n",n+="Focus: "+Math.round(e.currentStats.focus).toLocaleString()+"\n",n+="Adaptability: "+Math.round(e.currentStats.adaptability).toLocaleString()+"\n",n+="Diminishing Returns: "+this.globalService.GetAnimalDiminishingReturns(e);var r=this.utilityService.getSanitizedHtml(n);return null!==r&&(n=r),n}goToCoaching(){this.isCoachingEmitter.emit(!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(yi),k(ls),k(hn),k(Qn),k(uD),k(hD),k($i))},t.\u0275cmp=st({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,n){if(1&e&&Ja(n6,7),2&e){let r;mn(r=vn())&&(n.specializationModal=r.first)}},hostBindings:function(e,n){1&e&&F("keyup",function(a){return n.keyEvent(a)},!1,Xa)},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter",isCoachingEmitter:"isCoachingEmitter"},decls:15,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["noTrainingContent",""],["currentTrainingContent",""],["specializationModal",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[3,"click"],[4,"ngIf"],[1,"info"],["class","keyword clickableText",3,"ngClass","click",4,"ngIf"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"trainingDescription"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText"],["id","smallFilter",3,"click"],["id","mediumFilter",3,"click"],["id","largeFilter",3,"click"],[1,"resetFiltersHeader","clickableText"],[1,"statFilter","clickableText"],["id","speedFilter",3,"click"],["id","accelerationFilter",3,"click"],["id","enduranceFilter",3,"click"],["id","powerFilter",3,"click"],["id","focusFilter",3,"click"],["id","adaptabilityFilter",3,"click"],[3,"availableTrainingOptions","selectedTrainingOption",4,"ngIf"],["class","keyword",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"keyword","clickableText",3,"ngClass","click"],[1,"clickableText","keyword",3,"ngClass","click"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[3,"availableTrainingOptions","selectedTrainingOption"],[1,"keyword"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price","resourceKeyword"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],["class","popoverClass",3,"innerHTML",4,"ngIf"],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"]],template:function(e,n){1&e&&(x(0,g6,68,34,"div",0),x(1,m6,19,2,"div",0),x(2,v6,24,3,"div",0),x(3,_6,1,1,"ng-template",null,1,ot),x(5,C6,1,1,"ng-template",null,2,ot),x(7,S6,1,1,"ng-template",null,3,ot),x(9,D6,1,1,"ng-template",null,4,ot),x(11,x6,1,1,"ng-template",null,5,ot),x(13,E6,14,2,"ng-template",null,6,ot)),2&e&&(_("ngIf",n.animalAssigned&&!n.barn.isLocked),m(1),_("ngIf",!n.animalAssigned&&!n.barn.isLocked),m(1),_("ngIf",n.barn.isLocked))},directives:[Kt,ma,Bn,_v,XU,bf,xh,bh,Xc,ri],pipes:[ns],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%]{text-align:center}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.trainingDescription[_ngcontent-%COMP%]{text-align:center}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}']}),t})();var $n=(()=>{return(t=$n||($n={}))[t.speed=0]="speed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",t[t.special=6]="special",$n;var t})();const N6=["coachingCanvas"],O6=["drawCoaching"];let V6=(()=>{class t{constructor(e,n,r,a){this.gameLoopService=e,this.globalService=n,this.themeService=r,this.utilityService=a,this.isCoachingEmitter=new Ke,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1}ngOnInit(){if(this.successfulAttemptStreak=0,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var n=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=n){this.associatedAnimal=n;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out into an open area for practice.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.currentPathType=this.getRandomPathType(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(n=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayTrace(this.context,0)})}setupCanvas(){this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width}displayTrace(e,n){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.currentPathType===$n.speed&&(this.activePoints=this.drawSpeedTrace(e)),this.currentPathType===$n.acceleration&&(this.activePoints=this.drawAccelerationTrace(e)),this.currentPathType===$n.endurance&&(this.activePoints=this.drawEnduranceTrace(e)),this.currentPathType===$n.power&&(this.activePoints=this.drawPowerTrace(e)),this.currentPathType===$n.focus&&(this.activePoints=this.drawFocusTrace(e)),this.currentPathType===$n.adaptability&&(this.activePoints=this.drawAdaptabilityTrace(e)),this.currentPathType===$n.special&&(this.activePoints=this.drawSpecialTrace(e)),e.strokeStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.globalCompositeOperation="source-atop";for(var r=0;r<this.currentEndPoint;r++)if(r<this.currentEndPoint-1)this.currentPathType===$n.power&&0===r?(e.beginPath(),e.ellipse(this.activePoints[0][0],this.activePoints[0][1],this.activePoints[0][2],this.activePoints[0][3],this.activePoints[0][4],this.activePoints[0][5],this.activePoints[0][6],!0),e.stroke()):(e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.activePoints[r+1][0],this.activePoints[r+1][1]),e.stroke());else if(this.currentPathType!==$n.power||0!==r&&2!==r)e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.currentX,this.currentY),e.stroke(),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,this.currentY-5,10,10);else{var a=0;2===r&&(a=3),e.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.fillRect(this.activePoints[a][0]-this.activePoints[a][2]-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],this.currentX-(this.activePoints[a][0]-this.activePoints[a][2]),2*this.activePoints[a][3]+2),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],10,2*this.activePoints[a][3])}}pointerMove(e){if(this.isPointerDown&&null!=this.activePoints&&0!==this.activePoints.length){e.preventDefault(),e.stopPropagation();var n=e.clientX-this.canvasOffsetX,r=e.clientY-this.canvasOffsetY,a=.1*this.canvasWidth,s=.1*this.canvasHeight;0===this.currentEndPoint&&(this.currentX=this.activePoints[0][0],this.currentY=this.activePoints[0][1],this.currentPathType===$n.power&&(this.currentX=this.activePoints[0][0]-this.activePoints[0][2],this.currentY=this.activePoints[0][1]),this.currentEndPoint=1),this.currentPathType===$n.power&&(s=.25*this.canvasHeight);var o=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint-1][0]:this.activePoints[this.currentEndPoint][0],l=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint][0]:this.activePoints[this.currentEndPoint-1][0],c=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint-1][1]:this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint][1]:this.activePoints[this.currentEndPoint-1][1],d=o-a,h=l+a,p=c-s,b=u+s,y=!1,w=!1,S=!1,C=!1;if(this.activePoints[this.currentEndPoint-1][0]>this.activePoints[this.currentEndPoint][0]&&(y=!0),this.activePoints[this.currentEndPoint-1][1]>this.activePoints[this.currentEndPoint][1]&&(w=!0),this.activePoints[this.currentEndPoint-1][0]===this.activePoints[this.currentEndPoint][0]&&(S=!0),this.activePoints[this.currentEndPoint-1][1]===this.activePoints[this.currentEndPoint][1]&&(C=!0),this.currentPathType!==$n.power||1!==this.currentEndPoint&&3!==this.currentEndPoint?this.currentPathType===$n.power&&2===this.currentEndPoint&&(d=(o=this.activePoints[2][0])-a,h=(l=this.activePoints[1][0])+a,p=(c=this.activePoints[1][1])-s,b=(u=this.activePoints[2][1])+s,y=!0,w=!1,S=!1,C=!1):(1===this.currentEndPoint?(o=this.activePoints[this.currentEndPoint-1][0]-this.activePoints[this.currentEndPoint-1][2],l=this.activePoints[this.currentEndPoint-1][0]+this.activePoints[this.currentEndPoint-1][2],c=this.activePoints[this.currentEndPoint-1][1],u=this.activePoints[this.currentEndPoint-1][1]):(o=this.activePoints[this.currentEndPoint][0]-this.activePoints[this.currentEndPoint][2],l=this.activePoints[this.currentEndPoint][0]+this.activePoints[this.currentEndPoint][2],c=this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint][1]),d=o-a,h=l+a,p=c-s,b=u+s,y=!1,w=!1,S=!1,C=!0),n>=d&&n<=h&&r>=p&&r<=b){if(S||C)(!w&&r>this.currentY||w&&r<this.currentY)&&!C&&(this.currentY=r),(!y&&n>this.currentX||y&&n<this.currentX)&&!S&&(this.currentX=n);else if(!y&&n>this.currentX||y&&n<this.currentX){var I=(n-o)/(l-o);y&&(I=1-I),w&&(I=1-I);var W=(u-c)*I+c;this.currentX=n,this.currentY=W}var G=.005*this.canvasWidth,Q=.005*this.canvasHeight;(!y&&this.currentX>=l-G||y&&this.currentX<=o+G)&&(!w&&this.currentY>=u-Q||w&&this.currentY<=c+Q)&&(this.currentX=y?o:l,this.currentY=w?c:u,this.currentEndPoint+=1,this.currentEndPoint>this.activePoints.length-1&&this.completePath())}}}pointerUp(){this.isPointerDown=!1}pointerDown(){this.isPointerDown=!0}drawSpeedTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([n,r]),a.push([this.canvasWidth-n,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-n,this.canvasHeight-r]),a.push([n,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}drawAdaptabilityTrace(e){var n=.1*this.canvasWidth,s=(this.canvasWidth-2*n)/14,o=(this.canvasHeight-.1*this.canvasHeight*2)/7,l=[];l.push([n,this.canvasHeight/2]),l.push([n+s,this.canvasHeight/2-o]),l.push([n+2*s,this.canvasHeight/2+o]),l.push([n+3*s,this.canvasHeight/2-2*o]),l.push([n+4*s,this.canvasHeight/2+2*o]),l.push([n+5*s,this.canvasHeight/2-3*o]),l.push([n+6*s,this.canvasHeight/2+3*o]),l.push([n+7*s,this.canvasHeight/2-4*o]),l.push([n+8*s,this.canvasHeight/2+3*o]),l.push([n+9*s,this.canvasHeight/2-3*o]),l.push([n+10*s,this.canvasHeight/2+2*o]),l.push([n+11*s,this.canvasHeight/2-2*o]),l.push([n+12*s,this.canvasHeight/2+o]),l.push([n+13*s,this.canvasHeight/2-o]),l.push([n+14*s,this.canvasHeight/2]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawPowerTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([this.canvasWidth/2,this.canvasHeight/4,this.canvasWidth/2-n,this.canvasHeight/4-r,0,0,Math.PI]),a.push([this.canvasWidth/2+(this.canvasWidth/2-n),this.canvasHeight/4]),a.push([this.canvasWidth/2-(this.canvasWidth/2-n),3*this.canvasHeight/4]),a.push([this.canvasWidth/2,3*this.canvasHeight/4,this.canvasWidth/2-n,this.canvasHeight/4-r,0,0,Math.PI]),e.beginPath(),e.ellipse(a[0][0],a[0][1],a[0][2],a[0][3],a[0][4],a[0][5],a[0][6],!0),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.ellipse(a[3][0],a[3][1],a[3][2],a[3][3],a[3][4],a[3][5],a[3][6],!1),e.stroke(),a}drawEnduranceTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=.15*this.canvasWidth,s=.15*this.canvasHeight,o=[];o.push([n,r]),o.push([this.canvasWidth-n,r]),o.push([this.canvasWidth-n,this.canvasHeight-r]),o.push([n,this.canvasHeight-r]),o.push([n,r+s]),o.push([this.canvasWidth-(n+a),r+s]),o.push([this.canvasWidth-(n+a),this.canvasHeight-(r+s)]),o.push([n+a,this.canvasHeight-(r+s)]),o.push([n+a,r+2*s]),o.push([this.canvasWidth-(n+2*a),r+2*s]),o.push([this.canvasWidth-(n+2*a),this.canvasHeight-(r+2*s)]),o.push([n+2*a,this.canvasHeight-(r+2*s)]),o.push([n+2*a,this.canvasHeight/2]),o.push([this.canvasWidth/2,this.canvasHeight/2]);for(var l=1;l<o.length;l++)e.beginPath(),e.moveTo(o[l-1][0],o[l-1][1]),e.lineTo(o[l][0],o[l][1]),e.stroke();return o}drawFocusTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];a.push([this.canvasWidth/3,r]),a.push([this.canvasWidth/3,this.canvasHeight/6]),a.push([n,this.canvasHeight/6]),a.push([this.canvasWidth/2,this.canvasHeight-r]),a.push([this.canvasWidth-n,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,r]);for(var s=1;s<a.length;s++)e.beginPath(),e.moveTo(a[s-1][0],a[s-1][1]),e.lineTo(a[s][0],a[s][1]),e.stroke();return a}drawAccelerationTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=11,s=this.canvasWidth-2*n,o=this.canvasHeight-2*r,l=[];l.push([n,r]),l.push([s/a+n,r]),l.push([s/a+n,2*o/a+r]),l.push([2*s/a+n,2*o/a+r]),l.push([2*s/a+n,4*o/a+r]),l.push([3*s/a+n,4*o/a+r]),l.push([3*s/a+n,6*o/a+r]),l.push([4*s/a+n,6*o/a+r]),l.push([4*s/a+n,8*o/a+r]),l.push([5*s/a+n,8*o/a+r]),l.push([5*s/a+n,10*o/a+r]),l.push([6*s/a+n,10*o/a+r]),l.push([6*s/a+n,8*o/a+r]),l.push([7*s/a+n,8*o/a+r]),l.push([7*s/a+n,6*o/a+r]),l.push([8*s/a+n,6*o/a+r]),l.push([8*s/a+n,4*o/a+r]),l.push([9*s/a+n,4*o/a+r]),l.push([9*s/a+n,2*o/a+r]),l.push([10*s/a+n,2*o/a+r]),l.push([10*s/a+n,r]),l.push([11*s/a+n,r]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawSpecialTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([n,r]),a.push([this.canvasWidth-n,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-n,this.canvasHeight-r]),a.push([n,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}getAnimalDistanceColor(e){var n="";return e===H.Flatland&&(n="#7d3f00"),e===H.Mountain&&(n="#1b630d"),e===H.Ocean&&(n="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===H.Tundra&&(n="#28809c"),e===H.Volcanic&&(n="#8f1a1a"),n}getAnimalRacerColor(e){var n="";return e===H.Flatland&&(n="#c66900"),e===H.Mountain&&(n="#279113"),e===H.Ocean&&(n="night"===this.themeService.getActiveThemeName()?"#7463f7":"#0000FF"),e===H.Tundra&&(n="#1CA1C9"),e===H.Volcanic&&(n="#D92525"),n}getRandomPathType(e){var n=Object.keys($n),r=[];n.forEach((s,o)=>{!isNaN(Number(s))&&6!==Number(s)&&r.push(Number(s))});var a=this.utilityService.getRandomInteger(0,r.length-1);return r[a]}completePath(){this.getNewPath=!0,this.currentEndPoint=0,this.activePoints=[],this.currentX=0,this.currentY=0,this.isPointerDown=!1,this.successfulAttemptStreak+=1,this.getReward(this.currentPathType),this.associatedAnimal.trackedAnimalStats.successfulCoachingAttempts+=1,this.currentPathType=this.getRandomPathType(this.currentPathType)}getReward(e){var n=1,r=this.globalService.globalVar.resources.find(l=>"Whistle"===l.name);if(null!=r&&r.amount>0){var a=this.globalService.globalVar.modifiers.find(l=>"whistleModifier"===l.text);null!=a&&(n=a.value)}var s=this.globalService.globalVar.resources.find(l=>"Golden Whistle"===l.name);if(null!=s&&s.amount>0){var o=this.globalService.globalVar.modifiers.find(l=>"goldenWhistleModifier"===l.text);null!=o&&(n=o.value)}e===$n.speed&&(this.associatedAnimal.currentStats.topSpeed+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" speed. ("+this.associatedAnimal.currentStats.topSpeed.toFixed(2)+")\n"),e===$n.acceleration&&(this.associatedAnimal.currentStats.acceleration+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" acceleration. ("+this.associatedAnimal.currentStats.acceleration.toFixed(2)+")\n"),e===$n.endurance&&(this.associatedAnimal.currentStats.endurance+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" endurance. ("+this.associatedAnimal.currentStats.endurance.toFixed(2)+")\n"),e===$n.power&&(this.associatedAnimal.currentStats.power+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" power. ("+this.associatedAnimal.currentStats.power.toFixed(2)+")\n"),e===$n.focus&&(this.associatedAnimal.currentStats.focus+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" focus. ("+this.associatedAnimal.currentStats.focus.toFixed(2)+")\n"),e===$n.adaptability&&(this.associatedAnimal.currentStats.adaptability+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" adaptability. ("+this.associatedAnimal.currentStats.adaptability.toFixed(2)+")\n"),this.successfulAttemptStreak%5==0&&(this.globalService.increaseAbilityXp(this.associatedAnimal,n),this.incrementalCoachingUpdates+=this.animalDisplayName+" also gains "+n+" XP towards their ability "+this.associatedAnimal.ability.name+"!\n"),this.globalService.calculateAnimalRacingStats(this.associatedAnimal)}returnToSelectedBarnView(){this.isCoachingEmitter.emit(!1)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yi),k(yt),k(Rl),k($i))},t.\u0275cmp=st({type:t,selectors:[["app-coaching"]],viewQuery:function(e,n){if(1&e&&(Ja(N6,5,un),Ja(O6,5,un)),2&e){let r;mn(r=vn())&&(n.coachingCanvas=r.first),mn(r=vn())&&(n.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{isCoachingEmitter:"isCoachingEmitter"},decls:22,vars:2,consts:[[1,"coachingView"],[1,"marginDiv"],["id","coachingInfo"],[1,"infoGridContainer"],[1,"info"],[1,"description"],[1,"back"],[3,"click"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],["id","coachingCanvas",1,"coachingCanvas",3,"pointermove","pointerdown","pointerup"],["coachingCanvas",""],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""]],template:function(e,n){if(1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),v(6,"Coaching"),f(),g(7,"div",5),v(8," Show your animals the way by tracing each path. Successfully making it through will reward your partner with a stat point. "),f()(),g(9,"div",6)(10,"button",7),F("click",function(){return n.returnToSelectedBarnView()}),v(11,"Back"),f()()(),N(12,"hr"),f(),g(13,"div",8)(14,"div",9)(15,"div",10,11)(17,"div",12)(18,"canvas",13,14),F("pointermove",function(a){return n.pointerMove(a)})("pointerdown",function(){return n.pointerDown()})("pointerup",function(){return n.pointerUp()}),f()()(),N(20,"div",15,16),f()()()()),2&e){const r=rt(21);m(20),_("scrollTop",r.scrollHeight)("innerHTML",n.incrementalCoachingUpdates.trim(),Dn)}},styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}']}),t})();function F6(t,i){if(1&t){const e=fe();g(0,"div",12)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",4))}function B6(t,i){if(1&t){const e=fe();g(0,"div",13)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",5))}function L6(t,i){if(1&t){const e=fe();g(0,"div",14)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",6))}function U6(t,i){if(1&t&&(g(0,"div",3),x(1,F6,2,1,"div",9),x(2,B6,2,1,"div",10),x(3,L6,2,1,"div",11),f()),2&t){const e=T(2);m(1),_("ngIf",e.barnRow2IsUnlocked),m(1),_("ngIf",e.barnRow2IsUnlocked),m(1),_("ngIf",e.barnRow2IsUnlocked)}}function H6(t,i){if(1&t){const e=fe();g(0,"div",18)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",7))}function G6(t,i){if(1&t){const e=fe();g(0,"div",19)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",8))}function j6(t,i){if(1&t){const e=fe();g(0,"div",20)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",9))}function z6(t,i){if(1&t&&(g(0,"div",3),x(1,H6,2,1,"div",15),x(2,G6,2,1,"div",16),x(3,j6,2,1,"div",17),f()),2&t){const e=T(2);m(1),_("ngIf",e.barnRow3IsUnlocked),m(1),_("ngIf",e.barnRow3IsUnlocked),m(1),_("ngIf",e.barnRow3IsUnlocked)}}function $6(t,i){if(1&t){const e=fe();g(0,"div",24)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",10))}function W6(t,i){if(1&t){const e=fe();g(0,"div",25)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",11))}function q6(t,i){if(1&t){const e=fe();g(0,"div",26)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",12))}function X6(t,i){if(1&t&&(g(0,"div",3),x(1,$6,2,1,"div",21),x(2,W6,2,1,"div",22),x(3,q6,2,1,"div",23),f()),2&t){const e=T(2);m(1),_("ngIf",e.barnRow4IsUnlocked),m(1),_("ngIf",e.barnRow4IsUnlocked),m(1),_("ngIf",e.barnRow4IsUnlocked)}}function Y6(t,i){if(1&t){const e=fe();g(0,"div",30)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",13))}function Q6(t,i){if(1&t){const e=fe();g(0,"div",31)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",14))}function K6(t,i){if(1&t){const e=fe();g(0,"div",32)(1,"app-barn",5),F("selectedBarn",function(r){return X(e),T(3).goToBarn(r)}),f()()}2&t&&(m(1),_("barnNumber",15))}function Z6(t,i){if(1&t&&(g(0,"div",3),x(1,Y6,2,1,"div",27),x(2,Q6,2,1,"div",28),x(3,K6,2,1,"div",29),f()),2&t){const e=T(2);m(1),_("ngIf",e.barnRow5IsUnlocked),m(1),_("ngIf",e.barnRow5IsUnlocked),m(1),_("ngIf",e.barnRow5IsUnlocked)}}function J6(t,i){if(1&t){const e=fe();g(0,"div",2)(1,"div",3)(2,"div",4)(3,"app-barn",5),F("selectedBarn",function(r){return X(e),T().goToBarn(r)}),f()(),g(4,"div",6)(5,"app-barn",5),F("selectedBarn",function(r){return X(e),T().goToBarn(r)}),f()(),g(6,"div",7)(7,"app-barn",5),F("selectedBarn",function(r){return X(e),T().goToBarn(r)}),f()()(),x(8,U6,4,3,"div",8),x(9,z6,4,3,"div",8),x(10,X6,4,3,"div",8),x(11,Z6,4,3,"div",8),f()}if(2&t){const e=T();m(2),_("ngClass",e.tutorialActive?"tutorialActive":""),m(1),_("barnNumber",1),m(2),_("barnNumber",2),m(2),_("barnNumber",3),m(1),_("ngIf",e.barnRow2IsUnlocked),m(1),_("ngIf",e.barnRow3IsUnlocked),m(1),_("ngIf",e.barnRow4IsUnlocked),m(1),_("ngIf",e.barnRow5IsUnlocked)}}function eH(t,i){if(1&t){const e=fe();g(0,"app-selected-barn",36),F("returnToBarnEmitter",function(){return X(e),T(2).goToBarn(0)})("isCoachingEmitter",function(r){return X(e),T(2).goToCoaching(r)}),f()}2&t&&_("selectedBarnNumber",T(2).selectedBarn)}function tH(t,i){if(1&t){const e=fe();g(0,"app-coaching",37),F("isCoachingEmitter",function(r){return X(e),T(2).goToCoaching(r)}),f()}2&t&&_("selectedBarnNumber",T(2).selectedBarn)}function nH(t,i){if(1&t&&(g(0,"div",33),x(1,eH,1,1,"app-selected-barn",34),x(2,tH,1,1,"app-coaching",35),f()),2&t){const e=T();m(1),_("ngIf",!e.isCoaching),m(1),_("ngIf",e.isCoaching)}}let iH=(()=>{class t{constructor(e,n,r){this.lookupService=e,this.componentCommunicationService=n,this.globalService=r,this.selectedBarn=0,this.isCoaching=!1,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1,this.barnRow5IsUnlocked=!1}ngOnInit(){var e;this.componentCommunicationService.setNewView(Dt.barn),this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),this.barnRow5IsUnlocked=this.lookupService.isItemUnlocked("barnRow5"),!this.globalService.globalVar.tutorials.tutorialCompleted&&1===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(n=>n.type===q.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(n=>{n>0&&(this.selectedBarn=n)})}goToBarn(e){this.selectedBarn=e}goToCoaching(e){this.isCoaching=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(hn),k(Qn),k(yt))},t.\u0275cmp=st({type:t,selectors:[["app-barn-view"]],decls:2,vars:2,consts:[["class","gridContainer","id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],["id","barnViewDiv",1,"gridContainer"],[1,"barnRow"],[1,"barn1","barnDefault",3,"ngClass"],[3,"barnNumber","selectedBarn"],[1,"barn2","barnDefault"],[1,"barn3","barnDefault"],["class","barnRow",4,"ngIf"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],[1,"barn5","barnDefault"],[1,"barn6","barnDefault"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn7","barnDefault"],[1,"barn8","barnDefault"],[1,"barn9","barnDefault"],["class","barn10 barnDefault",4,"ngIf"],["class","barn11 barnDefault",4,"ngIf"],["class","barn12 barnDefault",4,"ngIf"],[1,"barn10","barnDefault"],[1,"barn11","barnDefault"],[1,"barn12","barnDefault"],["class","barn13 barnDefault",4,"ngIf"],["class","barn14 barnDefault",4,"ngIf"],["class","barn15 barnDefault",4,"ngIf"],[1,"barn13","barnDefault"],[1,"barn14","barnDefault"],[1,"barn15","barnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter"],[3,"selectedBarnNumber","isCoachingEmitter"]],template:function(e,n){1&e&&(x(0,J6,12,8,"div",0),x(1,nH,3,2,"div",1)),2&e&&(_("ngIf",0===n.selectedBarn),m(1),_("ngIf",n.selectedBarn>0))},directives:[Kt,Bn,jU,I6,V6],styles:["#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.barnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;width:33.3333%;display:inline-block;vertical-align:middle;height:100%}.barnRow[_ngcontent-%COMP%]{height:25%;width:100%;display:inline-block}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}"]}),t})();function rH(t,i){1&t&&(g(0,"span",5),v(1," Primary "),f())}function aH(t,i){1&t&&(g(0,"span",5),v(1," Auto Run Free Race "),f())}function sH(t,i){1&t&&(g(0,"span",5),v(1," Event "),f())}function oH(t,i){1&t&&N(0,"br")}function lH(t,i){1&t&&(g(0,"span",8),v(1," / "),f())}function cH(t,i){if(1&t&&(g(0,"span",6),v(1),x(2,lH,2,0,"span",7),f()),2&t){const e=i.$implicit,n=i.index,r=T();_("ngClass",r.getColorClass(e)),m(1),ce(" ",e.name,""),m(1),_("ngIf",n<r.deck.selectedAnimals.length-1)}}let yv=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var n=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=n&&(this.deck=n)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}goToDeckView(){this.componentCommunicationService.setNewView(Dt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:11,vars:6,consts:[[1,"relayTeam"],["class","primaryText keyword rightSpaced",4,"ngIf"],[4,"ngIf"],[1,"clickableText",3,"click"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div"),x(2,rH,2,0,"span",1),x(3,aH,2,0,"span",1),x(4,sH,2,0,"span",1),x(5,oH,1,0,"br",2),f(),g(6,"div")(7,"strong",3),F("click",function(){return n.goToDeckView()}),v(8),f(),v(9," - "),x(10,cH,3,3,"span",4),f()()),2&e&&(m(2),_("ngIf",n.deck.isPrimaryDeck&&void 0!==n.deckNumber&&n.deckNumber>0),m(1),_("ngIf",n.deck.autoRunFreeRace&&void 0!==n.deckNumber&&n.deckNumber>0),m(1),_("ngIf",n.deck.isEventDeck&&void 0!==n.deckNumber&&n.deckNumber>0),m(1),_("ngIf",n.deckNumber>0),m(3),nt(n.deck.name),m(2),_("ngForOf",n.deck.selectedAnimals))},directives:[Kt,ri,Bn],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.relayTeam[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%}"]}),t})();function uH(t,i){if(1&t&&(g(0,"span"),v(1),f()),2&t){const e=T();m(1),ce("Race ",e.index+1," ")}}function dH(t,i){if(1&t&&(g(0,"p",5),v(1),At(2,"number"),g(3,"span",6),v(4),f()()),2&t){const e=i.$implicit,n=T();_("ngClass",n.getNoRacerClass(e)),m(1),ti(" ",Qt(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),m(2),_("ngClass",n.getColorClass(e)),m(1),nt(e.getCourseTypeName())}}function hH(t,i){if(1&t&&(g(0,"p"),v(1),f()),2&t){const e=T();m(1),nt(e.race.isCompleted?"Completed":e.cannotRace?"Cannot Run":"Start")}}function fH(t,i){if(1&t&&(g(0,"div",7),v(1),f()),2&t){const e=T();m(1),ce(" ",e.popoverText," ")}}const pH=function(t){return{raceNotAllowed:t}};let Cv=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.missingRacers=[],this.busyRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(n=>{if(null==e||0===e.selectedAnimals.length&&this.race.raceType!==Fe.trainingTrack)this.cannotRace=!0,this.missingRacers.push(n.courseType);else if((null==e?void 0:e.selectedAnimals.some(a=>a.raceCourseType===n.courseType))||this.race.raceType===Fe.trainingTrack){var r=null==e?void 0:e.selectedAnimals.find(a=>a.raceCourseType===n.courseType);void 0!==r&&!this.lookupService.canAnimalRace(r)&&(this.cannotRace=!0,this.busyRacers.push(r))}else this.cannotRace=!0,this.missingRacers.push(n.courseType)}),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===$t.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var n=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||(r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(n=!0),this.busyRacers.some(a=>a.raceCourseType===e.courseType)&&(n=!1)),n}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";return this.missingRacers.forEach(n=>{e+="-Missing "+H[n]+" racer\n"}),this.busyRacers.forEach(n=>{e+="-"+n.name+" is active in another race\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===$t.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon."),e}getSuccessfulPopoverText(){var e="",n=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),n<this.race.raceLegs.length&&(e+="\n"),n+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(hn))},t.\u0275cmp=st({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText"},decls:8,vars:8,consts:[[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[3,"ngClass",4,"ngFor","ngForOf"],["popContent",""],[3,"ngClass"],[1,"coloredText",3,"ngClass"],[1,"popoverClass"]],template:function(e,n){if(1&e&&(g(0,"div",0),x(1,uH,2,1,"span",1),N(2,"br"),g(3,"div",2),x(4,dH,5,8,"p",3),x(5,hH,2,1,"p",1),f()(),x(6,fH,2,1,"ng-template",null,4,ot)),2&e){const r=rt(7);m(1),_("ngIf",null!=n.index&&n.index>-1),m(2),_("ngClass",bi(6,pH,n.cannotRace))("ngbPopover",r)("disablePopover",""===n.popoverText),m(1),_("ngForOf",n.race.raceLegs),m(1),_("ngIf",n.showStartText)}},directives:[Kt,Bn,ma,ri],pipes:[ns],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}"]}),t})();function gH(t,i){if(1&t){const e=fe();g(0,"div",10),F("click",function(){const a=X(e).$implicit;return T().selectCircuitRace(a)}),N(1,"app-race-description",11),f()}if(2&t){const e=i.$implicit,n=i.index,r=T();Eg("circuitRace",n+1,""),_("ngClass",r.tutorialActive?"tutorialActive":""),m(1),_("index",n)("race",e)("showStartText",!0)}}function mH(t,i){if(1&t){const e=fe();g(0,"div",12),F("click",function(){const a=X(e).$implicit;return T().selectLocalRace(a)}),N(1,"app-race-description",11),f()}if(2&t){const e=i.$implicit,n=i.index;Eg("localRace",n+1,""),m(1),_("index",n)("race",e)("showStartText",!0)}}function vH(t,i){if(1&t&&(g(0,"div",13),v(1),f()),2&t){const e=T();m(1),ce(" ",e.circuitRankUpDescription," ")}}let bH=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.utilityService=n,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new Ke,this.tutorialActive=!1,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.handleTutorial(),this.availableLocalRaces=[],this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace());var n=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(o=>o.requiredRank===n);var r=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);this.availableCircuitRaces.forEach(o=>{void 0!==r&&(o.raceLegs=this.globalService.reorganizeLegsByDeckOrder(o.raceLegs,r))}),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var a=900,s=this.globalService.globalVar.modifiers.find(o=>"freeRacesTimePeriodModifier"===o.text);void 0!==s&&(a=s.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var o=Xr(function*(l){var c=a-e.globalService.globalVar.freeRaceTimePeriodCounter,u=Math.floor(c/60),d=c-60*u,h=Math.floor(d).toString();d<10&&(h=d<1||d>59?"00":String(h).padStart(2,"0")),e.freeRaceTimer=u+":"+h,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(l){return o.apply(this,arguments)}}())}selectCircuitRace(e){var n=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(o=>o.raceCourseType===a.courseType))||(n=!1);var s=null==r?void 0:r.selectedAnimals.find(o=>o.raceCourseType===a.courseType);void 0!==s&&!this.lookupService.canAnimalRace(s)&&(n=!1)}),e.isCompleted&&(n=!1),!this.globalService.globalVar.tutorials.tutorialCompleted&&4===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1),n&&this.raceSelected.emit(e)):n=!1}selectLocalRace(e){var n=!0,r=e.localRaceType===$t.Free,a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(s=>{(null==a?void 0:a.selectedAnimals.some(o=>o.raceCourseType===s.courseType))||(n=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(n=!1),n&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):n=!1}handleTutorial(){var e;!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&5===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(n=>n.type===q.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k($i),k(hn),k(yi))},t.\u0275cmp=st({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:25,vars:7,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[3,"click"],[1,"popoverClass"]],template:function(e,n){if(1&e&&(g(0,"div",0),N(1,"app-animal-deck")(2,"hr"),g(3,"div",1)(4,"span",2),v(5,"Circuit Rank "),g(6,"strong"),v(7),f()(),N(8,"br")(9,"br"),f(),g(10,"div",3),x(11,gH,2,7,"div",4),f(),N(12,"hr"),g(13,"div",5)(14,"span",6),v(15,"Free Races"),f(),N(16,"br"),g(17,"em"),v(18),f(),N(19,"br")(20,"br"),g(21,"div",7),x(22,mH,2,6,"div",8),f()()(),x(23,vH,2,1,"ng-template",null,9,ot)),2&e){const r=rt(24);m(4),_("ngbPopover",r),m(3),nt(n.circuitRank),m(4),_("ngForOf",n.availableCircuitRaces),m(7),Ag(" ",n.freeRacesRemaining," of ",n.totalFreeRaces," remaining -- resets in ",n.freeRaceTimer,""),m(4),_("ngForOf",n.availableLocalRaces)}},directives:[yv,ma,ri,Bn,Cv],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}#localRaceSection[_ngcontent-%COMP%]{text-align:center}']}),t})();function _H(t,i){if(1&t){const e=fe();g(0,"div",9),F("click",function(){X(e);const r=T(2);return r.selectLocalRace(r.availableMonoRace)}),g(1,"span",10),v(2,"Mono Race "),g(3,"strong"),v(4),f()(),N(5,"br")(6,"app-race-description",11),f()}if(2&t){const e=T(2);m(4),nt(e.monoRaceRank),m(2),_("race",e.availableMonoRace)("showStartText",!0)}}function yH(t,i){1&t&&(g(0,"div",12),v(1," Next Mono Race Available After Circuit Rank Up "),f())}function CH(t,i){if(1&t&&(g(0,"div",6),x(1,_H,7,3,"div",7),x(2,yH,2,0,"div",8),N(3,"hr"),f()),2&t){const e=T();m(1),_("ngIf",null!=e.availableMonoRace),m(1),_("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function wH(t,i){if(1&t){const e=fe();g(0,"div",16),F("click",function(){X(e);const r=T(2);return r.selectLocalRace(r.availableDuoRace)}),g(1,"span",10),v(2,"Duo Race "),g(3,"strong"),v(4),f()(),N(5,"br")(6,"app-race-description",11),f()}if(2&t){const e=T(2);m(4),nt(e.duoRaceRank),m(2),_("race",e.availableDuoRace)("showStartText",!0)}}function SH(t,i){1&t&&(g(0,"div",17),v(1," Next Duo Race Available After Circuit Rank Up "),f())}function TH(t,i){if(1&t&&(g(0,"div",13),x(1,wH,7,3,"div",14),x(2,SH,2,0,"div",15),N(3,"hr"),f()),2&t){const e=T();m(1),_("ngIf",null!=e.availableDuoRace),m(1),_("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function DH(t,i){if(1&t){const e=fe();g(0,"div",21),F("click",function(){X(e);const r=T(2);return r.selectLocalRace(r.availableRainbowRace)}),g(1,"span",10),v(2,"Rainbow Race "),g(3,"strong"),v(4),f()(),N(5,"br")(6,"app-race-description",11),f()}if(2&t){const e=T(2);m(4),nt(e.rainbowRaceRank),m(2),_("race",e.availableRainbowRace)("showStartText",!0)}}function RH(t,i){1&t&&(g(0,"div",22),v(1," Next Rainbow Race Available After Circuit Rank Up "),f())}function xH(t,i){if(1&t&&(g(0,"div",18),x(1,DH,7,3,"div",19),x(2,RH,2,0,"div",20),N(3,"hr"),f()),2&t){const e=T();m(1),_("ngIf",null!=e.availableRainbowRace),m(1),_("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}let MH=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.utilityService=n,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new Ke,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){this.availableLocalRaces=[];var e=this.getNextAvailableSpecialRace($t.Mono);void 0!==e&&(this.availableMonoRace=e);var n=this.getNextAvailableSpecialRace($t.Duo);void 0!==n&&(this.availableDuoRace=n);var r=this.getNextAvailableSpecialRace($t.Rainbow);void 0!==r&&(this.availableRainbowRace=r),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank)),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace")}getNextAvailableSpecialRace(e){return e===$t.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===$t.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===$t.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),this.globalService.globalVar.localRaces.find(n=>n.localRaceType===e)}sortByRankRequired(e,n){return e.requiredRank>n.requiredRank?1:n.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var n=!0,r=e.localRaceType===$t.Free,a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(s=>{(null==a?void 0:a.selectedAnimals.some(l=>l.raceCourseType===s.courseType))||(n=!1);var o=null==a?void 0:a.selectedAnimals.find(l=>l.raceCourseType===s.courseType);void 0!==o&&!this.lookupService.canAnimalRace(o)&&(n=!1)}),n&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):n=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k($i),k(hn),k(yi))},t.\u0275cmp=st({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:8,vars:3,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","monoRaceSection"],["class","monoRace",3,"click",4,"ngIf"],["class","monoRace",4,"ngIf"],[1,"monoRace",3,"click"],[1,"s4Heading"],[3,"race","showStartText"],[1,"monoRace"],["id","duoRaceSection"],["class","duoRace",3,"click",4,"ngIf"],["class","duoRace",4,"ngIf"],[1,"duoRace",3,"click"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",3,"click",4,"ngIf"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace",3,"click"],[1,"rainbowRace"]],template:function(e,n){1&e&&(g(0,"div",0),N(1,"div",1)(2,"app-animal-deck")(3,"hr"),g(4,"div",2),x(5,CH,4,2,"div",3),x(6,TH,4,2,"div",4),x(7,xH,4,2,"div",5),f()()),2&e&&(m(5),_("ngIf",n.areMonoRacesAvailable),m(1),_("ngIf",n.areDuoRacesAvailable),m(1),_("ngIf",n.areRainbowRacesAvailable))},directives:[yv,Kt,Cv],styles:[".allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}"]}),t})();function kH(t,i){1&t&&(g(0,"div"),N(1,"br"),f())}function AH(t,i){1&t&&(g(0,"span",8),v(1," Will Start Race "),f())}function PH(t,i){if(1&t){const e=fe();g(0,"button",12),F("click",function(){X(e);const r=T(5).$implicit;return T().chooseToStartRace(r)}),v(1,"Choose To Start Race"),f()}}function EH(t,i){if(1&t&&(g(0,"span")(1,"em",7),v(2,"Resting..."),f()()),2&t){const e=T(6);m(1),_("ngbPopover",e.getRestingPopover())}}function IH(t,i){if(1&t&&(g(0,"span"),x(1,PH,2,0,"button",11),x(2,EH,3,1,"span",6),f()),2&t){const e=T(4).$implicit,n=T();m(1),_("ngIf",!n.isSetToRelay(e)&&n.canRelay(e)),m(1),_("ngIf",!n.isSetToRelay(e)&&!n.canRelay(e))}}function NH(t,i){if(1&t&&(g(0,"div"),x(1,AH,2,0,"span",10),x(2,IH,3,2,"span",6),f()),2&t){const e=T(3).$implicit,n=T();m(1),_("ngIf",n.isCurrentlyRacing(e)),m(1),_("ngIf",!n.isCurrentlyRacing(e))}}function OH(t,i){1&t&&(g(0,"span",8),v(1," Currently Racing "),f())}function VH(t,i){if(1&t){const e=fe();g(0,"button",14),F("click",function(){X(e);const r=T(4).$implicit;return T().pullFromRace(r)}),v(1," Pull From Race "),f()}}function FH(t,i){if(1&t){const e=fe();g(0,"button",12),F("click",function(){X(e);const r=T(5).$implicit;return T().relayAnimal(r)}),v(1,"Relay"),f()}}function BH(t,i){if(1&t&&(g(0,"span")(1,"em",7),v(2,"Resting..."),f()()),2&t){const e=T(6);m(1),_("ngbPopover",e.getRestingPopover())}}function LH(t,i){1&t&&(g(0,"span"),v(1,"Set To Relay"),f())}function UH(t,i){if(1&t&&(g(0,"span"),x(1,FH,2,0,"button",11),x(2,BH,3,1,"span",6),x(3,LH,2,0,"span",6),f()),2&t){const e=T(4).$implicit,n=T();m(1),_("ngIf",!n.isSetToRelay(e)&&n.canRelay(e)),m(1),_("ngIf",!n.isSetToRelay(e)&&!n.canRelay(e)),m(1),_("ngIf",n.isSetToRelay(e))}}function HH(t,i){if(1&t&&(g(0,"div"),x(1,OH,2,0,"span",10),x(2,VH,2,0,"button",13),x(3,UH,4,3,"span",6),f()),2&t){const e=T(3).$implicit,n=T();m(1),_("ngIf",n.isCurrentlyRacing(e)),m(1),_("ngIf",n.isCurrentlyRacing(e)),m(1),_("ngIf",!n.isCurrentlyRacing(e))}}function GH(t,i){if(1&t&&(g(0,"div"),x(1,NH,3,2,"div",6),x(2,HH,4,3,"div",6),f()),2&t){const e=T(3);m(1),_("ngIf",!e.enteredEvent()),m(1),_("ngIf",e.enteredEvent())}}function jH(t,i){if(1&t&&(g(0,"div")(1,"em"),v(2),f()()),2&t){const e=T(3);m(2),ce("Breed Level ",e.breedLevelRequired," Required")}}function zH(t,i){if(1&t&&(g(0,"div"),N(1,"br"),g(2,"div")(3,"span",7)(4,"span",8),v(5,"Morale:"),f(),v(6),At(7,"number"),f(),N(8,"br"),g(9,"span",7)(10,"span",8),v(11,"Energy:"),f(),v(12),At(13,"number"),f(),N(14,"br"),x(15,kH,2,0,"div",6),N(16,"div",9),f(),N(17,"br")(18,"br"),x(19,GH,3,2,"div",6),x(20,jH,3,1,"div",6),f()),2&t){const e=T().$implicit,n=T();m(3),_("ngbPopover",n.getMoralePopover(e)),m(3),ce(" ",Qt(7,8,n.getMorale(e),"1.2-2"),"%"),m(3),_("ngbPopover",n.getEnergyPopover(e)),m(3),ce(" ",Qt(13,11,n.getExhaustion(e),"1.2-2"),"%"),m(3),_("ngIf",""===n.getUseCountInformation(e)),m(1),_("innerHTML",n.getUseCountInformation(e),Dn),m(3),_("ngIf",n.canEnterGrandPrix(e)),m(1),_("ngIf",!n.canEnterGrandPrix(e))}}function $H(t,i){if(1&t&&(g(0,"div",4)(1,"span",5),v(2),f(),x(3,zH,21,14,"div",6),f()),2&t){const e=i.$implicit,n=T();m(1),_("ngClass",n.getColorClass(e)),m(1),nt(e.name),m(1),_("ngIf",n.hasEventStarted()&&!n.eventCompleted())}}let WH=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.componentCommunicationService=n,this.lookupService=r,this.utilityService=a}ngOnInit(){var e=this.globalService.globalVar.animalDecks.find(n=>n.isEventDeck);void 0!==e&&(this.deck=e),this.breedLevelRequired=this.getBreedLevelRequired()}getMorale(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==n?0:100*n.morale}getExhaustion(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==n?0:100*n.exhaustionStatReduction}eventCompleted(){return this.globalService.globalVar.eventRaceData.isGrandPrixCompleted}hasEventStarted(){return!(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime)}enteredEvent(){return this.globalService.globalVar.eventRaceData.isRunning}canEnterGrandPrix(e){var n=!1,r=this.getBreedLevelRequired(),a=this.globalService.globalVar.animals.find(s=>s.type===e.type);return void 0!==a&&a.breedLevel>=r&&(n=!0),n}getBreedLevelRequired(){var e=50,n=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}chooseToStartRace(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);void 0!==n&&(this.globalService.globalVar.eventRaceData.animalData.forEach(r=>{r.isCurrentlyRacing=!1}),n.isCurrentlyRacing=!0)}isCurrentlyRacing(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.isCurrentlyRacing}isSetToRelay(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.isSetToRelay}canRelay(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.exhaustionStatReduction>.5}relayAnimal(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);if(void 0!==n){this.globalService.globalVar.eventRaceData.animalData.forEach(a=>{a.isSetToRelay=!1}),n.isSetToRelay=!0;var r=this.globalService.globalVar.animals.find(a=>a.type===(null==n?void 0:n.associatedAnimalType));null!=r&&(this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r))}}pullFromRace(e){this.globalService.stopGrandPrixRace()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}getRestingPopover(){return"Racer must be above 50% energy to race"}getMoralePopover(e){var n="",r=this.getMorale(e);if(void 0!==r){var a=.9,s=this.globalService.globalVar.modifiers.find(l=>"exhaustionStatLossModifier"===l.text);void 0!==s&&(a=s.value);var o=1-a;a=1-(o*=1/(r/100)),n="Your current Morale is "+r.toFixed(2)+"%. Your energy will reduce by "+(100*(1-a)).toFixed(2)+"% every time you run out of stamina."}return n}getEnergyPopover(e){return""+"Your current Energy is "+this.getExhaustion(e).toFixed(2)+"%. Your stats are reduced to this amount while racing in the grand prix."}getUseCountInformation(e){var n="",r=this.globalService.globalVar.eventRaceData.eventAbilityData;return e.type===q.Horse&&"Inspiration"===e.ability.name&&(n+="Inspiration Relay Count: "+r.inspirationUseCount),e.type===q.Cheetah&&"On The Hunt"===e.ability.name&&(n+="On The Hunt Use Count: "+r.onTheHuntUseCount+" / "+r.onTheHuntUseCap),e.type===q.Goat&&("Sure-footed"===e.ability.name&&(n+="Sure-footed Use Count: "+r.sureFootedUseCount+" / "+r.sureFootedUseCap),"Deep Breathing"===e.ability.name&&(n+="Deep Breathing Relay Count: "+r.deepBreathingUseCount+" / "+r.deepBreathingUseCap)),e.type===q.Gecko&&"Night Vision"===e.ability.name&&(n+="Night Vision Use Count: "+r.nightVisionUseCount+" / "+r.nightVisionUseCap),e.type===q.Dolphin&&("Flowing Current"===e.ability.name&&(n+="Flowing Current Relay Count: "+r.flowingCurrentUseCount),"Navigator"===e.ability.name&&(n+="Navigator Relay Count: "+r.navigatorUseCount)),e.type===q.Octopus&&"Big Brain"===e.ability.name&&(n+="Big Brain Relay Count: "+r.bigBrainUseCount+" / "+r.bigBrainUseCap),e.type===q.Penguin&&"Quick Toboggan"===e.ability.name&&(n+="Quick Toboggan Use Count: "+r.quickTobogganUseCount+" / "+r.quickTobogganUseCap),e.type===q.Caribou&&("Herd Mentality"===e.ability.name&&(n+="Herd Mentality Relay Count: "+r.herdMentalityUseCount+" / "+r.herdMentalityUseCap),"Special Delivery"===e.ability.name&&(n+="Special Delivery Relay Count: "+r.specialDeliveryUseCount+" / "+r.specialDeliveryUseCap)),this.utilityService.getSanitizedHtml(n)}goToDeckView(){this.componentCommunicationService.setNewView(Dt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(Qn),k(hn),k($i))},t.\u0275cmp=st({type:t,selectors:[["app-event-animal-deck"]],decls:7,vars:2,consts:[[1,"deckName"],[1,"clickableText",3,"click"],[1,"flex"],["class","eventAnimal",4,"ngFor","ngForOf"],[1,"eventAnimal"],[1,"coloredText",3,"ngClass"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"keyword"],[3,"innerHTML"],["class","keyword",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","keyword",3,"click",4,"ngIf"],[1,"keyword",3,"click"]],template:function(e,n){1&e&&(g(0,"div")(1,"div",0)(2,"strong",1),F("click",function(){return n.goToDeckView()}),v(3),f()(),N(4,"br"),g(5,"div",2),x(6,$H,4,3,"div",3),f()()),2&e&&(m(3),nt(n.deck.name),m(3),_("ngForOf",n.deck.selectedAnimals))},directives:[ri,Bn,Kt,ma],pipes:[ns],styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.deckName[_ngcontent-%COMP%]{text-align:center}.eventAnimal[_ngcontent-%COMP%]{flex:1}"]}),t})();function qH(t,i){1&t&&(g(0,"p",5),v(1,"Coming Soon!"),f())}function XH(t,i){if(1&t){const e=fe();g(0,"div",13),F("click",function(){return X(e),T(3).selectEventRace()}),v(1),N(2,"br"),f()}if(2&t){const e=T(3);_("ngbPopover",rt(7)),m(1),ce("Bonus Time: ",e.bonusTime," ")}}function YH(t,i){1&t&&(g(0,"p"),v(1,"View Race"),f())}function QH(t,i){1&t&&(g(0,"p",22)(1,"em"),v(2,"Please Wait -- Offline Time Is Calculating"),f()())}function KH(t,i){1&t&&(g(0,"p"),v(1,"Start"),f())}function ZH(t,i){1&t&&(g(0,"p"),v(1,"Completed!"),f())}function JH(t,i){if(1&t&&(g(0,"div",23),v(1),f()),2&t){const e=T(4);m(1),ce(" ",e.popoverText," ")}}const e7=function(t){return{raceNotAllowed:t}};function t7(t,i){if(1&t){const e=fe();g(0,"div",14)(1,"div")(2,"span",15),v(3,"Grand Prix "),g(4,"strong"),v(5),f()(),N(6,"br"),g(7,"span",16),F("click",function(){X(e);const r=T(3),a=rt(3);return r.openRewardsModal(a)}),v(8),f(),N(9,"br")(10,"br"),g(11,"div",17)(12,"div",18),F("click",function(){return X(e),T(3).selectEventRace()}),g(13,"span")(14,"span",19),v(15,"Forecast:"),f(),v(16),f(),N(17,"br"),v(18),At(19,"number"),N(20,"br"),x(21,YH,2,0,"p",8),x(22,QH,3,0,"p",20),x(23,KH,2,0,"p",8),x(24,ZH,2,0,"p",8),f()(),x(25,JH,2,1,"ng-template",null,21,ot),f()()}if(2&t){const e=rt(26),n=T(3);m(5),nt(n.grandPrixData.rank),m(3),ti("",n.globalService.globalVar.eventRaceData.remainingRewards," / ",n.globalService.globalVar.eventRaceData.totalRewards," rewards remaining"),m(4),_("ngClass",bi(15,e7,n.grandPrixData.isCatchingUp))("ngbPopover",e)("disablePopover",""===n.popoverText),m(4),ce(" ",void 0===n.grandPrixData.weatherCluster?"Unknown":n.lookupService.getWeatherClusterFromEnum(n.grandPrixData.weatherCluster),""),m(2),ce(" ",Qt(19,12,n.remainingMeters,"1.")," Meters Remaining "),m(3),_("ngIf",n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted&&!n.grandPrixData.isCatchingUp),m(1),_("ngIf",n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted&&n.grandPrixData.isCatchingUp),m(1),_("ngIf",!n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted),m(1),_("ngIf",!n.grandPrixData.isRunning&&n.grandPrixData.isGrandPrixCompleted)}}function n7(t,i){if(1&t){const e=fe();g(0,"div")(1,"div"),v(2),N(3,"br"),x(4,XH,3,2,"div",9),g(5,"button",10),F("click",function(){X(e);const r=T(2),a=rt(5);return r.openInfoModal(a)}),v(6,"Grand Prix Info"),f(),g(7,"button",11),F("click",function(){return X(e),T(2).goToTokenShop()}),v(8,"Token Shop"),f(),N(9,"br")(10,"br"),f(),N(11,"br"),x(12,t7,27,17,"div",12),g(13,"div"),N(14,"app-event-animal-deck"),f()()}if(2&t){const e=T(2);m(2),ti(" ",e.eventRaceNotice," ",e.eventRaceTimer," "),m(2),_("ngIf",""!==e.bonusTime),m(8),_("ngIf",e.isEventRaceAvailable)}}function i7(t,i){1&t&&(g(0,"div"),v(1," Nothing here yet, but maybe as you climb the circuit ranks you might be invited to a new type of race. "),f())}function r7(t,i){if(1&t&&(g(0,"div",6),N(1,"div",7),x(2,n7,15,4,"div",8),x(3,i7,2,0,"div",8),f()),2&t){const e=T();m(2),_("ngIf",e.grandPrixUnlocked),m(1),_("ngIf",!e.grandPrixUnlocked)}}function a7(t,i){if(1&t){const e=fe();g(0,"div",24)(1,"div",25)(2,"h4",26),v(3,"Grand Prix Rewards"),f(),g(4,"button",27),F("click",function(){return X(e).$implicit.dismiss()}),v(5,"X"),f()(),g(6,"div",28)(7,"div"),v(8),At(9,"number"),At(10,"number"),N(11,"br")(12,"br"),v(13),At(14,"number"),At(15,"number"),N(16,"br")(17,"br")(18,"div",29)(19,"div",29)(20,"div",29),f()(),g(21,"div",30)(22,"button",31),F("click",function(){return X(e).$implicit.dismiss()}),v(23,"Close"),f()()()}if(2&t){const e=T();m(8),Pg(" The further you go in the Grand Prix invitational, the more rewards you'll receive. Every ",Qt(9,9,e.coinRewardInterval,"1.")," meters, you'll receive ",e.coinRewardAmount," Coins. Every ",Qt(10,12,e.renownRewardInterval,"1.")," meters, you'll receive ",e.renownRewardAmount," Renown. Also, you'll be able to obtain rare tokens that can be spent on rare upgrades. "),m(5),ti(" Distance Covered: ",Qt(14,15,(e.grandPrixData.totalDistance-e.remainingMeters).toFixed(0),"1.")," / ",Qt(15,18,e.grandPrixData.totalDistance,"1.")," "),m(5),_("innerHTML",e.getGrandPrixCoinRewardsPopover(),Dn),m(1),_("innerHTML",e.getGrandPrixRenownRewardsPopover(),Dn),m(1),_("innerHTML",e.getGrandPrixTokenRewardsPopover(),Dn)}}function s7(t,i){if(1&t){const e=fe();g(0,"div",24)(1,"div",25)(2,"h4",26),v(3,"Grand Prix Info"),f(),g(4,"button",27),F("click",function(){return X(e).$implicit.dismiss()}),v(5,"X"),f()(),g(6,"div",28)(7,"div"),v(8," You've been invited to the "),g(9,"span",19),v(10,"Grand Prix"),f(),v(11," invitational, which is a marathon style race that runs for 51 hours twice a week. You can start the race at any time during the start and stop point of the Grand Prix. "),g(12,"b"),v(13,"It will run on its own in the background -- you don't have to watch your animals race for it to run."),f(),v(14," You have the option to view the race as desired by clicking the race. The weekly start and end times are: "),N(15,"br")(16,"br"),g(17,"span",19),v(18,"Weekday Marathon"),f(),v(19),N(20,"br"),g(21,"span",19),v(22,"Weekend Marathon"),f(),v(23),N(24,"br")(25,"br"),v(26),N(27,"br")(28,"br"),g(29,"span",19),v(30,"Morale"),f(),v(31," - This affects how much your stats reduce when running out of stamina. By default, your stats will reduce by 10% while Morale is at 100%. Morale can range from 50% to 300%. "),N(32,"br"),g(33,"span",19),v(34,"Energy"),f(),v(35," - The percent your stats are currently at from their maximum. This is increased slightly over time while a racer is not racing. "),N(36,"br"),g(37,"span",19),v(38,"*Note that these values have no impact on any race other than the Grand Prix."),f(),N(39,"br")(40,"br"),v(41," Maintain your morale and energy to get the most out of your racing animals. You can Relay to another animal in your event deck at any point, although the Relay will only occur after the completion of the current race leg. "),N(42,"br")(43,"br"),v(44," Race as far as you can to gain "),g(45,"span",32),v(46,"Coins"),f(),v(47,", "),g(48,"span",33),v(49,"Renown"),f(),v(50,", and the unique resource "),g(51,"span",32),v(52,"Tokens"),f(),v(53,". Click '"),g(54,"em"),v(55,"Rewards"),f(),v(56,"' to track your progress on gaining rewards. "),f()(),g(57,"div",30)(58,"button",31),F("click",function(){return X(e).$implicit.dismiss()}),v(59,"Close"),f()()()}if(2&t){const e=T();m(19),ce(" - ",e.weekDayGrandPrixTimeSpan," "),m(4),ce(" - ",e.weekEndGrandPrixTimeSpan," "),m(3),ce(" To run in the Grand Prix, animals must be at least Breed Level ",e.requiredBreedLevel,". The animals in your event deck will be shown below along with their current morale and energy. ")}}function o7(t,i){1&t&&(g(0,"div",23),v(1," Bonus Time is accrued from effects that delay competitors or extend the length of a race. Once the Grand Prix event time ends, any bonus time will continue to play out before your entry to the Grand Prix ends. "),f())}let l7=(()=>{class t{constructor(e,n,r,a,s,o,l,c){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.raceLogicService=a,this.sanitizer=s,this.modalService=o,this.componentCommunicationService=l,this.utilityService=c,this.raceSelected=new Ke,this.popoverText="",this.cannotRace=!1,this.eventRaceReleased=!0,this.eventRaceNotice="",this.eventRaceTimer="",this.bonusTime="",this.grandPrixUnlocked=!1}ngOnInit(){var e=this;this.grandPrixData=this.globalService.globalVar.eventRaceData,this.grandPrixUnlocked=this.lookupService.isItemUnlocked("grandPrix"),this.weekDayGrandPrixTimeSpan=this.lookupService.getWeekDayGrandPrixTimeSpan(),this.weekEndGrandPrixTimeSpan=this.lookupService.getWeekEndGrandPrixTimeSpan(),this.requiredBreedLevel=this.lookupService.getBreedLevelRequiredForGrandPrix(),this.popoverText=this.getForecastPopoverText();var n=this.globalService.getGrandPrixRacingAnimal();if(!this.globalService.globalVar.eventRaceData.animalData.some(c=>c.isCurrentlyRacing)){var r=this.globalService.globalVar.eventRaceData.animalData.find(c=>c.associatedAnimalType==n.type);void 0!==r&&(r.isCurrentlyRacing=!0)}var a=this.globalService.globalVar.modifiers.find(c=>"grandPrixCoinRewardModifier"===c.text);null!=a&&(this.coinRewardAmount=a.value);var s=this.globalService.globalVar.modifiers.find(c=>"grandPrixRenownRewardModifier"===c.text);null!=s&&(this.renownRewardAmount=s.value);var o=this.globalService.globalVar.modifiers.find(c=>"metersPerCoinsGrandPrixModifier"===c.text);null!=o&&(this.coinRewardInterval=o.value);var l=this.globalService.globalVar.modifiers.find(c=>"metersPerRenownGrandPrixModifier"===c.text);null!=l&&(this.renownRewardInterval=l.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var c=Xr(function*(u){e.setupEventTime(),e.grandPrixData=e.globalService.globalVar.eventRaceData,e.remainingMeters=e.globalService.globalVar.eventRaceData.totalDistance-e.globalService.globalVar.eventRaceData.distanceCovered});return function(u){return c.apply(this,arguments)}}())}selectEventRace(){if(!1===this.globalService.globalVar.eventRaceData.isRunning){var e=this.globalService.getGrandPrixRacingAnimal();if(null==e.type)return void alert("None of the animals in your event deck are capable of entering the Grand Prix. Swap to new animals or make adjustments to your existing animals to meet the criteria.");this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(e),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(e),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}!this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&!this.globalService.globalVar.eventRaceData.isCatchingUp&&this.raceSelected.emit(this.globalService.globalVar.eventRaceData.currentRaceSegment)}setupEventTime(){var e=this.globalService.getTimeToEventRace();if(e>0){this.isEventRaceAvailable=this.globalService.globalVar.eventRaceData.bonusTime>0,this.eventRaceNotice="Next Grand Prix available in";var a=e-60*(n=Math.floor(e/3600))*60-60*(r=Math.floor(e/60-60*n)),s=Math.floor(a).toString(),o=n.toString(),l=r.toString();n<10&&(o=n<1||n>59?"00":String(o).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(s=a<1||a>59?"00":String(s).padStart(2,"0")),this.eventRaceTimer=o+":"+l+":"+s}else{var n,r,c=this.globalService.getRemainingEventRaceTime();if(c>0)this.eventRaceNotice="Grand Prix ends in",this.isEventRaceAvailable=!0,a=c-60*(n=Math.floor(c/3600))*60-60*(r=Math.floor(c/60-60*n)),o=n.toString(),l=r.toString(),s=Math.floor(a).toString(),n<10&&(o=n<1||n>59?"00":String(o).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(s=a<1||a>59?"00":String(s).padStart(2,"0")),this.eventRaceTimer=o+":"+l+":"+s}this.bonusTime=this.globalService.globalVar.eventRaceData.bonusTime>0?this.utilityService.convertSecondsToHHMMSS(this.globalService.globalVar.eventRaceData.bonusTime):""}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openInfoModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}getGrandPrixRenownRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.renownRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.renownRewardInterval*a))*this.renownRewardAmount+"/"+r*this.renownRewardAmount+" Renown obtained"}getGrandPrixCoinRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.coinRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.coinRewardInterval*a))*this.coinRewardAmount+"/"+r*this.coinRewardAmount+" Coins obtained"}getGrandPrixTokenRewardsPopover(){var e="",n=this.lookupService.getGrandPrixTokenRewards(),r=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),a=5e7,s=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken1MeterModifier"===C.text);null!=s&&(a=s.value);var o=n[0],l=5e7,c=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken2MeterModifier"===C.text);null!=c&&(l=c.value);var u=n[1],d=5e7,h=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken3MeterModifier"===C.text);null!=h&&(d=h.value);var p=n[2],b=5e7,y=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken4MeterModifier"===C.text);null!=y&&(b=y.value);var w=n[3],S=this.globalService.globalVar.eventRaceData.distanceCovered;return e+=S>=a*r?"<span class='crossed'>"+o+"</span>\n":"<span>"+o+"</span>\n",e+=S>=l*r?"<span class='crossed'>"+u+"</span>\n":"<span>"+u+"</span>\n",e+=S>=d*r?"<span class='crossed'>"+p+"</span>\n":"<span>"+p+"</span>\n",this.sanitizer.sanitize(Xt.HTML,this.sanitizer.bypassSecurityTrustHtml(e+=S>=b*r?"<span class='crossed'>"+w+"</span>\n":"<span>"+w+"</span>\n"))}getForecastPopoverText(){return this.lookupService.getWeatherClusterDescription(this.grandPrixData.weatherCluster)}goToTokenShop(){this.componentCommunicationService.setShopView(Dt.shop,Ga.token)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(yi),k(hn),k(Wm),k(xs),k(ls),k(Qn),k($i))},t.\u0275cmp=st({type:t,selectors:[["app-event-view"]],outputs:{raceSelected:"raceSelected"},decls:8,vars:2,consts:[["class","centered",4,"ngIf"],["class","eventViewDiv centered",4,"ngIf"],["grandPrixRewardModal",""],["grandPrixInfoModal",""],["bonusTimeContent",""],[1,"centered"],[1,"eventViewDiv","centered"],[1,"eventRaceHeader"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass","class","clickableText",3,"ngbPopover","click",4,"ngIf"],["type","button",1,"rightSpaced",3,"click"],[3,"click"],["id","grandPrix",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngbPopover","click"],["id","grandPrix"],[1,"s4Heading"],[1,"helpText",3,"click"],[1,"raceDescription"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText","eventRaceDescription",3,"ngClass","ngbPopover","disablePopover","click"],[1,"keyword"],["class","raceCatchingUp",4,"ngIf"],["popContent",""],[1,"raceCatchingUp"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"],[1,"resourceKeyword"],[1,"progressionKeyword"]],template:function(e,n){1&e&&(x(0,qH,2,0,"p",0),x(1,r7,4,2,"div",1),x(2,a7,24,21,"ng-template",null,2,ot),x(4,s7,60,3,"ng-template",null,3,ot),x(6,o7,2,0,"ng-template",null,4,ot)),2&e&&(_("ngIf",!n.eventRaceReleased),m(1),_("ngIf",n.eventRaceReleased))},directives:[Kt,ma,Bn,WH],pipes:[ns],styles:[".eventRace[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.centered[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.eventRaceDescription[_ngcontent-%COMP%]{width:40%;margin:auto}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.raceCatchingUp[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}"]}),t})();function c7(t,i){if(1&t){const e=fe();g(0,"div",14)(1,"div",15)(2,"span",9),v(3,"Intermediate Track"),f(),N(4,"br"),g(5,"span",10),F("click",function(){X(e);const r=T(2),a=rt(9);return r.openRewardsModal(a)}),v(6),f(),N(7,"br"),g(8,"app-race-description",11),F("click",function(){X(e);const r=T(2);return r.selectTrackRace(r.intermediateTrackRace)}),f()(),N(9,"hr"),f()}if(2&t){const e=T(2);m(6),ti("",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),m(2),_("race",e.intermediateTrackRace)("showStartText",!0)}}function u7(t,i){if(1&t){const e=fe();g(0,"div",16)(1,"div",17)(2,"span",9),v(3,"Master Track"),f(),N(4,"br"),g(5,"span",10),F("click",function(){X(e);const r=T(2),a=rt(11);return r.openRewardsModal(a)}),v(6),f(),N(7,"br"),g(8,"app-race-description",11),F("click",function(){X(e);const r=T(2);return r.selectTrackRace(r.masterTrackRace)}),f()(),N(9,"hr"),f()}if(2&t){const e=T(2);m(6),ti("",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),m(2),_("race",e.masterTrackRace)("showStartText",!0)}}function d7(t,i){if(1&t){const e=fe();g(0,"div",6)(1,"div",7)(2,"div",8)(3,"span",9),v(4,"Novice Track"),f(),N(5,"br"),g(6,"span",10),F("click",function(){X(e);const r=T(),a=rt(7);return r.openRewardsModal(a)}),v(7),f(),N(8,"br"),g(9,"app-race-description",11),F("click",function(){X(e);const r=T();return r.selectTrackRace(r.noviceTrackRace)}),f()(),N(10,"hr"),f(),x(11,c7,10,4,"div",12),x(12,u7,10,4,"div",13),f()}if(2&t){const e=T();m(7),ti("",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),m(2),_("race",e.noviceTrackRace)("showStartText",!0),m(2),_("ngIf",e.intermediateTrackAvailable),m(1),_("ngIf",e.masterTrackAvailable)}}function h7(t,i){if(1&t){const e=fe();g(0,"div",18)(1,"div",19)(2,"h4",20),v(3,"Novice Rewards"),f(),g(4,"button",21),F("click",function(){return X(e).$implicit.dismiss()}),v(5,"X"),f()(),g(6,"div",22)(7,"div",23),v(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),N(9,"br")(10,"br")(11,"div",24),f()(),g(12,"div",25)(13,"button",26),F("click",function(){return X(e).$implicit.dismiss()}),v(14,"Close"),f()()()}if(2&t){const e=T();m(11),_("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.novice),Dn)}}function f7(t,i){if(1&t){const e=fe();g(0,"div",18)(1,"div",19)(2,"h4",20),v(3,"Intermediate Rewards"),f(),g(4,"button",21),F("click",function(){return X(e).$implicit.dismiss()}),v(5,"X"),f()(),g(6,"div",22)(7,"div",23),v(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),N(9,"br")(10,"br")(11,"div",24),f()(),g(12,"div",25)(13,"button",26),F("click",function(){return X(e).$implicit.dismiss()}),v(14,"Close"),f()()()}if(2&t){const e=T();m(11),_("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.intermediate),Dn)}}function p7(t,i){if(1&t){const e=fe();g(0,"div",18)(1,"div",19)(2,"h4",20),v(3,"Master Rewards"),f(),g(4,"button",21),F("click",function(){return X(e).$implicit.dismiss()}),v(5,"X"),f()(),g(6,"div",22)(7,"div",23),v(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),N(9,"br")(10,"br")(11,"div",24),f()(),g(12,"div",25)(13,"button",26),F("click",function(){return X(e).$implicit.dismiss()}),v(14,"Close"),f()()()}if(2&t){const e=T();m(11),_("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.master),Dn)}}let g7=(()=>{class t{constructor(e,n,r,a,s){this.globalService=e,this.lookupService=n,this.sanitizer=r,this.modalService=a,this.componentCommunicationService=s,this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.raceSelected=new Ke,this.showRace=!1,this.trackRaceTypeEnum=zn}ngOnInit(){this.practiceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,zn.practice),this.noviceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,zn.novice),this.intermediateTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,zn.intermediate),this.masterTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,zn.master),this.intermediateTrackAvailable=this.selectedAnimal.allTrainingTracks.intermediateTrackAvailable,this.masterTrackAvailable=this.selectedAnimal.allTrainingTracks.masterTrackAvailable,this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}selectTrackRace(e){if(this.lookupService.canAnimalRace(this.selectedAnimal)){var n=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=n&&(n.selectedAnimals=n.selectedAnimals.filter(r=>r.raceCourseType!==this.selectedAnimal.raceCourseType),n.selectedAnimals.push(this.selectedAnimal)),this.raceSelected.emit(e)}}getTrackRewardsPopover(e){var n="",r=this.lookupService.getTrackRaceRewards(e),a=.25,s=this.globalService.globalVar.modifiers.find(u=>"trainingTrackPaceModifier"===u.text);void 0!==s&&(a=s.value);for(var o=0;o<r.length;o++){var l=r[o],c=0;e===zn.novice?c=this.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained:e===zn.intermediate?c=this.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained:e===zn.master&&(c=this.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained),n+=o<c?"<span class='crossed'>("+o*a*100+"% average pace) "+l+"</span>\n":"<span>("+o*a*100+"% average pace) "+l+"</span>\n"}return this.sanitizer.sanitize(Xt.HTML,this.sanitizer.bypassSecurityTrustHtml(n))}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}goToAnimal(){this.componentCommunicationService.setAnimalView(Dt.animals,this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(hn),k(xs),k(ls),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-training-track-race-view"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{raceSelected:"raceSelected"},decls:12,vars:3,consts:[[1,"trainingTrackView"],[1,"keyword","clickableText",3,"ngClass","click"],["class","trainingTracks",4,"ngIf"],["noviceRewardModal",""],["intermediateRewardModal",""],["masterRewardModal",""],[1,"trainingTracks"],["id","trainingTrack1"],[1,"noviceTrackRace"],[1,"s4Heading"],[1,"clickableText",3,"click"],[3,"race","showStartText","click"],["id","trainingTrack2",4,"ngIf"],["id","trainingTrack3",4,"ngIf"],["id","trainingTrack2"],[1,"intermediateTrackRace"],["id","trainingTrack3"],[1,"masterTrackRace"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,n){1&e&&(g(0,"div",0),v(1," Selected Animal: "),g(2,"span",1),F("click",function(){return n.goToAnimal()}),v(3),f(),N(4,"hr"),x(5,d7,13,6,"div",2),f(),x(6,h7,15,1,"ng-template",null,3,ot),x(8,f7,15,1,"ng-template",null,4,ot),x(10,p7,15,1,"ng-template",null,5,ot)),2&e&&(m(2),_("ngClass",n.colorConditional),m(1),nt(n.selectedAnimal.name),m(2),_("ngIf",!n.showRace))},directives:[Bn,Kt,Cv],styles:[".trainingTrackView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}"]}),t})();const m7=["raceCanvas"];let v7=(()=>{class t{constructor(e,n,r,a,s){this.globalService=e,this.gameLoopService=n,this.utilityService=r,this.lookupService=a,this.themeService=s,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.currentRaceFrame=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5,this.eventViewStartFrame=0,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,this.newSegment=!1}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix&&(this.eventViewStartFrame=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier)),this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var n=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7),this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix&&(0===this.globalService.globalVar.eventRaceData.mountainClimbPercent?this.globalService.globalVar.eventRaceData.mountainClimbPercent=this.mountainClimbPercent:this.mountainClimbPercent=this.globalService.globalVar.eventRaceData.mountainClimbPercent);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{performance.now(),e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(n+=a,this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount>this.lastEventSegment?(this.eventViewStartFrame=0,this.currentRaceFrame=0,this.race=this.globalService.globalVar.eventRaceData.currentRaceSegment,this.newSegment=!0):this.newSegment=!1,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount),this.currentRaceFrame+=1);var o=!1;this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix&&this.globalService.getRemainingEventRaceTime()>0&&(o=!0),(this.currentRaceFrame>=r*this.frameModifier||this.isRaceFinished||this.skipRace)&&!o?this.displayOverview(e,!0):this.displayRace(e,n),performance.now()})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,n){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,l=0;if(this.race.raceLegs.forEach(C=>{void 0!==C.pathData&&0!==C.pathData.length&&(l=0,C.pathData.forEach(I=>{if(C.courseType===H.Flatland)e.lineCap="round",I.routeDesign===je.Regular&&this.drawRegularFlatlandOverview(e,I,1,1),I.routeDesign===je.S&&this.drawSFlatlandOverview(e,I,1,1),I.routeDesign===je.Bumps&&this.drawBumpsFlatlandOverview(e,I,1,1);else if(C.courseType===H.Mountain){e.lineCap="round";var W=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==H.Mountain||r<C.distance*this.mountainClimbPercent;I.routeDesign===je.Regular&&this.drawRegularMountainOverview(e,I,1,this.overviewYOffsetModifier,W),I.routeDesign===je.Crevasse&&this.drawCrevasseMountainOverview(e,I,1,this.overviewYOffsetModifier,W),I.routeDesign===je.Gaps&&this.drawGapsMountainOverview(e,I,1,this.overviewYOffsetModifier,W),r+=I.length}else C.courseType===H.Ocean&&(e.lineCap="round",I.routeDesign===je.Regular&&this.drawRegularWaterOverview(e,I,1,1,a),I.routeDesign===je.Waves&&this.drawWavesWaterOverview(e,I,1,1,a),I.routeDesign===je.Dive&&this.drawDiveWaterOverview(e,I,1,1,a),a=!a);C.courseType===H.Tundra&&(e.lineCap="round",I.routeDesign===je.Regular&&this.drawRegularTundraOverview(e,I,1,1),I.routeDesign===je.Cavern&&this.drawCavernTundraOverview(e,I,1,1),I.routeDesign===je.Hills&&this.drawHillsTundraOverview(e,I,1,1)),C.courseType===H.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(I.routeDesign===je.Regular||I.routeDesign===je.FirstRegular||I.routeDesign===je.LastRegular)&&this.drawRegularVolcanoOverview(e,0,l,I,C.pathData.length,1,1),I.routeDesign===je.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,l,I,C.pathData.length,1,1)),this.lengthCompleted+=I.length,l+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),n){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var u=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,d=0,h=0,p=!1;this.race.raceLegs.forEach(C=>{if(!p){var I=(d+=C.distance)/this.race.length;I>u&&(I=u,p=!0);var W=(I-h)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(C.courseType),e.fillRect(h*this.canvasWidth,0,W,this.canvasHeight),h=I}})}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(C=>{"Hills"===C[0]?this.drawHillsBackgroundTundraOverview(e,C):this.drawIcyPatchBackgroundTundraOverview(e,C)}),this.race.raceLegs.some(C=>C.courseType===H.Volcanic)){var w,b=0,y=!1;this.race.raceLegs.forEach(C=>{this.race.raceLegs.some(I=>I.courseType===H.Volcanic)&&(C.courseType!==H.Volcanic&&!y&&(b+=C.distance),C.courseType===H.Volcanic&&(y=!0))}),w=this.race.raceLegs.find(C=>C.courseType===H.Volcanic).distance;var S=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,b,b+w,1,1),e.globalCompositeOperation=S}}}displayRace(e,n){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var s=0,o=[];this.race.raceLegs.forEach(ut=>{o.push(ut)});var l=!1;this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix?(l=!0,s=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier),o.push(this.globalService.globalVar.eventRaceData.nextRaceSegment.raceLegs[0])):s=this.currentRaceFrame;var c=this.race.raceUI.distanceCoveredByFrame[s],u=0;l&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment&&(o.unshift(this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0]),c+=o[0].distance),this.averageDistancePerSecond=this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/this.globalService.globalVar.eventRaceData.grandPrixTimeLength:this.race.length/this.race.raceUI.timeToCompleteByFrame[s];var d=0,h=0,p=!1,b=0;o.forEach(ut=>{p||(c>=d&&c<d+ut.distance&&(p=!0,this.currentLeg=ut),p||(h+=ut.distance,b+=1)),d+=ut.distance});var y=c-h,w=0;if(this.currentLeg.courseType===H.Mountain){var S=this.currentLeg.distance*this.mountainClimbPercent,C=0,I=!1,W=0;this.currentLeg.pathData.forEach(ut=>{I||(S>=W&&S<W+ut.length&&(I=!0,C=W+ut.length-S),W+=ut.length)}),I=!1;var G=0,Q=0;this.currentLeg.pathData.forEach(ut=>{if(!I){if(y>=G&&y<G+ut.length&&(I=!0,Q=y-G,ut.routeDesign===je.Crevasse)){var Ct=ut.length/2*3,br=3*Q;w-=Q<ut.length/2?br:Ct-(br-Ct)}G+=ut.length}});var te=S+C;this.mountainEndingY=u=y<te?y+w:te-(y-te)+w,this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix&&s===this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed-2&&(this.globalService.globalVar.eventRaceData.mountainEndingY=u)}if(this.race.raceLegs.some(ut=>ut.courseType===H.Mountain)||(this.mountainEndingY=0),u=this.mountainEndingY,this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix&&(u+=this.globalService.globalVar.eventRaceData.mountainEndingY,null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&this.currentLeg.courseType!==H.Mountain&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType!==H.Mountain&&(u=0)),this.currentLeg.courseType===H.Volcanic&&!this.pauseRace){var de=this.currentLeg.pathData[0].length/r;if(y>de){var ke=this.currentLeg.distance/this.volcanoRadiusXModifier,Me=de/this.currentLeg.distance,Ce=y/this.currentLeg.distance,Ye=(this.currentLeg.distance-2*de)/this.currentLeg.distance/2;if(Ce>Me&&Ce<1-Me){var vt=100/(100-2*Me),xt=-ke,pe=ke*Math.pow(1.05,-100*(Ce>.5?2*(Ye-((Ce-Me)*vt-Ye)):(Ce-Me)*vt*2))+xt;this.volcanoYOffset=pe}}}var D=c*this.canvasXDistanceScale*r-this.canvasWidth/2,qe=(u+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=D,this.visibleDistanceXRight=D+this.canvasWidth,e.globalCompositeOperation="source-over",(c>=this.race.length||s>this.race.raceUI.distanceCoveredByFrame.length)&&!l)return void(this.isRaceFinished=!0);var Lt=0,an=!0,dt=0;o.forEach(ut=>{void 0!==ut.pathData&&0!==ut.pathData.length&&(dt=0,this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix&&(Lt=0),ut.pathData.forEach(Ct=>{if(ut.courseType===H.Flatland)Ct.routeDesign===je.Regular&&this.drawRegularFlatlandOverview(e,Ct,r,a,D,qe),Ct.routeDesign===je.S&&this.drawSFlatlandOverview(e,Ct,r,a,D,qe),Ct.routeDesign===je.Bumps&&this.drawBumpsFlatlandOverview(e,Ct,r,a,D,qe);else if(ut.courseType===H.Mountain){var br=Lt<ut.distance*this.mountainClimbPercent;Ct.routeDesign===je.Regular&&this.drawRegularMountainOverview(e,Ct,r,a,br,D,qe),Ct.routeDesign===je.Crevasse&&this.drawCrevasseMountainOverview(e,Ct,r,a,br,D,qe),Ct.routeDesign===je.Gaps&&this.drawGapsMountainOverview(e,Ct,r,a,br,D,qe),Lt+=Ct.length,this.grandPrixMountainYReset(b)}else ut.courseType===H.Ocean&&(Ct.routeDesign===je.Regular&&this.drawRegularWaterOverview(e,Ct,r,a,an,D,qe),Ct.routeDesign===je.Waves&&this.drawWavesWaterOverview(e,Ct,r,a,an,D,qe),Ct.routeDesign===je.Dive&&this.drawDiveWaterOverview(e,Ct,r,a,an,D,qe),an=!an);ut.courseType===H.Tundra&&(Ct.routeDesign===je.Regular&&this.drawRegularTundraOverview(e,Ct,r,a,D,qe),Ct.routeDesign===je.Cavern&&this.drawCavernTundraOverview(e,Ct,r,a,D,qe),Ct.routeDesign===je.Hills&&this.drawHillsTundraOverview(e,Ct,r,a,D,qe)),ut.courseType===H.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(Ct.routeDesign===je.Regular||Ct.routeDesign===je.FirstRegular||Ct.routeDesign===je.LastRegular)&&this.drawRegularVolcanoOverview(e,0,dt,Ct,ut.pathData.length,r,a,D,qe),Ct.routeDesign===je.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,dt,Ct,ut.pathData.length,r,a,D,qe)),dt+=1,this.lengthCompleted+=Ct.length})),b+=1}),e.globalCompositeOperation="source-atop";var rn=0,sn=h*this.canvasXDistanceScale*r,pt=o.indexOf(this.currentLeg),Cn=null;pt>0&&(Cn=o[pt-1]),null!=Cn&&sn>=this.visibleDistanceXLeft&&sn<=this.visibleDistanceXRight?(rn=(sn-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(Cn.courseType),e.fillRect(0,0,this.canvasWidth*rn,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*rn,0,this.canvasWidth/2-this.canvasWidth*rn,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(c,o),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var _n=this.getAnimalRacerColor(c,o);(this.race.raceUI.racerEffectByFrame[s]===Ar.LostFocus||this.race.raceUI.racerEffectByFrame[s]===Ar.LostStamina||this.race.raceUI.racerEffectByFrame[s]===Ar.Stumble)&&(_n=this.utilityService.shadeColor(_n,-90)),this.race.raceUI.racerEffectByFrame[s]===Ar.Burst&&(_n=this.utilityService.shadeColor(_n,90)),e.fillStyle=_n,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(ut=>{"Hills"===ut[0]?this.drawHillsBackgroundTundraOverview(e,ut):this.drawIcyPatchBackgroundTundraOverview(e,ut)}),e.globalCompositeOperation="source-atop";var ai=this.averageDistancePerSecond/this.frameModifier*s;if(this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix){var si=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();ai+=this.averageDistancePerSecond*si}if(this.drawRacer(e,ai*this.canvasXDistanceScale*r,"black"),this.race.localRaceType!==$t.Track){if(this.lookupService.getResourceByName("Money Mark")>0){var Mn=.75,it=this.globalService.globalVar.modifiers.find(ut=>"moneyMarkPaceModifier"===ut.text);null!=it&&(Mn=it.value),this.drawRacer(e,this.race.length/(this.race.raceUI.timeToCompleteByFrame[s]*Mn)/this.frameModifier*s*this.canvasXDistanceScale*r,"gold")}}else{var On=.25,Un=this.globalService.globalVar.modifiers.find(ut=>"trainingTrackPaceModifier"===ut.text);void 0!==Un&&(On=Un.value);for(var mr=0;mr<11;mr++){var cs=this.race.length/(this.race.raceUI.timeToCompleteByFrame[s]/(1+On*(mr+1)))/this.frameModifier*s*this.canvasXDistanceScale*r,Vs=this.getTrackRacerColor(mr);this.drawRacer(e,cs,Vs)}}if(this.drawBreakpoints(e,r,o),o.some(ut=>ut.courseType===H.Volcanic)){var Wi,Ii=0,Et=!1;o.forEach(ut=>{o.some(Ct=>Ct.courseType===H.Volcanic)&&(ut.courseType!==H.Volcanic&&!Et&&(Ii+=ut.distance),ut.courseType===H.Volcanic&&(Et=!0))}),Wi=o.find(ut=>ut.courseType===H.Volcanic).distance;var go=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,s,Ii,Ii+Wi,r,a,D,qe),e.globalCompositeOperation=go}}}getAnimalDistanceColor(e,n){var r="",a=0;return null==n&&(n=this.race.raceLegs),n.forEach(s=>{e>=a&&e<a+s.distance&&(s.courseType===H.Flatland&&(r="#7d3f00"),s.courseType===H.Mountain&&(r="#1b630d"),s.courseType===H.Ocean&&(r="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),s.courseType===H.Tundra&&(r="#28809c"),s.courseType===H.Volcanic&&(r="#8f1a1a")),a+=s.distance}),r}getAnimalDistanceColorByType(e){var n="";return e===H.Flatland&&(n="#7d3f00"),e===H.Mountain&&(n="#1b630d"),e===H.Ocean&&(n="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===H.Tundra&&(n="#28809c"),e===H.Volcanic&&(n="#8f1a1a"),n}getAnimalRacerColor(e,n){var r="",a=0;return null==n&&(n=this.race.raceLegs),n.forEach(s=>{e>=a&&e<a+s.distance&&(s.courseType===H.Flatland&&("night"===this.themeService.getActiveThemeName()?r="#E18B07":(this.themeService.getActiveThemeName(),r="#c66900")),s.courseType===H.Mountain&&("night"===this.themeService.getActiveThemeName()?r="#30b001":(this.themeService.getActiveThemeName(),r="#279113")),s.courseType===H.Ocean&&("night"===this.themeService.getActiveThemeName()?r="#9289CF":(this.themeService.getActiveThemeName(),r="#0000FF")),s.courseType===H.Tundra&&("night"===this.themeService.getActiveThemeName()?r="#019DDE":(this.themeService.getActiveThemeName(),r="#1CA1C9")),s.courseType===H.Volcanic&&("night"===this.themeService.getActiveThemeName()?r="#E56C6E":(this.themeService.getActiveThemeName(),r="#D92525"))),a+=s.distance}),r}getTrackRacerColor(e){var n="";return 0===e&&(n="#cfc800"),1===e&&(n="#00cf68"),2===e&&(n="#cf00c5"),3===e&&(n="#cfb8e6"),4===e&&(n="#4a1d1d"),5===e&&(n="#1b5054"),6===e&&(n="#541b3c"),7===e&&(n="#aeb85a"),8===e&&(n="#ffffff"),9===e&&(n="#01253b"),10===e&&(n="#790dde"),n}getCurrentAnimalRacingCourse(e){var n;n=H.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(n=a.courseType),r+=a.distance}),n}getNextAnimalRacingCourse(e){var n;n=H.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(n=this.race.raceLegs[r+1].courseType),n}drawRacer(e,n,r){var a=0;n>=this.visibleDistanceXLeft&&n<=this.visibleDistanceXRight&&(a=(n-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,n,r){var a=0;null==r&&(r=this.race.raceLegs);for(var s=0;s<r.length;s++){var o=r[s],l=null;s<r.length-1&&(l=r[s+1]);var c=0,u=(a+o.distance)*this.canvasXDistanceScale*n;u>=this.visibleDistanceXLeft&&u<=this.visibleDistanceXRight&&(c=(u-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==l?this.getAnimalDistanceColorByType(l.courseType):"pink",e.fillRect(this.canvasWidth*c-5,0,5,this.canvasHeight)),a+=o.distance}}drawRegularFlatlandOverview(e,n,r,a,s,o){var l=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0),e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+o),e.lineTo(this.lastPathEndingX+l-s,this.lastPathEndingY+o),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawSFlatlandOverview(e,n,r,a,s,o){var l=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var c=this.lastPathEndingX-s,u=this.lastPathEndingY+o,d=.04*l,h=.23*l,p=1.2173*h,b=.04*l,y=p,w=b+h,S=p,C=w+h,I=p,W=C,Q=C,te=p,de=Q+h,ke=p,Me=de+h,Ce=p,Ye=Me;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.bezierCurveTo(c+d,u,c+b,u+y,c+w,u+S),e.bezierCurveTo(c+w,u+S,c+C,u+I,c+W,u),e.stroke(),e.beginPath(),e.moveTo(c+W,u),e.bezierCurveTo(c+W,u,c+Q,u-te,c+de,u-ke),e.bezierCurveTo(c+de,u-ke,c+Me,u-Ce,c+Me,u),e.stroke(),e.beginPath(),e.moveTo(c+Me,u),e.lineTo(c+Ye+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+Ye+d}drawBumpsFlatlandOverview(e,n,r,a,s,o){var l=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var c=this.lastPathEndingX-s,u=this.lastPathEndingY+o,d=.04*l,h=.115*l,p=h/3;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.lineTo(c+d+h/2,u-p),e.lineTo(c+d+h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+h,u),e.lineTo(c+d+h+h/2,u-p),e.lineTo(c+d+2*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+2*h,u),e.lineTo(c+d+2*h+h/2,u-p),e.lineTo(c+d+3*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+3*h,u),e.lineTo(c+d+3*h+h/2,u-p),e.lineTo(c+d+4*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+4*h,u),e.lineTo(c+d+4*h+h/2,u-p),e.lineTo(c+d+5*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+5*h,u),e.lineTo(c+d+5*h+h/2,u-p),e.lineTo(c+d+6*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+6*h,u),e.lineTo(c+d+6*h+h/2,u-p),e.lineTo(c+d+7*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+7*h,u),e.lineTo(c+d+7*h+h/2,u-p),e.lineTo(c+d+8*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+8*h,u),e.lineTo(c+d+8*h+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawRegularMountainOverview(e,n,r,a,s,o,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==o&&(o=0),null==l&&(l=0),e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+l),e.lineTo(this.lastPathEndingX+c-o,s?this.lastPathEndingY-u+l:this.lastPathEndingY+u+l),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=s?this.lastPathEndingY-u:this.lastPathEndingY+u}drawCrevasseMountainOverview(e,n,r,a,s,o,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==o&&(o=0),null==l&&(l=0);var d=this.lastPathEndingX-o,h=this.lastPathEndingY+l,b=c,y=u,w=2*y;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+l),s?(w=2*y-(y-0),e.lineTo(d+0,h-0),e.lineTo(d+0+b/2,h+w-0),e.lineTo(d+0+b,h-y-0),e.lineTo(d+0+b,h-y-0)):(e.lineTo(d+0,h+0),e.lineTo(d+0+b/2,h+w+0),e.lineTo(d+0+b,h+y+0),e.lineTo(d+0+b,h+y+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=s?this.lastPathEndingY-u:this.lastPathEndingY+u}drawGapsMountainOverview(e,n,r,a,s,o,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==o&&(o=0),null==l&&(l=0);var d=this.lastPathEndingX-o,h=this.lastPathEndingY+l,p=.04*c,b=.115*c,y=.115*u,w=.04*u;e.beginPath(),e.moveTo(d,h),s?(e.lineTo(d+p,h-w),e.moveTo(d+b+p,h-y-w),e.lineTo(d+2*b+p,h-2*y-w),e.moveTo(d+3*b+p,h-3*y-w),e.lineTo(d+4*b+p,h-4*y-w),e.moveTo(d+5*b+p,h-5*y-w),e.lineTo(d+6*b+p,h-6*y-w),e.moveTo(d+7*b+p,h-7*y-w),e.lineTo(d+8*b+p,h-8*y-w),e.lineTo(d+8*b+2*p,h-8*y-2*w)):(e.lineTo(d+p,h+w),e.moveTo(d+b+p,h+y+w),e.lineTo(d+2*b+p,h+2*y+w),e.moveTo(d+3*b+p,h+3*y+w),e.lineTo(d+4*b+p,h+4*y+w),e.moveTo(d+5*b+p,h+5*y+w),e.lineTo(d+6*b+p,h+6*y+w),e.moveTo(d+7*b+p,h+7*y+w),e.lineTo(d+8*b+p,h+8*y+w),e.lineTo(d+8*b+2*p,h+8*y+2*w)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=s?this.lastPathEndingY-u:this.lastPathEndingY+u}drawRegularWaterOverview(e,n,r,a,s,o,l){var c=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==l&&(l=0);var u=this.lastPathEndingX-o,d=this.lastPathEndingY+l,h=c/3,p=c/6,b=u+h,y=s?d+p:d-p,w=u+2*h,S=s?d+p:d-p,C=u+3*h,I=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(b,y,w,S,C,I),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawWavesWaterOverview(e,n,r,a,s,o,l){var c=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==l&&(l=0);var u=this.lastPathEndingX-o,d=this.lastPathEndingY+l,h=c/3,p=c/3,b=u+h/3,y=d,w=u+h/3,S=d-p,C=u+h,I=d-.6*p;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(b,y,w,S,C,I),e.stroke();var W=C-h/3,G=I-p/10,Q=C-h/3,te=I+.4*p,de=C,ke=d;e.beginPath(),e.moveTo(C,I),e.bezierCurveTo(W,G,Q,te,de,ke),e.stroke();var Me=de+h/3,Ce=ke,Ye=de+h/3,vt=ke-p,Rt=de+h,Zt=ke-.6*p;e.beginPath(),e.moveTo(de,ke),e.bezierCurveTo(Me,Ce,Ye,vt,Rt,Zt),e.stroke();var Gt=Rt-h/3,xt=Zt-p/10,pe=Rt-h/3,D=Zt+.4*p,qe=Rt,Lt=d;e.beginPath(),e.moveTo(Rt,Zt),e.bezierCurveTo(Gt,xt,pe,D,qe,Lt),e.stroke();var an=qe+h/3,bn=Lt,dt=qe+h/3,rn=Lt-p,sn=qe+h,pt=Lt-.6*p;e.beginPath(),e.moveTo(qe,Lt),e.bezierCurveTo(an,bn,dt,rn,sn,pt),e.stroke();var Cn=sn-h/3,Kn=pt-p/10,ar=sn-h/3,_n=pt+.4*p,ai=sn,si=d;e.beginPath(),e.moveTo(sn,pt),e.bezierCurveTo(Cn,Kn,ar,_n,ai,si),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawDiveWaterOverview(e,n,r,a,s,o,l){var c=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==l&&(l=0);var u=this.lastPathEndingX-o,d=this.lastPathEndingY+l,h=c/3,p=c/2,b=u,y=s?d+2*p:d-2*p,w=u+2*h,S=s?d+p/4:d-p/4,C=u+3*h,I=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(b,y,w,S,C,I),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawRegularTundraOverview(e,n,r,a,s,o){var l=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var c=l/4,u=.97*c,d=n.driftAmount/80*u,h=(n.totalTundraYAmount-n.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+h+o),e.lineTo(this.lastPathEndingX+l-s,this.lastPathEndingY+h+d+o),e.stroke();var p=[];p.push("Regular"),p.push([this.lastPathEndingX-s,this.lastPathEndingY+o]),p.push([this.lastPathEndingX-s,this.lastPathEndingY+c+o]),p.push([this.lastPathEndingX+l-s,this.lastPathEndingY+c+o]),p.push([this.lastPathEndingX+l-s,this.lastPathEndingY-c+o]),p.push([this.lastPathEndingX-s,this.lastPathEndingY-c+o]),this.icyPatchBackgroundLines.push(p),this.lastPathEndingX=this.lastPathEndingX+l}drawCavernTundraOverview(e,n,r,a,s,o){var l=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var h=l/4*.97,p=n.driftAmount/80*h,b=(n.totalTundraYAmount-n.driftAmount)/80*h;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+b+o),e.lineTo(this.lastPathEndingX+l-s,this.lastPathEndingY+b+p+o),e.stroke();var w=l/4*.75,S=[];S.push("Cavern"),S.push([this.lastPathEndingX-s,this.lastPathEndingY+o]),S.push([this.lastPathEndingX-s,this.lastPathEndingY+w+o]),S.push([this.lastPathEndingX+l-s,this.lastPathEndingY+w+o]),S.push([this.lastPathEndingX+l-s,this.lastPathEndingY-w+o]),S.push([this.lastPathEndingX-s,this.lastPathEndingY-w+o]),this.icyPatchBackgroundLines.push(S),this.lastPathEndingX=this.lastPathEndingX+l}drawHillsTundraOverview(e,n,r,a,s,o){var l=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var c=l/4,u=.97*c,d=n.driftAmount/80*u,h=(n.totalTundraYAmount-n.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+h+o),e.lineTo(this.lastPathEndingX+l-s,this.lastPathEndingY+h+d+o),e.stroke();var p=[];p.push("Hills"),p.push([this.lastPathEndingX-s,this.lastPathEndingY+o]),p.push([this.lastPathEndingX-s,this.lastPathEndingY+c+o]),p.push([this.lastPathEndingX+l-s,this.lastPathEndingY+c+o]),p.push([this.lastPathEndingX+l-s,this.lastPathEndingY-c+o]),p.push([this.lastPathEndingX-s,this.lastPathEndingY-c+o]);var b=l/12,y=l/4,w=c/2,S=c*(3/4),C=c/4;p.push([this.lastPathEndingX+y-b/2-s,this.lastPathEndingY-w+C/2+o]),p.push([this.lastPathEndingX+y-b/2-s,this.lastPathEndingY-w-C+o,this.lastPathEndingX+y+b/2-s,this.lastPathEndingY-w-C+o,this.lastPathEndingX+y+b/2-s,this.lastPathEndingY-w+C/2+o]),p.push([this.lastPathEndingX+y-b/2-s,this.lastPathEndingY+w+C/2+o]),p.push([this.lastPathEndingX+y-b/2-s,this.lastPathEndingY+w-C+o,this.lastPathEndingX+y+b/2-s,this.lastPathEndingY+w-C+o,this.lastPathEndingX+y+b/2-s,this.lastPathEndingY+w+C/2+o]),p.push([this.lastPathEndingX+2*y-b/2-s,this.lastPathEndingY-S+C/2+o]),p.push([this.lastPathEndingX+2*y-b/2-s,this.lastPathEndingY-S-C+o,this.lastPathEndingX+2*y+b/2-s,this.lastPathEndingY-S-C+o,this.lastPathEndingX+2*y+b/2-s,this.lastPathEndingY-S+C/2+o]),p.push([this.lastPathEndingX+2*y-b/2-s,this.lastPathEndingY+S+C/2+o]),p.push([this.lastPathEndingX+2*y-b/2-s,this.lastPathEndingY+S-C+o,this.lastPathEndingX+2*y+b/2-s,this.lastPathEndingY+S-C+o,this.lastPathEndingX+2*y+b/2-s,this.lastPathEndingY+S+C/2+o]),p.push([this.lastPathEndingX+3*y-b/2-s,this.lastPathEndingY-w+C/2+o]),p.push([this.lastPathEndingX+3*y-b/2-s,this.lastPathEndingY-w-C+o,this.lastPathEndingX+3*y+b/2-s,this.lastPathEndingY-w-C+o,this.lastPathEndingX+3*y+b/2-s,this.lastPathEndingY-w+C/2+o]),p.push([this.lastPathEndingX+3*y-b/2-s,this.lastPathEndingY+w+C/2+o]),p.push([this.lastPathEndingX+3*y-b/2-s,this.lastPathEndingY+w-C+o,this.lastPathEndingX+3*y+b/2-s,this.lastPathEndingY+w-C+o,this.lastPathEndingX+3*y+b/2-s,this.lastPathEndingY+w+C/2+o]),this.icyPatchBackgroundLines.push(p),this.lastPathEndingX=this.lastPathEndingX+l}drawIcyPatchBackgroundTundraOverview(e,n){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.lineTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,n){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",n.length>=17&&(e.beginPath(),e.moveTo(n[6][0],n[6][1]),e.bezierCurveTo(n[7][0],n[7][1],n[7][2],n[7][3],n[7][4],n[7][5]),e.stroke(),e.beginPath(),e.moveTo(n[8][0],n[8][1]),e.bezierCurveTo(n[9][0],n[9][1],n[9][2],n[9][3],n[9][4],n[9][5]),e.stroke(),e.beginPath(),e.moveTo(n[10][0],n[10][1]),e.bezierCurveTo(n[11][0],n[11][1],n[11][2],n[11][3],n[11][4],n[11][5]),e.stroke(),e.beginPath(),e.moveTo(n[12][0],n[12][1]),e.bezierCurveTo(n[13][0],n[13][1],n[13][2],n[13][3],n[13][4],n[13][5]),e.stroke(),e.beginPath(),e.moveTo(n[14][0],n[14][1]),e.bezierCurveTo(n[15][0],n[15][1],n[15][2],n[15][3],n[15][4],n[15][5]),e.stroke(),e.beginPath(),e.moveTo(n[16][0],n[16][1]),e.bezierCurveTo(n[17][0],n[17][1],n[17][2],n[17][3],n[17][4],n[17][5]),e.stroke()),e.beginPath(),e.moveTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.lineTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,n,r,a,s,o,l,c,u){var d=a.length/this.race.length*this.canvasWidth*o;null==c&&(c=0),null==u&&(u=0);var S=this.lastPathEndingX-c-d*r+d*s/2,C=this.lastPathEndingY+0+u,I=d*s/this.volcanoRadiusXModifier,W=d*s/2-d/o,G=Math.PI/2,de=180/s,ke=0;a.routeDesign===je.FirstRegular?(this.volcanoStartingAngle=ke=90,e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d/o-c,this.lastPathEndingY+0+u),e.stroke()):a.routeDesign===je.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(d-d/o)-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d-c,this.lastPathEndingY+0+u),e.stroke()),(ke=this.volcanoStartingAngle-de)<0&&(ke=360-Math.abs(ke)),e.beginPath(),e.ellipse(S,C,I,W,G,this.volcanoStartingAngle*(Math.PI/180),ke*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=ke}drawSteppingStonesVolcanoOverview(e,n,r,a,s,o,l,c,u){var d=a.length/this.race.length*this.canvasWidth*o;null==c&&(c=0),null==u&&(u=0);for(var S=this.lastPathEndingX-c-d*r+d*s/2,C=this.lastPathEndingY+0+u,I=d*s/this.volcanoRadiusXModifier,W=d*s/2-d/o,G=Math.PI/2,de=180/s,Ye=0,ke=de/20,Me=0;Me<10;Me++){var Ce=this.volcanoStartingAngle-ke*(2*Me);Ce<0&&(Ce=360-Math.abs(Ce)),(Ye=Ce-ke)<0&&(Ye=360-Math.abs(Ye)),e.beginPath(),e.ellipse(S,C,I,W,G,Ce*(Math.PI/180),Ye*(Math.PI/180),!0),e.stroke()}(Ye=this.volcanoStartingAngle-de)<0&&(Ye=360-Math.abs(Ye)),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=Ye}drawBackgroundVolcano(e,n,r,a,s,o,l,c){null==l&&(l=0),null==c&&(c=0);var u=.1*(a-r),d=(r+u)*this.canvasXDistanceScale*s-l,h=(a-u)*this.canvasXDistanceScale*s-l,p=h-d,b=(a-r)*this.canvasXDistanceScale*s/this.volcanoRadiusXModifier,y=this.canvasHeight*s,w=this.backgroundVolcanoYStart-.75*b+c,S=d+.15*p,C=y-10*o,I=d+.35*p,W=w+20*o,G=d+.4*p,Q=w,te=h-.15*p,de=y-10*o,ke=h-.35*p,Me=w+20*o,Ce=h-.4*p,Ye=w,vt=e.fillStyle,Rt=e.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);Rt.addColorStop(0,"red"),Rt.addColorStop(1,"orange"),e.fillStyle=Rt;var Zt=G+(Ce-G)/3,Gt=w+b/4,xt=G+2*(Ce-G)/3,pe=w+b/4,bn=G-.075*p,dt=Q+b/2,rn=Ce+.075*p,sn=Ye+b/2,pt=bn+1.7*(rn-bn)/5,Cn=dt+.5*b,Kn=bn+1.4*(rn-bn)/5,ar=dt+b/2,_n=bn+2.5*(rn-bn)/5,ai=dt,si=bn+3.6*(rn-bn)/5,Pi=dt+b,Ei=bn+3.3*(rn-bn)/5,Si=dt-.25*b;e.beginPath(),e.moveTo(G,Q),e.bezierCurveTo(Zt,Gt,xt,pe,Ce,Ye),e.lineTo(rn,sn),e.moveTo(rn,sn),e.bezierCurveTo(si,Pi,Ei,Si,_n,ai),e.bezierCurveTo(pt,Cn,Kn,ar,bn,dt),e.lineTo(G,Q),e.fill(),e.beginPath(),e.moveTo(d,y),e.bezierCurveTo(S,C,I,W,G,Q),e.stroke(),e.beginPath(),e.moveTo(h,y),e.bezierCurveTo(te,de,ke,Me,Ce,Ye),e.stroke();var Mn=e.lineWidth;e.lineWidth=2;var it=.175,fi=d+p*(it+.025),on=y-b/4,Wn=d+p*(it+.2),oi=w+b/3,On=d+p*(it+.25),Un=w+b/4;e.beginPath(),e.moveTo(d+p*it,.95*y),e.bezierCurveTo(fi,on,Wn,oi,On,Un),e.stroke();var mr=d+p*(.025+(it=.35)),va=y-b/4,vr=d+p*(it+.075),ba=w+b/2,cs=d+p*(it+.1),Vs=w+b/3;e.beginPath(),e.moveTo(d+p*it,.95*y),e.bezierCurveTo(mr,va,vr,ba,cs,Vs),e.stroke();var Ii=h-p*(.025+(it=.35)),Et=y-b/4,Wi=h-p*(it+.075),go=w+b/2,ut=h-p*(it+.1),Ct=w+b/3;e.beginPath(),e.moveTo(h-p*it,.95*y),e.bezierCurveTo(Ii,Et,Wi,go,ut,Ct),e.stroke();var br=h-p*(.025+(it=.175)),_f=y-b/4,yf=h-p*(it+.2),Du=w+b/3,Ru=h-p*(it+.25),xu=w+b/4;if(e.beginPath(),e.moveTo(h-p*it,.95*y),e.bezierCurveTo(br,_f,yf,Du,Ru,xu),e.stroke(),e.lineWidth=Mn,void 0!==this.race.raceUI.lavaFallPercentByFrame[n]&&0!==this.race.raceUI.lavaFallPercentByFrame[n].length&&void 0!==this.race.raceUI.lavaFallPercentByFrame[n][0]){1===s&&(n=this.race.raceUI.lavaFallPercentByFrame.length-1);var ds=this.race.raceUI.lavaFallPercentByFrame[n],hs=(a-r)*this.canvasXDistanceScale*s,Fs=r*this.canvasXDistanceScale*s,Mu=Fs+.4*hs-l+0,Bl=Fs+.45*hs-l+0,mo=Fs+.5*hs-l+0,ku=Fs+.55*hs-l+0,Ll=Fs+.6*hs-l+0,kn=.01*(a-r)*this.canvasXDistanceScale*s,Ti=kn/2,Di=w+b/4,_a=this.backgroundVolcanoYStart+b+c,vo=(_a-Di)*ds[0];e.beginPath(),e.ellipse(Mu,Di+vo-Ti,kn,Ti,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Mu-kn,Di,2*kn,vo-(Ti-1));var Au=(_a-Di)*ds[1];e.beginPath(),e.ellipse(Bl,Di+Au-Ti,kn,Ti,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Bl-kn,Di,2*kn,Au-(Ti-1));var Bs=(_a-Di)*ds[2];e.beginPath(),e.ellipse(mo,Di+Bs-Ti,kn,Ti,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(mo-kn,Di,2*kn,Bs-(Ti-1));var bo=(_a-Di)*ds[3];e.beginPath(),e.ellipse(ku,Di+bo-Ti,kn,Ti,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(ku-kn,Di,2*kn,bo-(Ti-1));var Cf=(_a-Di)*ds[4];e.beginPath(),e.ellipse(Ll,Di+Cf-Ti,kn,Ti,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Ll-kn,Di,2*kn,Cf-(Ti-1)),e.fillStyle=vt}else e.fillStyle=vt}grandPrixMountainYReset(e){this.race.raceType===Fe.event&&this.race.eventRaceType===ze.grandPrix&&0===this.globalService.globalVar.eventRaceData.mountainEndingY&&null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType===H.Mountain&&1===e&&(this.lastPathEndingY=this.canvasHeight/2)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceType!==Fe.event&&(this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[],this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[])}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(yi),k($i),k(hn),k(Rl))},t.\u0275cmp=st({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,n){if(1&e&&Ja(m7,5,un),2&e){let r;mn(r=vn())&&(n.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,n){1&e&&(g(0,"div",0),N(1,"canvas",1,2),f())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const b7=["circuitRewardModal"];function _7(t,i){if(1&t){const e=fe();g(0,"button",6),F("click",function(){return X(e),T(2).skipRaceAnimation()}),v(1,"Skip"),f()}}function y7(t,i){1&t&&(g(0,"span"),v(1,"BURST!"),f())}function C7(t,i){if(1&t){const e=fe();g(0,"button",6),F("click",function(){return X(e),T(2).pauseRaceAnimation()}),v(1,"Pause"),f()}}function w7(t,i){if(1&t&&(g(0,"div",8)(1,"div",9)(2,"div"),x(3,_7,2,0,"button",10),f(),g(4,"div"),v(5),x(6,y7,2,0,"span",3),f(),g(7,"div"),v(8),f(),g(9,"div"),v(10),f(),g(11,"div"),x(12,C7,2,0,"button",10),f()(),g(13,"div",11)(14,"div",12),N(15,"app-draw-race",13),f(),N(16,"div",14,15),f()()),2&t){const e=rt(17),n=T();m(3),_("ngIf",!n.grandPrixRace),m(2),ti("Velocity: ",n.velocityAtCurrentFrame," / ",n.maxSpeedAtCurrentFrame,"m/s "),m(1),_("ngIf",n.racerEffectAtCurrentFrame===n.burstEffect),m(2),ce("Stamina: ",n.staminaAtCurrentFrame,"%"),m(2),ti("Position: ",n.positionAtCurrentFrame," / ",n.totalRacers,""),m(2),_("ngIf",!n.grandPrixRace),m(3),_("race",n.selectedRace)("skip",n.skipRace.asObservable())("pause",n.pauseRace.asObservable()),m(1),_("scrollTop",e.scrollHeight)("innerHTML",n.incrementalRaceUpdates.trim(),Dn)}}function S7(t,i){if(1&t){const e=fe();g(0,"button",6),F("click",function(){return X(e),T(2).skipRaceAnimation()}),v(1,"Skip"),f()}}function T7(t,i){if(1&t){const e=fe();g(0,"button",6),F("click",function(){return X(e),T(2).pauseRaceAnimation()}),v(1,"Pause"),f()}}function D7(t,i){if(1&t&&(g(0,"div",16)(1,"div",17)(2,"div"),x(3,S7,2,0,"button",10),f(),g(4,"div"),x(5,T7,2,0,"button",10),f()(),N(6,"div",18,15),f()),2&t){const e=rt(7),n=T();m(3),_("ngIf",!n.grandPrixRace),m(2),_("ngIf",!n.grandPrixRace),m(1),_("scrollTop",e.scrollHeight)("innerHTML",n.incrementalRaceUpdates.trim(),Dn)}}function R7(t,i){if(1&t){const e=fe();g(0,"button",6),F("click",function(){return X(e),T(2).skipRaceAnimation()}),v(1,"Skip"),f()}}function x7(t,i){if(1&t){const e=fe();g(0,"button",6),F("click",function(){return X(e),T(2).pauseRaceAnimation()}),v(1,"Pause"),f()}}function M7(t,i){if(1&t&&(g(0,"div",16)(1,"div",17)(2,"div"),x(3,R7,2,0,"button",10),f(),g(4,"div"),v(5),f(),g(6,"div"),v(7),f(),g(8,"div"),x(9,x7,2,0,"button",10),f()(),g(10,"div",19),N(11,"app-draw-race",13)(12,"br"),f()()),2&t){const e=T();m(3),_("ngIf",!e.grandPrixRace),m(2),ti("Velocity: ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),m(2),ce("Stamina: ",e.staminaAtCurrentFrame,"%"),m(2),_("ngIf",!e.grandPrixRace),m(2),_("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function k7(t,i){1&t&&N(0,"br")}function A7(t,i){if(1&t&&(g(0,"td")(1,"span",24),v(2),f(),v(3),f()),2&t){const e=i.$implicit;m(2),nt(e.name),m(1),ce(": ",e.amount,"")}}function P7(t,i){if(1&t&&(g(0,"tr"),x(1,A7,4,2,"td",23),f()),2&t){const e=i.$implicit;m(1),_("ngForOf",e)}}function E7(t,i){if(1&t&&(g(0,"div",20)(1,"span",21),v(2,"Rewards"),f(),g(3,"div",22)(4,"table"),x(5,P7,2,1,"tr",23),f()()()),2&t){const e=T();m(5),_("ngForOf",e.rewardRows)}}function I7(t,i){if(1&t){const e=fe();g(0,"div",25)(1,"div",26)(2,"h4",27),v(3,"Circuit Rank Reward!"),f(),g(4,"button",28),F("click",function(){return X(e).$implicit.dismiss()}),v(5,"X"),f()(),g(6,"div",29)(7,"div",30),v(8," After ranking up, you receive: "),N(9,"br"),g(10,"div",21),v(11),f()(),N(12,"br")(13,"br"),g(14,"div"),v(15),f()(),g(16,"div",31)(17,"button",32),F("click",function(){return X(e).$implicit.dismiss()}),v(18,"Continue"),f()()()}if(2&t){const e=T();m(11),nt(e.selectedRace.circuitIncreaseReward[0]),m(4),nt(e.selectedRace.circuitIncreaseReward[1])}}let BR=(()=>{class t{constructor(e,n,r,a,s,o,l,c){this.globalService=e,this.gameLoopService=n,this.utilityService=r,this.lookupService=a,this.initializeService=s,this.modalService=o,this.sanitizer=l,this.raceLogicService=c,this.incrementalRaceUpdates="",this.raceFinished=new Ke,this.skipRace=new ge,this.pauseRace=new ge,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=Ar.Burst,this.grandPrixRace=!1}ngOnInit(){var e=this,n=this.globalService.globalVar.settings.get("raceDisplayInfo");n===Qr.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):n===Qr.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):n===Qr.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0),this.selectedRace.raceType===Fe.event&&this.selectedRace.eventRaceType===ze.grandPrix&&(this.grandPrixRace=!0);var r=new Yh;r=this.grandPrixRace?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult:this.raceLogicService.runRace(this.selectedRace),this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(r),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0),this.grandPrixRace&&(this.eventRaceSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Xr(function*(){e.globalService.getTimeToEventRace()>0&&0===e.globalService.globalVar.eventRaceData.bonusTime&&e.raceFinished.emit(!0),e.globalService.globalVar.eventRaceData.isRunning||e.raceFinished.emit(!0)})))}ngOnDestroy(){null!=this.frameByFrameSubscription&&this.frameByFrameSubscription.unsubscribe(),null!=this.updateSubscription&&this.updateSubscription.unsubscribe(),null!=this.eventRaceSubscription&&this.eventRaceSubscription.unsubscribe(),this.raceFinished.emit(!0)}displayRaceUpdates(e){var n=this,r=e.raceUpdates;this.incrementalRaceUpdates="";var s=0,l=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,c=this.updateSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Xr(function*(d){if(n.racePaused||(n.selectedRace.raceType===Fe.event&&n.selectedRace.eventRaceType===ze.grandPrix&&(n.globalService.globalVar.eventRaceData.currentRaceSegmentCount>l&&(s=0,n.selectedRace=n.globalService.globalVar.eventRaceData.currentRaceSegment,r=n.globalService.globalVar.eventRaceData.currentRaceSegmentResult.raceUpdates),l=n.globalService.globalVar.eventRaceData.currentRaceSegmentCount),s+=1),(n.selectedRace.raceType!==Fe.event||n.selectedRace.eventRaceType!==ze.grandPrix)&&(0===r.length||n.raceSkipped))return n.raceSkipped&&r.forEach(h=>{n.incrementalRaceUpdates+=n.sanitizer.sanitize(Xt.HTML,n.sanitizer.bypassSecurityTrustHtml(h.text+"\n"))}),e.wasSuccessful&&(n.displayResults=!0,null!=n.selectedRace.circuitIncreaseReward&&""!==n.selectedRace.circuitIncreaseReward[0]&&n.modalService.open(n.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void c.unsubscribe();n.selectedRace.raceType===Fe.event&&n.selectedRace.eventRaceType===ze.grandPrix?n.globalService.globalVar.eventRaceData.segmentTimeCounter*n.frameModifier>=r[0].value&&(n.incrementalRaceUpdates+=n.sanitizer.sanitize(Xt.HTML,n.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift()):s>=r[0].value&&(n.incrementalRaceUpdates+=n.sanitizer.sanitize(Xt.HTML,n.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift())});return function(d){return u.apply(this,arguments)}}())}setupDisplayRewards(e){if(this.rewardCells=[],this.rewardRows=[],null!=e.rewards){for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=this;this.totalRacers=this.lookupService.getTotalRacersByRace(this.selectedRace);var r=0,s=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var o=Xr(function*(l){e.racePaused||(e.selectedRace.raceType===Fe.event&&e.selectedRace.eventRaceType===ze.grandPrix&&(e.globalService.globalVar.eventRaceData.currentRaceSegmentCount>s&&(e.selectedRace=e.globalService.globalVar.eventRaceData.currentRaceSegment),s=e.globalService.globalVar.eventRaceData.currentRaceSegmentCount),r+=1);var c;c=e.selectedRace.raceType===Fe.event&&e.selectedRace.eventRaceType===ze.grandPrix?Math.round(e.globalService.globalVar.eventRaceData.segmentTimeCounter*e.frameModifier):r;try{if(e.selectedRace.raceUI.velocityByFrame.length<=c||e.raceSkipped){var u=e.selectedRace.raceUI.velocityByFrame.length-1;e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[u]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[u]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[u].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[u],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[u])}else e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[c]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[c]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[c].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[c],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[c])}catch(d){console.log("error")}});return function(l){return o.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(yi),k($i),k(hn),k(Gm),k(ls),k(xs),k(Wm))},t.\u0275cmp=st({type:t,selectors:[["app-race"]],viewQuery:function(e,n){if(1&e&&Ja(b7,7),2&e){let r;mn(r=vn())&&(n.circuitRewardModal=r.first)}},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:11,vars:5,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[3,"click",4,"ngIf"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"oneDisplayValue"],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"keyword"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,n){1&e&&(g(0,"div",0),x(1,w7,18,13,"div",1),x(2,D7,8,4,"div",2),x(3,M7,13,8,"div",2),x(4,k7,1,0,"br",3),x(5,E7,6,1,"div",4),g(6,"div",5)(7,"button",6),F("click",function(){return n.goToRaceSelection()}),v(8,"Back"),f()()(),x(9,I7,19,2,"ng-template",null,7,ot)),2&e&&(m(1),_("ngIf",n.displayVisualRace&&n.displayTextUpdates),m(1),_("ngIf",!n.displayVisualRace&&n.displayTextUpdates),m(1),_("ngIf",n.displayVisualRace&&!n.displayTextUpdates),m(1),_("ngIf",n.displayVisualRace&&!n.displayTextUpdates),m(1),_("ngIf",n.displayResults))},directives:[Kt,v7,ri],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;margin-left:.5rem;margin-right:.5rem;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%], .onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}.results[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawRace" "raceUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.raceUpdates[_ngcontent-%COMP%]{text-align:center}}']}),t})();function N7(t,i){if(1&t){const e=fe();g(0,"div",9)(1,"button",10),F("click",function(){return X(e),T(2).returnToAnimalView()}),v(2,"Back"),f()()}}function O7(t,i){if(1&t){const e=fe();g(0,"div",11)(1,"div")(2,"app-animal-list",12),F("selectedAnimal",function(r){return X(e),T(2).selectedAnimal(r)}),f()()()}if(2&t){const e=T(2);m(2),_("availableAnimals",e.availableAnimals)("isTrainingTrackView",!0)}}function V7(t,i){if(1&t){const e=fe();g(0,"div",13)(1,"app-training-track-race-view",14),F("raceSelected",function(r){return X(e),T(2).raceSelected(r)})("returnEmitter",function(){return X(e),T(2).returnToAnimalView()}),f()()}if(2&t){const e=T(2);m(1),_("selectedAnimal",e.animal)}}function F7(t,i){if(1&t&&(g(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),v(4,"Training Track"),f(),g(5,"div",5),v(6," Each animal can run their own training track to gain rewards and unique bonuses. To get each reward, you will have to beat each track at a progressively faster pace. "),f()(),x(7,N7,3,0,"div",6),f(),N(8,"hr"),x(9,O7,3,2,"div",7),x(10,V7,2,1,"div",8),f()),2&t){const e=T();m(7),_("ngIf",e.animalSelected),m(2),_("ngIf",!e.animalSelected),m(1),_("ngIf",e.animalSelected)}}function B7(t,i){if(1&t){const e=fe();g(0,"div",15)(1,"app-race",16),F("raceFinished",function(){return X(e),T().raceFinished()}),f()()}if(2&t){const e=T();m(1),_("selectedRace",e.selectedRace)}}const L7=function(t){return{fullHeight:t}};let LR=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.animalSelected=!1,this.raceSelectedEmitter=new Ke}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(n=>n.isAvailable);var e=this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck);null!=e&&(this.existingPrimaryDeckAnimals=[],e.selectedAnimals.forEach(n=>{this.existingPrimaryDeckAnimals.push(n)}))}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(){this.animalSelected=!1}raceSelected(e){this.selectedRace=e,this.showRace=!0,this.raceSelectedEmitter.emit(!0)}ngOnDestroy(){this.raceSelectedEmitter.emit(!1)}raceFinished(){this.showRace=!1,this.raceSelectedEmitter.emit(!1);var e=this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck);null!=e&&(e.selectedAnimals=this.existingPrimaryDeckAnimals)}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-training-track-view"]],outputs:{raceSelectedEmitter:"raceSelectedEmitter"},decls:3,vars:5,consts:[[1,"trainingTrackView",3,"ngClass"],[4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"infoGridContainer"],[1,"info"],[1,"description"],["class","back",4,"ngIf"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"back"],[3,"click"],[1,"selectAnimalView"],[3,"availableAnimals","isTrainingTrackView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","raceSelected","returnEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,n){1&e&&(g(0,"div",0),x(1,F7,11,3,"div",1),x(2,B7,2,1,"div",2),f()),2&e&&(_("ngClass",bi(3,L7,n.showRace)),m(1),_("ngIf",!n.showRace),m(1),_("ngIf",n.showRace))},directives:[Bn,Kt,bf,g7,BR],styles:['.trainingTrackView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.fullHeight[_ngcontent-%COMP%]{height:100%}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}']}),t})();function U7(t,i){1&t&&(g(0,"span",13),v(1,"!"),f())}function H7(t,i){1&t&&(g(0,"span",13),v(1,"!"),f())}function G7(t,i){if(1&t){const e=fe();g(0,"div",6)(1,"div",7)(2,"button",8),F("click",function(){X(e);const r=T(2);return r.changeDisplayRaceView(r.raceTypeEnum.circuit)}),v(3,"Circuit Races"),f(),g(4,"button",9),F("click",function(){X(e);const r=T(2);return r.changeDisplayRaceView(r.raceTypeEnum.special)}),x(5,U7,2,0,"span",10),v(6,"Special Races"),f(),g(7,"button",11),F("click",function(){X(e);const r=T(2);return r.changeDisplayRaceView(r.raceTypeEnum.event)}),x(8,H7,2,0,"span",10),v(9,"Event Races"),f(),g(10,"button",12),F("click",function(){X(e);const r=T(2);return r.changeDisplayRaceView(r.raceTypeEnum.trainingTrack)}),v(11,"Training Track"),f()(),N(12,"hr"),f()}if(2&t){const e=T(2);m(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.circuit?"filterActive":""),m(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.special?"filterActive":""),m(1),_("ngIf",e.newSpecialRaceAvailable),m(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.event?"filterActive":""),m(1),_("ngIf",e.eventRaceNowAvailable),m(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.trainingTrack?"filterActive":"")}}function j7(t,i){if(1&t){const e=fe();g(0,"app-circuit-view",14),F("raceSelected",function(r){return X(e),T(2).raceSelected(r)}),f()}}function z7(t,i){if(1&t){const e=fe();g(0,"app-local-view",14),F("raceSelected",function(r){return X(e),T(2).raceSelected(r)}),f()}}function $7(t,i){if(1&t){const e=fe();g(0,"app-event-view",14),F("raceSelected",function(r){return X(e),T(2).raceSelected(r)}),f()}}function W7(t,i){if(1&t){const e=fe();g(0,"app-training-track-view",15),F("raceSelectedEmitter",function(r){return X(e),T(2).trainingTrackRaceSelected(r)}),f()}}function q7(t,i){if(1&t&&(g(0,"div",2),x(1,G7,13,6,"div",3),x(2,j7,1,0,"app-circuit-view",4),x(3,z7,1,0,"app-local-view",4),x(4,$7,1,0,"app-event-view",4),x(5,W7,1,0,"app-training-track-view",5),f()),2&t){const e=T();m(1),_("ngIf",!e.trainingTrackRace),m(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.circuit),m(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.special),m(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.event),m(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.trainingTrack)}}function X7(t,i){if(1&t){const e=fe();g(0,"div",16)(1,"app-race",17),F("raceFinished",function(){return X(e),T().raceFinished()}),f()()}if(2&t){const e=T();m(1),_("selectedRace",e.selectedRace)}}let Y7=(()=>{class t{constructor(e,n,r){this.globalService=e,this.componentCommunicationService=n,this.gameLoopService=r,this.displayRaceView=Fe.circuit,this.showRace=!1,this.trainingTrackRace=!1,this.raceTypeEnum=Fe,this.newSpecialRaceAvailable=!1,this.eventRaceNowAvailable=!1}ngOnInit(){var e=this;this.componentCommunicationService.setNewView(Dt.raceselection),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var n=Xr(function*(r){e.newSpecialRaceAvailable=e.globalService.globalVar.notifications.isNewSpecialRaceAvailable,e.eventRaceNowAvailable=e.globalService.globalVar.notifications.isEventRaceNowActive});return function(r){return n.apply(this,arguments)}}()),this.communicationSubscription=this.componentCommunicationService.getRaceView().subscribe(n=>{this.displayRaceView=n})}changeDisplayRaceView(e){this.displayRaceView=e,e===Fe.special&&(this.newSpecialRaceAvailable=this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!1),e===Fe.event&&(this.eventRaceNowAvailable=this.globalService.globalVar.notifications.isEventRaceNowActive=!1)}raceSelected(e){this.selectedRace=e,this.showRace=!0}raceFinished(){this.showRace=!1}trainingTrackRaceSelected(e){this.trainingTrackRace=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.communicationSubscription&&this.communicationSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(Qn),k(yi))},t.\u0275cmp=st({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],["class","info",4,"ngIf"],[3,"raceSelected",4,"ngIf"],[3,"raceSelectedEmitter",4,"ngIf"],[1,"info"],[1,"raceGridContainer"],[1,"buttonAsText","circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","local","s5Heading","clickableText",3,"ngClass","click"],["class","availableIcon",4,"ngIf"],[1,"buttonAsText","event","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","trainingTrack","s5Heading","clickableText",3,"ngClass","click"],[1,"availableIcon"],[3,"raceSelected"],[3,"raceSelectedEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,n){1&e&&(x(0,q7,6,5,"div",0),x(1,X7,2,1,"div",1)),2&e&&(_("ngIf",!n.showRace),m(1),_("ngIf",n.showRace))},directives:[Kt,Bn,bH,MH,l7,LR,BR],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local event trainingTrack"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.trainingTrack[_ngcontent-%COMP%]{grid-area:trainingTrack;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}']}),t})(),Q7=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(k($i))},t.\u0275cmp=st({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"span",1)(2,"input",2),F("ngModelChange",function(a){return n.model=a})("input",function(){return n.toggle()}),f(),g(3,"label",3),v(4),f()()()),2&e&&(m(1),_("ngbPopover",n.popoverText),m(1),_("id",n.getId())("ngModel",n.model),m(1),_("for",n.getId()),m(1),nt(n.label))},directives:[ma,gh,jc,Yc],styles:[""]}),t})();function K7(t,i){if(1&t&&(g(0,"div",8)(1,"em"),v(2),f(),N(3,"br")(4,"br"),f()),2&t){const e=T();m(2),ce("",e.pointsNeededInColumn," points needed in this column to unlock")}}function Z7(t,i){1&t&&(g(0,"div",8)(1,"em"),v(2," Click Upgrade to unlock this talent. "),N(3,"br")(4,"br"),f()())}function J7(t,i){1&t&&(g(0,"div"),N(1,"br")(2,"br"),f())}function eG(t,i){if(1&t&&(g(0,"div"),N(1,"br"),g(2,"em")(3,"div",8),v(4,"Next Upgrade: "),f()(),N(5,"div",9),f()),2&t){const e=T();m(5),_("innerHTML",e.upgradedTalentDescription,Dn)}}const tG=function(t){return{talentInactive:t}};let nG=(()=>{class t{constructor(e,n,r){this.lookupService=e,this.gameLoopService=n,this.globalService=r,this.spentTalent=new Ke}ngOnInit(){this.talentTreeType=this.selectedAnimal.talentTree.talentTreeType,this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.totalPossiblePoints=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.talentTreeType),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0;var e=0;1===this.row&&(e=this.selectedAnimal.talentTree.row2RequiredPoints),2===this.row&&(e=this.selectedAnimal.talentTree.row3RequiredPoints),3===this.row&&(e=this.selectedAnimal.talentTree.row4RequiredPoints),this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0,this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(n=>{this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0})}isTalentMaxed(){var e=!1;return this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column)>=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.selectedAnimal.talentTree.talentTreeType)&&(e=!0),e}spendTalentPoint(){this.isTalentMaxed()||(this.selectedAnimal.talentTree.spendTalentPoint(this.row,this.column),this.spentTalent.emit(!0),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.globalService.calculateAnimalRacingStats(this.selectedAnimal))}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(hn),k(yi),k(yt))},t.\u0275cmp=st({type:t,selectors:[["app-talent"]],inputs:{selectedAnimal:"selectedAnimal",row:"row",column:"column"},outputs:{spentTalent:"spentTalent"},decls:15,vars:13,consts:[[1,"talent"],[1,"header","keyword"],[1,"content"],["class","centeredText",4,"ngIf"],[4,"ngIf"],[1,"description",3,"ngClass","innerHTML"],[1,"footer"],[3,"disabled","click"],[1,"centeredText"],[1,"talentInactive",3,"innerHTML"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"span"),v(3),f()(),g(4,"div",2),x(5,K7,5,1,"div",3),x(6,Z7,5,0,"div",3),x(7,J7,3,0,"div",4),N(8,"div",5),x(9,eG,6,1,"div",4),N(10,"br"),g(11,"div",6),v(12),g(13,"button",7),F("click",function(){return n.spendTalentPoint()}),v(14,"Upgrade"),f()()()()),2&e&&(m(3),ti("Sprint Column ",n.column+1," Row ",n.row+1,""),m(2),_("ngIf",n.pointsNeededInColumn>0),m(1),_("ngIf",n.pointsNeededInColumn<=0&&0===n.pointsInTalent),m(1),_("ngIf",n.pointsInTalent===n.totalPossiblePoints),m(1),_("ngClass",bi(11,tG,0===n.pointsInTalent))("innerHTML",n.talentDescription,Dn),m(1),_("ngIf",n.pointsInTalent>0&&n.pointsInTalent<n.totalPossiblePoints),m(3),ti(" ",n.pointsInTalent," / ",n.totalPossiblePoints," Points "),m(1),_("disabled",!n.hasTalentPoint||!n.hasEnoughPointsInColumn||n.isTalentMaxed()))},directives:[Kt,Bn],styles:['.talent[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr;justify-content:stretch;grid-template-areas:"header" "content"}.header[_ngcontent-%COMP%]{grid-area:header;background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary)}.content[_ngcontent-%COMP%]{grid-area:content;margin:1rem;display:flex;flex-direction:column;justify-content:space-between}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.talentInactive[_ngcontent-%COMP%]{color:#00000080}']}),t})();function iG(t,i){if(1&t&&(g(0,"div",14),v(1,"Equipped: "),g(2,"span",48),v(3),f(),N(4,"br")(5,"br"),v(6),f()),2&t){const e=T();_("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),m(3),nt(e.selectedAnimal.equippedItem.name),m(3),ce(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function rG(t,i){1&t&&(g(0,"div"),v(1," Equipped: None "),f())}function aG(t,i){if(1&t){const e=fe();g(0,"button",8),F("click",function(){return X(e),T().unequipItem()}),v(1,"Unequip Item"),f()}}function sG(t,i){if(1&t&&(g(0,"span",12),v(1),f()),2&t){const e=T(2);m(1),ce(" ",e.getTalentTreeName(),"")}}function oG(t,i){if(1&t){const e=fe();g(0,"div",49)(1,"div"),x(2,sG,2,1,"span",50),f(),g(3,"button",8),F("click",function(){X(e);const r=T(),a=rt(211);return r.openTalentsModal(a)}),v(4,"View Talents"),f()()}if(2&t){const e=T();m(2),_("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function lG(t,i){if(1&t){const e=fe();g(0,"div")(1,"span",52),v(2),f(),g(3,"span")(4,"button",53),F("click",function(){X(e);const r=T(2);return r.editingName=!r.editingName}),v(5,"Edit"),f()()()}if(2&t){const e=T(2);m(2),ce("",e.selectedAnimal.name," ")}}function cG(t,i){if(1&t){const e=fe();g(0,"div")(1,"span")(2,"input",54),F("ngModelChange",function(r){return X(e),T(2).newName=r}),f()(),g(3,"span")(4,"button",8),F("click",function(){return X(e),T(2).editName()}),v(5,"Save"),f()(),g(6,"span")(7,"button",8),F("click",function(){X(e);const r=T(2);return r.editingName=!r.editingName}),v(8,"Cancel"),f()()()}if(2&t){const e=T(2);m(2),_("ngModel",e.newName)}}function uG(t,i){if(1&t&&(g(0,"span",55),v(1),f()),2&t){const e=T(2);Zi("ngbPopover",e.traitStatGainDescription),m(1),ce(" ",e.selectedAnimal.trait.traitName," ")}}function dG(t,i){if(1&t&&(g(0,"div"),x(1,lG,6,1,"div",6),x(2,cG,9,1,"div",6),g(3,"span",12),x(4,uG,2,2,"span",51),v(5),f()()),2&t){const e=T();m(1),_("ngIf",!e.editingName),m(1),_("ngIf",e.editingName),m(2),_("ngIf",null!=e.selectedAnimal.trait),m(1),ce(" ",e.selectedAnimal.getAnimalType()," ")}}function hG(t,i){if(1&t){const e=fe();g(0,"div")(1,"span")(2,"button",8),F("click",function(){X(e);const r=T(2);return r.editingName=!r.editingName}),v(3,"Edit Name"),f()()()}}function fG(t,i){if(1&t){const e=fe();g(0,"div")(1,"span")(2,"input",56),F("ngModelChange",function(r){return X(e),T(2).newName=r}),f()(),g(3,"span")(4,"button",8),F("click",function(){return X(e),T(2).editName()}),v(5,"Save"),f()(),g(6,"span")(7,"button",8),F("click",function(){X(e);const r=T(2);return r.editingName=!r.editingName}),v(8,"Cancel"),f()()()}if(2&t){const e=T(2);m(2),_("ngModel",e.newName)}}function pG(t,i){if(1&t&&(g(0,"span",55),v(1),f()),2&t){const e=T(2);Zi("ngbPopover",e.traitStatGainDescription),m(1),ce(" ",e.selectedAnimal.trait.traitName," ")}}function gG(t,i){if(1&t&&(g(0,"div"),x(1,hG,4,0,"div",6),x(2,fG,9,1,"div",6),g(3,"span",12),x(4,pG,2,2,"span",51),v(5),f()()),2&t){const e=T();m(1),_("ngIf",!e.editingName),m(1),_("ngIf",e.editingName),m(2),_("ngIf",null!=e.selectedAnimal.trait),m(1),ce(" ",e.selectedAnimal.getAnimalType()," ")}}function mG(t,i){if(1&t&&(g(0,"em"),v(1),f()),2&t){const e=T();m(1),ce("(",e.selectedAnimal.currentTraining.trainingName,")")}}function vG(t,i){if(1&t&&N(0,"app-toggle",57),2&t){const e=T();_("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function bG(t,i){if(1&t&&(g(0,"div",14),v(1),N(2,"br")(3,"br"),v(4),f()),2&t){const e=T(2);_("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)),m(1),ce("Orb: ",e.selectedAnimal.equippedOrb.name," "),m(3),ce(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)," ")}}function _G(t,i){1&t&&(g(0,"div"),v(1," Orb: None "),f())}function yG(t,i){if(1&t){const e=fe();g(0,"button",8),F("click",function(){return X(e),T(2).unequipOrb()}),v(1,"Unequip Orb"),f()}}function CG(t,i){if(1&t){const e=fe();g(0,"div",58),x(1,bG,5,3,"div",5),x(2,_G,2,0,"div",6),N(3,"br"),x(4,yG,2,0,"button",7),g(5,"button",8),F("click",function(){X(e);const r=T(),a=rt(209);return r.openOrbModal(a)}),v(6,"Equip New Orb"),f()()}if(2&t){const e=T();m(1),_("ngIf",null!=e.selectedAnimal.equippedOrb),m(1),_("ngIf",null==e.selectedAnimal.equippedOrb),m(2),_("ngIf",null!=e.selectedAnimal.equippedOrb)}}function wG(t,i){if(1&t&&(g(0,"div")(1,"span")(2,"span",59),v(3,"Bonus Breed XP From Training:"),f(),v(4),At(5,"number"),f(),N(6,"br"),f()),2&t){const e=T(),n=rt(197);m(2),_("ngbPopover",n),m(2),ce(" ",Qt(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromTraining,"1.0-0")," ")}}function SG(t,i){if(1&t&&(g(0,"div")(1,"span")(2,"span",59),v(3,"Bonus Breed XP From Free Races:"),f(),v(4),At(5,"number"),f()()),2&t){const e=T(),n=rt(193);m(2),_("ngbPopover",n),m(2),ce(" ",Qt(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces,"1.0-0")," ")}}function TG(t,i){if(1&t&&(g(0,"div")(1,"span")(2,"span",59),v(3,"Bonus Breed XP From Circuit Races:"),f(),v(4),At(5,"number"),f()()),2&t){const e=T(),n=rt(195);m(2),_("ngbPopover",n),m(2),ce(" ",Qt(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces,"1.0-0")," ")}}function DG(t,i){if(1&t&&(g(0,"div")(1,"span")(2,"span",59),v(3,"Training Time Reduction:"),f(),v(4),At(5,"number"),f()()),2&t){const e=T(),n=rt(201);m(2),_("ngbPopover",n),m(2),ce(" ",Qt(5,2,e.selectedAnimal.miscStats.trainingTimeReduction,"1.0-0"),"% ")}}function RG(t,i){if(1&t&&(g(0,"div")(1,"span")(2,"span",59),v(3,"Bonus Diminishing Returns per Facility Level:"),f(),v(4),At(5,"number"),f()()),2&t){const e=T(),n=rt(199);m(2),_("ngbPopover",n),m(2),ce(" ",Qt(5,2,e.selectedAnimal.miscStats.diminishingReturnsBonus,"1.0-0")," ")}}function xG(t,i){if(1&t&&(g(0,"div")(1,"span")(2,"span",59),v(3,"Bonus Talents:"),f(),v(4),At(5,"number"),f()()),2&t){const e=T(),n=rt(203);m(2),_("ngbPopover",n),m(2),ce(" ",Qt(5,2,e.selectedAnimal.miscStats.bonusTalents,"1.0-0")," ")}}function MG(t,i){if(1&t){const e=fe();g(0,"span",60),F("click",function(){X(e);const r=T();return r.selectAbility(r.ability2)}),v(1),f()}if(2&t){const e=T();mt("filterActive",e.selectedAnimal.ability.name===e.ability2.name),m(1),ce("",e.ability2.name," ")}}function kG(t,i){if(1&t){const e=fe();g(0,"span",61),F("click",function(){X(e);const r=T();return r.selectAbility(r.ability3)}),v(1),f()}if(2&t){const e=T();mt("filterActive",e.selectedAnimal.ability.name===e.ability3.name),m(1),ce("",e.ability3.name," ")}}function AG(t,i){if(1&t&&(g(0,"span"),v(1),f()),2&t){const e=T();m(1),ti("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function PG(t,i){1&t&&(g(0,"span"),v(1,"MAX"),f())}function EG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getTopSpeedPopover()," ")}}function IG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getAccelerationPopover()," ")}}function NG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getEndurancePopover()," ")}}function OG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getPowerPopover()," ")}}function VG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getFocusPopover()," ")}}function FG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getAdaptabilityPopover()," ")}}function BG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getAbilityLevelPopover()," ")}}function LG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getBonusFreeRaceXpPopover()," ")}}function UG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getBonusCircuitRaceXpPopover()," ")}}function HG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getBonusTrainingXpPopover()," ")}}function GG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," ")}}function jG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getBonusTrainingTimeReductionPopover()," ")}}function zG(t,i){if(1&t&&(g(0,"div",62),v(1),f()),2&t){const e=T();m(1),ce(" ",e.getBonusTalentsPopover()," ")}}function $G(t,i){if(1&t&&(g(0,"div"),N(1,"span",30),f()),2&t){const e=T().$implicit,n=T(4);m(1),_("innerHTML",n.getItemAdditionalText(e),Dn)}}const WG=function(t){return{activeSelectedItem:t}};function qG(t,i){if(1&t){const e=fe();g(0,"td",72)(1,"div",73),F("click",function(){const a=X(e).$implicit;return T(4).selectItem(a)}),g(2,"span",74),v(3),f(),x(4,$G,2,1,"div",6),N(5,"br")(6,"br"),v(7),N(8,"br")(9,"br"),f()()}if(2&t){const e=i.$implicit,n=T(4);m(1),_("ngClass",bi(5,WG,e.isSelected)),m(2),ti("",e.name," (",e.amount,")"),m(1),_("ngIf",n.itemHasAdditionalText(e)),m(3),ce(" ",n.getItemShortDescription(e.name)," ")}}function XG(t,i){if(1&t&&(g(0,"tr"),x(1,qG,10,7,"td",71),f()),2&t){const e=i.$implicit;m(1),_("ngForOf",e)}}function YG(t,i){if(1&t){const e=fe();g(0,"div",75)(1,"span",76)(2,"span")(3,"span",74),v(4),f(),v(5),f(),g(6,"span",77)(7,"label",78),v(8,"Amount: "),f(),g(9,"input",79),F("ngModelChange",function(r){return X(e),T(3).selectedItemQuantity=r}),f(),g(10,"button",80),F("click",function(){return X(e),T(3).useItem()}),v(11,"Use"),f()()()()}if(2&t){const e=T(3);m(4),nt(e.selectedItem.name),m(1),ce(" - ",e.getItemShortDescription(e.selectedItem.name)," "),m(4),_("ngModel",e.selectedItemQuantity)}}function QG(t,i){if(1&t&&(g(0,"div")(1,"div",67)(2,"div",68)(3,"table"),x(4,XG,2,1,"tr",69),f()()(),x(5,YG,12,3,"div",70),f()),2&t){const e=T(2);m(4),_("ngForOf",e.itemsRows),m(1),_("ngIf",null!=e.selectedItem)}}function KG(t,i){1&t&&(g(0,"div"),v(1," No items available. "),f())}function ZG(t,i){if(1&t){const e=fe();g(0,"div",63)(1,"form")(2,"div",64)(3,"h4",65),v(4,"Use Item"),f(),g(5,"button",66),F("click",function(){return X(e).$implicit.dismiss()}),v(6,"X"),f()(),x(7,QG,6,2,"div",6),x(8,KG,2,0,"div",6),f()()}if(2&t){const e=T();m(7),_("ngIf",e.usableItemsList.length>0),m(1),_("ngIf",0==e.usableItemsList.length)}}const JG=function(t){return{activeSelectedEquipment:t}};function e9(t,i){if(1&t){const e=fe();g(0,"td",72)(1,"div",82),F("click",function(){const a=X(e).$implicit;return T(3).selectEquipment(a)}),g(2,"span",48),v(3),f(),N(4,"br")(5,"br"),v(6),N(7,"br"),f()()}if(2&t){const e=i.$implicit,n=T(3);m(1),_("ngClass",bi(4,JG,e.isSelected)),m(2),ti("",e.name," (",e.amount,")"),m(3),ce(" ",n.getEquipmentShortDescription(e.name)," ")}}function t9(t,i){if(1&t&&(g(0,"tr"),x(1,e9,8,6,"td",71),f()),2&t){const e=i.$implicit;m(1),_("ngForOf",e)}}function n9(t,i){if(1&t){const e=fe();g(0,"div",75)(1,"span",83)(2,"span")(3,"span",48),v(4),f(),v(5),f(),g(6,"span",77)(7,"button",80),F("click",function(){return X(e),T(2).equipItem()}),v(8,"Equip"),f()()()()}if(2&t){const e=T(2);m(4),nt(e.selectedEquipment.name),m(1),ce(" - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function i9(t,i){1&t&&(g(0,"div"),v(1," No equipment available. "),f())}function r9(t,i){if(1&t){const e=fe();g(0,"div",63)(1,"form")(2,"div",64)(3,"h4",65),v(4,"Change Equipment"),f(),g(5,"button",66),F("click",function(){const a=X(e).$implicit;return T().clearSelectedItems(),a.dismiss()}),v(6,"X"),f()(),g(7,"div")(8,"div",67)(9,"div",81)(10,"table"),x(11,t9,2,1,"tr",69),f()()(),x(12,n9,9,2,"div",70),f(),x(13,i9,2,0,"div",6),f()()}if(2&t){const e=T();m(11),_("ngForOf",e.equipmentRows),m(1),_("ngIf",null!=e.selectedEquipment),m(1),_("ngIf",0==e.equipmentList.length)}}const a9=function(t){return{activeSelectedOrb:t}};function s9(t,i){if(1&t){const e=fe();g(0,"td",72)(1,"div",85),F("click",function(){const a=X(e).$implicit;return T(3).selectOrb(a)}),g(2,"span",86),v(3),f(),N(4,"br"),v(5),N(6,"br"),f()()}if(2&t){const e=i.$implicit,n=T(3);m(1),_("ngClass",bi(3,a9,e.isSelected)),m(2),nt(e.name),m(2),ce(" ",n.getEquipmentShortDescription(e.name)," ")}}function o9(t,i){if(1&t&&(g(0,"tr"),x(1,s9,7,5,"td",71),f()),2&t){const e=i.$implicit;m(1),_("ngForOf",e)}}function l9(t,i){if(1&t){const e=fe();g(0,"div",75)(1,"span",87)(2,"span")(3,"span",86),v(4),f(),v(5),f(),g(6,"span",77)(7,"button",80),F("click",function(){return X(e),T(2).equipOrb()}),v(8,"Equip"),f()()()()}if(2&t){const e=T(2);m(4),nt(e.selectedOrb.name),m(1),ce(" - ",e.getEquipmentShortDescription(e.selectedOrb.name)," ")}}function c9(t,i){1&t&&(g(0,"div"),v(1," No equipment available. "),f())}function u9(t,i){if(1&t){const e=fe();g(0,"div",63)(1,"form")(2,"div",64)(3,"h4",65),v(4,"Change Orb"),f(),g(5,"button",66),F("click",function(){return X(e).$implicit.dismiss()}),v(6,"X"),f()(),g(7,"div")(8,"div",67)(9,"div",84)(10,"table"),x(11,o9,2,1,"tr",69),f()()(),x(12,l9,9,2,"div",70),f(),x(13,c9,2,0,"div",6),f()()}if(2&t){const e=T();m(11),_("ngForOf",e.orbRows),m(1),_("ngIf",null!=e.selectedOrb),m(1),_("ngIf",0==e.equipmentList.length)}}const d9=function(t){return{selectedTalentTree:t}};function h9(t,i){if(1&t){const e=fe();g(0,"span",92),F("click",function(){const a=X(e).$implicit;return T(4).filterTalentTree(a)}),v(1),f()}if(2&t){const e=i.$implicit,n=T(4);_("ngClass",bi(2,d9,n.selectedTalentTree===e)),m(1),ce(" ",e.trim()," ")}}function f9(t,i){if(1&t&&(g(0,"div")(1,"strong"),v(2),f()()),2&t){const e=T(4);m(2),ce(" ",e.inDepthTalentTreeDescription," ")}}function p9(t,i){if(1&t&&(g(0,"div")(1,"div",90),x(2,h9,2,4,"span",91),f(),N(3,"hr"),x(4,f9,3,1,"div",6),f()),2&t){const e=T(3);m(2),_("ngForOf",e.talentTreeOptions),m(2),_("ngIf",""!==e.inDepthTalentTreeDescription&&void 0!==e.inDepthTalentTreeDescription)}}function g9(t,i){if(1&t){const e=fe();g(0,"div")(1,"div",67),x(2,p9,5,2,"div",6),f(),g(3,"div",75)(4,"button",89),F("click",function(){return X(e),T(2).selectTalentTree()}),v(5,"Select"),f()()()}if(2&t){const e=T(2);m(2),_("ngIf",e.talentTreeOptions.length>0)}}function m9(t,i){1&t&&N(0,"div",103)}function v9(t,i){if(1&t&&N(0,"div",11),2&t){const e=T().index,n=T().index;_("ngClass",T(3).getBorderConditional(n,e))}}function b9(t,i){if(1&t){const e=fe();g(0,"div",98)(1,"div",11)(2,"app-talent",99),F("spentTalent",function(r){return X(e),T(4).spentTalent(r)}),f()(),g(3,"div",100),x(4,m9,1,0,"div",101),x(5,v9,1,1,"div",102),f()()}if(2&t){const e=i.index,n=T().index,r=T(3);m(1),_("ngClass",n<r.talentRows-1?"talentContent":"lastTalentContent"),m(1),_("row",n)("column",e)("selectedAnimal",r.selectedAnimal),m(2),_("ngIf",n!==r.talentRows-1),m(1),_("ngIf",n!==r.talentRows-1)}}const UR=function(){return[]};function _9(t,i){if(1&t&&(g(0,"div",95)(1,"div",96),x(2,b9,6,6,"div",97),f()()),2&t){const e=T(3);m(2),_("ngForOf",zg(1,UR).constructor(e.talentColumns))}}function y9(t,i){if(1&t&&(g(0,"div",67)(1,"div",93),v(2),f(),N(3,"br"),g(4,"p")(5,"em"),v(6," Note that this functionality is new and subject to change. I have plans to add more talents and certain talents will likely still need rebalancing/redesigning. Bear with me as I work that out. Once I feel like talents are in a final state, everyone will have the option to reset their talent choices if they choose to. Feel free to experiment with the options as they are now and let me know if you have any feedback. Thanks! "),f()(),N(7,"br"),x(8,_9,3,2,"div",94),f()),2&t){const e=T(2);m(2),ce("Available Talent Points: ",e.availableTalentPoints,""),m(6),_("ngForOf",zg(2,UR).constructor(e.talentRows))}}function C9(t,i){1&t&&(g(0,"div"),v(1," Coming Soon! "),f())}function w9(t,i){if(1&t){const e=fe();g(0,"div",63)(1,"form")(2,"div",64)(3,"h4",65),v(4,"Talents"),f(),g(5,"button",66),F("click",function(){return X(e).$implicit.dismiss()}),v(6,"X"),f()(),x(7,g9,6,1,"div",6),x(8,y9,9,3,"div",88),x(9,C9,2,0,"div",6),f()()}if(2&t){const e=T();m(7),_("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType===e.talentTreeTypeEnum.none),m(1),_("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none),m(1),_("ngIf",!e.talentsReleased)}}let S9=(()=>{class t{constructor(e,n,r,a,s,o){this.lookupService=e,this.modalService=n,this.globalService=r,this.componentCommunicationService=a,this.utilityService=s,this.gameLoopService=o,this.returnEmitter=new Ke,this.canAutoBreed=!1,this.areTalentsAvailable=!1,this.orbIsUnlocked=!1,this.talentTreeTypeEnum=lt,this.canBreed=!0,this.orbFunctionalityReleased=!1,this.talentsReleased=!0,this.talentColumns=3,this.talentRows=4,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}keyEvent(e){if(!this.modalService.hasOpenModals()){var n=this.globalService.globalVar.animals.filter(o=>o.isAvailable),r=n.findIndex(o=>this.selectedAnimal===o);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=n.length-1),this.componentCommunicationService.setAnimalView(Dt.animals,s=n[a]),this.resetSelectedAnimalInfo(s);else if("ArrowRight"===e.key){var a,s;(a=r+1)===n.length&&(a=0),this.componentCommunicationService.setAnimalView(Dt.animals,s=n[a]),this.resetSelectedAnimalInfo(s)}}}ngOnInit(){this.handleIntroTutorial(),this.resetSelectedAnimalInfo(this.selectedAnimal),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,n=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=n&&(e=n.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}canAnimalBreed(){var e=!0;return this.selectedAnimal.breedGaugeXp<this.selectedAnimal.breedGaugeMax&&(e=!1),e}breed(){this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut()}editName(){this.newName.length<=50&&this.newName.length>=1?(this.selectedAnimal.name=this.newName,this.editingName=!1):alert("Name must be between 1 and 50 characters long.")}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>(e.itemType===Y.Food||e.itemType===Y.Consumable)&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===Y.Equipment&&!this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var n=e.makeCopy(e);this.equipmentList.push(n)}}),this.setupDisplayEquipment(),this.globalService.globalVar.animals.filter(e=>null!=e.equippedItem).forEach(e=>{var n=this.equipmentList.find(r=>{var a;return r.name===(null===(a=e.equippedItem)||void 0===a?void 0:a.name)});null!=n&&(n.amount>0&&(n.amount-=1),n.amount<=0&&(this.equipmentList=this.equipmentList.filter(r=>r.name!==(null==n?void 0:n.name))))})}updateOrbList(){this.orbList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===Y.Equipment&&this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var n=e.makeCopy(e);this.orbList.push(n)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var n=1;n<=this.usableItemsList.length;n++)this.itemsCells.push(this.usableItemsList[n-1]),n%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var n=1;n<=this.equipmentList.length;n++)this.equipmentCells.push(this.equipmentList[n-1]),n%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}setupDisplayOrbs(){this.orbCells=[],this.orbRows=[];for(var n=1;n<=this.orbList.length;n++)this.orbCells.push(this.orbList[n-1]),n%4==0&&(this.orbRows.push(this.orbCells),this.orbCells=[]);0!==this.orbCells.length&&this.orbRows.push(this.orbCells)}openTalentsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()},r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()},r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()})}openOrbModal(e){this.setupDisplayOrbs(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()},r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()})}useItem(){if(void 0!==this.selectedItem){var e=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name&&r.itemType===this.selectedItem.itemType);if(void 0===e)return void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");if(null==this.selectedItemQuantity||isNaN(Number(this.selectedItemQuantity)))return void alert("You must enter a numerical amount to use.");if(e.amount<this.selectedItemQuantity)return void alert("You don't have that many "+e.name+"!");if(this.selectedItem.itemType===Y.Consumable&&this.selectedItem.name.includes("Certificate")&&this.lookupService.isAmountMoreThanCertificateCap(this.selectedItemQuantity,this.selectedAnimal,this.selectedItem.name))return void alert("This amount will exceed the amount of these certificates you can give your animal.");if(e.amount-=this.selectedItemQuantity,this.selectedItem.itemType===Y.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else{var n=new Ee(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(n.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(n.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(n.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(n.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(n.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(n.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(n),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}else this.selectedItem.itemType===Y.Consumable&&(this.selectedItemQuantity=+this.selectedItemQuantity,"Free Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+=+this.selectedItemQuantity),"Circuit Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces+=2*this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+=+this.selectedItemQuantity),"Training Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromTraining+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+=+this.selectedItemQuantity),"Diminishing Returns Increase Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.diminishingReturnsBonus+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal)));this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()}}selectItem(e){this.selectedItem=e,this.usableItemsList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}clearSelectedItems(){this.usableItemsList.forEach(e=>{e.isSelected=!1})}clearSelectedEquipment(){this.equipmentList.forEach(e=>{e.isSelected=!1})}clearSelectedOrb(){this.orbList.forEach(e=>{e.isSelected=!1})}equipItem(){void 0!==this.selectedEquipment&&(this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.clearSelectedEquipment(),this.modalService.dismissAll(),this.selectedEquipment=void 0)}selectEquipment(e){this.selectedEquipment=e,this.equipmentList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}unequipItem(){this.selectedAnimal.equippedItem=null,this.clearSelectedEquipment(),this.updateEquipmentList()}equipOrb(){void 0!==this.selectedOrb&&(this.selectedAnimal.equippedOrb=this.selectedOrb,this.updateOrbList(),this.clearSelectedOrb(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal),this.modalService.dismissAll(),this.selectedOrb=void 0)}selectOrb(e){this.selectedOrb=e,this.orbList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}unequipOrb(){this.selectedAnimal.equippedOrb=null,this.clearSelectedOrb(),this.updateOrbList(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getBonusFreeRaceXpPopover(){return this.lookupService.bonusFreeRaceXpPopover(this.selectedAnimal)}getBonusCircuitRaceXpPopover(){return this.lookupService.bonusCircuitRaceXpPopover(this.selectedAnimal)}getBonusTrainingXpPopover(){return this.lookupService.bonusTrainingXpPopover(this.selectedAnimal)}getBonusDiminishingReturnsPerFacilityLevelPopover(){return this.lookupService.bonusDiminishingReturnsPerFacilityLevelPopover(this.selectedAnimal)}getBonusTrainingTimeReductionPopover(){return this.lookupService.bonusTrainingTimeReductionPopover(this.selectedAnimal)}getBonusTalentsPopover(){return this.lookupService.bonusTalentsPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e)}itemHasAdditionalText(e){return!(e.itemType!==Y.Consumable||!e.name.includes("Certificate"))}getItemAdditionalText(e){var n="";return e.itemType===Y.Consumable&&e.name.includes("Certificate")&&("Free Race Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Circuit Race Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Training Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Diminishing Returns Increase Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>")),this.utilityService.getSanitizedHtml(n)}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(n=>n.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(Dt.barn,e.barnNumber)}filterTalentTree(e){this.selectedTalentTree=e,this.inDepthTalentTreeDescription=this.lookupService.getInDepthTalentTreeDescription(e)}selectTalentTree(){""!==this.selectedTalentTree&&null!=this.selectedTalentTree?this.selectedAnimal.talentTree.talentTreeType=this.lookupService.convertTalentTreeNameToEnum(this.selectedTalentTree):alert("You must select a talent tree.")}resetSelectedAnimalInfo(e){var n=this;this.selectedAnimal=e,this.areTalentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.orbIsUnlocked=this.lookupService.isItemUnlocked("orbs"),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel);var r=this.lookupService.getStockbreeder();null!=r&&r>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.updateOrbList(),this.selectedTalentTree="",this.inDepthTalentTreeDescription="",this.componentCommunicationService.setAnimalView(Dt.animals,new Tt);var a=this.globalService.globalVar.barns.find(s=>s.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==a?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(a),this.areTalentsAvailable&&(this.talentTreeOptions=this.lookupService.getTalentTreeNames(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=Xr(function*(o){n.canBreed=n.canAnimalBreed()});return function(o){return s.apply(this,arguments)}}())}getTalentTreeName(){var e=this.selectedAnimal.talentTree.getTotalSpentPoints();return this.lookupService.getTalentTreeNameByEnum(this.selectedAnimal.talentTree.talentTreeType)+" Level "+e}getBorderConditional(e,n){var r,a=e+1,s=0;1===a&&(s=this.selectedAnimal.talentTree.row2RequiredPoints),2===a&&(s=this.selectedAnimal.talentTree.row3RequiredPoints),3===a&&(s=this.selectedAnimal.talentTree.row4RequiredPoints);var o=s-this.selectedAnimal.talentTree.getTalentPointsByColumn(n);return"Flatland"===this.selectedAnimal.getRaceCourseType()&&(o>=5?r={"completedFlatlandTalentSpacer height0":!0}:4===o?r={"completedFlatlandTalentSpacer height1":!0}:3===o?r={"completedFlatlandTalentSpacer height2":!0}:2===o?r={"completedFlatlandTalentSpacer height3":!0}:1===o?r={"completedFlatlandTalentSpacer height4":!0}:o<=0&&(r={"completedFlatlandTalentSpacer height5":!0})),"Mountain"===this.selectedAnimal.getRaceCourseType()&&(o>=5?r={"completedMountainTalentSpacer height0":!0}:4===o?r={"completedMountainTalentSpacer height1":!0}:3===o?r={"completedMountainTalentSpacer height2":!0}:2===o?r={"completedMountainTalentSpacer height3":!0}:1===o?r={"completedMountainTalentSpacer height4":!0}:o<=0&&(r={"completedMountainTalentSpacer height5":!0})),"Ocean"===this.selectedAnimal.getRaceCourseType()&&(o>=5?r={"completedOceanTalentSpacer height0":!0}:4===o?r={"completedOceanTalentSpacer height1":!0}:3===o?r={"completedOceanTalentSpacer height2":!0}:2===o?r={"completedOceanTalentSpacer height3":!0}:1===o?r={"completedOceanTalentSpacer height4":!0}:o<=0&&(r={"completedOceanTalentSpacer height5":!0})),"Tundra"===this.selectedAnimal.getRaceCourseType()&&(o>=5?r={"completedTundraTalentSpacer height0":!0}:4===o?r={"completedTundraTalentSpacer height1":!0}:3===o?r={"completedTundraTalentSpacer height2":!0}:2===o?r={"completedTundraTalentSpacer height3":!0}:1===o?r={"completedTundraTalentSpacer height4":!0}:o<=0&&(r={"completedTundraTalentSpacer height5":!0})),"Volcanic"===this.selectedAnimal.getRaceCourseType()&&(o>=5?r={"completedVolcanicTalentSpacer height0":!0}:4===o?r={"completedVolcanicTalentSpacer height1":!0}:3===o?r={"completedVolcanicTalentSpacer height2":!0}:2===o?r={"completedVolcanicTalentSpacer height3":!0}:1===o?r={"completedVolcanicTalentSpacer height4":!0}:o<=0&&(r={"completedVolcanicTalentSpacer height5":!0})),r}spentTalent(e){this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(hn),k(ls),k(yt),k(Qn),k($i),k(yi))},t.\u0275cmp=st({type:t,selectors:[["app-selected-animal"]],hostBindings:function(e,n){1&e&&F("keyup",function(a){return n.keyEvent(a)},!1,Xa)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:212,vars:113,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","talents",4,"ngIf"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],[1,"clickableText",3,"click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back"],["class","orb",4,"ngIf"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"racingStats"],[1,"miscStats"],[1,"abilities"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"s4Heading",3,"ngbPopover"],[1,"ability1","s5Heading","clickableText",3,"click"],["class","ability2 s5Heading clickableText",3,"filterActive","click",4,"ngIf"],["class","ability3 s5Heading clickableText",3,"filterActive","click",4,"ngIf"],[1,"abilityXp"],[3,"innerHTML"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["bonusFreeRaceXpPopoverContent",""],["bonusCircuitRaceXpPopoverContent",""],["bonusTrainingXpPopoverContent",""],["bonusDiminishingReturnsPerFacilityLevelPopoverContent",""],["bonusTrainingTimeReductionPopoverContent",""],["bonusTalentsPopoverContent",""],["content",""],["equipment",""],["orb",""],["talentsContent",""],[1,"equipmentKeyword"],[1,"talents"],["class","keyword",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"orb"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],[1,"ability2","s5Heading","clickableText",3,"click"],[1,"ability3","s5Heading","clickableText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"selectableItem",3,"ngClass","click"],[1,"resourceKeyword"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectableEquipment",3,"ngClass","click"],[1,"selectedEquipmentSpan"],[1,"orbContainer"],[1,"selectableOrb",3,"ngClass","click"],[1,"progressionKeyword"],[1,"selectedOrbSpan"],["class","modal-body",4,"ngIf"],["type","button",3,"click"],[1,"typeContainer"],["class","talents subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"talents","subHeading",3,"ngClass","click"],[1,"talentInfo"],["class","talentRow",4,"ngFor","ngForOf"],[1,"talentRow"],[1,"rowFlex"],["class","talentColumn",4,"ngFor","ngForOf"],[1,"talentColumn"],[3,"row","column","selectedAnimal","spentTalent"],[1,"talentSpacer"],["class","defaultTalentSpacer",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"defaultTalentSpacer"]],template:function(e,n){if(1&e){const r=fe();g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),x(6,iG,7,3,"div",5),x(7,rG,2,0,"div",6),N(8,"br"),x(9,aG,2,0,"button",7),g(10,"button",8),F("click",function(){X(r);const s=rt(207);return n.openEquipmentModal(s)}),v(11,"Equip New Item"),f()(),N(12,"br"),x(13,oG,5,1,"div",9),f(),g(14,"div",10)(15,"div",11),x(16,dG,6,4,"div",6),x(17,gG,6,4,"div",6),g(18,"span",12),v(19),f(),N(20,"br"),f(),g(21,"span",13),F("click",function(){return n.goToAssignedBarn()}),v(22),x(23,mG,2,1,"em",6),f(),N(24,"br"),g(25,"span",14),v(26),f(),N(27,"br"),g(28,"span",14),v(29),At(30,"number"),g(31,"button",15),F("click",function(){return n.breed()}),v(32,"Breed"),f()(),N(33,"br"),g(34,"button",8),F("click",function(){X(r);const s=rt(205);return n.openItemModal(s)}),v(35,"Use Item"),f(),N(36,"br"),x(37,vG,1,3,"app-toggle",16),f(),g(38,"div",17)(39,"div")(40,"button",8),F("click",function(){return n.returnToAnimalView()}),v(41,"Back"),f()(),N(42,"br"),x(43,CG,7,3,"div",18),f()(),N(44,"hr"),g(45,"div",19)(46,"div",20)(47,"span",21),v(48,"Base Stats"),f(),N(49,"br")(50,"br"),g(51,"span",14)(52,"span",12),v(53,"Speed:"),f(),v(54),At(55,"number"),f(),N(56,"br"),g(57,"span",14)(58,"span",12),v(59,"Acceleration:"),f(),v(60),At(61,"number"),f(),N(62,"br"),g(63,"span",14)(64,"span",12),v(65,"Endurance:"),f(),v(66),At(67,"number"),f(),N(68,"br"),g(69,"span",14)(70,"span",12),v(71,"Power:"),f(),v(72),At(73,"number"),f(),N(74,"br"),g(75,"span",14)(76,"span",12),v(77,"Focus:"),f(),v(78),At(79,"number"),f(),N(80,"br"),g(81,"span",14)(82,"span",12),v(83,"Adaptability:"),f(),v(84),At(85,"number"),f(),N(86,"br"),g(87,"span",14)(88,"span",12),v(89,"Diminishing Returns:"),f(),v(90),At(91,"number"),f()(),g(92,"div",22)(93,"span",21),v(94,"Racing Stats"),f(),N(95,"br")(96,"br"),g(97,"span",14)(98,"span",12),v(99,"Max Speed:"),f(),v(100),At(101,"number"),f(),N(102,"br"),g(103,"span",14)(104,"span",12),v(105,"Acceleration Rate:"),f(),v(106),At(107,"number"),f(),N(108,"br"),g(109,"span",14)(110,"span",12),v(111,"Stamina:"),f(),v(112),At(113,"number"),f(),N(114,"br"),g(115,"span",14)(116,"span",12),v(117,"Power Efficiency:"),f(),v(118),At(119,"number"),f(),N(120,"br"),g(121,"span",14)(122,"span",12),v(123,"Focus Distance:"),f(),v(124),At(125,"number"),f(),N(126,"br"),g(127,"span",14)(128,"span",12),v(129,"Adaptability Distance:"),f(),v(130),At(131,"number"),f(),N(132,"br"),g(133,"span",14)(134,"span",12),v(135,"Burst Chance:"),f(),v(136),At(137,"number"),f(),N(138,"br"),g(139,"span",14)(140,"span",12),v(141,"Burst Distance:"),f(),v(142),At(143,"number"),f()(),g(144,"div",23)(145,"span",21),v(146,"Miscellaneous Stats"),f(),N(147,"br")(148,"br"),x(149,wG,7,5,"div",6),x(150,SG,6,5,"div",6),x(151,TG,6,5,"div",6),x(152,DG,6,5,"div",6),x(153,RG,6,5,"div",6),x(154,xG,6,5,"div",6),f()(),g(155,"div",24)(156,"p")(157,"span",25),v(158,"Abilities"),f(),N(159,"br"),g(160,"span")(161,"em"),v(162,"Your animal will use the ability you select below."),f()()(),g(163,"div")(164,"span",26),F("click",function(){return n.selectAbility(n.ability1)}),v(165),f(),x(166,MG,2,3,"span",27),x(167,kG,2,3,"span",28),N(168,"br")(169,"br"),g(170,"p")(171,"span",14),v(172),g(173,"span",29),x(174,AG,2,2,"span",6),x(175,PG,2,0,"span",6),f()(),N(176,"br")(177,"span",30),f()()()()()(),x(178,EG,2,1,"ng-template",null,31,ot),x(180,IG,2,1,"ng-template",null,32,ot),x(182,NG,2,1,"ng-template",null,33,ot),x(184,OG,2,1,"ng-template",null,34,ot),x(186,VG,2,1,"ng-template",null,35,ot),x(188,FG,2,1,"ng-template",null,36,ot),x(190,BG,2,1,"ng-template",null,37,ot),x(192,LG,2,1,"ng-template",null,38,ot),x(194,UG,2,1,"ng-template",null,39,ot),x(196,HG,2,1,"ng-template",null,40,ot),x(198,GG,2,1,"ng-template",null,41,ot),x(200,jG,2,1,"ng-template",null,42,ot),x(202,zG,2,1,"ng-template",null,43,ot),x(204,ZG,9,2,"ng-template",null,44,ot),x(206,r9,14,3,"ng-template",null,45,ot),x(208,u9,14,3,"ng-template",null,46,ot),x(210,w9,10,3,"ng-template",null,47,ot)}if(2&e){const r=rt(179),a=rt(181),s=rt(183),o=rt(185),l=rt(187),c=rt(189),u=rt(191);m(6),_("ngIf",null!=n.selectedAnimal.equippedItem),m(1),_("ngIf",null==n.selectedAnimal.equippedItem),m(2),_("ngIf",null!=n.selectedAnimal.equippedItem),m(4),_("ngIf",n.areTalentsAvailable),m(2),_("ngClass",n.colorConditional),m(1),_("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),m(1),_("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),m(2),nt(n.selectedAnimal.getRaceCourseType()),m(3),ce("",n.assignedBarnName," "),m(1),_("ngIf",null!=n.selectedAnimal.currentTraining),m(2),Zi("ngbPopover",n.breedLevelPopover),m(1),ce("Breed Level ",n.selectedAnimal.breedLevel,""),m(2),_("ngbPopover",n.breedDescriptionPopover),m(1),ti("Breed XP: ",Qt(30,65,n.selectedAnimal.breedGaugeXp,"1.2-2"),"/",n.selectedAnimal.breedGaugeMax," "),m(2),_("disabled",!n.canBreed),m(6),_("ngIf",n.canAutoBreed),m(6),_("ngIf",n.orbIsUnlocked&&n.orbFunctionalityReleased),m(8),_("ngbPopover",r),m(3),ce(" ",Qt(55,68,n.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),m(3),_("ngbPopover",a),m(3),ce(" ",Qt(61,71,n.selectedAnimal.currentStats.acceleration,"1.2-2")," "),m(3),_("ngbPopover",s),m(3),ce(" ",Qt(67,74,n.selectedAnimal.currentStats.endurance,"1.2-2")," "),m(3),_("ngbPopover",o),m(3),ce(" ",Qt(73,77,n.selectedAnimal.currentStats.power,"1.2-2")," "),m(3),_("ngbPopover",l),m(3),ce(" ",Qt(79,80,n.selectedAnimal.currentStats.focus,"1.2-2")," "),m(3),_("ngbPopover",c),m(3),ce(" ",Qt(85,83,n.selectedAnimal.currentStats.adaptability,"1.2-2")," "),m(3),Zi("ngbPopover",n.getDiminishingReturnsPopover()),m(3),ce(" ",Qt(91,86,n.diminishingReturnsAmount,"1.0-0")," "),m(7),Zi("ngbPopover",n.selectedAnimal.currentStats.maxSpeedMsPopover()),m(3),ce(" ",Qt(101,89,n.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),m(3),Zi("ngbPopover",n.selectedAnimal.currentStats.accelerationMsPopover()),m(3),ce(" ",Qt(107,92,n.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s "),m(3),Zi("ngbPopover",n.selectedAnimal.currentStats.staminaPopover()),m(3),ce(" ",Qt(113,95,n.selectedAnimal.currentStats.stamina,"1.2-2")," "),m(3),Zi("ngbPopover",n.selectedAnimal.currentStats.powerMsPopover()),m(3),ce(" ",Qt(119,98,n.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),m(3),Zi("ngbPopover",n.selectedAnimal.currentStats.focusMsPopover()),m(3),ce(" ~",Qt(125,101,n.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),m(3),Zi("ngbPopover",n.selectedAnimal.currentStats.adaptabilityMsPopover()),m(3),ce(" ~",Qt(131,104,n.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),m(3),Zi("ngbPopover",n.selectedAnimal.currentStats.burstChancePopover()),m(3),ce(" ",Qt(137,107,n.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),m(3),Zi("ngbPopover",n.selectedAnimal.currentStats.burstDistancePopover()),m(3),ce(" ",Qt(143,110,n.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),m(7),_("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromTraining>0),m(1),_("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces>0),m(1),_("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces>0),m(1),_("ngIf",n.selectedAnimal.miscStats.trainingTimeReduction>0),m(1),_("ngIf",n.selectedAnimal.miscStats.diminishingReturnsBonus>0),m(1),_("ngIf",n.selectedAnimal.miscStats.bonusTalents>0),m(3),_("ngbPopover",n.getAbilityPopover()),m(7),mt("filterActive",n.selectedAnimal.ability.name===n.ability1.name),m(1),ce("",n.ability1.name," "),m(1),_("ngIf",n.ability2.isAbilityPurchased),m(1),_("ngIf",n.ability3.isAbilityPurchased),m(4),_("ngbPopover",u),m(1),ce("Level ",n.selectedAbility.abilityLevel," "),m(2),_("ngIf",!n.abilityLevelMaxedOut),m(1),_("ngIf",n.abilityLevelMaxedOut),m(2),_("innerHTML",n.longDescription,Dn)}},directives:[Kt,ma,Bn,bl,kh,jc,Yc,lm,Q7,xh,bh,Xc,ri,nG],pipes:[ns],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:back;justify-content:space-between;flex-direction:column;display:flex}.equippable[_ngcontent-%COMP%]{justify-content:space-between;flex-direction:column;display:flex;grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-items:center;justify-content:stretch;grid-template-areas:"trainingStats racingStats miscStats"}.trainableStats[_ngcontent-%COMP%]{justify-self:left;grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}.miscStats[_ngcontent-%COMP%]{grid-area:miscStats}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedEquipmentSpan[_ngcontent-%COMP%], .selectedOrbSpan[_ngcontent-%COMP%], .selectedItemSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightAlign[_ngcontent-%COMP%]{float:right}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.typeContainer[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly}.talentTreeType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedTalentTree[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid;text-decoration:underline solid}.rowFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.abilityXp[_ngcontent-%COMP%]{margin-left:2.5rem}.talentColumn[_ngcontent-%COMP%]{width:31.75%}.talentContent[_ngcontent-%COMP%]{height:calc(100% - 5rem);height:-o-calc(100% - 5rem);border:1px solid rgba(0,0,0,.1)}.lastTalentContent[_ngcontent-%COMP%]{height:100%;border:1px solid rgba(0,0,0,.1)}.talentInfo[_ngcontent-%COMP%]{text-align:center}.talentSpacer[_ngcontent-%COMP%]{display:grid;grid-template:1fr / 1fr;place-items:center}.defaultTalentSpacer[_ngcontent-%COMP%]{height:5rem;border-right:solid thick rgba(0,0,0,.1);grid-column:1 / 1;grid-row:1 / 1;z-index:1}.completedFlatlandTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--flatlandColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedMountainTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--mountainColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedOceanTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--waterColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedTundraTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--tundraColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedVolcanicTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--volcanicColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.height0[_ngcontent-%COMP%]{height:0}.height1[_ngcontent-%COMP%]{height:1rem}.height2[_ngcontent-%COMP%]{height:2rem}.height3[_ngcontent-%COMP%]{height:3rem}.height4[_ngcontent-%COMP%]{height:4rem}.height5[_ngcontent-%COMP%]{height:5rem}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}.activeSelectedItem[_ngcontent-%COMP%], .activeSelectedEquipment[_ngcontent-%COMP%], .activeSelectedOrb[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.selectableItem[_ngcontent-%COMP%], .selectableOrb[_ngcontent-%COMP%], .selectableEquipment[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}']}),t})();function T9(t,i){1&t&&(g(0,"div",4)(1,"h2"),v(2,"Animals"),f(),g(3,"div",5),v(4," Select an animal to view its stats, change abilities, and more. "),f(),N(5,"hr"),f())}function D9(t,i){if(1&t){const e=fe();g(0,"div",6)(1,"app-animal-list",7),F("selectedAnimal",function(r){return X(e),T().selectedAnimal(r)}),f()()}if(2&t){const e=T();m(1),_("availableAnimals",e.availableAnimals)}}function R9(t,i){if(1&t){const e=fe();g(0,"div",8)(1,"app-selected-animal",9),F("returnEmitter",function(r){return X(e),T().returnToAnimalView(r)}),f()()}if(2&t){const e=T();m(1),_("selectedAnimal",e.animal)}}let x9=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Dt.animals),this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type&&(this.animalSelected=!0,this.animal=e)})}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,n){1&e&&(g(0,"div",0),x(1,T9,6,0,"div",1),x(2,D9,2,1,"div",2),x(3,R9,2,1,"div",3),f()),2&e&&(m(1),_("ngIf",!n.animalSelected),m(1),_("ngIf",!n.animalSelected),m(1),_("ngIf",n.animalSelected))},directives:[Kt,bf,S9],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;overflow:hidden;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}.selectedView[_ngcontent-%COMP%]{height:100%;overflow:auto}"]}),t})();function M9(t,i){if(1&t){const e=fe();g(0,"button",17),F("click",function(){X(e);const r=T().$implicit;return T().setAsAutoRunFreeRace(r)}),v(1,"Auto Run Free Race"),f()}}function k9(t,i){if(1&t){const e=fe();g(0,"button",18),F("click",function(){X(e);const r=T().$implicit;return T().setAsEventDeck(r)}),v(1,"Set as Event Team"),f()}}function A9(t,i){if(1&t){const e=fe();g(0,"div")(1,"div",7),N(2,"app-animal-deck",8),g(3,"div",9)(4,"button",10),F("click",function(){const a=X(e).$implicit,s=T(),o=rt(11);return s.editDeck(o,a)}),v(5,"Edit"),f()(),g(6,"div",11)(7,"button",12),F("click",function(){const a=X(e).$implicit;return T().setAsPrimary(a)}),v(8,"Set as Primary Team"),f()(),g(9,"div",13),x(10,M9,2,0,"button",14),f(),g(11,"div",15),x(12,k9,2,0,"button",16),f()(),N(13,"hr"),f()}if(2&t){const e=i.index,n=T();m(2),_("deckNumber",e+1),m(8),_("ngIf",n.showAutoRaceButton),m(2),_("ngIf",n.showEventButton)}}function P9(t,i){if(1&t){const e=fe();g(0,"div",35)(1,"input",36),F("input",function(){return X(e),T(2).toggleRaceOrder()}),f(),g(2,"label",37),F("click",function(){return X(e),T(2).toggleRaceOrder()}),v(3,"Race Order: "),f(),g(4,"span")(5,"span",38),F("dragstart",function(r){return X(e),T(2).dragStart(r)})("dragover",function(r){return X(e),T(2).allowDrop(r)})("drop",function(r){return X(e),T(2).dropCourseType(r)}),v(6),f(),v(7," / "),g(8,"span",39),F("dragstart",function(r){return X(e),T(2).dragStart(r)})("dragover",function(r){return X(e),T(2).allowDrop(r)})("drop",function(r){return X(e),T(2).dropCourseType(r)}),v(9),f(),v(10," / "),g(11,"span",40),F("dragstart",function(r){return X(e),T(2).dragStart(r)})("dragover",function(r){return X(e),T(2).allowDrop(r)})("drop",function(r){return X(e),T(2).dropCourseType(r)}),v(12),f(),v(13," / "),g(14,"span",41),F("dragstart",function(r){return X(e),T(2).dragStart(r)})("dragover",function(r){return X(e),T(2).allowDrop(r)})("drop",function(r){return X(e),T(2).dropCourseType(r)}),v(15),f(),v(16," / "),g(17,"span",42),F("dragstart",function(r){return X(e),T(2).dragStart(r)})("dragover",function(r){return X(e),T(2).allowDrop(r)})("drop",function(r){return X(e),T(2).dropCourseType(r)}),v(18),f()()()}if(2&t){const e=T(2);m(1),_("checked",e.isRaceOrderOn),m(4),_("ngClass",e.getColorClass(e.selectedDeckOrder[0])),m(1),nt(e.selectedDeckOrder[0]),m(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[1])),m(1),nt(e.selectedDeckOrder[1]),m(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[2])),m(1),nt(e.selectedDeckOrder[2]),m(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[3])),m(1),nt(e.selectedDeckOrder[3]),m(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[4])),m(1),nt(e.selectedDeckOrder[4])}}const E9=function(t,i,e,n,r,a){return{selectedCourseType:t,flatlandColor:i,mountainColor:e,waterColor:n,tundraColor:r,volcanicColor:a}};function I9(t,i){if(1&t){const e=fe();g(0,"span",43),F("click",function(){const a=X(e).$implicit;return T(2).filterType(a)}),v(1),f()}if(2&t){const e=i.$implicit,n=T(2);_("ngClass",function vC(t,i,e,n,r,a,s,o,l){const c=Yi()+t,u=Te(),d=Hr(u,c,e,n,r,a);return Ys(u,c+4,s,o)||d?Pa(u,c+6,l?i.call(l,e,n,r,a,s,o):i(e,n,r,a,s,o)):Sc(u,c+6)}(2,E9,n.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),m(1),ce(" ",e.trim()," ")}}const N9=function(t){return{selectedAnimal:t}};function O9(t,i){if(1&t){const e=fe();g(0,"span",44),F("click",function(){const a=X(e).$implicit;return T(2).selectAnimal(a)}),v(1),f()}if(2&t){const e=i.$implicit,n=T(2);_("ngClass",bi(2,N9,n.selectedAnimalName===e)),m(1),ce(" ",e.trim()," ")}}function V9(t,i){if(1&t){const e=fe();g(0,"div",19)(1,"form",20)(2,"div",21)(3,"h4",22),v(4),f(),g(5,"button",23),F("click",function(){return X(e).$implicit.dismiss()}),v(6,"X"),f()(),g(7,"div",24)(8,"div",25)(9,"label",26),v(10,"Relay Team Name: "),f(),N(11,"input",27),f(),x(12,P9,19,11,"div",28),N(13,"br"),g(14,"div",29),x(15,I9,2,9,"span",30),f(),N(16,"br"),g(17,"div",31),x(18,O9,2,4,"span",32),f()(),g(19,"div",33)(20,"button",34),F("click",function(){return X(e),T().saveDeck()}),v(21,"Save"),f()()()()}if(2&t){const e=T();m(1),_("formGroup",e.editDeckForm),m(3),ce("Edit ",e.selectedDeck.name,""),m(8),_("ngIf",e.displayRaceOrder),m(3),_("ngForOf",e.raceCourseTypeList),m(3),_("ngForOf",e.possibleAnimalsList)}}let F9=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.modalService=n,this.lookupService=r,this.componentCommunicationService=a,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new Rh({deckName:new em("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.componentCommunicationService.setNewView(Dt.relayTeams),this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var n=this.lookupService.getResourceByName("Team Manager");null==n&&(n=0),this.showAutoRaceButton=n>0,this.showEventButton=!!this.lookupService.isItemUnlocked("grandPrix")}editDeck(e,n){this.selectedDeck=n,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=n.isCourseOrderActive,null!=n.courseTypeOrder&&n.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],n.courseTypeOrder.forEach(r=>{r===H.Flatland&&this.selectedDeckOrder.push("Flatland"),r===H.Mountain&&this.selectedDeckOrder.push("Mountain"),r===H.Ocean&&this.selectedDeckOrder.push("Ocean"),r===H.Tundra&&this.selectedDeckOrder.push("Tundra"),r===H.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),n.selectedAnimals.length>0&&n.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:n.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,n,r,a,s,o,l,c,u=this.globalService.globalVar.animalDecks.find(S=>S.deckNumber===this.selectedDeck.deckNumber);if(null!=u&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(n=this.editDeckForm.get("deckName"))||void 0===n?void 0:n.value.length)>=1&&(u.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),u.selectedAnimals=[],this.newAnimalList.forEach(S=>{null==u||u.selectedAnimals.push(S)}),null==u||u.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var d=[],h=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,p=null===(s=document.getElementById("raceOrder2"))||void 0===s?void 0:s.innerHTML,b=null===(o=document.getElementById("raceOrder3"))||void 0===o?void 0:o.innerHTML,y=null===(l=document.getElementById("raceOrder4"))||void 0===l?void 0:l.innerHTML,w=null===(c=document.getElementById("raceOrder5"))||void 0===c?void 0:c.innerHTML;d.push(h),d.push(p),d.push(b),d.push(y),d.push(w),null!=u&&(u.courseTypeOrder=[]),d.forEach(S=>{"Flatland"===S&&(null==u||u.courseTypeOrder.push(H.Flatland)),"Mountain"===S&&(null==u||u.courseTypeOrder.push(H.Mountain)),"Ocean"===S&&(null==u||u.courseTypeOrder.push(H.Ocean)),"Tundra"===S&&(null==u||u.courseTypeOrder.push(H.Tundra)),"Volcanic"===S&&(null==u||u.courseTypeOrder.push(H.Volcanic))})}this.modalService.dismissAll()}compare(e,n){return e.raceCourseType>n.raceCourseType?1:n.raceCourseType>e.raceCourseType?-1:0}filterType(e){var n=this.lookupService.getAnimalsByRaceCourseType(e),r=[];n.length>0&&n.forEach(s=>{var o=this.globalService.globalVar.animals.find(l=>l.getAnimalType()===s);(null==o?void 0:o.isAvailable)&&r.push(o.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(s=>s.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var n=this.globalService.globalVar.animals.find(s=>s.getAnimalType()===e);if(null!=n){var r=-1,a=n.getRaceCourseType();this.newAnimalList.forEach(s=>{s.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(s))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===n.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(n),this.selectedAnimalName=n.getAnimalType())}}setAsPrimary(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}setAsEventDeck(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.isEventDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.isEventDeck=!1),r.isEventDeck=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.getData("text"),r=document.getElementById(n),a=e.target.innerHTML;if(null!==r&&null!==a){var l=this.selectedDeckOrder.indexOf(a),c=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[l]=r.innerHTML,this.selectedDeckOrder[c]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(ls),k(hn),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"event"],["class","eventButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"eventButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"animalContainer"],["class","animalOption clickableText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText",3,"ngClass","click"],[1,"animalOption","clickableText",3,"ngClass","click"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),v(5,"Relay Teams"),f(),g(6,"div",4),v(7," Relay Teams are groups of animals that run together in a race. As you rise through the ranks, races will have multiple legs of varying terrain that require you to use different animals to succeed. Each Relay Team consists of one animal from each course type. Your primary Relay Team is the one that will run the races you select. "),f(),N(8,"hr"),f(),x(9,A9,14,3,"div",5),f()()(),x(10,V9,22,5,"ng-template",null,6,ot)),2&e&&(m(9),_("ngForOf",n.animalDecks))},directives:[ri,yv,Kt,xh,bh,Mh,bl,kh,jc,rm,Bn],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.animalOption[_ngcontent-%COMP%]{display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:60% 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace ." "deck edit primary event"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.eventButton[_ngcontent-%COMP%], .editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%;margin-bottom:.5rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}']}),t})();function B9(t,i){if(1&t&&(g(0,"span"),v(1),f()),2&t){const e=T(2);m(1),ce("",e.selectedItem.numberPurchasing," ")}}function L9(t,i){if(1&t&&(g(0,"em"),v(1),f()),2&t){const e=T(2);m(1),ce(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function U9(t,i){if(1&t&&(g(0,"span"),v(1),f()),2&t){const e=T(2);m(1),ce(" x ",e.buyMultiplierAmount,"")}}function H9(t,i){if(1&t){const e=fe();g(0,"div",3)(1,"span",4),x(2,B9,2,1,"span",5),v(3),f(),x(4,L9,2,1,"em",5),N(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),g(10,"div",7),v(11),f(),N(12,"br"),g(13,"button",8),F("click",function(){return X(e),T().BuyItem()}),v(14,"Buy "),x(15,U9,2,1,"span",5),f()()}if(2&t){const e=T();_("ngbPopover",rt(3)),m(1),_("ngClass",e.colorConditional),m(1),_("ngIf",e.displayNumberPurchasing),m(1),ce(" ",e.displayName,""),m(1),_("ngIf",e.selectedItem.totalShopQuantity>1),m(3),_("innerHTML",e.shortDescription,Dn),m(4),ce(" ",e.purchaseResourcesRequired," "),m(2),_("disabled",!e.canAffordItem),m(2),_("ngIf",e.buyMultiplierAmount>1)}}function G9(t,i){if(1&t&&(g(0,"span"),v(1),f()),2&t){const e=T(2);m(1),ce("",e.selectedItem.numberPurchasing," ")}}function j9(t,i){if(1&t&&(g(0,"em"),v(1),f()),2&t){const e=T(2);m(1),ce(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function z9(t,i){if(1&t&&(g(0,"span"),v(1),f()),2&t){const e=T(2);m(1),ce(" x ",e.buyMultiplierAmount,"")}}function $9(t,i){if(1&t){const e=fe();g(0,"div",9)(1,"span",4),x(2,G9,2,1,"span",5),v(3),f(),x(4,j9,2,1,"em",5),N(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),g(10,"div",7),v(11),f(),N(12,"br"),g(13,"button",8),F("click",function(){return X(e),T().BuyItem()}),v(14,"Buy "),x(15,z9,2,1,"span",5),f()()}if(2&t){const e=T();m(1),_("ngClass",e.colorConditional),m(1),_("ngIf",e.displayNumberPurchasing),m(1),nt(e.displayName),m(1),_("ngIf",e.selectedItem.totalShopQuantity>1),m(3),_("innerHTML",e.shortDescription,Dn),m(4),ce(" ",e.purchaseResourcesRequired," "),m(2),_("disabled",!e.canAffordItem),m(2),_("ngIf",e.buyMultiplierAmount>1)}}function W9(t,i){if(1&t&&(g(0,"div",10),N(1,"span",6),f()),2&t){const e=T();m(1),_("innerHTML",e.longDescription,Dn)}}let q9=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.gameLoopService=r,this.itemPurchased=new Ke,this.canAffordItem=!0,this.displayNumberPurchasing=!1,this.displayName="",this.buyMultiplierAmount=1}keyEventDown(e){(this.selectedItem.type===Y.Consumable||this.selectedItem.type===Y.Food||this.selectedItem.type===Y.Equipment||this.selectedItem.type===Y.Resources)&&("Shift"===e.key&&(e.preventDefault(),this.shiftPressed||(this.buyMultiplierAmount*=25,this.shiftPressed=!0)),"Control"===e.key&&(e.preventDefault(),this.ctrlPressed||(this.buyMultiplierAmount*=10,this.ctrlPressed=!0)),"Alt"===e.key&&(e.preventDefault(),this.altPressed||(this.buyMultiplierAmount*=100,this.altPressed=!0)))}keyEventUp(e){e.preventDefault(),(this.selectedItem.type===Y.Consumable||this.selectedItem.type===Y.Food||this.selectedItem.type===Y.Equipment||this.selectedItem.type===Y.Resources)&&("Shift"===e.key&&this.shiftPressed&&(this.buyMultiplierAmount/=25,this.shiftPressed=!1),"Control"===e.key&&this.ctrlPressed&&(this.buyMultiplierAmount/=10,this.ctrlPressed=!1),"Alt"===e.key&&this.altPressed&&(this.buyMultiplierAmount/=100,this.altPressed=!1))}ngOnInit(){var e=this;if(this.buyMultiplierAmount=1,this.selectedItem.type===Y.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===Y.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.displayName=this.selectedItem.name,this.selectedItem.type===Y.Animal&&void 0!==(n=this.globalService.globalVar.animals.find(a=>a.name===this.selectedItem.name))&&(this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()}),this.selectedItem.type===Y.Ability){var n,r=this.selectedItem.name.split(" ")[0].trim();""!==r&&void 0!==(n=this.globalService.globalVar.animals.find(s=>s.getAnimalType()===r))&&(this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()})}this.selectedItem.type===Y.Food&&1===this.selectedItem.numberPurchasing&&("Apples"===this.displayName&&(this.displayName="Apple"),"Oranges"===this.displayName&&(this.displayName="Orange"),"Bananas"===this.displayName&&(this.displayName="Banana"),"Strawberries"===this.displayName&&(this.displayName="Strawberry"),"Carrots"===this.displayName&&(this.displayName="Carrot"),"Turnips"===this.displayName&&(this.displayName="Turnip"),"Mangoes"===this.displayName&&(this.displayName="Mango")),(this.selectedItem.type===Y.Food||this.selectedItem.type===Y.Resources)&&(this.displayNumberPurchasing=!0),this.amountSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Xr(function*(){e.selectedItem.purchasePrice.forEach(a=>{var s=a.name;1===a.amount&&("Tokens"===s&&(s="Token"),"Medals"===s&&(s="Medal")),e.purchaseResourcesRequired=a.amount.toLocaleString()+" "+s+", ";var o=e.lookupService.getResourceByName(a.name);e.canAffordItem=!(o<a.amount*e.buyMultiplierAmount)}),e.purchaseResourcesRequired.length>0&&(e.purchaseResourcesRequired=e.purchaseResourcesRequired.substring(0,e.purchaseResourcesRequired.length-2))}))}BuyItem(){this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===Y.Animal&&this.buyAnimal(),this.selectedItem.type===Y.Food?this.buyFood():this.selectedItem.type===Y.Training&&this.buyTraining(),this.selectedItem.type===Y.Specialty?this.buySpecialty():this.selectedItem.type===Y.Ability&&this.buyAbility(),this.selectedItem.type===Y.Equipment&&this.buyEquipment(),this.selectedItem.type===Y.Consumable&&this.buyConsumable(),this.selectedItem.type===Y.Resources&&this.buyResources(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){var e=!0;return this.selectedItem.purchasePrice.forEach(n=>{this.lookupService.getResourceByName(n.name)<n.amount*this.buyMultiplierAmount&&(e=!1)}),e}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount*this.buyMultiplierAmount)})}buyAnimal(){var e=this.globalService.globalVar.animals.find(o=>o.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var n=this.globalService.globalVar.shop.find(o=>"Abilities"===o.name);if(null!=n){var r=n.itemList.filter(o=>o.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(o=>{o.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);if(null!=a){var s=!1;a.selectedAnimals.forEach(o=>{o.raceCourseType===(null==e?void 0:e.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(n=>n.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new be(this.selectedItem.name,e,Y.Food))}buySpecialty(){var e,a;if(this.selectedItem.amountPurchased+=1,"Whistle"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(l=>"Specialty"===l.name))){var n=e.itemList.find(l=>"Golden Whistle"===l.name);null!=n&&(n.isAvailable=!0)}if("National Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0,null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name)))){var r=e.itemList.find(c=>"International Races"===c.name);null!=r&&(r.isAvailable=!0)}if("Incubator Upgrade Lv1"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))&&null!=(a=e.itemList.find(c=>"Incubator Upgrade Lv2"===c.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv2"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv3"===u.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv3"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv4"===u.name))&&(a.isAvailable=!0),"Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased){var s=this.globalService.globalVar.animalDecks.find(l=>l.isPrimaryDeck);null!=s&&(s.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(l=>l.name===this.selectedItem.name)){var o=this.globalService.globalVar.resources.find(l=>l.name===this.selectedItem.name);null!=o&&(o.amount+=1)}else this.globalService.globalVar.resources.push(new be(this.selectedItem.name,1,Y.Specialty));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(l=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?l.amount+=this.selectedItem.quantityAdditive:l.amount*=this.selectedItem.quantityMultiplier,"Team Manager"===this.selectedItem.name&&l.amount>5e3&&(l.amount=5e3)})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),n=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==n){var r=this.globalService.globalVar.animals.find(s=>s.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(s=>s.name===n);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new be(this.selectedItem.name,e,Y.Equipment))}buyConsumable(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new be(this.selectedItem.name,e,Y.Consumable))}buyResources(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new be(this.selectedItem.name,e,Y.Resources))}ngOnDestroy(){null!=this.amountSubscription&&this.amountSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(hn),k(yi))},t.\u0275cmp=st({type:t,selectors:[["app-shopping-item"]],hostBindings:function(e,n){1&e&&F("keydown",function(a){return n.keyEventDown(a)},!1,Xa)("keyup",function(a){return n.keyEventUp(a)},!1,Xa)},inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:4,vars:2,consts:[["class","item","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","item",4,"ngIf"],["longDescriptionContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[1,"keyword",3,"ngClass"],[4,"ngIf"],[3,"innerHTML"],[1,"resourceKeyword"],[3,"disabled","click"],[1,"item"],[1,"popoverClass"]],template:function(e,n){1&e&&(x(0,H9,16,9,"div",0),x(1,$9,16,8,"div",1),x(2,W9,2,1,"ng-template",null,2,ot)),2&e&&(_("ngIf",""!==n.longDescription&&null!=n.longDescription),m(1),_("ngIf",""===n.longDescription||null==n.longDescription))},directives:[Kt,ma,Bn],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();function X9(t,i){if(1&t){const e=fe();g(0,"td",8)(1,"div")(2,"app-shopping-item",9),F("itemPurchased",function(r){return X(e),T(3).itemPurchased(r)}),f()()()}if(2&t){const e=i.$implicit;m(2),_("selectedItem",e)}}function Y9(t,i){if(1&t&&(g(0,"tr"),x(1,X9,3,1,"td",7),f()),2&t){const e=i.$implicit;m(1),_("ngForOf",e)}}function Q9(t,i){if(1&t&&(g(0,"table"),x(1,Y9,2,1,"tr",6),f()),2&t){const e=T();m(1),_("ngForOf",e.itemsRows)}}function K9(t,i){1&t&&(g(0,"div",10),N(1,"br"),g(2,"span"),v(3,"Fresh out! Check back again in the future to see if more items are added!"),f(),N(4,"br"),f())}const Z9=function(t){return{tokenShopColor:t}};let HR=(()=>{class t{constructor(e){this.globalService=e,this.shopsEnum=Ga}ngOnInit(){null==this.shopType&&(this.shopType=Ga.regular),this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var n=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&n.push(a)});for(var r=1;r<=n.length;r++)this.itemsCells.push(n[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems()}}return t.\u0275fac=function(e){return new(e||t)(k(yt))},t.\u0275cmp=st({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,n){1&e&&F("resize",function(a){return n.onResize(a)},!1,Xa)},inputs:{section:"section",shopType:"shopType"},decls:8,vars:6,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor",3,"ngClass"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngIf"],["class","centered","c","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"],["c","",1,"centered"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"span",2),v(3),f()(),g(4,"div",3),x(5,Q9,2,1,"table",4),x(6,K9,5,0,"div",5),N(7,"br"),f()()),2&e&&(m(1),_("ngClass",bi(4,Z9,n.shopType===n.shopsEnum.token)),m(2),nt(n.section.name),m(2),_("ngIf",n.itemsRows.length>0),m(1),_("ngIf",0===n.itemsRows.length))},directives:[Bn,Kt,ri,q9],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.tokenShopColor[_ngcontent-%COMP%]{background-color:var(--tokenShopColor)!important}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.centered[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function J9(t,i){if(1&t&&(g(0,"div",8),N(1,"app-shopping-list",9),f()),2&t){const e=i.$implicit,n=T();m(1),_("section",e)("shopType",n.shopType)}}function ej(t,i){if(1&t&&(g(0,"div",10),N(1,"hr"),g(2,"em"),v(3),g(4,"span",11),v(5,"Renown"),f()()()),2&t){const e=T();m(3),ce("Next tier unlocked at ",e.lookupService.getRenownRequiredForEventShopTier(e.highestTierUnlocked+1)," ")}}let tj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.gameLoopService=r,this.componentCommunicationService=a,this.highestTierUnlocked=0,this.maxTiers=3,this.shopType=Ga.token,this.currentTokens=0}ngOnInit(){var e=this;this.highestTierUnlocked=this.lookupService.getHighestEventShopTierUnlocked(),this.getShopOptions(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(Xr(function*(){e.currentTokens=e.lookupService.getTokens()}))}getShopOptions(){this.sections=[];var e=this.globalService.globalVar.tokenShop.find(a=>"Tier 1"===a.name);void 0!==e&&this.highestTierUnlocked>=1&&this.sections.push(e);var n=this.globalService.globalVar.tokenShop.find(a=>"Tier 2"===a.name);void 0!==n&&this.highestTierUnlocked>=2&&this.sections.push(n);var r=this.globalService.globalVar.tokenShop.find(a=>"Tier 3"===a.name);void 0!==r&&this.highestTierUnlocked>=3&&this.sections.push(r)}returnToEventRaceView(){this.componentCommunicationService.setRaceView(Dt.raceselection,Fe.event)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(hn),k(yi),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-token-shop-view"]],decls:15,vars:3,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"back"],[3,"click"],["class","shopSection",4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],[1,"shopSection"],[3,"section","shopType"],[1,"centered"],[1,"progressionKeyword"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),v(5,"Token Shop"),f(),g(6,"span"),v(7),f()(),g(8,"div",4)(9,"button",5),F("click",function(){return n.returnToEventRaceView()}),v(10,"Back To Event"),f()()()(),N(11,"br"),x(12,J9,2,2,"div",6),N(13,"br"),x(14,ej,6,1,"div",7),f()),2&e&&(m(7),ce("Tokens: ",n.currentTokens,""),m(5),_("ngForOf",n.sections),m(2),_("ngIf",n.highestTierUnlocked<n.maxTiers))},directives:[ri,HR,Kt],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}']}),t})();function nj(t,i){if(1&t&&(g(0,"div",16),N(1,"app-shopping-list",17),f()),2&t){const e=i.$implicit;m(1),_("section",e)}}function ij(t,i){if(1&t){const e=fe();g(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),v(5,"Shop"),f()()(),g(6,"div",6)(7,"p",7),v(8,"Filters:"),f(),g(9,"p",8),F("click",function(){return X(e),T().toggleShopFilter("Animals")}),v(10,"Animals"),f(),g(11,"p",9),F("click",function(){return X(e),T().toggleShopFilter("Trainings")}),v(12," Trainings"),f(),g(13,"p",10),F("click",function(){return X(e),T().toggleShopFilter("Equipment")}),v(14,"Equipment "),f(),g(15,"p",11),F("click",function(){return X(e),T().toggleShopFilter("Food")}),v(16,"Food"),f(),g(17,"p",12),F("click",function(){return X(e),T().toggleShopFilter("Specialty")}),v(18," Specialty"),f(),g(19,"p",13),F("click",function(){return X(e),T().toggleShopFilter("Abilities")}),v(20," Abilities"),f()(),g(21,"div",14),F("click",function(){return X(e),T().ResetShopFilters()}),v(22," Reset Filters "),f()(),N(23,"br"),x(24,nj,2,1,"div",15),f()}if(2&t){const e=T();m(9),mt("filterActive",e.filterAnimals),m(2),mt("filterActive",e.filterTrainings),m(2),mt("filterActive",e.filterEquipment),m(2),mt("filterActive",e.filterFood),m(2),mt("filterActive",e.filterSpecialty),m(2),mt("filterActive",e.filterAbilities),m(5),_("ngForOf",e.sections)}}function rj(t,i){1&t&&(g(0,"div"),N(1,"app-token-shop-view"),f())}let aj=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1,this.ShopsEnum=Ga}ngOnInit(){this.componentCommunicationService.setNewView(Dt.shop),this.getShopOptions(),this.subscription=this.componentCommunicationService.getShopView().subscribe(e=>{this.activeShopView=e})}getShopOptions(){this.sections=[];var e=this.filtersActive(),n=this.globalService.globalVar.shop.find(c=>"Animals"===c.name&&(!e||e&&this.filterAnimals));void 0!==n&&this.sections.push(n);var r=this.globalService.globalVar.shop.find(c=>"Trainings"===c.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(c=>"Equipment"===c.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var s=this.globalService.globalVar.shop.find(c=>"Food"===c.name&&(!e||e&&this.filterFood));void 0!==s&&this.sections.push(s);var o=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name&&(!e||e&&this.filterSpecialty));void 0!==o&&this.sections.push(o);var l=this.globalService.globalVar.shop.find(c=>"Abilities"===c.name&&(!e||e&&this.filterAbilities));void 0!==l&&this.sections.push(l)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-shop-view"]],decls:2,vars:2,consts:[["class","shopView",4,"ngIf"],[4,"ngIf"],[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText",3,"click"],["id","trainingsFilter",1,"clickableText",3,"click"],["id","equipmentFilter",1,"clickableText",3,"click"],["id","foodFilter",1,"clickableText",3,"click"],["id","specialtyFilter",1,"clickableText",3,"click"],["id","abilitiesFilter",1,"clickableText",3,"click"],[1,"centered","clickableText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section"]],template:function(e,n){1&e&&(x(0,ij,25,13,"div",0),x(1,rj,2,0,"div",1)),2&e&&(_("ngIf",n.activeShopView===n.ShopsEnum.regular),m(1),_("ngIf",n.activeShopView===n.ShopsEnum.token))},directives:[Kt,ri,HR,tj],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"title animalsFilter trainingsFilter facilityFilter foodFilter specialtyFilter enhancerFilter"}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}']}),t})(),sj=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel(),this.maxNegativePercent=25;var e=this.globalService.globalVar.modifiers.find(n=>"maximumTraitNegativePercentModifier"===n.text);void 0!==e&&(this.maxNegativePercent=e.value)}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(hn))},t.\u0275cmp=st({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName","keyword"],[1,"traitStats"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"p",1),v(2),f(),g(3,"p",2),v(4),f()()),2&e&&(m(2),nt(n.trait.traitName),m(2),nt(n.trait.getStatGainDescription(n.maxNegativePercent)))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const oj=function(t){return{activeTrait:t}};function lj(t,i){if(1&t){const e=fe();g(0,"td",4)(1,"div",5),F("click",function(){const a=X(e).$implicit;return T(2).selectTrait(a)}),N(2,"app-trait-option",6),f()()}if(2&t){const e=i.$implicit;m(1),_("ngClass",bi(2,oj,e.isSelected)),m(1),_("trait",e)}}function cj(t,i){if(1&t&&(g(0,"tr"),x(1,lj,3,4,"td",3),f()),2&t){const e=i.$implicit;m(1),_("ngForOf",e)}}let uj=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new Ke}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableTraits.length;n++)this.traitsCells.push(this.availableTraits[n-1]),n%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(n=>{n.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(k(yt))},t.\u0275cmp=st({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,n){1&e&&F("resize",function(a){return n.onResize(a)},!1,Xa)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[ki],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"table"),x(3,cj,2,1,"tr",2),f()()()),2&e&&(m(3),_("ngForOf",n.traitsRows))},directives:[ri,Bn,sj],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function dj(t,i){if(1&t&&(g(0,"span"),v(1),f()),2&t){const e=T(2);m(1),nt(e.selectedAnimal.name)}}function hj(t,i){if(1&t){const e=fe();g(0,"div",20),F("click",function(){return X(e),T().goToAnimal()}),x(1,dj,2,1,"span",6),N(2,"br"),g(3,"span"),v(4),f()()}if(2&t){const e=T();_("ngClass",e.colorConditional),m(1),_("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),m(3),nt(e.selectedAnimal.getAnimalType())}}function fj(t,i){if(1&t){const e=fe();g(0,"div",20),F("click",function(){return X(e),T().goToAnimal()}),g(1,"span"),v(2),f()()}if(2&t){const e=T();_("ngClass",e.colorConditional),m(2),nt(e.selectedAnimal.getAnimalType())}}function pj(t,i){if(1&t&&(g(0,"span",21),v(1),f()),2&t){const e=T();m(1),ce("",e.existingTrait.traitName," ")}}function gj(t,i){1&t&&(g(0,"span"),v(1,"No Trait Assigned"),f())}function mj(t,i){if(1&t&&(g(0,"div"),N(1,"br"),g(2,"p",22),N(3,"ngb-progressbar",23),g(4,"span",24),v(5),At(6,"number"),f()(),N(7,"br"),f()),2&t){const e=T();m(3),_("value",e.trainingProgressBarPercent),m(2),ce("",Qt(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let vj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.componentCommunicationService=a,this.returnEmitter=new Ke,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var n=this.availableTraits.find(r=>{var a;return(null===(a=this.existingTrait)||void 0===a?void 0:a.traitName)===r.traitName});null!=n&&(n.isSelected=!0)}this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.incubator;if(null==a.assignedAnimal||null==a.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(s=>{s.isSelected=!1});this.trainingProgressBarPercent=a.timeTrained/a.timeToComplete*100})}selectNewTrait(e){var n=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=n,this.existingTrait=n,this.selectedAnimal.currentTraining=null,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],n=this.lookupService.getResearchLevel();return e.push(new nn("Alert",1,n,me.focus,me.endurance)),e.push(new nn("Sharp",1,n,me.adaptability,me.power)),e.push(new nn("Bulky",1,n,me.power,me.topSpeed)),e.push(new nn("Curious",3,n,me.acceleration,me.focus)),e.push(new nn("Adamant",3,n,me.topSpeed,me.acceleration)),e.push(new nn("Stoic",5,n,me.endurance,me.adaptability)),e.push(new nn("Smart",5,n,me.focus,me.power)),e.push(new nn("Careful",7,n,me.adaptability,me.acceleration)),e.push(new nn("Attentive",7,n,me.power,me.endurance)),e.push(new nn("Keen",9,n,me.acceleration,me.topSpeed)),e.push(new nn("Quick",9,n,me.topSpeed,me.adaptability)),e.push(new nn("Tough",11,n,me.endurance,me.focus)),e.push(new nn("Solitary",11,n,me.focus,me.acceleration)),e.push(new nn("Cautious",13,n,me.adaptability,me.topSpeed)),e.push(new nn("Wild",13,n,me.power,me.focus)),e.push(new nn("Clumsy",15,n,me.acceleration,me.adaptability)),e.push(new nn("Natural",15,n,me.topSpeed,me.endurance)),e.push(new nn("Resilient",17,n,me.endurance,me.power)),e.push(new nn("Anxious",17,n,me.focus,me.topSpeed)),e.push(new nn("Lucky",19,n,me.adaptability,me.focus)),e.push(new nn("Rugged",19,n,me.power,me.adaptability)),e.push(new nn("Naive",21,n,me.acceleration,me.endurance)),e.push(new nn("Sprightly",21,n,me.topSpeed,me.power)),e.push(new nn("Stout",23,n,me.endurance,me.acceleration)),e.push(new nn("Pensive",23,n,me.focus,me.adaptability)),e.push(new nn("Languid",25,n,me.adaptability,me.endurance)),e.push(new nn("Mighty",25,n,me.power,me.acceleration)),e.push(new nn("Nimble",27,n,me.acceleration,me.power)),e.push(new nn("Small",27,n,me.topSpeed,me.focus)),e.push(new nn("Resolute",29,n,me.endurance,me.topSpeed)),(e=e.filter(r=>n>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===me.topSpeed||this.filterAcceleration&&r.positiveStatGain===me.acceleration||this.filterEndurance&&r.positiveStatGain===me.endurance||this.filterPower&&r.positiveStatGain===me.power||this.filterFocus&&r.positiveStatGain===me.focus||this.filterAdaptability&&r.positiveStatGain===me.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}goToAnimal(){this.componentCommunicationService.setAnimalView(Dt.animals,this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(yi),k(hn),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-incubator-traits"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:40,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],["class","activeTrait",4,"ngIf"],[4,"ngIf"],[1,"back"],[3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText"],["id","speedFilter",3,"click"],["id","accelerationFilter",3,"click"],["id","enduranceFilter",3,"click"],["id","powerFilter",3,"click"],["id","focusFilter",3,"click"],["id","adaptabilityFilter",3,"click"],[3,"availableTraits","selectedTrait"],[1,"clickableText","keyword",3,"ngClass","click"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(4,hj,5,3,"div",4),x(5,fj,3,2,"div",4),g(6,"span"),v(7),f(),N(8,"hr"),x(9,pj,2,1,"span",5),x(10,gj,2,0,"span",6),f(),g(11,"div",7)(12,"button",8),F("click",function(){return n.returnToAnimalView()}),v(13,"Back"),f()()(),N(14,"hr"),x(15,mj,8,5,"div",6),N(16,"br")(17,"br"),g(18,"div",9)(19,"div",10)(20,"span",8),F("click",function(){return n.resetFilters()}),v(21,"Reset Filters"),f()(),g(22,"div",11)(23,"span"),v(24,"Choose New Trait"),f()(),g(25,"div",12)(26,"span",13),F("click",function(){return n.toggleStatFilter("Speed")}),v(27,"SPD "),f(),g(28,"span",14),F("click",function(){return n.toggleStatFilter("Acceleration")}),v(29,"ACC "),f(),g(30,"span",15),F("click",function(){return n.toggleStatFilter("Endurance")}),v(31,"END "),f(),g(32,"span",16),F("click",function(){return n.toggleStatFilter("Power")}),v(33,"PWR "),f(),g(34,"span",17),F("click",function(){return n.toggleStatFilter("Focus")}),v(35,"FCS "),f(),g(36,"span",18),F("click",function(){return n.toggleStatFilter("Adaptability")}),v(37,"ADP"),f()()(),N(38,"br"),g(39,"app-trait-list",19),F("selectedTrait",function(a){return n.selectNewTrait(a)}),f()()()),2&e&&(m(4),_("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),m(1),_("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),m(2),ce("Current Trait: ",n.selectedAnimal.getTraitName(),""),m(2),_("ngIf",null!=n.existingTrait),m(1),_("ngIf",null==n.existingTrait),m(5),_("ngIf",null!=n.existingTrait),m(11),mt("filterActive",n.filterSpeed),m(2),mt("filterActive",n.filterAcceleration),m(2),mt("filterActive",n.filterEndurance),m(2),mt("filterActive",n.filterPower),m(2),mt("filterActive",n.filterFocus),m(2),mt("filterActive",n.filterAdaptability),m(3),_("availableTraits",n.availableTraits))},directives:[Kt,Bn,_v,uj],pipes:[ns],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}']}),t})();function bj(t,i){1&t&&(g(0,"div",3)(1,"h2"),v(2,"Incubator"),f(),g(3,"div",4),v(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),f(),N(5,"hr"),f())}function _j(t,i){if(1&t){const e=fe();g(0,"div",7)(1,"div")(2,"app-animal-list",8),F("selectedAnimal",function(r){return X(e),T(2).selectedAnimal(r)}),f()()()}if(2&t){const e=T(2);m(2),_("availableAnimals",e.availableAnimals)}}function yj(t,i){if(1&t){const e=fe();g(0,"div",9)(1,"app-incubator-traits",10),F("returnEmitter",function(r){return X(e),T(2).returnToAnimalView(r)}),f()()}if(2&t){const e=T(2);m(1),_("selectedAnimal",e.animal)}}function Cj(t,i){if(1&t&&(g(0,"div"),x(1,_j,3,1,"div",5),x(2,yj,2,1,"div",6),f()),2&t){const e=T();m(1),_("ngIf",!e.animalSelected),m(1),_("ngIf",e.animalSelected)}}function wj(t,i){1&t&&(g(0,"div"),v(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),f())}let Sj=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.componentCommunicationService=r,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Dt.incubator),this.availableAnimals=this.globalService.globalVar.animals.filter(n=>n.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(hn),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,n){1&e&&(g(0,"div",0),x(1,bj,6,0,"div",1),x(2,Cj,3,2,"div",2),x(3,wj,2,0,"div",2),f()),2&e&&(m(1),_("ngIf",!n.animalSelected),m(1),_("ngIf",n.researchLevel>0),m(1),_("ngIf",0===n.researchLevel))},directives:[Kt,bf,vj],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})();function Tj(t,i){if(1&t){const e=fe();g(0,"div")(1,"div")(2,"div",4)(3,"button",5),F("click",function(){return X(e),T().expandAnswer("faqAnswer4")}),v(4,"+"),f()(),g(5,"div",6)(6,"p"),v(7,"What is the Incubator? How does the Incubator Upgrade item work?"),f()()(),g(8,"div",14),N(9,"div",4),g(10,"p"),v(11,"Once you've successfully completed a Duo Race, you will have access to the Incubator. The Incubator lets you select a trait for an individual animal that lets your customize your stats further. A trait increases one stat and decreases another. As you increase your Research Level by completing Duo Races, you will unlock new traits and increase the amount the traits increase/decrease your stats. Note that traits will only decrease the chosen stat by a maximum of 25%. "),N(12,"br")(13,"br"),v(14," The Incubator Upgrade item gives you even further control over how you build your animals and allows newer animals to quickly catch up to ones of higher breed level. After purchasing this item, every time you breed you will gain a permanent increase to the stat your trait currently is providing you. The increase amount depends on your current Research Level. For example: "),N(15,"br")(16,"br"),v(17," If you have a Research Level of 15 and apply the "),g(18,"span",15),v(19,"Alert"),f(),v(20," trait to your Horse, it will gain 15% "),g(21,"span",15),v(22,"Focus"),f(),v(23," and lose 15% "),g(24,"span",15),v(25,"Endurance"),f(),v(26," through the trait itself. "),N(27,"br"),g(28,"em"),v(29,"If you have Incubator Upgrade Level 1:"),f(),v(30," each time you Breed your Horse, it will gain an additional modifier of .01 to its "),g(31,"span",15),v(32,"Focus"),f(),v(33," stat. Incubator Upgrade Level 1 only allows for the first 10% of your trait value to contribute to the modifier. "),N(34,"br"),g(35,"em"),v(36,"If you have Incubator Upgrade Level 2:"),f(),v(37," each time you Breed your Horse, it will gain an additional modifier of .015 to its "),g(38,"span",15),v(39,"Focus"),f(),v(40," stat. Incubator Upgrade Level 2 allows for the first 25% of your trait value to contribute to the modifier. Because your trait value is only 15%, it will contribute in its entirety. "),f()(),N(41,"hr"),f()}}let Dj=(()=>{class t{constructor(e,n){this.componentCommunicationService=e,this.lookupService=n,this.seeAttractionSpoiler=!1,this.seeResearchCenterSpoiler=!1}ngOnInit(){this.componentCommunicationService.setNewView(Dt.faqs),this.lookupService.isItemUnlocked("attractionSpecialization")&&(this.seeAttractionSpoiler=!0),this.lookupService.isItemUnlocked("researchCenterSpecialization")&&(this.seeResearchCenterSpoiler=!0)}viewSpoiler(e){"Attraction Specialization"===e&&(this.seeAttractionSpoiler=!0),"Research Center Specialization"===e&&(this.seeResearchCenterSpoiler=!0)}expandAnswer(e){var n=document.getElementById(e);null!=n&&n.classList.toggle("hide")}}return t.\u0275fac=function(e){return new(e||t)(k(Qn),k(hn))},t.\u0275cmp=st({type:t,selectors:[["app-faq-view"]],decls:89,vars:7,consts:[[1,"faqView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"expanderMargin"],["type","button","aria-label","Expand",3,"click"],[1,"faqQuestion"],["id","faqAnswer1",1,"faqAnswer","hide"],["id","faqAnswer2",1,"faqAnswer","hide"],["id","faqAnswer3",1,"faqAnswer","hide"],[3,"ngClass","click"],[1,"hidden"],[4,"ngIf"],["id","faqAnswerFeedback",1,"faqAnswer","hide"],["id","faqAnswer4",1,"faqAnswer","hide"],[1,"keyword"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),v(5,"Frequently Asked Questions"),f(),g(6,"em"),v(7,"This FAQ and game is still a work in progress! Bare with me if certain features aren't fully fleshed out and developed yet. I tend to develop in a way where I will put something out still a bit bare bones and add more to it over time until it is complete. If you have any feedback at all, please let me know using one of the links on the bottom right. Thank you so much for playing and hope you're enjoying it!"),f()(),N(8,"br")(9,"br"),g(10,"div")(11,"div")(12,"div",4)(13,"button",5),F("click",function(){return n.expandAnswer("faqAnswer1")}),v(14,"+"),f()(),g(15,"div",6)(16,"p"),v(17,"I'm stuck early on, how should I progress?"),f()()(),g(18,"div",7),N(19,"div",4),g(20,"p"),v(21,"In the early game, your biggest obstacles will be coins and breed level. Using the Stockbreeder to Auto Breed your animals can give them a big boost in stats. "),N(22,"br")(23,"br"),v(24," If you are having a hard time collecting coins, look into buying Team Managers from the Shop and upgrading your barns to Attractions to build passive income. "),f()()(),N(25,"hr"),g(26,"div")(27,"div")(28,"div",4)(29,"button",5),F("click",function(){return n.expandAnswer("faqAnswer2")}),v(30,"+"),f()(),g(31,"div",6)(32,"p"),v(33,"What do team managers do and how do I set auto race?"),f()()(),g(34,"div",8),N(35,"div",4),g(36,"p"),v(37,'After buying a Team Manager from the shop, you\'ll have the ability to set a deck as your "Auto Run Free Race" deck. Once selected, this deck will immediately run free races as soon as the time period resets creating a steady stream of income (assuming you win, of course!). '),N(38,"br")(39,"br"),v(40,' To set a deck as your "Auto Run Free Race" deck, select \'Decks\' on the right and then select the button that says "Auto Run Free Race" by the deck you want to select. Note that this option will not be available until you buy a Team Manager. '),f()()(),N(41,"hr"),g(42,"div")(43,"div")(44,"div",4)(45,"button",5),F("click",function(){return n.expandAnswer("faqAnswer3")}),v(46,"+"),f()(),g(47,"div",6)(48,"p"),v(49,"What does upgrading a barn do and how do I specialize my barn?"),f()()(),g(50,"div",9),N(51,"div",4),g(52,"p"),v(53,"After reaching a certain circuit rank, you will gain the ability to upgrade your barns. Every level you upgrade, you gain a multiplier for a particular stat when training. Hovering over your barn level when selecting a barn will show you your current multipliers. Increasing your barn level can be a great way to get you back in the race after breeding. "),N(54,"br")(55,"br"),v(56," At barn level 10, you will instead have the option to specialize. Subsequently, every 10 levels will improve your specialization instead of giving a stat multiplier. The current specialization options are below."),N(57,"br")(58,"br"),g(59,"strong"),v(60),f(),N(61,"br"),g(62,"strong"),v(63),f(),N(64,"br"),g(65,"strong",10),F("click",function(){return n.viewSpoiler("Attraction Specialization")}),g(66,"span",11),v(67,"View Spoiler"),f(),v(68),f(),N(69,"br"),g(70,"strong",10),F("click",function(){return n.viewSpoiler("Research Center Specialization")}),g(71,"span",11),v(72,"View Spoiler"),f(),v(73),f()()()(),N(74,"hr"),x(75,Tj,42,0,"div",12),g(76,"div")(77,"div")(78,"div",4)(79,"button",5),F("click",function(){return n.expandAnswer("faqAnswerFeedback")}),v(80,"+"),f()(),g(81,"div",6)(82,"p"),v(83,"I'm having an issue with my game or have some feedback, how can I contact you?"),f()()(),g(84,"div",13),N(85,"div",4),g(86,"p"),v(87,"Feel free to use the links at the bottom right or email me at CulturaIdle@gmail.com to get in touch. "),f()()(),N(88,"hr"),f()()()),2&e&&(m(60),ce("Training Facility - ",n.lookupService.getInDepthSpecializationDescription("Training Facility"),""),m(3),ce("Breeding Grounds - ",n.lookupService.getInDepthSpecializationDescription("Breeding Grounds"),""),m(2),_("ngClass",n.seeAttractionSpoiler?"viewSpoiler":"spoilerText"),m(3),ce(" Attraction - ",n.lookupService.getInDepthSpecializationDescription("Attraction"),""),m(2),_("ngClass",n.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),m(3),ce("Research Center - ",n.lookupService.getInDepthSpecializationDescription("Research Center"),""),m(2),_("ngIf",n.lookupService.isItemUnlocked("duoRace")))},directives:[Bn,Kt],styles:['.faqView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}.faqQuestion[_ngcontent-%COMP%]{display:inline-block;width:95%;font-weight:700}.hide[_ngcontent-%COMP%]{display:none}.expanderMargin[_ngcontent-%COMP%]{display:inline-block;width:5%}.spoilerText[_ngcontent-%COMP%]{background-color:gray;color:transparent;-webkit-user-select:none;user-select:none}.spoilerText[_ngcontent-%COMP%]:hover > .hidden[_ngcontent-%COMP%]{display:block;color:#fff;position:absolute;border:1px solid white}.hidden[_ngcontent-%COMP%]{display:none}.viewSpoiler[_ngcontent-%COMP%]{background-color:inherit;color:inherit}']}),t})(),Rj=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n}ngOnInit(){this.componentCommunicationService.setNewView(Dt.stats),this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(n=>{n.totalRacesRun>e&&(e=n.totalRacesRun,this.mostUsedAnimal=n.name,this.mostUsedAnimalCount=e)})}getColorClass(e){if(null!=e&&e.length>0){var n=this.globalService.globalVar.animals.filter(s=>s.isAvailable),r=new Tt;return n.forEach(s=>{e.includes(s.name)&&(r=s)}),{flatlandColor:"Flatland"===r.getRaceCourseType(),mountainColor:"Mountain"===r.getRaceCourseType(),waterColor:"Ocean"===r.getRaceCourseType(),tundraColor:"Tundra"===r.getRaceCourseType(),volcanicColor:"Volcanic"===r.getRaceCourseType()}}return{}}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-stats-view"]],decls:37,vars:34,consts:[[1,"statsView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"coloredText",3,"ngClass"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),v(4,"Stats"),f(),N(5,"br")(6,"br"),v(7),At(8,"number"),N(9,"br"),v(10),At(11,"number"),N(12,"br"),v(13),At(14,"number"),N(15,"br"),g(16,"span",4),v(17),At(18,"number"),f(),N(19,"br"),g(20,"span",4),v(21),f(),N(22,"br"),g(23,"span",4),v(24),f(),N(25,"br"),g(26,"span",4),v(27),f(),N(28,"br"),g(29,"span",4),v(30),f(),N(31,"br"),g(32,"span",4),v(33),f(),N(34,"br"),g(35,"span",4),v(36),f()()()()),2&e&&(m(7),ce(" Total Races: ",Nc(8,18,n.trackedStats.totalRaces,"1.0","en-US")," "),m(3),ce(" Total Meters Covered: ",Nc(11,22,n.trackedStats.totalMetersRaced.toFixed(0),"1.0","en-US")," "),m(3),ce(" Total Breeds: ",Nc(14,26,n.trackedStats.totalBreeds,"1.0","en-US")," "),m(3),_("ngClass",n.getColorClass(n.mostUsedAnimal)),m(1),ti("Most Used Animal: ",n.mostUsedAnimal," (",Nc(18,30,n.mostUsedAnimalCount,"1.0","en-US"),")"),m(3),_("ngClass",n.getColorClass(n.trackedStats.highestMaxSpeed)),m(1),ce("Highest Max Speed: ",n.trackedStats.highestMaxSpeed,""),m(2),_("ngClass",n.getColorClass(n.trackedStats.highestAccelerationRate)),m(1),ce("Highest Acceleration Rate: ",n.trackedStats.highestAccelerationRate,""),m(2),_("ngClass",n.getColorClass(n.trackedStats.highestStamina)),m(1),ce("Highest Stamina: ",n.trackedStats.highestStamina,""),m(2),_("ngClass",n.getColorClass(n.trackedStats.highestPowerEfficiency)),m(1),ce("Highest Power Efficiency: ",n.trackedStats.highestPowerEfficiency,""),m(2),_("ngClass",n.getColorClass(n.trackedStats.highestFocusDistance)),m(1),ce("Highest Focus Distance: ",n.trackedStats.highestFocusDistance,""),m(2),_("ngClass",n.getColorClass(n.trackedStats.highestAdaptabilityDistance)),m(1),ce("Highest Adaptability Distance: ",n.trackedStats.highestAdaptabilityDistance,""))},directives:[Bn],pipes:[ns],styles:['.statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}']}),t})();function xj(t,i){if(1&t&&(g(0,"div",12),N(1,"span",13),f()),2&t){const e=T().$implicit,n=T();m(1),_("innerHTML",n.getPopover(e.name,e.itemType),Dn)}}function Mj(t,i){if(1&t&&(g(0,"p")(1,"span",7)(2,"span",8),v(3),f(),g(4,"span",9),v(5),f(),N(6,"hr",10),f(),x(7,xj,2,1,"ng-template",null,11,ot),f()),2&t){const e=i.$implicit,n=rt(8);m(1),_("ngbPopover",n),m(2),nt(e.name),m(2),ce(" x ",e.amount,"")}}function kj(t,i){if(1&t&&(g(0,"div",12),N(1,"span",13),f()),2&t){const e=T().$implicit,n=T();m(1),_("innerHTML",n.getPopover(e.name,e.itemType),Dn)}}function Aj(t,i){if(1&t&&(g(0,"p")(1,"span",7)(2,"span",14),v(3),f(),g(4,"span",9),v(5),f(),N(6,"hr",10),f(),x(7,kj,2,1,"ng-template",null,15,ot),f()),2&t){const e=i.$implicit,n=rt(8);m(1),_("ngbPopover",n),m(2),nt(e.name),m(2),ce(" x ",e.amount,"")}}function Pj(t,i){if(1&t&&(g(0,"div",12),N(1,"span",13),f()),2&t){const e=T().$implicit,n=T();m(1),_("innerHTML",n.getPopover(e.name,e.itemType),Dn)}}function Ej(t,i){if(1&t&&(g(0,"p")(1,"span",7)(2,"span",16),v(3),f(),g(4,"span",9),v(5),f(),N(6,"hr",10),f(),x(7,Pj,2,1,"ng-template",null,17,ot),f()),2&t){const e=i.$implicit,n=rt(8);m(1),_("ngbPopover",n),m(2),nt(e.name),m(2),ce(" x ",e.amount,"")}}function Ij(t,i){if(1&t&&(g(0,"div",12),N(1,"span",13),f()),2&t){const e=T().$implicit,n=T();m(1),_("innerHTML",n.getPopover(e.name,e.itemType),Dn)}}function Nj(t,i){if(1&t&&(g(0,"p")(1,"span",7)(2,"span",18),v(3),f(),g(4,"span",9),v(5),f(),N(6,"hr",10),f(),x(7,Ij,2,1,"ng-template",null,19,ot),f()),2&t){const e=i.$implicit,n=rt(8);m(1),_("ngbPopover",n),m(2),nt(e.name),m(2),ce(" x ",e.amount,"")}}let Oj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.componentCommunicationService=r,this.utilityService=a,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.componentCommunicationService.setNewView(Dt.resources),this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Food||e.itemType===Y.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Progression).sort()}getPopover(e,n){return this.utilityService.getSanitizedHtml(this.lookupService.getResourcePopover(e,n))}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(hn),k(Qn),k($i))},t.\u0275cmp=st({type:t,selectors:[["app-resources-view"]],decls:21,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"resourceKeyword"],[1,"rightAligned"],[1,"miniHr"],["resourceContent",""],[1,"popoverClass"],[3,"innerHTML"],[1,"progressionKeyword"],["progressionContent",""],[1,"specialityKeyword"],["specialityContent",""],[1,"equipmentKeyword"],["equipmentContent",""]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2),v(3,"Resources"),f(),N(4,"br"),x(5,Mj,9,3,"p",3),f(),g(6,"div",4)(7,"div",2),v(8,"Progression"),f(),N(9,"br"),x(10,Aj,9,3,"p",3),f(),g(11,"div",5)(12,"div",2),v(13,"Specialty"),f(),N(14,"br"),x(15,Ej,9,3,"p",3),f(),g(16,"div",6)(17,"div",2),v(18,"Equipment"),f(),N(19,"br"),x(20,Nj,9,3,"p",3),f()()),2&e&&(m(5),_("ngForOf",n.resources),m(5),_("ngForOf",n.progressionResources),m(5),_("ngForOf",n.specialtyItems),m(5),_("ngForOf",n.equipment))},directives:[ri,ma],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:100%;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1)}.equipment[_ngcontent-%COMP%]{grid-area:equipment}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}']}),t})();var Fl=z(7206);let Vj=(()=>{class t{constructor(e){this.globalService=e}redeemCode(e){var r=Fl.AES.decrypt(e,"LaunchSecret!CLTRA71");0===r.toString(Fl.enc.Utf8).length&&alert("Invalid code entered.");try{var a=JSON.parse(r.toString(Fl.enc.Utf8));null!=a&&a.rewards.length>0&&((new Date).getTime()>new Date(a.expirationDate).getTime()?alert("This code has expired."):this.globalService.globalVar.redeemedCodes.some(s=>s.codeValue===r.toString(Fl.enc.Utf8))?alert("This code has already been redeemed."):(a.rewards.forEach(s=>{var o=this.globalService.globalVar.resources.find(l=>l.name===s.name);null!=o?o.amount+=s.amount:this.globalService.globalVar.resources.push(s)}),a.codeValue=r.toString(Fl.enc.Utf8),this.globalService.globalVar.redeemedCodes.push(a)))}catch(s){alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}}}return t.\u0275fac=function(e){return new(e||t)(Ve(yt))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Fj=(()=>{class t{constructor(){}setupRewards(){this.redeemableCode=new Jh,this.redeemableCode.expirationDate=new Date("2022-08-25"),this.redeemableCode.rewards.push(new be("Mangoes",2,Y.Food))}createCode(){this.setupRewards();var n=JSON.stringify(this.redeemableCode);return Fl.AES.encrypt(n,"LaunchSecret!CLTRA71").toString()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bj=(()=>{class t{constructor(e,n,r,a,s,o,l,c){this.globalService=e,this.themeService=n,this.lookupService=r,this.codeRedemptionService=a,this.codeCreationService=s,this.deploymentService=o,this.componentCommunicationService=l,this.versionControlService=c,this.raceDisplayInfoEnum=Qr,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)}}ngOnInit(){this.componentCommunicationService.setNewView(Dt.settings),this.deploymentService.codeCreationMode&&console.log(this.codeCreationService.createCode()),this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText="Turn on to immediately skip to the end of any race.";var n=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==n&&n,this.finishTrainingBeforeSwitchingPopoverText="Turn on to wait until finishing your current training before switching to the next training you select.";var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?Qr.both:r),this.raceDisplayInfoPopoverText="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default.";var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText="Stop displaying tips in the footer.";var s=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==s&&s,this.useNumbersForCircuitRankPopoverText="Use numbers instead of letters when displaying ranks."}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),n=LZString.compressToBase64(e);this.importExportValue=n}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),n=JSON.parse(e);null!=n&&(this.globalService.globalVar=cD(jn,n),this.versionControlService.updatePlayerVersion())}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var n=du;"White"===e&&(n=this.themeService.setWhiteTheme()),"Light"===e&&(n=this.themeService.setLightTheme()),"Twilight"===e&&(n=this.themeService.setTwilightTheme()),"Night"===e&&(n=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",n),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===Qr.both?"Both":e===Qr.text?"Text":e===Qr.draw?"Draw":""}enterRedemptionCode(){this.codeRedemptionService.redeemCode(this.enteredRedemptionCode)}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(Rl),k(hn),k(Vj),k(Fj),k(dD),k(Qn),k(qm))},t.\u0275cmp=st({type:t,selectors:[["app-settings-view"]],decls:85,vars:13,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"h2"),v(3,"Settings"),f()(),g(4,"div",2)(5,"div",3)(6,"span",4),v(7,"Options"),f(),N(8,"br"),g(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),F("ngModelChange",function(a){return n.skipDrawRace=a})("input",function(){return n.skipDrawRaceToggle()}),f(),g(13,"span"),v(14,"Auto Skip Race Info"),f()()(),N(15,"br"),g(16,"span",6)(17,"label")(18,"input",8),F("ngModelChange",function(a){return n.finishTrainingBeforeSwitching=a})("input",function(){return n.finishTrainingBeforeSwitchingToggle()}),f(),g(19,"span"),v(20,"Finish Training Before Switching "),f()()(),N(21,"br"),g(22,"span",6)(23,"label")(24,"input",9),F("ngModelChange",function(a){return n.hideTips=a})("input",function(){return n.hideTipsToggle()}),f(),g(25,"span"),v(26,"Hide Tips"),f()()(),N(27,"br"),g(28,"span",6)(29,"label")(30,"input",10),F("ngModelChange",function(a){return n.useNumbersForCircuitRank=a})("input",function(){return n.useNumbersForCircuitRankToggle()}),f(),g(31,"span"),v(32,"Use Numbers For Circuit Rank"),f()()(),N(33,"br"),f(),g(34,"div",11)(35,"label",12),v(36,"Race Display Info:"),f(),g(37,"button",13),v(38),f(),g(39,"div",14)(40,"button",15),F("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.draw)}),v(41,"Draw"),f(),g(42,"button",15),F("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.text)}),v(43,"Text"),f(),g(44,"button",15),F("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.both)}),v(45,"Both"),f()()(),N(46,"br"),g(47,"div",16)(48,"label",12),v(49,"Theme:"),f(),g(50,"button",17),v(51),f(),g(52,"div",18)(53,"button",15),F("click",function(){return n.changeTheme("White")}),v(54,"White"),f(),g(55,"button",15),F("click",function(){return n.changeTheme("Light")}),v(56,"Light"),f(),g(57,"button",15),F("click",function(){return n.changeTheme("Twilight")}),v(58,"Twilight"),f(),g(59,"button",15),F("click",function(){return n.changeTheme("Night")}),v(60,"Night"),f()()()(),g(61,"div",19)(62,"span",4),v(63,"Save/Load"),f(),N(64,"br"),g(65,"div",20)(66,"textarea",21),F("ngModelChange",function(a){return n.importExportValue=a}),f(),g(67,"div",22)(68,"button",23),F("click",function(){return n.LoadGame()}),v(69," Import "),f(),g(70,"button",23),F("click",function(){return n.SaveGame()}),v(71," Export "),f()()(),N(72,"br")(73,"br"),g(74,"div")(75,"span",4),v(76,"Code Redemption"),f(),N(77,"br")(78,"br"),g(79,"div",24)(80,"label",25),v(81,"Code: "),f(),g(82,"input",26),F("ngModelChange",function(a){return n.enteredRedemptionCode=a}),f(),g(83,"button",27),F("click",function(){return n.enterRedemptionCode()}),v(84," Enter "),f()()()()()()),2&e&&(m(10),_("ngbPopover",n.skipDrawRacePopoverText),m(2),_("ngModel",n.skipDrawRace),m(4),_("ngbPopover",n.finishTrainingBeforeSwitchingPopoverText),m(2),_("ngModel",n.finishTrainingBeforeSwitching),m(4),_("ngbPopover",n.hideTipsPopoverText),m(2),_("ngModel",n.hideTips),m(4),_("ngbPopover",n.useNumbersForCircuitRankPopoverText),m(2),_("ngModel",n.useNumbersForCircuitRank),m(4),_("ngbPopover",n.raceDisplayInfoPopoverText),m(4),nt(n.raceDisplayInfo),m(13),nt(n.currentTheme),m(15),_("ngModel",n.importExportValue),m(16),_("ngModel",n.enteredRedemptionCode))},directives:[ma,gh,jc,Yc,Vl,gv,mf,pv,bl],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". options saveLoad ."}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}']}),t})();function Lj(t,i){if(1&t){const e=fe();g(0,"div",12),F("click",function(){return X(e),T().getNewTip()}),g(1,"span"),v(2),f()()}if(2&t){const e=T();m(2),ce("Tip: ",e.randomTip,"")}}let Uj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.componentCommunicationService=a}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var n=Xr(function*(r){e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&e.displayTip&&(e.totalTime=0,e.randomTip=e.lookupService.getRandomTip())});return function(r){return n.apply(this,arguments)}}())}getNewTip(){this.totalTime=0,this.randomTip=this.lookupService.getRandomTip()}openFAQs(){this.componentCommunicationService.setNewView(Dt.faqs)}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(yi),k(hn),k(Qn))},t.\u0275cmp=st({type:t,selectors:[["app-footer"]],decls:25,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword",3,"click",4,"ngIf"],[1,"area3","keyword","rightAlign"],[1,"faqs",3,"click"],["href","https://discord.gg/TgbRXsXQF3","rel","noopener noreferrer","target","_blank"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],["href","https://www.buymeacoffee.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],["href","https://www.patreon.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],[1,"area2","keyword",3,"click"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2),N(3,"span"),f(),x(4,Lj,3,1,"div",3),g(5,"div",4)(6,"span")(7,"span",5),F("click",function(){return n.openFAQs()}),v(8,"FAQs"),f(),v(9," | "),g(10,"a",6),v(11,"Discord"),f(),v(12," | "),g(13,"a",7),v(14,"Reddit"),f(),v(15," | "),g(16,"a",8),v(17,"Email"),f()()(),g(18,"div",9)(19,"span")(20,"a",10),v(21,"Donate"),f(),v(22," | "),g(23,"a",11),v(24,"Patreon"),f()()()()()),2&e&&(m(4),_("ngIf",n.displayTip))},directives:[Kt],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%], .faqs[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.faqs[_ngcontent-%COMP%]{cursor:pointer}.faqs[_ngcontent-%COMP%]:hover{text-decoration:underline}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}']}),t})();const Hj=["tutorialContent"];function Gj(t,i){1&t&&(g(0,"div",18),N(1,"app-barn-view"),f())}function jj(t,i){1&t&&(g(0,"div",19),N(1,"app-race-selection-view"),f())}function zj(t,i){1&t&&(g(0,"div",20),N(1,"app-animals-view"),f())}function $j(t,i){1&t&&(g(0,"div",21),N(1,"app-decks-view"),f())}function Wj(t,i){1&t&&(g(0,"div",22),N(1,"app-shop-view"),f())}function qj(t,i){1&t&&(g(0,"div",23),N(1,"app-incubator-view"),f())}function Xj(t,i){1&t&&(g(0,"div",24),N(1,"app-training-track-view"),f())}function Yj(t,i){1&t&&(g(0,"div",25),N(1,"app-faq-view"),f())}function Qj(t,i){1&t&&(g(0,"div",26),N(1,"app-stats-view"),f())}function Kj(t,i){1&t&&(g(0,"div",27),N(1,"app-resources-view"),f())}function Zj(t,i){1&t&&(g(0,"div",28),N(1,"app-settings-view"),f())}function Jj(t,i){if(1&t){const e=fe();g(0,"div",29)(1,"div",30)(2,"h4",31),v(3,"Tutorial"),f(),g(4,"button",32),F("click",function(){return X(e),T().closeTutorialModal()}),v(5,"X"),f()(),N(6,"div",33),g(7,"div",34)(8,"span")(9,"button",35),F("click",function(){return X(e),T().skipTutorial()}),v(10,"Skip Tutorial"),f()(),g(11,"span")(12,"button",35),F("click",function(){return X(e),T().continueTutorial()}),v(13,"Continue"),f()()()()}if(2&t){const e=T();m(6),_("innerHTML",e.tutorialText,Dn)}}let ez=(()=>{class t{constructor(e,n,r,a,s,o){this.ref=e,this.globalService=n,this.modalService=r,this.tutorialService=a,this.sanitizer=s,this.gameLoopService=o,this.navigationEnum=Dt,this.activeView=Dt.barn}ngOnInit(){var e=this;this.openTutorialModal();var n=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=Xr(function*(a){e.globalService.globalVar.tutorials.showTutorial&&e.openTutorialModal(),e.globalService.globalVar.tutorials.tutorialCompleted&&n.unsubscribe()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorials.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.tutorials.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(Xt.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.tutorials.showTutorial=!1,5===e.id&&(this.globalService.globalVar.tutorials.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(n=>{this.closeTutorialModal()},n=>{this.closeTutorialModal()}))}}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(k(xr),k(yt),k(ls),k(hD),k(xs),k(yi))},t.\u0275cmp=st({type:t,selectors:[["app-main"]],viewQuery:function(e,n){if(1&e&&Ja(Hj,7),2&e){let r;mn(r=vn())&&(n.tutorialContent=r.first)}},decls:21,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TrainingTrackView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TrainingTrackView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"]],template:function(e,n){1&e&&(g(0,"div",0)(1,"div",1),N(2,"app-header"),f(),g(3,"div",2),x(4,Gj,2,0,"div",3),x(5,jj,2,0,"div",4),x(6,zj,2,0,"div",5),x(7,$j,2,0,"div",6),x(8,Wj,2,0,"div",7),x(9,qj,2,0,"div",8),x(10,Xj,2,0,"div",9),x(11,Yj,2,0,"div",10),x(12,Qj,2,0,"div",11),x(13,Kj,2,0,"div",12),x(14,Zj,2,0,"div",13),f(),g(15,"div",14)(16,"app-navigation",15),F("viewChanged",function(a){return n.changeView(a)}),f()(),g(17,"div",16),N(18,"app-footer"),f()(),x(19,Jj,14,1,"ng-template",null,17,ot)),2&e&&(m(4),_("ngIf",n.activeView===n.navigationEnum.barn),m(1),_("ngIf",n.activeView===n.navigationEnum.raceselection),m(1),_("ngIf",n.activeView===n.navigationEnum.animals),m(1),_("ngIf",n.activeView===n.navigationEnum.relayTeams),m(1),_("ngIf",n.activeView===n.navigationEnum.shop),m(1),_("ngIf",n.activeView===n.navigationEnum.incubator),m(1),_("ngIf",n.activeView===n.navigationEnum.trainingtrack),m(1),_("ngIf",n.activeView===n.navigationEnum.faqs),m(1),_("ngIf",n.activeView===n.navigationEnum.stats),m(1),_("ngIf",n.activeView===n.navigationEnum.resources),m(1),_("ngIf",n.activeView===n.navigationEnum.settings))},directives:[OU,Kt,iH,Y7,x9,F9,aj,Sj,LR,Dj,Rj,Oj,Bj,FR,Uj],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;position:fixed;top:0;left:0;bottom:0;right:0;grid-template-columns:88% 12%;grid-template-rows:auto 1fr auto;justify-content:stretch;grid-template-areas:"header header" "main  main" "footer footer"}.navArea[_ngcontent-%COMP%]{display:none}}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),tz=(()=>{class t{constructor(e,n,r,a,s,o,l,c,u){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.specializationService=a,this.themeService=s,this.raceLogicService=o,this.deploymentService=l,this.versionControlService=c,this.utilityService=u,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=20,this.racingSaveFrequency=120}ngOnInit(){var e=this,n=localStorage.getItem("culturaIdleGameData");if((null==n||0===n.length)&&(n=localStorage.getItem("gameData")),null!=n){var r=LZString.decompressFromBase64(n),a=JSON.parse(r);null!=a&&(this.newGame=!1,this.globalService.globalVar=cD(jn,a),this.loadStartup())}this.deploymentService.setDevMode();var o=this.deploymentService.devModeActive;(this.newGame||this.deploymentService.forceStartNewGame)&&this.globalService.initializeGlobalVariables(),o&&(this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.devModeInitialize(85)),this.versionControlService.updatePlayerVersion(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Xr(function*(d){e.gameCheckup(d),e.saveTime+=d;var h=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(h=e.racingSaveFrequency),e.saveTime>=h&&(e.saveTime=0,e.saveGame());performance.now()});return function(d){return u.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(null!=this.globalService.globalVar.animals){this.globalService.globalVar.animals.filter(a=>a.isAvailable).forEach(a=>{a.canTrain=this.lookupService.canAnimalTrain(a)});var n=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining);n.length>0&&n.forEach(a=>{var s;if(null!=a.currentTraining&&a.canTrain)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var o=this.globalService.globalVar.barns.find(u=>u.barnNumber===a.associatedBarnNumber),l=0;null!=o&&o.barnUpgrades.specialization===dn.BreedingGrounds&&(l=o.barnUpgrades.specializationLevel),null!=o&&o.barnUpgrades.specialization===dn.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,o):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var c=this.lookupService.getTrainingBreedGaugeIncrease(l,a);this.globalService.IncreaseAnimalBreedGauge(a,c),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(s=a.currentTraining)||void 0===s?void 0:s.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleFreeRaceTimer(e),this.handleGrandPrix(e)}}handleGrandPrix(e){if(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime)return this.globalService.globalVar.eventRaceData.initialSetupComplete&&(this.globalService.globalVar.eventRaceData=new Vi),void(this.globalService.globalVar.eventRaceData.initialSetupComplete=!1);if(this.globalService.globalVar.eventRaceData.initialSetupComplete||(this.globalService.initialGrandPrixSetup("Z"),this.globalService.globalVar.eventRaceData.initialSetupComplete=!0,this.globalService.globalVar.notifications.isEventRaceNowActive=!0),this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&this.globalService.increaseGrandPrixRaceRank(),this.globalService.globalVar.eventRaceData.isRunning){if(null==this.globalService.globalVar.animalDecks.find(o=>o.isEventDeck))return;this.globalService.globalVar.eventRaceData.segmentTimeCounter+=e,this.globalService.globalVar.eventRaceData.overallTimeCounter+=e,this.globalService.getTimeToEventRace()>0&&this.globalService.globalVar.eventRaceData.bonusTime>0&&(this.globalService.globalVar.eventRaceData.bonusTime-=e,this.globalService.globalVar.eventRaceData.bonusTime<=0&&(this.globalService.globalVar.eventRaceData.bonusTime=0));var r=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60;if(this.globalService.globalVar.eventRaceData.isCatchingUp=this.globalService.globalVar.eventRaceData.segmentTimeCounter>=2*r,this.globalService.globalVar.eventRaceData.segmentTimeCounter>=r)if(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1,this.globalService.globalVar.eventRaceData.segmentTimeCounter-=r,this.globalService.globalVar.eventRaceData.distanceCovered+=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.distanceCovered,this.globalService.globalVar.eventRaceData.previousRaceSegment=this.globalService.globalVar.eventRaceData.currentRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.previousRaceSegment.reduceExportSize(),this.globalService.globalVar.eventRaceData.distanceCovered>=this.globalService.globalVar.eventRaceData.totalDistance)this.globalService.globalVar.eventRaceData.distanceCovered=this.globalService.globalVar.eventRaceData.totalDistance,this.grandPrixRaceCompleted();else{this.checkForEventRelayAnimal()&&(console.log("Animal Switched"),this.resetEventAbilityUseCounts());var s=this.globalService.getGrandPrixRacingAnimal();void 0!==s.type&&void 0!==s.name&&(this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.globalVar.eventRaceData.nextRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.nextRaceSegment),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),console.log("Running next segment"),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s))}this.checkForGrandPrixRewards()}this.updateExhaustionAndMorale(e),this.updateWeatherCluster(e)}grandPrixRaceCompleted(){console.log("Grand Prix Stopped"),this.globalService.globalVar.eventRaceData.isGrandPrixCompleted=!0,this.globalService.stopGrandPrixRace()}updateExhaustionAndMorale(e){this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter+=e;var n=300,r=this.globalService.globalVar.modifiers.find(o=>"exhaustionGainTimerCapGrandPrixModifier"===o.text);null!=r&&(n=r.value);var a=.02,s=this.globalService.globalVar.modifiers.find(o=>"exhaustionGainGrandPrixModifier"===o.text);null!=s&&(a=s.value),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter>n&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.exhaustionStatReduction+=a,o.exhaustionStatReduction>=1&&(o.exhaustionStatReduction=1),o.morale<1&&(o.morale+=a)}),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter-=n)}updateWeatherCluster(e){this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter+=e;var n=7200,r=this.globalService.globalVar.modifiers.find(a=>"weatherClusterTimerCapGrandPrixModifier"===a.text);null!=r&&(n=r.value),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter>n&&(this.globalService.globalVar.eventRaceData.weatherCluster=this.globalService.getRandomGrandPrixWeatherCluster(void 0,this.globalService.globalVar.eventRaceData.weatherCluster),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter-=n)}checkForEventRelayAnimal(){var e=!1;if(this.globalService.globalVar.eventRaceData.animalData.some(d=>d.isSetToRelay))this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1,d.isSetToRelay&&(d.isCurrentlyRacing=!0,d.isSetToRelay=!1,this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===H.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0))});else{var n=this.globalService.getGrandPrixRacingAnimal(),r=this.globalService.getExhaustionOfAnimal(n.type),a=this.lookupService.getBreedLevelRequiredForGrandPrix();if(void 0!==r&&r<.5){var s=this.globalService.globalVar.animalDecks.find(d=>d.isEventDeck);if(null!=s){var o=null==s?void 0:s.selectedAnimals.filter(d=>d.breedLevel>=a);if((o=o.filter(d=>{var h=this.globalService.globalVar.eventRaceData.animalData.find(p=>p.associatedAnimalType===d.type);return null!=h&&(h.exhaustionStatReduction>=.5||h.associatedAnimalType===n.type)})).length>1){var l=0,c=!1;if(o.forEach(d=>{d.type===n.type&&(c=!0),c||(l+=1)}),c||(l=-1),this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1}),l>-1){var u=l+1;u===o.length&&(u=0),this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.associatedAnimalType===o[u].type&&(d.isCurrentlyRacing=!0,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===H.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(o[u]))})}else this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.associatedAnimalType===o[0].type&&(d.isCurrentlyRacing=!0,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===H.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(o[0]))});this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1}else this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1}),this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalService.globalVar.eventRaceData.isRunning=!1,this.globalService.globalVar.eventRaceData.overallTimeCounter-=this.globalService.globalVar.eventRaceData.segmentTimeCounter,this.globalService.globalVar.eventRaceData.segmentTimeCounter=0,this.globalService.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}}}return e}resetEventAbilityUseCounts(){null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.eventAbilityData||this.globalService.globalVar.eventRaceData.eventAbilityData.resetUseCounts()}checkForGrandPrixRewards(){var e=this.globalService.globalVar.eventRaceData.distanceCovered,n=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=100,a=this.globalService.globalVar.modifiers.find(te=>"grandPrixCoinRewardModifier"===te.text);null!=a&&(r=a.value);var s=5,o=this.globalService.globalVar.modifiers.find(te=>"grandPrixRenownRewardModifier"===te.text);null!=o&&(s=o.value);var l=5e6,c=this.globalService.globalVar.modifiers.find(te=>"metersPerCoinsGrandPrixModifier"===te.text);null!=c&&(l=c.value);var u=2e7,d=this.globalService.globalVar.modifiers.find(te=>"metersPerRenownGrandPrixModifier"===te.text);null!=d&&(u=d.value);var h=5e7,p=this.globalService.globalVar.modifiers.find(te=>"grandPrixToken1MeterModifier"===te.text);null!=p&&(h=p.value);var b=5e7,y=this.globalService.globalVar.modifiers.find(te=>"grandPrixToken2MeterModifier"===te.text);null!=y&&(b=y.value);var w=5e7,S=this.globalService.globalVar.modifiers.find(te=>"grandPrixToken3MeterModifier"===te.text);null!=S&&(w=S.value);var C=5e7,I=this.globalService.globalVar.modifiers.find(te=>"grandPrixToken4MeterModifier"===te.text);null!=I&&(C=I.value);var Q,G=this.globalService.globalVar.eventRaceData.totalDistance/(u*n);e>=l*n*(this.globalService.globalVar.eventRaceData.coinRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.coinRewardsObtained<this.globalService.globalVar.eventRaceData.totalDistance/(l*n)&&(this.globalService.globalVar.eventRaceData.coinRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(Q=this.globalService.globalVar.resources.find(te=>"Coins"===te.name))&&(Q.amount+=r)),e>=u*n*(this.globalService.globalVar.eventRaceData.renownRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.renownRewardsObtained<G&&(this.globalService.globalVar.eventRaceData.renownRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(Q=this.globalService.globalVar.resources.find(de=>"Renown"===de.name))&&(Q.amount+=s)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=0&&e>=h*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(Q=this.globalService.globalVar.resources.find(de=>"Tokens"===de.name))?Q.amount+=1*n:this.globalService.globalVar.resources.push(new be("Tokens",1*n,Y.Resources))),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=1&&e>=b*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(Q=this.globalService.globalVar.resources.find(de=>"Tokens"===de.name))?Q.amount+=2*n:this.globalService.globalVar.resources.push(new be("Tokens",2*n,Y.Resources))),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=2&&e>=w*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(Q=this.globalService.globalVar.resources.find(de=>"Tokens"===de.name))?Q.amount+=3*n:this.globalService.globalVar.resources.push(new be("Tokens",3*n,Y.Resources))),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=3&&e>=C*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(Q=this.globalService.globalVar.resources.find(de=>"Tokens"===de.name))?Q.amount+=4*n:this.globalService.globalVar.resources.push(new be("Tokens",4*n,Y.Resources)))}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var n=300,r=this.globalService.globalVar.modifiers.find(o=>"freeRacesTimePeriodModifier"===o.text);void 0!==r&&(n=r.value);var a=3600,s=this.globalService.globalVar.modifiers.find(o=>"autoFreeRacesMaxIdleTimePeriodModifier"===o.text);for(void 0!==s&&(a=s.value);this.globalService.globalVar.freeRaceTimePeriodCounter>=n&&a>0;)this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=n,a-=n,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0,this.handleAutoFreeRace(e)}}handleAutoFreeRace(e){var n=this.lookupService.getResourceByName("Team Manager");if(null==n&&(n=0),0!==n&&this.globalService.globalVar.animalDecks.some(d=>d.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(d=>d.autoRunFreeRace);if(null!=r)for(var a=n-this.globalService.globalVar.autoFreeRaceCounter,s=this.lookupService.getTotalFreeRacesPerPeriod(),o=0;o<a;o++){if(this.globalService.globalVar.freeRaceCounter>=s)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var l=this.globalService.generateFreeRace(),c=!0;l.raceLegs.forEach(d=>{(null==r?void 0:r.selectedAnimals.some(h=>h.raceCourseType===d.courseType))||(c=!1)}),c&&this.raceLogicService.runRace(l)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(z.tu(new URL(z.p+z.u(151),z.b)));r.onmessage=({data:a})=>{localStorage.setItem("culturaIdleGameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),n=LZString.compressToBase64(e);localStorage.setItem("culturaIdleGameData",n)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(k(yt),k(yi),k(hn),k(uD),k(Rl),k(Wm),k(dD),k(qm),k($i))},t.\u0275cmp=st({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,n){1&e&&(g(0,"div",0),N(1,"app-main"),f(),N(2,"router-outlet"))},directives:[ez,Sm],styles:[""]}),t})(),nz=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=pn({type:t,bootstrap:[tz]}),t.\u0275inj=ln({providers:[yt,Rl],imports:[[PV,a4,kU,pr,ZS,$F]]}),t})();(function cN(){ow=!1})(),kV().bootstrapModule(nz).catch(t=>console.error(t))},7466:function(_e,Se,z){var $;_e.exports=($=z(7585),z(8319),z(9493),z(7865),z(3057),function(){var L=$,re=L.lib.BlockCipher,ue=L.algo,K=[],ne=[],P=[],R=[],O=[],A=[],E=[],M=[],V=[],U=[];!function(){for(var B=[],j=0;j<256;j++)B[j]=j<128?j<<1:j<<1^283;var le=0,ee=0;for(j=0;j<256;j++){var se=ee^ee<<1^ee<<2^ee<<3^ee<<4;K[le]=se=se>>>8^255&se^99,ne[se]=le;var Pe,oe=B[le],we=B[oe],ve=B[we];P[le]=(Pe=257*B[se]^16843008*se)<<24|Pe>>>8,R[le]=Pe<<16|Pe>>>16,O[le]=Pe<<8|Pe>>>24,A[le]=Pe,E[se]=(Pe=16843009*ve^65537*we^257*oe^16843008*le)<<24|Pe>>>8,M[se]=Pe<<16|Pe>>>16,V[se]=Pe<<8|Pe>>>24,U[se]=Pe,le?(le=oe^B[B[B[ve^oe]]],ee^=B[B[ee]]):le=ee=1}}();var ae=[0,1,2,4,8,16,32,64,128,27,54],ie=ue.AES=re.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var j=this._keyPriorReset=this._key,le=j.words,ee=j.sigBytes/4,oe=4*((this._nRounds=ee+6)+1),we=this._keySchedule=[],ve=0;ve<oe;ve++)ve<ee?we[ve]=le[ve]:(B=we[ve-1],ve%ee?ee>6&&ve%ee==4&&(B=K[B>>>24]<<24|K[B>>>16&255]<<16|K[B>>>8&255]<<8|K[255&B]):(B=K[(B=B<<8|B>>>24)>>>24]<<24|K[B>>>16&255]<<16|K[B>>>8&255]<<8|K[255&B],B^=ae[ve/ee|0]<<24),we[ve]=we[ve-ee]^B);for(var Pe=this._invKeySchedule=[],Be=0;Be<oe;Be++){if(ve=oe-Be,Be%4)var B=we[ve];else B=we[ve-4];Pe[Be]=Be<4||ve<=4?B:E[K[B>>>24]]^M[K[B>>>16&255]]^V[K[B>>>8&255]]^U[K[255&B]]}}},encryptBlock:function(B,j){this._doCryptBlock(B,j,this._keySchedule,P,R,O,A,K)},decryptBlock:function(B,j){var le=B[j+1];B[j+1]=B[j+3],B[j+3]=le,this._doCryptBlock(B,j,this._invKeySchedule,E,M,V,U,ne),le=B[j+1],B[j+1]=B[j+3],B[j+3]=le},_doCryptBlock:function(B,j,le,ee,se,oe,we,ve){for(var Pe=this._nRounds,Be=B[j]^le[0],he=B[j+1]^le[1],Re=B[j+2]^le[2],Ie=B[j+3]^le[3],xe=4,tt=1;tt<Pe;tt++){var Ne=ee[Be>>>24]^se[he>>>16&255]^oe[Re>>>8&255]^we[255&Ie]^le[xe++],It=ee[he>>>24]^se[Re>>>16&255]^oe[Ie>>>8&255]^we[255&Be]^le[xe++],Wt=ee[Re>>>24]^se[Ie>>>16&255]^oe[Be>>>8&255]^we[255&he]^le[xe++],ye=ee[Ie>>>24]^se[Be>>>16&255]^oe[he>>>8&255]^we[255&Re]^le[xe++];Be=Ne,he=It,Re=Wt,Ie=ye}Ne=(ve[Be>>>24]<<24|ve[he>>>16&255]<<16|ve[Re>>>8&255]<<8|ve[255&Ie])^le[xe++],It=(ve[he>>>24]<<24|ve[Re>>>16&255]<<16|ve[Ie>>>8&255]<<8|ve[255&Be])^le[xe++],Wt=(ve[Re>>>24]<<24|ve[Ie>>>16&255]<<16|ve[Be>>>8&255]<<8|ve[255&he])^le[xe++],ye=(ve[Ie>>>24]<<24|ve[Be>>>16&255]<<16|ve[he>>>8&255]<<8|ve[255&Re])^le[xe++],B[j]=Ne,B[j+1]=It,B[j+2]=Wt,B[j+3]=ye},keySize:8});L.AES=re._createHelper(ie)}(),$.AES)},3057:function(_e,Se,z){var J,re,ue,K,ne,P,O,E,M,U,ae,ie,j,ee,oe,we,Pe,Be,$;_e.exports=($=z(7585),z(7865),void($.lib.Cipher||(J=$,re=J.lib,ue=re.Base,K=re.WordArray,ne=re.BufferedBlockAlgorithm,P=J.enc,O=P.Base64,E=J.algo.EvpKDF,M=re.Cipher=ne.extend({cfg:ue.extend(),createEncryptor:function(he,Re){return this.create(this._ENC_XFORM_MODE,he,Re)},createDecryptor:function(he,Re){return this.create(this._DEC_XFORM_MODE,he,Re)},init:function(he,Re,Ie){this.cfg=this.cfg.extend(Ie),this._xformMode=he,this._key=Re,this.reset()},reset:function(){ne.reset.call(this),this._doReset()},process:function(he){return this._append(he),this._process()},finalize:function(he){return he&&this._append(he),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function he(Re){return"string"==typeof Re?Be:we}return function(Re){return{encrypt:function(Ie,xe,tt){return he(xe).encrypt(Re,Ie,xe,tt)},decrypt:function(Ie,xe,tt){return he(xe).decrypt(Re,Ie,xe,tt)}}}}()}),re.StreamCipher=M.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),U=J.mode={},ae=re.BlockCipherMode=ue.extend({createEncryptor:function(he,Re){return this.Encryptor.create(he,Re)},createDecryptor:function(he,Re){return this.Decryptor.create(he,Re)},init:function(he,Re){this._cipher=he,this._iv=Re}}),ie=U.CBC=function(){var he=ae.extend();function Re(Ie,xe,tt){var Ne,It=this._iv;It?(Ne=It,this._iv=undefined):Ne=this._prevBlock;for(var Wt=0;Wt<tt;Wt++)Ie[xe+Wt]^=Ne[Wt]}return he.Encryptor=he.extend({processBlock:function(Ie,xe){var tt=this._cipher,Ne=tt.blockSize;Re.call(this,Ie,xe,Ne),tt.encryptBlock(Ie,xe),this._prevBlock=Ie.slice(xe,xe+Ne)}}),he.Decryptor=he.extend({processBlock:function(Ie,xe){var tt=this._cipher,Ne=tt.blockSize,It=Ie.slice(xe,xe+Ne);tt.decryptBlock(Ie,xe),Re.call(this,Ie,xe,Ne),this._prevBlock=It}}),he}(),j=(J.pad={}).Pkcs7={pad:function(he,Re){for(var Ie=4*Re,xe=Ie-he.sigBytes%Ie,tt=xe<<24|xe<<16|xe<<8|xe,Ne=[],It=0;It<xe;It+=4)Ne.push(tt);var Wt=K.create(Ne,xe);he.concat(Wt)},unpad:function(he){he.sigBytes-=255&he.words[he.sigBytes-1>>>2]}},re.BlockCipher=M.extend({cfg:M.cfg.extend({mode:ie,padding:j}),reset:function(){var he;M.reset.call(this);var Re=this.cfg,Ie=Re.iv,xe=Re.mode;this._xformMode==this._ENC_XFORM_MODE?he=xe.createEncryptor:(he=xe.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==he?this._mode.init(this,Ie&&Ie.words):(this._mode=he.call(xe,this,Ie&&Ie.words),this._mode.__creator=he)},_doProcessBlock:function(he,Re){this._mode.processBlock(he,Re)},_doFinalize:function(){var he,Re=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Re.pad(this._data,this.blockSize),he=this._process(!0)):(he=this._process(!0),Re.unpad(he)),he},blockSize:4}),ee=re.CipherParams=ue.extend({init:function(he){this.mixIn(he)},toString:function(he){return(he||this.formatter).stringify(this)}}),oe=(J.format={}).OpenSSL={stringify:function(he){var Ie=he.ciphertext,xe=he.salt;return(xe?K.create([1398893684,1701076831]).concat(xe).concat(Ie):Ie).toString(O)},parse:function(he){var Re,Ie=O.parse(he),xe=Ie.words;return 1398893684==xe[0]&&1701076831==xe[1]&&(Re=K.create(xe.slice(2,4)),xe.splice(0,4),Ie.sigBytes-=16),ee.create({ciphertext:Ie,salt:Re})}},we=re.SerializableCipher=ue.extend({cfg:ue.extend({format:oe}),encrypt:function(he,Re,Ie,xe){xe=this.cfg.extend(xe);var tt=he.createEncryptor(Ie,xe),Ne=tt.finalize(Re),It=tt.cfg;return ee.create({ciphertext:Ne,key:Ie,iv:It.iv,algorithm:he,mode:It.mode,padding:It.padding,blockSize:he.blockSize,formatter:xe.format})},decrypt:function(he,Re,Ie,xe){return xe=this.cfg.extend(xe),Re=this._parse(Re,xe.format),he.createDecryptor(Ie,xe).finalize(Re.ciphertext)},_parse:function(he,Re){return"string"==typeof he?Re.parse(he,this):he}}),Pe=(J.kdf={}).OpenSSL={execute:function(he,Re,Ie,xe){xe||(xe=K.random(8));var tt=E.create({keySize:Re+Ie}).compute(he,xe),Ne=K.create(tt.words.slice(Re),4*Ie);return tt.sigBytes=4*Re,ee.create({key:tt,iv:Ne,salt:xe})}},Be=re.PasswordBasedCipher=we.extend({cfg:we.cfg.extend({kdf:Pe}),encrypt:function(he,Re,Ie,xe){var tt=(xe=this.cfg.extend(xe)).kdf.execute(Ie,he.keySize,he.ivSize);xe.iv=tt.iv;var Ne=we.encrypt.call(this,he,Re,tt.key,xe);return Ne.mixIn(tt),Ne},decrypt:function(he,Re,Ie,xe){xe=this.cfg.extend(xe),Re=this._parse(Re,xe.format);var tt=xe.kdf.execute(Ie,he.keySize,he.ivSize,Re.salt);return xe.iv=tt.iv,we.decrypt.call(this,he,Re,tt.key,xe)}}))))},7585:function(_e,Se,z){var $;_e.exports=($=$||function(L,J){var re;if("undefined"!=typeof window&&window.crypto&&(re=window.crypto),"undefined"!=typeof self&&self.crypto&&(re=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(re=globalThis.crypto),!re&&"undefined"!=typeof window&&window.msCrypto&&(re=window.msCrypto),!re&&"undefined"!=typeof global&&global.crypto&&(re=global.crypto),!re)try{re=z(2480)}catch(B){}var ue=function(){if(re){if("function"==typeof re.getRandomValues)try{return re.getRandomValues(new Uint32Array(1))[0]}catch(B){}if("function"==typeof re.randomBytes)try{return re.randomBytes(4).readInt32LE()}catch(B){}}throw new Error("Native crypto module could not be used to get secure random number.")},K=Object.create||function(){function B(){}return function(j){var le;return B.prototype=j,le=new B,B.prototype=null,le}}(),ne={},P=ne.lib={},R=P.Base={extend:function(B){var j=K(this);return B&&j.mixIn(B),(!j.hasOwnProperty("init")||this.init===j.init)&&(j.init=function(){j.$super.init.apply(this,arguments)}),j.init.prototype=j,j.$super=this,j},create:function(){var B=this.extend();return B.init.apply(B,arguments),B},init:function(){},mixIn:function(B){for(var j in B)B.hasOwnProperty(j)&&(this[j]=B[j]);B.hasOwnProperty("toString")&&(this.toString=B.toString)},clone:function(){return this.init.prototype.extend(this)}},O=P.WordArray=R.extend({init:function(B,j){B=this.words=B||[],this.sigBytes=null!=j?j:4*B.length},toString:function(B){return(B||E).stringify(this)},concat:function(B){var j=this.words,le=B.words,ee=this.sigBytes,se=B.sigBytes;if(this.clamp(),ee%4)for(var oe=0;oe<se;oe++)j[ee+oe>>>2]|=(le[oe>>>2]>>>24-oe%4*8&255)<<24-(ee+oe)%4*8;else for(var ve=0;ve<se;ve+=4)j[ee+ve>>>2]=le[ve>>>2];return this.sigBytes+=se,this},clamp:function(){var B=this.words,j=this.sigBytes;B[j>>>2]&=4294967295<<32-j%4*8,B.length=L.ceil(j/4)},clone:function(){var B=R.clone.call(this);return B.words=this.words.slice(0),B},random:function(B){for(var j=[],le=0;le<B;le+=4)j.push(ue());return new O.init(j,B)}}),A=ne.enc={},E=A.Hex={stringify:function(B){for(var j=B.words,le=B.sigBytes,ee=[],se=0;se<le;se++){var oe=j[se>>>2]>>>24-se%4*8&255;ee.push((oe>>>4).toString(16)),ee.push((15&oe).toString(16))}return ee.join("")},parse:function(B){for(var j=B.length,le=[],ee=0;ee<j;ee+=2)le[ee>>>3]|=parseInt(B.substr(ee,2),16)<<24-ee%8*4;return new O.init(le,j/2)}},M=A.Latin1={stringify:function(B){for(var j=B.words,le=B.sigBytes,ee=[],se=0;se<le;se++)ee.push(String.fromCharCode(j[se>>>2]>>>24-se%4*8&255));return ee.join("")},parse:function(B){for(var j=B.length,le=[],ee=0;ee<j;ee++)le[ee>>>2]|=(255&B.charCodeAt(ee))<<24-ee%4*8;return new O.init(le,j)}},V=A.Utf8={stringify:function(B){try{return decodeURIComponent(escape(M.stringify(B)))}catch(j){throw new Error("Malformed UTF-8 data")}},parse:function(B){return M.parse(unescape(encodeURIComponent(B)))}},U=P.BufferedBlockAlgorithm=R.extend({reset:function(){this._data=new O.init,this._nDataBytes=0},_append:function(B){"string"==typeof B&&(B=V.parse(B)),this._data.concat(B),this._nDataBytes+=B.sigBytes},_process:function(B){var j,le=this._data,ee=le.words,se=le.sigBytes,oe=this.blockSize,ve=se/(4*oe),Pe=(ve=B?L.ceil(ve):L.max((0|ve)-this._minBufferSize,0))*oe,Be=L.min(4*Pe,se);if(Pe){for(var he=0;he<Pe;he+=oe)this._doProcessBlock(ee,he);j=ee.splice(0,Pe),le.sigBytes-=Be}return new O.init(j,Be)},clone:function(){var B=R.clone.call(this);return B._data=this._data.clone(),B},_minBufferSize:0}),ie=(P.Hasher=U.extend({cfg:R.extend(),init:function(B){this.cfg=this.cfg.extend(B),this.reset()},reset:function(){U.reset.call(this),this._doReset()},update:function(B){return this._append(B),this._process(),this},finalize:function(B){return B&&this._append(B),this._doFinalize()},blockSize:16,_createHelper:function(B){return function(j,le){return new B.init(le).finalize(j)}},_createHmacHelper:function(B){return function(j,le){return new ie.HMAC.init(B,le).finalize(j)}}}),ne.algo={});return ne}(Math),$)},8319:function(_e,Se,z){var $,re;_e.exports=($=z(7585),re=$.lib.WordArray,$.enc.Base64={stringify:function(P){var R=P.words,O=P.sigBytes,A=this._map;P.clamp();for(var E=[],M=0;M<O;M+=3)for(var ie=(R[M>>>2]>>>24-M%4*8&255)<<16|(R[M+1>>>2]>>>24-(M+1)%4*8&255)<<8|R[M+2>>>2]>>>24-(M+2)%4*8&255,B=0;B<4&&M+.75*B<O;B++)E.push(A.charAt(ie>>>6*(3-B)&63));var j=A.charAt(64);if(j)for(;E.length%4;)E.push(j);return E.join("")},parse:function(P){var R=P.length,O=this._map,A=this._reverseMap;if(!A){A=this._reverseMap=[];for(var E=0;E<O.length;E++)A[O.charCodeAt(E)]=E}var M=O.charAt(64);if(M){var V=P.indexOf(M);-1!==V&&(R=V)}return function ne(P,R,O){for(var A=[],E=0,M=0;M<R;M++)if(M%4){var V=O[P.charCodeAt(M-1)]<<M%4*2,U=O[P.charCodeAt(M)]>>>6-M%4*2;A[E>>>2]|=(V|U)<<24-E%4*8,E++}return re.create(A,E)}(P,R,A)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},$.enc.Base64)},4410:function(_e,Se,z){var $,re;_e.exports=($=z(7585),re=$.lib.WordArray,$.enc.Base64url={stringify:function(P,R=!0){var O=P.words,A=P.sigBytes,E=R?this._safe_map:this._map;P.clamp();for(var M=[],V=0;V<A;V+=3)for(var B=(O[V>>>2]>>>24-V%4*8&255)<<16|(O[V+1>>>2]>>>24-(V+1)%4*8&255)<<8|O[V+2>>>2]>>>24-(V+2)%4*8&255,j=0;j<4&&V+.75*j<A;j++)M.push(E.charAt(B>>>6*(3-j)&63));var le=E.charAt(64);if(le)for(;M.length%4;)M.push(le);return M.join("")},parse:function(P,R=!0){var O=P.length,A=R?this._safe_map:this._map,E=this._reverseMap;if(!E){E=this._reverseMap=[];for(var M=0;M<A.length;M++)E[A.charCodeAt(M)]=M}var V=A.charAt(64);if(V){var U=P.indexOf(V);-1!==U&&(O=U)}return function ne(P,R,O){for(var A=[],E=0,M=0;M<R;M++)if(M%4){var V=O[P.charCodeAt(M-1)]<<M%4*2,U=O[P.charCodeAt(M)]>>>6-M%4*2;A[E>>>2]|=(V|U)<<24-E%4*8,E++}return re.create(A,E)}(P,O,E)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},$.enc.Base64url)},9012:function(_e,Se,z){var $;_e.exports=($=z(7585),function(){var re=$.lib.WordArray,ue=$.enc;function ne(P){return P<<8&4278255360|P>>>8&16711935}ue.Utf16=ue.Utf16BE={stringify:function(P){for(var R=P.words,O=P.sigBytes,A=[],E=0;E<O;E+=2)A.push(String.fromCharCode(R[E>>>2]>>>16-E%4*8&65535));return A.join("")},parse:function(P){for(var R=P.length,O=[],A=0;A<R;A++)O[A>>>1]|=P.charCodeAt(A)<<16-A%2*16;return re.create(O,2*R)}},ue.Utf16LE={stringify:function(P){for(var R=P.words,O=P.sigBytes,A=[],E=0;E<O;E+=2){var M=ne(R[E>>>2]>>>16-E%4*8&65535);A.push(String.fromCharCode(M))}return A.join("")},parse:function(P){for(var R=P.length,O=[],A=0;A<R;A++)O[A>>>1]|=ne(P.charCodeAt(A)<<16-A%2*16);return re.create(O,2*R)}}}(),$.enc.Utf16)},7865:function(_e,Se,z){var L,J,re,ue,K,P,$;_e.exports=($=z(7585),z(5162),z(3764),ue=(J=(L=$).lib).WordArray,P=(K=L.algo).EvpKDF=(re=J.Base).extend({cfg:re.extend({keySize:4,hasher:K.MD5,iterations:1}),init:function(R){this.cfg=this.cfg.extend(R)},compute:function(R,O){for(var A,E=this.cfg,M=E.hasher.create(),V=ue.create(),U=V.words,ae=E.keySize,ie=E.iterations;U.length<ae;){A&&M.update(A),A=M.update(R).finalize(O),M.reset();for(var B=1;B<ie;B++)A=M.finalize(A),M.reset();V.concat(A)}return V.sigBytes=4*ae,V}}),L.EvpKDF=function(R,O,A){return P.create(A).compute(R,O)},$.EvpKDF)},1847:function(_e,Se,z){var $,ue,ne;_e.exports=($=z(7585),z(3057),ue=$.lib.CipherParams,ne=$.enc.Hex,$.format.Hex={stringify:function(O){return O.ciphertext.toString(ne)},parse:function(O){var A=ne.parse(O);return ue.create({ciphertext:A})}},$.format.Hex)},3764:function(_e,Se,z){var $,K;_e.exports=($=z(7585),K=$.enc.Utf8,void($.algo.HMAC=$.lib.Base.extend({init:function(R,O){R=this._hasher=new R.init,"string"==typeof O&&(O=K.parse(O));var A=R.blockSize,E=4*A;O.sigBytes>E&&(O=R.finalize(O)),O.clamp();for(var M=this._oKey=O.clone(),V=this._iKey=O.clone(),U=M.words,ae=V.words,ie=0;ie<A;ie++)U[ie]^=1549556828,ae[ie]^=909522486;M.sigBytes=V.sigBytes=E,this.reset()},reset:function(){var R=this._hasher;R.reset(),R.update(this._iKey)},update:function(R){return this._hasher.update(R),this},finalize:function(R){var O=this._hasher,A=O.finalize(R);return O.reset(),O.finalize(this._oKey.clone().concat(A))}})))},7206:function(_e,Se,z){var $;_e.exports=($=z(7585),z(401),z(7412),z(9012),z(8319),z(4410),z(9493),z(5162),z(1817),z(8769),z(3351),z(6787),z(1971),z(4973),z(3764),z(8812),z(7865),z(3057),z(4424),z(6635),z(3592),z(9354),z(7934),z(4413),z(4630),z(187),z(1691),z(3237),z(1847),z(7466),z(7243),z(486),z(8182),z(3544),$)},7412:function(_e,Se,z){var $;_e.exports=($=z(7585),function(){if("function"==typeof ArrayBuffer){var re=$.lib.WordArray,ue=re.init,K=re.init=function(ne){if(ne instanceof ArrayBuffer&&(ne=new Uint8Array(ne)),(ne instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&ne instanceof Uint8ClampedArray||ne instanceof Int16Array||ne instanceof Uint16Array||ne instanceof Int32Array||ne instanceof Uint32Array||ne instanceof Float32Array||ne instanceof Float64Array)&&(ne=new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength)),ne instanceof Uint8Array){for(var P=ne.byteLength,R=[],O=0;O<P;O++)R[O>>>2]|=ne[O]<<24-O%4*8;ue.call(this,R,P)}else ue.apply(this,arguments)};K.prototype=re}}(),$.lib.WordArray)},9493:function(_e,Se,z){var $;_e.exports=($=z(7585),function(L){var J=$,re=J.lib,ue=re.WordArray,K=re.Hasher,ne=J.algo,P=[];!function(){for(var V=0;V<64;V++)P[V]=4294967296*L.abs(L.sin(V+1))|0}();var R=ne.MD5=K.extend({_doReset:function(){this._hash=new ue.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(V,U){for(var ae=0;ae<16;ae++){var ie=U+ae,B=V[ie];V[ie]=16711935&(B<<8|B>>>24)|4278255360&(B<<24|B>>>8)}var j=this._hash.words,le=V[U+0],ee=V[U+1],se=V[U+2],oe=V[U+3],we=V[U+4],ve=V[U+5],Pe=V[U+6],Be=V[U+7],he=V[U+8],Re=V[U+9],Ie=V[U+10],xe=V[U+11],tt=V[U+12],Ne=V[U+13],It=V[U+14],Wt=V[U+15],ye=j[0],Ae=j[1],ge=j[2],De=j[3];ye=O(ye,Ae,ge,De,le,7,P[0]),De=O(De,ye,Ae,ge,ee,12,P[1]),ge=O(ge,De,ye,Ae,se,17,P[2]),Ae=O(Ae,ge,De,ye,oe,22,P[3]),ye=O(ye,Ae,ge,De,we,7,P[4]),De=O(De,ye,Ae,ge,ve,12,P[5]),ge=O(ge,De,ye,Ae,Pe,17,P[6]),Ae=O(Ae,ge,De,ye,Be,22,P[7]),ye=O(ye,Ae,ge,De,he,7,P[8]),De=O(De,ye,Ae,ge,Re,12,P[9]),ge=O(ge,De,ye,Ae,Ie,17,P[10]),Ae=O(Ae,ge,De,ye,xe,22,P[11]),ye=O(ye,Ae,ge,De,tt,7,P[12]),De=O(De,ye,Ae,ge,Ne,12,P[13]),ge=O(ge,De,ye,Ae,It,17,P[14]),ye=A(ye,Ae=O(Ae,ge,De,ye,Wt,22,P[15]),ge,De,ee,5,P[16]),De=A(De,ye,Ae,ge,Pe,9,P[17]),ge=A(ge,De,ye,Ae,xe,14,P[18]),Ae=A(Ae,ge,De,ye,le,20,P[19]),ye=A(ye,Ae,ge,De,ve,5,P[20]),De=A(De,ye,Ae,ge,Ie,9,P[21]),ge=A(ge,De,ye,Ae,Wt,14,P[22]),Ae=A(Ae,ge,De,ye,we,20,P[23]),ye=A(ye,Ae,ge,De,Re,5,P[24]),De=A(De,ye,Ae,ge,It,9,P[25]),ge=A(ge,De,ye,Ae,oe,14,P[26]),Ae=A(Ae,ge,De,ye,he,20,P[27]),ye=A(ye,Ae,ge,De,Ne,5,P[28]),De=A(De,ye,Ae,ge,se,9,P[29]),ge=A(ge,De,ye,Ae,Be,14,P[30]),ye=E(ye,Ae=A(Ae,ge,De,ye,tt,20,P[31]),ge,De,ve,4,P[32]),De=E(De,ye,Ae,ge,he,11,P[33]),ge=E(ge,De,ye,Ae,xe,16,P[34]),Ae=E(Ae,ge,De,ye,It,23,P[35]),ye=E(ye,Ae,ge,De,ee,4,P[36]),De=E(De,ye,Ae,ge,we,11,P[37]),ge=E(ge,De,ye,Ae,Be,16,P[38]),Ae=E(Ae,ge,De,ye,Ie,23,P[39]),ye=E(ye,Ae,ge,De,Ne,4,P[40]),De=E(De,ye,Ae,ge,le,11,P[41]),ge=E(ge,De,ye,Ae,oe,16,P[42]),Ae=E(Ae,ge,De,ye,Pe,23,P[43]),ye=E(ye,Ae,ge,De,Re,4,P[44]),De=E(De,ye,Ae,ge,tt,11,P[45]),ge=E(ge,De,ye,Ae,Wt,16,P[46]),ye=M(ye,Ae=E(Ae,ge,De,ye,se,23,P[47]),ge,De,le,6,P[48]),De=M(De,ye,Ae,ge,Be,10,P[49]),ge=M(ge,De,ye,Ae,It,15,P[50]),Ae=M(Ae,ge,De,ye,ve,21,P[51]),ye=M(ye,Ae,ge,De,tt,6,P[52]),De=M(De,ye,Ae,ge,oe,10,P[53]),ge=M(ge,De,ye,Ae,Ie,15,P[54]),Ae=M(Ae,ge,De,ye,ee,21,P[55]),ye=M(ye,Ae,ge,De,he,6,P[56]),De=M(De,ye,Ae,ge,Wt,10,P[57]),ge=M(ge,De,ye,Ae,Pe,15,P[58]),Ae=M(Ae,ge,De,ye,Ne,21,P[59]),ye=M(ye,Ae,ge,De,we,6,P[60]),De=M(De,ye,Ae,ge,xe,10,P[61]),ge=M(ge,De,ye,Ae,se,15,P[62]),Ae=M(Ae,ge,De,ye,Re,21,P[63]),j[0]=j[0]+ye|0,j[1]=j[1]+Ae|0,j[2]=j[2]+ge|0,j[3]=j[3]+De|0},_doFinalize:function(){var V=this._data,U=V.words,ae=8*this._nDataBytes,ie=8*V.sigBytes;U[ie>>>5]|=128<<24-ie%32;var B=L.floor(ae/4294967296),j=ae;U[15+(ie+64>>>9<<4)]=16711935&(B<<8|B>>>24)|4278255360&(B<<24|B>>>8),U[14+(ie+64>>>9<<4)]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),V.sigBytes=4*(U.length+1),this._process();for(var le=this._hash,ee=le.words,se=0;se<4;se++){var oe=ee[se];ee[se]=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8)}return le},clone:function(){var V=K.clone.call(this);return V._hash=this._hash.clone(),V}});function O(V,U,ae,ie,B,j,le){var ee=V+(U&ae|~U&ie)+B+le;return(ee<<j|ee>>>32-j)+U}function A(V,U,ae,ie,B,j,le){var ee=V+(U&ie|ae&~ie)+B+le;return(ee<<j|ee>>>32-j)+U}function E(V,U,ae,ie,B,j,le){var ee=V+(U^ae^ie)+B+le;return(ee<<j|ee>>>32-j)+U}function M(V,U,ae,ie,B,j,le){var ee=V+(ae^(U|~ie))+B+le;return(ee<<j|ee>>>32-j)+U}J.MD5=K._createHelper(R),J.HmacMD5=K._createHmacHelper(R)}(Math),$.MD5)},4424:function(_e,Se,z){var $;_e.exports=($=z(7585),z(3057),$.mode.CFB=function(){var L=$.lib.BlockCipherMode.extend();function J(re,ue,K,ne){var P,R=this._iv;R?(P=R.slice(0),this._iv=void 0):P=this._prevBlock,ne.encryptBlock(P,0);for(var O=0;O<K;O++)re[ue+O]^=P[O]}return L.Encryptor=L.extend({processBlock:function(re,ue){var K=this._cipher,ne=K.blockSize;J.call(this,re,ue,ne,K),this._prevBlock=re.slice(ue,ue+ne)}}),L.Decryptor=L.extend({processBlock:function(re,ue){var K=this._cipher,ne=K.blockSize,P=re.slice(ue,ue+ne);J.call(this,re,ue,ne,K),this._prevBlock=P}}),L}(),$.mode.CFB)},3592:function(_e,Se,z){var $;_e.exports=($=z(7585),z(3057),$.mode.CTRGladman=function(){var L=$.lib.BlockCipherMode.extend();function J(K){if(255==(K>>24&255)){var ne=K>>16&255,P=K>>8&255,R=255&K;255===ne?(ne=0,255===P?(P=0,255===R?R=0:++R):++P):++ne,K=0,K+=ne<<16,K+=P<<8,K+=R}else K+=1<<24;return K}var ue=L.Encryptor=L.extend({processBlock:function(K,ne){var P=this._cipher,R=P.blockSize,O=this._iv,A=this._counter;O&&(A=this._counter=O.slice(0),this._iv=void 0),function re(K){return 0===(K[0]=J(K[0]))&&(K[1]=J(K[1])),K}(A);var E=A.slice(0);P.encryptBlock(E,0);for(var M=0;M<R;M++)K[ne+M]^=E[M]}});return L.Decryptor=ue,L}(),$.mode.CTRGladman)},6635:function(_e,Se,z){var L,J,$;_e.exports=($=z(7585),z(3057),$.mode.CTR=(J=(L=$.lib.BlockCipherMode.extend()).Encryptor=L.extend({processBlock:function(re,ue){var K=this._cipher,ne=K.blockSize,P=this._iv,R=this._counter;P&&(R=this._counter=P.slice(0),this._iv=void 0);var O=R.slice(0);K.encryptBlock(O,0),R[ne-1]=R[ne-1]+1|0;for(var A=0;A<ne;A++)re[ue+A]^=O[A]}}),L.Decryptor=J,L),$.mode.CTR)},7934:function(_e,Se,z){var L,$;_e.exports=($=z(7585),z(3057),$.mode.ECB=((L=$.lib.BlockCipherMode.extend()).Encryptor=L.extend({processBlock:function(J,re){this._cipher.encryptBlock(J,re)}}),L.Decryptor=L.extend({processBlock:function(J,re){this._cipher.decryptBlock(J,re)}}),L),$.mode.ECB)},9354:function(_e,Se,z){var L,J,$;_e.exports=($=z(7585),z(3057),$.mode.OFB=(J=(L=$.lib.BlockCipherMode.extend()).Encryptor=L.extend({processBlock:function(re,ue){var K=this._cipher,ne=K.blockSize,P=this._iv,R=this._keystream;P&&(R=this._keystream=P.slice(0),this._iv=void 0),K.encryptBlock(R,0);for(var O=0;O<ne;O++)re[ue+O]^=R[O]}}),L.Decryptor=J,L),$.mode.OFB)},4413:function(_e,Se,z){var $;_e.exports=($=z(7585),z(3057),$.pad.AnsiX923={pad:function(L,J){var re=L.sigBytes,ue=4*J,K=ue-re%ue,ne=re+K-1;L.clamp(),L.words[ne>>>2]|=K<<24-ne%4*8,L.sigBytes+=K},unpad:function(L){L.sigBytes-=255&L.words[L.sigBytes-1>>>2]}},$.pad.Ansix923)},4630:function(_e,Se,z){var $;_e.exports=($=z(7585),z(3057),$.pad.Iso10126={pad:function(L,J){var re=4*J,ue=re-L.sigBytes%re;L.concat($.lib.WordArray.random(ue-1)).concat($.lib.WordArray.create([ue<<24],1))},unpad:function(L){L.sigBytes-=255&L.words[L.sigBytes-1>>>2]}},$.pad.Iso10126)},187:function(_e,Se,z){var $;_e.exports=($=z(7585),z(3057),$.pad.Iso97971={pad:function(L,J){L.concat($.lib.WordArray.create([2147483648],1)),$.pad.ZeroPadding.pad(L,J)},unpad:function(L){$.pad.ZeroPadding.unpad(L),L.sigBytes--}},$.pad.Iso97971)},3237:function(_e,Se,z){var $;_e.exports=($=z(7585),z(3057),$.pad.NoPadding={pad:function(){},unpad:function(){}},$.pad.NoPadding)},1691:function(_e,Se,z){var $;_e.exports=($=z(7585),z(3057),$.pad.ZeroPadding={pad:function(L,J){var re=4*J;L.clamp(),L.sigBytes+=re-(L.sigBytes%re||re)},unpad:function(L){var J=L.words,re=L.sigBytes-1;for(re=L.sigBytes-1;re>=0;re--)if(J[re>>>2]>>>24-re%4*8&255){L.sigBytes=re+1;break}}},$.pad.ZeroPadding)},8812:function(_e,Se,z){var L,J,re,ue,K,P,R,$;_e.exports=($=z(7585),z(5162),z(3764),ue=(J=(L=$).lib).WordArray,P=(K=L.algo).HMAC,R=K.PBKDF2=(re=J.Base).extend({cfg:re.extend({keySize:4,hasher:K.SHA1,iterations:1}),init:function(O){this.cfg=this.cfg.extend(O)},compute:function(O,A){for(var E=this.cfg,M=P.create(E.hasher,O),V=ue.create(),U=ue.create([1]),ae=V.words,ie=U.words,B=E.keySize,j=E.iterations;ae.length<B;){var le=M.update(A).finalize(U);M.reset();for(var ee=le.words,se=ee.length,oe=le,we=1;we<j;we++){oe=M.finalize(oe),M.reset();for(var ve=oe.words,Pe=0;Pe<se;Pe++)ee[Pe]^=ve[Pe]}V.concat(le),ie[0]++}return V.sigBytes=4*B,V}}),L.PBKDF2=function(O,A,E){return R.create(E).compute(O,A)},$.PBKDF2)},3544:function(_e,Se,z){var $;_e.exports=($=z(7585),z(8319),z(9493),z(7865),z(3057),function(){var L=$,re=L.lib.StreamCipher,K=[],ne=[],P=[],R=L.algo.RabbitLegacy=re.extend({_doReset:function(){var A=this._key.words,E=this.cfg.iv,M=this._X=[A[0],A[3]<<16|A[2]>>>16,A[1],A[0]<<16|A[3]>>>16,A[2],A[1]<<16|A[0]>>>16,A[3],A[2]<<16|A[1]>>>16],V=this._C=[A[2]<<16|A[2]>>>16,4294901760&A[0]|65535&A[1],A[3]<<16|A[3]>>>16,4294901760&A[1]|65535&A[2],A[0]<<16|A[0]>>>16,4294901760&A[2]|65535&A[3],A[1]<<16|A[1]>>>16,4294901760&A[3]|65535&A[0]];this._b=0;for(var U=0;U<4;U++)O.call(this);for(U=0;U<8;U++)V[U]^=M[U+4&7];if(E){var ae=E.words,ie=ae[0],B=ae[1],j=16711935&(ie<<8|ie>>>24)|4278255360&(ie<<24|ie>>>8),le=16711935&(B<<8|B>>>24)|4278255360&(B<<24|B>>>8),ee=j>>>16|4294901760&le,se=le<<16|65535&j;for(V[0]^=j,V[1]^=ee,V[2]^=le,V[3]^=se,V[4]^=j,V[5]^=ee,V[6]^=le,V[7]^=se,U=0;U<4;U++)O.call(this)}},_doProcessBlock:function(A,E){var M=this._X;O.call(this),K[0]=M[0]^M[5]>>>16^M[3]<<16,K[1]=M[2]^M[7]>>>16^M[5]<<16,K[2]=M[4]^M[1]>>>16^M[7]<<16,K[3]=M[6]^M[3]>>>16^M[1]<<16;for(var V=0;V<4;V++)K[V]=16711935&(K[V]<<8|K[V]>>>24)|4278255360&(K[V]<<24|K[V]>>>8),A[E+V]^=K[V]},blockSize:4,ivSize:2});function O(){for(var A=this._X,E=this._C,M=0;M<8;M++)ne[M]=E[M];for(E[0]=E[0]+1295307597+this._b|0,E[1]=E[1]+3545052371+(E[0]>>>0<ne[0]>>>0?1:0)|0,E[2]=E[2]+886263092+(E[1]>>>0<ne[1]>>>0?1:0)|0,E[3]=E[3]+1295307597+(E[2]>>>0<ne[2]>>>0?1:0)|0,E[4]=E[4]+3545052371+(E[3]>>>0<ne[3]>>>0?1:0)|0,E[5]=E[5]+886263092+(E[4]>>>0<ne[4]>>>0?1:0)|0,E[6]=E[6]+1295307597+(E[5]>>>0<ne[5]>>>0?1:0)|0,E[7]=E[7]+3545052371+(E[6]>>>0<ne[6]>>>0?1:0)|0,this._b=E[7]>>>0<ne[7]>>>0?1:0,M=0;M<8;M++){var V=A[M]+E[M],U=65535&V,ae=V>>>16;P[M]=((U*U>>>17)+U*ae>>>15)+ae*ae^((4294901760&V)*V|0)+((65535&V)*V|0)}A[0]=P[0]+(P[7]<<16|P[7]>>>16)+(P[6]<<16|P[6]>>>16)|0,A[1]=P[1]+(P[0]<<8|P[0]>>>24)+P[7]|0,A[2]=P[2]+(P[1]<<16|P[1]>>>16)+(P[0]<<16|P[0]>>>16)|0,A[3]=P[3]+(P[2]<<8|P[2]>>>24)+P[1]|0,A[4]=P[4]+(P[3]<<16|P[3]>>>16)+(P[2]<<16|P[2]>>>16)|0,A[5]=P[5]+(P[4]<<8|P[4]>>>24)+P[3]|0,A[6]=P[6]+(P[5]<<16|P[5]>>>16)+(P[4]<<16|P[4]>>>16)|0,A[7]=P[7]+(P[6]<<8|P[6]>>>24)+P[5]|0}L.RabbitLegacy=re._createHelper(R)}(),$.RabbitLegacy)},8182:function(_e,Se,z){var $;_e.exports=($=z(7585),z(8319),z(9493),z(7865),z(3057),function(){var L=$,re=L.lib.StreamCipher,K=[],ne=[],P=[],R=L.algo.Rabbit=re.extend({_doReset:function(){for(var A=this._key.words,E=this.cfg.iv,M=0;M<4;M++)A[M]=16711935&(A[M]<<8|A[M]>>>24)|4278255360&(A[M]<<24|A[M]>>>8);var V=this._X=[A[0],A[3]<<16|A[2]>>>16,A[1],A[0]<<16|A[3]>>>16,A[2],A[1]<<16|A[0]>>>16,A[3],A[2]<<16|A[1]>>>16],U=this._C=[A[2]<<16|A[2]>>>16,4294901760&A[0]|65535&A[1],A[3]<<16|A[3]>>>16,4294901760&A[1]|65535&A[2],A[0]<<16|A[0]>>>16,4294901760&A[2]|65535&A[3],A[1]<<16|A[1]>>>16,4294901760&A[3]|65535&A[0]];for(this._b=0,M=0;M<4;M++)O.call(this);for(M=0;M<8;M++)U[M]^=V[M+4&7];if(E){var ae=E.words,ie=ae[0],B=ae[1],j=16711935&(ie<<8|ie>>>24)|4278255360&(ie<<24|ie>>>8),le=16711935&(B<<8|B>>>24)|4278255360&(B<<24|B>>>8),ee=j>>>16|4294901760&le,se=le<<16|65535&j;for(U[0]^=j,U[1]^=ee,U[2]^=le,U[3]^=se,U[4]^=j,U[5]^=ee,U[6]^=le,U[7]^=se,M=0;M<4;M++)O.call(this)}},_doProcessBlock:function(A,E){var M=this._X;O.call(this),K[0]=M[0]^M[5]>>>16^M[3]<<16,K[1]=M[2]^M[7]>>>16^M[5]<<16,K[2]=M[4]^M[1]>>>16^M[7]<<16,K[3]=M[6]^M[3]>>>16^M[1]<<16;for(var V=0;V<4;V++)K[V]=16711935&(K[V]<<8|K[V]>>>24)|4278255360&(K[V]<<24|K[V]>>>8),A[E+V]^=K[V]},blockSize:4,ivSize:2});function O(){for(var A=this._X,E=this._C,M=0;M<8;M++)ne[M]=E[M];for(E[0]=E[0]+1295307597+this._b|0,E[1]=E[1]+3545052371+(E[0]>>>0<ne[0]>>>0?1:0)|0,E[2]=E[2]+886263092+(E[1]>>>0<ne[1]>>>0?1:0)|0,E[3]=E[3]+1295307597+(E[2]>>>0<ne[2]>>>0?1:0)|0,E[4]=E[4]+3545052371+(E[3]>>>0<ne[3]>>>0?1:0)|0,E[5]=E[5]+886263092+(E[4]>>>0<ne[4]>>>0?1:0)|0,E[6]=E[6]+1295307597+(E[5]>>>0<ne[5]>>>0?1:0)|0,E[7]=E[7]+3545052371+(E[6]>>>0<ne[6]>>>0?1:0)|0,this._b=E[7]>>>0<ne[7]>>>0?1:0,M=0;M<8;M++){var V=A[M]+E[M],U=65535&V,ae=V>>>16;P[M]=((U*U>>>17)+U*ae>>>15)+ae*ae^((4294901760&V)*V|0)+((65535&V)*V|0)}A[0]=P[0]+(P[7]<<16|P[7]>>>16)+(P[6]<<16|P[6]>>>16)|0,A[1]=P[1]+(P[0]<<8|P[0]>>>24)+P[7]|0,A[2]=P[2]+(P[1]<<16|P[1]>>>16)+(P[0]<<16|P[0]>>>16)|0,A[3]=P[3]+(P[2]<<8|P[2]>>>24)+P[1]|0,A[4]=P[4]+(P[3]<<16|P[3]>>>16)+(P[2]<<16|P[2]>>>16)|0,A[5]=P[5]+(P[4]<<8|P[4]>>>24)+P[3]|0,A[6]=P[6]+(P[5]<<16|P[5]>>>16)+(P[4]<<16|P[4]>>>16)|0,A[7]=P[7]+(P[6]<<8|P[6]>>>24)+P[5]|0}L.Rabbit=re._createHelper(R)}(),$.Rabbit)},486:function(_e,Se,z){var $;_e.exports=($=z(7585),z(8319),z(9493),z(7865),z(3057),function(){var L=$,re=L.lib.StreamCipher,ue=L.algo,K=ue.RC4=re.extend({_doReset:function(){for(var R=this._key,O=R.words,A=R.sigBytes,E=this._S=[],M=0;M<256;M++)E[M]=M;M=0;for(var V=0;M<256;M++){var U=M%A,ie=E[M];E[M]=E[V=(V+E[M]+(O[U>>>2]>>>24-U%4*8&255))%256],E[V]=ie}this._i=this._j=0},_doProcessBlock:function(R,O){R[O]^=ne.call(this)},keySize:8,ivSize:0});function ne(){for(var R=this._S,O=this._i,A=this._j,E=0,M=0;M<4;M++){var V=R[O=(O+1)%256];R[O]=R[A=(A+R[O])%256],R[A]=V,E|=R[(R[O]+R[A])%256]<<24-8*M}return this._i=O,this._j=A,E}L.RC4=re._createHelper(K);var P=ue.RC4Drop=K.extend({cfg:K.cfg.extend({drop:192}),_doReset:function(){K._doReset.call(this);for(var R=this.cfg.drop;R>0;R--)ne.call(this)}});L.RC4Drop=re._createHelper(P)}(),$.RC4)},4973:function(_e,Se,z){var $;_e.exports=($=z(7585),function(L){var J=$,re=J.lib,ue=re.WordArray,K=re.Hasher,ne=J.algo,P=ue.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),R=ue.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),O=ue.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),A=ue.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),E=ue.create([0,1518500249,1859775393,2400959708,2840853838]),M=ue.create([1352829926,1548603684,1836072691,2053994217,0]),V=ne.RIPEMD160=K.extend({_doReset:function(){this._hash=ue.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ee,se){for(var oe=0;oe<16;oe++){var we=se+oe,ve=ee[we];ee[we]=16711935&(ve<<8|ve>>>24)|4278255360&(ve<<24|ve>>>8)}var Ne,It,Wt,ye,Ae,ge,De,wn,gt,Ft,Bt,Pe=this._hash.words,Be=E.words,he=M.words,Re=P.words,Ie=R.words,xe=O.words,tt=A.words;for(ge=Ne=Pe[0],De=It=Pe[1],wn=Wt=Pe[2],gt=ye=Pe[3],Ft=Ae=Pe[4],oe=0;oe<80;oe+=1)Bt=Ne+ee[se+Re[oe]]|0,Bt+=oe<16?U(It,Wt,ye)+Be[0]:oe<32?ae(It,Wt,ye)+Be[1]:oe<48?ie(It,Wt,ye)+Be[2]:oe<64?B(It,Wt,ye)+Be[3]:j(It,Wt,ye)+Be[4],Bt=(Bt=le(Bt|=0,xe[oe]))+Ae|0,Ne=Ae,Ae=ye,ye=le(Wt,10),Wt=It,It=Bt,Bt=ge+ee[se+Ie[oe]]|0,Bt+=oe<16?j(De,wn,gt)+he[0]:oe<32?B(De,wn,gt)+he[1]:oe<48?ie(De,wn,gt)+he[2]:oe<64?ae(De,wn,gt)+he[3]:U(De,wn,gt)+he[4],Bt=(Bt=le(Bt|=0,tt[oe]))+Ft|0,ge=Ft,Ft=gt,gt=le(wn,10),wn=De,De=Bt;Bt=Pe[1]+Wt+gt|0,Pe[1]=Pe[2]+ye+Ft|0,Pe[2]=Pe[3]+Ae+ge|0,Pe[3]=Pe[4]+Ne+De|0,Pe[4]=Pe[0]+It+wn|0,Pe[0]=Bt},_doFinalize:function(){var ee=this._data,se=ee.words,oe=8*this._nDataBytes,we=8*ee.sigBytes;se[we>>>5]|=128<<24-we%32,se[14+(we+64>>>9<<4)]=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8),ee.sigBytes=4*(se.length+1),this._process();for(var ve=this._hash,Pe=ve.words,Be=0;Be<5;Be++){var he=Pe[Be];Pe[Be]=16711935&(he<<8|he>>>24)|4278255360&(he<<24|he>>>8)}return ve},clone:function(){var ee=K.clone.call(this);return ee._hash=this._hash.clone(),ee}});function U(ee,se,oe){return ee^se^oe}function ae(ee,se,oe){return ee&se|~ee&oe}function ie(ee,se,oe){return(ee|~se)^oe}function B(ee,se,oe){return ee&oe|se&~oe}function j(ee,se,oe){return ee^(se|~oe)}function le(ee,se){return ee<<se|ee>>>32-se}J.RIPEMD160=K._createHelper(V),J.HmacRIPEMD160=K._createHmacHelper(V)}(Math),$.RIPEMD160)},5162:function(_e,Se,z){var L,J,re,ue,ne,P,$;_e.exports=($=z(7585),re=(J=(L=$).lib).WordArray,ne=[],P=L.algo.SHA1=(ue=J.Hasher).extend({_doReset:function(){this._hash=new re.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(R,O){for(var A=this._hash.words,E=A[0],M=A[1],V=A[2],U=A[3],ae=A[4],ie=0;ie<80;ie++){if(ie<16)ne[ie]=0|R[O+ie];else{var B=ne[ie-3]^ne[ie-8]^ne[ie-14]^ne[ie-16];ne[ie]=B<<1|B>>>31}var j=(E<<5|E>>>27)+ae+ne[ie];j+=ie<20?1518500249+(M&V|~M&U):ie<40?1859775393+(M^V^U):ie<60?(M&V|M&U|V&U)-1894007588:(M^V^U)-899497514,ae=U,U=V,V=M<<30|M>>>2,M=E,E=j}A[0]=A[0]+E|0,A[1]=A[1]+M|0,A[2]=A[2]+V|0,A[3]=A[3]+U|0,A[4]=A[4]+ae|0},_doFinalize:function(){var R=this._data,O=R.words,A=8*this._nDataBytes,E=8*R.sigBytes;return O[E>>>5]|=128<<24-E%32,O[14+(E+64>>>9<<4)]=Math.floor(A/4294967296),O[15+(E+64>>>9<<4)]=A,R.sigBytes=4*O.length,this._process(),this._hash},clone:function(){var R=ue.clone.call(this);return R._hash=this._hash.clone(),R}}),L.SHA1=ue._createHelper(P),L.HmacSHA1=ue._createHmacHelper(P),$.SHA1)},8769:function(_e,Se,z){var L,re,ue,K,ne,$;_e.exports=($=z(7585),z(1817),re=(L=$).lib.WordArray,ne=(ue=L.algo).SHA224=(K=ue.SHA256).extend({_doReset:function(){this._hash=new re.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var P=K._doFinalize.call(this);return P.sigBytes-=4,P}}),L.SHA224=K._createHelper(ne),L.HmacSHA224=K._createHmacHelper(ne),$.SHA224)},1817:function(_e,Se,z){var $;_e.exports=($=z(7585),function(L){var J=$,re=J.lib,ue=re.WordArray,K=re.Hasher,ne=J.algo,P=[],R=[];!function(){function E(ae){for(var ie=L.sqrt(ae),B=2;B<=ie;B++)if(!(ae%B))return!1;return!0}function M(ae){return 4294967296*(ae-(0|ae))|0}for(var V=2,U=0;U<64;)E(V)&&(U<8&&(P[U]=M(L.pow(V,.5))),R[U]=M(L.pow(V,1/3)),U++),V++}();var O=[],A=ne.SHA256=K.extend({_doReset:function(){this._hash=new ue.init(P.slice(0))},_doProcessBlock:function(E,M){for(var V=this._hash.words,U=V[0],ae=V[1],ie=V[2],B=V[3],j=V[4],le=V[5],ee=V[6],se=V[7],oe=0;oe<64;oe++){if(oe<16)O[oe]=0|E[M+oe];else{var we=O[oe-15],Pe=O[oe-2];O[oe]=((we<<25|we>>>7)^(we<<14|we>>>18)^we>>>3)+O[oe-7]+((Pe<<15|Pe>>>17)^(Pe<<13|Pe>>>19)^Pe>>>10)+O[oe-16]}var Re=U&ae^U&ie^ae&ie,tt=se+((j<<26|j>>>6)^(j<<21|j>>>11)^(j<<7|j>>>25))+(j&le^~j&ee)+R[oe]+O[oe];se=ee,ee=le,le=j,j=B+tt|0,B=ie,ie=ae,ae=U,U=tt+(((U<<30|U>>>2)^(U<<19|U>>>13)^(U<<10|U>>>22))+Re)|0}V[0]=V[0]+U|0,V[1]=V[1]+ae|0,V[2]=V[2]+ie|0,V[3]=V[3]+B|0,V[4]=V[4]+j|0,V[5]=V[5]+le|0,V[6]=V[6]+ee|0,V[7]=V[7]+se|0},_doFinalize:function(){var E=this._data,M=E.words,V=8*this._nDataBytes,U=8*E.sigBytes;return M[U>>>5]|=128<<24-U%32,M[14+(U+64>>>9<<4)]=L.floor(V/4294967296),M[15+(U+64>>>9<<4)]=V,E.sigBytes=4*M.length,this._process(),this._hash},clone:function(){var E=K.clone.call(this);return E._hash=this._hash.clone(),E}});J.SHA256=K._createHelper(A),J.HmacSHA256=K._createHmacHelper(A)}(Math),$.SHA256)},1971:function(_e,Se,z){var $;_e.exports=($=z(7585),z(401),function(L){var J=$,re=J.lib,ue=re.WordArray,K=re.Hasher,P=J.x64.Word,R=J.algo,O=[],A=[],E=[];!function(){for(var U=1,ae=0,ie=0;ie<24;ie++){O[U+5*ae]=(ie+1)*(ie+2)/2%64;var j=(2*U+3*ae)%5;U=ae%5,ae=j}for(U=0;U<5;U++)for(ae=0;ae<5;ae++)A[U+5*ae]=ae+(2*U+3*ae)%5*5;for(var le=1,ee=0;ee<24;ee++){for(var se=0,oe=0,we=0;we<7;we++){if(1&le){var ve=(1<<we)-1;ve<32?oe^=1<<ve:se^=1<<ve-32}128&le?le=le<<1^113:le<<=1}E[ee]=P.create(se,oe)}}();var M=[];!function(){for(var U=0;U<25;U++)M[U]=P.create()}();var V=R.SHA3=K.extend({cfg:K.cfg.extend({outputLength:512}),_doReset:function(){for(var U=this._state=[],ae=0;ae<25;ae++)U[ae]=new P.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(U,ae){for(var ie=this._state,B=this.blockSize/2,j=0;j<B;j++){var le=U[ae+2*j],ee=U[ae+2*j+1];le=16711935&(le<<8|le>>>24)|4278255360&(le<<24|le>>>8),(se=ie[j]).high^=ee=16711935&(ee<<8|ee>>>24)|4278255360&(ee<<24|ee>>>8),se.low^=le}for(var oe=0;oe<24;oe++){for(var we=0;we<5;we++){for(var ve=0,Pe=0,Be=0;Be<5;Be++)ve^=(se=ie[we+5*Be]).high,Pe^=se.low;var he=M[we];he.high=ve,he.low=Pe}for(we=0;we<5;we++){var Re=M[(we+4)%5],Ie=M[(we+1)%5],xe=Ie.high,tt=Ie.low;for(ve=Re.high^(xe<<1|tt>>>31),Pe=Re.low^(tt<<1|xe>>>31),Be=0;Be<5;Be++)(se=ie[we+5*Be]).high^=ve,se.low^=Pe}for(var Ne=1;Ne<25;Ne++){var It=(se=ie[Ne]).high,Wt=se.low,ye=O[Ne];ye<32?(ve=It<<ye|Wt>>>32-ye,Pe=Wt<<ye|It>>>32-ye):(ve=Wt<<ye-32|It>>>64-ye,Pe=It<<ye-32|Wt>>>64-ye);var Ae=M[A[Ne]];Ae.high=ve,Ae.low=Pe}var ge=M[0],De=ie[0];for(ge.high=De.high,ge.low=De.low,we=0;we<5;we++)for(Be=0;Be<5;Be++){var wn=M[Ne=we+5*Be],gt=M[(we+1)%5+5*Be],Ft=M[(we+2)%5+5*Be];(se=ie[Ne]).high=wn.high^~gt.high&Ft.high,se.low=wn.low^~gt.low&Ft.low}var se,Bt=E[oe];(se=ie[0]).high^=Bt.high,se.low^=Bt.low}},_doFinalize:function(){var U=this._data,ae=U.words,B=8*U.sigBytes,j=32*this.blockSize;ae[B>>>5]|=1<<24-B%32,ae[(L.ceil((B+1)/j)*j>>>5)-1]|=128,U.sigBytes=4*ae.length,this._process();for(var le=this._state,ee=this.cfg.outputLength/8,se=ee/8,oe=[],we=0;we<se;we++){var ve=le[we],Pe=ve.high,Be=ve.low;Pe=16711935&(Pe<<8|Pe>>>24)|4278255360&(Pe<<24|Pe>>>8),oe.push(Be=16711935&(Be<<8|Be>>>24)|4278255360&(Be<<24|Be>>>8)),oe.push(Pe)}return new ue.init(oe,ee)},clone:function(){for(var U=K.clone.call(this),ae=U._state=this._state.slice(0),ie=0;ie<25;ie++)ae[ie]=ae[ie].clone();return U}});J.SHA3=K._createHelper(V),J.HmacSHA3=K._createHmacHelper(V)}(Math),$.SHA3)},6787:function(_e,Se,z){var L,J,re,ue,K,ne,P,$;_e.exports=($=z(7585),z(401),z(3351),re=(J=(L=$).x64).Word,ue=J.WordArray,P=(K=L.algo).SHA384=(ne=K.SHA512).extend({_doReset:function(){this._hash=new ue.init([new re.init(3418070365,3238371032),new re.init(1654270250,914150663),new re.init(2438529370,812702999),new re.init(355462360,4144912697),new re.init(1731405415,4290775857),new re.init(2394180231,1750603025),new re.init(3675008525,1694076839),new re.init(1203062813,3204075428)])},_doFinalize:function(){var R=ne._doFinalize.call(this);return R.sigBytes-=16,R}}),L.SHA384=ne._createHelper(P),L.HmacSHA384=ne._createHmacHelper(P),$.SHA384)},3351:function(_e,Se,z){var $;_e.exports=($=z(7585),z(401),function(){var L=$,re=L.lib.Hasher,ue=L.x64,K=ue.Word,ne=ue.WordArray,P=L.algo;function R(){return K.create.apply(K,arguments)}var O=[R(1116352408,3609767458),R(1899447441,602891725),R(3049323471,3964484399),R(3921009573,2173295548),R(961987163,4081628472),R(1508970993,3053834265),R(2453635748,2937671579),R(2870763221,3664609560),R(3624381080,2734883394),R(310598401,1164996542),R(607225278,1323610764),R(1426881987,3590304994),R(1925078388,4068182383),R(2162078206,991336113),R(2614888103,633803317),R(3248222580,3479774868),R(3835390401,2666613458),R(4022224774,944711139),R(264347078,2341262773),R(604807628,2007800933),R(770255983,1495990901),R(1249150122,1856431235),R(1555081692,3175218132),R(1996064986,2198950837),R(2554220882,3999719339),R(2821834349,766784016),R(2952996808,2566594879),R(3210313671,3203337956),R(3336571891,1034457026),R(3584528711,2466948901),R(113926993,3758326383),R(338241895,168717936),R(666307205,1188179964),R(773529912,1546045734),R(1294757372,1522805485),R(1396182291,2643833823),R(1695183700,2343527390),R(1986661051,1014477480),R(2177026350,1206759142),R(2456956037,344077627),R(2730485921,1290863460),R(2820302411,3158454273),R(3259730800,3505952657),R(3345764771,106217008),R(3516065817,3606008344),R(3600352804,1432725776),R(4094571909,1467031594),R(275423344,851169720),R(430227734,3100823752),R(506948616,1363258195),R(659060556,3750685593),R(883997877,3785050280),R(958139571,3318307427),R(1322822218,3812723403),R(1537002063,2003034995),R(1747873779,3602036899),R(1955562222,1575990012),R(2024104815,1125592928),R(2227730452,2716904306),R(2361852424,442776044),R(2428436474,593698344),R(2756734187,3733110249),R(3204031479,2999351573),R(3329325298,3815920427),R(3391569614,3928383900),R(3515267271,566280711),R(3940187606,3454069534),R(4118630271,4000239992),R(116418474,1914138554),R(174292421,2731055270),R(289380356,3203993006),R(460393269,320620315),R(685471733,587496836),R(852142971,1086792851),R(1017036298,365543100),R(1126000580,2618297676),R(1288033470,3409855158),R(1501505948,4234509866),R(1607167915,987167468),R(1816402316,1246189591)],A=[];!function(){for(var M=0;M<80;M++)A[M]=R()}();var E=P.SHA512=re.extend({_doReset:function(){this._hash=new ne.init([new K.init(1779033703,4089235720),new K.init(3144134277,2227873595),new K.init(1013904242,4271175723),new K.init(2773480762,1595750129),new K.init(1359893119,2917565137),new K.init(2600822924,725511199),new K.init(528734635,4215389547),new K.init(1541459225,327033209)])},_doProcessBlock:function(M,V){for(var U=this._hash.words,ae=U[0],ie=U[1],B=U[2],j=U[3],le=U[4],ee=U[5],se=U[6],oe=U[7],we=ae.high,ve=ae.low,Pe=ie.high,Be=ie.low,he=B.high,Re=B.low,Ie=j.high,xe=j.low,tt=le.high,Ne=le.low,It=ee.high,Wt=ee.low,ye=se.high,Ae=se.low,ge=oe.high,De=oe.low,wn=we,gt=ve,Ft=Pe,Bt=Be,Mt=he,ya=Re,Fu=Ie,fs=xe,Nr=tt,Ue=Ne,Hl=It,We=Wt,yo=ye,Co=Ae,wo=ge,So=De,lr=0;lr<80;lr++){var cr,ja,Gl=A[lr];if(lr<16)ja=Gl.high=0|M[V+2*lr],cr=Gl.low=0|M[V+2*lr+1];else{var Df=A[lr-15],ur=Df.high,Us=Df.low,Bu=(Us>>>1|ur<<31)^(Us>>>8|ur<<24)^(Us>>>7|ur<<25),Rf=A[lr-2],ps=Rf.high,To=Rf.low,xf=(To>>>19|ps<<13)^(To<<3|ps>>>29)^(To>>>6|ps<<26),Mf=A[lr-7],zl=A[lr-16],$l=zl.low;Gl.high=ja=(ja=(ja=((ur>>>1|Us<<31)^(ur>>>8|Us<<24)^ur>>>7)+Mf.high+((cr=Bu+Mf.low)>>>0<Bu>>>0?1:0))+((ps>>>19|To<<13)^(ps<<3|To>>>29)^ps>>>6)+((cr+=xf)>>>0<xf>>>0?1:0))+zl.high+((cr+=$l)>>>0<$l>>>0?1:0),Gl.low=cr}var qi,kf=Nr&Hl^~Nr&yo,Wl=Ue&We^~Ue&Co,Hu=wn&Ft^wn&Mt^Ft&Mt,pi=(gt>>>28|wn<<4)^(gt<<30|wn>>>2)^(gt<<25|wn>>>7),zu=O[lr],ql=zu.low,Ca=wo+((Nr>>>14|Ue<<18)^(Nr>>>18|Ue<<14)^(Nr<<23|Ue>>>9))+((qi=So+((Ue>>>14|Nr<<18)^(Ue>>>18|Nr<<14)^(Ue<<23|Nr>>>9)))>>>0<So>>>0?1:0),Or=pi+(gt&Bt^gt&ya^Bt&ya);wo=yo,So=Co,yo=Hl,Co=We,Hl=Nr,We=Ue,Nr=Fu+(Ca=(Ca=(Ca=Ca+kf+((qi+=Wl)>>>0<Wl>>>0?1:0))+zu.high+((qi+=ql)>>>0<ql>>>0?1:0))+ja+((qi+=cr)>>>0<cr>>>0?1:0))+((Ue=fs+qi|0)>>>0<fs>>>0?1:0)|0,Fu=Mt,fs=ya,Mt=Ft,ya=Bt,Ft=wn,Bt=gt,wn=Ca+(((wn>>>28|gt<<4)^(wn<<30|gt>>>2)^(wn<<25|gt>>>7))+Hu+(Or>>>0<pi>>>0?1:0))+((gt=qi+Or|0)>>>0<qi>>>0?1:0)|0}ve=ae.low=ve+gt,ae.high=we+wn+(ve>>>0<gt>>>0?1:0),Be=ie.low=Be+Bt,ie.high=Pe+Ft+(Be>>>0<Bt>>>0?1:0),Re=B.low=Re+ya,B.high=he+Mt+(Re>>>0<ya>>>0?1:0),xe=j.low=xe+fs,j.high=Ie+Fu+(xe>>>0<fs>>>0?1:0),Ne=le.low=Ne+Ue,le.high=tt+Nr+(Ne>>>0<Ue>>>0?1:0),Wt=ee.low=Wt+We,ee.high=It+Hl+(Wt>>>0<We>>>0?1:0),Ae=se.low=Ae+Co,se.high=ye+yo+(Ae>>>0<Co>>>0?1:0),De=oe.low=De+So,oe.high=ge+wo+(De>>>0<So>>>0?1:0)},_doFinalize:function(){var M=this._data,V=M.words,U=8*this._nDataBytes,ae=8*M.sigBytes;return V[ae>>>5]|=128<<24-ae%32,V[30+(ae+128>>>10<<5)]=Math.floor(U/4294967296),V[31+(ae+128>>>10<<5)]=U,M.sigBytes=4*V.length,this._process(),this._hash.toX32()},clone:function(){var M=re.clone.call(this);return M._hash=this._hash.clone(),M},blockSize:32});L.SHA512=re._createHelper(E),L.HmacSHA512=re._createHmacHelper(E)}(),$.SHA512)},7243:function(_e,Se,z){var $;_e.exports=($=z(7585),z(8319),z(9493),z(7865),z(3057),function(){var L=$,J=L.lib,re=J.WordArray,ue=J.BlockCipher,K=L.algo,ne=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],P=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],R=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],O=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],A=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],E=K.DES=ue.extend({_doReset:function(){for(var ie=this._key.words,B=[],j=0;j<56;j++){var le=ne[j]-1;B[j]=ie[le>>>5]>>>31-le%32&1}for(var ee=this._subKeys=[],se=0;se<16;se++){var oe=ee[se]=[],we=R[se];for(j=0;j<24;j++)oe[j/6|0]|=B[(P[j]-1+we)%28]<<31-j%6,oe[4+(j/6|0)]|=B[28+(P[j+24]-1+we)%28]<<31-j%6;for(oe[0]=oe[0]<<1|oe[0]>>>31,j=1;j<7;j++)oe[j]=oe[j]>>>4*(j-1)+3;oe[7]=oe[7]<<5|oe[7]>>>27}var ve=this._invSubKeys=[];for(j=0;j<16;j++)ve[j]=ee[15-j]},encryptBlock:function(ae,ie){this._doCryptBlock(ae,ie,this._subKeys)},decryptBlock:function(ae,ie){this._doCryptBlock(ae,ie,this._invSubKeys)},_doCryptBlock:function(ae,ie,B){this._lBlock=ae[ie],this._rBlock=ae[ie+1],M.call(this,4,252645135),M.call(this,16,65535),V.call(this,2,858993459),V.call(this,8,16711935),M.call(this,1,1431655765);for(var j=0;j<16;j++){for(var le=B[j],ee=this._lBlock,se=this._rBlock,oe=0,we=0;we<8;we++)oe|=O[we][((se^le[we])&A[we])>>>0];this._lBlock=se,this._rBlock=ee^oe}var ve=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ve,M.call(this,1,1431655765),V.call(this,8,16711935),V.call(this,2,858993459),M.call(this,16,65535),M.call(this,4,252645135),ae[ie]=this._lBlock,ae[ie+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function M(ae,ie){var B=(this._lBlock>>>ae^this._rBlock)&ie;this._rBlock^=B,this._lBlock^=B<<ae}function V(ae,ie){var B=(this._rBlock>>>ae^this._lBlock)&ie;this._lBlock^=B,this._rBlock^=B<<ae}L.DES=ue._createHelper(E);var U=K.TripleDES=ue.extend({_doReset:function(){var ie=this._key.words;if(2!==ie.length&&4!==ie.length&&ie.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var B=ie.slice(0,2),j=ie.length<4?ie.slice(0,2):ie.slice(2,4),le=ie.length<6?ie.slice(0,2):ie.slice(4,6);this._des1=E.createEncryptor(re.create(B)),this._des2=E.createEncryptor(re.create(j)),this._des3=E.createEncryptor(re.create(le))},encryptBlock:function(ae,ie){this._des1.encryptBlock(ae,ie),this._des2.decryptBlock(ae,ie),this._des3.encryptBlock(ae,ie)},decryptBlock:function(ae,ie){this._des3.decryptBlock(ae,ie),this._des2.encryptBlock(ae,ie),this._des1.decryptBlock(ae,ie)},keySize:6,ivSize:2,blockSize:2});L.TripleDES=ue._createHelper(U)}(),$.TripleDES)},401:function(_e,Se,z){var re,ue,K,ne,$;_e.exports=($=z(7585),ue=(re=$.lib).Base,K=re.WordArray,(ne=$.x64={}).Word=ue.extend({init:function(O,A){this.high=O,this.low=A}}),ne.WordArray=ue.extend({init:function(O,A){O=this.words=O||[],this.sigBytes=null!=A?A:8*O.length},toX32:function(){for(var O=this.words,A=O.length,E=[],M=0;M<A;M++){var V=O[M];E.push(V.high),E.push(V.low)}return K.create(E,this.sigBytes)},clone:function(){for(var O=ue.clone.call(this),A=O.words=this.words.slice(0),E=A.length,M=0;M<E;M++)A[M]=A[M].clone();return O}}),$)},340:(_e,Se,z)=>{var $=z(9471),L=z(2992),J=z(7657),re=z(5583),ue=z(1929),K=z(8083),ne=z(3818);ne.alea=$,ne.xor128=L,ne.xorwow=J,ne.xorshift7=re,ne.xor4096=ue,ne.tychei=K,_e.exports=ne},9471:function(_e,Se,z){var $;!function(L,J,re){function ue(R){var O=this,A=function P(){var R=4022871197;return function(A){A=String(A);for(var E=0;E<A.length;E++){var M=.02519603282416938*(R+=A.charCodeAt(E));M-=R=M>>>0,R=(M*=R)>>>0,R+=4294967296*(M-=R)}return 2.3283064365386963e-10*(R>>>0)}}();O.next=function(){var E=2091639*O.s0+2.3283064365386963e-10*O.c;return O.s0=O.s1,O.s1=O.s2,O.s2=E-(O.c=0|E)},O.c=1,O.s0=A(" "),O.s1=A(" "),O.s2=A(" "),O.s0-=A(R),O.s0<0&&(O.s0+=1),O.s1-=A(R),O.s1<0&&(O.s1+=1),O.s2-=A(R),O.s2<0&&(O.s2+=1),A=null}function K(R,O){return O.c=R.c,O.s0=R.s0,O.s1=R.s1,O.s2=R.s2,O}function ne(R,O){var A=new ue(R),E=O&&O.state,M=A.next;return M.int32=function(){return 4294967296*A.next()|0},M.double=function(){return M()+11102230246251565e-32*(2097152*M()|0)},M.quick=M,E&&("object"==typeof E&&K(E,A),M.state=function(){return K(A,{})}),M}J&&J.exports?J.exports=ne:z.amdD&&z.amdO?void 0!==($=function(){return ne}.call(Se,z,Se,J))&&(J.exports=$):this.alea=ne}(0,_e=z.nmd(_e))},8083:function(_e,Se,z){var $;!function(L,J,re){function ue(P){var R=this,O="";R.next=function(){var E=R.b,M=R.c,V=R.d,U=R.a;return E=E<<25^E>>>7^M,M=M-V|0,V=V<<24^V>>>8^U,U=U-E|0,R.b=E=E<<20^E>>>12^M,R.c=M=M-V|0,R.d=V<<16^M>>>16^U,R.a=U-E|0},R.a=0,R.b=0,R.c=-1640531527,R.d=1367130551,P===Math.floor(P)?(R.a=P/4294967296|0,R.b=0|P):O+=P;for(var A=0;A<O.length+20;A++)R.b^=0|O.charCodeAt(A),R.next()}function K(P,R){return R.a=P.a,R.b=P.b,R.c=P.c,R.d=P.d,R}function ne(P,R){var O=new ue(P),A=R&&R.state,E=function(){return(O.next()>>>0)/4294967296};return E.double=function(){do{var U=((O.next()>>>11)+(O.next()>>>0)/4294967296)/(1<<21)}while(0===U);return U},E.int32=O.next,E.quick=E,A&&("object"==typeof A&&K(A,O),E.state=function(){return K(O,{})}),E}J&&J.exports?J.exports=ne:z.amdD&&z.amdO?void 0!==($=function(){return ne}.call(Se,z,Se,J))&&(J.exports=$):this.tychei=ne}(0,_e=z.nmd(_e))},2992:function(_e,Se,z){var $;!function(L,J,re){function ue(P){var R=this,O="";R.x=0,R.y=0,R.z=0,R.w=0,R.next=function(){var E=R.x^R.x<<11;return R.x=R.y,R.y=R.z,R.z=R.w,R.w^=R.w>>>19^E^E>>>8},P===(0|P)?R.x=P:O+=P;for(var A=0;A<O.length+64;A++)R.x^=0|O.charCodeAt(A),R.next()}function K(P,R){return R.x=P.x,R.y=P.y,R.z=P.z,R.w=P.w,R}function ne(P,R){var O=new ue(P),A=R&&R.state,E=function(){return(O.next()>>>0)/4294967296};return E.double=function(){do{var U=((O.next()>>>11)+(O.next()>>>0)/4294967296)/(1<<21)}while(0===U);return U},E.int32=O.next,E.quick=E,A&&("object"==typeof A&&K(A,O),E.state=function(){return K(O,{})}),E}J&&J.exports?J.exports=ne:z.amdD&&z.amdO?void 0!==($=function(){return ne}.call(Se,z,Se,J))&&(J.exports=$):this.xor128=ne}(0,_e=z.nmd(_e))},1929:function(_e,Se,z){var $;!function(L,J,re){function ue(P){var R=this;R.next=function(){var V,U,A=R.w,E=R.X,M=R.i;return R.w=A=A+1640531527|0,U=E[M+34&127],V=E[M=M+1&127],U^=U<<13,V^=V<<17,U=E[M]=(U^=U>>>15)^(V^=V>>>12),R.i=M,U+(A^A>>>16)|0},function O(A,E){var M,V,U,ae,ie,B=[],j=128;for(E===(0|E)?(V=E,E=null):(E+="\0",V=0,j=Math.max(j,E.length)),U=0,ae=-32;ae<j;++ae)E&&(V^=E.charCodeAt((ae+32)%E.length)),0===ae&&(ie=V),V^=V<<10,V^=V>>>15,V^=V<<4,V^=V>>>13,ae>=0&&(U=0==(M=B[127&ae]^=V+(ie=ie+1640531527|0))?U+1:0);for(U>=128&&(B[127&(E&&E.length||0)]=-1),U=127,ae=512;ae>0;--ae)V=B[U+34&127],M=B[U=U+1&127],V^=V<<13,M^=M<<17,B[U]=(V^=V>>>15)^(M^=M>>>12);A.w=ie,A.X=B,A.i=U}(R,P)}function K(P,R){return R.i=P.i,R.w=P.w,R.X=P.X.slice(),R}function ne(P,R){null==P&&(P=+new Date);var O=new ue(P),A=R&&R.state,E=function(){return(O.next()>>>0)/4294967296};return E.double=function(){do{var U=((O.next()>>>11)+(O.next()>>>0)/4294967296)/(1<<21)}while(0===U);return U},E.int32=O.next,E.quick=E,A&&(A.X&&K(A,O),E.state=function(){return K(O,{})}),E}J&&J.exports?J.exports=ne:z.amdD&&z.amdO?void 0!==($=function(){return ne}.call(Se,z,Se,J))&&(J.exports=$):this.xor4096=ne}(0,_e=z.nmd(_e))},5583:function(_e,Se,z){var $;!function(L,J,re){function ue(P){var R=this;R.next=function(){var M,V,A=R.x,E=R.i;return M=A[E],V=(M^=M>>>7)^M<<24,V^=(M=A[E+1&7])^M>>>10,V^=(M=A[E+3&7])^M>>>3,V^=(M=A[E+4&7])^M<<7,M=A[E+7&7],A[E]=V^=(M^=M<<13)^M<<9,R.i=E+1&7,V},function O(A,E){var M,U=[];if(E===(0|E))U[0]=E;else for(E=""+E,M=0;M<E.length;++M)U[7&M]=U[7&M]<<15^E.charCodeAt(M)+U[M+1&7]<<13;for(;U.length<8;)U.push(0);for(M=0;M<8&&0===U[M];++M);for(8==M&&(U[7]=-1),A.x=U,A.i=0,M=256;M>0;--M)A.next()}(R,P)}function K(P,R){return R.x=P.x.slice(),R.i=P.i,R}function ne(P,R){null==P&&(P=+new Date);var O=new ue(P),A=R&&R.state,E=function(){return(O.next()>>>0)/4294967296};return E.double=function(){do{var U=((O.next()>>>11)+(O.next()>>>0)/4294967296)/(1<<21)}while(0===U);return U},E.int32=O.next,E.quick=E,A&&(A.x&&K(A,O),E.state=function(){return K(O,{})}),E}J&&J.exports?J.exports=ne:z.amdD&&z.amdO?void 0!==($=function(){return ne}.call(Se,z,Se,J))&&(J.exports=$):this.xorshift7=ne}(0,_e=z.nmd(_e))},7657:function(_e,Se,z){var $;!function(L,J,re){function ue(P){var R=this,O="";R.next=function(){var E=R.x^R.x>>>2;return R.x=R.y,R.y=R.z,R.z=R.w,R.w=R.v,(R.d=R.d+362437|0)+(R.v=R.v^R.v<<4^E^E<<1)|0},R.x=0,R.y=0,R.z=0,R.w=0,R.v=0,P===(0|P)?R.x=P:O+=P;for(var A=0;A<O.length+64;A++)R.x^=0|O.charCodeAt(A),A==O.length&&(R.d=R.x<<10^R.x>>>4),R.next()}function K(P,R){return R.x=P.x,R.y=P.y,R.z=P.z,R.w=P.w,R.v=P.v,R.d=P.d,R}function ne(P,R){var O=new ue(P),A=R&&R.state,E=function(){return(O.next()>>>0)/4294967296};return E.double=function(){do{var U=((O.next()>>>11)+(O.next()>>>0)/4294967296)/(1<<21)}while(0===U);return U},E.int32=O.next,E.quick=E,A&&("object"==typeof A&&K(A,O),E.state=function(){return K(O,{})}),E}J&&J.exports?J.exports=ne:z.amdD&&z.amdO?void 0!==($=function(){return ne}.call(Se,z,Se,J))&&(J.exports=$):this.xorwow=ne}(0,_e=z.nmd(_e))},3818:function(_e,Se,z){var $;!function(L,J,re){var M,ue=256,R=re.pow(ue,6),O=re.pow(2,52),A=2*O,E=255;function V(ee,se,oe){var we=[],ve=B(ie((se=1==se?{entropy:!0}:se||{}).entropy?[ee,le(J)]:null==ee?function j(){try{var ee;return M&&(ee=M.randomBytes)?ee=ee(ue):(ee=new Uint8Array(ue),(L.crypto||L.msCrypto).getRandomValues(ee)),le(ee)}catch(we){var se=L.navigator,oe=se&&se.plugins;return[+new Date,L,oe,L.screen,le(J)]}}():ee,3),we),Pe=new U(we),Be=function(){for(var he=Pe.g(6),Re=R,Ie=0;he<O;)he=(he+Ie)*ue,Re*=ue,Ie=Pe.g(1);for(;he>=A;)he/=2,Re/=2,Ie>>>=1;return(he+Ie)/Re};return Be.int32=function(){return 0|Pe.g(4)},Be.quick=function(){return Pe.g(4)/4294967296},Be.double=Be,B(le(Pe.S),J),(se.pass||oe||function(he,Re,Ie,xe){return xe&&(xe.S&&ae(xe,Pe),he.state=function(){return ae(Pe,{})}),Ie?(re.random=he,Re):he})(Be,ve,"global"in se?se.global:this==re,se.state)}function U(ee){var se,oe=ee.length,we=this,ve=0,Pe=we.i=we.j=0,Be=we.S=[];for(oe||(ee=[oe++]);ve<ue;)Be[ve]=ve++;for(ve=0;ve<ue;ve++)Be[ve]=Be[Pe=E&Pe+ee[ve%oe]+(se=Be[ve])],Be[Pe]=se;(we.g=function(he){for(var Re,Ie=0,xe=we.i,tt=we.j,Ne=we.S;he--;)Re=Ne[xe=E&xe+1],Ie=Ie*ue+Ne[E&(Ne[xe]=Ne[tt=E&tt+Re])+(Ne[tt]=Re)];return we.i=xe,we.j=tt,Ie})(ue)}function ae(ee,se){return se.i=ee.i,se.j=ee.j,se.S=ee.S.slice(),se}function ie(ee,se){var ve,oe=[],we=typeof ee;if(se&&"object"==we)for(ve in ee)try{oe.push(ie(ee[ve],se-1))}catch(Pe){}return oe.length?oe:"string"==we?ee:ee+"\0"}function B(ee,se){for(var we,oe=ee+"",ve=0;ve<oe.length;)se[E&ve]=E&(we^=19*se[E&ve])+oe.charCodeAt(ve++);return le(se)}function le(ee){return String.fromCharCode.apply(0,ee)}if(B(re.random(),J),_e.exports){_e.exports=V;try{M=z(5042)}catch(ee){}}else void 0!==($=function(){return V}.call(Se,z,Se,_e))&&(_e.exports=$)}("undefined"!=typeof self?self:this,[],Math)},2480:()=>{},5042:()=>{}},_e=>{_e(_e.s=2191)}]);